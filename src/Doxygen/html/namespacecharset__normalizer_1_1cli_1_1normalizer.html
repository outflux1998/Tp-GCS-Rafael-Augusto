<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: charset_normalizer.cli.normalizer Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecharset__normalizer.html">charset_normalizer</a></li><li class="navelem"><a class="el" href="namespacecharset__normalizer_1_1cli.html">cli</a></li><li class="navelem"><a class="el" href="namespacecharset__normalizer_1_1cli_1_1normalizer.html">normalizer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">charset_normalizer.cli.normalizer Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7f69e9634eecdd9fcc1a51cd9c3cfd59" id="r_a7f69e9634eecdd9fcc1a51cd9c3cfd59"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharset__normalizer_1_1cli_1_1normalizer.html#a7f69e9634eecdd9fcc1a51cd9c3cfd59">query_yes_no</a> (str question, str default=&quot;yes&quot;)</td></tr>
<tr class="separator:a7f69e9634eecdd9fcc1a51cd9c3cfd59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abdf65ecbad6f62daa855cf0218ee6b" id="r_a1abdf65ecbad6f62daa855cf0218ee6b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharset__normalizer_1_1cli_1_1normalizer.html#a1abdf65ecbad6f62daa855cf0218ee6b">cli_detect</a> (Optional[List[str]] argv=None)</td></tr>
<tr class="separator:a1abdf65ecbad6f62daa855cf0218ee6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1abdf65ecbad6f62daa855cf0218ee6b" name="a1abdf65ecbad6f62daa855cf0218ee6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1abdf65ecbad6f62daa855cf0218ee6b">&#9670;&#160;</a></span>cli_detect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int charset_normalizer.cli.normalizer.cli_detect </td>
          <td>(</td>
          <td class="paramtype">Optional[List[str]] &#160;</td>
          <td class="paramname"><em>argv</em> = <code>None</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">CLI assistant using ARGV and ArgumentParser
:param argv:
:return: 0 if everything is fine, anything else equal trouble
</pre> <div class="fragment"><div class="line"><span class="lineno">   51</span><span class="keyword">def </span>cli_detect(argv: Optional[List[str]] = <span class="keywordtype">None</span>) -&gt; int:</div>
<div class="line"><span class="lineno">   52</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    CLI assistant using ARGV and ArgumentParser</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    :param argv:</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">    :return: 0 if everything is fine, anything else equal trouble</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   57</span>    parser = argparse.ArgumentParser(</div>
<div class="line"><span class="lineno">   58</span>        description=<span class="stringliteral">&quot;The Real First Universal Charset Detector. &quot;</span></div>
<div class="line"><span class="lineno">   59</span>        <span class="stringliteral">&quot;Discover originating encoding used on text file. &quot;</span></div>
<div class="line"><span class="lineno">   60</span>        <span class="stringliteral">&quot;Normalize text to unicode.&quot;</span></div>
<div class="line"><span class="lineno">   61</span>    )</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   64</span>        <span class="stringliteral">&quot;files&quot;</span>, type=argparse.FileType(<span class="stringliteral">&quot;rb&quot;</span>), nargs=<span class="stringliteral">&quot;+&quot;</span>, help=<span class="stringliteral">&quot;File(s) to be analysed&quot;</span></div>
<div class="line"><span class="lineno">   65</span>    )</div>
<div class="line"><span class="lineno">   66</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   67</span>        <span class="stringliteral">&quot;-v&quot;</span>,</div>
<div class="line"><span class="lineno">   68</span>        <span class="stringliteral">&quot;--verbose&quot;</span>,</div>
<div class="line"><span class="lineno">   69</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno">   70</span>        default=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   71</span>        dest=<span class="stringliteral">&quot;verbose&quot;</span>,</div>
<div class="line"><span class="lineno">   72</span>        help=<span class="stringliteral">&quot;Display complementary information about file if any. &quot;</span></div>
<div class="line"><span class="lineno">   73</span>        <span class="stringliteral">&quot;Stdout will contain logs about the detection process.&quot;</span>,</div>
<div class="line"><span class="lineno">   74</span>    )</div>
<div class="line"><span class="lineno">   75</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   76</span>        <span class="stringliteral">&quot;-a&quot;</span>,</div>
<div class="line"><span class="lineno">   77</span>        <span class="stringliteral">&quot;--with-alternative&quot;</span>,</div>
<div class="line"><span class="lineno">   78</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno">   79</span>        default=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   80</span>        dest=<span class="stringliteral">&quot;alternatives&quot;</span>,</div>
<div class="line"><span class="lineno">   81</span>        help=<span class="stringliteral">&quot;Output complementary possibilities if any. Top-level JSON WILL be a list.&quot;</span>,</div>
<div class="line"><span class="lineno">   82</span>    )</div>
<div class="line"><span class="lineno">   83</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   84</span>        <span class="stringliteral">&quot;-n&quot;</span>,</div>
<div class="line"><span class="lineno">   85</span>        <span class="stringliteral">&quot;--normalize&quot;</span>,</div>
<div class="line"><span class="lineno">   86</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno">   87</span>        default=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   88</span>        dest=<span class="stringliteral">&quot;normalize&quot;</span>,</div>
<div class="line"><span class="lineno">   89</span>        help=<span class="stringliteral">&quot;Permit to normalize input file. If not set, program does not write anything.&quot;</span>,</div>
<div class="line"><span class="lineno">   90</span>    )</div>
<div class="line"><span class="lineno">   91</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">   92</span>        <span class="stringliteral">&quot;-m&quot;</span>,</div>
<div class="line"><span class="lineno">   93</span>        <span class="stringliteral">&quot;--minimal&quot;</span>,</div>
<div class="line"><span class="lineno">   94</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno">   95</span>        default=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   96</span>        dest=<span class="stringliteral">&quot;minimal&quot;</span>,</div>
<div class="line"><span class="lineno">   97</span>        help=<span class="stringliteral">&quot;Only output the charset detected to STDOUT. Disabling JSON output.&quot;</span>,</div>
<div class="line"><span class="lineno">   98</span>    )</div>
<div class="line"><span class="lineno">   99</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">  100</span>        <span class="stringliteral">&quot;-r&quot;</span>,</div>
<div class="line"><span class="lineno">  101</span>        <span class="stringliteral">&quot;--replace&quot;</span>,</div>
<div class="line"><span class="lineno">  102</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno">  103</span>        default=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  104</span>        dest=<span class="stringliteral">&quot;replace&quot;</span>,</div>
<div class="line"><span class="lineno">  105</span>        help=<span class="stringliteral">&quot;Replace file when trying to normalize it instead of creating a new one.&quot;</span>,</div>
<div class="line"><span class="lineno">  106</span>    )</div>
<div class="line"><span class="lineno">  107</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">  108</span>        <span class="stringliteral">&quot;-f&quot;</span>,</div>
<div class="line"><span class="lineno">  109</span>        <span class="stringliteral">&quot;--force&quot;</span>,</div>
<div class="line"><span class="lineno">  110</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno">  111</span>        default=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  112</span>        dest=<span class="stringliteral">&quot;force&quot;</span>,</div>
<div class="line"><span class="lineno">  113</span>        help=<span class="stringliteral">&quot;Replace file without asking if you are sure, use this flag with caution.&quot;</span>,</div>
<div class="line"><span class="lineno">  114</span>    )</div>
<div class="line"><span class="lineno">  115</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">  116</span>        <span class="stringliteral">&quot;-t&quot;</span>,</div>
<div class="line"><span class="lineno">  117</span>        <span class="stringliteral">&quot;--threshold&quot;</span>,</div>
<div class="line"><span class="lineno">  118</span>        action=<span class="stringliteral">&quot;store&quot;</span>,</div>
<div class="line"><span class="lineno">  119</span>        default=0.2,</div>
<div class="line"><span class="lineno">  120</span>        type=float,</div>
<div class="line"><span class="lineno">  121</span>        dest=<span class="stringliteral">&quot;threshold&quot;</span>,</div>
<div class="line"><span class="lineno">  122</span>        help=<span class="stringliteral">&quot;Define a custom maximum amount of chaos allowed in decoded content. 0. &lt;= chaos &lt;= 1.&quot;</span>,</div>
<div class="line"><span class="lineno">  123</span>    )</div>
<div class="line"><span class="lineno">  124</span>    parser.add_argument(</div>
<div class="line"><span class="lineno">  125</span>        <span class="stringliteral">&quot;--version&quot;</span>,</div>
<div class="line"><span class="lineno">  126</span>        action=<span class="stringliteral">&quot;version&quot;</span>,</div>
<div class="line"><span class="lineno">  127</span>        version=<span class="stringliteral">&quot;Charset-Normalizer {} - Python {} - Unicode {}&quot;</span>.format(</div>
<div class="line"><span class="lineno">  128</span>            __version__, python_version(), unidata_version</div>
<div class="line"><span class="lineno">  129</span>        ),</div>
<div class="line"><span class="lineno">  130</span>        help=<span class="stringliteral">&quot;Show version information and exit.&quot;</span>,</div>
<div class="line"><span class="lineno">  131</span>    )</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    args = parser.parse_args(argv)</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">if</span> args.replace <span class="keywordflow">is</span> <span class="keyword">True</span> <span class="keywordflow">and</span> args.normalize <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  136</span>        print(<span class="stringliteral">&quot;Use --replace in addition of --normalize only.&quot;</span>, file=sys.stderr)</div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">return</span> 1</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">if</span> args.force <span class="keywordflow">is</span> <span class="keyword">True</span> <span class="keywordflow">and</span> args.replace <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  140</span>        print(<span class="stringliteral">&quot;Use --force in addition of --replace only.&quot;</span>, file=sys.stderr)</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">return</span> 1</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">if</span> args.threshold &lt; 0.0 <span class="keywordflow">or</span> args.threshold &gt; 1.0:</div>
<div class="line"><span class="lineno">  144</span>        print(<span class="stringliteral">&quot;--threshold VALUE should be between 0. AND 1.&quot;</span>, file=sys.stderr)</div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">return</span> 1</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    x_ = []</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">for</span> my_file <span class="keywordflow">in</span> args.files:</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        matches = from_fp(my_file, threshold=args.threshold, explain=args.verbose)</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>        best_guess = matches.best()</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">if</span> best_guess <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  156</span>            print(</div>
<div class="line"><span class="lineno">  157</span>                <span class="stringliteral">&#39;Unable to identify originating encoding for &quot;{}&quot;. {}&#39;</span>.format(</div>
<div class="line"><span class="lineno">  158</span>                    my_file.name,</div>
<div class="line"><span class="lineno">  159</span>                    <span class="stringliteral">&quot;Maybe try increasing maximum amount of chaos.&quot;</span></div>
<div class="line"><span class="lineno">  160</span>                    <span class="keywordflow">if</span> args.threshold &lt; 1.0</div>
<div class="line"><span class="lineno">  161</span>                    <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><span class="lineno">  162</span>                ),</div>
<div class="line"><span class="lineno">  163</span>                file=sys.stderr,</div>
<div class="line"><span class="lineno">  164</span>            )</div>
<div class="line"><span class="lineno">  165</span>            x_.append(</div>
<div class="line"><span class="lineno">  166</span>                CliDetectionResult(</div>
<div class="line"><span class="lineno">  167</span>                    abspath(my_file.name),</div>
<div class="line"><span class="lineno">  168</span>                    <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  169</span>                    [],</div>
<div class="line"><span class="lineno">  170</span>                    [],</div>
<div class="line"><span class="lineno">  171</span>                    <span class="stringliteral">&quot;Unknown&quot;</span>,</div>
<div class="line"><span class="lineno">  172</span>                    [],</div>
<div class="line"><span class="lineno">  173</span>                    <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  174</span>                    1.0,</div>
<div class="line"><span class="lineno">  175</span>                    0.0,</div>
<div class="line"><span class="lineno">  176</span>                    <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  177</span>                    <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  178</span>                )</div>
<div class="line"><span class="lineno">  179</span>            )</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  181</span>            x_.append(</div>
<div class="line"><span class="lineno">  182</span>                CliDetectionResult(</div>
<div class="line"><span class="lineno">  183</span>                    abspath(my_file.name),</div>
<div class="line"><span class="lineno">  184</span>                    best_guess.encoding,</div>
<div class="line"><span class="lineno">  185</span>                    best_guess.encoding_aliases,</div>
<div class="line"><span class="lineno">  186</span>                    [</div>
<div class="line"><span class="lineno">  187</span>                        cp</div>
<div class="line"><span class="lineno">  188</span>                        <span class="keywordflow">for</span> cp <span class="keywordflow">in</span> best_guess.could_be_from_charset</div>
<div class="line"><span class="lineno">  189</span>                        <span class="keywordflow">if</span> cp != best_guess.encoding</div>
<div class="line"><span class="lineno">  190</span>                    ],</div>
<div class="line"><span class="lineno">  191</span>                    best_guess.language,</div>
<div class="line"><span class="lineno">  192</span>                    best_guess.alphabets,</div>
<div class="line"><span class="lineno">  193</span>                    best_guess.bom,</div>
<div class="line"><span class="lineno">  194</span>                    best_guess.percent_chaos,</div>
<div class="line"><span class="lineno">  195</span>                    best_guess.percent_coherence,</div>
<div class="line"><span class="lineno">  196</span>                    <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  197</span>                    <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  198</span>                )</div>
<div class="line"><span class="lineno">  199</span>            )</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>            <span class="keywordflow">if</span> len(matches) &gt; 1 <span class="keywordflow">and</span> args.alternatives:</div>
<div class="line"><span class="lineno">  202</span>                <span class="keywordflow">for</span> el <span class="keywordflow">in</span> matches:</div>
<div class="line"><span class="lineno">  203</span>                    <span class="keywordflow">if</span> el != best_guess:</div>
<div class="line"><span class="lineno">  204</span>                        x_.append(</div>
<div class="line"><span class="lineno">  205</span>                            CliDetectionResult(</div>
<div class="line"><span class="lineno">  206</span>                                abspath(my_file.name),</div>
<div class="line"><span class="lineno">  207</span>                                el.encoding,</div>
<div class="line"><span class="lineno">  208</span>                                el.encoding_aliases,</div>
<div class="line"><span class="lineno">  209</span>                                [</div>
<div class="line"><span class="lineno">  210</span>                                    cp</div>
<div class="line"><span class="lineno">  211</span>                                    <span class="keywordflow">for</span> cp <span class="keywordflow">in</span> el.could_be_from_charset</div>
<div class="line"><span class="lineno">  212</span>                                    <span class="keywordflow">if</span> cp != el.encoding</div>
<div class="line"><span class="lineno">  213</span>                                ],</div>
<div class="line"><span class="lineno">  214</span>                                el.language,</div>
<div class="line"><span class="lineno">  215</span>                                el.alphabets,</div>
<div class="line"><span class="lineno">  216</span>                                el.bom,</div>
<div class="line"><span class="lineno">  217</span>                                el.percent_chaos,</div>
<div class="line"><span class="lineno">  218</span>                                el.percent_coherence,</div>
<div class="line"><span class="lineno">  219</span>                                <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  220</span>                                <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  221</span>                            )</div>
<div class="line"><span class="lineno">  222</span>                        )</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>            <span class="keywordflow">if</span> args.normalize <span class="keywordflow">is</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>                <span class="keywordflow">if</span> best_guess.encoding.startswith(<span class="stringliteral">&quot;utf&quot;</span>) <span class="keywordflow">is</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  227</span>                    print(</div>
<div class="line"><span class="lineno">  228</span>                        <span class="stringliteral">&#39;&quot;{}&quot; file does not need to be normalized, as it already came from unicode.&#39;</span>.format(</div>
<div class="line"><span class="lineno">  229</span>                            my_file.name</div>
<div class="line"><span class="lineno">  230</span>                        ),</div>
<div class="line"><span class="lineno">  231</span>                        file=sys.stderr,</div>
<div class="line"><span class="lineno">  232</span>                    )</div>
<div class="line"><span class="lineno">  233</span>                    <span class="keywordflow">if</span> my_file.closed <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  234</span>                        my_file.close()</div>
<div class="line"><span class="lineno">  235</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>                o_: List[str] = my_file.name.split(<span class="stringliteral">&quot;.&quot;</span>)</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>                <span class="keywordflow">if</span> args.replace <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  240</span>                    o_.insert(-1, best_guess.encoding)</div>
<div class="line"><span class="lineno">  241</span>                    <span class="keywordflow">if</span> my_file.closed <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  242</span>                        my_file.close()</div>
<div class="line"><span class="lineno">  243</span>                <span class="keywordflow">elif</span> (</div>
<div class="line"><span class="lineno">  244</span>                    args.force <span class="keywordflow">is</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  245</span>                    <span class="keywordflow">and</span> query_yes_no(</div>
<div class="line"><span class="lineno">  246</span>                        <span class="stringliteral">&#39;Are you sure to normalize &quot;{}&quot; by replacing it ?&#39;</span>.format(</div>
<div class="line"><span class="lineno">  247</span>                            my_file.name</div>
<div class="line"><span class="lineno">  248</span>                        ),</div>
<div class="line"><span class="lineno">  249</span>                        <span class="stringliteral">&quot;no&quot;</span>,</div>
<div class="line"><span class="lineno">  250</span>                    )</div>
<div class="line"><span class="lineno">  251</span>                    <span class="keywordflow">is</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  252</span>                ):</div>
<div class="line"><span class="lineno">  253</span>                    <span class="keywordflow">if</span> my_file.closed <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  254</span>                        my_file.close()</div>
<div class="line"><span class="lineno">  255</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  258</span>                    x_[0].unicode_path = abspath(<span class="stringliteral">&quot;./{}&quot;</span>.format(<span class="stringliteral">&quot;.&quot;</span>.join(o_)))</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>                    <span class="keyword">with</span> open(x_[0].unicode_path, <span class="stringliteral">&quot;w&quot;</span>, encoding=<span class="stringliteral">&quot;utf-8&quot;</span>) <span class="keyword">as</span> fp:</div>
<div class="line"><span class="lineno">  261</span>                        fp.write(str(best_guess))</div>
<div class="line"><span class="lineno">  262</span>                <span class="keywordflow">except</span> IOError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  263</span>                    print(str(e), file=sys.stderr)</div>
<div class="line"><span class="lineno">  264</span>                    <span class="keywordflow">if</span> my_file.closed <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  265</span>                        my_file.close()</div>
<div class="line"><span class="lineno">  266</span>                    <span class="keywordflow">return</span> 2</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">if</span> my_file.closed <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  269</span>            my_file.close()</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <span class="keywordflow">if</span> args.minimal <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  272</span>        print(</div>
<div class="line"><span class="lineno">  273</span>            dumps(</div>
<div class="line"><span class="lineno">  274</span>                [el.__dict__ <span class="keywordflow">for</span> el <span class="keywordflow">in</span> x_] <span class="keywordflow">if</span> len(x_) &gt; 1 <span class="keywordflow">else</span> x_[0].__dict__,</div>
<div class="line"><span class="lineno">  275</span>                ensure_ascii=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  276</span>                indent=4,</div>
<div class="line"><span class="lineno">  277</span>            )</div>
<div class="line"><span class="lineno">  278</span>        )</div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  280</span>        <span class="keywordflow">for</span> my_file <span class="keywordflow">in</span> args.files:</div>
<div class="line"><span class="lineno">  281</span>            print(</div>
<div class="line"><span class="lineno">  282</span>                <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><span class="lineno">  283</span>                    [</div>
<div class="line"><span class="lineno">  284</span>                        el.encoding <span class="keywordflow">or</span> <span class="stringliteral">&quot;undefined&quot;</span></div>
<div class="line"><span class="lineno">  285</span>                        <span class="keywordflow">for</span> el <span class="keywordflow">in</span> x_</div>
<div class="line"><span class="lineno">  286</span>                        <span class="keywordflow">if</span> el.path == abspath(my_file.name)</div>
<div class="line"><span class="lineno">  287</span>                    ]</div>
<div class="line"><span class="lineno">  288</span>                )</div>
<div class="line"><span class="lineno">  289</span>            )</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    <span class="keywordflow">return</span> 0</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f69e9634eecdd9fcc1a51cd9c3cfd59" name="a7f69e9634eecdd9fcc1a51cd9c3cfd59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f69e9634eecdd9fcc1a51cd9c3cfd59">&#9670;&#160;</a></span>query_yes_no()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bool charset_normalizer.cli.normalizer.query_yes_no </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>question</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str &#160;</td>
          <td class="paramname"><em>default</em> = <code>&quot;yes&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Ask a yes/no question via input() and return their answer.

"question" is a string that is presented to the user.
"default" is the presumed answer if the user just hits &lt;Enter&gt;.
    It must be "yes" (the default), "no" or None (meaning
    an answer is required of the user).

The "answer" return value is True for "yes" or False for "no".

Credit goes to (c) https://stackoverflow.com/questions/3041986/apt-command-line-interface-like-yes-no-input
</pre> <div class="fragment"><div class="line"><span class="lineno">   18</span><span class="keyword">def </span>query_yes_no(question: str, default: str = <span class="stringliteral">&quot;yes&quot;</span>) -&gt; bool:</div>
<div class="line"><span class="lineno">   19</span>    <span class="stringliteral">&quot;&quot;&quot;Ask a yes/no question via input() and return their answer.</span></div>
<div class="line"><span class="lineno">   20</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   21</span><span class="stringliteral">    &quot;question&quot; is a string that is presented to the user.</span></div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">    &quot;default&quot; is the presumed answer if the user just hits &lt;Enter&gt;.</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">        It must be &quot;yes&quot; (the default), &quot;no&quot; or None (meaning</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">        an answer is required of the user).</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">    The &quot;answer&quot; return value is True for &quot;yes&quot; or False for &quot;no&quot;.</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    Credit goes to (c) https://stackoverflow.com/questions/3041986/apt-command-line-interface-like-yes-no-input</span></div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   30</span>    valid = {<span class="stringliteral">&quot;yes&quot;</span>: <span class="keyword">True</span>, <span class="stringliteral">&quot;y&quot;</span>: <span class="keyword">True</span>, <span class="stringliteral">&quot;ye&quot;</span>: <span class="keyword">True</span>, <span class="stringliteral">&quot;no&quot;</span>: <span class="keyword">False</span>, <span class="stringliteral">&quot;n&quot;</span>: <span class="keyword">False</span>}</div>
<div class="line"><span class="lineno">   31</span>    <span class="keywordflow">if</span> default <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   32</span>        prompt = <span class="stringliteral">&quot; [y/n] &quot;</span></div>
<div class="line"><span class="lineno">   33</span>    <span class="keywordflow">elif</span> default == <span class="stringliteral">&quot;yes&quot;</span>:</div>
<div class="line"><span class="lineno">   34</span>        prompt = <span class="stringliteral">&quot; [Y/n] &quot;</span></div>
<div class="line"><span class="lineno">   35</span>    <span class="keywordflow">elif</span> default == <span class="stringliteral">&quot;no&quot;</span>:</div>
<div class="line"><span class="lineno">   36</span>        prompt = <span class="stringliteral">&quot; [y/N] &quot;</span></div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;invalid default answer: &#39;%s&#39;&quot;</span> % default)</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">   41</span>        sys.stdout.write(question + prompt)</div>
<div class="line"><span class="lineno">   42</span>        choice = input().lower()</div>
<div class="line"><span class="lineno">   43</span>        <span class="keywordflow">if</span> default <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> choice == <span class="stringliteral">&quot;&quot;</span>:</div>
<div class="line"><span class="lineno">   44</span>            <span class="keywordflow">return</span> valid[default]</div>
<div class="line"><span class="lineno">   45</span>        <span class="keywordflow">elif</span> choice <span class="keywordflow">in</span> valid:</div>
<div class="line"><span class="lineno">   46</span>            <span class="keywordflow">return</span> valid[choice]</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   48</span>            sys.stdout.write(<span class="stringliteral">&quot;Please respond with &#39;yes&#39; or &#39;no&#39; &quot;</span> <span class="stringliteral">&quot;(or &#39;y&#39; or &#39;n&#39;).\n&quot;</span>)</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
