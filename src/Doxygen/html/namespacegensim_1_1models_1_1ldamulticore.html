<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: gensim.models.ldamulticore Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegensim.html">gensim</a></li><li class="navelem"><a class="el" href="namespacegensim_1_1models.html">models</a></li><li class="navelem"><a class="el" href="namespacegensim_1_1models_1_1ldamulticore.html">ldamulticore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">gensim.models.ldamulticore Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgensim_1_1models_1_1ldamulticore_1_1_lda_multicore.html">LdaMulticore</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a52cff460c6016bdce646662b61e12e37" id="r_a52cff460c6016bdce646662b61e12e37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1ldamulticore.html#a52cff460c6016bdce646662b61e12e37">worker_e_step</a> (input_queue, result_queue)</td></tr>
<tr class="separator:a52cff460c6016bdce646662b61e12e37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac0d0402c4ebadaf7781ff72a75608329" id="r_ac0d0402c4ebadaf7781ff72a75608329"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1ldamulticore.html#ac0d0402c4ebadaf7781ff72a75608329">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:ac0d0402c4ebadaf7781ff72a75608329"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Online Latent Dirichlet Allocation (LDA) in Python, using all CPU cores to parallelize and speed up model training.

The parallelization uses multiprocessing; in case this doesn't work for you for some reason,
try the :class:`gensim.models.ldamodel.LdaModel` class which is an equivalent, but more straightforward and single-core
implementation.

The training algorithm:

* is **streamed**: training documents may come in sequentially, no random access required,
* runs in **constant memory** w.r.t. the number of documents: size of the
  training corpus does not affect memory footprint, can process corpora larger than RAM

Wall-clock `performance on the English Wikipedia &lt;http://radimrehurek.com/gensim/wiki.html&gt;`_ (2G corpus positions,
3.5M documents, 100K features, 0.54G non-zero entries in the final bag-of-words matrix), requesting 100 topics:


====================================================== ==============
 algorithm                                             training time
====================================================== ==============
 LdaMulticore(workers=1)                               2h30m
 LdaMulticore(workers=2)                               1h24m
 LdaMulticore(workers=3)                               1h6m
 old LdaModel()                                        3h44m
 simply iterating over input corpus = I/O overhead     20m
====================================================== ==============

(Measured on `this i7 server &lt;http://www.hetzner.de/en/hosting/produkte_rootserver/ex40ssd&gt;`_
with 4 physical cores, so that optimal `workers=3`, one less than the number of cores.)

This module allows both LDA model estimation from a training corpus and inference of topic distribution on new,
unseen documents. The model can also be updated with new documents for online training.

The core estimation code is based on the `onlineldavb.py script
&lt;https://github.com/blei-lab/onlineldavb/blob/master/onlineldavb.py&gt;`_, by `Hoffman, Blei, Bach:
Online Learning for Latent Dirichlet Allocation, NIPS 2010 &lt;http://www.cs.princeton.edu/~mdhoffma&gt;`_.

Usage examples
--------------
The constructor estimates Latent Dirichlet Allocation model parameters based on a training corpus

.. sourcecode:: pycon

    &gt;&gt;&gt; from gensim.test.utils import common_corpus, common_dictionary
    &gt;&gt;&gt;
    &gt;&gt;&gt; lda = LdaMulticore(common_corpus, id2word=common_dictionary, num_topics=10)

Save a model to disk, or reload a pre-trained model

.. sourcecode:: pycon

    &gt;&gt;&gt; from gensim.test.utils import datapath
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Save model to disk.
    &gt;&gt;&gt; temp_file = datapath("model")
    &gt;&gt;&gt; lda.save(temp_file)
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Load a potentially pretrained model from disk.
    &gt;&gt;&gt; lda = LdaModel.load(temp_file)

Query, or update the model using new, unseen documents

.. sourcecode:: pycon

    &gt;&gt;&gt; other_texts = [
    ...     ['computer', 'time', 'graph'],
    ...     ['survey', 'response', 'eps'],
    ...     ['human', 'system', 'computer']
    ... ]
    &gt;&gt;&gt; other_corpus = [common_dictionary.doc2bow(text) for text in other_texts]
    &gt;&gt;&gt;
    &gt;&gt;&gt; unseen_doc = other_corpus[0]
    &gt;&gt;&gt; vector = lda[unseen_doc]  # get topic probability distribution for a document
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Update the model by incrementally training on the new corpus.
    &gt;&gt;&gt; lda.update(other_corpus)  # update the LDA model with additional documents</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a52cff460c6016bdce646662b61e12e37" name="a52cff460c6016bdce646662b61e12e37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52cff460c6016bdce646662b61e12e37">&#9670;&#160;</a></span>worker_e_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.ldamulticore.worker_e_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>result_queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Perform E-step for each job.

Parameters
----------
input_queue : queue of (int, list of (int, float), :class:`~gensim.models.lda_worker.Worker`)
    Each element is a job characterized by its ID, the corpus chunk to be processed in BOW format and the worker
    responsible for processing it.
result_queue : queue of :class:`~gensim.models.ldamodel.LdaState`
    After the worker finished the job, the state of the resulting (trained) worker model is appended to this queue.</pre> <div class="fragment"><div class="line"><span class="lineno">  319</span><span class="keyword">def </span>worker_e_step(input_queue, result_queue):</div>
<div class="line"><span class="lineno">  320</span>    <span class="stringliteral">&quot;&quot;&quot;Perform E-step for each job.</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral">    input_queue : queue of (int, list of (int, float), :class:`~gensim.models.lda_worker.Worker`)</span></div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">        Each element is a job characterized by its ID, the corpus chunk to be processed in BOW format and the worker</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral">        responsible for processing it.</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">    result_queue : queue of :class:`~gensim.models.ldamodel.LdaState`</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">        After the worker finished the job, the state of the resulting (trained) worker model is appended to this queue.</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  331</span>    logger.debug(<span class="stringliteral">&quot;worker process entering E-step loop&quot;</span>)</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  333</span>        logger.debug(<span class="stringliteral">&quot;getting a new job&quot;</span>)</div>
<div class="line"><span class="lineno">  334</span>        chunk_no, chunk, worker_lda = input_queue.get()</div>
<div class="line"><span class="lineno">  335</span>        logger.debug(<span class="stringliteral">&quot;processing chunk #%i of %i documents&quot;</span>, chunk_no, len(chunk))</div>
<div class="line"><span class="lineno">  336</span>        worker_lda.state.reset()</div>
<div class="line"><span class="lineno">  337</span>        worker_lda.do_estep(chunk)  <span class="comment"># TODO: auto-tune alpha?</span></div>
<div class="line"><span class="lineno">  338</span>        del chunk</div>
<div class="line"><span class="lineno">  339</span>        logger.debug(<span class="stringliteral">&quot;processed chunk, queuing the result&quot;</span>)</div>
<div class="line"><span class="lineno">  340</span>        result_queue.put(worker_lda.state)</div>
<div class="line"><span class="lineno">  341</span>        del worker_lda  <span class="comment"># free up some memory</span></div>
<div class="line"><span class="lineno">  342</span>        logger.debug(<span class="stringliteral">&quot;result put&quot;</span>)</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac0d0402c4ebadaf7781ff72a75608329" name="ac0d0402c4ebadaf7781ff72a75608329"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0d0402c4ebadaf7781ff72a75608329">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.ldamulticore.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
