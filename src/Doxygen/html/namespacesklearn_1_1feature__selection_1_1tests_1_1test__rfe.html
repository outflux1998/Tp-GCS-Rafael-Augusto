<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.feature_selection.tests.test_rfe Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1feature__selection.html">feature_selection</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html">test_rfe</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sklearn.feature_selection.tests.test_rfe Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1feature__selection_1_1tests_1_1test__rfe_1_1_mock_classifier.html">MockClassifier</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae59ff530d4cb6e50e37c16669374ffb7" id="r_ae59ff530d4cb6e50e37c16669374ffb7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#ae59ff530d4cb6e50e37c16669374ffb7">test_rfe_features_importance</a> ()</td></tr>
<tr class="separator:ae59ff530d4cb6e50e37c16669374ffb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf64ff7c5b098f3778bcdb9d55f2d57a" id="r_abf64ff7c5b098f3778bcdb9d55f2d57a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#abf64ff7c5b098f3778bcdb9d55f2d57a">test_rfe</a> ()</td></tr>
<tr class="separator:abf64ff7c5b098f3778bcdb9d55f2d57a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31706d02e0e34e04279ddbd6da7b38f3" id="r_a31706d02e0e34e04279ddbd6da7b38f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a31706d02e0e34e04279ddbd6da7b38f3">test_RFE_fit_score_params</a> ()</td></tr>
<tr class="separator:a31706d02e0e34e04279ddbd6da7b38f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2cebad79bc5aa4946e49d977416e2d7" id="r_ab2cebad79bc5aa4946e49d977416e2d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#ab2cebad79bc5aa4946e49d977416e2d7">test_rfe_percent_n_features</a> ()</td></tr>
<tr class="separator:ab2cebad79bc5aa4946e49d977416e2d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ee5aff5b0f208401395f3dec326dd36" id="r_a6ee5aff5b0f208401395f3dec326dd36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a6ee5aff5b0f208401395f3dec326dd36">test_rfe_mockclassifier</a> ()</td></tr>
<tr class="separator:a6ee5aff5b0f208401395f3dec326dd36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f0242d6575342332413702a77234d9" id="r_a67f0242d6575342332413702a77234d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a67f0242d6575342332413702a77234d9">test_rfecv</a> ()</td></tr>
<tr class="separator:a67f0242d6575342332413702a77234d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1095771d23150d9f3df788745052578e" id="r_a1095771d23150d9f3df788745052578e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a1095771d23150d9f3df788745052578e">test_rfecv_mockclassifier</a> ()</td></tr>
<tr class="separator:a1095771d23150d9f3df788745052578e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa218e2546e999ddcc699dd30e3e1f08b" id="r_aa218e2546e999ddcc699dd30e3e1f08b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#aa218e2546e999ddcc699dd30e3e1f08b">test_rfecv_verbose_output</a> ()</td></tr>
<tr class="separator:aa218e2546e999ddcc699dd30e3e1f08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a048a151b4498dbb75eb791d33610d9b3" id="r_a048a151b4498dbb75eb791d33610d9b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a048a151b4498dbb75eb791d33610d9b3">test_rfecv_cv_results_size</a> (global_random_seed)</td></tr>
<tr class="separator:a048a151b4498dbb75eb791d33610d9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dd280a09b4ed95497d0968eb740d8cf" id="r_a4dd280a09b4ed95497d0968eb740d8cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a4dd280a09b4ed95497d0968eb740d8cf">test_rfe_estimator_tags</a> ()</td></tr>
<tr class="separator:a4dd280a09b4ed95497d0968eb740d8cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af585b70c78aaa58610e9c80f75894d45" id="r_af585b70c78aaa58610e9c80f75894d45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#af585b70c78aaa58610e9c80f75894d45">test_rfe_min_step</a> (global_random_seed)</td></tr>
<tr class="separator:af585b70c78aaa58610e9c80f75894d45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe40219987080aa19631ee1a27c8255" id="r_a3fe40219987080aa19631ee1a27c8255"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a3fe40219987080aa19631ee1a27c8255">test_number_of_subsets_of_features</a> (global_random_seed)</td></tr>
<tr class="separator:a3fe40219987080aa19631ee1a27c8255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a671e408b5adadbd6341187062a2289" id="r_a0a671e408b5adadbd6341187062a2289"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a0a671e408b5adadbd6341187062a2289">test_rfe_cv_n_jobs</a> (global_random_seed)</td></tr>
<tr class="separator:a0a671e408b5adadbd6341187062a2289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a6f2ce0baea733c74c5162f4216352" id="r_ac0a6f2ce0baea733c74c5162f4216352"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#ac0a6f2ce0baea733c74c5162f4216352">test_rfe_cv_groups</a> ()</td></tr>
<tr class="separator:ac0a6f2ce0baea733c74c5162f4216352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90d0e3149bf0446f44b83fe61d42ecd9" id="r_a90d0e3149bf0446f44b83fe61d42ecd9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a90d0e3149bf0446f44b83fe61d42ecd9">test_rfe_wrapped_estimator</a> (importance_getter, selector, expected_n_features)</td></tr>
<tr class="separator:a90d0e3149bf0446f44b83fe61d42ecd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f85b8b00a62c62995f118099d8bd682" id="r_a1f85b8b00a62c62995f118099d8bd682"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a1f85b8b00a62c62995f118099d8bd682">test_rfe_importance_getter_validation</a> (importance_getter, err_type, Selector)</td></tr>
<tr class="separator:a1f85b8b00a62c62995f118099d8bd682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d09e45bc49659c134403f7f56a9bf71" id="r_a0d09e45bc49659c134403f7f56a9bf71"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a0d09e45bc49659c134403f7f56a9bf71">test_rfe_allow_nan_inf_in_x</a> (cv)</td></tr>
<tr class="separator:a0d09e45bc49659c134403f7f56a9bf71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb2ea62f20eb02970be05a990a209513" id="r_adb2ea62f20eb02970be05a990a209513"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#adb2ea62f20eb02970be05a990a209513">test_w_pipeline_2d_coef_</a> ()</td></tr>
<tr class="separator:adb2ea62f20eb02970be05a990a209513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea2d31c850134fb30da2389f5440c282" id="r_aea2d31c850134fb30da2389f5440c282"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#aea2d31c850134fb30da2389f5440c282">test_rfecv_std_and_mean</a> (global_random_seed)</td></tr>
<tr class="separator:aea2d31c850134fb30da2389f5440c282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f542bd1eca4bb094b142bc6bd0f54d" id="r_af7f542bd1eca4bb094b142bc6bd0f54d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#af7f542bd1eca4bb094b142bc6bd0f54d">test_multioutput</a> (ClsRFE)</td></tr>
<tr class="separator:af7f542bd1eca4bb094b142bc6bd0f54d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a0c5e077236711f4a5d224361c9e42" id="r_a13a0c5e077236711f4a5d224361c9e42"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a13a0c5e077236711f4a5d224361c9e42">test_rfe_pls</a> (ClsRFE, PLSEstimator)</td></tr>
<tr class="separator:a13a0c5e077236711f4a5d224361c9e42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abc30e16c5f39bf970a8e9f47dd10a906" id="r_abc30e16c5f39bf970a8e9f47dd10a906"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#abc30e16c5f39bf970a8e9f47dd10a906">svc_</a></td></tr>
<tr class="separator:abc30e16c5f39bf970a8e9f47dd10a906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3be75111587e42d469f628dd18979d7d" id="r_a3be75111587e42d469f628dd18979d7d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1feature__selection_1_1tests_1_1test__rfe.html#a3be75111587e42d469f628dd18979d7d">coef_</a></td></tr>
<tr class="separator:a3be75111587e42d469f628dd18979d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Testing Recursive feature elimination
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="af7f542bd1eca4bb094b142bc6bd0f54d" name="af7f542bd1eca4bb094b142bc6bd0f54d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7f542bd1eca4bb094b142bc6bd0f54d">&#9670;&#160;</a></span>test_multioutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_multioutput </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ClsRFE</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  554</span><span class="keyword">def </span>test_multioutput(ClsRFE):</div>
<div class="line"><span class="lineno">  555</span>    X = np.random.normal(size=(10, 3))</div>
<div class="line"><span class="lineno">  556</span>    y = np.random.randint(2, size=(10, 2))</div>
<div class="line"><span class="lineno">  557</span>    clf = RandomForestClassifier(n_estimators=5)</div>
<div class="line"><span class="lineno">  558</span>    rfe_test = ClsRFE(clf)</div>
<div class="line"><span class="lineno">  559</span>    rfe_test.fit(X, y)</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span><span class="preprocessor">@pytest.mark.parametrize(&quot;ClsRFE&quot;, [RFE, RFECV])</span></div>
<div class="line"><span class="lineno">  563</span><span class="preprocessor">@pytest.mark.parametrize(&quot;PLSEstimator&quot;, [CCA, PLSCanonical, PLSRegression])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fe40219987080aa19631ee1a27c8255" name="a3fe40219987080aa19631ee1a27c8255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe40219987080aa19631ee1a27c8255">&#9670;&#160;</a></span>test_number_of_subsets_of_features()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_number_of_subsets_of_features </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  357</span><span class="keyword">def </span>test_number_of_subsets_of_features(global_random_seed):</div>
<div class="line"><span class="lineno">  358</span>    <span class="comment"># In RFE, &#39;number_of_subsets_of_features&#39;</span></div>
<div class="line"><span class="lineno">  359</span>    <span class="comment"># = the number of iterations in &#39;_fit&#39;</span></div>
<div class="line"><span class="lineno">  360</span>    <span class="comment"># = max(ranking_)</span></div>
<div class="line"><span class="lineno">  361</span>    <span class="comment"># = 1 + (n_features + step - n_features_to_select - 1) // step</span></div>
<div class="line"><span class="lineno">  362</span>    <span class="comment"># After optimization #4534, this number</span></div>
<div class="line"><span class="lineno">  363</span>    <span class="comment"># = 1 + np.ceil((n_features - n_features_to_select) / float(step))</span></div>
<div class="line"><span class="lineno">  364</span>    <span class="comment"># This test case is to test their equivalence, refer to #4534 and #3824</span></div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>    <span class="keyword">def </span>formula1(n_features, n_features_to_select, step):</div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">return</span> 1 + ((n_features + step - n_features_to_select - 1) // step)</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>    <span class="keyword">def </span>formula2(n_features, n_features_to_select, step):</div>
<div class="line"><span class="lineno">  370</span>        <span class="keywordflow">return</span> 1 + np.ceil((n_features - n_features_to_select) / float(step))</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    <span class="comment"># RFE</span></div>
<div class="line"><span class="lineno">  373</span>    <span class="comment"># Case 1, n_features - n_features_to_select is divisible by step</span></div>
<div class="line"><span class="lineno">  374</span>    <span class="comment"># Case 2, n_features - n_features_to_select is not divisible by step</span></div>
<div class="line"><span class="lineno">  375</span>    n_features_list = [11, 11]</div>
<div class="line"><span class="lineno">  376</span>    n_features_to_select_list = [3, 3]</div>
<div class="line"><span class="lineno">  377</span>    step_list = [2, 3]</div>
<div class="line"><span class="lineno">  378</span>    <span class="keywordflow">for</span> n_features, n_features_to_select, step <span class="keywordflow">in</span> zip(</div>
<div class="line"><span class="lineno">  379</span>        n_features_list, n_features_to_select_list, step_list</div>
<div class="line"><span class="lineno">  380</span>    ):</div>
<div class="line"><span class="lineno">  381</span>        generator = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">  382</span>        X = generator.normal(size=(100, n_features))</div>
<div class="line"><span class="lineno">  383</span>        y = generator.rand(100).round()</div>
<div class="line"><span class="lineno">  384</span>        rfe = RFE(</div>
<div class="line"><span class="lineno">  385</span>            estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>),</div>
<div class="line"><span class="lineno">  386</span>            n_features_to_select=n_features_to_select,</div>
<div class="line"><span class="lineno">  387</span>            step=step,</div>
<div class="line"><span class="lineno">  388</span>        )</div>
<div class="line"><span class="lineno">  389</span>        rfe.fit(X, y)</div>
<div class="line"><span class="lineno">  390</span>        <span class="comment"># this number also equals to the maximum of ranking_</span></div>
<div class="line"><span class="lineno">  391</span>        <span class="keyword">assert</span> np.max(rfe.ranking_) == formula1(n_features, n_features_to_select, step)</div>
<div class="line"><span class="lineno">  392</span>        <span class="keyword">assert</span> np.max(rfe.ranking_) == formula2(n_features, n_features_to_select, step)</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>    <span class="comment"># In RFECV, &#39;fit&#39; calls &#39;RFE._fit&#39;</span></div>
<div class="line"><span class="lineno">  395</span>    <span class="comment"># &#39;number_of_subsets_of_features&#39; of RFE</span></div>
<div class="line"><span class="lineno">  396</span>    <span class="comment"># = the size of each score in &#39;cv_results_&#39; of RFECV</span></div>
<div class="line"><span class="lineno">  397</span>    <span class="comment"># = the number of iterations of the for loop before optimization #4534</span></div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="comment"># RFECV, n_features_to_select = 1</span></div>
<div class="line"><span class="lineno">  400</span>    <span class="comment"># Case 1, n_features - 1 is divisible by step</span></div>
<div class="line"><span class="lineno">  401</span>    <span class="comment"># Case 2, n_features - 1 is not divisible by step</span></div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>    n_features_to_select = 1</div>
<div class="line"><span class="lineno">  404</span>    n_features_list = [11, 10]</div>
<div class="line"><span class="lineno">  405</span>    step_list = [2, 2]</div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordflow">for</span> n_features, step <span class="keywordflow">in</span> zip(n_features_list, step_list):</div>
<div class="line"><span class="lineno">  407</span>        generator = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">  408</span>        X = generator.normal(size=(100, n_features))</div>
<div class="line"><span class="lineno">  409</span>        y = generator.rand(100).round()</div>
<div class="line"><span class="lineno">  410</span>        rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=step)</div>
<div class="line"><span class="lineno">  411</span>        rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> rfecv.cv_results_.keys():</div>
<div class="line"><span class="lineno">  414</span>            <span class="keyword">assert</span> len(rfecv.cv_results_[key]) == formula1(</div>
<div class="line"><span class="lineno">  415</span>                n_features, n_features_to_select, step</div>
<div class="line"><span class="lineno">  416</span>            )</div>
<div class="line"><span class="lineno">  417</span>            <span class="keyword">assert</span> len(rfecv.cv_results_[key]) == formula2(</div>
<div class="line"><span class="lineno">  418</span>                n_features, n_features_to_select, step</div>
<div class="line"><span class="lineno">  419</span>            )</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abf64ff7c5b098f3778bcdb9d55f2d57a" name="abf64ff7c5b098f3778bcdb9d55f2d57a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf64ff7c5b098f3778bcdb9d55f2d57a">&#9670;&#160;</a></span>test_rfe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   87</span><span class="keyword">def </span>test_rfe():</div>
<div class="line"><span class="lineno">   88</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">   89</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">   90</span>    <span class="comment"># Add some irrelevant features. Random seed is set to make sure that</span></div>
<div class="line"><span class="lineno">   91</span>    <span class="comment"># irrelevant features are always irrelevant.</span></div>
<div class="line"><span class="lineno">   92</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">   93</span>    X_sparse = sparse.csr_matrix(X)</div>
<div class="line"><span class="lineno">   94</span>    y = iris.target</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="comment"># dense model</span></div>
<div class="line"><span class="lineno">   97</span>    clf = SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>)</div>
<div class="line"><span class="lineno">   98</span>    rfe = RFE(estimator=clf, n_features_to_select=4, step=0.1)</div>
<div class="line"><span class="lineno">   99</span>    rfe.fit(X, y)</div>
<div class="line"><span class="lineno">  100</span>    X_r = rfe.transform(X)</div>
<div class="line"><span class="lineno">  101</span>    clf.fit(X_r, y)</div>
<div class="line"><span class="lineno">  102</span>    <span class="keyword">assert</span> len(rfe.ranking_) == X.shape[1]</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>    <span class="comment"># sparse model</span></div>
<div class="line"><span class="lineno">  105</span>    clf_sparse = SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>)</div>
<div class="line"><span class="lineno">  106</span>    rfe_sparse = RFE(estimator=clf_sparse, n_features_to_select=4, step=0.1)</div>
<div class="line"><span class="lineno">  107</span>    rfe_sparse.fit(X_sparse, y)</div>
<div class="line"><span class="lineno">  108</span>    X_r_sparse = rfe_sparse.transform(X_sparse)</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="keyword">assert</span> X_r.shape == iris.data.shape</div>
<div class="line"><span class="lineno">  111</span>    assert_array_almost_equal(X_r[:10], iris.data[:10])</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>    assert_array_almost_equal(rfe.predict(X), clf.predict(iris.data))</div>
<div class="line"><span class="lineno">  114</span>    <span class="keyword">assert</span> rfe.score(X, y) == clf.score(iris.data, iris.target)</div>
<div class="line"><span class="lineno">  115</span>    assert_array_almost_equal(X_r, X_r_sparse.toarray())</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d09e45bc49659c134403f7f56a9bf71" name="a0d09e45bc49659c134403f7f56a9bf71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d09e45bc49659c134403f7f56a9bf71">&#9670;&#160;</a></span>test_rfe_allow_nan_inf_in_x()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_allow_nan_inf_in_x </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  502</span><span class="keyword">def </span>test_rfe_allow_nan_inf_in_x(cv):</div>
<div class="line"><span class="lineno">  503</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  504</span>    X = iris.data</div>
<div class="line"><span class="lineno">  505</span>    y = iris.target</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>    <span class="comment"># add nan and inf value to X</span></div>
<div class="line"><span class="lineno">  508</span>    X[0][0] = np.NaN</div>
<div class="line"><span class="lineno">  509</span>    X[0][1] = np.Inf</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordflow">if</span> cv <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  513</span>        rfe = RFECV(estimator=clf, cv=cv)</div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  515</span>        rfe = RFE(estimator=clf)</div>
<div class="line"><span class="lineno">  516</span>    rfe.fit(X, y)</div>
<div class="line"><span class="lineno">  517</span>    rfe.transform(X)</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0a6f2ce0baea733c74c5162f4216352" name="ac0a6f2ce0baea733c74c5162f4216352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a6f2ce0baea733c74c5162f4216352">&#9670;&#160;</a></span>test_rfe_cv_groups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_cv_groups </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  443</span><span class="keyword">def </span>test_rfe_cv_groups():</div>
<div class="line"><span class="lineno">  444</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">  445</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  446</span>    number_groups = 4</div>
<div class="line"><span class="lineno">  447</span>    groups = np.floor(np.linspace(0, number_groups, len(iris.target)))</div>
<div class="line"><span class="lineno">  448</span>    X = iris.data</div>
<div class="line"><span class="lineno">  449</span>    y = (iris.target &gt; 0).astype(int)</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    est_groups = RFECV(</div>
<div class="line"><span class="lineno">  452</span>        estimator=RandomForestClassifier(random_state=generator),</div>
<div class="line"><span class="lineno">  453</span>        step=1,</div>
<div class="line"><span class="lineno">  454</span>        scoring=<span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno">  455</span>        cv=GroupKFold(n_splits=2),</div>
<div class="line"><span class="lineno">  456</span>    )</div>
<div class="line"><span class="lineno">  457</span>    est_groups.fit(X, y, groups=groups)</div>
<div class="line"><span class="lineno">  458</span>    <span class="keyword">assert</span> est_groups.n_features_ &gt; 0</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  462</span>    <span class="stringliteral">&quot;importance_getter&quot;</span>, [attrgetter(<span class="stringliteral">&quot;regressor_.coef_&quot;</span>), <span class="stringliteral">&quot;regressor_.coef_&quot;</span>]</div>
<div class="line"><span class="lineno">  463</span>)</div>
<div class="line"><span class="lineno">  464</span><span class="preprocessor">@pytest.mark.parametrize(&quot;selector, expected_n_features&quot;, [(RFE, 5)</span>, (RFECV, 4)])</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a671e408b5adadbd6341187062a2289" name="a0a671e408b5adadbd6341187062a2289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a671e408b5adadbd6341187062a2289">&#9670;&#160;</a></span>test_rfe_cv_n_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_cv_n_jobs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  422</span><span class="keyword">def </span>test_rfe_cv_n_jobs(global_random_seed):</div>
<div class="line"><span class="lineno">  423</span>    generator = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">  424</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  425</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  426</span>    y = iris.target</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>))</div>
<div class="line"><span class="lineno">  429</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  430</span>    rfecv_ranking = rfecv.ranking_</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>    rfecv_cv_results_ = rfecv.cv_results_</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    rfecv.set_params(n_jobs=2)</div>
<div class="line"><span class="lineno">  435</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  436</span>    assert_array_almost_equal(rfecv.ranking_, rfecv_ranking)</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>    <span class="keyword">assert</span> rfecv_cv_results_.keys() == rfecv.cv_results_.keys()</div>
<div class="line"><span class="lineno">  439</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> rfecv_cv_results_.keys():</div>
<div class="line"><span class="lineno">  440</span>        <span class="keyword">assert</span> rfecv_cv_results_[key] == pytest.approx(rfecv.cv_results_[key])</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4dd280a09b4ed95497d0968eb740d8cf" name="a4dd280a09b4ed95497d0968eb740d8cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dd280a09b4ed95497d0968eb740d8cf">&#9670;&#160;</a></span>test_rfe_estimator_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_estimator_tags </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  324</span><span class="keyword">def </span>test_rfe_estimator_tags():</div>
<div class="line"><span class="lineno">  325</span>    rfe = RFE(SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>))</div>
<div class="line"><span class="lineno">  326</span>    <span class="keyword">assert</span> rfe._estimator_type == <span class="stringliteral">&quot;classifier&quot;</span></div>
<div class="line"><span class="lineno">  327</span>    <span class="comment"># make sure that cross-validation is stratified</span></div>
<div class="line"><span class="lineno">  328</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  329</span>    score = cross_val_score(rfe, iris.data, iris.target)</div>
<div class="line"><span class="lineno">  330</span>    <span class="keyword">assert</span> score.min() &gt; 0.7</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae59ff530d4cb6e50e37c16669374ffb7" name="ae59ff530d4cb6e50e37c16669374ffb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae59ff530d4cb6e50e37c16669374ffb7">&#9670;&#160;</a></span>test_rfe_features_importance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_features_importance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   66</span><span class="keyword">def </span>test_rfe_features_importance():</div>
<div class="line"><span class="lineno">   67</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">   68</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">   69</span>    <span class="comment"># Add some irrelevant features. Random seed is set to make sure that</span></div>
<div class="line"><span class="lineno">   70</span>    <span class="comment"># irrelevant features are always irrelevant.</span></div>
<div class="line"><span class="lineno">   71</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">   72</span>    y = iris.target</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    clf = RandomForestClassifier(n_estimators=20, random_state=generator, max_depth=2)</div>
<div class="line"><span class="lineno">   75</span>    rfe = RFE(estimator=clf, n_features_to_select=4, step=0.1)</div>
<div class="line"><span class="lineno">   76</span>    rfe.fit(X, y)</div>
<div class="line"><span class="lineno">   77</span>    <span class="keyword">assert</span> len(rfe.ranking_) == X.shape[1]</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    clf_svc = SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>)</div>
<div class="line"><span class="lineno">   80</span>    rfe_svc = RFE(estimator=clf_svc, n_features_to_select=4, step=0.1)</div>
<div class="line"><span class="lineno">   81</span>    rfe_svc.fit(X, y)</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment"># Check if the supports are equal</span></div>
<div class="line"><span class="lineno">   84</span>    assert_array_equal(rfe.get_support(), rfe_svc.get_support())</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a31706d02e0e34e04279ddbd6da7b38f3" name="a31706d02e0e34e04279ddbd6da7b38f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31706d02e0e34e04279ddbd6da7b38f3">&#9670;&#160;</a></span>test_RFE_fit_score_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_RFE_fit_score_params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  118</span><span class="keyword">def </span>test_RFE_fit_score_params():</div>
<div class="line"><span class="lineno">  119</span>    <span class="comment"># Make sure RFE passes the metadata down to fit and score methods of the</span></div>
<div class="line"><span class="lineno">  120</span>    <span class="comment"># underlying estimator</span></div>
<div class="line"><span class="lineno">  121</span>    <span class="keyword">class </span>TestEstimator(BaseEstimator, ClassifierMixin):</div>
<div class="line"><span class="lineno">  122</span>        <span class="keyword">def </span>fit(self, X, y, prop=None):</div>
<div class="line"><span class="lineno">  123</span>            <span class="keywordflow">if</span> prop <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  124</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;fit: prop cannot be None&quot;</span>)</div>
<div class="line"><span class="lineno">  125</span>            self.svc_ = SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>).fit(X, y)</div>
<div class="line"><span class="lineno">  126</span>            self.coef_ = self.svc_.coef_</div>
<div class="line"><span class="lineno">  127</span>            <span class="keywordflow">return</span> self</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>        <span class="keyword">def </span>score(self, X, y, prop=None):</div>
<div class="line"><span class="lineno">  130</span>            <span class="keywordflow">if</span> prop <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  131</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;score: prop cannot be None&quot;</span>)</div>
<div class="line"><span class="lineno">  132</span>            <span class="keywordflow">return</span> self.svc_.score(X, y)</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    X, y = load_iris(return_X_y=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  135</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;fit: prop cannot be None&quot;</span>):</div>
<div class="line"><span class="lineno">  136</span>        RFE(estimator=TestEstimator()).fit(X, y)</div>
<div class="line"><span class="lineno">  137</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;score: prop cannot be None&quot;</span>):</div>
<div class="line"><span class="lineno">  138</span>        RFE(estimator=TestEstimator()).fit(X, y, prop=<span class="stringliteral">&quot;foo&quot;</span>).score(X, y)</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    RFE(estimator=TestEstimator()).fit(X, y, prop=<span class="stringliteral">&quot;foo&quot;</span>).score(X, y, prop=<span class="stringliteral">&quot;foo&quot;</span>)</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f85b8b00a62c62995f118099d8bd682" name="a1f85b8b00a62c62995f118099d8bd682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f85b8b00a62c62995f118099d8bd682">&#9670;&#160;</a></span>test_rfe_importance_getter_validation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_importance_getter_validation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>importance_getter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>err_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Selector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  489</span><span class="keyword">def </span>test_rfe_importance_getter_validation(importance_getter, err_type, Selector):</div>
<div class="line"><span class="lineno">  490</span>    X, y = make_friedman1(n_samples=50, n_features=10, random_state=42)</div>
<div class="line"><span class="lineno">  491</span>    estimator = LinearSVR()</div>
<div class="line"><span class="lineno">  492</span>    log_estimator = TransformedTargetRegressor(</div>
<div class="line"><span class="lineno">  493</span>        regressor=estimator, func=np.log, inverse_func=np.exp</div>
<div class="line"><span class="lineno">  494</span>    )</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>    <span class="keyword">with</span> pytest.raises(err_type):</div>
<div class="line"><span class="lineno">  497</span>        model = Selector(log_estimator, importance_getter=importance_getter)</div>
<div class="line"><span class="lineno">  498</span>        model.fit(X, y)</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span><span class="preprocessor">@pytest.mark.parametrize(&quot;cv&quot;, [None, 5])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af585b70c78aaa58610e9c80f75894d45" name="af585b70c78aaa58610e9c80f75894d45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af585b70c78aaa58610e9c80f75894d45">&#9670;&#160;</a></span>test_rfe_min_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_min_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  333</span><span class="keyword">def </span>test_rfe_min_step(global_random_seed):</div>
<div class="line"><span class="lineno">  334</span>    n_features = 10</div>
<div class="line"><span class="lineno">  335</span>    X, y = make_friedman1(</div>
<div class="line"><span class="lineno">  336</span>        n_samples=50, n_features=n_features, random_state=global_random_seed</div>
<div class="line"><span class="lineno">  337</span>    )</div>
<div class="line"><span class="lineno">  338</span>    n_samples, n_features = X.shape</div>
<div class="line"><span class="lineno">  339</span>    estimator = SVR(kernel=<span class="stringliteral">&quot;linear&quot;</span>)</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>    <span class="comment"># Test when floor(step * n_features) &lt;= 0</span></div>
<div class="line"><span class="lineno">  342</span>    selector = RFE(estimator, step=0.01)</div>
<div class="line"><span class="lineno">  343</span>    sel = selector.fit(X, y)</div>
<div class="line"><span class="lineno">  344</span>    <span class="keyword">assert</span> sel.support_.sum() == n_features // 2</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>    <span class="comment"># Test when step is between (0,1) and floor(step * n_features) &gt; 0</span></div>
<div class="line"><span class="lineno">  347</span>    selector = RFE(estimator, step=0.20)</div>
<div class="line"><span class="lineno">  348</span>    sel = selector.fit(X, y)</div>
<div class="line"><span class="lineno">  349</span>    <span class="keyword">assert</span> sel.support_.sum() == n_features // 2</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <span class="comment"># Test when step is an integer</span></div>
<div class="line"><span class="lineno">  352</span>    selector = RFE(estimator, step=5)</div>
<div class="line"><span class="lineno">  353</span>    sel = selector.fit(X, y)</div>
<div class="line"><span class="lineno">  354</span>    <span class="keyword">assert</span> sel.support_.sum() == n_features // 2</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ee5aff5b0f208401395f3dec326dd36" name="a6ee5aff5b0f208401395f3dec326dd36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ee5aff5b0f208401395f3dec326dd36">&#9670;&#160;</a></span>test_rfe_mockclassifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_mockclassifier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  163</span><span class="keyword">def </span>test_rfe_mockclassifier():</div>
<div class="line"><span class="lineno">  164</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">  165</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  166</span>    <span class="comment"># Add some irrelevant features. Random seed is set to make sure that</span></div>
<div class="line"><span class="lineno">  167</span>    <span class="comment"># irrelevant features are always irrelevant.</span></div>
<div class="line"><span class="lineno">  168</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  169</span>    y = iris.target</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    <span class="comment"># dense model</span></div>
<div class="line"><span class="lineno">  172</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno">  173</span>    rfe = RFE(estimator=clf, n_features_to_select=4, step=0.1)</div>
<div class="line"><span class="lineno">  174</span>    rfe.fit(X, y)</div>
<div class="line"><span class="lineno">  175</span>    X_r = rfe.transform(X)</div>
<div class="line"><span class="lineno">  176</span>    clf.fit(X_r, y)</div>
<div class="line"><span class="lineno">  177</span>    <span class="keyword">assert</span> len(rfe.ranking_) == X.shape[1]</div>
<div class="line"><span class="lineno">  178</span>    <span class="keyword">assert</span> X_r.shape == iris.data.shape</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2cebad79bc5aa4946e49d977416e2d7" name="ab2cebad79bc5aa4946e49d977416e2d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2cebad79bc5aa4946e49d977416e2d7">&#9670;&#160;</a></span>test_rfe_percent_n_features()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_percent_n_features </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  143</span><span class="keyword">def </span>test_rfe_percent_n_features():</div>
<div class="line"><span class="lineno">  144</span>    <span class="comment"># test that the results are the same</span></div>
<div class="line"><span class="lineno">  145</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">  146</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  147</span>    <span class="comment"># Add some irrelevant features. Random seed is set to make sure that</span></div>
<div class="line"><span class="lineno">  148</span>    <span class="comment"># irrelevant features are always irrelevant.</span></div>
<div class="line"><span class="lineno">  149</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  150</span>    y = iris.target</div>
<div class="line"><span class="lineno">  151</span>    <span class="comment"># there are 10 features in the data. We select 40%.</span></div>
<div class="line"><span class="lineno">  152</span>    clf = SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>)</div>
<div class="line"><span class="lineno">  153</span>    rfe_num = RFE(estimator=clf, n_features_to_select=4, step=0.1)</div>
<div class="line"><span class="lineno">  154</span>    rfe_num.fit(X, y)</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    rfe_perc = RFE(estimator=clf, n_features_to_select=0.4, step=0.1)</div>
<div class="line"><span class="lineno">  157</span>    rfe_perc.fit(X, y)</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    assert_array_equal(rfe_perc.ranking_, rfe_num.ranking_)</div>
<div class="line"><span class="lineno">  160</span>    assert_array_equal(rfe_perc.support_, rfe_num.support_)</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a13a0c5e077236711f4a5d224361c9e42" name="a13a0c5e077236711f4a5d224361c9e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13a0c5e077236711f4a5d224361c9e42">&#9670;&#160;</a></span>test_rfe_pls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_pls </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ClsRFE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>PLSEstimator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the behaviour of RFE with PLS estimators.

Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/12410
</pre> <div class="fragment"><div class="line"><span class="lineno">  564</span><span class="keyword">def </span>test_rfe_pls(ClsRFE, PLSEstimator):</div>
<div class="line"><span class="lineno">  565</span>    <span class="stringliteral">&quot;&quot;&quot;Check the behaviour of RFE with PLS estimators.</span></div>
<div class="line"><span class="lineno">  566</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  567</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno">  568</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/12410</span></div>
<div class="line"><span class="lineno">  569</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  570</span>    X, y = make_friedman1(n_samples=50, n_features=10, random_state=0)</div>
<div class="line"><span class="lineno">  571</span>    estimator = PLSEstimator(n_components=1)</div>
<div class="line"><span class="lineno">  572</span>    selector = ClsRFE(estimator, step=1).fit(X, y)</div>
<div class="line"><span class="lineno">  573</span>    <span class="keyword">assert</span> selector.score(X, y) &gt; 0.5</div>
</div><!-- fragment -->
</div>
</div>
<a id="a90d0e3149bf0446f44b83fe61d42ecd9" name="a90d0e3149bf0446f44b83fe61d42ecd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90d0e3149bf0446f44b83fe61d42ecd9">&#9670;&#160;</a></span>test_rfe_wrapped_estimator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfe_wrapped_estimator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>importance_getter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>selector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_n_features</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  465</span><span class="keyword">def </span>test_rfe_wrapped_estimator(importance_getter, selector, expected_n_features):</div>
<div class="line"><span class="lineno">  466</span>    <span class="comment"># Non-regression test for</span></div>
<div class="line"><span class="lineno">  467</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/15312</span></div>
<div class="line"><span class="lineno">  468</span>    X, y = make_friedman1(n_samples=50, n_features=10, random_state=0)</div>
<div class="line"><span class="lineno">  469</span>    estimator = LinearSVR(random_state=0)</div>
<div class="line"><span class="lineno">  470</span> </div>
<div class="line"><span class="lineno">  471</span>    log_estimator = TransformedTargetRegressor(</div>
<div class="line"><span class="lineno">  472</span>        regressor=estimator, func=np.log, inverse_func=np.exp</div>
<div class="line"><span class="lineno">  473</span>    )</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>    selector = selector(log_estimator, importance_getter=importance_getter)</div>
<div class="line"><span class="lineno">  476</span>    sel = selector.fit(X, y)</div>
<div class="line"><span class="lineno">  477</span>    <span class="keyword">assert</span> sel.support_.sum() == expected_n_features</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  481</span>    <span class="stringliteral">&quot;importance_getter, err_type&quot;</span>,</div>
<div class="line"><span class="lineno">  482</span>    [</div>
<div class="line"><span class="lineno">  483</span>        (<span class="stringliteral">&quot;auto&quot;</span>, ValueError),</div>
<div class="line"><span class="lineno">  484</span>        (<span class="stringliteral">&quot;random&quot;</span>, AttributeError),</div>
<div class="line"><span class="lineno">  485</span>        (<span class="keyword">lambda</span> x: x.importance, AttributeError),</div>
<div class="line"><span class="lineno">  486</span>    ],</div>
<div class="line"><span class="lineno">  487</span>)</div>
<div class="line"><span class="lineno">  488</span><span class="preprocessor">@pytest.mark.parametrize(&quot;Selector&quot;, [RFE, RFECV])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67f0242d6575342332413702a77234d9" name="a67f0242d6575342332413702a77234d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f0242d6575342332413702a77234d9">&#9670;&#160;</a></span>test_rfecv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfecv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  181</span><span class="keyword">def </span>test_rfecv():</div>
<div class="line"><span class="lineno">  182</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">  183</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  184</span>    <span class="comment"># Add some irrelevant features. Random seed is set to make sure that</span></div>
<div class="line"><span class="lineno">  185</span>    <span class="comment"># irrelevant features are always irrelevant.</span></div>
<div class="line"><span class="lineno">  186</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  187</span>    y = list(iris.target)  <span class="comment"># regression test: list should be supported</span></div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment"># Test using the score function</span></div>
<div class="line"><span class="lineno">  190</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=1)</div>
<div class="line"><span class="lineno">  191</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  192</span>    <span class="comment"># non-regression test for missing worst feature:</span></div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> rfecv.cv_results_.keys():</div>
<div class="line"><span class="lineno">  195</span>        <span class="keyword">assert</span> len(rfecv.cv_results_[key]) == X.shape[1]</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    <span class="keyword">assert</span> len(rfecv.ranking_) == X.shape[1]</div>
<div class="line"><span class="lineno">  198</span>    X_r = rfecv.transform(X)</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <span class="comment"># All the noisy variable were filtered out</span></div>
<div class="line"><span class="lineno">  201</span>    assert_array_equal(X_r, iris.data)</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    <span class="comment"># same in sparse</span></div>
<div class="line"><span class="lineno">  204</span>    rfecv_sparse = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=1)</div>
<div class="line"><span class="lineno">  205</span>    X_sparse = sparse.csr_matrix(X)</div>
<div class="line"><span class="lineno">  206</span>    rfecv_sparse.fit(X_sparse, y)</div>
<div class="line"><span class="lineno">  207</span>    X_r_sparse = rfecv_sparse.transform(X_sparse)</div>
<div class="line"><span class="lineno">  208</span>    assert_array_equal(X_r_sparse.toarray(), iris.data)</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="comment"># Test using a customized loss function</span></div>
<div class="line"><span class="lineno">  211</span>    scoring = make_scorer(zero_one_loss, greater_is_better=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  212</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=1, scoring=scoring)</div>
<div class="line"><span class="lineno">  213</span>    ignore_warnings(rfecv.fit)(X, y)</div>
<div class="line"><span class="lineno">  214</span>    X_r = rfecv.transform(X)</div>
<div class="line"><span class="lineno">  215</span>    assert_array_equal(X_r, iris.data)</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="comment"># Test using a scorer</span></div>
<div class="line"><span class="lineno">  218</span>    scorer = get_scorer(<span class="stringliteral">&quot;accuracy&quot;</span>)</div>
<div class="line"><span class="lineno">  219</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=1, scoring=scorer)</div>
<div class="line"><span class="lineno">  220</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  221</span>    X_r = rfecv.transform(X)</div>
<div class="line"><span class="lineno">  222</span>    assert_array_equal(X_r, iris.data)</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    <span class="comment"># Test fix on cv_results_</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keyword">def </span>test_scorer(estimator, X, y):</div>
<div class="line"><span class="lineno">  226</span>        <span class="keywordflow">return</span> 1.0</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=1, scoring=test_scorer)</div>
<div class="line"><span class="lineno">  229</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="comment"># In the event of cross validation score ties, the expected behavior of</span></div>
<div class="line"><span class="lineno">  232</span>    <span class="comment"># RFECV is to return the FEWEST features that maximize the CV score.</span></div>
<div class="line"><span class="lineno">  233</span>    <span class="comment"># Because test_scorer always returns 1.0 in this example, RFECV should</span></div>
<div class="line"><span class="lineno">  234</span>    <span class="comment"># reduce the dimensionality to a single feature (i.e. n_features_ = 1)</span></div>
<div class="line"><span class="lineno">  235</span>    <span class="keyword">assert</span> rfecv.n_features_ == 1</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="comment"># Same as the first two tests, but with step=2</span></div>
<div class="line"><span class="lineno">  238</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=2)</div>
<div class="line"><span class="lineno">  239</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> rfecv.cv_results_.keys():</div>
<div class="line"><span class="lineno">  242</span>        <span class="keyword">assert</span> len(rfecv.cv_results_[key]) == 6</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="keyword">assert</span> len(rfecv.ranking_) == X.shape[1]</div>
<div class="line"><span class="lineno">  245</span>    X_r = rfecv.transform(X)</div>
<div class="line"><span class="lineno">  246</span>    assert_array_equal(X_r, iris.data)</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    rfecv_sparse = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=2)</div>
<div class="line"><span class="lineno">  249</span>    X_sparse = sparse.csr_matrix(X)</div>
<div class="line"><span class="lineno">  250</span>    rfecv_sparse.fit(X_sparse, y)</div>
<div class="line"><span class="lineno">  251</span>    X_r_sparse = rfecv_sparse.transform(X_sparse)</div>
<div class="line"><span class="lineno">  252</span>    assert_array_equal(X_r_sparse.toarray(), iris.data)</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    <span class="comment"># Verifying that steps &lt; 1 don&#39;t blow up.</span></div>
<div class="line"><span class="lineno">  255</span>    rfecv_sparse = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=0.2)</div>
<div class="line"><span class="lineno">  256</span>    X_sparse = sparse.csr_matrix(X)</div>
<div class="line"><span class="lineno">  257</span>    rfecv_sparse.fit(X_sparse, y)</div>
<div class="line"><span class="lineno">  258</span>    X_r_sparse = rfecv_sparse.transform(X_sparse)</div>
<div class="line"><span class="lineno">  259</span>    assert_array_equal(X_r_sparse.toarray(), iris.data)</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a048a151b4498dbb75eb791d33610d9b3" name="a048a151b4498dbb75eb791d33610d9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a048a151b4498dbb75eb791d33610d9b3">&#9670;&#160;</a></span>test_rfecv_cv_results_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfecv_cv_results_size </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  299</span><span class="keyword">def </span>test_rfecv_cv_results_size(global_random_seed):</div>
<div class="line"><span class="lineno">  300</span>    generator = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">  301</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  302</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  303</span>    y = list(iris.target)  <span class="comment"># regression test: list should be supported</span></div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>    <span class="comment"># Non-regression test for varying combinations of step and</span></div>
<div class="line"><span class="lineno">  306</span>    <span class="comment"># min_features_to_select.</span></div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">for</span> step, min_features_to_select <span class="keywordflow">in</span> [[2, 1], [2, 2], [3, 3]]:</div>
<div class="line"><span class="lineno">  308</span>        rfecv = RFECV(</div>
<div class="line"><span class="lineno">  309</span>            estimator=MockClassifier(),</div>
<div class="line"><span class="lineno">  310</span>            step=step,</div>
<div class="line"><span class="lineno">  311</span>            min_features_to_select=min_features_to_select,</div>
<div class="line"><span class="lineno">  312</span>        )</div>
<div class="line"><span class="lineno">  313</span>        rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>        score_len = np.ceil((X.shape[1] - min_features_to_select) / step) + 1</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> rfecv.cv_results_.keys():</div>
<div class="line"><span class="lineno">  318</span>            <span class="keyword">assert</span> len(rfecv.cv_results_[key]) == score_len</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>        <span class="keyword">assert</span> len(rfecv.ranking_) == X.shape[1]</div>
<div class="line"><span class="lineno">  321</span>        <span class="keyword">assert</span> rfecv.n_features_ &gt;= min_features_to_select</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1095771d23150d9f3df788745052578e" name="a1095771d23150d9f3df788745052578e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1095771d23150d9f3df788745052578e">&#9670;&#160;</a></span>test_rfecv_mockclassifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfecv_mockclassifier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  262</span><span class="keyword">def </span>test_rfecv_mockclassifier():</div>
<div class="line"><span class="lineno">  263</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">  264</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  265</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  266</span>    y = list(iris.target)  <span class="comment"># regression test: list should be supported</span></div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>    <span class="comment"># Test using the score function</span></div>
<div class="line"><span class="lineno">  269</span>    rfecv = RFECV(estimator=MockClassifier(), step=1)</div>
<div class="line"><span class="lineno">  270</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  271</span>    <span class="comment"># non-regression test for missing worst feature:</span></div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> rfecv.cv_results_.keys():</div>
<div class="line"><span class="lineno">  274</span>        <span class="keyword">assert</span> len(rfecv.cv_results_[key]) == X.shape[1]</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>    <span class="keyword">assert</span> len(rfecv.ranking_) == X.shape[1]</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aea2d31c850134fb30da2389f5440c282" name="aea2d31c850134fb30da2389f5440c282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea2d31c850134fb30da2389f5440c282">&#9670;&#160;</a></span>test_rfecv_std_and_mean()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfecv_std_and_mean </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  534</span><span class="keyword">def </span>test_rfecv_std_and_mean(global_random_seed):</div>
<div class="line"><span class="lineno">  535</span>    generator = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">  536</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  537</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  538</span>    y = iris.target</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>))</div>
<div class="line"><span class="lineno">  541</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  542</span>    n_split_keys = len(rfecv.cv_results_) - 2</div>
<div class="line"><span class="lineno">  543</span>    split_keys = [f<span class="stringliteral">&quot;split{i}_test_score&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_split_keys)]</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>    cv_scores = np.asarray([rfecv.cv_results_[key] <span class="keywordflow">for</span> key <span class="keywordflow">in</span> split_keys])</div>
<div class="line"><span class="lineno">  546</span>    expected_mean = np.mean(cv_scores, axis=0)</div>
<div class="line"><span class="lineno">  547</span>    expected_std = np.std(cv_scores, axis=0)</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>    assert_allclose(rfecv.cv_results_[<span class="stringliteral">&quot;mean_test_score&quot;</span>], expected_mean)</div>
<div class="line"><span class="lineno">  550</span>    assert_allclose(rfecv.cv_results_[<span class="stringliteral">&quot;std_test_score&quot;</span>], expected_std)</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span><span class="preprocessor">@pytest.mark.parametrize(&quot;ClsRFE&quot;, [RFE, RFECV])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa218e2546e999ddcc699dd30e3e1f08b" name="aa218e2546e999ddcc699dd30e3e1f08b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa218e2546e999ddcc699dd30e3e1f08b">&#9670;&#160;</a></span>test_rfecv_verbose_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_rfecv_verbose_output </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  279</span><span class="keyword">def </span>test_rfecv_verbose_output():</div>
<div class="line"><span class="lineno">  280</span>    <span class="comment"># Check verbose=1 is producing an output.</span></div>
<div class="line"><span class="lineno">  281</span>    <span class="keyword">from</span> io <span class="keyword">import</span> StringIO</div>
<div class="line"><span class="lineno">  282</span>    <span class="keyword">import</span> sys</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    sys.stdout = StringIO()</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>    generator = check_random_state(0)</div>
<div class="line"><span class="lineno">  287</span>    iris = load_iris()</div>
<div class="line"><span class="lineno">  288</span>    X = np.c_[iris.data, generator.normal(size=(len(iris.data), 6))]</div>
<div class="line"><span class="lineno">  289</span>    y = list(iris.target)</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    rfecv = RFECV(estimator=SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>), step=1, verbose=1)</div>
<div class="line"><span class="lineno">  292</span>    rfecv.fit(X, y)</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    verbose_output = sys.stdout</div>
<div class="line"><span class="lineno">  295</span>    verbose_output.seek(0)</div>
<div class="line"><span class="lineno">  296</span>    <span class="keyword">assert</span> len(verbose_output.readline()) &gt; 0</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adb2ea62f20eb02970be05a990a209513" name="adb2ea62f20eb02970be05a990a209513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb2ea62f20eb02970be05a990a209513">&#9670;&#160;</a></span>test_w_pipeline_2d_coef_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.test_w_pipeline_2d_coef_ </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  520</span><span class="keyword">def </span>test_w_pipeline_2d_coef_():</div>
<div class="line"><span class="lineno">  521</span>    pipeline = make_pipeline(StandardScaler(), LogisticRegression())</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>    data, y = load_iris(return_X_y=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  524</span>    sfm = RFE(</div>
<div class="line"><span class="lineno">  525</span>        pipeline,</div>
<div class="line"><span class="lineno">  526</span>        n_features_to_select=2,</div>
<div class="line"><span class="lineno">  527</span>        importance_getter=<span class="stringliteral">&quot;named_steps.logisticregression.coef_&quot;</span>,</div>
<div class="line"><span class="lineno">  528</span>    )</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    sfm.fit(data, y)</div>
<div class="line"><span class="lineno">  531</span>    <span class="keyword">assert</span> sfm.transform(data).shape[1] == 2</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3be75111587e42d469f628dd18979d7d" name="a3be75111587e42d469f628dd18979d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3be75111587e42d469f628dd18979d7d">&#9670;&#160;</a></span>coef_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.coef_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abc30e16c5f39bf970a8e9f47dd10a906" name="abc30e16c5f39bf970a8e9f47dd10a906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc30e16c5f39bf970a8e9f47dd10a906">&#9670;&#160;</a></span>svc_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.feature_selection.tests.test_rfe.svc_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
