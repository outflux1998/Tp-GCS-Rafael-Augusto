<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.utils.estimator_checks Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1utils.html">utils</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html">estimator_checks</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sklearn.utils.estimator_checks Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1utils_1_1estimator__checks_1_1___not_an_array.html">_NotAnArray</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab6f4742ff2949ca88d1af88071998533" id="r_ab6f4742ff2949ca88d1af88071998533"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ab6f4742ff2949ca88d1af88071998533">_yield_checks</a> (estimator)</td></tr>
<tr class="separator:ab6f4742ff2949ca88d1af88071998533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a924894512153b9d1f68d2b6f0ac7bc80" id="r_a924894512153b9d1f68d2b6f0ac7bc80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a924894512153b9d1f68d2b6f0ac7bc80">_yield_classifier_checks</a> (classifier)</td></tr>
<tr class="separator:a924894512153b9d1f68d2b6f0ac7bc80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81261d88eb068f5fbf32228272ecb278" id="r_a81261d88eb068f5fbf32228272ecb278"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a81261d88eb068f5fbf32228272ecb278">check_supervised_y_no_nan</a> (name, estimator_orig)</td></tr>
<tr class="separator:a81261d88eb068f5fbf32228272ecb278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcad12293c9da1634dad1c40ae0bb15a" id="r_abcad12293c9da1634dad1c40ae0bb15a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#abcad12293c9da1634dad1c40ae0bb15a">_yield_regressor_checks</a> (regressor)</td></tr>
<tr class="separator:abcad12293c9da1634dad1c40ae0bb15a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4ebdc9136d906b37a5eb8e4040092a" id="r_a2e4ebdc9136d906b37a5eb8e4040092a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a2e4ebdc9136d906b37a5eb8e4040092a">_yield_transformer_checks</a> (transformer)</td></tr>
<tr class="separator:a2e4ebdc9136d906b37a5eb8e4040092a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bce8a5dfe47844e0361b90162a76e72" id="r_a8bce8a5dfe47844e0361b90162a76e72"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8bce8a5dfe47844e0361b90162a76e72">_yield_clustering_checks</a> (clusterer)</td></tr>
<tr class="separator:a8bce8a5dfe47844e0361b90162a76e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d207900a908b73a7c9b44157d8fc4bd" id="r_a8d207900a908b73a7c9b44157d8fc4bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8d207900a908b73a7c9b44157d8fc4bd">_yield_outliers_checks</a> (estimator)</td></tr>
<tr class="separator:a8d207900a908b73a7c9b44157d8fc4bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ce1b7139b9344bf5bf14d944cce9b53" id="r_a2ce1b7139b9344bf5bf14d944cce9b53"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a2ce1b7139b9344bf5bf14d944cce9b53">_yield_all_checks</a> (estimator)</td></tr>
<tr class="separator:a2ce1b7139b9344bf5bf14d944cce9b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0bd8138d1066ef2db93f6cb5ed397d" id="r_a5c0bd8138d1066ef2db93f6cb5ed397d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a5c0bd8138d1066ef2db93f6cb5ed397d">_get_check_estimator_ids</a> (obj)</td></tr>
<tr class="separator:a5c0bd8138d1066ef2db93f6cb5ed397d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a193ffc79cd22736ca1d3505696d34455" id="r_a193ffc79cd22736ca1d3505696d34455"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a193ffc79cd22736ca1d3505696d34455">_construct_instance</a> (Estimator)</td></tr>
<tr class="separator:a193ffc79cd22736ca1d3505696d34455"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698be983a178ea8c07b8addb65c7c10c" id="r_a698be983a178ea8c07b8addb65c7c10c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a698be983a178ea8c07b8addb65c7c10c">_maybe_mark_xfail</a> (estimator, check, pytest)</td></tr>
<tr class="separator:a698be983a178ea8c07b8addb65c7c10c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5344df343c3f8516085fa1f539c8f552" id="r_a5344df343c3f8516085fa1f539c8f552"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a5344df343c3f8516085fa1f539c8f552">_maybe_skip</a> (estimator, check)</td></tr>
<tr class="separator:a5344df343c3f8516085fa1f539c8f552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa588df4f1da7e98f3e736c60323351f" id="r_aaa588df4f1da7e98f3e736c60323351f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aaa588df4f1da7e98f3e736c60323351f">_should_be_skipped_or_marked</a> (estimator, check)</td></tr>
<tr class="separator:aaa588df4f1da7e98f3e736c60323351f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71f762cee28ec2c94bb2f2efeebc6f6" id="r_ad71f762cee28ec2c94bb2f2efeebc6f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ad71f762cee28ec2c94bb2f2efeebc6f6">parametrize_with_checks</a> (estimators)</td></tr>
<tr class="separator:ad71f762cee28ec2c94bb2f2efeebc6f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f62cc4cfc33a36d934074cfc7f00dac" id="r_a7f62cc4cfc33a36d934074cfc7f00dac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a7f62cc4cfc33a36d934074cfc7f00dac">check_estimator</a> (estimator=None, generate_only=False, Estimator=&quot;deprecated&quot;)</td></tr>
<tr class="separator:a7f62cc4cfc33a36d934074cfc7f00dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cf93dc7133c789c07f581fea4bee33b" id="r_a8cf93dc7133c789c07f581fea4bee33b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8cf93dc7133c789c07f581fea4bee33b">_regression_dataset</a> ()</td></tr>
<tr class="separator:a8cf93dc7133c789c07f581fea4bee33b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e39c132373b927fc3bee81622f34c36" id="r_a4e39c132373b927fc3bee81622f34c36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a4e39c132373b927fc3bee81622f34c36">_set_checking_parameters</a> (estimator)</td></tr>
<tr class="separator:a4e39c132373b927fc3bee81622f34c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf0e4777aabc75ab1e5fc79787a0050d" id="r_adf0e4777aabc75ab1e5fc79787a0050d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#adf0e4777aabc75ab1e5fc79787a0050d">_is_pairwise_metric</a> (estimator)</td></tr>
<tr class="separator:adf0e4777aabc75ab1e5fc79787a0050d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fad1c3ce0a8645aea5fcbde6de7270f" id="r_a7fad1c3ce0a8645aea5fcbde6de7270f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a7fad1c3ce0a8645aea5fcbde6de7270f">_generate_sparse_matrix</a> (X_csr)</td></tr>
<tr class="separator:a7fad1c3ce0a8645aea5fcbde6de7270f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5969642dc52df938b357f4d8cab0e471" id="r_a5969642dc52df938b357f4d8cab0e471"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a5969642dc52df938b357f4d8cab0e471">check_estimator_sparse_data</a> (name, estimator_orig)</td></tr>
<tr class="separator:a5969642dc52df938b357f4d8cab0e471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c028210d257470b3fd1caa203f529be" id="r_a0c028210d257470b3fd1caa203f529be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a0c028210d257470b3fd1caa203f529be">check_sample_weights_pandas_series</a> (name, estimator_orig)</td></tr>
<tr class="separator:a0c028210d257470b3fd1caa203f529be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f6066f3e644c85bdefc66c894c3f26" id="r_ad1f6066f3e644c85bdefc66c894c3f26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ad1f6066f3e644c85bdefc66c894c3f26">check_sample_weights_not_an_array</a> (name, estimator_orig)</td></tr>
<tr class="separator:ad1f6066f3e644c85bdefc66c894c3f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c59568b0c60a5c844bb4e7bd9f1930" id="r_a13c59568b0c60a5c844bb4e7bd9f1930"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a13c59568b0c60a5c844bb4e7bd9f1930">check_sample_weights_list</a> (name, estimator_orig)</td></tr>
<tr class="separator:a13c59568b0c60a5c844bb4e7bd9f1930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c194215ae75a69973c17fcc678df305" id="r_a0c194215ae75a69973c17fcc678df305"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a0c194215ae75a69973c17fcc678df305">check_sample_weights_shape</a> (name, estimator_orig)</td></tr>
<tr class="separator:a0c194215ae75a69973c17fcc678df305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6c8fbdaa52371639c9dc7f5c98a2813" id="r_af6c8fbdaa52371639c9dc7f5c98a2813"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#af6c8fbdaa52371639c9dc7f5c98a2813">check_sample_weights_invariance</a> (name, estimator_orig, kind=&quot;ones&quot;)</td></tr>
<tr class="separator:af6c8fbdaa52371639c9dc7f5c98a2813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d76f1e3f7aeb62183fa2bb441461670" id="r_a3d76f1e3f7aeb62183fa2bb441461670"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a3d76f1e3f7aeb62183fa2bb441461670">check_sample_weights_not_overwritten</a> (name, estimator_orig)</td></tr>
<tr class="separator:a3d76f1e3f7aeb62183fa2bb441461670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f6d52fc33a15a72d6912ca5a098ea77" id="r_a3f6d52fc33a15a72d6912ca5a098ea77"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a3f6d52fc33a15a72d6912ca5a098ea77">check_dtype_object</a> (name, estimator_orig)</td></tr>
<tr class="separator:a3f6d52fc33a15a72d6912ca5a098ea77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e36036669051231b45da13a3415e01" id="r_a59e36036669051231b45da13a3415e01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a59e36036669051231b45da13a3415e01">check_complex_data</a> (name, estimator_orig)</td></tr>
<tr class="separator:a59e36036669051231b45da13a3415e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d3b68a87f87be599de02bf26ff6c4d8" id="r_a1d3b68a87f87be599de02bf26ff6c4d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a1d3b68a87f87be599de02bf26ff6c4d8">check_dict_unchanged</a> (name, estimator_orig)</td></tr>
<tr class="separator:a1d3b68a87f87be599de02bf26ff6c4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53cd7b7b32c57957aca90ff5f60f83ec" id="r_a53cd7b7b32c57957aca90ff5f60f83ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a53cd7b7b32c57957aca90ff5f60f83ec">_is_public_parameter</a> (attr)</td></tr>
<tr class="separator:a53cd7b7b32c57957aca90ff5f60f83ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa9f501957461dd5ab1abb8aa06e6b11" id="r_afa9f501957461dd5ab1abb8aa06e6b11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#afa9f501957461dd5ab1abb8aa06e6b11">check_dont_overwrite_parameters</a> (name, estimator_orig)</td></tr>
<tr class="separator:afa9f501957461dd5ab1abb8aa06e6b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad23d8f00e3d36dc0ec58012bc4920d49" id="r_ad23d8f00e3d36dc0ec58012bc4920d49"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ad23d8f00e3d36dc0ec58012bc4920d49">check_fit2d_predict1d</a> (name, estimator_orig)</td></tr>
<tr class="separator:ad23d8f00e3d36dc0ec58012bc4920d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa16d547056ae6cad087240ff9970d00" id="r_aaa16d547056ae6cad087240ff9970d00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aaa16d547056ae6cad087240ff9970d00">_apply_on_subsets</a> (<a class="el" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>, X)</td></tr>
<tr class="separator:aaa16d547056ae6cad087240ff9970d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32b507e4333d4ea2df105870cf59f0a" id="r_ad32b507e4333d4ea2df105870cf59f0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ad32b507e4333d4ea2df105870cf59f0a">check_methods_subset_invariance</a> (name, estimator_orig)</td></tr>
<tr class="separator:ad32b507e4333d4ea2df105870cf59f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb574cd1b01b3d721c4bf121941a5ecb" id="r_acb574cd1b01b3d721c4bf121941a5ecb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#acb574cd1b01b3d721c4bf121941a5ecb">check_methods_sample_order_invariance</a> (name, estimator_orig)</td></tr>
<tr class="separator:acb574cd1b01b3d721c4bf121941a5ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ec5a87af607e0b8036b4fa4e8e39f73" id="r_a0ec5a87af607e0b8036b4fa4e8e39f73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a0ec5a87af607e0b8036b4fa4e8e39f73">check_fit2d_1sample</a> (name, estimator_orig)</td></tr>
<tr class="separator:a0ec5a87af607e0b8036b4fa4e8e39f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e0a778bda543caed104dd8f4c7b7995" id="r_a9e0a778bda543caed104dd8f4c7b7995"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a9e0a778bda543caed104dd8f4c7b7995">check_fit2d_1feature</a> (name, estimator_orig)</td></tr>
<tr class="separator:a9e0a778bda543caed104dd8f4c7b7995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b414e51c6601191fdbc9710d74d49c" id="r_af7b414e51c6601191fdbc9710d74d49c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#af7b414e51c6601191fdbc9710d74d49c">check_fit1d</a> (name, estimator_orig)</td></tr>
<tr class="separator:af7b414e51c6601191fdbc9710d74d49c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d0ac12ff5c524dd0c48985517db5626" id="r_a8d0ac12ff5c524dd0c48985517db5626"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8d0ac12ff5c524dd0c48985517db5626">check_transformer_general</a> (name, transformer, readonly_memmap=False)</td></tr>
<tr class="separator:a8d0ac12ff5c524dd0c48985517db5626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e70516583e6ff950029b0bae4a6483" id="r_a93e70516583e6ff950029b0bae4a6483"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a93e70516583e6ff950029b0bae4a6483">check_transformer_data_not_an_array</a> (name, transformer)</td></tr>
<tr class="separator:a93e70516583e6ff950029b0bae4a6483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bed6f99ef89505683f7b67f0c674ae" id="r_aa2bed6f99ef89505683f7b67f0c674ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aa2bed6f99ef89505683f7b67f0c674ae">check_transformers_unfitted</a> (name, transformer)</td></tr>
<tr class="separator:aa2bed6f99ef89505683f7b67f0c674ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebdca2319fca0088accdcd15e1dc0ac" id="r_acebdca2319fca0088accdcd15e1dc0ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#acebdca2319fca0088accdcd15e1dc0ac">_check_transformer</a> (name, transformer_orig, X, y)</td></tr>
<tr class="separator:acebdca2319fca0088accdcd15e1dc0ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5341a27bf637423af328271fb1f6456b" id="r_a5341a27bf637423af328271fb1f6456b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a5341a27bf637423af328271fb1f6456b">check_pipeline_consistency</a> (name, estimator_orig)</td></tr>
<tr class="separator:a5341a27bf637423af328271fb1f6456b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae012cc404c13404dd4b438d9c0870052" id="r_ae012cc404c13404dd4b438d9c0870052"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ae012cc404c13404dd4b438d9c0870052">check_fit_score_takes_y</a> (name, estimator_orig)</td></tr>
<tr class="separator:ae012cc404c13404dd4b438d9c0870052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6099b9c0fcd29c053b5524a28133ef62" id="r_a6099b9c0fcd29c053b5524a28133ef62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a6099b9c0fcd29c053b5524a28133ef62">check_estimators_dtypes</a> (name, estimator_orig)</td></tr>
<tr class="separator:a6099b9c0fcd29c053b5524a28133ef62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12568cd3787c556d2dc98a915deac1b6" id="r_a12568cd3787c556d2dc98a915deac1b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a12568cd3787c556d2dc98a915deac1b6">check_transformer_preserve_dtypes</a> (name, transformer_orig)</td></tr>
<tr class="separator:a12568cd3787c556d2dc98a915deac1b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7804d9c40100bb4070586693cc0a7192" id="r_a7804d9c40100bb4070586693cc0a7192"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a7804d9c40100bb4070586693cc0a7192">check_estimators_empty_data_messages</a> (name, estimator_orig)</td></tr>
<tr class="separator:a7804d9c40100bb4070586693cc0a7192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaef03b6902c6cd3737dc79b9310f303" id="r_abaef03b6902c6cd3737dc79b9310f303"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#abaef03b6902c6cd3737dc79b9310f303">check_estimators_nan_inf</a> (name, estimator_orig)</td></tr>
<tr class="separator:abaef03b6902c6cd3737dc79b9310f303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee8ce03156d2998d409a004fdc3a776" id="r_acee8ce03156d2998d409a004fdc3a776"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#acee8ce03156d2998d409a004fdc3a776">check_nonsquare_error</a> (name, estimator_orig)</td></tr>
<tr class="separator:acee8ce03156d2998d409a004fdc3a776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66066db6cb4229e1a60b9f3e0bda8cf" id="r_ad66066db6cb4229e1a60b9f3e0bda8cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ad66066db6cb4229e1a60b9f3e0bda8cf">check_estimators_pickle</a> (name, estimator_orig)</td></tr>
<tr class="separator:ad66066db6cb4229e1a60b9f3e0bda8cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b871e9b92df65216d373298d5f2f78" id="r_aa7b871e9b92df65216d373298d5f2f78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aa7b871e9b92df65216d373298d5f2f78">check_estimators_partial_fit_n_features</a> (name, estimator_orig)</td></tr>
<tr class="separator:aa7b871e9b92df65216d373298d5f2f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04b47d6e1697de5d13185563b28ac1cd" id="r_a04b47d6e1697de5d13185563b28ac1cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a04b47d6e1697de5d13185563b28ac1cd">check_classifier_multioutput</a> (name, estimator)</td></tr>
<tr class="separator:a04b47d6e1697de5d13185563b28ac1cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4792115dd99820af5815df3f7bee88af" id="r_a4792115dd99820af5815df3f7bee88af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a4792115dd99820af5815df3f7bee88af">check_regressor_multioutput</a> (name, estimator)</td></tr>
<tr class="separator:a4792115dd99820af5815df3f7bee88af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa2c09ae1243d518846c7d9426e84181" id="r_afa2c09ae1243d518846c7d9426e84181"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#afa2c09ae1243d518846c7d9426e84181">check_clustering</a> (name, clusterer_orig, readonly_memmap=False)</td></tr>
<tr class="separator:afa2c09ae1243d518846c7d9426e84181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b413a9d70d9e886167b3121503614b9" id="r_a0b413a9d70d9e886167b3121503614b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a0b413a9d70d9e886167b3121503614b9">check_clusterer_compute_labels_predict</a> (name, clusterer_orig)</td></tr>
<tr class="separator:a0b413a9d70d9e886167b3121503614b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f575ad6a2c0da1ca411a371ee7206ce" id="r_a4f575ad6a2c0da1ca411a371ee7206ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a4f575ad6a2c0da1ca411a371ee7206ce">check_classifiers_one_label</a> (name, classifier_orig)</td></tr>
<tr class="separator:a4f575ad6a2c0da1ca411a371ee7206ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86679ac400938e5b82b1f4457e636aca" id="r_a86679ac400938e5b82b1f4457e636aca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a86679ac400938e5b82b1f4457e636aca">check_classifiers_train</a> (name, classifier_orig, readonly_memmap=False, X_dtype=&quot;float64&quot;)</td></tr>
<tr class="separator:a86679ac400938e5b82b1f4457e636aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa939dcee7dec06bc8fd3d84313fcdfc7" id="r_aa939dcee7dec06bc8fd3d84313fcdfc7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aa939dcee7dec06bc8fd3d84313fcdfc7">check_outlier_corruption</a> (num_outliers, expected_outliers, decision)</td></tr>
<tr class="separator:aa939dcee7dec06bc8fd3d84313fcdfc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b4842b71349c0669630481384ea511" id="r_af3b4842b71349c0669630481384ea511"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#af3b4842b71349c0669630481384ea511">check_outliers_train</a> (name, estimator_orig, readonly_memmap=True)</td></tr>
<tr class="separator:af3b4842b71349c0669630481384ea511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2067f1a0e74fdaacfe719631532afb" id="r_a0d2067f1a0e74fdaacfe719631532afb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a0d2067f1a0e74fdaacfe719631532afb">check_outlier_contamination</a> (name, estimator_orig)</td></tr>
<tr class="separator:a0d2067f1a0e74fdaacfe719631532afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d216c4995366bfb8e12db1a65b2e46d" id="r_a5d216c4995366bfb8e12db1a65b2e46d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a5d216c4995366bfb8e12db1a65b2e46d">check_classifiers_multilabel_representation_invariance</a> (name, classifier_orig)</td></tr>
<tr class="separator:a5d216c4995366bfb8e12db1a65b2e46d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32c326275dfcd3e80846c6e9030b4fd9" id="r_a32c326275dfcd3e80846c6e9030b4fd9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a32c326275dfcd3e80846c6e9030b4fd9">check_classifiers_multilabel_output_format_predict</a> (name, classifier_orig)</td></tr>
<tr class="separator:a32c326275dfcd3e80846c6e9030b4fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b1b13ce86c55068b520b3766a7e5b97" id="r_a1b1b13ce86c55068b520b3766a7e5b97"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a1b1b13ce86c55068b520b3766a7e5b97">check_classifiers_multilabel_output_format_predict_proba</a> (name, classifier_orig)</td></tr>
<tr class="separator:a1b1b13ce86c55068b520b3766a7e5b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f998077eddba91cf72703098098a2a" id="r_a87f998077eddba91cf72703098098a2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a87f998077eddba91cf72703098098a2a">check_classifiers_multilabel_output_format_decision_function</a> (name, classifier_orig)</td></tr>
<tr class="separator:a87f998077eddba91cf72703098098a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af48cb1a169f473441ee954f23d58bb30" id="r_af48cb1a169f473441ee954f23d58bb30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#af48cb1a169f473441ee954f23d58bb30">check_estimators_fit_returns_self</a> (name, estimator_orig, readonly_memmap=False)</td></tr>
<tr class="separator:af48cb1a169f473441ee954f23d58bb30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea26b3b3a73b1da31356ca50dd6bcd52" id="r_aea26b3b3a73b1da31356ca50dd6bcd52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aea26b3b3a73b1da31356ca50dd6bcd52">check_estimators_unfitted</a> (name, estimator_orig)</td></tr>
<tr class="separator:aea26b3b3a73b1da31356ca50dd6bcd52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536f9ea289df7d140d3b978f6908909b" id="r_a536f9ea289df7d140d3b978f6908909b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a536f9ea289df7d140d3b978f6908909b">check_supervised_y_2d</a> (name, estimator_orig)</td></tr>
<tr class="separator:a536f9ea289df7d140d3b978f6908909b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0d7a973830046f536747593d650e72" id="r_a3b0d7a973830046f536747593d650e72"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a3b0d7a973830046f536747593d650e72">check_classifiers_predictions</a> (X, y, name, classifier_orig)</td></tr>
<tr class="separator:a3b0d7a973830046f536747593d650e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac04711503340f844859c03b9bc1812f6" id="r_ac04711503340f844859c03b9bc1812f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ac04711503340f844859c03b9bc1812f6">_choose_check_classifiers_labels</a> (name, y, y_names)</td></tr>
<tr class="separator:ac04711503340f844859c03b9bc1812f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa701446175fb8b1fc651810acb6dc35b" id="r_aa701446175fb8b1fc651810acb6dc35b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aa701446175fb8b1fc651810acb6dc35b">check_classifiers_classes</a> (name, classifier_orig)</td></tr>
<tr class="separator:aa701446175fb8b1fc651810acb6dc35b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab58909a0c0e2531869ac50929cacbf15" id="r_ab58909a0c0e2531869ac50929cacbf15"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ab58909a0c0e2531869ac50929cacbf15">check_regressors_int</a> (name, regressor_orig)</td></tr>
<tr class="separator:ab58909a0c0e2531869ac50929cacbf15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f23ac95918b09a0cf86d24aa86508fb" id="r_a8f23ac95918b09a0cf86d24aa86508fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8f23ac95918b09a0cf86d24aa86508fb">check_regressors_train</a> (name, regressor_orig, readonly_memmap=False, X_dtype=np.float64)</td></tr>
<tr class="separator:a8f23ac95918b09a0cf86d24aa86508fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78d3c6e6fb3be3daf686db92779a3424" id="r_a78d3c6e6fb3be3daf686db92779a3424"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a78d3c6e6fb3be3daf686db92779a3424">check_regressors_no_decision_function</a> (name, regressor_orig)</td></tr>
<tr class="separator:a78d3c6e6fb3be3daf686db92779a3424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd09562b6d8cd3afc25fc24e8f3de05d" id="r_acd09562b6d8cd3afc25fc24e8f3de05d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#acd09562b6d8cd3afc25fc24e8f3de05d">check_class_weight_classifiers</a> (name, classifier_orig)</td></tr>
<tr class="separator:acd09562b6d8cd3afc25fc24e8f3de05d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f53aadb862afa7d7452a642d72f188" id="r_a00f53aadb862afa7d7452a642d72f188"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a00f53aadb862afa7d7452a642d72f188">check_class_weight_balanced_classifiers</a> (name, classifier_orig, X_train, y_train, X_test, y_test, weights)</td></tr>
<tr class="separator:a00f53aadb862afa7d7452a642d72f188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86182be6728e135f6362227d7a436566" id="r_a86182be6728e135f6362227d7a436566"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a86182be6728e135f6362227d7a436566">check_class_weight_balanced_linear_classifier</a> (name, Classifier)</td></tr>
<tr class="separator:a86182be6728e135f6362227d7a436566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a191f96f78131ee8dfd3d7c01c6b24acd" id="r_a191f96f78131ee8dfd3d7c01c6b24acd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a191f96f78131ee8dfd3d7c01c6b24acd">check_estimators_overwrite_params</a> (name, estimator_orig)</td></tr>
<tr class="separator:a191f96f78131ee8dfd3d7c01c6b24acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7745745b110209d7236f92ee0d8c2636" id="r_a7745745b110209d7236f92ee0d8c2636"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a7745745b110209d7236f92ee0d8c2636">check_no_attributes_set_in_init</a> (name, estimator_orig)</td></tr>
<tr class="separator:a7745745b110209d7236f92ee0d8c2636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a616cb3b612787fe0becbb77a78c69443" id="r_a616cb3b612787fe0becbb77a78c69443"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a616cb3b612787fe0becbb77a78c69443">check_sparsify_coefficients</a> (name, estimator_orig)</td></tr>
<tr class="separator:a616cb3b612787fe0becbb77a78c69443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d6ef78f692c24fdaced354f8b49933" id="r_a01d6ef78f692c24fdaced354f8b49933"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a01d6ef78f692c24fdaced354f8b49933">check_classifier_data_not_an_array</a> (name, estimator_orig)</td></tr>
<tr class="separator:a01d6ef78f692c24fdaced354f8b49933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8495257789e21c410dd524aeb0d8a355" id="r_a8495257789e21c410dd524aeb0d8a355"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8495257789e21c410dd524aeb0d8a355">check_regressor_data_not_an_array</a> (name, estimator_orig)</td></tr>
<tr class="separator:a8495257789e21c410dd524aeb0d8a355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abedbc5c184ee09c009bdc0fd0a8575e1" id="r_abedbc5c184ee09c009bdc0fd0a8575e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#abedbc5c184ee09c009bdc0fd0a8575e1">check_estimators_data_not_an_array</a> (name, estimator_orig, X, y, obj_type)</td></tr>
<tr class="separator:abedbc5c184ee09c009bdc0fd0a8575e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a204cb0dbbc745c82f2791549e19e4f57" id="r_a204cb0dbbc745c82f2791549e19e4f57"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a204cb0dbbc745c82f2791549e19e4f57">check_parameters_default_constructible</a> (name, Estimator)</td></tr>
<tr class="separator:a204cb0dbbc745c82f2791549e19e4f57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108cdb34e503b25c0406bf2199758bdf" id="r_a108cdb34e503b25c0406bf2199758bdf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a108cdb34e503b25c0406bf2199758bdf">_enforce_estimator_tags_y</a> (estimator, y)</td></tr>
<tr class="separator:a108cdb34e503b25c0406bf2199758bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8de67cdfde6b5911639a3cd8cce3d4b5" id="r_a8de67cdfde6b5911639a3cd8cce3d4b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8de67cdfde6b5911639a3cd8cce3d4b5">_enforce_estimator_tags_X</a> (estimator, X, kernel=linear_kernel)</td></tr>
<tr class="separator:a8de67cdfde6b5911639a3cd8cce3d4b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c6f14bed45b34bd996d735edd107946" id="r_a0c6f14bed45b34bd996d735edd107946"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a0c6f14bed45b34bd996d735edd107946">check_non_transformer_estimators_n_iter</a> (name, estimator_orig)</td></tr>
<tr class="separator:a0c6f14bed45b34bd996d735edd107946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50c385b8bc0c76966a8e322dabbd331f" id="r_a50c385b8bc0c76966a8e322dabbd331f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a50c385b8bc0c76966a8e322dabbd331f">check_transformer_n_iter</a> (name, estimator_orig)</td></tr>
<tr class="separator:a50c385b8bc0c76966a8e322dabbd331f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18eeb414a6451a46f7c8ff43e4007e6c" id="r_a18eeb414a6451a46f7c8ff43e4007e6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a18eeb414a6451a46f7c8ff43e4007e6c">check_get_params_invariance</a> (name, estimator_orig)</td></tr>
<tr class="separator:a18eeb414a6451a46f7c8ff43e4007e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e6d481b0fb75711695f0bdf23e67f73" id="r_a3e6d481b0fb75711695f0bdf23e67f73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a3e6d481b0fb75711695f0bdf23e67f73">check_set_params</a> (name, estimator_orig)</td></tr>
<tr class="separator:a3e6d481b0fb75711695f0bdf23e67f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d51e62bb24000d1bc293baf251dc5bf" id="r_a5d51e62bb24000d1bc293baf251dc5bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a5d51e62bb24000d1bc293baf251dc5bf">check_classifiers_regression_target</a> (name, estimator_orig)</td></tr>
<tr class="separator:a5d51e62bb24000d1bc293baf251dc5bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2c0f7f8708a012ff05e6714ca53d17" id="r_a6b2c0f7f8708a012ff05e6714ca53d17"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a6b2c0f7f8708a012ff05e6714ca53d17">check_decision_proba_consistency</a> (name, estimator_orig)</td></tr>
<tr class="separator:a6b2c0f7f8708a012ff05e6714ca53d17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3109e438663a62e643ea0e536def8582" id="r_a3109e438663a62e643ea0e536def8582"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a3109e438663a62e643ea0e536def8582">check_outliers_fit_predict</a> (name, estimator_orig)</td></tr>
<tr class="separator:a3109e438663a62e643ea0e536def8582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c87e8535c30e1f39af48fbcbeb0f08" id="r_af7c87e8535c30e1f39af48fbcbeb0f08"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#af7c87e8535c30e1f39af48fbcbeb0f08">check_fit_non_negative</a> (name, estimator_orig)</td></tr>
<tr class="separator:af7c87e8535c30e1f39af48fbcbeb0f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fe2e631f8b19a4d3eb6a6f7cac03777" id="r_a9fe2e631f8b19a4d3eb6a6f7cac03777"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a9fe2e631f8b19a4d3eb6a6f7cac03777">check_fit_idempotent</a> (name, estimator_orig)</td></tr>
<tr class="separator:a9fe2e631f8b19a4d3eb6a6f7cac03777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa71598fe32f94ccb50acb92baa8f7d2" id="r_afa71598fe32f94ccb50acb92baa8f7d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#afa71598fe32f94ccb50acb92baa8f7d2">check_fit_check_is_fitted</a> (name, estimator_orig)</td></tr>
<tr class="separator:afa71598fe32f94ccb50acb92baa8f7d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221a41b70f53f3f45fba7c6416e66982" id="r_a221a41b70f53f3f45fba7c6416e66982"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a221a41b70f53f3f45fba7c6416e66982">check_n_features_in</a> (name, estimator_orig)</td></tr>
<tr class="separator:a221a41b70f53f3f45fba7c6416e66982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5bedb55bd73a968295179ad9724377" id="r_ace5bedb55bd73a968295179ad9724377"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ace5bedb55bd73a968295179ad9724377">check_requires_y_none</a> (name, estimator_orig)</td></tr>
<tr class="separator:ace5bedb55bd73a968295179ad9724377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4099caa93cf22904b27c9999865b1a1b" id="r_a4099caa93cf22904b27c9999865b1a1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a4099caa93cf22904b27c9999865b1a1b">check_n_features_in_after_fitting</a> (name, estimator_orig)</td></tr>
<tr class="separator:a4099caa93cf22904b27c9999865b1a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d440f562d50035ea8156193aaefc3f8" id="r_a4d440f562d50035ea8156193aaefc3f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a4d440f562d50035ea8156193aaefc3f8">check_estimator_get_tags_default_keys</a> (name, estimator_orig)</td></tr>
<tr class="separator:a4d440f562d50035ea8156193aaefc3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e532a2f0c6a7fce63620e9cadd227fa" id="r_a8e532a2f0c6a7fce63620e9cadd227fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a8e532a2f0c6a7fce63620e9cadd227fa">check_dataframe_column_names_consistency</a> (name, estimator_orig)</td></tr>
<tr class="separator:a8e532a2f0c6a7fce63620e9cadd227fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b54af40876df7078adcc08e95c5d74" id="r_ad5b54af40876df7078adcc08e95c5d74"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ad5b54af40876df7078adcc08e95c5d74">check_transformer_get_feature_names_out</a> (name, transformer_orig)</td></tr>
<tr class="separator:ad5b54af40876df7078adcc08e95c5d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e49fbde9e57467e8b77e7c00fe3f202" id="r_a7e49fbde9e57467e8b77e7c00fe3f202"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a7e49fbde9e57467e8b77e7c00fe3f202">check_transformer_get_feature_names_out_pandas</a> (name, transformer_orig)</td></tr>
<tr class="separator:a7e49fbde9e57467e8b77e7c00fe3f202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8cbd95351be65820097fd9ad7093a2a" id="r_ab8cbd95351be65820097fd9ad7093a2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ab8cbd95351be65820097fd9ad7093a2a">check_param_validation</a> (name, estimator_orig)</td></tr>
<tr class="separator:ab8cbd95351be65820097fd9ad7093a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb1693e4b9c2e292b8adf70b9ac70c1" id="r_a4eb1693e4b9c2e292b8adf70b9ac70c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a4eb1693e4b9c2e292b8adf70b9ac70c1">check_set_output_transform</a> (name, transformer_orig)</td></tr>
<tr class="separator:a4eb1693e4b9c2e292b8adf70b9ac70c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90f156268add9781405d97b3443824f" id="r_aa90f156268add9781405d97b3443824f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#aa90f156268add9781405d97b3443824f">_output_from_fit_transform</a> (transformer, name, X, <a class="el" href="__lapack__subroutines_8h.html#a2a33a012da63c0be8f0f3845c10bf577">df</a>, y)</td></tr>
<tr class="separator:aa90f156268add9781405d97b3443824f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab562842fa6c1bf49de45b02eefa525c6" id="r_ab562842fa6c1bf49de45b02eefa525c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ab562842fa6c1bf49de45b02eefa525c6">_check_generated_dataframe</a> (name, case, outputs_default, outputs_pandas)</td></tr>
<tr class="separator:ab562842fa6c1bf49de45b02eefa525c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250cc2a1b11bad84295d57202420fb3e" id="r_a250cc2a1b11bad84295d57202420fb3e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a250cc2a1b11bad84295d57202420fb3e">check_set_output_transform_pandas</a> (name, transformer_orig)</td></tr>
<tr class="separator:a250cc2a1b11bad84295d57202420fb3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39314947077c51b891f0d30cd70d0286" id="r_a39314947077c51b891f0d30cd70d0286"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a39314947077c51b891f0d30cd70d0286">check_global_ouptut_transform_pandas</a> (name, transformer_orig)</td></tr>
<tr class="separator:a39314947077c51b891f0d30cd70d0286"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac9a0b784b1e3148674c59a93816471cd" id="r_ac9a0b784b1e3148674c59a93816471cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#ac9a0b784b1e3148674c59a93816471cd">REGRESSION_DATASET</a> = None</td></tr>
<tr class="separator:ac9a0b784b1e3148674c59a93816471cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5254c3665094f049f2c27348765b4e83" id="r_a5254c3665094f049f2c27348765b4e83"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1utils_1_1estimator__checks.html#a5254c3665094f049f2c27348765b4e83">CROSS_DECOMPOSITION</a> = [&quot;PLSCanonical&quot;, &quot;PLSRegression&quot;, &quot;CCA&quot;, &quot;PLSSVD&quot;]</td></tr>
<tr class="separator:a5254c3665094f049f2c27348765b4e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aaa16d547056ae6cad087240ff9970d00" name="aaa16d547056ae6cad087240ff9970d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa16d547056ae6cad087240ff9970d00">&#9670;&#160;</a></span>_apply_on_subsets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._apply_on_subsets </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1309</span><span class="keyword">def </span>_apply_on_subsets(func, X):</div>
<div class="line"><span class="lineno"> 1310</span>    <span class="comment"># apply function on the whole set and on mini batches</span></div>
<div class="line"><span class="lineno"> 1311</span>    result_full = <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(X)</div>
<div class="line"><span class="lineno"> 1312</span>    n_features = X.shape[1]</div>
<div class="line"><span class="lineno"> 1313</span>    result_by_batch = [<a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(batch.reshape(1, n_features)) <span class="keywordflow">for</span> batch <span class="keywordflow">in</span> X]</div>
<div class="line"><span class="lineno"> 1314</span> </div>
<div class="line"><span class="lineno"> 1315</span>    <span class="comment"># func can output tuple (e.g. score_samples)</span></div>
<div class="line"><span class="lineno"> 1316</span>    <span class="keywordflow">if</span> type(result_full) == tuple:</div>
<div class="line"><span class="lineno"> 1317</span>        result_full = result_full[0]</div>
<div class="line"><span class="lineno"> 1318</span>        result_by_batch = list(map(<span class="keyword">lambda</span> x: x[0], result_by_batch))</div>
<div class="line"><span class="lineno"> 1319</span> </div>
<div class="line"><span class="lineno"> 1320</span>    <span class="keywordflow">if</span> sparse.issparse(result_full):</div>
<div class="line"><span class="lineno"> 1321</span>        result_full = result_full.A</div>
<div class="line"><span class="lineno"> 1322</span>        result_by_batch = [x.A <span class="keywordflow">for</span> x <span class="keywordflow">in</span> result_by_batch]</div>
<div class="line"><span class="lineno"> 1323</span> </div>
<div class="line"><span class="lineno"> 1324</span>    <span class="keywordflow">return</span> np.ravel(result_full), np.ravel(result_by_batch)</div>
<div class="line"><span class="lineno"> 1325</span> </div>
<div class="line"><span class="lineno"> 1326</span> </div>
<div class="line"><span class="lineno"> 1327</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
<div class="ttc" id="acallback_2foo_8f_html_a565fe2cc583df102f120752b0011c330"><div class="ttname"><a href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a></div><div class="ttdeci">subroutine func(a)</div><div class="ttdef"><b>Definition</b> foo.f:9</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab562842fa6c1bf49de45b02eefa525c6" name="ab562842fa6c1bf49de45b02eefa525c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab562842fa6c1bf49de45b02eefa525c6">&#9670;&#160;</a></span>_check_generated_dataframe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._check_generated_dataframe </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>case</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outputs_default</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outputs_pandas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4211</span><span class="keyword">def </span>_check_generated_dataframe(name, case, outputs_default, outputs_pandas):</div>
<div class="line"><span class="lineno"> 4212</span>    <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><span class="lineno"> 4213</span> </div>
<div class="line"><span class="lineno"> 4214</span>    X_trans, feature_names_default = outputs_default</div>
<div class="line"><span class="lineno"> 4215</span>    df_trans, feature_names_pandas = outputs_pandas</div>
<div class="line"><span class="lineno"> 4216</span> </div>
<div class="line"><span class="lineno"> 4217</span>    <span class="keyword">assert</span> isinstance(df_trans, pd.DataFrame)</div>
<div class="line"><span class="lineno"> 4218</span>    <span class="comment"># We always rely on the output of `get_feature_names_out` of the</span></div>
<div class="line"><span class="lineno"> 4219</span>    <span class="comment"># transformer used to generate the dataframe as a ground-truth of the</span></div>
<div class="line"><span class="lineno"> 4220</span>    <span class="comment"># columns.</span></div>
<div class="line"><span class="lineno"> 4221</span>    expected_dataframe = pd.DataFrame(X_trans, columns=feature_names_pandas)</div>
<div class="line"><span class="lineno"> 4222</span> </div>
<div class="line"><span class="lineno"> 4223</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 4224</span>        pd.testing.assert_frame_equal(df_trans, expected_dataframe)</div>
<div class="line"><span class="lineno"> 4225</span>    <span class="keywordflow">except</span> AssertionError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno"> 4226</span>        <span class="keywordflow">raise</span> AssertionError(</div>
<div class="line"><span class="lineno"> 4227</span>            f<span class="stringliteral">&quot;{name} does not generate a valid dataframe in the {case} &quot;</span></div>
<div class="line"><span class="lineno"> 4228</span>            <span class="stringliteral">&quot;case. The generated dataframe is not equal to the expected &quot;</span></div>
<div class="line"><span class="lineno"> 4229</span>            f<span class="stringliteral">&quot;dataframe. The error message is: {e}&quot;</span></div>
<div class="line"><span class="lineno"> 4230</span>        ) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno"> 4231</span> </div>
<div class="line"><span class="lineno"> 4232</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="acebdca2319fca0088accdcd15e1dc0ac" name="acebdca2319fca0088accdcd15e1dc0ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acebdca2319fca0088accdcd15e1dc0ac">&#9670;&#160;</a></span>_check_transformer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._check_transformer </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1553</span><span class="keyword">def </span>_check_transformer(name, transformer_orig, X, y):</div>
<div class="line"><span class="lineno"> 1554</span>    n_samples, n_features = np.asarray(X).shape</div>
<div class="line"><span class="lineno"> 1555</span>    transformer = clone(transformer_orig)</div>
<div class="line"><span class="lineno"> 1556</span>    set_random_state(transformer)</div>
<div class="line"><span class="lineno"> 1557</span> </div>
<div class="line"><span class="lineno"> 1558</span>    <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 1559</span> </div>
<div class="line"><span class="lineno"> 1560</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 1561</span>        y_ = np.c_[np.asarray(y), np.asarray(y)]</div>
<div class="line"><span class="lineno"> 1562</span>        y_[::2, 1] *= 2</div>
<div class="line"><span class="lineno"> 1563</span>        <span class="keywordflow">if</span> isinstance(X, _NotAnArray):</div>
<div class="line"><span class="lineno"> 1564</span>            y_ = _NotAnArray(y_)</div>
<div class="line"><span class="lineno"> 1565</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1566</span>        y_ = y</div>
<div class="line"><span class="lineno"> 1567</span> </div>
<div class="line"><span class="lineno"> 1568</span>    transformer.fit(X, y_)</div>
<div class="line"><span class="lineno"> 1569</span>    <span class="comment"># fit_transform method should work on non fitted estimator</span></div>
<div class="line"><span class="lineno"> 1570</span>    transformer_clone = clone(transformer)</div>
<div class="line"><span class="lineno"> 1571</span>    X_pred = transformer_clone.fit_transform(X, y=y_)</div>
<div class="line"><span class="lineno"> 1572</span> </div>
<div class="line"><span class="lineno"> 1573</span>    <span class="keywordflow">if</span> isinstance(X_pred, tuple):</div>
<div class="line"><span class="lineno"> 1574</span>        <span class="keywordflow">for</span> x_pred <span class="keywordflow">in</span> X_pred:</div>
<div class="line"><span class="lineno"> 1575</span>            <span class="keyword">assert</span> x_pred.shape[0] == n_samples</div>
<div class="line"><span class="lineno"> 1576</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1577</span>        <span class="comment"># check for consistent n_samples</span></div>
<div class="line"><span class="lineno"> 1578</span>        <span class="keyword">assert</span> X_pred.shape[0] == n_samples</div>
<div class="line"><span class="lineno"> 1579</span> </div>
<div class="line"><span class="lineno"> 1580</span>    <span class="keywordflow">if</span> hasattr(transformer, <span class="stringliteral">&quot;transform&quot;</span>):</div>
<div class="line"><span class="lineno"> 1581</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 1582</span>            X_pred2 = transformer.transform(X, y_)</div>
<div class="line"><span class="lineno"> 1583</span>            X_pred3 = transformer.fit_transform(X, y=y_)</div>
<div class="line"><span class="lineno"> 1584</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1585</span>            X_pred2 = transformer.transform(X)</div>
<div class="line"><span class="lineno"> 1586</span>            X_pred3 = transformer.fit_transform(X, y=y_)</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>        <span class="keywordflow">if</span> _safe_tags(transformer_orig, key=<span class="stringliteral">&quot;non_deterministic&quot;</span>):</div>
<div class="line"><span class="lineno"> 1589</span>            msg = name + <span class="stringliteral">&quot; is non deterministic&quot;</span></div>
<div class="line"><span class="lineno"> 1590</span>            <span class="keywordflow">raise</span> SkipTest(msg)</div>
<div class="line"><span class="lineno"> 1591</span>        <span class="keywordflow">if</span> isinstance(X_pred, tuple) <span class="keywordflow">and</span> isinstance(X_pred2, tuple):</div>
<div class="line"><span class="lineno"> 1592</span>            <span class="keywordflow">for</span> x_pred, x_pred2, x_pred3 <span class="keywordflow">in</span> zip(X_pred, X_pred2, X_pred3):</div>
<div class="line"><span class="lineno"> 1593</span>                assert_allclose_dense_sparse(</div>
<div class="line"><span class="lineno"> 1594</span>                    x_pred,</div>
<div class="line"><span class="lineno"> 1595</span>                    x_pred2,</div>
<div class="line"><span class="lineno"> 1596</span>                    atol=1e-2,</div>
<div class="line"><span class="lineno"> 1597</span>                    err_msg=<span class="stringliteral">&quot;fit_transform and transform outcomes not consistent in %s&quot;</span></div>
<div class="line"><span class="lineno"> 1598</span>                    % transformer,</div>
<div class="line"><span class="lineno"> 1599</span>                )</div>
<div class="line"><span class="lineno"> 1600</span>                assert_allclose_dense_sparse(</div>
<div class="line"><span class="lineno"> 1601</span>                    x_pred,</div>
<div class="line"><span class="lineno"> 1602</span>                    x_pred3,</div>
<div class="line"><span class="lineno"> 1603</span>                    atol=1e-2,</div>
<div class="line"><span class="lineno"> 1604</span>                    err_msg=<span class="stringliteral">&quot;consecutive fit_transform outcomes not consistent in %s&quot;</span></div>
<div class="line"><span class="lineno"> 1605</span>                    % transformer,</div>
<div class="line"><span class="lineno"> 1606</span>                )</div>
<div class="line"><span class="lineno"> 1607</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1608</span>            assert_allclose_dense_sparse(</div>
<div class="line"><span class="lineno"> 1609</span>                X_pred,</div>
<div class="line"><span class="lineno"> 1610</span>                X_pred2,</div>
<div class="line"><span class="lineno"> 1611</span>                err_msg=<span class="stringliteral">&quot;fit_transform and transform outcomes not consistent in %s&quot;</span></div>
<div class="line"><span class="lineno"> 1612</span>                % transformer,</div>
<div class="line"><span class="lineno"> 1613</span>                atol=1e-2,</div>
<div class="line"><span class="lineno"> 1614</span>            )</div>
<div class="line"><span class="lineno"> 1615</span>            assert_allclose_dense_sparse(</div>
<div class="line"><span class="lineno"> 1616</span>                X_pred,</div>
<div class="line"><span class="lineno"> 1617</span>                X_pred3,</div>
<div class="line"><span class="lineno"> 1618</span>                atol=1e-2,</div>
<div class="line"><span class="lineno"> 1619</span>                err_msg=<span class="stringliteral">&quot;consecutive fit_transform outcomes not consistent in %s&quot;</span></div>
<div class="line"><span class="lineno"> 1620</span>                % transformer,</div>
<div class="line"><span class="lineno"> 1621</span>            )</div>
<div class="line"><span class="lineno"> 1622</span>            <span class="keyword">assert</span> _num_samples(X_pred2) == n_samples</div>
<div class="line"><span class="lineno"> 1623</span>            <span class="keyword">assert</span> _num_samples(X_pred3) == n_samples</div>
<div class="line"><span class="lineno"> 1624</span> </div>
<div class="line"><span class="lineno"> 1625</span>        <span class="comment"># raises error on malformed input for transform</span></div>
<div class="line"><span class="lineno"> 1626</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1627</span>            hasattr(X, <span class="stringliteral">&quot;shape&quot;</span>)</div>
<div class="line"><span class="lineno"> 1628</span>            <span class="keywordflow">and</span> <span class="keywordflow">not</span> _safe_tags(transformer, key=<span class="stringliteral">&quot;stateless&quot;</span>)</div>
<div class="line"><span class="lineno"> 1629</span>            <span class="keywordflow">and</span> X.ndim == 2</div>
<div class="line"><span class="lineno"> 1630</span>            <span class="keywordflow">and</span> X.shape[1] &gt; 1</div>
<div class="line"><span class="lineno"> 1631</span>        ):</div>
<div class="line"><span class="lineno"> 1632</span> </div>
<div class="line"><span class="lineno"> 1633</span>            <span class="comment"># If it&#39;s not an array, it does not have a &#39;T&#39; property</span></div>
<div class="line"><span class="lineno"> 1634</span>            <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 1635</span>                ValueError,</div>
<div class="line"><span class="lineno"> 1636</span>                err_msg=(</div>
<div class="line"><span class="lineno"> 1637</span>                    f<span class="stringliteral">&quot;The transformer {name} does not raise an error &quot;</span></div>
<div class="line"><span class="lineno"> 1638</span>                    <span class="stringliteral">&quot;when the number of features in transform is different from &quot;</span></div>
<div class="line"><span class="lineno"> 1639</span>                    <span class="stringliteral">&quot;the number of features in fit.&quot;</span></div>
<div class="line"><span class="lineno"> 1640</span>                ),</div>
<div class="line"><span class="lineno"> 1641</span>            ):</div>
<div class="line"><span class="lineno"> 1642</span>                transformer.transform(X[:, :-1])</div>
<div class="line"><span class="lineno"> 1643</span> </div>
<div class="line"><span class="lineno"> 1644</span> </div>
<div class="line"><span class="lineno"> 1645</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac04711503340f844859c03b9bc1812f6" name="ac04711503340f844859c03b9bc1812f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac04711503340f844859c03b9bc1812f6">&#9670;&#160;</a></span>_choose_check_classifiers_labels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._choose_check_classifiers_labels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_names</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2727</span><span class="keyword">def </span>_choose_check_classifiers_labels(name, y, y_names):</div>
<div class="line"><span class="lineno"> 2728</span>    <span class="comment"># Semisupervised classifiers use -1 as the indicator for an unlabeled</span></div>
<div class="line"><span class="lineno"> 2729</span>    <span class="comment"># sample.</span></div>
<div class="line"><span class="lineno"> 2730</span>    <span class="keywordflow">return</span> (</div>
<div class="line"><span class="lineno"> 2731</span>        y</div>
<div class="line"><span class="lineno"> 2732</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;LabelPropagation&quot;</span>, <span class="stringliteral">&quot;LabelSpreading&quot;</span>, <span class="stringliteral">&quot;SelfTrainingClassifier&quot;</span>]</div>
<div class="line"><span class="lineno"> 2733</span>        <span class="keywordflow">else</span> y_names</div>
<div class="line"><span class="lineno"> 2734</span>    )</div>
<div class="line"><span class="lineno"> 2735</span> </div>
<div class="line"><span class="lineno"> 2736</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a193ffc79cd22736ca1d3505696d34455" name="a193ffc79cd22736ca1d3505696d34455"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a193ffc79cd22736ca1d3505696d34455">&#9670;&#160;</a></span>_construct_instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._construct_instance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Estimator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Construct Estimator instance if possible.</pre> <div class="fragment"><div class="line"><span class="lineno">  391</span><span class="keyword">def </span>_construct_instance(Estimator):</div>
<div class="line"><span class="lineno">  392</span>    <span class="stringliteral">&quot;&quot;&quot;Construct Estimator instance if possible.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  393</span>    required_parameters = getattr(Estimator, <span class="stringliteral">&quot;_required_parameters&quot;</span>, [])</div>
<div class="line"><span class="lineno">  394</span>    <span class="keywordflow">if</span> len(required_parameters):</div>
<div class="line"><span class="lineno">  395</span>        <span class="keywordflow">if</span> required_parameters <span class="keywordflow">in</span> ([<span class="stringliteral">&quot;estimator&quot;</span>], [<span class="stringliteral">&quot;base_estimator&quot;</span>]):</div>
<div class="line"><span class="lineno">  396</span>            <span class="comment"># `RANSACRegressor` will raise an error with any model other</span></div>
<div class="line"><span class="lineno">  397</span>            <span class="comment"># than `LinearRegression` if we don&#39;t fix `min_samples` parameter.</span></div>
<div class="line"><span class="lineno">  398</span>            <span class="comment"># For common test, we can enforce using `LinearRegression` that</span></div>
<div class="line"><span class="lineno">  399</span>            <span class="comment"># is the default estimator in `RANSACRegressor` instead of `Ridge`.</span></div>
<div class="line"><span class="lineno">  400</span>            <span class="keywordflow">if</span> issubclass(Estimator, RANSACRegressor):</div>
<div class="line"><span class="lineno">  401</span>                estimator = Estimator(LinearRegression())</div>
<div class="line"><span class="lineno">  402</span>            <span class="keywordflow">elif</span> issubclass(Estimator, RegressorMixin):</div>
<div class="line"><span class="lineno">  403</span>                estimator = Estimator(Ridge())</div>
<div class="line"><span class="lineno">  404</span>            <span class="keywordflow">elif</span> issubclass(Estimator, SelectFromModel):</div>
<div class="line"><span class="lineno">  405</span>                <span class="comment"># Increases coverage because SGDRegressor has partial_fit</span></div>
<div class="line"><span class="lineno">  406</span>                estimator = Estimator(SGDRegressor(random_state=0))</div>
<div class="line"><span class="lineno">  407</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  408</span>                estimator = Estimator(LogisticRegression(C=1))</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordflow">elif</span> required_parameters <span class="keywordflow">in</span> ([<span class="stringliteral">&quot;estimators&quot;</span>],):</div>
<div class="line"><span class="lineno">  410</span>            <span class="comment"># Heterogeneous ensemble classes (i.e. stacking, voting)</span></div>
<div class="line"><span class="lineno">  411</span>            <span class="keywordflow">if</span> issubclass(Estimator, RegressorMixin):</div>
<div class="line"><span class="lineno">  412</span>                estimator = Estimator(</div>
<div class="line"><span class="lineno">  413</span>                    estimators=[(<span class="stringliteral">&quot;est1&quot;</span>, Ridge(alpha=0.1)), (<span class="stringliteral">&quot;est2&quot;</span>, Ridge(alpha=1))]</div>
<div class="line"><span class="lineno">  414</span>                )</div>
<div class="line"><span class="lineno">  415</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  416</span>                estimator = Estimator(</div>
<div class="line"><span class="lineno">  417</span>                    estimators=[</div>
<div class="line"><span class="lineno">  418</span>                        (<span class="stringliteral">&quot;est1&quot;</span>, LogisticRegression(C=0.1)),</div>
<div class="line"><span class="lineno">  419</span>                        (<span class="stringliteral">&quot;est2&quot;</span>, LogisticRegression(C=1)),</div>
<div class="line"><span class="lineno">  420</span>                    ]</div>
<div class="line"><span class="lineno">  421</span>                )</div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  423</span>            msg = (</div>
<div class="line"><span class="lineno">  424</span>                f<span class="stringliteral">&quot;Can&#39;t instantiate estimator {Estimator.__name__} &quot;</span></div>
<div class="line"><span class="lineno">  425</span>                f<span class="stringliteral">&quot;parameters {required_parameters}&quot;</span></div>
<div class="line"><span class="lineno">  426</span>            )</div>
<div class="line"><span class="lineno">  427</span>            <span class="comment"># raise additional warning to be shown by pytest</span></div>
<div class="line"><span class="lineno">  428</span>            warnings.warn(msg, SkipTestWarning)</div>
<div class="line"><span class="lineno">  429</span>            <span class="keywordflow">raise</span> SkipTest(msg)</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  431</span>        estimator = Estimator()</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">return</span> estimator</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8de67cdfde6b5911639a3cd8cce3d4b5" name="a8de67cdfde6b5911639a3cd8cce3d4b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8de67cdfde6b5911639a3cd8cce3d4b5">&#9670;&#160;</a></span>_enforce_estimator_tags_X()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._enforce_estimator_tags_X </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kernel</em> = <code>linear_kernel</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3277</span><span class="keyword">def </span>_enforce_estimator_tags_X(estimator, X, kernel=linear_kernel):</div>
<div class="line"><span class="lineno"> 3278</span>    <span class="comment"># Estimators with `1darray` in `X_types` tag only accept</span></div>
<div class="line"><span class="lineno"> 3279</span>    <span class="comment"># X of shape (`n_samples`,)</span></div>
<div class="line"><span class="lineno"> 3280</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;1darray&quot;</span> <span class="keywordflow">in</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;X_types&quot;</span>):</div>
<div class="line"><span class="lineno"> 3281</span>        X = X[:, 0]</div>
<div class="line"><span class="lineno"> 3282</span>    <span class="comment"># Estimators with a `requires_positive_X` tag only accept</span></div>
<div class="line"><span class="lineno"> 3283</span>    <span class="comment"># strictly positive data</span></div>
<div class="line"><span class="lineno"> 3284</span>    <span class="keywordflow">if</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;requires_positive_X&quot;</span>):</div>
<div class="line"><span class="lineno"> 3285</span>        X = X - X.min()</div>
<div class="line"><span class="lineno"> 3286</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;categorical&quot;</span> <span class="keywordflow">in</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;X_types&quot;</span>):</div>
<div class="line"><span class="lineno"> 3287</span>        X = (X - X.min()).astype(np.int32)</div>
<div class="line"><span class="lineno"> 3288</span> </div>
<div class="line"><span class="lineno"> 3289</span>    <span class="keywordflow">if</span> estimator.__class__.__name__ == <span class="stringliteral">&quot;SkewedChi2Sampler&quot;</span>:</div>
<div class="line"><span class="lineno"> 3290</span>        <span class="comment"># SkewedChi2Sampler requires X &gt; -skewdness in transform</span></div>
<div class="line"><span class="lineno"> 3291</span>        X = X - X.min()</div>
<div class="line"><span class="lineno"> 3292</span> </div>
<div class="line"><span class="lineno"> 3293</span>    <span class="comment"># Pairwise estimators only accept</span></div>
<div class="line"><span class="lineno"> 3294</span>    <span class="comment"># X of shape (`n_samples`, `n_samples`)</span></div>
<div class="line"><span class="lineno"> 3295</span>    <span class="keywordflow">if</span> _is_pairwise_metric(estimator):</div>
<div class="line"><span class="lineno"> 3296</span>        X = pairwise_distances(X, metric=<span class="stringliteral">&quot;euclidean&quot;</span>)</div>
<div class="line"><span class="lineno"> 3297</span>    <span class="keywordflow">elif</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;pairwise&quot;</span>):</div>
<div class="line"><span class="lineno"> 3298</span>        X = kernel(X, X)</div>
<div class="line"><span class="lineno"> 3299</span>    <span class="keywordflow">return</span> X</div>
<div class="line"><span class="lineno"> 3300</span> </div>
<div class="line"><span class="lineno"> 3301</span> </div>
<div class="line"><span class="lineno"> 3302</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a108cdb34e503b25c0406bf2199758bdf" name="a108cdb34e503b25c0406bf2199758bdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108cdb34e503b25c0406bf2199758bdf">&#9670;&#160;</a></span>_enforce_estimator_tags_y()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._enforce_estimator_tags_y </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3260</span><span class="keyword">def </span>_enforce_estimator_tags_y(estimator, y):</div>
<div class="line"><span class="lineno"> 3261</span>    <span class="comment"># Estimators with a `requires_positive_y` tag only accept strictly positive</span></div>
<div class="line"><span class="lineno"> 3262</span>    <span class="comment"># data</span></div>
<div class="line"><span class="lineno"> 3263</span>    <span class="keywordflow">if</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;requires_positive_y&quot;</span>):</div>
<div class="line"><span class="lineno"> 3264</span>        <span class="comment"># Create strictly positive y. The minimal increment above 0 is 1, as</span></div>
<div class="line"><span class="lineno"> 3265</span>        <span class="comment"># y could be of integer dtype.</span></div>
<div class="line"><span class="lineno"> 3266</span>        y += 1 + abs(y.min())</div>
<div class="line"><span class="lineno"> 3267</span>    <span class="comment"># Estimators with a `binary_only` tag only accept up to two unique y values</span></div>
<div class="line"><span class="lineno"> 3268</span>    <span class="keywordflow">if</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;binary_only&quot;</span>) <span class="keywordflow">and</span> y.size &gt; 0:</div>
<div class="line"><span class="lineno"> 3269</span>        y = np.where(y == y.flat[0], y, y.flat[0] + 1)</div>
<div class="line"><span class="lineno"> 3270</span>    <span class="comment"># Estimators in mono_output_task_error raise ValueError if y is of 1-D</span></div>
<div class="line"><span class="lineno"> 3271</span>    <span class="comment"># Convert into a 2-D y for those estimators.</span></div>
<div class="line"><span class="lineno"> 3272</span>    <span class="keywordflow">if</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;multioutput_only&quot;</span>):</div>
<div class="line"><span class="lineno"> 3273</span>        <span class="keywordflow">return</span> np.reshape(y, (-1, 1))</div>
<div class="line"><span class="lineno"> 3274</span>    <span class="keywordflow">return</span> y</div>
<div class="line"><span class="lineno"> 3275</span> </div>
<div class="line"><span class="lineno"> 3276</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fad1c3ce0a8645aea5fcbde6de7270f" name="a7fad1c3ce0a8645aea5fcbde6de7270f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fad1c3ce0a8645aea5fcbde6de7270f">&#9670;&#160;</a></span>_generate_sparse_matrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._generate_sparse_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_csr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Generate sparse matrices with {32,64}bit indices of diverse format.

Parameters
----------
X_csr: CSR Matrix
    Input matrix in CSR format.

Returns
-------
out: iter(Matrices)
    In format['dok', 'lil', 'dia', 'bsr', 'csr', 'csc', 'coo',
    'coo_64', 'csc_64', 'csr_64']
</pre> <div class="fragment"><div class="line"><span class="lineno">  812</span><span class="keyword">def </span>_generate_sparse_matrix(X_csr):</div>
<div class="line"><span class="lineno">  813</span>    <span class="stringliteral">&quot;&quot;&quot;Generate sparse matrices with {32,64}bit indices of diverse format.</span></div>
<div class="line"><span class="lineno">  814</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  815</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  816</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  817</span><span class="stringliteral">    X_csr: CSR Matrix</span></div>
<div class="line"><span class="lineno">  818</span><span class="stringliteral">        Input matrix in CSR format.</span></div>
<div class="line"><span class="lineno">  819</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  820</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  821</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  822</span><span class="stringliteral">    out: iter(Matrices)</span></div>
<div class="line"><span class="lineno">  823</span><span class="stringliteral">        In format[&#39;dok&#39;, &#39;lil&#39;, &#39;dia&#39;, &#39;bsr&#39;, &#39;csr&#39;, &#39;csc&#39;, &#39;coo&#39;,</span></div>
<div class="line"><span class="lineno">  824</span><span class="stringliteral">        &#39;coo_64&#39;, &#39;csc_64&#39;, &#39;csr_64&#39;]</span></div>
<div class="line"><span class="lineno">  825</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>    <span class="keyword">assert</span> X_csr.format == <span class="stringliteral">&quot;csr&quot;</span></div>
<div class="line"><span class="lineno">  828</span>    <span class="keywordflow">yield</span> <span class="stringliteral">&quot;csr&quot;</span>, X_csr.copy()</div>
<div class="line"><span class="lineno">  829</span>    <span class="keywordflow">for</span> sparse_format <span class="keywordflow">in</span> [<span class="stringliteral">&quot;dok&quot;</span>, <span class="stringliteral">&quot;lil&quot;</span>, <span class="stringliteral">&quot;dia&quot;</span>, <span class="stringliteral">&quot;bsr&quot;</span>, <span class="stringliteral">&quot;csc&quot;</span>, <span class="stringliteral">&quot;coo&quot;</span>]:</div>
<div class="line"><span class="lineno">  830</span>        <span class="keywordflow">yield</span> sparse_format, X_csr.asformat(sparse_format)</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>    <span class="comment"># Generate large indices matrix only if its supported by scipy</span></div>
<div class="line"><span class="lineno">  833</span>    X_coo = X_csr.asformat(<span class="stringliteral">&quot;coo&quot;</span>)</div>
<div class="line"><span class="lineno">  834</span>    X_coo.row = X_coo.row.astype(<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  835</span>    X_coo.col = X_coo.col.astype(<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  836</span>    <span class="keywordflow">yield</span> <span class="stringliteral">&quot;coo_64&quot;</span>, X_coo</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>    <span class="keywordflow">for</span> sparse_format <span class="keywordflow">in</span> [<span class="stringliteral">&quot;csc&quot;</span>, <span class="stringliteral">&quot;csr&quot;</span>]:</div>
<div class="line"><span class="lineno">  839</span>        X = X_csr.asformat(sparse_format)</div>
<div class="line"><span class="lineno">  840</span>        X.indices = X.indices.astype(<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  841</span>        X.indptr = X.indptr.astype(<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  842</span>        <span class="keywordflow">yield</span> sparse_format + <span class="stringliteral">&quot;_64&quot;</span>, X</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c0bd8138d1066ef2db93f6cb5ed397d" name="a5c0bd8138d1066ef2db93f6cb5ed397d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c0bd8138d1066ef2db93f6cb5ed397d">&#9670;&#160;</a></span>_get_check_estimator_ids()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._get_check_estimator_ids </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Create pytest ids for checks.

When `obj` is an estimator, this returns the pprint version of the
estimator (with `print_changed_only=True`). When `obj` is a function, the
name of the function is returned with its keyword arguments.

`_get_check_estimator_ids` is designed to be used as the `id` in
`pytest.mark.parametrize` where `check_estimator(..., generate_only=True)`
is yielding estimators and checks.

Parameters
----------
obj : estimator or function
    Items generated by `check_estimator`.

Returns
-------
id : str or None

See Also
--------
check_estimator
</pre> <div class="fragment"><div class="line"><span class="lineno">  353</span><span class="keyword">def </span>_get_check_estimator_ids(obj):</div>
<div class="line"><span class="lineno">  354</span>    <span class="stringliteral">&quot;&quot;&quot;Create pytest ids for checks.</span></div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  356</span><span class="stringliteral">    When `obj` is an estimator, this returns the pprint version of the</span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">    estimator (with `print_changed_only=True`). When `obj` is a function, the</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral">    name of the function is returned with its keyword arguments.</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">    `_get_check_estimator_ids` is designed to be used as the `id` in</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">    `pytest.mark.parametrize` where `check_estimator(..., generate_only=True)`</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">    is yielding estimators and checks.</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">    obj : estimator or function</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">        Items generated by `check_estimator`.</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">    id : str or None</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">    check_estimator</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  377</span>    <span class="keywordflow">if</span> callable(obj):</div>
<div class="line"><span class="lineno">  378</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(obj, partial):</div>
<div class="line"><span class="lineno">  379</span>            <span class="keywordflow">return</span> obj.__name__</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> obj.keywords:</div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">return</span> obj.func.__name__</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>        kwstring = <span class="stringliteral">&quot;,&quot;</span>.join([<span class="stringliteral">&quot;{}={}&quot;</span>.format(k, v) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> obj.keywords.items()])</div>
<div class="line"><span class="lineno">  385</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;{}({})&quot;</span>.format(obj.func.__name__, kwstring)</div>
<div class="line"><span class="lineno">  386</span>    <span class="keywordflow">if</span> hasattr(obj, <span class="stringliteral">&quot;get_params&quot;</span>):</div>
<div class="line"><span class="lineno">  387</span>        <span class="keyword">with</span> config_context(print_changed_only=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno">  388</span>            <span class="keywordflow">return</span> re.sub(<span class="stringliteral">r&quot;\s&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, str(obj))</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adf0e4777aabc75ab1e5fc79787a0050d" name="adf0e4777aabc75ab1e5fc79787a0050d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf0e4777aabc75ab1e5fc79787a0050d">&#9670;&#160;</a></span>_is_pairwise_metric()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._is_pairwise_metric </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns True if estimator accepts pairwise metric.

Parameters
----------
estimator : object
    Estimator object to test.

Returns
-------
out : bool
    True if _pairwise is set to True and False otherwise.
</pre> <div class="fragment"><div class="line"><span class="lineno">  794</span><span class="keyword">def </span>_is_pairwise_metric(estimator):</div>
<div class="line"><span class="lineno">  795</span>    <span class="stringliteral">&quot;&quot;&quot;Returns True if estimator accepts pairwise metric.</span></div>
<div class="line"><span class="lineno">  796</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  797</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  798</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  799</span><span class="stringliteral">    estimator : object</span></div>
<div class="line"><span class="lineno">  800</span><span class="stringliteral">        Estimator object to test.</span></div>
<div class="line"><span class="lineno">  801</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  802</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  803</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  804</span><span class="stringliteral">    out : bool</span></div>
<div class="line"><span class="lineno">  805</span><span class="stringliteral">        True if _pairwise is set to True and False otherwise.</span></div>
<div class="line"><span class="lineno">  806</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  807</span>    metric = getattr(estimator, <span class="stringliteral">&quot;metric&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  808</span> </div>
<div class="line"><span class="lineno">  809</span>    <span class="keywordflow">return</span> bool(metric == <span class="stringliteral">&quot;precomputed&quot;</span>)</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a53cd7b7b32c57957aca90ff5f60f83ec" name="a53cd7b7b32c57957aca90ff5f60f83ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53cd7b7b32c57957aca90ff5f60f83ec">&#9670;&#160;</a></span>_is_public_parameter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._is_public_parameter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>attr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1221</span><span class="keyword">def </span>_is_public_parameter(attr):</div>
<div class="line"><span class="lineno"> 1222</span>    <span class="keywordflow">return</span> <span class="keywordflow">not</span> (attr.startswith(<span class="stringliteral">&quot;_&quot;</span>) <span class="keywordflow">or</span> attr.endswith(<span class="stringliteral">&quot;_&quot;</span>))</div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span> </div>
<div class="line"><span class="lineno"> 1225</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a698be983a178ea8c07b8addb65c7c10c" name="a698be983a178ea8c07b8addb65c7c10c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698be983a178ea8c07b8addb65c7c10c">&#9670;&#160;</a></span>_maybe_mark_xfail()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._maybe_mark_xfail </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pytest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  435</span><span class="keyword">def </span>_maybe_mark_xfail(estimator, check, pytest):</div>
<div class="line"><span class="lineno">  436</span>    <span class="comment"># Mark (estimator, check) pairs as XFAIL if needed (see conditions in</span></div>
<div class="line"><span class="lineno">  437</span>    <span class="comment"># _should_be_skipped_or_marked())</span></div>
<div class="line"><span class="lineno">  438</span>    <span class="comment"># This is similar to _maybe_skip(), but this one is used by</span></div>
<div class="line"><span class="lineno">  439</span>    <span class="comment"># @parametrize_with_checks() instead of check_estimator()</span></div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>    should_be_marked, reason = _should_be_skipped_or_marked(estimator, check)</div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> should_be_marked:</div>
<div class="line"><span class="lineno">  443</span>        <span class="keywordflow">return</span> estimator, check</div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  445</span>        <span class="keywordflow">return</span> pytest.param(estimator, check, marks=pytest.mark.xfail(reason=reason))</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5344df343c3f8516085fa1f539c8f552" name="a5344df343c3f8516085fa1f539c8f552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5344df343c3f8516085fa1f539c8f552">&#9670;&#160;</a></span>_maybe_skip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._maybe_skip </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  448</span><span class="keyword">def </span>_maybe_skip(estimator, check):</div>
<div class="line"><span class="lineno">  449</span>    <span class="comment"># Wrap a check so that it&#39;s skipped if needed (see conditions in</span></div>
<div class="line"><span class="lineno">  450</span>    <span class="comment"># _should_be_skipped_or_marked())</span></div>
<div class="line"><span class="lineno">  451</span>    <span class="comment"># This is similar to _maybe_mark_xfail(), but this one is used by</span></div>
<div class="line"><span class="lineno">  452</span>    <span class="comment"># check_estimator() instead of @parametrize_with_checks which requires</span></div>
<div class="line"><span class="lineno">  453</span>    <span class="comment"># pytest</span></div>
<div class="line"><span class="lineno">  454</span>    should_be_skipped, reason = _should_be_skipped_or_marked(estimator, check)</div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> should_be_skipped:</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordflow">return</span> check</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    check_name = check.func.__name__ <span class="keywordflow">if</span> isinstance(check, partial) <span class="keywordflow">else</span> check.__name__</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>    <span class="preprocessor">@wraps(check)</span></div>
<div class="line"><span class="lineno">  461</span>    <span class="keyword">def </span>wrapped(*args, **kwargs):</div>
<div class="line"><span class="lineno">  462</span>        <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno">  463</span>            f<span class="stringliteral">&quot;Skipping {check_name} for {estimator.__class__.__name__}: {reason}&quot;</span></div>
<div class="line"><span class="lineno">  464</span>        )</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>    <span class="keywordflow">return</span> wrapped</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa90f156268add9781405d97b3443824f" name="aa90f156268add9781405d97b3443824f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa90f156268add9781405d97b3443824f">&#9670;&#160;</a></span>_output_from_fit_transform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._output_from_fit_transform </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Generate output to test `set_output` for different configuration:

- calling either `fit.transform` or `fit_transform`;
- passing either a dataframe or a numpy array to fit;
- passing either a dataframe or a numpy array to transform.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 4168</span><span class="keyword">def </span>_output_from_fit_transform(transformer, name, X, df, y):</div>
<div class="line"><span class="lineno"> 4169</span>    <span class="stringliteral">&quot;&quot;&quot;Generate output to test `set_output` for different configuration:</span></div>
<div class="line"><span class="lineno"> 4170</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 4171</span><span class="stringliteral">    - calling either `fit.transform` or `fit_transform`;</span></div>
<div class="line"><span class="lineno"> 4172</span><span class="stringliteral">    - passing either a dataframe or a numpy array to fit;</span></div>
<div class="line"><span class="lineno"> 4173</span><span class="stringliteral">    - passing either a dataframe or a numpy array to transform.</span></div>
<div class="line"><span class="lineno"> 4174</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 4175</span>    outputs = {}</div>
<div class="line"><span class="lineno"> 4176</span> </div>
<div class="line"><span class="lineno"> 4177</span>    <span class="comment"># fit then transform case:</span></div>
<div class="line"><span class="lineno"> 4178</span>    cases = [</div>
<div class="line"><span class="lineno"> 4179</span>        (<span class="stringliteral">&quot;fit.transform/df/df&quot;</span>, df, df),</div>
<div class="line"><span class="lineno"> 4180</span>        (<span class="stringliteral">&quot;fit.transform/df/array&quot;</span>, df, X),</div>
<div class="line"><span class="lineno"> 4181</span>        (<span class="stringliteral">&quot;fit.transform/array/df&quot;</span>, X, df),</div>
<div class="line"><span class="lineno"> 4182</span>        (<span class="stringliteral">&quot;fit.transform/array/array&quot;</span>, X, X),</div>
<div class="line"><span class="lineno"> 4183</span>    ]</div>
<div class="line"><span class="lineno"> 4184</span>    <span class="keywordflow">for</span> (</div>
<div class="line"><span class="lineno"> 4185</span>        case,</div>
<div class="line"><span class="lineno"> 4186</span>        data_fit,</div>
<div class="line"><span class="lineno"> 4187</span>        data_transform,</div>
<div class="line"><span class="lineno"> 4188</span>    ) <span class="keywordflow">in</span> cases:</div>
<div class="line"><span class="lineno"> 4189</span>        transformer.fit(data_fit, y)</div>
<div class="line"><span class="lineno"> 4190</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 4191</span>            X_trans, _ = transformer.transform(data_transform, y)</div>
<div class="line"><span class="lineno"> 4192</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 4193</span>            X_trans = transformer.transform(data_transform)</div>
<div class="line"><span class="lineno"> 4194</span>        outputs[case] = (X_trans, transformer.get_feature_names_out())</div>
<div class="line"><span class="lineno"> 4195</span> </div>
<div class="line"><span class="lineno"> 4196</span>    <span class="comment"># fit_transform case:</span></div>
<div class="line"><span class="lineno"> 4197</span>    cases = [</div>
<div class="line"><span class="lineno"> 4198</span>        (<span class="stringliteral">&quot;fit_transform/df&quot;</span>, df),</div>
<div class="line"><span class="lineno"> 4199</span>        (<span class="stringliteral">&quot;fit_transform/array&quot;</span>, X),</div>
<div class="line"><span class="lineno"> 4200</span>    ]</div>
<div class="line"><span class="lineno"> 4201</span>    <span class="keywordflow">for</span> case, data <span class="keywordflow">in</span> cases:</div>
<div class="line"><span class="lineno"> 4202</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 4203</span>            X_trans, _ = transformer.fit_transform(data, y)</div>
<div class="line"><span class="lineno"> 4204</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 4205</span>            X_trans = transformer.fit_transform(data, y)</div>
<div class="line"><span class="lineno"> 4206</span>        outputs[case] = (X_trans, transformer.get_feature_names_out())</div>
<div class="line"><span class="lineno"> 4207</span> </div>
<div class="line"><span class="lineno"> 4208</span>    <span class="keywordflow">return</span> outputs</div>
<div class="line"><span class="lineno"> 4209</span> </div>
<div class="line"><span class="lineno"> 4210</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8cf93dc7133c789c07f581fea4bee33b" name="a8cf93dc7133c789c07f581fea4bee33b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cf93dc7133c789c07f581fea4bee33b">&#9670;&#160;</a></span>_regression_dataset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._regression_dataset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  640</span><span class="keyword">def </span>_regression_dataset():</div>
<div class="line"><span class="lineno">  641</span>    <span class="keyword">global</span> REGRESSION_DATASET</div>
<div class="line"><span class="lineno">  642</span>    <span class="keywordflow">if</span> REGRESSION_DATASET <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  643</span>        X, y = make_regression(</div>
<div class="line"><span class="lineno">  644</span>            n_samples=200,</div>
<div class="line"><span class="lineno">  645</span>            n_features=10,</div>
<div class="line"><span class="lineno">  646</span>            n_informative=1,</div>
<div class="line"><span class="lineno">  647</span>            bias=5.0,</div>
<div class="line"><span class="lineno">  648</span>            noise=20,</div>
<div class="line"><span class="lineno">  649</span>            random_state=42,</div>
<div class="line"><span class="lineno">  650</span>        )</div>
<div class="line"><span class="lineno">  651</span>        X = StandardScaler().fit_transform(X)</div>
<div class="line"><span class="lineno">  652</span>        REGRESSION_DATASET = X, y</div>
<div class="line"><span class="lineno">  653</span>    <span class="keywordflow">return</span> REGRESSION_DATASET</div>
<div class="line"><span class="lineno">  654</span> </div>
<div class="line"><span class="lineno">  655</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e39c132373b927fc3bee81622f34c36" name="a4e39c132373b927fc3bee81622f34c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e39c132373b927fc3bee81622f34c36">&#9670;&#160;</a></span>_set_checking_parameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._set_checking_parameters </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  656</span><span class="keyword">def </span>_set_checking_parameters(estimator):</div>
<div class="line"><span class="lineno">  657</span>    <span class="comment"># set parameters to speed up some estimators and</span></div>
<div class="line"><span class="lineno">  658</span>    <span class="comment"># avoid deprecated behaviour</span></div>
<div class="line"><span class="lineno">  659</span>    params = estimator.get_params()</div>
<div class="line"><span class="lineno">  660</span>    name = estimator.__class__.__name__</div>
<div class="line"><span class="lineno">  661</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;TSNE&quot;</span>:</div>
<div class="line"><span class="lineno">  662</span>        estimator.set_params(perplexity=2)</div>
<div class="line"><span class="lineno">  663</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;n_iter&quot;</span> <span class="keywordflow">in</span> params <span class="keywordflow">and</span> name != <span class="stringliteral">&quot;TSNE&quot;</span>:</div>
<div class="line"><span class="lineno">  664</span>        estimator.set_params(n_iter=5)</div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;max_iter&quot;</span> <span class="keywordflow">in</span> params:</div>
<div class="line"><span class="lineno">  666</span>        <span class="keywordflow">if</span> estimator.max_iter <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  667</span>            estimator.set_params(max_iter=min(5, estimator.max_iter))</div>
<div class="line"><span class="lineno">  668</span>        <span class="comment"># LinearSVR, LinearSVC</span></div>
<div class="line"><span class="lineno">  669</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;LinearSVR&quot;</span>, <span class="stringliteral">&quot;LinearSVC&quot;</span>]:</div>
<div class="line"><span class="lineno">  670</span>            estimator.set_params(max_iter=20)</div>
<div class="line"><span class="lineno">  671</span>        <span class="comment"># NMF</span></div>
<div class="line"><span class="lineno">  672</span>        <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;NMF&quot;</span>:</div>
<div class="line"><span class="lineno">  673</span>            estimator.set_params(max_iter=500)</div>
<div class="line"><span class="lineno">  674</span>        <span class="comment"># MiniBatchNMF</span></div>
<div class="line"><span class="lineno">  675</span>        <span class="keywordflow">if</span> estimator.__class__.__name__ == <span class="stringliteral">&quot;MiniBatchNMF&quot;</span>:</div>
<div class="line"><span class="lineno">  676</span>            estimator.set_params(max_iter=20, fresh_restarts=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  677</span>        <span class="comment"># MLP</span></div>
<div class="line"><span class="lineno">  678</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;MLPClassifier&quot;</span>, <span class="stringliteral">&quot;MLPRegressor&quot;</span>]:</div>
<div class="line"><span class="lineno">  679</span>            estimator.set_params(max_iter=100)</div>
<div class="line"><span class="lineno">  680</span>        <span class="comment"># MiniBatchDictionaryLearning</span></div>
<div class="line"><span class="lineno">  681</span>        <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;MiniBatchDictionaryLearning&quot;</span>:</div>
<div class="line"><span class="lineno">  682</span>            estimator.set_params(max_iter=5)</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;n_resampling&quot;</span> <span class="keywordflow">in</span> params:</div>
<div class="line"><span class="lineno">  685</span>        <span class="comment"># randomized lasso</span></div>
<div class="line"><span class="lineno">  686</span>        estimator.set_params(n_resampling=5)</div>
<div class="line"><span class="lineno">  687</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;n_estimators&quot;</span> <span class="keywordflow">in</span> params:</div>
<div class="line"><span class="lineno">  688</span>        estimator.set_params(n_estimators=min(5, estimator.n_estimators))</div>
<div class="line"><span class="lineno">  689</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;max_trials&quot;</span> <span class="keywordflow">in</span> params:</div>
<div class="line"><span class="lineno">  690</span>        <span class="comment"># RANSAC</span></div>
<div class="line"><span class="lineno">  691</span>        estimator.set_params(max_trials=10)</div>
<div class="line"><span class="lineno">  692</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;n_init&quot;</span> <span class="keywordflow">in</span> params:</div>
<div class="line"><span class="lineno">  693</span>        <span class="comment"># K-Means</span></div>
<div class="line"><span class="lineno">  694</span>        estimator.set_params(n_init=2)</div>
<div class="line"><span class="lineno">  695</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;batch_size&quot;</span> <span class="keywordflow">in</span> params <span class="keywordflow">and</span> <span class="keywordflow">not</span> name.startswith(<span class="stringliteral">&quot;MLP&quot;</span>):</div>
<div class="line"><span class="lineno">  696</span>        estimator.set_params(batch_size=10)</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;MeanShift&quot;</span>:</div>
<div class="line"><span class="lineno">  699</span>        <span class="comment"># In the case of check_fit2d_1sample, bandwidth is set to None and</span></div>
<div class="line"><span class="lineno">  700</span>        <span class="comment"># is thus estimated. De facto it is 0.0 as a single sample is provided</span></div>
<div class="line"><span class="lineno">  701</span>        <span class="comment"># and this makes the test fails. Hence we give it a placeholder value.</span></div>
<div class="line"><span class="lineno">  702</span>        estimator.set_params(bandwidth=1.0)</div>
<div class="line"><span class="lineno">  703</span> </div>
<div class="line"><span class="lineno">  704</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;TruncatedSVD&quot;</span>:</div>
<div class="line"><span class="lineno">  705</span>        <span class="comment"># TruncatedSVD doesn&#39;t run with n_components = n_features</span></div>
<div class="line"><span class="lineno">  706</span>        <span class="comment"># This is ugly :-/</span></div>
<div class="line"><span class="lineno">  707</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno">  708</span> </div>
<div class="line"><span class="lineno">  709</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;LassoLarsIC&quot;</span>:</div>
<div class="line"><span class="lineno">  710</span>        <span class="comment"># Noise variance estimation does not work when `n_samples &lt; n_features`.</span></div>
<div class="line"><span class="lineno">  711</span>        <span class="comment"># We need to provide the noise variance explicitly.</span></div>
<div class="line"><span class="lineno">  712</span>        estimator.set_params(noise_variance=1.0)</div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno">  715</span>        estimator.n_clusters = min(estimator.n_clusters, 2)</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_best&quot;</span>):</div>
<div class="line"><span class="lineno">  718</span>        estimator.n_best = 1</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;SelectFdr&quot;</span>:</div>
<div class="line"><span class="lineno">  721</span>        <span class="comment"># be tolerant of noisy datasets (not actually speed)</span></div>
<div class="line"><span class="lineno">  722</span>        estimator.set_params(alpha=0.5)</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;TheilSenRegressor&quot;</span>:</div>
<div class="line"><span class="lineno">  725</span>        estimator.max_subpopulation = 100</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>    <span class="keywordflow">if</span> isinstance(estimator, BaseRandomProjection):</div>
<div class="line"><span class="lineno">  728</span>        <span class="comment"># Due to the jl lemma and often very few samples, the number</span></div>
<div class="line"><span class="lineno">  729</span>        <span class="comment"># of components of the random matrix projection will be probably</span></div>
<div class="line"><span class="lineno">  730</span>        <span class="comment"># greater than the number of features.</span></div>
<div class="line"><span class="lineno">  731</span>        <span class="comment"># So we impose a smaller number (avoid &quot;auto&quot; mode)</span></div>
<div class="line"><span class="lineno">  732</span>        estimator.set_params(n_components=2)</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>    <span class="keywordflow">if</span> isinstance(estimator, SelectKBest):</div>
<div class="line"><span class="lineno">  735</span>        <span class="comment"># SelectKBest has a default of k=10</span></div>
<div class="line"><span class="lineno">  736</span>        <span class="comment"># which is more feature than we have in most case.</span></div>
<div class="line"><span class="lineno">  737</span>        estimator.set_params(k=1)</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> (<span class="stringliteral">&quot;HistGradientBoostingClassifier&quot;</span>, <span class="stringliteral">&quot;HistGradientBoostingRegressor&quot;</span>):</div>
<div class="line"><span class="lineno">  740</span>        <span class="comment"># The default min_samples_leaf (20) isn&#39;t appropriate for small</span></div>
<div class="line"><span class="lineno">  741</span>        <span class="comment"># datasets (only very shallow trees are built) that the checks use.</span></div>
<div class="line"><span class="lineno">  742</span>        estimator.set_params(min_samples_leaf=5)</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;DummyClassifier&quot;</span>:</div>
<div class="line"><span class="lineno">  745</span>        <span class="comment"># the default strategy prior would output constant predictions and fail</span></div>
<div class="line"><span class="lineno">  746</span>        <span class="comment"># for check_classifiers_predictions</span></div>
<div class="line"><span class="lineno">  747</span>        estimator.set_params(strategy=<span class="stringliteral">&quot;stratified&quot;</span>)</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>    <span class="comment"># Speed-up by reducing the number of CV or splits for CV estimators</span></div>
<div class="line"><span class="lineno">  750</span>    loo_cv = [<span class="stringliteral">&quot;RidgeCV&quot;</span>, <span class="stringliteral">&quot;RidgeClassifierCV&quot;</span>]</div>
<div class="line"><span class="lineno">  751</span>    <span class="keywordflow">if</span> name <span class="keywordflow">not</span> <span class="keywordflow">in</span> loo_cv <span class="keywordflow">and</span> hasattr(estimator, <span class="stringliteral">&quot;cv&quot;</span>):</div>
<div class="line"><span class="lineno">  752</span>        estimator.set_params(cv=3)</div>
<div class="line"><span class="lineno">  753</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_splits&quot;</span>):</div>
<div class="line"><span class="lineno">  754</span>        estimator.set_params(n_splits=3)</div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;OneHotEncoder&quot;</span>:</div>
<div class="line"><span class="lineno">  757</span>        estimator.set_params(handle_unknown=<span class="stringliteral">&quot;ignore&quot;</span>)</div>
<div class="line"><span class="lineno">  758</span> </div>
<div class="line"><span class="lineno">  759</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;QuantileRegressor&quot;</span>:</div>
<div class="line"><span class="lineno">  760</span>        <span class="comment"># Avoid warning due to Scipy deprecating interior-point solver</span></div>
<div class="line"><span class="lineno">  761</span>        solver = <span class="stringliteral">&quot;highs&quot;</span> <span class="keywordflow">if</span> sp_version &gt;= parse_version(<span class="stringliteral">&quot;1.6.0&quot;</span>) <span class="keywordflow">else</span> <span class="stringliteral">&quot;interior-point&quot;</span></div>
<div class="line"><span class="lineno">  762</span>        estimator.set_params(solver=solver)</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno">  765</span>        estimator.set_params(n_components=1)</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>    <span class="comment"># Default &quot;auto&quot; parameter can lead to different ordering of eigenvalues on</span></div>
<div class="line"><span class="lineno">  768</span>    <span class="comment"># windows: #24105</span></div>
<div class="line"><span class="lineno">  769</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;SpectralEmbedding&quot;</span>:</div>
<div class="line"><span class="lineno">  770</span>        estimator.set_params(eigen_tol=1e-5)</div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa588df4f1da7e98f3e736c60323351f" name="aaa588df4f1da7e98f3e736c60323351f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa588df4f1da7e98f3e736c60323351f">&#9670;&#160;</a></span>_should_be_skipped_or_marked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._should_be_skipped_or_marked </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  469</span><span class="keyword">def </span>_should_be_skipped_or_marked(estimator, check):</div>
<div class="line"><span class="lineno">  470</span>    <span class="comment"># Return whether a check should be skipped (when using check_estimator())</span></div>
<div class="line"><span class="lineno">  471</span>    <span class="comment"># or marked as XFAIL (when using @parametrize_with_checks()), along with a</span></div>
<div class="line"><span class="lineno">  472</span>    <span class="comment"># reason.</span></div>
<div class="line"><span class="lineno">  473</span>    <span class="comment"># Currently, a check should be skipped or marked if</span></div>
<div class="line"><span class="lineno">  474</span>    <span class="comment"># the check is in the _xfail_checks tag of the estimator</span></div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>    check_name = check.func.__name__ <span class="keywordflow">if</span> isinstance(check, partial) <span class="keywordflow">else</span> check.__name__</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>    xfail_checks = _safe_tags(estimator, key=<span class="stringliteral">&quot;_xfail_checks&quot;</span>) <span class="keywordflow">or</span> {}</div>
<div class="line"><span class="lineno">  479</span>    <span class="keywordflow">if</span> check_name <span class="keywordflow">in</span> xfail_checks:</div>
<div class="line"><span class="lineno">  480</span>        <span class="keywordflow">return</span> <span class="keyword">True</span>, xfail_checks[check_name]</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>    <span class="keywordflow">return</span> <span class="keyword">False</span>, <span class="stringliteral">&quot;placeholder reason that will never be used&quot;</span></div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ce1b7139b9344bf5bf14d944cce9b53" name="a2ce1b7139b9344bf5bf14d944cce9b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ce1b7139b9344bf5bf14d944cce9b53">&#9670;&#160;</a></span>_yield_all_checks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._yield_all_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  296</span><span class="keyword">def </span>_yield_all_checks(estimator):</div>
<div class="line"><span class="lineno">  297</span>    name = estimator.__class__.__name__</div>
<div class="line"><span class="lineno">  298</span>    tags = _safe_tags(estimator)</div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>]:</div>
<div class="line"><span class="lineno">  300</span>        warnings.warn(</div>
<div class="line"><span class="lineno">  301</span>            <span class="stringliteral">&quot;Can&#39;t test estimator {} which requires input  of type {}&quot;</span>.format(</div>
<div class="line"><span class="lineno">  302</span>                name, tags[<span class="stringliteral">&quot;X_types&quot;</span>]</div>
<div class="line"><span class="lineno">  303</span>            ),</div>
<div class="line"><span class="lineno">  304</span>            SkipTestWarning,</div>
<div class="line"><span class="lineno">  305</span>        )</div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;_skip_test&quot;</span>]:</div>
<div class="line"><span class="lineno">  308</span>        warnings.warn(</div>
<div class="line"><span class="lineno">  309</span>            <span class="stringliteral">&quot;Explicit SKIP via _skip_test tag for estimator {}.&quot;</span>.format(name),</div>
<div class="line"><span class="lineno">  310</span>            SkipTestWarning,</div>
<div class="line"><span class="lineno">  311</span>        )</div>
<div class="line"><span class="lineno">  312</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_checks(estimator):</div>
<div class="line"><span class="lineno">  315</span>        <span class="keywordflow">yield</span> check</div>
<div class="line"><span class="lineno">  316</span>    <span class="keywordflow">if</span> is_classifier(estimator):</div>
<div class="line"><span class="lineno">  317</span>        <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_classifier_checks(estimator):</div>
<div class="line"><span class="lineno">  318</span>            <span class="keywordflow">yield</span> check</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">if</span> is_regressor(estimator):</div>
<div class="line"><span class="lineno">  320</span>        <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_regressor_checks(estimator):</div>
<div class="line"><span class="lineno">  321</span>            <span class="keywordflow">yield</span> check</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;transform&quot;</span>):</div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_transformer_checks(estimator):</div>
<div class="line"><span class="lineno">  324</span>            <span class="keywordflow">yield</span> check</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordflow">if</span> isinstance(estimator, ClusterMixin):</div>
<div class="line"><span class="lineno">  326</span>        <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_clustering_checks(estimator):</div>
<div class="line"><span class="lineno">  327</span>            <span class="keywordflow">yield</span> check</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">if</span> is_outlier_detector(estimator):</div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_outliers_checks(estimator):</div>
<div class="line"><span class="lineno">  330</span>            <span class="keywordflow">yield</span> check</div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">yield</span> check_parameters_default_constructible</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;non_deterministic&quot;</span>]:</div>
<div class="line"><span class="lineno">  333</span>        <span class="keywordflow">yield</span> check_methods_sample_order_invariance</div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordflow">yield</span> check_methods_subset_invariance</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">yield</span> check_fit2d_1sample</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">yield</span> check_fit2d_1feature</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">yield</span> check_get_params_invariance</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">yield</span> check_set_params</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">yield</span> check_dict_unchanged</div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">yield</span> check_dont_overwrite_parameters</div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordflow">yield</span> check_fit_idempotent</div>
<div class="line"><span class="lineno">  342</span>    <span class="keywordflow">yield</span> check_fit_check_is_fitted</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno">  344</span>        <span class="keywordflow">yield</span> check_n_features_in</div>
<div class="line"><span class="lineno">  345</span>        <span class="keywordflow">yield</span> check_fit1d</div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">yield</span> check_fit2d_predict1d</div>
<div class="line"><span class="lineno">  347</span>        <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;requires_y&quot;</span>]:</div>
<div class="line"><span class="lineno">  348</span>            <span class="keywordflow">yield</span> check_requires_y_none</div>
<div class="line"><span class="lineno">  349</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;requires_positive_X&quot;</span>]:</div>
<div class="line"><span class="lineno">  350</span>        <span class="keywordflow">yield</span> check_fit_non_negative</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6f4742ff2949ca88d1af88071998533" name="ab6f4742ff2949ca88d1af88071998533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6f4742ff2949ca88d1af88071998533">&#9670;&#160;</a></span>_yield_checks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._yield_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   85</span><span class="keyword">def </span>_yield_checks(estimator):</div>
<div class="line"><span class="lineno">   86</span>    name = estimator.__class__.__name__</div>
<div class="line"><span class="lineno">   87</span>    tags = _safe_tags(estimator)</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">yield</span> check_no_attributes_set_in_init</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">yield</span> check_estimators_dtypes</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">yield</span> check_fit_score_takes_y</div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">if</span> has_fit_parameter(estimator, <span class="stringliteral">&quot;sample_weight&quot;</span>):</div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">yield</span> check_sample_weights_pandas_series</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">yield</span> check_sample_weights_not_an_array</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">yield</span> check_sample_weights_list</div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;pairwise&quot;</span>]:</div>
<div class="line"><span class="lineno">   97</span>            <span class="comment"># We skip pairwise because the data is not pairwise</span></div>
<div class="line"><span class="lineno">   98</span>            <span class="keywordflow">yield</span> check_sample_weights_shape</div>
<div class="line"><span class="lineno">   99</span>            <span class="keywordflow">yield</span> check_sample_weights_not_overwritten</div>
<div class="line"><span class="lineno">  100</span>            <span class="keywordflow">yield</span> partial(check_sample_weights_invariance, kind=<span class="stringliteral">&quot;ones&quot;</span>)</div>
<div class="line"><span class="lineno">  101</span>            <span class="keywordflow">yield</span> partial(check_sample_weights_invariance, kind=<span class="stringliteral">&quot;zeros&quot;</span>)</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">yield</span> check_estimators_fit_returns_self</div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">yield</span> partial(check_estimators_fit_returns_self, readonly_memmap=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="comment"># Check that all estimator yield informative messages when</span></div>
<div class="line"><span class="lineno">  106</span>    <span class="comment"># trained on empty datasets</span></div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno">  108</span>        <span class="keywordflow">yield</span> check_complex_data</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">yield</span> check_dtype_object</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">yield</span> check_estimators_empty_data_messages</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">if</span> name <span class="keywordflow">not</span> <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno">  113</span>        <span class="comment"># cross-decomposition&#39;s &quot;transform&quot; returns X and Y</span></div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">yield</span> check_pipeline_consistency</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;allow_nan&quot;</span>] <span class="keywordflow">and</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno">  117</span>        <span class="comment"># Test that all estimators check their input for NaN&#39;s and infs</span></div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">yield</span> check_estimators_nan_inf</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;pairwise&quot;</span>]:</div>
<div class="line"><span class="lineno">  121</span>        <span class="comment"># Check that pairwise estimator throws error on non-square input</span></div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">yield</span> check_nonsquare_error</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">yield</span> check_estimators_overwrite_params</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;sparsify&quot;</span>):</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">yield</span> check_sparsify_coefficients</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">yield</span> check_estimator_sparse_data</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>    <span class="comment"># Test that estimators can be pickled, and once pickled</span></div>
<div class="line"><span class="lineno">  131</span>    <span class="comment"># give the same answer as before.</span></div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordflow">yield</span> check_estimators_pickle</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">yield</span> check_estimator_get_tags_default_keys</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a924894512153b9d1f68d2b6f0ac7bc80" name="a924894512153b9d1f68d2b6f0ac7bc80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a924894512153b9d1f68d2b6f0ac7bc80">&#9670;&#160;</a></span>_yield_classifier_checks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._yield_classifier_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  137</span><span class="keyword">def </span>_yield_classifier_checks(classifier):</div>
<div class="line"><span class="lineno">  138</span>    tags = _safe_tags(classifier)</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="comment"># test classifiers can handle non-array data and pandas objects</span></div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">yield</span> check_classifier_data_not_an_array</div>
<div class="line"><span class="lineno">  142</span>    <span class="comment"># test classifiers trained on a single label always return this label</span></div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">yield</span> check_classifiers_one_label</div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">yield</span> check_classifiers_classes</div>
<div class="line"><span class="lineno">  145</span>    <span class="keywordflow">yield</span> check_estimators_partial_fit_n_features</div>
<div class="line"><span class="lineno">  146</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;multioutput&quot;</span>]:</div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">yield</span> check_classifier_multioutput</div>
<div class="line"><span class="lineno">  148</span>    <span class="comment"># basic consistency testing</span></div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">yield</span> check_classifiers_train</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">yield</span> partial(check_classifiers_train, readonly_memmap=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">yield</span> partial(check_classifiers_train, readonly_memmap=<span class="keyword">True</span>, X_dtype=<span class="stringliteral">&quot;float32&quot;</span>)</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">yield</span> check_classifiers_regression_target</div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;multilabel&quot;</span>]:</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">yield</span> check_classifiers_multilabel_representation_invariance</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">yield</span> check_classifiers_multilabel_output_format_predict</div>
<div class="line"><span class="lineno">  156</span>        <span class="keywordflow">yield</span> check_classifiers_multilabel_output_format_predict_proba</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">yield</span> check_classifiers_multilabel_output_format_decision_function</div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">yield</span> check_supervised_y_no_nan</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;multioutput_only&quot;</span>]:</div>
<div class="line"><span class="lineno">  161</span>            <span class="keywordflow">yield</span> check_supervised_y_2d</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;requires_fit&quot;</span>]:</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">yield</span> check_estimators_unfitted</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;class_weight&quot;</span> <span class="keywordflow">in</span> classifier.get_params().keys():</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">yield</span> check_class_weight_classifiers</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">yield</span> check_non_transformer_estimators_n_iter</div>
<div class="line"><span class="lineno">  168</span>    <span class="comment"># test if predict_proba is a monotonic transformation of decision_function</span></div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">yield</span> check_decision_proba_consistency</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8bce8a5dfe47844e0361b90162a76e72" name="a8bce8a5dfe47844e0361b90162a76e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bce8a5dfe47844e0361b90162a76e72">&#9670;&#160;</a></span>_yield_clustering_checks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._yield_clustering_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>clusterer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  261</span><span class="keyword">def </span>_yield_clustering_checks(clusterer):</div>
<div class="line"><span class="lineno">  262</span>    <span class="keywordflow">yield</span> check_clusterer_compute_labels_predict</div>
<div class="line"><span class="lineno">  263</span>    name = clusterer.__class__.__name__</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordflow">if</span> name <span class="keywordflow">not</span> <span class="keywordflow">in</span> (<span class="stringliteral">&quot;WardAgglomeration&quot;</span>, <span class="stringliteral">&quot;FeatureAgglomeration&quot;</span>):</div>
<div class="line"><span class="lineno">  265</span>        <span class="comment"># this is clustering on the features</span></div>
<div class="line"><span class="lineno">  266</span>        <span class="comment"># let&#39;s not test that here.</span></div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">yield</span> check_clustering</div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">yield</span> partial(check_clustering, readonly_memmap=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  269</span>        <span class="keywordflow">yield</span> check_estimators_partial_fit_n_features</div>
<div class="line"><span class="lineno">  270</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(clusterer, <span class="stringliteral">&quot;transform&quot;</span>):</div>
<div class="line"><span class="lineno">  271</span>        <span class="keywordflow">yield</span> check_non_transformer_estimators_n_iter</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d207900a908b73a7c9b44157d8fc4bd" name="a8d207900a908b73a7c9b44157d8fc4bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d207900a908b73a7c9b44157d8fc4bd">&#9670;&#160;</a></span>_yield_outliers_checks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._yield_outliers_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  274</span><span class="keyword">def </span>_yield_outliers_checks(estimator):</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>    <span class="comment"># checks for the contamination parameter</span></div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;contamination&quot;</span>):</div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordflow">yield</span> check_outlier_contamination</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>    <span class="comment"># checks for outlier detectors that have a fit_predict method</span></div>
<div class="line"><span class="lineno">  281</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;fit_predict&quot;</span>):</div>
<div class="line"><span class="lineno">  282</span>        <span class="keywordflow">yield</span> check_outliers_fit_predict</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    <span class="comment"># checks for estimators that can be used on a test set</span></div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;predict&quot;</span>):</div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">yield</span> check_outliers_train</div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">yield</span> partial(check_outliers_train, readonly_memmap=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  288</span>        <span class="comment"># test outlier detectors can handle non-array data</span></div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">yield</span> check_classifier_data_not_an_array</div>
<div class="line"><span class="lineno">  290</span>        <span class="comment"># test if NotFittedError is raised</span></div>
<div class="line"><span class="lineno">  291</span>        <span class="keywordflow">if</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;requires_fit&quot;</span>):</div>
<div class="line"><span class="lineno">  292</span>            <span class="keywordflow">yield</span> check_estimators_unfitted</div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">yield</span> check_non_transformer_estimators_n_iter</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abcad12293c9da1634dad1c40ae0bb15a" name="abcad12293c9da1634dad1c40ae0bb15a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcad12293c9da1634dad1c40ae0bb15a">&#9670;&#160;</a></span>_yield_regressor_checks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._yield_regressor_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>regressor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  207</span><span class="keyword">def </span>_yield_regressor_checks(regressor):</div>
<div class="line"><span class="lineno">  208</span>    tags = _safe_tags(regressor)</div>
<div class="line"><span class="lineno">  209</span>    <span class="comment"># TODO: test with intercept</span></div>
<div class="line"><span class="lineno">  210</span>    <span class="comment"># TODO: test with multiple responses</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="comment"># basic testing</span></div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">yield</span> check_regressors_train</div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordflow">yield</span> partial(check_regressors_train, readonly_memmap=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">yield</span> partial(check_regressors_train, readonly_memmap=<span class="keyword">True</span>, X_dtype=<span class="stringliteral">&quot;float32&quot;</span>)</div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">yield</span> check_regressor_data_not_an_array</div>
<div class="line"><span class="lineno">  216</span>    <span class="keywordflow">yield</span> check_estimators_partial_fit_n_features</div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;multioutput&quot;</span>]:</div>
<div class="line"><span class="lineno">  218</span>        <span class="keywordflow">yield</span> check_regressor_multioutput</div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">yield</span> check_regressors_no_decision_function</div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>] <span class="keywordflow">and</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;multioutput_only&quot;</span>]:</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">yield</span> check_supervised_y_2d</div>
<div class="line"><span class="lineno">  222</span>    <span class="keywordflow">yield</span> check_supervised_y_no_nan</div>
<div class="line"><span class="lineno">  223</span>    name = regressor.__class__.__name__</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span> name != <span class="stringliteral">&quot;CCA&quot;</span>:</div>
<div class="line"><span class="lineno">  225</span>        <span class="comment"># check that the regressor handles int input</span></div>
<div class="line"><span class="lineno">  226</span>        <span class="keywordflow">yield</span> check_regressors_int</div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;requires_fit&quot;</span>]:</div>
<div class="line"><span class="lineno">  228</span>        <span class="keywordflow">yield</span> check_estimators_unfitted</div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">yield</span> check_non_transformer_estimators_n_iter</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e4ebdc9136d906b37a5eb8e4040092a" name="a2e4ebdc9136d906b37a5eb8e4040092a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4ebdc9136d906b37a5eb8e4040092a">&#9670;&#160;</a></span>_yield_transformer_checks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks._yield_transformer_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  232</span><span class="keyword">def </span>_yield_transformer_checks(transformer):</div>
<div class="line"><span class="lineno">  233</span>    tags = _safe_tags(transformer)</div>
<div class="line"><span class="lineno">  234</span>    <span class="comment"># All transformers should either deal with sparse data or raise an</span></div>
<div class="line"><span class="lineno">  235</span>    <span class="comment"># exception with type TypeError and an intelligible error message</span></div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno">  237</span>        <span class="keywordflow">yield</span> check_transformer_data_not_an_array</div>
<div class="line"><span class="lineno">  238</span>    <span class="comment"># these don&#39;t actually fit the data, so don&#39;t raise errors</span></div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">yield</span> check_transformer_general</div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;preserves_dtype&quot;</span>]:</div>
<div class="line"><span class="lineno">  241</span>        <span class="keywordflow">yield</span> check_transformer_preserve_dtypes</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">yield</span> partial(check_transformer_general, readonly_memmap=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> _safe_tags(transformer, key=<span class="stringliteral">&quot;stateless&quot;</span>):</div>
<div class="line"><span class="lineno">  244</span>        <span class="keywordflow">yield</span> check_transformers_unfitted</div>
<div class="line"><span class="lineno">  245</span>    <span class="comment"># Dependent on external solvers and hence accessing the iter</span></div>
<div class="line"><span class="lineno">  246</span>    <span class="comment"># param is non-trivial.</span></div>
<div class="line"><span class="lineno">  247</span>    external_solver = [</div>
<div class="line"><span class="lineno">  248</span>        <span class="stringliteral">&quot;Isomap&quot;</span>,</div>
<div class="line"><span class="lineno">  249</span>        <span class="stringliteral">&quot;KernelPCA&quot;</span>,</div>
<div class="line"><span class="lineno">  250</span>        <span class="stringliteral">&quot;LocallyLinearEmbedding&quot;</span>,</div>
<div class="line"><span class="lineno">  251</span>        <span class="stringliteral">&quot;RandomizedLasso&quot;</span>,</div>
<div class="line"><span class="lineno">  252</span>        <span class="stringliteral">&quot;LogisticRegressionCV&quot;</span>,</div>
<div class="line"><span class="lineno">  253</span>        <span class="stringliteral">&quot;BisectingKMeans&quot;</span>,</div>
<div class="line"><span class="lineno">  254</span>    ]</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>    name = transformer.__class__.__name__</div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordflow">if</span> name <span class="keywordflow">not</span> <span class="keywordflow">in</span> external_solver:</div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">yield</span> check_transformer_n_iter</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a00f53aadb862afa7d7452a642d72f188" name="a00f53aadb862afa7d7452a642d72f188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f53aadb862afa7d7452a642d72f188">&#9670;&#160;</a></span>check_class_weight_balanced_classifiers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_class_weight_balanced_classifiers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_train</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_train</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>weights</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2916</span>):</div>
<div class="line"><span class="lineno"> 2917</span>    classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2918</span>    <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;n_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 2919</span>        classifier.set_params(n_iter=100)</div>
<div class="line"><span class="lineno"> 2920</span>    <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;max_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 2921</span>        classifier.set_params(max_iter=1000)</div>
<div class="line"><span class="lineno"> 2922</span> </div>
<div class="line"><span class="lineno"> 2923</span>    set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2924</span>    classifier.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 2925</span>    y_pred = classifier.predict(X_test)</div>
<div class="line"><span class="lineno"> 2926</span> </div>
<div class="line"><span class="lineno"> 2927</span>    classifier.set_params(class_weight=<span class="stringliteral">&quot;balanced&quot;</span>)</div>
<div class="line"><span class="lineno"> 2928</span>    classifier.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 2929</span>    y_pred_balanced = classifier.predict(X_test)</div>
<div class="line"><span class="lineno"> 2930</span>    <span class="keyword">assert</span> f1_score(y_test, y_pred_balanced, average=<span class="stringliteral">&quot;weighted&quot;</span>) &gt; f1_score(</div>
<div class="line"><span class="lineno"> 2931</span>        y_test, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span></div>
<div class="line"><span class="lineno"> 2932</span>    )</div>
<div class="line"><span class="lineno"> 2933</span> </div>
<div class="line"><span class="lineno"> 2934</span> </div>
<div class="line"><span class="lineno"> 2935</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86182be6728e135f6362227d7a436566" name="a86182be6728e135f6362227d7a436566"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86182be6728e135f6362227d7a436566">&#9670;&#160;</a></span>check_class_weight_balanced_linear_classifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_class_weight_balanced_linear_classifier </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Classifier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test class weights with non-contiguous class labels.</pre> <div class="fragment"><div class="line"><span class="lineno"> 2936</span><span class="keyword">def </span>check_class_weight_balanced_linear_classifier(name, Classifier):</div>
<div class="line"><span class="lineno"> 2937</span>    <span class="stringliteral">&quot;&quot;&quot;Test class weights with non-contiguous class labels.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2938</span>    <span class="comment"># this is run on classes, not instances, though this should be changed</span></div>
<div class="line"><span class="lineno"> 2939</span>    X = np.array([[-1.0, -1.0], [-1.0, 0], [-0.8, -1.0], [1.0, 1.0], [1.0, 0.0]])</div>
<div class="line"><span class="lineno"> 2940</span>    y = np.array([1, 1, 1, -1, -1])</div>
<div class="line"><span class="lineno"> 2941</span> </div>
<div class="line"><span class="lineno"> 2942</span>    classifier = Classifier()</div>
<div class="line"><span class="lineno"> 2943</span> </div>
<div class="line"><span class="lineno"> 2944</span>    <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;n_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 2945</span>        <span class="comment"># This is a very small dataset, default n_iter are likely to prevent</span></div>
<div class="line"><span class="lineno"> 2946</span>        <span class="comment"># convergence</span></div>
<div class="line"><span class="lineno"> 2947</span>        classifier.set_params(n_iter=1000)</div>
<div class="line"><span class="lineno"> 2948</span>    <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;max_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 2949</span>        classifier.set_params(max_iter=1000)</div>
<div class="line"><span class="lineno"> 2950</span>    <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;cv&quot;</span>):</div>
<div class="line"><span class="lineno"> 2951</span>        classifier.set_params(cv=3)</div>
<div class="line"><span class="lineno"> 2952</span>    set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2953</span> </div>
<div class="line"><span class="lineno"> 2954</span>    <span class="comment"># Let the model compute the class frequencies</span></div>
<div class="line"><span class="lineno"> 2955</span>    classifier.set_params(class_weight=<span class="stringliteral">&quot;balanced&quot;</span>)</div>
<div class="line"><span class="lineno"> 2956</span>    coef_balanced = classifier.fit(X, y).coef_.copy()</div>
<div class="line"><span class="lineno"> 2957</span> </div>
<div class="line"><span class="lineno"> 2958</span>    <span class="comment"># Count each label occurrence to reweight manually</span></div>
<div class="line"><span class="lineno"> 2959</span>    n_samples = len(y)</div>
<div class="line"><span class="lineno"> 2960</span>    n_classes = float(len(np.unique(y)))</div>
<div class="line"><span class="lineno"> 2961</span> </div>
<div class="line"><span class="lineno"> 2962</span>    class_weight = {</div>
<div class="line"><span class="lineno"> 2963</span>        1: n_samples / (np.sum(y == 1) * n_classes),</div>
<div class="line"><span class="lineno"> 2964</span>        -1: n_samples / (np.sum(y == -1) * n_classes),</div>
<div class="line"><span class="lineno"> 2965</span>    }</div>
<div class="line"><span class="lineno"> 2966</span>    classifier.set_params(class_weight=class_weight)</div>
<div class="line"><span class="lineno"> 2967</span>    coef_manual = classifier.fit(X, y).coef_.copy()</div>
<div class="line"><span class="lineno"> 2968</span> </div>
<div class="line"><span class="lineno"> 2969</span>    assert_allclose(</div>
<div class="line"><span class="lineno"> 2970</span>        coef_balanced,</div>
<div class="line"><span class="lineno"> 2971</span>        coef_manual,</div>
<div class="line"><span class="lineno"> 2972</span>        err_msg=<span class="stringliteral">&quot;Classifier %s is not computing class_weight=balanced properly.&quot;</span> % name,</div>
<div class="line"><span class="lineno"> 2973</span>    )</div>
<div class="line"><span class="lineno"> 2974</span> </div>
<div class="line"><span class="lineno"> 2975</span> </div>
<div class="line"><span class="lineno"> 2976</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd09562b6d8cd3afc25fc24e8f3de05d" name="acd09562b6d8cd3afc25fc24e8f3de05d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd09562b6d8cd3afc25fc24e8f3de05d">&#9670;&#160;</a></span>check_class_weight_classifiers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_class_weight_classifiers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2868</span><span class="keyword">def </span>check_class_weight_classifiers(name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2869</span> </div>
<div class="line"><span class="lineno"> 2870</span>    <span class="keywordflow">if</span> _safe_tags(classifier_orig, key=<span class="stringliteral">&quot;binary_only&quot;</span>):</div>
<div class="line"><span class="lineno"> 2871</span>        problems = [2]</div>
<div class="line"><span class="lineno"> 2872</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2873</span>        problems = [2, 3]</div>
<div class="line"><span class="lineno"> 2874</span> </div>
<div class="line"><span class="lineno"> 2875</span>    <span class="keywordflow">for</span> n_centers <span class="keywordflow">in</span> problems:</div>
<div class="line"><span class="lineno"> 2876</span>        <span class="comment"># create a very noisy dataset</span></div>
<div class="line"><span class="lineno"> 2877</span>        X, y = make_blobs(centers=n_centers, random_state=0, cluster_std=20)</div>
<div class="line"><span class="lineno"> 2878</span>        X_train, X_test, y_train, y_test = train_test_split(</div>
<div class="line"><span class="lineno"> 2879</span>            X, y, test_size=0.5, random_state=0</div>
<div class="line"><span class="lineno"> 2880</span>        )</div>
<div class="line"><span class="lineno"> 2881</span> </div>
<div class="line"><span class="lineno"> 2882</span>        <span class="comment"># can&#39;t use gram_if_pairwise() here, setting up gram matrix manually</span></div>
<div class="line"><span class="lineno"> 2883</span>        <span class="keywordflow">if</span> _safe_tags(classifier_orig, key=<span class="stringliteral">&quot;pairwise&quot;</span>):</div>
<div class="line"><span class="lineno"> 2884</span>            X_test = rbf_kernel(X_test, X_train)</div>
<div class="line"><span class="lineno"> 2885</span>            X_train = rbf_kernel(X_train, X_train)</div>
<div class="line"><span class="lineno"> 2886</span> </div>
<div class="line"><span class="lineno"> 2887</span>        n_centers = len(np.unique(y_train))</div>
<div class="line"><span class="lineno"> 2888</span> </div>
<div class="line"><span class="lineno"> 2889</span>        <span class="keywordflow">if</span> n_centers == 2:</div>
<div class="line"><span class="lineno"> 2890</span>            class_weight = {0: 1000, 1: 0.0001}</div>
<div class="line"><span class="lineno"> 2891</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2892</span>            class_weight = {0: 1000, 1: 0.0001, 2: 0.0001}</div>
<div class="line"><span class="lineno"> 2893</span> </div>
<div class="line"><span class="lineno"> 2894</span>        classifier = clone(classifier_orig).set_params(class_weight=class_weight)</div>
<div class="line"><span class="lineno"> 2895</span>        <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;n_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 2896</span>            classifier.set_params(n_iter=100)</div>
<div class="line"><span class="lineno"> 2897</span>        <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;max_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 2898</span>            classifier.set_params(max_iter=1000)</div>
<div class="line"><span class="lineno"> 2899</span>        <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;min_weight_fraction_leaf&quot;</span>):</div>
<div class="line"><span class="lineno"> 2900</span>            classifier.set_params(min_weight_fraction_leaf=0.01)</div>
<div class="line"><span class="lineno"> 2901</span>        <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;n_iter_no_change&quot;</span>):</div>
<div class="line"><span class="lineno"> 2902</span>            classifier.set_params(n_iter_no_change=20)</div>
<div class="line"><span class="lineno"> 2903</span> </div>
<div class="line"><span class="lineno"> 2904</span>        set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2905</span>        classifier.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 2906</span>        y_pred = classifier.predict(X_test)</div>
<div class="line"><span class="lineno"> 2907</span>        <span class="comment"># XXX: Generally can use 0.89 here. On Windows, LinearSVC gets</span></div>
<div class="line"><span class="lineno"> 2908</span>        <span class="comment">#      0.88 (Issue #9111)</span></div>
<div class="line"><span class="lineno"> 2909</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> _safe_tags(classifier_orig, key=<span class="stringliteral">&quot;poor_score&quot;</span>):</div>
<div class="line"><span class="lineno"> 2910</span>            <span class="keyword">assert</span> np.mean(y_pred == 0) &gt; 0.87</div>
<div class="line"><span class="lineno"> 2911</span> </div>
<div class="line"><span class="lineno"> 2912</span> </div>
<div class="line"><span class="lineno"> 2913</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01d6ef78f692c24fdaced354f8b49933" name="a01d6ef78f692c24fdaced354f8b49933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01d6ef78f692c24fdaced354f8b49933">&#9670;&#160;</a></span>check_classifier_data_not_an_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifier_data_not_an_array </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3082</span><span class="keyword">def </span>check_classifier_data_not_an_array(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3083</span>    X = np.array(</div>
<div class="line"><span class="lineno"> 3084</span>        [</div>
<div class="line"><span class="lineno"> 3085</span>            [3, 0],</div>
<div class="line"><span class="lineno"> 3086</span>            [0, 1],</div>
<div class="line"><span class="lineno"> 3087</span>            [0, 2],</div>
<div class="line"><span class="lineno"> 3088</span>            [1, 1],</div>
<div class="line"><span class="lineno"> 3089</span>            [1, 2],</div>
<div class="line"><span class="lineno"> 3090</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 3091</span>            [0, 3],</div>
<div class="line"><span class="lineno"> 3092</span>            [1, 0],</div>
<div class="line"><span class="lineno"> 3093</span>            [2, 0],</div>
<div class="line"><span class="lineno"> 3094</span>            [4, 4],</div>
<div class="line"><span class="lineno"> 3095</span>            [2, 3],</div>
<div class="line"><span class="lineno"> 3096</span>            [3, 2],</div>
<div class="line"><span class="lineno"> 3097</span>        ]</div>
<div class="line"><span class="lineno"> 3098</span>    )</div>
<div class="line"><span class="lineno"> 3099</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 3100</span>    y = np.array([1, 1, 1, 2, 2, 2, 1, 1, 1, 2, 2, 2])</div>
<div class="line"><span class="lineno"> 3101</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 3102</span>    <span class="keywordflow">for</span> obj_type <span class="keywordflow">in</span> [<span class="stringliteral">&quot;NotAnArray&quot;</span>, <span class="stringliteral">&quot;PandasDataframe&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3103</span>        check_estimators_data_not_an_array(name, estimator_orig, X, y, obj_type)</div>
<div class="line"><span class="lineno"> 3104</span> </div>
<div class="line"><span class="lineno"> 3105</span> </div>
<div class="line"><span class="lineno"> 3106</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04b47d6e1697de5d13185563b28ac1cd" name="a04b47d6e1697de5d13185563b28ac1cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04b47d6e1697de5d13185563b28ac1cd">&#9670;&#160;</a></span>check_classifier_multioutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifier_multioutput </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1933</span><span class="keyword">def </span>check_classifier_multioutput(name, estimator):</div>
<div class="line"><span class="lineno"> 1934</span>    n_samples, n_labels, n_classes = 42, 5, 3</div>
<div class="line"><span class="lineno"> 1935</span>    tags = _safe_tags(estimator)</div>
<div class="line"><span class="lineno"> 1936</span>    estimator = clone(estimator)</div>
<div class="line"><span class="lineno"> 1937</span>    X, y = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 1938</span>        random_state=42, n_samples=n_samples, n_labels=n_labels, n_classes=n_classes</div>
<div class="line"><span class="lineno"> 1939</span>    )</div>
<div class="line"><span class="lineno"> 1940</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1941</span>    y_pred = estimator.predict(X)</div>
<div class="line"><span class="lineno"> 1942</span> </div>
<div class="line"><span class="lineno"> 1943</span>    <span class="keyword">assert</span> y_pred.shape == (n_samples, n_classes), (</div>
<div class="line"><span class="lineno"> 1944</span>        <span class="stringliteral">&quot;The shape of the prediction for multioutput data is &quot;</span></div>
<div class="line"><span class="lineno"> 1945</span>        <span class="stringliteral">&quot;incorrect. Expected {}, got {}.&quot;</span>.format((n_samples, n_labels), y_pred.shape)</div>
<div class="line"><span class="lineno"> 1946</span>    )</div>
<div class="line"><span class="lineno"> 1947</span>    <span class="keyword">assert</span> y_pred.dtype.kind == <span class="stringliteral">&quot;i&quot;</span></div>
<div class="line"><span class="lineno"> 1948</span> </div>
<div class="line"><span class="lineno"> 1949</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;decision_function&quot;</span>):</div>
<div class="line"><span class="lineno"> 1950</span>        decision = estimator.decision_function(X)</div>
<div class="line"><span class="lineno"> 1951</span>        <span class="keyword">assert</span> isinstance(decision, np.ndarray)</div>
<div class="line"><span class="lineno"> 1952</span>        <span class="keyword">assert</span> decision.shape == (n_samples, n_classes), (</div>
<div class="line"><span class="lineno"> 1953</span>            <span class="stringliteral">&quot;The shape of the decision function output for &quot;</span></div>
<div class="line"><span class="lineno"> 1954</span>            <span class="stringliteral">&quot;multioutput data is incorrect. Expected {}, got {}.&quot;</span>.format(</div>
<div class="line"><span class="lineno"> 1955</span>                (n_samples, n_classes), decision.shape</div>
<div class="line"><span class="lineno"> 1956</span>            )</div>
<div class="line"><span class="lineno"> 1957</span>        )</div>
<div class="line"><span class="lineno"> 1958</span> </div>
<div class="line"><span class="lineno"> 1959</span>        dec_pred = (decision &gt; 0).astype(int)</div>
<div class="line"><span class="lineno"> 1960</span>        dec_exp = estimator.classes_[dec_pred]</div>
<div class="line"><span class="lineno"> 1961</span>        assert_array_equal(dec_exp, y_pred)</div>
<div class="line"><span class="lineno"> 1962</span> </div>
<div class="line"><span class="lineno"> 1963</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;predict_proba&quot;</span>):</div>
<div class="line"><span class="lineno"> 1964</span>        y_prob = estimator.predict_proba(X)</div>
<div class="line"><span class="lineno"> 1965</span> </div>
<div class="line"><span class="lineno"> 1966</span>        <span class="keywordflow">if</span> isinstance(y_prob, list) <span class="keywordflow">and</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;poor_score&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1967</span>            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_classes):</div>
<div class="line"><span class="lineno"> 1968</span>                <span class="keyword">assert</span> y_prob[i].shape == (n_samples, 2), (</div>
<div class="line"><span class="lineno"> 1969</span>                    <span class="stringliteral">&quot;The shape of the probability for multioutput data is&quot;</span></div>
<div class="line"><span class="lineno"> 1970</span>                    <span class="stringliteral">&quot; incorrect. Expected {}, got {}.&quot;</span>.format(</div>
<div class="line"><span class="lineno"> 1971</span>                        (n_samples, 2), y_prob[i].shape</div>
<div class="line"><span class="lineno"> 1972</span>                    )</div>
<div class="line"><span class="lineno"> 1973</span>                )</div>
<div class="line"><span class="lineno"> 1974</span>                assert_array_equal(</div>
<div class="line"><span class="lineno"> 1975</span>                    np.argmax(y_prob[i], axis=1).astype(int), y_pred[:, i]</div>
<div class="line"><span class="lineno"> 1976</span>                )</div>
<div class="line"><span class="lineno"> 1977</span>        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;poor_score&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1978</span>            <span class="keyword">assert</span> y_prob.shape == (n_samples, n_classes), (</div>
<div class="line"><span class="lineno"> 1979</span>                <span class="stringliteral">&quot;The shape of the probability for multioutput data is&quot;</span></div>
<div class="line"><span class="lineno"> 1980</span>                <span class="stringliteral">&quot; incorrect. Expected {}, got {}.&quot;</span>.format(</div>
<div class="line"><span class="lineno"> 1981</span>                    (n_samples, n_classes), y_prob.shape</div>
<div class="line"><span class="lineno"> 1982</span>                )</div>
<div class="line"><span class="lineno"> 1983</span>            )</div>
<div class="line"><span class="lineno"> 1984</span>            assert_array_equal(y_prob.round().astype(int), y_pred)</div>
<div class="line"><span class="lineno"> 1985</span> </div>
<div class="line"><span class="lineno"> 1986</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;decision_function&quot;</span>) <span class="keywordflow">and</span> hasattr(estimator, <span class="stringliteral">&quot;predict_proba&quot;</span>):</div>
<div class="line"><span class="lineno"> 1987</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_classes):</div>
<div class="line"><span class="lineno"> 1988</span>            y_proba = estimator.predict_proba(X)[:, i]</div>
<div class="line"><span class="lineno"> 1989</span>            y_decision = estimator.decision_function(X)</div>
<div class="line"><span class="lineno"> 1990</span>            assert_array_equal(rankdata(y_proba), rankdata(y_decision[:, i]))</div>
<div class="line"><span class="lineno"> 1991</span> </div>
<div class="line"><span class="lineno"> 1992</span> </div>
<div class="line"><span class="lineno"> 1993</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa701446175fb8b1fc651810acb6dc35b" name="aa701446175fb8b1fc651810acb6dc35b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa701446175fb8b1fc651810acb6dc35b">&#9670;&#160;</a></span>check_classifiers_classes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_classes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2737</span><span class="keyword">def </span>check_classifiers_classes(name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2738</span>    X_multiclass, y_multiclass = make_blobs(</div>
<div class="line"><span class="lineno"> 2739</span>        n_samples=30, random_state=0, cluster_std=0.1</div>
<div class="line"><span class="lineno"> 2740</span>    )</div>
<div class="line"><span class="lineno"> 2741</span>    X_multiclass, y_multiclass = shuffle(X_multiclass, y_multiclass, random_state=7)</div>
<div class="line"><span class="lineno"> 2742</span>    X_multiclass = StandardScaler().fit_transform(X_multiclass)</div>
<div class="line"><span class="lineno"> 2743</span> </div>
<div class="line"><span class="lineno"> 2744</span>    X_binary = X_multiclass[y_multiclass != 2]</div>
<div class="line"><span class="lineno"> 2745</span>    y_binary = y_multiclass[y_multiclass != 2]</div>
<div class="line"><span class="lineno"> 2746</span> </div>
<div class="line"><span class="lineno"> 2747</span>    X_multiclass = _enforce_estimator_tags_X(classifier_orig, X_multiclass)</div>
<div class="line"><span class="lineno"> 2748</span>    X_binary = _enforce_estimator_tags_X(classifier_orig, X_binary)</div>
<div class="line"><span class="lineno"> 2749</span> </div>
<div class="line"><span class="lineno"> 2750</span>    labels_multiclass = [<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>]</div>
<div class="line"><span class="lineno"> 2751</span>    labels_binary = [<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>]</div>
<div class="line"><span class="lineno"> 2752</span> </div>
<div class="line"><span class="lineno"> 2753</span>    y_names_multiclass = np.take(labels_multiclass, y_multiclass)</div>
<div class="line"><span class="lineno"> 2754</span>    y_names_binary = np.take(labels_binary, y_binary)</div>
<div class="line"><span class="lineno"> 2755</span> </div>
<div class="line"><span class="lineno"> 2756</span>    problems = [(X_binary, y_binary, y_names_binary)]</div>
<div class="line"><span class="lineno"> 2757</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> _safe_tags(classifier_orig, key=<span class="stringliteral">&quot;binary_only&quot;</span>):</div>
<div class="line"><span class="lineno"> 2758</span>        problems.append((X_multiclass, y_multiclass, y_names_multiclass))</div>
<div class="line"><span class="lineno"> 2759</span> </div>
<div class="line"><span class="lineno"> 2760</span>    <span class="keywordflow">for</span> X, y, y_names <span class="keywordflow">in</span> problems:</div>
<div class="line"><span class="lineno"> 2761</span>        <span class="keywordflow">for</span> y_names_i <span class="keywordflow">in</span> [y_names, y_names.astype(<span class="stringliteral">&quot;O&quot;</span>)]:</div>
<div class="line"><span class="lineno"> 2762</span>            y_ = _choose_check_classifiers_labels(name, y, y_names_i)</div>
<div class="line"><span class="lineno"> 2763</span>            check_classifiers_predictions(X, y_, name, classifier_orig)</div>
<div class="line"><span class="lineno"> 2764</span> </div>
<div class="line"><span class="lineno"> 2765</span>    labels_binary = [-1, 1]</div>
<div class="line"><span class="lineno"> 2766</span>    y_names_binary = np.take(labels_binary, y_binary)</div>
<div class="line"><span class="lineno"> 2767</span>    y_binary = _choose_check_classifiers_labels(name, y_binary, y_names_binary)</div>
<div class="line"><span class="lineno"> 2768</span>    check_classifiers_predictions(X_binary, y_binary, name, classifier_orig)</div>
<div class="line"><span class="lineno"> 2769</span> </div>
<div class="line"><span class="lineno"> 2770</span> </div>
<div class="line"><span class="lineno"> 2771</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87f998077eddba91cf72703098098a2a" name="a87f998077eddba91cf72703098098a2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87f998077eddba91cf72703098098a2a">&#9670;&#160;</a></span>check_classifiers_multilabel_output_format_decision_function()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_multilabel_output_format_decision_function </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the output of the `decision_function` method for classifiers supporting
multilabel-indicator targets.</pre> <div class="fragment"><div class="line"><span class="lineno"> 2548</span><span class="keyword">def </span>check_classifiers_multilabel_output_format_decision_function(name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2549</span>    <span class="stringliteral">&quot;&quot;&quot;Check the output of the `decision_function` method for classifiers supporting</span></div>
<div class="line"><span class="lineno"> 2550</span><span class="stringliteral">    multilabel-indicator targets.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2551</span>    classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2552</span>    set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2553</span> </div>
<div class="line"><span class="lineno"> 2554</span>    n_samples, test_size, n_outputs = 100, 25, 5</div>
<div class="line"><span class="lineno"> 2555</span>    X, y = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 2556</span>        n_samples=n_samples,</div>
<div class="line"><span class="lineno"> 2557</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 2558</span>        n_classes=n_outputs,</div>
<div class="line"><span class="lineno"> 2559</span>        n_labels=3,</div>
<div class="line"><span class="lineno"> 2560</span>        length=50,</div>
<div class="line"><span class="lineno"> 2561</span>        allow_unlabeled=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 2562</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 2563</span>    )</div>
<div class="line"><span class="lineno"> 2564</span>    X = scale(X)</div>
<div class="line"><span class="lineno"> 2565</span> </div>
<div class="line"><span class="lineno"> 2566</span>    X_train, X_test = X[:-test_size], X[-test_size:]</div>
<div class="line"><span class="lineno"> 2567</span>    y_train = y[:-test_size]</div>
<div class="line"><span class="lineno"> 2568</span>    classifier.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 2569</span> </div>
<div class="line"><span class="lineno"> 2570</span>    response_method_name = <span class="stringliteral">&quot;decision_function&quot;</span></div>
<div class="line"><span class="lineno"> 2571</span>    decision_function_method = getattr(classifier, response_method_name, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 2572</span>    <span class="keywordflow">if</span> decision_function_method <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2573</span>        <span class="keywordflow">raise</span> SkipTest(f<span class="stringliteral">&quot;{name} does not have a {response_method_name} method.&quot;</span>)</div>
<div class="line"><span class="lineno"> 2574</span> </div>
<div class="line"><span class="lineno"> 2575</span>    y_pred = decision_function_method(X_test)</div>
<div class="line"><span class="lineno"> 2576</span> </div>
<div class="line"><span class="lineno"> 2577</span>    <span class="comment"># y_pred.shape -&gt; y_test.shape with floating dtype</span></div>
<div class="line"><span class="lineno"> 2578</span>    <span class="keyword">assert</span> isinstance(y_pred, np.ndarray), (</div>
<div class="line"><span class="lineno"> 2579</span>        f<span class="stringliteral">&quot;{name}.decision_function is expected to output a NumPy array.&quot;</span></div>
<div class="line"><span class="lineno"> 2580</span>        f<span class="stringliteral">&quot; Got {type(y_pred)} instead.&quot;</span></div>
<div class="line"><span class="lineno"> 2581</span>    )</div>
<div class="line"><span class="lineno"> 2582</span>    <span class="keyword">assert</span> y_pred.shape == (test_size, n_outputs), (</div>
<div class="line"><span class="lineno"> 2583</span>        f<span class="stringliteral">&quot;{name}.decision_function is expected to provide a NumPy array &quot;</span></div>
<div class="line"><span class="lineno"> 2584</span>        f<span class="stringliteral">&quot;of shape (n_samples, n_outputs). Got {y_pred.shape} instead of &quot;</span></div>
<div class="line"><span class="lineno"> 2585</span>        f<span class="stringliteral">&quot;{(test_size, n_outputs)}.&quot;</span></div>
<div class="line"><span class="lineno"> 2586</span>    )</div>
<div class="line"><span class="lineno"> 2587</span>    <span class="keyword">assert</span> y_pred.dtype.kind == <span class="stringliteral">&quot;f&quot;</span>, (</div>
<div class="line"><span class="lineno"> 2588</span>        f<span class="stringliteral">&quot;{name}.decision_function is expected to output a floating dtype.&quot;</span></div>
<div class="line"><span class="lineno"> 2589</span>        f<span class="stringliteral">&quot; Got {y_pred.dtype} instead.&quot;</span></div>
<div class="line"><span class="lineno"> 2590</span>    )</div>
<div class="line"><span class="lineno"> 2591</span> </div>
<div class="line"><span class="lineno"> 2592</span> </div>
<div class="line"><span class="lineno"> 2593</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32c326275dfcd3e80846c6e9030b4fd9" name="a32c326275dfcd3e80846c6e9030b4fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32c326275dfcd3e80846c6e9030b4fd9">&#9670;&#160;</a></span>check_classifiers_multilabel_output_format_predict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_multilabel_output_format_predict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the output of the `predict` method for classifiers supporting
multilabel-indicator targets.</pre> <div class="fragment"><div class="line"><span class="lineno"> 2419</span><span class="keyword">def </span>check_classifiers_multilabel_output_format_predict(name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2420</span>    <span class="stringliteral">&quot;&quot;&quot;Check the output of the `predict` method for classifiers supporting</span></div>
<div class="line"><span class="lineno"> 2421</span><span class="stringliteral">    multilabel-indicator targets.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2422</span>    classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2423</span>    set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2424</span> </div>
<div class="line"><span class="lineno"> 2425</span>    n_samples, test_size, n_outputs = 100, 25, 5</div>
<div class="line"><span class="lineno"> 2426</span>    X, y = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 2427</span>        n_samples=n_samples,</div>
<div class="line"><span class="lineno"> 2428</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 2429</span>        n_classes=n_outputs,</div>
<div class="line"><span class="lineno"> 2430</span>        n_labels=3,</div>
<div class="line"><span class="lineno"> 2431</span>        length=50,</div>
<div class="line"><span class="lineno"> 2432</span>        allow_unlabeled=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 2433</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 2434</span>    )</div>
<div class="line"><span class="lineno"> 2435</span>    X = scale(X)</div>
<div class="line"><span class="lineno"> 2436</span> </div>
<div class="line"><span class="lineno"> 2437</span>    X_train, X_test = X[:-test_size], X[-test_size:]</div>
<div class="line"><span class="lineno"> 2438</span>    y_train, y_test = y[:-test_size], y[-test_size:]</div>
<div class="line"><span class="lineno"> 2439</span>    classifier.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 2440</span> </div>
<div class="line"><span class="lineno"> 2441</span>    response_method_name = <span class="stringliteral">&quot;predict&quot;</span></div>
<div class="line"><span class="lineno"> 2442</span>    predict_method = getattr(classifier, response_method_name, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 2443</span>    <span class="keywordflow">if</span> predict_method <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2444</span>        <span class="keywordflow">raise</span> SkipTest(f<span class="stringliteral">&quot;{name} does not have a {response_method_name} method.&quot;</span>)</div>
<div class="line"><span class="lineno"> 2445</span> </div>
<div class="line"><span class="lineno"> 2446</span>    y_pred = predict_method(X_test)</div>
<div class="line"><span class="lineno"> 2447</span> </div>
<div class="line"><span class="lineno"> 2448</span>    <span class="comment"># y_pred.shape -&gt; y_test.shape with the same dtype</span></div>
<div class="line"><span class="lineno"> 2449</span>    <span class="keyword">assert</span> isinstance(y_pred, np.ndarray), (</div>
<div class="line"><span class="lineno"> 2450</span>        f<span class="stringliteral">&quot;{name}.predict is expected to output a NumPy array. Got &quot;</span></div>
<div class="line"><span class="lineno"> 2451</span>        f<span class="stringliteral">&quot;{type(y_pred)} instead.&quot;</span></div>
<div class="line"><span class="lineno"> 2452</span>    )</div>
<div class="line"><span class="lineno"> 2453</span>    <span class="keyword">assert</span> y_pred.shape == y_test.shape, (</div>
<div class="line"><span class="lineno"> 2454</span>        f<span class="stringliteral">&quot;{name}.predict outputs a NumPy array of shape {y_pred.shape} &quot;</span></div>
<div class="line"><span class="lineno"> 2455</span>        f<span class="stringliteral">&quot;instead of {y_test.shape}.&quot;</span></div>
<div class="line"><span class="lineno"> 2456</span>    )</div>
<div class="line"><span class="lineno"> 2457</span>    <span class="keyword">assert</span> y_pred.dtype == y_test.dtype, (</div>
<div class="line"><span class="lineno"> 2458</span>        f<span class="stringliteral">&quot;{name}.predict does not output the same dtype than the targets. &quot;</span></div>
<div class="line"><span class="lineno"> 2459</span>        f<span class="stringliteral">&quot;Got {y_pred.dtype} instead of {y_test.dtype}.&quot;</span></div>
<div class="line"><span class="lineno"> 2460</span>    )</div>
<div class="line"><span class="lineno"> 2461</span> </div>
<div class="line"><span class="lineno"> 2462</span> </div>
<div class="line"><span class="lineno"> 2463</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b1b13ce86c55068b520b3766a7e5b97" name="a1b1b13ce86c55068b520b3766a7e5b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b1b13ce86c55068b520b3766a7e5b97">&#9670;&#160;</a></span>check_classifiers_multilabel_output_format_predict_proba()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_multilabel_output_format_predict_proba </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the output of the `predict_proba` method for classifiers supporting
multilabel-indicator targets.</pre> <div class="fragment"><div class="line"><span class="lineno"> 2464</span><span class="keyword">def </span>check_classifiers_multilabel_output_format_predict_proba(name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2465</span>    <span class="stringliteral">&quot;&quot;&quot;Check the output of the `predict_proba` method for classifiers supporting</span></div>
<div class="line"><span class="lineno"> 2466</span><span class="stringliteral">    multilabel-indicator targets.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2467</span>    classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2468</span>    set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2469</span> </div>
<div class="line"><span class="lineno"> 2470</span>    n_samples, test_size, n_outputs = 100, 25, 5</div>
<div class="line"><span class="lineno"> 2471</span>    X, y = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 2472</span>        n_samples=n_samples,</div>
<div class="line"><span class="lineno"> 2473</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 2474</span>        n_classes=n_outputs,</div>
<div class="line"><span class="lineno"> 2475</span>        n_labels=3,</div>
<div class="line"><span class="lineno"> 2476</span>        length=50,</div>
<div class="line"><span class="lineno"> 2477</span>        allow_unlabeled=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 2478</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 2479</span>    )</div>
<div class="line"><span class="lineno"> 2480</span>    X = scale(X)</div>
<div class="line"><span class="lineno"> 2481</span> </div>
<div class="line"><span class="lineno"> 2482</span>    X_train, X_test = X[:-test_size], X[-test_size:]</div>
<div class="line"><span class="lineno"> 2483</span>    y_train = y[:-test_size]</div>
<div class="line"><span class="lineno"> 2484</span>    classifier.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 2485</span> </div>
<div class="line"><span class="lineno"> 2486</span>    response_method_name = <span class="stringliteral">&quot;predict_proba&quot;</span></div>
<div class="line"><span class="lineno"> 2487</span>    predict_proba_method = getattr(classifier, response_method_name, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 2488</span>    <span class="keywordflow">if</span> predict_proba_method <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2489</span>        <span class="keywordflow">raise</span> SkipTest(f<span class="stringliteral">&quot;{name} does not have a {response_method_name} method.&quot;</span>)</div>
<div class="line"><span class="lineno"> 2490</span> </div>
<div class="line"><span class="lineno"> 2491</span>    y_pred = predict_proba_method(X_test)</div>
<div class="line"><span class="lineno"> 2492</span> </div>
<div class="line"><span class="lineno"> 2493</span>    <span class="comment"># y_pred.shape -&gt; 2 possibilities:</span></div>
<div class="line"><span class="lineno"> 2494</span>    <span class="comment"># - list of length n_outputs of shape (n_samples, 2);</span></div>
<div class="line"><span class="lineno"> 2495</span>    <span class="comment"># - ndarray of shape (n_samples, n_outputs).</span></div>
<div class="line"><span class="lineno"> 2496</span>    <span class="comment"># dtype should be floating</span></div>
<div class="line"><span class="lineno"> 2497</span>    <span class="keywordflow">if</span> isinstance(y_pred, list):</div>
<div class="line"><span class="lineno"> 2498</span>        <span class="keyword">assert</span> len(y_pred) == n_outputs, (</div>
<div class="line"><span class="lineno"> 2499</span>            f<span class="stringliteral">&quot;When {name}.predict_proba returns a list, the list should &quot;</span></div>
<div class="line"><span class="lineno"> 2500</span>            <span class="stringliteral">&quot;be of length n_outputs and contain NumPy arrays. Got length &quot;</span></div>
<div class="line"><span class="lineno"> 2501</span>            f<span class="stringliteral">&quot;of {len(y_pred)} instead of {n_outputs}.&quot;</span></div>
<div class="line"><span class="lineno"> 2502</span>        )</div>
<div class="line"><span class="lineno"> 2503</span>        <span class="keywordflow">for</span> pred <span class="keywordflow">in</span> y_pred:</div>
<div class="line"><span class="lineno"> 2504</span>            <span class="keyword">assert</span> pred.shape == (test_size, 2), (</div>
<div class="line"><span class="lineno"> 2505</span>                f<span class="stringliteral">&quot;When {name}.predict_proba returns a list, this list &quot;</span></div>
<div class="line"><span class="lineno"> 2506</span>                <span class="stringliteral">&quot;should contain NumPy arrays of shape (n_samples, 2). Got &quot;</span></div>
<div class="line"><span class="lineno"> 2507</span>                f<span class="stringliteral">&quot;NumPy arrays of shape {pred.shape} instead of &quot;</span></div>
<div class="line"><span class="lineno"> 2508</span>                f<span class="stringliteral">&quot;{(test_size, 2)}.&quot;</span></div>
<div class="line"><span class="lineno"> 2509</span>            )</div>
<div class="line"><span class="lineno"> 2510</span>            <span class="keyword">assert</span> pred.dtype.kind == <span class="stringliteral">&quot;f&quot;</span>, (</div>
<div class="line"><span class="lineno"> 2511</span>                f<span class="stringliteral">&quot;When {name}.predict_proba returns a list, it should &quot;</span></div>
<div class="line"><span class="lineno"> 2512</span>                <span class="stringliteral">&quot;contain NumPy arrays with floating dtype. Got &quot;</span></div>
<div class="line"><span class="lineno"> 2513</span>                f<span class="stringliteral">&quot;{pred.dtype} instead.&quot;</span></div>
<div class="line"><span class="lineno"> 2514</span>            )</div>
<div class="line"><span class="lineno"> 2515</span>            <span class="comment"># check that we have the correct probabilities</span></div>
<div class="line"><span class="lineno"> 2516</span>            err_msg = (</div>
<div class="line"><span class="lineno"> 2517</span>                f<span class="stringliteral">&quot;When {name}.predict_proba returns a list, each NumPy &quot;</span></div>
<div class="line"><span class="lineno"> 2518</span>                <span class="stringliteral">&quot;array should contain probabilities for each class and &quot;</span></div>
<div class="line"><span class="lineno"> 2519</span>                <span class="stringliteral">&quot;thus each row should sum to 1 (or close to 1 due to &quot;</span></div>
<div class="line"><span class="lineno"> 2520</span>                <span class="stringliteral">&quot;numerical errors).&quot;</span></div>
<div class="line"><span class="lineno"> 2521</span>            )</div>
<div class="line"><span class="lineno"> 2522</span>            assert_allclose(pred.sum(axis=1), 1, err_msg=err_msg)</div>
<div class="line"><span class="lineno"> 2523</span>    <span class="keywordflow">elif</span> isinstance(y_pred, np.ndarray):</div>
<div class="line"><span class="lineno"> 2524</span>        <span class="keyword">assert</span> y_pred.shape == (test_size, n_outputs), (</div>
<div class="line"><span class="lineno"> 2525</span>            f<span class="stringliteral">&quot;When {name}.predict_proba returns a NumPy array, the &quot;</span></div>
<div class="line"><span class="lineno"> 2526</span>            f<span class="stringliteral">&quot;expected shape is (n_samples, n_outputs). Got {y_pred.shape}&quot;</span></div>
<div class="line"><span class="lineno"> 2527</span>            f<span class="stringliteral">&quot; instead of {(test_size, n_outputs)}.&quot;</span></div>
<div class="line"><span class="lineno"> 2528</span>        )</div>
<div class="line"><span class="lineno"> 2529</span>        <span class="keyword">assert</span> y_pred.dtype.kind == <span class="stringliteral">&quot;f&quot;</span>, (</div>
<div class="line"><span class="lineno"> 2530</span>            f<span class="stringliteral">&quot;When {name}.predict_proba returns a NumPy array, the &quot;</span></div>
<div class="line"><span class="lineno"> 2531</span>            f<span class="stringliteral">&quot;expected data type is floating. Got {y_pred.dtype} instead.&quot;</span></div>
<div class="line"><span class="lineno"> 2532</span>        )</div>
<div class="line"><span class="lineno"> 2533</span>        err_msg = (</div>
<div class="line"><span class="lineno"> 2534</span>            f<span class="stringliteral">&quot;When {name}.predict_proba returns a NumPy array, this array &quot;</span></div>
<div class="line"><span class="lineno"> 2535</span>            <span class="stringliteral">&quot;is expected to provide probabilities of the positive class &quot;</span></div>
<div class="line"><span class="lineno"> 2536</span>            <span class="stringliteral">&quot;and should therefore contain values between 0 and 1.&quot;</span></div>
<div class="line"><span class="lineno"> 2537</span>        )</div>
<div class="line"><span class="lineno"> 2538</span>        assert_array_less(0, y_pred, err_msg=err_msg)</div>
<div class="line"><span class="lineno"> 2539</span>        assert_array_less(y_pred, 1, err_msg=err_msg)</div>
<div class="line"><span class="lineno"> 2540</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2541</span>        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 2542</span>            f<span class="stringliteral">&quot;Unknown returned type {type(y_pred)} by {name}.&quot;</span></div>
<div class="line"><span class="lineno"> 2543</span>            <span class="stringliteral">&quot;predict_proba. A list or a Numpy array is expected.&quot;</span></div>
<div class="line"><span class="lineno"> 2544</span>        )</div>
<div class="line"><span class="lineno"> 2545</span> </div>
<div class="line"><span class="lineno"> 2546</span> </div>
<div class="line"><span class="lineno"> 2547</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d216c4995366bfb8e12db1a65b2e46d" name="a5d216c4995366bfb8e12db1a65b2e46d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d216c4995366bfb8e12db1a65b2e46d">&#9670;&#160;</a></span>check_classifiers_multilabel_representation_invariance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_multilabel_representation_invariance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2378</span><span class="keyword">def </span>check_classifiers_multilabel_representation_invariance(name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2379</span>    X, y = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 2380</span>        n_samples=100,</div>
<div class="line"><span class="lineno"> 2381</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 2382</span>        n_classes=5,</div>
<div class="line"><span class="lineno"> 2383</span>        n_labels=3,</div>
<div class="line"><span class="lineno"> 2384</span>        length=50,</div>
<div class="line"><span class="lineno"> 2385</span>        allow_unlabeled=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 2386</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 2387</span>    )</div>
<div class="line"><span class="lineno"> 2388</span>    X = scale(X)</div>
<div class="line"><span class="lineno"> 2389</span> </div>
<div class="line"><span class="lineno"> 2390</span>    X_train, y_train = X[:80], y[:80]</div>
<div class="line"><span class="lineno"> 2391</span>    X_test = X[80:]</div>
<div class="line"><span class="lineno"> 2392</span> </div>
<div class="line"><span class="lineno"> 2393</span>    y_train_list_of_lists = y_train.tolist()</div>
<div class="line"><span class="lineno"> 2394</span>    y_train_list_of_arrays = list(y_train)</div>
<div class="line"><span class="lineno"> 2395</span> </div>
<div class="line"><span class="lineno"> 2396</span>    classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2397</span>    set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2398</span> </div>
<div class="line"><span class="lineno"> 2399</span>    y_pred = classifier.fit(X_train, y_train).predict(X_test)</div>
<div class="line"><span class="lineno"> 2400</span> </div>
<div class="line"><span class="lineno"> 2401</span>    y_pred_list_of_lists = classifier.fit(X_train, y_train_list_of_lists).predict(</div>
<div class="line"><span class="lineno"> 2402</span>        X_test</div>
<div class="line"><span class="lineno"> 2403</span>    )</div>
<div class="line"><span class="lineno"> 2404</span> </div>
<div class="line"><span class="lineno"> 2405</span>    y_pred_list_of_arrays = classifier.fit(X_train, y_train_list_of_arrays).predict(</div>
<div class="line"><span class="lineno"> 2406</span>        X_test</div>
<div class="line"><span class="lineno"> 2407</span>    )</div>
<div class="line"><span class="lineno"> 2408</span> </div>
<div class="line"><span class="lineno"> 2409</span>    assert_array_equal(y_pred, y_pred_list_of_arrays)</div>
<div class="line"><span class="lineno"> 2410</span>    assert_array_equal(y_pred, y_pred_list_of_lists)</div>
<div class="line"><span class="lineno"> 2411</span> </div>
<div class="line"><span class="lineno"> 2412</span>    <span class="keyword">assert</span> y_pred.dtype == y_pred_list_of_arrays.dtype</div>
<div class="line"><span class="lineno"> 2413</span>    <span class="keyword">assert</span> y_pred.dtype == y_pred_list_of_lists.dtype</div>
<div class="line"><span class="lineno"> 2414</span>    <span class="keyword">assert</span> type(y_pred) == type(y_pred_list_of_arrays)</div>
<div class="line"><span class="lineno"> 2415</span>    <span class="keyword">assert</span> type(y_pred) == type(y_pred_list_of_lists)</div>
<div class="line"><span class="lineno"> 2416</span> </div>
<div class="line"><span class="lineno"> 2417</span> </div>
<div class="line"><span class="lineno"> 2418</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f575ad6a2c0da1ca411a371ee7206ce" name="a4f575ad6a2c0da1ca411a371ee7206ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f575ad6a2c0da1ca411a371ee7206ce">&#9670;&#160;</a></span>check_classifiers_one_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_one_label </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2095</span><span class="keyword">def </span>check_classifiers_one_label(name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2096</span>    error_string_fit = <span class="stringliteral">&quot;Classifier can&#39;t train when only one class is present.&quot;</span></div>
<div class="line"><span class="lineno"> 2097</span>    error_string_predict = <span class="stringliteral">&quot;Classifier can&#39;t predict when only one class is present.&quot;</span></div>
<div class="line"><span class="lineno"> 2098</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 2099</span>    X_train = rnd.uniform(size=(10, 3))</div>
<div class="line"><span class="lineno"> 2100</span>    X_test = rnd.uniform(size=(10, 3))</div>
<div class="line"><span class="lineno"> 2101</span>    y = np.ones(10)</div>
<div class="line"><span class="lineno"> 2102</span>    <span class="comment"># catch deprecation warnings</span></div>
<div class="line"><span class="lineno"> 2103</span>    <span class="keyword">with</span> ignore_warnings(category=FutureWarning):</div>
<div class="line"><span class="lineno"> 2104</span>        classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2105</span>        <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2106</span>            ValueError, match=<span class="stringliteral">&quot;class&quot;</span>, may_pass=<span class="keyword">True</span>, err_msg=error_string_fit</div>
<div class="line"><span class="lineno"> 2107</span>        ) <span class="keyword">as</span> cm:</div>
<div class="line"><span class="lineno"> 2108</span>            classifier.fit(X_train, y)</div>
<div class="line"><span class="lineno"> 2109</span> </div>
<div class="line"><span class="lineno"> 2110</span>        <span class="keywordflow">if</span> cm.raised_and_matched:</div>
<div class="line"><span class="lineno"> 2111</span>            <span class="comment"># ValueError was raised with proper error message</span></div>
<div class="line"><span class="lineno"> 2112</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 2113</span> </div>
<div class="line"><span class="lineno"> 2114</span>        assert_array_equal(classifier.predict(X_test), y, err_msg=error_string_predict)</div>
<div class="line"><span class="lineno"> 2115</span> </div>
<div class="line"><span class="lineno"> 2116</span> </div>
<div class="line"><span class="lineno"> 2117</span><span class="preprocessor">@ignore_warnings</span>  <span class="comment"># Warnings are raised by decision function</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b0d7a973830046f536747593d650e72" name="a3b0d7a973830046f536747593d650e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b0d7a973830046f536747593d650e72">&#9670;&#160;</a></span>check_classifiers_predictions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_predictions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2667</span><span class="keyword">def </span>check_classifiers_predictions(X, y, name, classifier_orig):</div>
<div class="line"><span class="lineno"> 2668</span>    classes = np.unique(y)</div>
<div class="line"><span class="lineno"> 2669</span>    classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2670</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;BernoulliNB&quot;</span>:</div>
<div class="line"><span class="lineno"> 2671</span>        X = X &gt; X.mean()</div>
<div class="line"><span class="lineno"> 2672</span>    set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2673</span> </div>
<div class="line"><span class="lineno"> 2674</span>    classifier.fit(X, y)</div>
<div class="line"><span class="lineno"> 2675</span>    y_pred = classifier.predict(X)</div>
<div class="line"><span class="lineno"> 2676</span> </div>
<div class="line"><span class="lineno"> 2677</span>    <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;decision_function&quot;</span>):</div>
<div class="line"><span class="lineno"> 2678</span>        decision = classifier.decision_function(X)</div>
<div class="line"><span class="lineno"> 2679</span>        <span class="keyword">assert</span> isinstance(decision, np.ndarray)</div>
<div class="line"><span class="lineno"> 2680</span>        <span class="keywordflow">if</span> len(classes) == 2:</div>
<div class="line"><span class="lineno"> 2681</span>            dec_pred = (decision.ravel() &gt; 0).astype(int)</div>
<div class="line"><span class="lineno"> 2682</span>            dec_exp = classifier.classes_[dec_pred]</div>
<div class="line"><span class="lineno"> 2683</span>            assert_array_equal(</div>
<div class="line"><span class="lineno"> 2684</span>                dec_exp,</div>
<div class="line"><span class="lineno"> 2685</span>                y_pred,</div>
<div class="line"><span class="lineno"> 2686</span>                err_msg=(</div>
<div class="line"><span class="lineno"> 2687</span>                    <span class="stringliteral">&quot;decision_function does not match &quot;</span></div>
<div class="line"><span class="lineno"> 2688</span>                    <span class="stringliteral">&quot;classifier for %r: expected &#39;%s&#39;, got &#39;%s&#39;&quot;</span></div>
<div class="line"><span class="lineno"> 2689</span>                )</div>
<div class="line"><span class="lineno"> 2690</span>                % (</div>
<div class="line"><span class="lineno"> 2691</span>                    classifier,</div>
<div class="line"><span class="lineno"> 2692</span>                    <span class="stringliteral">&quot;, &quot;</span>.join(map(str, dec_exp)),</div>
<div class="line"><span class="lineno"> 2693</span>                    <span class="stringliteral">&quot;, &quot;</span>.join(map(str, y_pred)),</div>
<div class="line"><span class="lineno"> 2694</span>                ),</div>
<div class="line"><span class="lineno"> 2695</span>            )</div>
<div class="line"><span class="lineno"> 2696</span>        <span class="keywordflow">elif</span> getattr(classifier, <span class="stringliteral">&quot;decision_function_shape&quot;</span>, <span class="stringliteral">&quot;ovr&quot;</span>) == <span class="stringliteral">&quot;ovr&quot;</span>:</div>
<div class="line"><span class="lineno"> 2697</span>            decision_y = np.argmax(decision, axis=1).astype(int)</div>
<div class="line"><span class="lineno"> 2698</span>            y_exp = classifier.classes_[decision_y]</div>
<div class="line"><span class="lineno"> 2699</span>            assert_array_equal(</div>
<div class="line"><span class="lineno"> 2700</span>                y_exp,</div>
<div class="line"><span class="lineno"> 2701</span>                y_pred,</div>
<div class="line"><span class="lineno"> 2702</span>                err_msg=(</div>
<div class="line"><span class="lineno"> 2703</span>                    <span class="stringliteral">&quot;decision_function does not match &quot;</span></div>
<div class="line"><span class="lineno"> 2704</span>                    <span class="stringliteral">&quot;classifier for %r: expected &#39;%s&#39;, got &#39;%s&#39;&quot;</span></div>
<div class="line"><span class="lineno"> 2705</span>                )</div>
<div class="line"><span class="lineno"> 2706</span>                % (classifier, <span class="stringliteral">&quot;, &quot;</span>.join(map(str, y_exp)), <span class="stringliteral">&quot;, &quot;</span>.join(map(str, y_pred))),</div>
<div class="line"><span class="lineno"> 2707</span>            )</div>
<div class="line"><span class="lineno"> 2708</span> </div>
<div class="line"><span class="lineno"> 2709</span>    <span class="comment"># training set performance</span></div>
<div class="line"><span class="lineno"> 2710</span>    <span class="keywordflow">if</span> name != <span class="stringliteral">&quot;ComplementNB&quot;</span>:</div>
<div class="line"><span class="lineno"> 2711</span>        <span class="comment"># This is a pathological data set for ComplementNB.</span></div>
<div class="line"><span class="lineno"> 2712</span>        <span class="comment"># For some specific cases &#39;ComplementNB&#39; predicts less classes</span></div>
<div class="line"><span class="lineno"> 2713</span>        <span class="comment"># than expected</span></div>
<div class="line"><span class="lineno"> 2714</span>        assert_array_equal(np.unique(y), np.unique(y_pred))</div>
<div class="line"><span class="lineno"> 2715</span>    assert_array_equal(</div>
<div class="line"><span class="lineno"> 2716</span>        classes,</div>
<div class="line"><span class="lineno"> 2717</span>        classifier.classes_,</div>
<div class="line"><span class="lineno"> 2718</span>        err_msg=<span class="stringliteral">&quot;Unexpected classes_ attribute for %r: expected &#39;%s&#39;, got &#39;%s&#39;&quot;</span></div>
<div class="line"><span class="lineno"> 2719</span>        % (</div>
<div class="line"><span class="lineno"> 2720</span>            classifier,</div>
<div class="line"><span class="lineno"> 2721</span>            <span class="stringliteral">&quot;, &quot;</span>.join(map(str, classes)),</div>
<div class="line"><span class="lineno"> 2722</span>            <span class="stringliteral">&quot;, &quot;</span>.join(map(str, classifier.classes_)),</div>
<div class="line"><span class="lineno"> 2723</span>        ),</div>
<div class="line"><span class="lineno"> 2724</span>    )</div>
<div class="line"><span class="lineno"> 2725</span> </div>
<div class="line"><span class="lineno"> 2726</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d51e62bb24000d1bc293baf251dc5bf" name="a5d51e62bb24000d1bc293baf251dc5bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d51e62bb24000d1bc293baf251dc5bf">&#9670;&#160;</a></span>check_classifiers_regression_target()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_regression_target </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3445</span><span class="keyword">def </span>check_classifiers_regression_target(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3446</span>    <span class="comment"># Check if classifier throws an exception when fed regression targets</span></div>
<div class="line"><span class="lineno"> 3447</span> </div>
<div class="line"><span class="lineno"> 3448</span>    X, y = _regression_dataset()</div>
<div class="line"><span class="lineno"> 3449</span> </div>
<div class="line"><span class="lineno"> 3450</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 3451</span>    e = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3452</span>    msg = <span class="stringliteral">&quot;Unknown label type: &quot;</span></div>
<div class="line"><span class="lineno"> 3453</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> _safe_tags(e, key=<span class="stringliteral">&quot;no_validation&quot;</span>):</div>
<div class="line"><span class="lineno"> 3454</span>        <span class="keyword">with</span> raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 3455</span>            e.fit(X, y)</div>
<div class="line"><span class="lineno"> 3456</span> </div>
<div class="line"><span class="lineno"> 3457</span> </div>
<div class="line"><span class="lineno"> 3458</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86679ac400938e5b82b1f4457e636aca" name="a86679ac400938e5b82b1f4457e636aca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86679ac400938e5b82b1f4457e636aca">&#9670;&#160;</a></span>check_classifiers_train()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_classifiers_train </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>classifier_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readonly_memmap</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_dtype</em> = <code>&quot;float64&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2120</span>):</div>
<div class="line"><span class="lineno"> 2121</span>    X_m, y_m = make_blobs(n_samples=300, random_state=0)</div>
<div class="line"><span class="lineno"> 2122</span>    X_m = X_m.astype(X_dtype)</div>
<div class="line"><span class="lineno"> 2123</span>    X_m, y_m = shuffle(X_m, y_m, random_state=7)</div>
<div class="line"><span class="lineno"> 2124</span>    X_m = StandardScaler().fit_transform(X_m)</div>
<div class="line"><span class="lineno"> 2125</span>    <span class="comment"># generate binary problem from multi-class one</span></div>
<div class="line"><span class="lineno"> 2126</span>    y_b = y_m[y_m != 2]</div>
<div class="line"><span class="lineno"> 2127</span>    X_b = X_m[y_m != 2]</div>
<div class="line"><span class="lineno"> 2128</span> </div>
<div class="line"><span class="lineno"> 2129</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;BernoulliNB&quot;</span>, <span class="stringliteral">&quot;MultinomialNB&quot;</span>, <span class="stringliteral">&quot;ComplementNB&quot;</span>, <span class="stringliteral">&quot;CategoricalNB&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2130</span>        X_m -= X_m.min()</div>
<div class="line"><span class="lineno"> 2131</span>        X_b -= X_b.min()</div>
<div class="line"><span class="lineno"> 2132</span> </div>
<div class="line"><span class="lineno"> 2133</span>    <span class="keywordflow">if</span> readonly_memmap:</div>
<div class="line"><span class="lineno"> 2134</span>        X_m, y_m, X_b, y_b = create_memmap_backed_data([X_m, y_m, X_b, y_b])</div>
<div class="line"><span class="lineno"> 2135</span> </div>
<div class="line"><span class="lineno"> 2136</span>    problems = [(X_b, y_b)]</div>
<div class="line"><span class="lineno"> 2137</span>    tags = _safe_tags(classifier_orig)</div>
<div class="line"><span class="lineno"> 2138</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;binary_only&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2139</span>        problems.append((X_m, y_m))</div>
<div class="line"><span class="lineno"> 2140</span> </div>
<div class="line"><span class="lineno"> 2141</span>    <span class="keywordflow">for</span> X, y <span class="keywordflow">in</span> problems:</div>
<div class="line"><span class="lineno"> 2142</span>        classes = np.unique(y)</div>
<div class="line"><span class="lineno"> 2143</span>        n_classes = len(classes)</div>
<div class="line"><span class="lineno"> 2144</span>        n_samples, n_features = X.shape</div>
<div class="line"><span class="lineno"> 2145</span>        classifier = clone(classifier_orig)</div>
<div class="line"><span class="lineno"> 2146</span>        X = _enforce_estimator_tags_X(classifier, X)</div>
<div class="line"><span class="lineno"> 2147</span>        y = _enforce_estimator_tags_y(classifier, y)</div>
<div class="line"><span class="lineno"> 2148</span> </div>
<div class="line"><span class="lineno"> 2149</span>        set_random_state(classifier)</div>
<div class="line"><span class="lineno"> 2150</span>        <span class="comment"># raises error on malformed input for fit</span></div>
<div class="line"><span class="lineno"> 2151</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2152</span>            <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2153</span>                ValueError,</div>
<div class="line"><span class="lineno"> 2154</span>                err_msg=(</div>
<div class="line"><span class="lineno"> 2155</span>                    f<span class="stringliteral">&quot;The classifier {name} does not raise an error when &quot;</span></div>
<div class="line"><span class="lineno"> 2156</span>                    <span class="stringliteral">&quot;incorrect/malformed input data for fit is passed. The number &quot;</span></div>
<div class="line"><span class="lineno"> 2157</span>                    <span class="stringliteral">&quot;of training examples is not the same as the number of &quot;</span></div>
<div class="line"><span class="lineno"> 2158</span>                    <span class="stringliteral">&quot;labels. Perhaps use check_X_y in fit.&quot;</span></div>
<div class="line"><span class="lineno"> 2159</span>                ),</div>
<div class="line"><span class="lineno"> 2160</span>            ):</div>
<div class="line"><span class="lineno"> 2161</span>                classifier.fit(X, y[:-1])</div>
<div class="line"><span class="lineno"> 2162</span> </div>
<div class="line"><span class="lineno"> 2163</span>        <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 2164</span>        classifier.fit(X, y)</div>
<div class="line"><span class="lineno"> 2165</span>        <span class="comment"># with lists</span></div>
<div class="line"><span class="lineno"> 2166</span>        classifier.fit(X.tolist(), y.tolist())</div>
<div class="line"><span class="lineno"> 2167</span>        <span class="keyword">assert</span> hasattr(classifier, <span class="stringliteral">&quot;classes_&quot;</span>)</div>
<div class="line"><span class="lineno"> 2168</span>        y_pred = classifier.predict(X)</div>
<div class="line"><span class="lineno"> 2169</span> </div>
<div class="line"><span class="lineno"> 2170</span>        <span class="keyword">assert</span> y_pred.shape == (n_samples,)</div>
<div class="line"><span class="lineno"> 2171</span>        <span class="comment"># training set performance</span></div>
<div class="line"><span class="lineno"> 2172</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;poor_score&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2173</span>            <span class="keyword">assert</span> accuracy_score(y, y_pred) &gt; 0.83</div>
<div class="line"><span class="lineno"> 2174</span> </div>
<div class="line"><span class="lineno"> 2175</span>        <span class="comment"># raises error on malformed input for predict</span></div>
<div class="line"><span class="lineno"> 2176</span>        msg_pairwise = (</div>
<div class="line"><span class="lineno"> 2177</span>            <span class="stringliteral">&quot;The classifier {} does not raise an error when shape of X in &quot;</span></div>
<div class="line"><span class="lineno"> 2178</span>            <span class="stringliteral">&quot; {} is not equal to (n_test_samples, n_training_samples)&quot;</span></div>
<div class="line"><span class="lineno"> 2179</span>        )</div>
<div class="line"><span class="lineno"> 2180</span>        msg = (</div>
<div class="line"><span class="lineno"> 2181</span>            <span class="stringliteral">&quot;The classifier {} does not raise an error when the number of &quot;</span></div>
<div class="line"><span class="lineno"> 2182</span>            <span class="stringliteral">&quot;features in {} is different from the number of features in &quot;</span></div>
<div class="line"><span class="lineno"> 2183</span>            <span class="stringliteral">&quot;fit.&quot;</span></div>
<div class="line"><span class="lineno"> 2184</span>        )</div>
<div class="line"><span class="lineno"> 2185</span> </div>
<div class="line"><span class="lineno"> 2186</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2187</span>            <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;pairwise&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2188</span>                <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2189</span>                    ValueError,</div>
<div class="line"><span class="lineno"> 2190</span>                    err_msg=msg_pairwise.format(name, <span class="stringliteral">&quot;predict&quot;</span>),</div>
<div class="line"><span class="lineno"> 2191</span>                ):</div>
<div class="line"><span class="lineno"> 2192</span>                    classifier.predict(X.reshape(-1, 1))</div>
<div class="line"><span class="lineno"> 2193</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2194</span>                <span class="keyword">with</span> raises(ValueError, err_msg=msg.format(name, <span class="stringliteral">&quot;predict&quot;</span>)):</div>
<div class="line"><span class="lineno"> 2195</span>                    classifier.predict(X.T)</div>
<div class="line"><span class="lineno"> 2196</span>        <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;decision_function&quot;</span>):</div>
<div class="line"><span class="lineno"> 2197</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 2198</span>                <span class="comment"># decision_function agrees with predict</span></div>
<div class="line"><span class="lineno"> 2199</span>                decision = classifier.decision_function(X)</div>
<div class="line"><span class="lineno"> 2200</span>                <span class="keywordflow">if</span> n_classes == 2:</div>
<div class="line"><span class="lineno"> 2201</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;multioutput_only&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2202</span>                        <span class="keyword">assert</span> decision.shape == (n_samples,)</div>
<div class="line"><span class="lineno"> 2203</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2204</span>                        <span class="keyword">assert</span> decision.shape == (n_samples, 1)</div>
<div class="line"><span class="lineno"> 2205</span>                    dec_pred = (decision.ravel() &gt; 0).astype(int)</div>
<div class="line"><span class="lineno"> 2206</span>                    assert_array_equal(dec_pred, y_pred)</div>
<div class="line"><span class="lineno"> 2207</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2208</span>                    <span class="keyword">assert</span> decision.shape == (n_samples, n_classes)</div>
<div class="line"><span class="lineno"> 2209</span>                    assert_array_equal(np.argmax(decision, axis=1), y_pred)</div>
<div class="line"><span class="lineno"> 2210</span> </div>
<div class="line"><span class="lineno"> 2211</span>                <span class="comment"># raises error on malformed input for decision_function</span></div>
<div class="line"><span class="lineno"> 2212</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2213</span>                    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;pairwise&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2214</span>                        <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2215</span>                            ValueError,</div>
<div class="line"><span class="lineno"> 2216</span>                            err_msg=msg_pairwise.format(name, <span class="stringliteral">&quot;decision_function&quot;</span>),</div>
<div class="line"><span class="lineno"> 2217</span>                        ):</div>
<div class="line"><span class="lineno"> 2218</span>                            classifier.decision_function(X.reshape(-1, 1))</div>
<div class="line"><span class="lineno"> 2219</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2220</span>                        <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2221</span>                            ValueError,</div>
<div class="line"><span class="lineno"> 2222</span>                            err_msg=msg.format(name, <span class="stringliteral">&quot;decision_function&quot;</span>),</div>
<div class="line"><span class="lineno"> 2223</span>                        ):</div>
<div class="line"><span class="lineno"> 2224</span>                            classifier.decision_function(X.T)</div>
<div class="line"><span class="lineno"> 2225</span>            <span class="keywordflow">except</span> NotImplementedError:</div>
<div class="line"><span class="lineno"> 2226</span>                <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 2227</span> </div>
<div class="line"><span class="lineno"> 2228</span>        <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;predict_proba&quot;</span>):</div>
<div class="line"><span class="lineno"> 2229</span>            <span class="comment"># predict_proba agrees with predict</span></div>
<div class="line"><span class="lineno"> 2230</span>            y_prob = classifier.predict_proba(X)</div>
<div class="line"><span class="lineno"> 2231</span>            <span class="keyword">assert</span> y_prob.shape == (n_samples, n_classes)</div>
<div class="line"><span class="lineno"> 2232</span>            assert_array_equal(np.argmax(y_prob, axis=1), y_pred)</div>
<div class="line"><span class="lineno"> 2233</span>            <span class="comment"># check that probas for all classes sum to one</span></div>
<div class="line"><span class="lineno"> 2234</span>            assert_array_almost_equal(np.sum(y_prob, axis=1), np.ones(n_samples))</div>
<div class="line"><span class="lineno"> 2235</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2236</span>                <span class="comment"># raises error on malformed input for predict_proba</span></div>
<div class="line"><span class="lineno"> 2237</span>                <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;pairwise&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2238</span>                    <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2239</span>                        ValueError,</div>
<div class="line"><span class="lineno"> 2240</span>                        err_msg=msg_pairwise.format(name, <span class="stringliteral">&quot;predict_proba&quot;</span>),</div>
<div class="line"><span class="lineno"> 2241</span>                    ):</div>
<div class="line"><span class="lineno"> 2242</span>                        classifier.predict_proba(X.reshape(-1, 1))</div>
<div class="line"><span class="lineno"> 2243</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2244</span>                    <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2245</span>                        ValueError,</div>
<div class="line"><span class="lineno"> 2246</span>                        err_msg=msg.format(name, <span class="stringliteral">&quot;predict_proba&quot;</span>),</div>
<div class="line"><span class="lineno"> 2247</span>                    ):</div>
<div class="line"><span class="lineno"> 2248</span>                        classifier.predict_proba(X.T)</div>
<div class="line"><span class="lineno"> 2249</span>            <span class="keywordflow">if</span> hasattr(classifier, <span class="stringliteral">&quot;predict_log_proba&quot;</span>):</div>
<div class="line"><span class="lineno"> 2250</span>                <span class="comment"># predict_log_proba is a transformation of predict_proba</span></div>
<div class="line"><span class="lineno"> 2251</span>                y_log_prob = classifier.predict_log_proba(X)</div>
<div class="line"><span class="lineno"> 2252</span>                assert_allclose(y_log_prob, np.log(y_prob), 8, atol=1e-9)</div>
<div class="line"><span class="lineno"> 2253</span>                assert_array_equal(np.argsort(y_log_prob), np.argsort(y_prob))</div>
<div class="line"><span class="lineno"> 2254</span> </div>
<div class="line"><span class="lineno"> 2255</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b413a9d70d9e886167b3121503614b9" name="a0b413a9d70d9e886167b3121503614b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b413a9d70d9e886167b3121503614b9">&#9670;&#160;</a></span>check_clusterer_compute_labels_predict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_clusterer_compute_labels_predict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>clusterer_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that predict is invariant of compute_labels.</pre> <div class="fragment"><div class="line"><span class="lineno"> 2080</span><span class="keyword">def </span>check_clusterer_compute_labels_predict(name, clusterer_orig):</div>
<div class="line"><span class="lineno"> 2081</span>    <span class="stringliteral">&quot;&quot;&quot;Check that predict is invariant of compute_labels.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2082</span>    X, y = make_blobs(n_samples=20, random_state=0)</div>
<div class="line"><span class="lineno"> 2083</span>    clusterer = clone(clusterer_orig)</div>
<div class="line"><span class="lineno"> 2084</span>    set_random_state(clusterer)</div>
<div class="line"><span class="lineno"> 2085</span> </div>
<div class="line"><span class="lineno"> 2086</span>    <span class="keywordflow">if</span> hasattr(clusterer, <span class="stringliteral">&quot;compute_labels&quot;</span>):</div>
<div class="line"><span class="lineno"> 2087</span>        <span class="comment"># MiniBatchKMeans</span></div>
<div class="line"><span class="lineno"> 2088</span>        X_pred1 = clusterer.fit(X).predict(X)</div>
<div class="line"><span class="lineno"> 2089</span>        clusterer.set_params(compute_labels=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 2090</span>        X_pred2 = clusterer.fit(X).predict(X)</div>
<div class="line"><span class="lineno"> 2091</span>        assert_array_equal(X_pred1, X_pred2)</div>
<div class="line"><span class="lineno"> 2092</span> </div>
<div class="line"><span class="lineno"> 2093</span> </div>
<div class="line"><span class="lineno"> 2094</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa2c09ae1243d518846c7d9426e84181" name="afa2c09ae1243d518846c7d9426e84181"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa2c09ae1243d518846c7d9426e84181">&#9670;&#160;</a></span>check_clustering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_clustering </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>clusterer_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readonly_memmap</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2020</span><span class="keyword">def </span>check_clustering(name, clusterer_orig, readonly_memmap=False):</div>
<div class="line"><span class="lineno"> 2021</span>    clusterer = clone(clusterer_orig)</div>
<div class="line"><span class="lineno"> 2022</span>    X, y = make_blobs(n_samples=50, random_state=1)</div>
<div class="line"><span class="lineno"> 2023</span>    X, y = shuffle(X, y, random_state=7)</div>
<div class="line"><span class="lineno"> 2024</span>    X = StandardScaler().fit_transform(X)</div>
<div class="line"><span class="lineno"> 2025</span>    rng = np.random.RandomState(7)</div>
<div class="line"><span class="lineno"> 2026</span>    X_noise = np.concatenate([X, rng.uniform(low=-3, high=3, size=(5, 2))])</div>
<div class="line"><span class="lineno"> 2027</span> </div>
<div class="line"><span class="lineno"> 2028</span>    <span class="keywordflow">if</span> readonly_memmap:</div>
<div class="line"><span class="lineno"> 2029</span>        X, y, X_noise = create_memmap_backed_data([X, y, X_noise])</div>
<div class="line"><span class="lineno"> 2030</span> </div>
<div class="line"><span class="lineno"> 2031</span>    n_samples, n_features = X.shape</div>
<div class="line"><span class="lineno"> 2032</span>    <span class="comment"># catch deprecation and neighbors warnings</span></div>
<div class="line"><span class="lineno"> 2033</span>    <span class="keywordflow">if</span> hasattr(clusterer, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 2034</span>        clusterer.set_params(n_clusters=3)</div>
<div class="line"><span class="lineno"> 2035</span>    set_random_state(clusterer)</div>
<div class="line"><span class="lineno"> 2036</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;AffinityPropagation&quot;</span>:</div>
<div class="line"><span class="lineno"> 2037</span>        clusterer.set_params(preference=-100)</div>
<div class="line"><span class="lineno"> 2038</span>        clusterer.set_params(max_iter=100)</div>
<div class="line"><span class="lineno"> 2039</span> </div>
<div class="line"><span class="lineno"> 2040</span>    <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 2041</span>    clusterer.fit(X)</div>
<div class="line"><span class="lineno"> 2042</span>    <span class="comment"># with lists</span></div>
<div class="line"><span class="lineno"> 2043</span>    clusterer.fit(X.tolist())</div>
<div class="line"><span class="lineno"> 2044</span> </div>
<div class="line"><span class="lineno"> 2045</span>    pred = clusterer.labels_</div>
<div class="line"><span class="lineno"> 2046</span>    <span class="keyword">assert</span> pred.shape == (n_samples,)</div>
<div class="line"><span class="lineno"> 2047</span>    <span class="keyword">assert</span> adjusted_rand_score(pred, y) &gt; 0.4</div>
<div class="line"><span class="lineno"> 2048</span>    <span class="keywordflow">if</span> _safe_tags(clusterer, key=<span class="stringliteral">&quot;non_deterministic&quot;</span>):</div>
<div class="line"><span class="lineno"> 2049</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 2050</span>    set_random_state(clusterer)</div>
<div class="line"><span class="lineno"> 2051</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno"> 2052</span>        pred2 = clusterer.fit_predict(X)</div>
<div class="line"><span class="lineno"> 2053</span>    assert_array_equal(pred, pred2)</div>
<div class="line"><span class="lineno"> 2054</span> </div>
<div class="line"><span class="lineno"> 2055</span>    <span class="comment"># fit_predict(X) and labels_ should be of type int</span></div>
<div class="line"><span class="lineno"> 2056</span>    <span class="keyword">assert</span> pred.dtype <span class="keywordflow">in</span> [np.dtype(<span class="stringliteral">&quot;int32&quot;</span>), np.dtype(<span class="stringliteral">&quot;int64&quot;</span>)]</div>
<div class="line"><span class="lineno"> 2057</span>    <span class="keyword">assert</span> pred2.dtype <span class="keywordflow">in</span> [np.dtype(<span class="stringliteral">&quot;int32&quot;</span>), np.dtype(<span class="stringliteral">&quot;int64&quot;</span>)]</div>
<div class="line"><span class="lineno"> 2058</span> </div>
<div class="line"><span class="lineno"> 2059</span>    <span class="comment"># Add noise to X to test the possible values of the labels</span></div>
<div class="line"><span class="lineno"> 2060</span>    labels = clusterer.fit_predict(X_noise)</div>
<div class="line"><span class="lineno"> 2061</span> </div>
<div class="line"><span class="lineno"> 2062</span>    <span class="comment"># There should be at least one sample in every cluster. Equivalently</span></div>
<div class="line"><span class="lineno"> 2063</span>    <span class="comment"># labels_ should contain all the consecutive values between its</span></div>
<div class="line"><span class="lineno"> 2064</span>    <span class="comment"># min and its max.</span></div>
<div class="line"><span class="lineno"> 2065</span>    labels_sorted = np.unique(labels)</div>
<div class="line"><span class="lineno"> 2066</span>    assert_array_equal(</div>
<div class="line"><span class="lineno"> 2067</span>        labels_sorted, np.arange(labels_sorted[0], labels_sorted[-1] + 1)</div>
<div class="line"><span class="lineno"> 2068</span>    )</div>
<div class="line"><span class="lineno"> 2069</span> </div>
<div class="line"><span class="lineno"> 2070</span>    <span class="comment"># Labels are expected to start at 0 (no noise) or -1 (if noise)</span></div>
<div class="line"><span class="lineno"> 2071</span>    <span class="keyword">assert</span> labels_sorted[0] <span class="keywordflow">in</span> [0, -1]</div>
<div class="line"><span class="lineno"> 2072</span>    <span class="comment"># Labels should be less than n_clusters - 1</span></div>
<div class="line"><span class="lineno"> 2073</span>    <span class="keywordflow">if</span> hasattr(clusterer, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 2074</span>        n_clusters = getattr(clusterer, <span class="stringliteral">&quot;n_clusters&quot;</span>)</div>
<div class="line"><span class="lineno"> 2075</span>        <span class="keyword">assert</span> n_clusters - 1 &gt;= labels_sorted[-1]</div>
<div class="line"><span class="lineno"> 2076</span>    <span class="comment"># else labels should be less than max(labels_) which is necessarily true</span></div>
<div class="line"><span class="lineno"> 2077</span> </div>
<div class="line"><span class="lineno"> 2078</span> </div>
<div class="line"><span class="lineno"> 2079</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a59e36036669051231b45da13a3415e01" name="a59e36036669051231b45da13a3415e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e36036669051231b45da13a3415e01">&#9670;&#160;</a></span>check_complex_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_complex_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1167</span><span class="keyword">def </span>check_complex_data(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1168</span>    rng = np.random.RandomState(42)</div>
<div class="line"><span class="lineno"> 1169</span>    <span class="comment"># check that estimators raise an exception on providing complex data</span></div>
<div class="line"><span class="lineno"> 1170</span>    X = rng.uniform(size=10) + 1j * rng.uniform(size=10)</div>
<div class="line"><span class="lineno"> 1171</span>    X = X.reshape(-1, 1)</div>
<div class="line"><span class="lineno"> 1172</span> </div>
<div class="line"><span class="lineno"> 1173</span>    <span class="comment"># Something both valid for classification and regression</span></div>
<div class="line"><span class="lineno"> 1174</span>    y = rng.randint(low=0, high=2, size=10) + 1j</div>
<div class="line"><span class="lineno"> 1175</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1176</span>    set_random_state(estimator, random_state=0)</div>
<div class="line"><span class="lineno"> 1177</span>    <span class="keyword">with</span> raises(ValueError, match=<span class="stringliteral">&quot;Complex data not supported&quot;</span>):</div>
<div class="line"><span class="lineno"> 1178</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1179</span> </div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e532a2f0c6a7fce63620e9cadd227fa" name="a8e532a2f0c6a7fce63620e9cadd227fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e532a2f0c6a7fce63620e9cadd227fa">&#9670;&#160;</a></span>check_dataframe_column_names_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_dataframe_column_names_consistency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3790</span><span class="keyword">def </span>check_dataframe_column_names_consistency(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3791</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3792</span>        <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><span class="lineno"> 3793</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno"> 3794</span>        <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno"> 3795</span>            <span class="stringliteral">&quot;pandas is not installed: not checking column name consistency for pandas&quot;</span></div>
<div class="line"><span class="lineno"> 3796</span>        )</div>
<div class="line"><span class="lineno"> 3797</span> </div>
<div class="line"><span class="lineno"> 3798</span>    tags = _safe_tags(estimator_orig)</div>
<div class="line"><span class="lineno"> 3799</span>    is_supported_X_types = (</div>
<div class="line"><span class="lineno"> 3800</span>        <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>] <span class="keywordflow">or</span> <span class="stringliteral">&quot;categorical&quot;</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>]</div>
<div class="line"><span class="lineno"> 3801</span>    )</div>
<div class="line"><span class="lineno"> 3802</span> </div>
<div class="line"><span class="lineno"> 3803</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_supported_X_types <span class="keywordflow">or</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3804</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3805</span> </div>
<div class="line"><span class="lineno"> 3806</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 3807</span> </div>
<div class="line"><span class="lineno"> 3808</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3809</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3810</span> </div>
<div class="line"><span class="lineno"> 3811</span>    X_orig = rng.normal(size=(150, 8))</div>
<div class="line"><span class="lineno"> 3812</span> </div>
<div class="line"><span class="lineno"> 3813</span>    X_orig = _enforce_estimator_tags_X(estimator, X_orig)</div>
<div class="line"><span class="lineno"> 3814</span>    n_samples, n_features = X_orig.shape</div>
<div class="line"><span class="lineno"> 3815</span> </div>
<div class="line"><span class="lineno"> 3816</span>    names = np.array([f<span class="stringliteral">&quot;col_{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_features)])</div>
<div class="line"><span class="lineno"> 3817</span>    X = pd.DataFrame(X_orig, columns=names)</div>
<div class="line"><span class="lineno"> 3818</span> </div>
<div class="line"><span class="lineno"> 3819</span>    <span class="keywordflow">if</span> is_regressor(estimator):</div>
<div class="line"><span class="lineno"> 3820</span>        y = rng.normal(size=n_samples)</div>
<div class="line"><span class="lineno"> 3821</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3822</span>        y = rng.randint(low=0, high=2, size=n_samples)</div>
<div class="line"><span class="lineno"> 3823</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 3824</span> </div>
<div class="line"><span class="lineno"> 3825</span>    <span class="comment"># Check that calling `fit` does not raise any warnings about feature names.</span></div>
<div class="line"><span class="lineno"> 3826</span>    <span class="keyword">with</span> warnings.catch_warnings():</div>
<div class="line"><span class="lineno"> 3827</span>        warnings.filterwarnings(</div>
<div class="line"><span class="lineno"> 3828</span>            <span class="stringliteral">&quot;error&quot;</span>,</div>
<div class="line"><span class="lineno"> 3829</span>            message=<span class="stringliteral">&quot;X does not have valid feature names&quot;</span>,</div>
<div class="line"><span class="lineno"> 3830</span>            category=UserWarning,</div>
<div class="line"><span class="lineno"> 3831</span>            module=<span class="stringliteral">&quot;sklearn&quot;</span>,</div>
<div class="line"><span class="lineno"> 3832</span>        )</div>
<div class="line"><span class="lineno"> 3833</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 3834</span> </div>
<div class="line"><span class="lineno"> 3835</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, <span class="stringliteral">&quot;feature_names_in_&quot;</span>):</div>
<div class="line"><span class="lineno"> 3836</span>        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 3837</span>            <span class="stringliteral">&quot;Estimator does not have a feature_names_in_ &quot;</span></div>
<div class="line"><span class="lineno"> 3838</span>            <span class="stringliteral">&quot;attribute after fitting with a dataframe&quot;</span></div>
<div class="line"><span class="lineno"> 3839</span>        )</div>
<div class="line"><span class="lineno"> 3840</span>    <span class="keyword">assert</span> isinstance(estimator.feature_names_in_, np.ndarray)</div>
<div class="line"><span class="lineno"> 3841</span>    <span class="keyword">assert</span> estimator.feature_names_in_.dtype == object</div>
<div class="line"><span class="lineno"> 3842</span>    assert_array_equal(estimator.feature_names_in_, names)</div>
<div class="line"><span class="lineno"> 3843</span> </div>
<div class="line"><span class="lineno"> 3844</span>    <span class="comment"># Only check sklearn estimators for feature_names_in_ in docstring</span></div>
<div class="line"><span class="lineno"> 3845</span>    module_name = estimator_orig.__module__</div>
<div class="line"><span class="lineno"> 3846</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 3847</span>        module_name.startswith(<span class="stringliteral">&quot;sklearn.&quot;</span>)</div>
<div class="line"><span class="lineno"> 3848</span>        <span class="keywordflow">and</span> <span class="keywordflow">not</span> (<span class="stringliteral">&quot;test_&quot;</span> <span class="keywordflow">in</span> module_name <span class="keywordflow">or</span> module_name.endswith(<span class="stringliteral">&quot;_testing&quot;</span>))</div>
<div class="line"><span class="lineno"> 3849</span>        <span class="keywordflow">and</span> (<span class="stringliteral">&quot;feature_names_in_&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> (estimator_orig.__doc__))</div>
<div class="line"><span class="lineno"> 3850</span>    ):</div>
<div class="line"><span class="lineno"> 3851</span>        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 3852</span>            f<span class="stringliteral">&quot;Estimator {name} does not document its feature_names_in_ attribute&quot;</span></div>
<div class="line"><span class="lineno"> 3853</span>        )</div>
<div class="line"><span class="lineno"> 3854</span> </div>
<div class="line"><span class="lineno"> 3855</span>    check_methods = []</div>
<div class="line"><span class="lineno"> 3856</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno"> 3857</span>        <span class="stringliteral">&quot;predict&quot;</span>,</div>
<div class="line"><span class="lineno"> 3858</span>        <span class="stringliteral">&quot;transform&quot;</span>,</div>
<div class="line"><span class="lineno"> 3859</span>        <span class="stringliteral">&quot;decision_function&quot;</span>,</div>
<div class="line"><span class="lineno"> 3860</span>        <span class="stringliteral">&quot;predict_proba&quot;</span>,</div>
<div class="line"><span class="lineno"> 3861</span>        <span class="stringliteral">&quot;score&quot;</span>,</div>
<div class="line"><span class="lineno"> 3862</span>        <span class="stringliteral">&quot;score_samples&quot;</span>,</div>
<div class="line"><span class="lineno"> 3863</span>        <span class="stringliteral">&quot;predict_log_proba&quot;</span>,</div>
<div class="line"><span class="lineno"> 3864</span>    ):</div>
<div class="line"><span class="lineno"> 3865</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 3866</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 3867</span> </div>
<div class="line"><span class="lineno"> 3868</span>        callable_method = getattr(estimator, method)</div>
<div class="line"><span class="lineno"> 3869</span>        <span class="keywordflow">if</span> method == <span class="stringliteral">&quot;score&quot;</span>:</div>
<div class="line"><span class="lineno"> 3870</span>            callable_method = partial(callable_method, y=y)</div>
<div class="line"><span class="lineno"> 3871</span>        check_methods.append((method, callable_method))</div>
<div class="line"><span class="lineno"> 3872</span> </div>
<div class="line"><span class="lineno"> 3873</span>    <span class="keywordflow">for</span> _, method <span class="keywordflow">in</span> check_methods:</div>
<div class="line"><span class="lineno"> 3874</span>        <span class="keyword">with</span> warnings.catch_warnings():</div>
<div class="line"><span class="lineno"> 3875</span>            warnings.filterwarnings(</div>
<div class="line"><span class="lineno"> 3876</span>                <span class="stringliteral">&quot;error&quot;</span>,</div>
<div class="line"><span class="lineno"> 3877</span>                message=<span class="stringliteral">&quot;X does not have valid feature names&quot;</span>,</div>
<div class="line"><span class="lineno"> 3878</span>                category=UserWarning,</div>
<div class="line"><span class="lineno"> 3879</span>                module=<span class="stringliteral">&quot;sklearn&quot;</span>,</div>
<div class="line"><span class="lineno"> 3880</span>            )</div>
<div class="line"><span class="lineno"> 3881</span>            method(X)  <span class="comment"># works without UserWarning for valid features</span></div>
<div class="line"><span class="lineno"> 3882</span> </div>
<div class="line"><span class="lineno"> 3883</span>    invalid_names = [</div>
<div class="line"><span class="lineno"> 3884</span>        (names[::-1], <span class="stringliteral">&quot;Feature names must be in the same order as they were in fit.&quot;</span>),</div>
<div class="line"><span class="lineno"> 3885</span>        (</div>
<div class="line"><span class="lineno"> 3886</span>            [f<span class="stringliteral">&quot;another_prefix_{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_features)],</div>
<div class="line"><span class="lineno"> 3887</span>            <span class="stringliteral">&quot;Feature names unseen at fit time:\n- another_prefix_0\n-&quot;</span></div>
<div class="line"><span class="lineno"> 3888</span>            <span class="stringliteral">&quot; another_prefix_1\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 3889</span>        ),</div>
<div class="line"><span class="lineno"> 3890</span>        (</div>
<div class="line"><span class="lineno"> 3891</span>            names[:3],</div>
<div class="line"><span class="lineno"> 3892</span>            f<span class="stringliteral">&quot;Feature names seen at fit time, yet now missing:\n- {min(names[3:])}\n&quot;</span>,</div>
<div class="line"><span class="lineno"> 3893</span>        ),</div>
<div class="line"><span class="lineno"> 3894</span>    ]</div>
<div class="line"><span class="lineno"> 3895</span>    params = {</div>
<div class="line"><span class="lineno"> 3896</span>        key: value</div>
<div class="line"><span class="lineno"> 3897</span>        <span class="keywordflow">for</span> key, value <span class="keywordflow">in</span> estimator.get_params().items()</div>
<div class="line"><span class="lineno"> 3898</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;early_stopping&quot;</span> <span class="keywordflow">in</span> key</div>
<div class="line"><span class="lineno"> 3899</span>    }</div>
<div class="line"><span class="lineno"> 3900</span>    early_stopping_enabled = any(value <span class="keywordflow">is</span> <span class="keyword">True</span> <span class="keywordflow">for</span> value <span class="keywordflow">in</span> params.values())</div>
<div class="line"><span class="lineno"> 3901</span> </div>
<div class="line"><span class="lineno"> 3902</span>    <span class="keywordflow">for</span> invalid_name, additional_message <span class="keywordflow">in</span> invalid_names:</div>
<div class="line"><span class="lineno"> 3903</span>        X_bad = pd.DataFrame(X, columns=invalid_name)</div>
<div class="line"><span class="lineno"> 3904</span> </div>
<div class="line"><span class="lineno"> 3905</span>        expected_msg = re.escape(</div>
<div class="line"><span class="lineno"> 3906</span>            <span class="stringliteral">&quot;The feature names should match those that were passed during fit.\n&quot;</span></div>
<div class="line"><span class="lineno"> 3907</span>            f<span class="stringliteral">&quot;{additional_message}&quot;</span></div>
<div class="line"><span class="lineno"> 3908</span>        )</div>
<div class="line"><span class="lineno"> 3909</span>        <span class="keywordflow">for</span> name, method <span class="keywordflow">in</span> check_methods:</div>
<div class="line"><span class="lineno"> 3910</span>            <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 3911</span>                ValueError, match=expected_msg, err_msg=f<span class="stringliteral">&quot;{name} did not raise&quot;</span></div>
<div class="line"><span class="lineno"> 3912</span>            ):</div>
<div class="line"><span class="lineno"> 3913</span>                method(X_bad)</div>
<div class="line"><span class="lineno"> 3914</span> </div>
<div class="line"><span class="lineno"> 3915</span>        <span class="comment"># partial_fit checks on second call</span></div>
<div class="line"><span class="lineno"> 3916</span>        <span class="comment"># Do not call partial fit if early_stopping is on</span></div>
<div class="line"><span class="lineno"> 3917</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, <span class="stringliteral">&quot;partial_fit&quot;</span>) <span class="keywordflow">or</span> early_stopping_enabled:</div>
<div class="line"><span class="lineno"> 3918</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 3919</span> </div>
<div class="line"><span class="lineno"> 3920</span>        estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3921</span>        <span class="keywordflow">if</span> is_classifier(estimator):</div>
<div class="line"><span class="lineno"> 3922</span>            classes = np.unique(y)</div>
<div class="line"><span class="lineno"> 3923</span>            estimator.partial_fit(X, y, classes=classes)</div>
<div class="line"><span class="lineno"> 3924</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3925</span>            estimator.partial_fit(X, y)</div>
<div class="line"><span class="lineno"> 3926</span> </div>
<div class="line"><span class="lineno"> 3927</span>        <span class="keyword">with</span> raises(ValueError, match=expected_msg):</div>
<div class="line"><span class="lineno"> 3928</span>            estimator.partial_fit(X_bad, y)</div>
<div class="line"><span class="lineno"> 3929</span> </div>
<div class="line"><span class="lineno"> 3930</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b2c0f7f8708a012ff05e6714ca53d17" name="a6b2c0f7f8708a012ff05e6714ca53d17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2c0f7f8708a012ff05e6714ca53d17">&#9670;&#160;</a></span>check_decision_proba_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_decision_proba_consistency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3459</span><span class="keyword">def </span>check_decision_proba_consistency(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3460</span>    <span class="comment"># Check whether an estimator having both decision_function and</span></div>
<div class="line"><span class="lineno"> 3461</span>    <span class="comment"># predict_proba methods has outputs with perfect rank correlation.</span></div>
<div class="line"><span class="lineno"> 3462</span> </div>
<div class="line"><span class="lineno"> 3463</span>    centers = [(2, 2), (4, 4)]</div>
<div class="line"><span class="lineno"> 3464</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 3465</span>        n_samples=100,</div>
<div class="line"><span class="lineno"> 3466</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 3467</span>        n_features=4,</div>
<div class="line"><span class="lineno"> 3468</span>        centers=centers,</div>
<div class="line"><span class="lineno"> 3469</span>        cluster_std=1.0,</div>
<div class="line"><span class="lineno"> 3470</span>        shuffle=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 3471</span>    )</div>
<div class="line"><span class="lineno"> 3472</span>    X_train, X_test, y_train, y_test = train_test_split(</div>
<div class="line"><span class="lineno"> 3473</span>        X, y, test_size=0.2, random_state=0</div>
<div class="line"><span class="lineno"> 3474</span>    )</div>
<div class="line"><span class="lineno"> 3475</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3476</span> </div>
<div class="line"><span class="lineno"> 3477</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;decision_function&quot;</span>) <span class="keywordflow">and</span> hasattr(estimator, <span class="stringliteral">&quot;predict_proba&quot;</span>):</div>
<div class="line"><span class="lineno"> 3478</span> </div>
<div class="line"><span class="lineno"> 3479</span>        estimator.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 3480</span>        <span class="comment"># Since the link function from decision_function() to predict_proba()</span></div>
<div class="line"><span class="lineno"> 3481</span>        <span class="comment"># is sometimes not precise enough (typically expit), we round to the</span></div>
<div class="line"><span class="lineno"> 3482</span>        <span class="comment"># 10th decimal to avoid numerical issues: we compare the rank</span></div>
<div class="line"><span class="lineno"> 3483</span>        <span class="comment"># with deterministic ties rather than get platform specific rank</span></div>
<div class="line"><span class="lineno"> 3484</span>        <span class="comment"># inversions in case of machine level differences.</span></div>
<div class="line"><span class="lineno"> 3485</span>        a = estimator.predict_proba(X_test)[:, 1].round(decimals=10)</div>
<div class="line"><span class="lineno"> 3486</span>        b = estimator.decision_function(X_test).round(decimals=10)</div>
<div class="line"><span class="lineno"> 3487</span> </div>
<div class="line"><span class="lineno"> 3488</span>        rank_proba, rank_score = rankdata(a), rankdata(b)</div>
<div class="line"><span class="lineno"> 3489</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3490</span>            assert_array_almost_equal(rank_proba, rank_score)</div>
<div class="line"><span class="lineno"> 3491</span>        <span class="keywordflow">except</span> AssertionError:</div>
<div class="line"><span class="lineno"> 3492</span>            <span class="comment"># Sometimes, the rounding applied on the probabilities will have</span></div>
<div class="line"><span class="lineno"> 3493</span>            <span class="comment"># ties that are not present in the scores because it is</span></div>
<div class="line"><span class="lineno"> 3494</span>            <span class="comment"># numerically more precise. In this case, we relax the test by</span></div>
<div class="line"><span class="lineno"> 3495</span>            <span class="comment"># grouping the decision function scores based on the probability</span></div>
<div class="line"><span class="lineno"> 3496</span>            <span class="comment"># rank and check that the score is monotonically increasing.</span></div>
<div class="line"><span class="lineno"> 3497</span>            grouped_y_score = np.array(</div>
<div class="line"><span class="lineno"> 3498</span>                [b[rank_proba == group].mean() <span class="keywordflow">for</span> group <span class="keywordflow">in</span> np.unique(rank_proba)]</div>
<div class="line"><span class="lineno"> 3499</span>            )</div>
<div class="line"><span class="lineno"> 3500</span>            sorted_idx = np.argsort(grouped_y_score)</div>
<div class="line"><span class="lineno"> 3501</span>            assert_array_equal(sorted_idx, np.arange(len(sorted_idx)))</div>
<div class="line"><span class="lineno"> 3502</span> </div>
<div class="line"><span class="lineno"> 3503</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d3b68a87f87be599de02bf26ff6c4d8" name="a1d3b68a87f87be599de02bf26ff6c4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d3b68a87f87be599de02bf26ff6c4d8">&#9670;&#160;</a></span>check_dict_unchanged()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_dict_unchanged </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1182</span><span class="keyword">def </span>check_dict_unchanged(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1183</span>    <span class="comment"># this estimator raises</span></div>
<div class="line"><span class="lineno"> 1184</span>    <span class="comment"># ValueError: Found array with 0 feature(s) (shape=(23, 0))</span></div>
<div class="line"><span class="lineno"> 1185</span>    <span class="comment"># while a minimum of 1 is required.</span></div>
<div class="line"><span class="lineno"> 1186</span>    <span class="comment"># error</span></div>
<div class="line"><span class="lineno"> 1187</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;SpectralCoclustering&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1188</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1189</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1190</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;RANSACRegressor&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1191</span>        X = 3 * rnd.uniform(size=(20, 3))</div>
<div class="line"><span class="lineno"> 1192</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1193</span>        X = 2 * rnd.uniform(size=(20, 3))</div>
<div class="line"><span class="lineno"> 1194</span> </div>
<div class="line"><span class="lineno"> 1195</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1196</span> </div>
<div class="line"><span class="lineno"> 1197</span>    y = X[:, 0].astype(int)</div>
<div class="line"><span class="lineno"> 1198</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1199</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1200</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1201</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1202</span> </div>
<div class="line"><span class="lineno"> 1203</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1204</span>        estimator.n_clusters = 1</div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_best&quot;</span>):</div>
<div class="line"><span class="lineno"> 1207</span>        estimator.n_best = 1</div>
<div class="line"><span class="lineno"> 1208</span> </div>
<div class="line"><span class="lineno"> 1209</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1210</span> </div>
<div class="line"><span class="lineno"> 1211</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1212</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> [<span class="stringliteral">&quot;predict&quot;</span>, <span class="stringliteral">&quot;transform&quot;</span>, <span class="stringliteral">&quot;decision_function&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1213</span>        <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 1214</span>            dict_before = estimator.__dict__.copy()</div>
<div class="line"><span class="lineno"> 1215</span>            getattr(estimator, method)(X)</div>
<div class="line"><span class="lineno"> 1216</span>            <span class="keyword">assert</span> estimator.__dict__ == dict_before, (</div>
<div class="line"><span class="lineno"> 1217</span>                <span class="stringliteral">&quot;Estimator changes __dict__ during %s&quot;</span> % method</div>
<div class="line"><span class="lineno"> 1218</span>            )</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afa9f501957461dd5ab1abb8aa06e6b11" name="afa9f501957461dd5ab1abb8aa06e6b11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa9f501957461dd5ab1abb8aa06e6b11">&#9670;&#160;</a></span>check_dont_overwrite_parameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_dont_overwrite_parameters </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1226</span><span class="keyword">def </span>check_dont_overwrite_parameters(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1227</span>    <span class="comment"># check that fit method only changes or sets private attributes</span></div>
<div class="line"><span class="lineno"> 1228</span>    <span class="keywordflow">if</span> hasattr(estimator_orig.__init__, <span class="stringliteral">&quot;deprecated_original&quot;</span>):</div>
<div class="line"><span class="lineno"> 1229</span>        <span class="comment"># to not check deprecated classes</span></div>
<div class="line"><span class="lineno"> 1230</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1231</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1232</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1233</span>    X = 3 * rnd.uniform(size=(20, 3))</div>
<div class="line"><span class="lineno"> 1234</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1235</span>    y = X[:, 0].astype(int)</div>
<div class="line"><span class="lineno"> 1236</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1237</span> </div>
<div class="line"><span class="lineno"> 1238</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1239</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1240</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1241</span>        estimator.n_clusters = 1</div>
<div class="line"><span class="lineno"> 1242</span> </div>
<div class="line"><span class="lineno"> 1243</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1244</span>    dict_before_fit = estimator.__dict__.copy()</div>
<div class="line"><span class="lineno"> 1245</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1246</span> </div>
<div class="line"><span class="lineno"> 1247</span>    dict_after_fit = estimator.__dict__</div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span>    public_keys_after_fit = [</div>
<div class="line"><span class="lineno"> 1250</span>        key <span class="keywordflow">for</span> key <span class="keywordflow">in</span> dict_after_fit.keys() <span class="keywordflow">if</span> _is_public_parameter(key)</div>
<div class="line"><span class="lineno"> 1251</span>    ]</div>
<div class="line"><span class="lineno"> 1252</span> </div>
<div class="line"><span class="lineno"> 1253</span>    attrs_added_by_fit = [</div>
<div class="line"><span class="lineno"> 1254</span>        key <span class="keywordflow">for</span> key <span class="keywordflow">in</span> public_keys_after_fit <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> dict_before_fit.keys()</div>
<div class="line"><span class="lineno"> 1255</span>    ]</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>    <span class="comment"># check that fit doesn&#39;t add any public attribute</span></div>
<div class="line"><span class="lineno"> 1258</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> attrs_added_by_fit, (</div>
<div class="line"><span class="lineno"> 1259</span>        <span class="stringliteral">&quot;Estimator adds public attribute(s) during&quot;</span></div>
<div class="line"><span class="lineno"> 1260</span>        <span class="stringliteral">&quot; the fit method.&quot;</span></div>
<div class="line"><span class="lineno"> 1261</span>        <span class="stringliteral">&quot; Estimators are only allowed to add private attributes&quot;</span></div>
<div class="line"><span class="lineno"> 1262</span>        <span class="stringliteral">&quot; either started with _ or ended&quot;</span></div>
<div class="line"><span class="lineno"> 1263</span>        <span class="stringliteral">&quot; with _ but %s added&quot;</span></div>
<div class="line"><span class="lineno"> 1264</span>        % <span class="stringliteral">&quot;, &quot;</span>.join(attrs_added_by_fit)</div>
<div class="line"><span class="lineno"> 1265</span>    )</div>
<div class="line"><span class="lineno"> 1266</span> </div>
<div class="line"><span class="lineno"> 1267</span>    <span class="comment"># check that fit doesn&#39;t change any public attribute</span></div>
<div class="line"><span class="lineno"> 1268</span>    attrs_changed_by_fit = [</div>
<div class="line"><span class="lineno"> 1269</span>        key</div>
<div class="line"><span class="lineno"> 1270</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> public_keys_after_fit</div>
<div class="line"><span class="lineno"> 1271</span>        <span class="keywordflow">if</span> (dict_before_fit[key] <span class="keywordflow">is</span> <span class="keywordflow">not</span> dict_after_fit[key])</div>
<div class="line"><span class="lineno"> 1272</span>    ]</div>
<div class="line"><span class="lineno"> 1273</span> </div>
<div class="line"><span class="lineno"> 1274</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> attrs_changed_by_fit, (</div>
<div class="line"><span class="lineno"> 1275</span>        <span class="stringliteral">&quot;Estimator changes public attribute(s) during&quot;</span></div>
<div class="line"><span class="lineno"> 1276</span>        <span class="stringliteral">&quot; the fit method. Estimators are only allowed&quot;</span></div>
<div class="line"><span class="lineno"> 1277</span>        <span class="stringliteral">&quot; to change attributes started&quot;</span></div>
<div class="line"><span class="lineno"> 1278</span>        <span class="stringliteral">&quot; or ended with _, but&quot;</span></div>
<div class="line"><span class="lineno"> 1279</span>        <span class="stringliteral">&quot; %s changed&quot;</span></div>
<div class="line"><span class="lineno"> 1280</span>        % <span class="stringliteral">&quot;, &quot;</span>.join(attrs_changed_by_fit)</div>
<div class="line"><span class="lineno"> 1281</span>    )</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span> </div>
<div class="line"><span class="lineno"> 1284</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f6d52fc33a15a72d6912ca5a098ea77" name="a3f6d52fc33a15a72d6912ca5a098ea77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f6d52fc33a15a72d6912ca5a098ea77">&#9670;&#160;</a></span>check_dtype_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_dtype_object </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1134</span><span class="keyword">def </span>check_dtype_object(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1135</span>    <span class="comment"># check that estimators treat dtype object as numeric if possible</span></div>
<div class="line"><span class="lineno"> 1136</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1137</span>    X = _enforce_estimator_tags_X(estimator_orig, rng.uniform(size=(40, 10)))</div>
<div class="line"><span class="lineno"> 1138</span>    X = X.astype(object)</div>
<div class="line"><span class="lineno"> 1139</span>    tags = _safe_tags(estimator_orig)</div>
<div class="line"><span class="lineno"> 1140</span>    y = (X[:, 0] * 4).astype(int)</div>
<div class="line"><span class="lineno"> 1141</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1142</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1143</span> </div>
<div class="line"><span class="lineno"> 1144</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1145</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;predict&quot;</span>):</div>
<div class="line"><span class="lineno"> 1146</span>        estimator.predict(X)</div>
<div class="line"><span class="lineno"> 1147</span> </div>
<div class="line"><span class="lineno"> 1148</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;transform&quot;</span>):</div>
<div class="line"><span class="lineno"> 1149</span>        estimator.transform(X)</div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span>    <span class="keyword">with</span> raises(Exception, match=<span class="stringliteral">&quot;Unknown label type&quot;</span>, may_pass=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno"> 1152</span>        estimator.fit(X, y.astype(object))</div>
<div class="line"><span class="lineno"> 1153</span> </div>
<div class="line"><span class="lineno"> 1154</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;string&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1155</span>        X[0, 0] = {<span class="stringliteral">&quot;foo&quot;</span>: <span class="stringliteral">&quot;bar&quot;</span>}</div>
<div class="line"><span class="lineno"> 1156</span>        msg = <span class="stringliteral">&quot;argument must be a string.* number&quot;</span></div>
<div class="line"><span class="lineno"> 1157</span>        <span class="keyword">with</span> raises(TypeError, match=msg):</div>
<div class="line"><span class="lineno"> 1158</span>            estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1159</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1160</span>        <span class="comment"># Estimators supporting string will not call np.asarray to convert the</span></div>
<div class="line"><span class="lineno"> 1161</span>        <span class="comment"># data to numeric and therefore, the error will not be raised.</span></div>
<div class="line"><span class="lineno"> 1162</span>        <span class="comment"># Checking for each element dtype in the input array will be costly.</span></div>
<div class="line"><span class="lineno"> 1163</span>        <span class="comment"># Refer to #11401 for full discussion.</span></div>
<div class="line"><span class="lineno"> 1164</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1165</span> </div>
<div class="line"><span class="lineno"> 1166</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f62cc4cfc33a36d934074cfc7f00dac" name="a7f62cc4cfc33a36d934074cfc7f00dac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f62cc4cfc33a36d934074cfc7f00dac">&#9670;&#160;</a></span>check_estimator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>generate_only</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Estimator</em> = <code>&quot;deprecated&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check if estimator adheres to scikit-learn conventions.

This function will run an extensive test-suite for input validation,
shapes, etc, making sure that the estimator complies with `scikit-learn`
conventions as detailed in :ref:`rolling_your_own_estimator`.
Additional tests for classifiers, regressors, clustering or transformers
will be run if the Estimator class inherits from the corresponding mixin
from sklearn.base.

Setting `generate_only=True` returns a generator that yields (estimator,
check) tuples where the check can be called independently from each
other, i.e. `check(estimator)`. This allows all checks to be run
independently and report the checks that are failing.

scikit-learn provides a pytest specific decorator,
:func:`~sklearn.utils.parametrize_with_checks`, making it easier to test
multiple estimators.

Parameters
----------
estimator : estimator object
    Estimator instance to check.

    .. versionadded:: 1.1
       Passing a class was deprecated in version 0.23, and support for
       classes was removed in 0.24.

generate_only : bool, default=False
    When `False`, checks are evaluated when `check_estimator` is called.
    When `True`, `check_estimator` returns a generator that yields
    (estimator, check) tuples. The check is run by calling
    `check(estimator)`.

    .. versionadded:: 0.22

Estimator : estimator object
    Estimator instance to check.

    .. deprecated:: 1.1
        ``Estimator`` was deprecated in favor of ``estimator`` in version 1.1
        and will be removed in version 1.3.

Returns
-------
checks_generator : generator
    Generator that yields (estimator, check) tuples. Returned when
    `generate_only=True`.

See Also
--------
parametrize_with_checks : Pytest specific decorator for parametrizing estimator
    checks.
</pre> <div class="fragment"><div class="line"><span class="lineno">  547</span><span class="keyword">def </span>check_estimator(estimator=None, generate_only=False, Estimator=&quot;deprecated&quot;):</div>
<div class="line"><span class="lineno">  548</span>    <span class="stringliteral">&quot;&quot;&quot;Check if estimator adheres to scikit-learn conventions.</span></div>
<div class="line"><span class="lineno">  549</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  550</span><span class="stringliteral">    This function will run an extensive test-suite for input validation,</span></div>
<div class="line"><span class="lineno">  551</span><span class="stringliteral">    shapes, etc, making sure that the estimator complies with `scikit-learn`</span></div>
<div class="line"><span class="lineno">  552</span><span class="stringliteral">    conventions as detailed in :ref:`rolling_your_own_estimator`.</span></div>
<div class="line"><span class="lineno">  553</span><span class="stringliteral">    Additional tests for classifiers, regressors, clustering or transformers</span></div>
<div class="line"><span class="lineno">  554</span><span class="stringliteral">    will be run if the Estimator class inherits from the corresponding mixin</span></div>
<div class="line"><span class="lineno">  555</span><span class="stringliteral">    from sklearn.base.</span></div>
<div class="line"><span class="lineno">  556</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  557</span><span class="stringliteral">    Setting `generate_only=True` returns a generator that yields (estimator,</span></div>
<div class="line"><span class="lineno">  558</span><span class="stringliteral">    check) tuples where the check can be called independently from each</span></div>
<div class="line"><span class="lineno">  559</span><span class="stringliteral">    other, i.e. `check(estimator)`. This allows all checks to be run</span></div>
<div class="line"><span class="lineno">  560</span><span class="stringliteral">    independently and report the checks that are failing.</span></div>
<div class="line"><span class="lineno">  561</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  562</span><span class="stringliteral">    scikit-learn provides a pytest specific decorator,</span></div>
<div class="line"><span class="lineno">  563</span><span class="stringliteral">    :func:`~sklearn.utils.parametrize_with_checks`, making it easier to test</span></div>
<div class="line"><span class="lineno">  564</span><span class="stringliteral">    multiple estimators.</span></div>
<div class="line"><span class="lineno">  565</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  566</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  567</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  568</span><span class="stringliteral">    estimator : estimator object</span></div>
<div class="line"><span class="lineno">  569</span><span class="stringliteral">        Estimator instance to check.</span></div>
<div class="line"><span class="lineno">  570</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  571</span><span class="stringliteral">        .. versionadded:: 1.1</span></div>
<div class="line"><span class="lineno">  572</span><span class="stringliteral">           Passing a class was deprecated in version 0.23, and support for</span></div>
<div class="line"><span class="lineno">  573</span><span class="stringliteral">           classes was removed in 0.24.</span></div>
<div class="line"><span class="lineno">  574</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  575</span><span class="stringliteral">    generate_only : bool, default=False</span></div>
<div class="line"><span class="lineno">  576</span><span class="stringliteral">        When `False`, checks are evaluated when `check_estimator` is called.</span></div>
<div class="line"><span class="lineno">  577</span><span class="stringliteral">        When `True`, `check_estimator` returns a generator that yields</span></div>
<div class="line"><span class="lineno">  578</span><span class="stringliteral">        (estimator, check) tuples. The check is run by calling</span></div>
<div class="line"><span class="lineno">  579</span><span class="stringliteral">        `check(estimator)`.</span></div>
<div class="line"><span class="lineno">  580</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  581</span><span class="stringliteral">        .. versionadded:: 0.22</span></div>
<div class="line"><span class="lineno">  582</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  583</span><span class="stringliteral">    Estimator : estimator object</span></div>
<div class="line"><span class="lineno">  584</span><span class="stringliteral">        Estimator instance to check.</span></div>
<div class="line"><span class="lineno">  585</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  586</span><span class="stringliteral">        .. deprecated:: 1.1</span></div>
<div class="line"><span class="lineno">  587</span><span class="stringliteral">            ``Estimator`` was deprecated in favor of ``estimator`` in version 1.1</span></div>
<div class="line"><span class="lineno">  588</span><span class="stringliteral">            and will be removed in version 1.3.</span></div>
<div class="line"><span class="lineno">  589</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  590</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  591</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  592</span><span class="stringliteral">    checks_generator : generator</span></div>
<div class="line"><span class="lineno">  593</span><span class="stringliteral">        Generator that yields (estimator, check) tuples. Returned when</span></div>
<div class="line"><span class="lineno">  594</span><span class="stringliteral">        `generate_only=True`.</span></div>
<div class="line"><span class="lineno">  595</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  596</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  597</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  598</span><span class="stringliteral">    parametrize_with_checks : Pytest specific decorator for parametrizing estimator</span></div>
<div class="line"><span class="lineno">  599</span><span class="stringliteral">        checks.</span></div>
<div class="line"><span class="lineno">  600</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>    <span class="keywordflow">if</span> estimator <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> Estimator == <span class="stringliteral">&quot;deprecated&quot;</span>:</div>
<div class="line"><span class="lineno">  603</span>        msg = <span class="stringliteral">&quot;Either estimator or Estimator should be passed to check_estimator.&quot;</span></div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">raise</span> ValueError(msg)</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>    <span class="keywordflow">if</span> Estimator != <span class="stringliteral">&quot;deprecated&quot;</span>:</div>
<div class="line"><span class="lineno">  607</span>        msg = (</div>
<div class="line"><span class="lineno">  608</span>            <span class="stringliteral">&quot;&#39;Estimator&#39; was deprecated in favor of &#39;estimator&#39; in version 1.1 &quot;</span></div>
<div class="line"><span class="lineno">  609</span>            <span class="stringliteral">&quot;and will be removed in version 1.3.&quot;</span></div>
<div class="line"><span class="lineno">  610</span>        )</div>
<div class="line"><span class="lineno">  611</span>        warnings.warn(msg, FutureWarning)</div>
<div class="line"><span class="lineno">  612</span>        estimator = Estimator</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">if</span> isinstance(estimator, type):</div>
<div class="line"><span class="lineno">  614</span>        msg = (</div>
<div class="line"><span class="lineno">  615</span>            <span class="stringliteral">&quot;Passing a class was deprecated in version 0.23 &quot;</span></div>
<div class="line"><span class="lineno">  616</span>            <span class="stringliteral">&quot;and isn&#39;t supported anymore from 0.24.&quot;</span></div>
<div class="line"><span class="lineno">  617</span>            <span class="stringliteral">&quot;Please pass an instance instead.&quot;</span></div>
<div class="line"><span class="lineno">  618</span>        )</div>
<div class="line"><span class="lineno">  619</span>        <span class="keywordflow">raise</span> TypeError(msg)</div>
<div class="line"><span class="lineno">  620</span> </div>
<div class="line"><span class="lineno">  621</span>    name = type(estimator).__name__</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>    <span class="keyword">def </span>checks_generator():</div>
<div class="line"><span class="lineno">  624</span>        <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_all_checks(estimator):</div>
<div class="line"><span class="lineno">  625</span>            check = _maybe_skip(estimator, check)</div>
<div class="line"><span class="lineno">  626</span>            <span class="keywordflow">yield</span> estimator, partial(check, name)</div>
<div class="line"><span class="lineno">  627</span> </div>
<div class="line"><span class="lineno">  628</span>    <span class="keywordflow">if</span> generate_only:</div>
<div class="line"><span class="lineno">  629</span>        <span class="keywordflow">return</span> checks_generator()</div>
<div class="line"><span class="lineno">  630</span> </div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordflow">for</span> estimator, check <span class="keywordflow">in</span> checks_generator():</div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  633</span>            check(estimator)</div>
<div class="line"><span class="lineno">  634</span>        <span class="keywordflow">except</span> SkipTest <span class="keyword">as</span> exception:</div>
<div class="line"><span class="lineno">  635</span>            <span class="comment"># SkipTest is thrown when pandas can&#39;t be imported, or by checks</span></div>
<div class="line"><span class="lineno">  636</span>            <span class="comment"># that are in the xfail_checks tag</span></div>
<div class="line"><span class="lineno">  637</span>            warnings.warn(str(exception), SkipTestWarning)</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d440f562d50035ea8156193aaefc3f8" name="a4d440f562d50035ea8156193aaefc3f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d440f562d50035ea8156193aaefc3f8">&#9670;&#160;</a></span>check_estimator_get_tags_default_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimator_get_tags_default_keys </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3775</span><span class="keyword">def </span>check_estimator_get_tags_default_keys(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3776</span>    <span class="comment"># check that if _get_tags is implemented, it contains all keys from</span></div>
<div class="line"><span class="lineno"> 3777</span>    <span class="comment"># _DEFAULT_KEYS</span></div>
<div class="line"><span class="lineno"> 3778</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3779</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, <span class="stringliteral">&quot;_get_tags&quot;</span>):</div>
<div class="line"><span class="lineno"> 3780</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3781</span> </div>
<div class="line"><span class="lineno"> 3782</span>    tags_keys = set(estimator._get_tags().keys())</div>
<div class="line"><span class="lineno"> 3783</span>    default_tags_keys = set(_DEFAULT_TAGS.keys())</div>
<div class="line"><span class="lineno"> 3784</span>    <span class="keyword">assert</span> tags_keys.intersection(default_tags_keys) == default_tags_keys, (</div>
<div class="line"><span class="lineno"> 3785</span>        f<span class="stringliteral">&quot;{name}._get_tags() is missing entries for the following default tags&quot;</span></div>
<div class="line"><span class="lineno"> 3786</span>        f<span class="stringliteral">&quot;: {default_tags_keys - tags_keys.intersection(default_tags_keys)}&quot;</span></div>
<div class="line"><span class="lineno"> 3787</span>    )</div>
<div class="line"><span class="lineno"> 3788</span> </div>
<div class="line"><span class="lineno"> 3789</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5969642dc52df938b357f4d8cab0e471" name="a5969642dc52df938b357f4d8cab0e471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5969642dc52df938b357f4d8cab0e471">&#9670;&#160;</a></span>check_estimator_sparse_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimator_sparse_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  845</span><span class="keyword">def </span>check_estimator_sparse_data(name, estimator_orig):</div>
<div class="line"><span class="lineno">  846</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  847</span>    X = rng.uniform(size=(40, 3))</div>
<div class="line"><span class="lineno">  848</span>    X[X &lt; 0.8] = 0</div>
<div class="line"><span class="lineno">  849</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno">  850</span>    X_csr = sparse.csr_matrix(X)</div>
<div class="line"><span class="lineno">  851</span>    y = (4 * rng.uniform(size=40)).astype(int)</div>
<div class="line"><span class="lineno">  852</span>    <span class="comment"># catch deprecation warnings</span></div>
<div class="line"><span class="lineno">  853</span>    <span class="keyword">with</span> ignore_warnings(category=FutureWarning):</div>
<div class="line"><span class="lineno">  854</span>        estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno">  855</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno">  856</span>    tags = _safe_tags(estimator_orig)</div>
<div class="line"><span class="lineno">  857</span>    <span class="keywordflow">for</span> matrix_format, X <span class="keywordflow">in</span> _generate_sparse_matrix(X_csr):</div>
<div class="line"><span class="lineno">  858</span>        <span class="comment"># catch deprecation warnings</span></div>
<div class="line"><span class="lineno">  859</span>        <span class="keyword">with</span> ignore_warnings(category=FutureWarning):</div>
<div class="line"><span class="lineno">  860</span>            estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno">  861</span>            <span class="keywordflow">if</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;Scaler&quot;</span>, <span class="stringliteral">&quot;StandardScaler&quot;</span>]:</div>
<div class="line"><span class="lineno">  862</span>                estimator.set_params(with_mean=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  863</span>        <span class="comment"># fit and predict</span></div>
<div class="line"><span class="lineno">  864</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;64&quot;</span> <span class="keywordflow">in</span> matrix_format:</div>
<div class="line"><span class="lineno">  865</span>            err_msg = (</div>
<div class="line"><span class="lineno">  866</span>                f<span class="stringliteral">&quot;Estimator {name} doesn&#39;t seem to support {matrix_format} &quot;</span></div>
<div class="line"><span class="lineno">  867</span>                <span class="stringliteral">&quot;matrix, and is not failing gracefully, e.g. by using &quot;</span></div>
<div class="line"><span class="lineno">  868</span>                <span class="stringliteral">&quot;check_array(X, accept_large_sparse=False)&quot;</span></div>
<div class="line"><span class="lineno">  869</span>            )</div>
<div class="line"><span class="lineno">  870</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  871</span>            err_msg = (</div>
<div class="line"><span class="lineno">  872</span>                f<span class="stringliteral">&quot;Estimator {name} doesn&#39;t seem to fail gracefully on sparse &quot;</span></div>
<div class="line"><span class="lineno">  873</span>                <span class="stringliteral">&quot;data: error message should state explicitly that sparse &quot;</span></div>
<div class="line"><span class="lineno">  874</span>                <span class="stringliteral">&quot;input is not supported if this is not the case.&quot;</span></div>
<div class="line"><span class="lineno">  875</span>            )</div>
<div class="line"><span class="lineno">  876</span>        <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno">  877</span>            (TypeError, ValueError),</div>
<div class="line"><span class="lineno">  878</span>            match=[<span class="stringliteral">&quot;sparse&quot;</span>, <span class="stringliteral">&quot;Sparse&quot;</span>],</div>
<div class="line"><span class="lineno">  879</span>            may_pass=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  880</span>            err_msg=err_msg,</div>
<div class="line"><span class="lineno">  881</span>        ):</div>
<div class="line"><span class="lineno">  882</span>            <span class="keyword">with</span> ignore_warnings(category=FutureWarning):</div>
<div class="line"><span class="lineno">  883</span>                estimator.fit(X, y)</div>
<div class="line"><span class="lineno">  884</span>            <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;predict&quot;</span>):</div>
<div class="line"><span class="lineno">  885</span>                pred = estimator.predict(X)</div>
<div class="line"><span class="lineno">  886</span>                <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;multioutput_only&quot;</span>]:</div>
<div class="line"><span class="lineno">  887</span>                    <span class="keyword">assert</span> pred.shape == (X.shape[0], 1)</div>
<div class="line"><span class="lineno">  888</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  889</span>                    <span class="keyword">assert</span> pred.shape == (X.shape[0],)</div>
<div class="line"><span class="lineno">  890</span>            <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;predict_proba&quot;</span>):</div>
<div class="line"><span class="lineno">  891</span>                probs = estimator.predict_proba(X)</div>
<div class="line"><span class="lineno">  892</span>                <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;binary_only&quot;</span>]:</div>
<div class="line"><span class="lineno">  893</span>                    expected_probs_shape = (X.shape[0], 2)</div>
<div class="line"><span class="lineno">  894</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  895</span>                    expected_probs_shape = (X.shape[0], 4)</div>
<div class="line"><span class="lineno">  896</span>                <span class="keyword">assert</span> probs.shape == expected_probs_shape</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="abedbc5c184ee09c009bdc0fd0a8575e1" name="abedbc5c184ee09c009bdc0fd0a8575e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abedbc5c184ee09c009bdc0fd0a8575e1">&#9670;&#160;</a></span>check_estimators_data_not_an_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_data_not_an_array </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3116</span><span class="keyword">def </span>check_estimators_data_not_an_array(name, estimator_orig, X, y, obj_type):</div>
<div class="line"><span class="lineno"> 3117</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 3118</span>        <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno"> 3119</span>            <span class="stringliteral">&quot;Skipping check_estimators_data_not_an_array &quot;</span></div>
<div class="line"><span class="lineno"> 3120</span>            <span class="stringliteral">&quot;for cross decomposition module as estimators &quot;</span></div>
<div class="line"><span class="lineno"> 3121</span>            <span class="stringliteral">&quot;are not deterministic.&quot;</span></div>
<div class="line"><span class="lineno"> 3122</span>        )</div>
<div class="line"><span class="lineno"> 3123</span>    <span class="comment"># separate estimators to control random seeds</span></div>
<div class="line"><span class="lineno"> 3124</span>    estimator_1 = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3125</span>    estimator_2 = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3126</span>    set_random_state(estimator_1)</div>
<div class="line"><span class="lineno"> 3127</span>    set_random_state(estimator_2)</div>
<div class="line"><span class="lineno"> 3128</span> </div>
<div class="line"><span class="lineno"> 3129</span>    <span class="keywordflow">if</span> obj_type <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&quot;NotAnArray&quot;</span>, <span class="stringliteral">&quot;PandasDataframe&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3130</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Data type {0} not supported&quot;</span>.format(obj_type))</div>
<div class="line"><span class="lineno"> 3131</span> </div>
<div class="line"><span class="lineno"> 3132</span>    <span class="keywordflow">if</span> obj_type == <span class="stringliteral">&quot;NotAnArray&quot;</span>:</div>
<div class="line"><span class="lineno"> 3133</span>        y_ = _NotAnArray(np.asarray(y))</div>
<div class="line"><span class="lineno"> 3134</span>        X_ = _NotAnArray(np.asarray(X))</div>
<div class="line"><span class="lineno"> 3135</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3136</span>        <span class="comment"># Here pandas objects (Series and DataFrame) are tested explicitly</span></div>
<div class="line"><span class="lineno"> 3137</span>        <span class="comment"># because some estimators may handle them (especially their indexing)</span></div>
<div class="line"><span class="lineno"> 3138</span>        <span class="comment"># specially.</span></div>
<div class="line"><span class="lineno"> 3139</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3140</span>            <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><span class="lineno"> 3141</span> </div>
<div class="line"><span class="lineno"> 3142</span>            y_ = np.asarray(y)</div>
<div class="line"><span class="lineno"> 3143</span>            <span class="keywordflow">if</span> y_.ndim == 1:</div>
<div class="line"><span class="lineno"> 3144</span>                y_ = pd.Series(y_)</div>
<div class="line"><span class="lineno"> 3145</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3146</span>                y_ = pd.DataFrame(y_)</div>
<div class="line"><span class="lineno"> 3147</span>            X_ = pd.DataFrame(np.asarray(X))</div>
<div class="line"><span class="lineno"> 3148</span> </div>
<div class="line"><span class="lineno"> 3149</span>        <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno"> 3150</span>            <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno"> 3151</span>                <span class="stringliteral">&quot;pandas is not installed: not checking estimators for pandas objects.&quot;</span></div>
<div class="line"><span class="lineno"> 3152</span>            )</div>
<div class="line"><span class="lineno"> 3153</span> </div>
<div class="line"><span class="lineno"> 3154</span>    <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 3155</span>    estimator_1.fit(X_, y_)</div>
<div class="line"><span class="lineno"> 3156</span>    pred1 = estimator_1.predict(X_)</div>
<div class="line"><span class="lineno"> 3157</span>    estimator_2.fit(X, y)</div>
<div class="line"><span class="lineno"> 3158</span>    pred2 = estimator_2.predict(X)</div>
<div class="line"><span class="lineno"> 3159</span>    assert_allclose(pred1, pred2, atol=1e-2, err_msg=name)</div>
<div class="line"><span class="lineno"> 3160</span> </div>
<div class="line"><span class="lineno"> 3161</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6099b9c0fcd29c053b5524a28133ef62" name="a6099b9c0fcd29c053b5524a28133ef62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6099b9c0fcd29c053b5524a28133ef62">&#9670;&#160;</a></span>check_estimators_dtypes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_dtypes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1709</span><span class="keyword">def </span>check_estimators_dtypes(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1710</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1711</span>    X_train_32 = 3 * rnd.uniform(size=(20, 5)).astype(np.float32)</div>
<div class="line"><span class="lineno"> 1712</span>    X_train_32 = _enforce_estimator_tags_X(estimator_orig, X_train_32)</div>
<div class="line"><span class="lineno"> 1713</span>    X_train_64 = X_train_32.astype(np.float64)</div>
<div class="line"><span class="lineno"> 1714</span>    X_train_int_64 = X_train_32.astype(np.int64)</div>
<div class="line"><span class="lineno"> 1715</span>    X_train_int_32 = X_train_32.astype(np.int32)</div>
<div class="line"><span class="lineno"> 1716</span>    y = X_train_int_64[:, 0]</div>
<div class="line"><span class="lineno"> 1717</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 1718</span> </div>
<div class="line"><span class="lineno"> 1719</span>    methods = [<span class="stringliteral">&quot;predict&quot;</span>, <span class="stringliteral">&quot;transform&quot;</span>, <span class="stringliteral">&quot;decision_function&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>]</div>
<div class="line"><span class="lineno"> 1720</span> </div>
<div class="line"><span class="lineno"> 1721</span>    <span class="keywordflow">for</span> X_train <span class="keywordflow">in</span> [X_train_32, X_train_64, X_train_int_64, X_train_int_32]:</div>
<div class="line"><span class="lineno"> 1722</span>        estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1723</span>        set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1724</span>        estimator.fit(X_train, y)</div>
<div class="line"><span class="lineno"> 1725</span> </div>
<div class="line"><span class="lineno"> 1726</span>        <span class="keywordflow">for</span> method <span class="keywordflow">in</span> methods:</div>
<div class="line"><span class="lineno"> 1727</span>            <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 1728</span>                getattr(estimator, method)(X_train)</div>
<div class="line"><span class="lineno"> 1729</span> </div>
<div class="line"><span class="lineno"> 1730</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7804d9c40100bb4070586693cc0a7192" name="a7804d9c40100bb4070586693cc0a7192"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7804d9c40100bb4070586693cc0a7192">&#9670;&#160;</a></span>check_estimators_empty_data_messages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_empty_data_messages </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1764</span><span class="keyword">def </span>check_estimators_empty_data_messages(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1765</span>    e = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1766</span>    set_random_state(e, 1)</div>
<div class="line"><span class="lineno"> 1767</span> </div>
<div class="line"><span class="lineno"> 1768</span>    X_zero_samples = np.empty(0).reshape(0, 3)</div>
<div class="line"><span class="lineno"> 1769</span>    <span class="comment"># The precise message can change depending on whether X or y is</span></div>
<div class="line"><span class="lineno"> 1770</span>    <span class="comment"># validated first. Let us test the type of exception only:</span></div>
<div class="line"><span class="lineno"> 1771</span>    err_msg = (</div>
<div class="line"><span class="lineno"> 1772</span>        f<span class="stringliteral">&quot;The estimator {name} does not raise a ValueError when an &quot;</span></div>
<div class="line"><span class="lineno"> 1773</span>        <span class="stringliteral">&quot;empty data is used to train. Perhaps use check_array in train.&quot;</span></div>
<div class="line"><span class="lineno"> 1774</span>    )</div>
<div class="line"><span class="lineno"> 1775</span>    <span class="keyword">with</span> raises(ValueError, err_msg=err_msg):</div>
<div class="line"><span class="lineno"> 1776</span>        e.fit(X_zero_samples, [])</div>
<div class="line"><span class="lineno"> 1777</span> </div>
<div class="line"><span class="lineno"> 1778</span>    X_zero_features = np.empty(0).reshape(12, 0)</div>
<div class="line"><span class="lineno"> 1779</span>    <span class="comment"># the following y should be accepted by both classifiers and regressors</span></div>
<div class="line"><span class="lineno"> 1780</span>    <span class="comment"># and ignored by unsupervised models</span></div>
<div class="line"><span class="lineno"> 1781</span>    y = _enforce_estimator_tags_y(e, np.array([1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]))</div>
<div class="line"><span class="lineno"> 1782</span>    msg = <span class="stringliteral">r&quot;0 feature\&zwj;(s\&zwj;) \&zwj;(shape=\&zwj;(\d*, 0\&zwj;)\&zwj;) while a minimum of \d* &quot;</span> <span class="stringliteral">&quot;is required.&quot;</span></div>
<div class="line"><span class="lineno"> 1783</span>    <span class="keyword">with</span> raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 1784</span>        e.fit(X_zero_features, y)</div>
<div class="line"><span class="lineno"> 1785</span> </div>
<div class="line"><span class="lineno"> 1786</span> </div>
<div class="line"><span class="lineno"> 1787</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af48cb1a169f473441ee954f23d58bb30" name="af48cb1a169f473441ee954f23d58bb30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af48cb1a169f473441ee954f23d58bb30">&#9670;&#160;</a></span>check_estimators_fit_returns_self()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_fit_returns_self </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readonly_memmap</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check if self is returned when calling fit.</pre> <div class="fragment"><div class="line"><span class="lineno"> 2594</span><span class="keyword">def </span>check_estimators_fit_returns_self(name, estimator_orig, readonly_memmap=False):</div>
<div class="line"><span class="lineno"> 2595</span>    <span class="stringliteral">&quot;&quot;&quot;Check if self is returned when calling fit.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2596</span>    X, y = make_blobs(random_state=0, n_samples=21)</div>
<div class="line"><span class="lineno"> 2597</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 2598</span> </div>
<div class="line"><span class="lineno"> 2599</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 2600</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 2601</span> </div>
<div class="line"><span class="lineno"> 2602</span>    <span class="keywordflow">if</span> readonly_memmap:</div>
<div class="line"><span class="lineno"> 2603</span>        X, y = create_memmap_backed_data([X, y])</div>
<div class="line"><span class="lineno"> 2604</span> </div>
<div class="line"><span class="lineno"> 2605</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 2606</span>    <span class="keyword">assert</span> estimator.fit(X, y) <span class="keywordflow">is</span> estimator</div>
<div class="line"><span class="lineno"> 2607</span> </div>
<div class="line"><span class="lineno"> 2608</span> </div>
<div class="line"><span class="lineno"> 2609</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="abaef03b6902c6cd3737dc79b9310f303" name="abaef03b6902c6cd3737dc79b9310f303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaef03b6902c6cd3737dc79b9310f303">&#9670;&#160;</a></span>check_estimators_nan_inf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_nan_inf </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1788</span><span class="keyword">def </span>check_estimators_nan_inf(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1789</span>    <span class="comment"># Checks that Estimator X&#39;s do not contain NaN or inf.</span></div>
<div class="line"><span class="lineno"> 1790</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1791</span>    X_train_finite = _enforce_estimator_tags_X(</div>
<div class="line"><span class="lineno"> 1792</span>        estimator_orig, rnd.uniform(size=(10, 3))</div>
<div class="line"><span class="lineno"> 1793</span>    )</div>
<div class="line"><span class="lineno"> 1794</span>    X_train_nan = rnd.uniform(size=(10, 3))</div>
<div class="line"><span class="lineno"> 1795</span>    X_train_nan[0, 0] = np.nan</div>
<div class="line"><span class="lineno"> 1796</span>    X_train_inf = rnd.uniform(size=(10, 3))</div>
<div class="line"><span class="lineno"> 1797</span>    X_train_inf[0, 0] = np.inf</div>
<div class="line"><span class="lineno"> 1798</span>    y = np.ones(10)</div>
<div class="line"><span class="lineno"> 1799</span>    y[:5] = 0</div>
<div class="line"><span class="lineno"> 1800</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 1801</span>    error_string_fit = f<span class="stringliteral">&quot;Estimator {name} doesn&#39;t check for NaN and inf in fit.&quot;</span></div>
<div class="line"><span class="lineno"> 1802</span>    error_string_predict = f<span class="stringliteral">&quot;Estimator {name} doesn&#39;t check for NaN and inf in predict.&quot;</span></div>
<div class="line"><span class="lineno"> 1803</span>    error_string_transform = (</div>
<div class="line"><span class="lineno"> 1804</span>        f<span class="stringliteral">&quot;Estimator {name} doesn&#39;t check for NaN and inf in transform.&quot;</span></div>
<div class="line"><span class="lineno"> 1805</span>    )</div>
<div class="line"><span class="lineno"> 1806</span>    <span class="keywordflow">for</span> X_train <span class="keywordflow">in</span> [X_train_nan, X_train_inf]:</div>
<div class="line"><span class="lineno"> 1807</span>        <span class="comment"># catch deprecation warnings</span></div>
<div class="line"><span class="lineno"> 1808</span>        <span class="keyword">with</span> ignore_warnings(category=FutureWarning):</div>
<div class="line"><span class="lineno"> 1809</span>            estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1810</span>            set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1811</span>            <span class="comment"># try to fit</span></div>
<div class="line"><span class="lineno"> 1812</span>            <span class="keyword">with</span> raises(ValueError, match=[<span class="stringliteral">&quot;inf&quot;</span>, <span class="stringliteral">&quot;NaN&quot;</span>], err_msg=error_string_fit):</div>
<div class="line"><span class="lineno"> 1813</span>                estimator.fit(X_train, y)</div>
<div class="line"><span class="lineno"> 1814</span>            <span class="comment"># actually fit</span></div>
<div class="line"><span class="lineno"> 1815</span>            estimator.fit(X_train_finite, y)</div>
<div class="line"><span class="lineno"> 1816</span> </div>
<div class="line"><span class="lineno"> 1817</span>            <span class="comment"># predict</span></div>
<div class="line"><span class="lineno"> 1818</span>            <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;predict&quot;</span>):</div>
<div class="line"><span class="lineno"> 1819</span>                <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 1820</span>                    ValueError,</div>
<div class="line"><span class="lineno"> 1821</span>                    match=[<span class="stringliteral">&quot;inf&quot;</span>, <span class="stringliteral">&quot;NaN&quot;</span>],</div>
<div class="line"><span class="lineno"> 1822</span>                    err_msg=error_string_predict,</div>
<div class="line"><span class="lineno"> 1823</span>                ):</div>
<div class="line"><span class="lineno"> 1824</span>                    estimator.predict(X_train)</div>
<div class="line"><span class="lineno"> 1825</span> </div>
<div class="line"><span class="lineno"> 1826</span>            <span class="comment"># transform</span></div>
<div class="line"><span class="lineno"> 1827</span>            <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;transform&quot;</span>):</div>
<div class="line"><span class="lineno"> 1828</span>                <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 1829</span>                    ValueError,</div>
<div class="line"><span class="lineno"> 1830</span>                    match=[<span class="stringliteral">&quot;inf&quot;</span>, <span class="stringliteral">&quot;NaN&quot;</span>],</div>
<div class="line"><span class="lineno"> 1831</span>                    err_msg=error_string_transform,</div>
<div class="line"><span class="lineno"> 1832</span>                ):</div>
<div class="line"><span class="lineno"> 1833</span>                    estimator.transform(X_train)</div>
<div class="line"><span class="lineno"> 1834</span> </div>
<div class="line"><span class="lineno"> 1835</span> </div>
<div class="line"><span class="lineno"> 1836</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a191f96f78131ee8dfd3d7c01c6b24acd" name="a191f96f78131ee8dfd3d7c01c6b24acd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a191f96f78131ee8dfd3d7c01c6b24acd">&#9670;&#160;</a></span>check_estimators_overwrite_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_overwrite_params </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2977</span><span class="keyword">def </span>check_estimators_overwrite_params(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 2978</span>    X, y = make_blobs(random_state=0, n_samples=21)</div>
<div class="line"><span class="lineno"> 2979</span>    X = _enforce_estimator_tags_X(estimator_orig, X, kernel=rbf_kernel)</div>
<div class="line"><span class="lineno"> 2980</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 2981</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 2982</span> </div>
<div class="line"><span class="lineno"> 2983</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 2984</span> </div>
<div class="line"><span class="lineno"> 2985</span>    <span class="comment"># Make a physical copy of the original estimator parameters before fitting.</span></div>
<div class="line"><span class="lineno"> 2986</span>    params = estimator.get_params()</div>
<div class="line"><span class="lineno"> 2987</span>    original_params = deepcopy(params)</div>
<div class="line"><span class="lineno"> 2988</span> </div>
<div class="line"><span class="lineno"> 2989</span>    <span class="comment"># Fit the model</span></div>
<div class="line"><span class="lineno"> 2990</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 2991</span> </div>
<div class="line"><span class="lineno"> 2992</span>    <span class="comment"># Compare the state of the model parameters with the original parameters</span></div>
<div class="line"><span class="lineno"> 2993</span>    new_params = estimator.get_params()</div>
<div class="line"><span class="lineno"> 2994</span>    <span class="keywordflow">for</span> param_name, original_value <span class="keywordflow">in</span> original_params.items():</div>
<div class="line"><span class="lineno"> 2995</span>        new_value = new_params[param_name]</div>
<div class="line"><span class="lineno"> 2996</span> </div>
<div class="line"><span class="lineno"> 2997</span>        <span class="comment"># We should never change or mutate the internal state of input</span></div>
<div class="line"><span class="lineno"> 2998</span>        <span class="comment"># parameters by default. To check this we use the joblib.hash function</span></div>
<div class="line"><span class="lineno"> 2999</span>        <span class="comment"># that introspects recursively any subobjects to compute a checksum.</span></div>
<div class="line"><span class="lineno"> 3000</span>        <span class="comment"># The only exception to this rule of immutable constructor parameters</span></div>
<div class="line"><span class="lineno"> 3001</span>        <span class="comment"># is possible RandomState instance but in this check we explicitly</span></div>
<div class="line"><span class="lineno"> 3002</span>        <span class="comment"># fixed the random_state params recursively to be integer seeds.</span></div>
<div class="line"><span class="lineno"> 3003</span>        <span class="keyword">assert</span> joblib.hash(new_value) == joblib.hash(original_value), (</div>
<div class="line"><span class="lineno"> 3004</span>            <span class="stringliteral">&quot;Estimator %s should not change or mutate &quot;</span></div>
<div class="line"><span class="lineno"> 3005</span>            <span class="stringliteral">&quot; the parameter %s from %s to %s during fit.&quot;</span></div>
<div class="line"><span class="lineno"> 3006</span>            % (name, param_name, original_value, new_value)</div>
<div class="line"><span class="lineno"> 3007</span>        )</div>
<div class="line"><span class="lineno"> 3008</span> </div>
<div class="line"><span class="lineno"> 3009</span> </div>
<div class="line"><span class="lineno"> 3010</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7b871e9b92df65216d373298d5f2f78" name="aa7b871e9b92df65216d373298d5f2f78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b871e9b92df65216d373298d5f2f78">&#9670;&#160;</a></span>check_estimators_partial_fit_n_features()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_partial_fit_n_features </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1904</span><span class="keyword">def </span>check_estimators_partial_fit_n_features(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1905</span>    <span class="comment"># check if number of features changes between calls to partial_fit.</span></div>
<div class="line"><span class="lineno"> 1906</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator_orig, <span class="stringliteral">&quot;partial_fit&quot;</span>):</div>
<div class="line"><span class="lineno"> 1907</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1908</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1909</span>    X, y = make_blobs(n_samples=50, random_state=1)</div>
<div class="line"><span class="lineno"> 1910</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1911</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 1912</span> </div>
<div class="line"><span class="lineno"> 1913</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1914</span>        <span class="keywordflow">if</span> is_classifier(estimator):</div>
<div class="line"><span class="lineno"> 1915</span>            classes = np.unique(y)</div>
<div class="line"><span class="lineno"> 1916</span>            estimator.partial_fit(X, y, classes=classes)</div>
<div class="line"><span class="lineno"> 1917</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1918</span>            estimator.partial_fit(X, y)</div>
<div class="line"><span class="lineno"> 1919</span>    <span class="keywordflow">except</span> NotImplementedError:</div>
<div class="line"><span class="lineno"> 1920</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1921</span> </div>
<div class="line"><span class="lineno"> 1922</span>    <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 1923</span>        ValueError,</div>
<div class="line"><span class="lineno"> 1924</span>        err_msg=(</div>
<div class="line"><span class="lineno"> 1925</span>            f<span class="stringliteral">&quot;The estimator {name} does not raise an error when the &quot;</span></div>
<div class="line"><span class="lineno"> 1926</span>            <span class="stringliteral">&quot;number of features changes between calls to partial_fit.&quot;</span></div>
<div class="line"><span class="lineno"> 1927</span>        ),</div>
<div class="line"><span class="lineno"> 1928</span>    ):</div>
<div class="line"><span class="lineno"> 1929</span>        estimator.partial_fit(X[:, :-1], y)</div>
<div class="line"><span class="lineno"> 1930</span> </div>
<div class="line"><span class="lineno"> 1931</span> </div>
<div class="line"><span class="lineno"> 1932</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad66066db6cb4229e1a60b9f3e0bda8cf" name="ad66066db6cb4229e1a60b9f3e0bda8cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66066db6cb4229e1a60b9f3e0bda8cf">&#9670;&#160;</a></span>check_estimators_pickle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_pickle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that we can pickle all estimators.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1853</span><span class="keyword">def </span>check_estimators_pickle(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1854</span>    <span class="stringliteral">&quot;&quot;&quot;Test that we can pickle all estimators.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1855</span>    check_methods = [<span class="stringliteral">&quot;predict&quot;</span>, <span class="stringliteral">&quot;transform&quot;</span>, <span class="stringliteral">&quot;decision_function&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>]</div>
<div class="line"><span class="lineno"> 1856</span> </div>
<div class="line"><span class="lineno"> 1857</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 1858</span>        n_samples=30,</div>
<div class="line"><span class="lineno"> 1859</span>        centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 1860</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 1861</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 1862</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 1863</span>    )</div>
<div class="line"><span class="lineno"> 1864</span> </div>
<div class="line"><span class="lineno"> 1865</span>    X = _enforce_estimator_tags_X(estimator_orig, X, kernel=rbf_kernel)</div>
<div class="line"><span class="lineno"> 1866</span> </div>
<div class="line"><span class="lineno"> 1867</span>    tags = _safe_tags(estimator_orig)</div>
<div class="line"><span class="lineno"> 1868</span>    <span class="comment"># include NaN values when the estimator should deal with them</span></div>
<div class="line"><span class="lineno"> 1869</span>    <span class="keywordflow">if</span> tags[<span class="stringliteral">&quot;allow_nan&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1870</span>        <span class="comment"># set randomly 10 elements to np.nan</span></div>
<div class="line"><span class="lineno"> 1871</span>        rng = np.random.RandomState(42)</div>
<div class="line"><span class="lineno"> 1872</span>        mask = rng.choice(X.size, 10, replace=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1873</span>        X.reshape(-1)[mask] = np.nan</div>
<div class="line"><span class="lineno"> 1874</span> </div>
<div class="line"><span class="lineno"> 1875</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1876</span> </div>
<div class="line"><span class="lineno"> 1877</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1878</span> </div>
<div class="line"><span class="lineno"> 1879</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 1880</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1881</span> </div>
<div class="line"><span class="lineno"> 1882</span>    <span class="comment"># pickle and unpickle!</span></div>
<div class="line"><span class="lineno"> 1883</span>    pickled_estimator = pickle.dumps(estimator)</div>
<div class="line"><span class="lineno"> 1884</span>    module_name = estimator.__module__</div>
<div class="line"><span class="lineno"> 1885</span>    <span class="keywordflow">if</span> module_name.startswith(<span class="stringliteral">&quot;sklearn.&quot;</span>) <span class="keywordflow">and</span> <span class="keywordflow">not</span> (</div>
<div class="line"><span class="lineno"> 1886</span>        <span class="stringliteral">&quot;test_&quot;</span> <span class="keywordflow">in</span> module_name <span class="keywordflow">or</span> module_name.endswith(<span class="stringliteral">&quot;_testing&quot;</span>)</div>
<div class="line"><span class="lineno"> 1887</span>    ):</div>
<div class="line"><span class="lineno"> 1888</span>        <span class="comment"># strict check for sklearn estimators that are not implemented in test</span></div>
<div class="line"><span class="lineno"> 1889</span>        <span class="comment"># modules.</span></div>
<div class="line"><span class="lineno"> 1890</span>        <span class="keyword">assert</span> b<span class="stringliteral">&quot;version&quot;</span> <span class="keywordflow">in</span> pickled_estimator</div>
<div class="line"><span class="lineno"> 1891</span>    unpickled_estimator = pickle.loads(pickled_estimator)</div>
<div class="line"><span class="lineno"> 1892</span> </div>
<div class="line"><span class="lineno"> 1893</span>    result = dict()</div>
<div class="line"><span class="lineno"> 1894</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> check_methods:</div>
<div class="line"><span class="lineno"> 1895</span>        <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 1896</span>            result[method] = getattr(estimator, method)(X)</div>
<div class="line"><span class="lineno"> 1897</span> </div>
<div class="line"><span class="lineno"> 1898</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> result:</div>
<div class="line"><span class="lineno"> 1899</span>        unpickled_result = getattr(unpickled_estimator, method)(X)</div>
<div class="line"><span class="lineno"> 1900</span>        assert_allclose_dense_sparse(result[method], unpickled_result)</div>
<div class="line"><span class="lineno"> 1901</span> </div>
<div class="line"><span class="lineno"> 1902</span> </div>
<div class="line"><span class="lineno"> 1903</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea26b3b3a73b1da31356ca50dd6bcd52" name="aea26b3b3a73b1da31356ca50dd6bcd52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea26b3b3a73b1da31356ca50dd6bcd52">&#9670;&#160;</a></span>check_estimators_unfitted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_estimators_unfitted </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that predict raises an exception in an unfitted estimator.

Unfitted estimators should raise a NotFittedError.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 2610</span><span class="keyword">def </span>check_estimators_unfitted(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 2611</span>    <span class="stringliteral">&quot;&quot;&quot;Check that predict raises an exception in an unfitted estimator.</span></div>
<div class="line"><span class="lineno"> 2612</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2613</span><span class="stringliteral">    Unfitted estimators should raise a NotFittedError.</span></div>
<div class="line"><span class="lineno"> 2614</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2615</span>    <span class="comment"># Common test for Regressors, Classifiers and Outlier detection estimators</span></div>
<div class="line"><span class="lineno"> 2616</span>    X, y = _regression_dataset()</div>
<div class="line"><span class="lineno"> 2617</span> </div>
<div class="line"><span class="lineno"> 2618</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 2619</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno"> 2620</span>        <span class="stringliteral">&quot;decision_function&quot;</span>,</div>
<div class="line"><span class="lineno"> 2621</span>        <span class="stringliteral">&quot;predict&quot;</span>,</div>
<div class="line"><span class="lineno"> 2622</span>        <span class="stringliteral">&quot;predict_proba&quot;</span>,</div>
<div class="line"><span class="lineno"> 2623</span>        <span class="stringliteral">&quot;predict_log_proba&quot;</span>,</div>
<div class="line"><span class="lineno"> 2624</span>    ):</div>
<div class="line"><span class="lineno"> 2625</span>        <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 2626</span>            <span class="keyword">with</span> raises(NotFittedError):</div>
<div class="line"><span class="lineno"> 2627</span>                getattr(estimator, method)(X)</div>
<div class="line"><span class="lineno"> 2628</span> </div>
<div class="line"><span class="lineno"> 2629</span> </div>
<div class="line"><span class="lineno"> 2630</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7b414e51c6601191fdbc9710d74d49c" name="af7b414e51c6601191fdbc9710d74d49c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b414e51c6601191fdbc9710d74d49c">&#9670;&#160;</a></span>check_fit1d()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit1d </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1482</span><span class="keyword">def </span>check_fit1d(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1483</span>    <span class="comment"># check fitting 1d X array raises a ValueError</span></div>
<div class="line"><span class="lineno"> 1484</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1485</span>    X = 3 * rnd.uniform(size=(20))</div>
<div class="line"><span class="lineno"> 1486</span>    y = X.astype(int)</div>
<div class="line"><span class="lineno"> 1487</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1488</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1489</span> </div>
<div class="line"><span class="lineno"> 1490</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1491</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1492</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1493</span>        estimator.n_clusters = 1</div>
<div class="line"><span class="lineno"> 1494</span> </div>
<div class="line"><span class="lineno"> 1495</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1496</span>    <span class="keyword">with</span> raises(ValueError):</div>
<div class="line"><span class="lineno"> 1497</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1498</span> </div>
<div class="line"><span class="lineno"> 1499</span> </div>
<div class="line"><span class="lineno"> 1500</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e0a778bda543caed104dd8f4c7b7995" name="a9e0a778bda543caed104dd8f4c7b7995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e0a778bda543caed104dd8f4c7b7995">&#9670;&#160;</a></span>check_fit2d_1feature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit2d_1feature </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1451</span><span class="keyword">def </span>check_fit2d_1feature(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1452</span>    <span class="comment"># check fitting a 2d array with only 1 feature either works or returns</span></div>
<div class="line"><span class="lineno"> 1453</span>    <span class="comment"># informative message</span></div>
<div class="line"><span class="lineno"> 1454</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1455</span>    X = 3 * rnd.uniform(size=(10, 1))</div>
<div class="line"><span class="lineno"> 1456</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1457</span>    y = X[:, 0].astype(int)</div>
<div class="line"><span class="lineno"> 1458</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1459</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1460</span> </div>
<div class="line"><span class="lineno"> 1461</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1462</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1463</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1464</span>        estimator.n_clusters = 1</div>
<div class="line"><span class="lineno"> 1465</span>    <span class="comment"># ensure two labels in subsample for RandomizedLogisticRegression</span></div>
<div class="line"><span class="lineno"> 1466</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;RandomizedLogisticRegression&quot;</span>:</div>
<div class="line"><span class="lineno"> 1467</span>        estimator.sample_fraction = 1</div>
<div class="line"><span class="lineno"> 1468</span>    <span class="comment"># ensure non skipped trials for RANSACRegressor</span></div>
<div class="line"><span class="lineno"> 1469</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;RANSACRegressor&quot;</span>:</div>
<div class="line"><span class="lineno"> 1470</span>        estimator.residual_threshold = 0.5</div>
<div class="line"><span class="lineno"> 1471</span> </div>
<div class="line"><span class="lineno"> 1472</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1473</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1474</span> </div>
<div class="line"><span class="lineno"> 1475</span>    msgs = [<span class="stringliteral">r&quot;1 feature\&zwj;(s\&zwj;)&quot;</span>, <span class="stringliteral">&quot;n_features = 1&quot;</span>, <span class="stringliteral">&quot;n_features=1&quot;</span>]</div>
<div class="line"><span class="lineno"> 1476</span> </div>
<div class="line"><span class="lineno"> 1477</span>    <span class="keyword">with</span> raises(ValueError, match=msgs, may_pass=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno"> 1478</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1479</span> </div>
<div class="line"><span class="lineno"> 1480</span> </div>
<div class="line"><span class="lineno"> 1481</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ec5a87af607e0b8036b4fa4e8e39f73" name="a0ec5a87af607e0b8036b4fa4e8e39f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ec5a87af607e0b8036b4fa4e8e39f73">&#9670;&#160;</a></span>check_fit2d_1sample()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit2d_1sample </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1410</span><span class="keyword">def </span>check_fit2d_1sample(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1411</span>    <span class="comment"># Check that fitting a 2d array with only one sample either works or</span></div>
<div class="line"><span class="lineno"> 1412</span>    <span class="comment"># returns an informative message. The error message should either mention</span></div>
<div class="line"><span class="lineno"> 1413</span>    <span class="comment"># the number of samples or the number of classes.</span></div>
<div class="line"><span class="lineno"> 1414</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1415</span>    X = 3 * rnd.uniform(size=(1, 10))</div>
<div class="line"><span class="lineno"> 1416</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1417</span> </div>
<div class="line"><span class="lineno"> 1418</span>    y = X[:, 0].astype(int)</div>
<div class="line"><span class="lineno"> 1419</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1420</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1421</span> </div>
<div class="line"><span class="lineno"> 1422</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1423</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1424</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1425</span>        estimator.n_clusters = 1</div>
<div class="line"><span class="lineno"> 1426</span> </div>
<div class="line"><span class="lineno"> 1427</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1428</span> </div>
<div class="line"><span class="lineno"> 1429</span>    <span class="comment"># min_cluster_size cannot be less than the data size for OPTICS.</span></div>
<div class="line"><span class="lineno"> 1430</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;OPTICS&quot;</span>:</div>
<div class="line"><span class="lineno"> 1431</span>        estimator.set_params(min_samples=1)</div>
<div class="line"><span class="lineno"> 1432</span> </div>
<div class="line"><span class="lineno"> 1433</span>    <span class="comment"># perplexity cannot be more than the number of samples for TSNE.</span></div>
<div class="line"><span class="lineno"> 1434</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;TSNE&quot;</span>:</div>
<div class="line"><span class="lineno"> 1435</span>        estimator.set_params(perplexity=0.5)</div>
<div class="line"><span class="lineno"> 1436</span> </div>
<div class="line"><span class="lineno"> 1437</span>    msgs = [</div>
<div class="line"><span class="lineno"> 1438</span>        <span class="stringliteral">&quot;1 sample&quot;</span>,</div>
<div class="line"><span class="lineno"> 1439</span>        <span class="stringliteral">&quot;n_samples = 1&quot;</span>,</div>
<div class="line"><span class="lineno"> 1440</span>        <span class="stringliteral">&quot;n_samples=1&quot;</span>,</div>
<div class="line"><span class="lineno"> 1441</span>        <span class="stringliteral">&quot;one sample&quot;</span>,</div>
<div class="line"><span class="lineno"> 1442</span>        <span class="stringliteral">&quot;1 class&quot;</span>,</div>
<div class="line"><span class="lineno"> 1443</span>        <span class="stringliteral">&quot;one class&quot;</span>,</div>
<div class="line"><span class="lineno"> 1444</span>    ]</div>
<div class="line"><span class="lineno"> 1445</span> </div>
<div class="line"><span class="lineno"> 1446</span>    <span class="keyword">with</span> raises(ValueError, match=msgs, may_pass=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno"> 1447</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span> </div>
<div class="line"><span class="lineno"> 1450</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad23d8f00e3d36dc0ec58012bc4920d49" name="ad23d8f00e3d36dc0ec58012bc4920d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad23d8f00e3d36dc0ec58012bc4920d49">&#9670;&#160;</a></span>check_fit2d_predict1d()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit2d_predict1d </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1285</span><span class="keyword">def </span>check_fit2d_predict1d(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1286</span>    <span class="comment"># check by fitting a 2d array and predicting with a 1d array</span></div>
<div class="line"><span class="lineno"> 1287</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1288</span>    X = 3 * rnd.uniform(size=(20, 3))</div>
<div class="line"><span class="lineno"> 1289</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1290</span>    y = X[:, 0].astype(int)</div>
<div class="line"><span class="lineno"> 1291</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1292</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1295</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1296</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1297</span>        estimator.n_clusters = 1</div>
<div class="line"><span class="lineno"> 1298</span> </div>
<div class="line"><span class="lineno"> 1299</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1300</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> [<span class="stringliteral">&quot;predict&quot;</span>, <span class="stringliteral">&quot;transform&quot;</span>, <span class="stringliteral">&quot;decision_function&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1303</span>        <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 1304</span>            assert_raise_message(</div>
<div class="line"><span class="lineno"> 1305</span>                ValueError, <span class="stringliteral">&quot;Reshape your data&quot;</span>, getattr(estimator, method), X[0]</div>
<div class="line"><span class="lineno"> 1306</span>            )</div>
<div class="line"><span class="lineno"> 1307</span> </div>
<div class="line"><span class="lineno"> 1308</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afa71598fe32f94ccb50acb92baa8f7d2" name="afa71598fe32f94ccb50acb92baa8f7d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa71598fe32f94ccb50acb92baa8f7d2">&#9670;&#160;</a></span>check_fit_check_is_fitted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit_check_is_fitted </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3615</span><span class="keyword">def </span>check_fit_check_is_fitted(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3616</span>    <span class="comment"># Make sure that estimator doesn&#39;t pass check_is_fitted before calling fit</span></div>
<div class="line"><span class="lineno"> 3617</span>    <span class="comment"># and that passes check_is_fitted once it&#39;s fit.</span></div>
<div class="line"><span class="lineno"> 3618</span> </div>
<div class="line"><span class="lineno"> 3619</span>    rng = np.random.RandomState(42)</div>
<div class="line"><span class="lineno"> 3620</span> </div>
<div class="line"><span class="lineno"> 3621</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3622</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3623</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;warm_start&quot;</span> <span class="keywordflow">in</span> estimator.get_params():</div>
<div class="line"><span class="lineno"> 3624</span>        estimator.set_params(warm_start=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3625</span> </div>
<div class="line"><span class="lineno"> 3626</span>    n_samples = 100</div>
<div class="line"><span class="lineno"> 3627</span>    X = rng.normal(loc=100, size=(n_samples, 2))</div>
<div class="line"><span class="lineno"> 3628</span>    X = _enforce_estimator_tags_X(estimator, X)</div>
<div class="line"><span class="lineno"> 3629</span>    <span class="keywordflow">if</span> is_regressor(estimator_orig):</div>
<div class="line"><span class="lineno"> 3630</span>        y = rng.normal(size=n_samples)</div>
<div class="line"><span class="lineno"> 3631</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3632</span>        y = rng.randint(low=0, high=2, size=n_samples)</div>
<div class="line"><span class="lineno"> 3633</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 3634</span> </div>
<div class="line"><span class="lineno"> 3635</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> _safe_tags(estimator).get(<span class="stringliteral">&quot;stateless&quot;</span>, <span class="keyword">False</span>):</div>
<div class="line"><span class="lineno"> 3636</span>        <span class="comment"># stateless estimators (such as FunctionTransformer) are always &quot;fit&quot;!</span></div>
<div class="line"><span class="lineno"> 3637</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3638</span>            check_is_fitted(estimator)</div>
<div class="line"><span class="lineno"> 3639</span>            <span class="keywordflow">raise</span> AssertionError(</div>
<div class="line"><span class="lineno"> 3640</span>                f<span class="stringliteral">&quot;{estimator.__class__.__name__} passes check_is_fitted before being&quot;</span></div>
<div class="line"><span class="lineno"> 3641</span>                <span class="stringliteral">&quot; fit!&quot;</span></div>
<div class="line"><span class="lineno"> 3642</span>            )</div>
<div class="line"><span class="lineno"> 3643</span>        <span class="keywordflow">except</span> NotFittedError:</div>
<div class="line"><span class="lineno"> 3644</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 3645</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 3646</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3647</span>        check_is_fitted(estimator)</div>
<div class="line"><span class="lineno"> 3648</span>    <span class="keywordflow">except</span> NotFittedError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno"> 3649</span>        <span class="keywordflow">raise</span> NotFittedError(</div>
<div class="line"><span class="lineno"> 3650</span>            <span class="stringliteral">&quot;Estimator fails to pass `check_is_fitted` even though it has been fit.&quot;</span></div>
<div class="line"><span class="lineno"> 3651</span>        ) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno"> 3652</span> </div>
<div class="line"><span class="lineno"> 3653</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fe2e631f8b19a4d3eb6a6f7cac03777" name="a9fe2e631f8b19a4d3eb6a6f7cac03777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fe2e631f8b19a4d3eb6a6f7cac03777">&#9670;&#160;</a></span>check_fit_idempotent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit_idempotent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3557</span><span class="keyword">def </span>check_fit_idempotent(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3558</span>    <span class="comment"># Check that est.fit(X) is the same as est.fit(X).fit(X). Ideally we would</span></div>
<div class="line"><span class="lineno"> 3559</span>    <span class="comment"># check that the estimated parameters during training (e.g. coefs_) are</span></div>
<div class="line"><span class="lineno"> 3560</span>    <span class="comment"># the same, but having a universal comparison function for those</span></div>
<div class="line"><span class="lineno"> 3561</span>    <span class="comment"># attributes is difficult and full of edge cases. So instead we check that</span></div>
<div class="line"><span class="lineno"> 3562</span>    <span class="comment"># predict(), predict_proba(), decision_function() and transform() return</span></div>
<div class="line"><span class="lineno"> 3563</span>    <span class="comment"># the same results.</span></div>
<div class="line"><span class="lineno"> 3564</span> </div>
<div class="line"><span class="lineno"> 3565</span>    check_methods = [<span class="stringliteral">&quot;predict&quot;</span>, <span class="stringliteral">&quot;transform&quot;</span>, <span class="stringliteral">&quot;decision_function&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>]</div>
<div class="line"><span class="lineno"> 3566</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 3567</span> </div>
<div class="line"><span class="lineno"> 3568</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3569</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3570</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;warm_start&quot;</span> <span class="keywordflow">in</span> estimator.get_params().keys():</div>
<div class="line"><span class="lineno"> 3571</span>        estimator.set_params(warm_start=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3572</span> </div>
<div class="line"><span class="lineno"> 3573</span>    n_samples = 100</div>
<div class="line"><span class="lineno"> 3574</span>    X = rng.normal(loc=100, size=(n_samples, 2))</div>
<div class="line"><span class="lineno"> 3575</span>    X = _enforce_estimator_tags_X(estimator, X)</div>
<div class="line"><span class="lineno"> 3576</span>    <span class="keywordflow">if</span> is_regressor(estimator_orig):</div>
<div class="line"><span class="lineno"> 3577</span>        y = rng.normal(size=n_samples)</div>
<div class="line"><span class="lineno"> 3578</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3579</span>        y = rng.randint(low=0, high=2, size=n_samples)</div>
<div class="line"><span class="lineno"> 3580</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 3581</span> </div>
<div class="line"><span class="lineno"> 3582</span>    train, test = next(ShuffleSplit(test_size=0.2, random_state=rng).split(X))</div>
<div class="line"><span class="lineno"> 3583</span>    X_train, y_train = _safe_split(estimator, X, y, train)</div>
<div class="line"><span class="lineno"> 3584</span>    X_test, y_test = _safe_split(estimator, X, y, test, train)</div>
<div class="line"><span class="lineno"> 3585</span> </div>
<div class="line"><span class="lineno"> 3586</span>    <span class="comment"># Fit for the first time</span></div>
<div class="line"><span class="lineno"> 3587</span>    estimator.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 3588</span> </div>
<div class="line"><span class="lineno"> 3589</span>    result = {</div>
<div class="line"><span class="lineno"> 3590</span>        method: getattr(estimator, method)(X_test)</div>
<div class="line"><span class="lineno"> 3591</span>        <span class="keywordflow">for</span> method <span class="keywordflow">in</span> check_methods</div>
<div class="line"><span class="lineno"> 3592</span>        <span class="keywordflow">if</span> hasattr(estimator, method)</div>
<div class="line"><span class="lineno"> 3593</span>    }</div>
<div class="line"><span class="lineno"> 3594</span> </div>
<div class="line"><span class="lineno"> 3595</span>    <span class="comment"># Fit again</span></div>
<div class="line"><span class="lineno"> 3596</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3597</span>    estimator.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 3598</span> </div>
<div class="line"><span class="lineno"> 3599</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> check_methods:</div>
<div class="line"><span class="lineno"> 3600</span>        <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 3601</span>            new_result = getattr(estimator, method)(X_test)</div>
<div class="line"><span class="lineno"> 3602</span>            <span class="keywordflow">if</span> np.issubdtype(new_result.dtype, np.floating):</div>
<div class="line"><span class="lineno"> 3603</span>                tol = 2 * np.finfo(new_result.dtype).eps</div>
<div class="line"><span class="lineno"> 3604</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3605</span>                tol = 2 * np.finfo(np.float64).eps</div>
<div class="line"><span class="lineno"> 3606</span>            assert_allclose_dense_sparse(</div>
<div class="line"><span class="lineno"> 3607</span>                result[method],</div>
<div class="line"><span class="lineno"> 3608</span>                new_result,</div>
<div class="line"><span class="lineno"> 3609</span>                atol=max(tol, 1e-9),</div>
<div class="line"><span class="lineno"> 3610</span>                rtol=max(tol, 1e-7),</div>
<div class="line"><span class="lineno"> 3611</span>                err_msg=<span class="stringliteral">&quot;Idempotency check failed for method {}&quot;</span>.format(method),</div>
<div class="line"><span class="lineno"> 3612</span>            )</div>
<div class="line"><span class="lineno"> 3613</span> </div>
<div class="line"><span class="lineno"> 3614</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af7c87e8535c30e1f39af48fbcbeb0f08" name="af7c87e8535c30e1f39af48fbcbeb0f08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7c87e8535c30e1f39af48fbcbeb0f08">&#9670;&#160;</a></span>check_fit_non_negative()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit_non_negative </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3547</span><span class="keyword">def </span>check_fit_non_negative(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3548</span>    <span class="comment"># Check that proper warning is raised for non-negative X</span></div>
<div class="line"><span class="lineno"> 3549</span>    <span class="comment"># when tag requires_positive_X is present</span></div>
<div class="line"><span class="lineno"> 3550</span>    X = np.array([[-1.0, 1], [-1.0, 1]])</div>
<div class="line"><span class="lineno"> 3551</span>    y = np.array([1, 2])</div>
<div class="line"><span class="lineno"> 3552</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3553</span>    <span class="keyword">with</span> raises(ValueError):</div>
<div class="line"><span class="lineno"> 3554</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 3555</span> </div>
<div class="line"><span class="lineno"> 3556</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae012cc404c13404dd4b438d9c0870052" name="ae012cc404c13404dd4b438d9c0870052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae012cc404c13404dd4b438d9c0870052">&#9670;&#160;</a></span>check_fit_score_takes_y()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_fit_score_takes_y </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1679</span><span class="keyword">def </span>check_fit_score_takes_y(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1680</span>    <span class="comment"># check that all estimators accept an optional y</span></div>
<div class="line"><span class="lineno"> 1681</span>    <span class="comment"># in fit and score so they can be used in pipelines</span></div>
<div class="line"><span class="lineno"> 1682</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1683</span>    n_samples = 30</div>
<div class="line"><span class="lineno"> 1684</span>    X = rnd.uniform(size=(n_samples, 3))</div>
<div class="line"><span class="lineno"> 1685</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1686</span>    y = np.arange(n_samples) % 3</div>
<div class="line"><span class="lineno"> 1687</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1688</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1689</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 1690</span> </div>
<div class="line"><span class="lineno"> 1691</span>    funcs = [<span class="stringliteral">&quot;fit&quot;</span>, <span class="stringliteral">&quot;score&quot;</span>, <span class="stringliteral">&quot;partial_fit&quot;</span>, <span class="stringliteral">&quot;fit_predict&quot;</span>, <span class="stringliteral">&quot;fit_transform&quot;</span>]</div>
<div class="line"><span class="lineno"> 1692</span>    <span class="keywordflow">for</span> func_name <span class="keywordflow">in</span> funcs:</div>
<div class="line"><span class="lineno"> 1693</span>        func = getattr(estimator, func_name, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1694</span>        <span class="keywordflow">if</span> func <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1695</span>            <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(X, y)</div>
<div class="line"><span class="lineno"> 1696</span>            args = [p.name <span class="keywordflow">for</span> p <span class="keywordflow">in</span> signature(func).parameters.values()]</div>
<div class="line"><span class="lineno"> 1697</span>            <span class="keywordflow">if</span> args[0] == <span class="stringliteral">&quot;self&quot;</span>:</div>
<div class="line"><span class="lineno"> 1698</span>                <span class="comment"># if_delegate_has_method makes methods into functions</span></div>
<div class="line"><span class="lineno"> 1699</span>                <span class="comment"># with an explicit &quot;self&quot;, so need to shift arguments</span></div>
<div class="line"><span class="lineno"> 1700</span>                args = args[1:]</div>
<div class="line"><span class="lineno"> 1701</span>            <span class="keyword">assert</span> args[1] <span class="keywordflow">in</span> [<span class="stringliteral">&quot;y&quot;</span>, <span class="stringliteral">&quot;Y&quot;</span>], (</div>
<div class="line"><span class="lineno"> 1702</span>                <span class="stringliteral">&quot;Expected y or Y as second argument for method &quot;</span></div>
<div class="line"><span class="lineno"> 1703</span>                <span class="stringliteral">&quot;%s of %s. Got arguments: %r.&quot;</span></div>
<div class="line"><span class="lineno"> 1704</span>                % (func_name, type(estimator).__name__, args)</div>
<div class="line"><span class="lineno"> 1705</span>            )</div>
<div class="line"><span class="lineno"> 1706</span> </div>
<div class="line"><span class="lineno"> 1707</span> </div>
<div class="line"><span class="lineno"> 1708</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18eeb414a6451a46f7c8ff43e4007e6c" name="a18eeb414a6451a46f7c8ff43e4007e6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18eeb414a6451a46f7c8ff43e4007e6c">&#9670;&#160;</a></span>check_get_params_invariance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_get_params_invariance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3377</span><span class="keyword">def </span>check_get_params_invariance(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3378</span>    <span class="comment"># Checks if get_params(deep=False) is a subset of get_params(deep=True)</span></div>
<div class="line"><span class="lineno"> 3379</span>    e = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3380</span> </div>
<div class="line"><span class="lineno"> 3381</span>    shallow_params = e.get_params(deep=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3382</span>    deep_params = e.get_params(deep=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 3383</span> </div>
<div class="line"><span class="lineno"> 3384</span>    <span class="keyword">assert</span> all(item <span class="keywordflow">in</span> deep_params.items() <span class="keywordflow">for</span> item <span class="keywordflow">in</span> shallow_params.items())</div>
<div class="line"><span class="lineno"> 3385</span> </div>
<div class="line"><span class="lineno"> 3386</span> </div>
<div class="line"><span class="lineno"> 3387</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a39314947077c51b891f0d30cd70d0286" name="a39314947077c51b891f0d30cd70d0286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39314947077c51b891f0d30cd70d0286">&#9670;&#160;</a></span>check_global_ouptut_transform_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_global_ouptut_transform_pandas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that setting globally the output of a transformer to pandas lead to the
right results.</pre> <div class="fragment"><div class="line"><span class="lineno"> 4274</span><span class="keyword">def </span>check_global_ouptut_transform_pandas(name, transformer_orig):</div>
<div class="line"><span class="lineno"> 4275</span>    <span class="stringliteral">&quot;&quot;&quot;Check that setting globally the output of a transformer to pandas lead to the</span></div>
<div class="line"><span class="lineno"> 4276</span><span class="stringliteral">    right results.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 4277</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 4278</span>        <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><span class="lineno"> 4279</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno"> 4280</span>        <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno"> 4281</span>            <span class="stringliteral">&quot;pandas is not installed: not checking column name consistency for pandas&quot;</span></div>
<div class="line"><span class="lineno"> 4282</span>        )</div>
<div class="line"><span class="lineno"> 4283</span> </div>
<div class="line"><span class="lineno"> 4284</span>    tags = transformer_orig._get_tags()</div>
<div class="line"><span class="lineno"> 4285</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>] <span class="keywordflow">or</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 4286</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 4287</span> </div>
<div class="line"><span class="lineno"> 4288</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 4289</span>    transformer = clone(transformer_orig)</div>
<div class="line"><span class="lineno"> 4290</span> </div>
<div class="line"><span class="lineno"> 4291</span>    X = rng.uniform(size=(20, 5))</div>
<div class="line"><span class="lineno"> 4292</span>    X = _enforce_estimator_tags_X(transformer_orig, X)</div>
<div class="line"><span class="lineno"> 4293</span>    y = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno"> 4294</span>    y = _enforce_estimator_tags_y(transformer_orig, y)</div>
<div class="line"><span class="lineno"> 4295</span>    set_random_state(transformer)</div>
<div class="line"><span class="lineno"> 4296</span> </div>
<div class="line"><span class="lineno"> 4297</span>    feature_names_in = [f<span class="stringliteral">&quot;col{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(X.shape[1])]</div>
<div class="line"><span class="lineno"> 4298</span>    df = pd.DataFrame(X, columns=feature_names_in)</div>
<div class="line"><span class="lineno"> 4299</span> </div>
<div class="line"><span class="lineno"> 4300</span>    transformer_default = clone(transformer).set_output(transform=<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><span class="lineno"> 4301</span>    outputs_default = _output_from_fit_transform(transformer_default, name, X, df, y)</div>
<div class="line"><span class="lineno"> 4302</span>    transformer_pandas = clone(transformer)</div>
<div class="line"><span class="lineno"> 4303</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 4304</span>        <span class="keyword">with</span> config_context(transform_output=<span class="stringliteral">&quot;pandas&quot;</span>):</div>
<div class="line"><span class="lineno"> 4305</span>            outputs_pandas = _output_from_fit_transform(</div>
<div class="line"><span class="lineno"> 4306</span>                transformer_pandas, name, X, df, y</div>
<div class="line"><span class="lineno"> 4307</span>            )</div>
<div class="line"><span class="lineno"> 4308</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno"> 4309</span>        <span class="comment"># transformer does not support sparse data</span></div>
<div class="line"><span class="lineno"> 4310</span>        <span class="keyword">assert</span> str(e) == <span class="stringliteral">&quot;Pandas output does not support sparse data.&quot;</span>, e</div>
<div class="line"><span class="lineno"> 4311</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 4312</span> </div>
<div class="line"><span class="lineno"> 4313</span>    <span class="keywordflow">for</span> case <span class="keywordflow">in</span> outputs_default:</div>
<div class="line"><span class="lineno"> 4314</span>        _check_generated_dataframe(</div>
<div class="line"><span class="lineno"> 4315</span>            name, case, outputs_default[case], outputs_pandas[case]</div>
<div class="line"><span class="lineno"> 4316</span>        )</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb574cd1b01b3d721c4bf121941a5ecb" name="acb574cd1b01b3d721c4bf121941a5ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb574cd1b01b3d721c4bf121941a5ecb">&#9670;&#160;</a></span>check_methods_sample_order_invariance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_methods_sample_order_invariance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1366</span><span class="keyword">def </span>check_methods_sample_order_invariance(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1367</span>    <span class="comment"># check that method gives invariant results if applied</span></div>
<div class="line"><span class="lineno"> 1368</span>    <span class="comment"># on a subset with different sample order</span></div>
<div class="line"><span class="lineno"> 1369</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1370</span>    X = 3 * rnd.uniform(size=(20, 3))</div>
<div class="line"><span class="lineno"> 1371</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1372</span>    y = X[:, 0].astype(np.int64)</div>
<div class="line"><span class="lineno"> 1373</span>    <span class="keywordflow">if</span> _safe_tags(estimator_orig, key=<span class="stringliteral">&quot;binary_only&quot;</span>):</div>
<div class="line"><span class="lineno"> 1374</span>        y[y == 2] = 1</div>
<div class="line"><span class="lineno"> 1375</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1376</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1377</span> </div>
<div class="line"><span class="lineno"> 1378</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1379</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1380</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1381</span>        estimator.n_clusters = 2</div>
<div class="line"><span class="lineno"> 1382</span> </div>
<div class="line"><span class="lineno"> 1383</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1384</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1385</span> </div>
<div class="line"><span class="lineno"> 1386</span>    idx = np.random.permutation(X.shape[0])</div>
<div class="line"><span class="lineno"> 1387</span> </div>
<div class="line"><span class="lineno"> 1388</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> [</div>
<div class="line"><span class="lineno"> 1389</span>        <span class="stringliteral">&quot;predict&quot;</span>,</div>
<div class="line"><span class="lineno"> 1390</span>        <span class="stringliteral">&quot;transform&quot;</span>,</div>
<div class="line"><span class="lineno"> 1391</span>        <span class="stringliteral">&quot;decision_function&quot;</span>,</div>
<div class="line"><span class="lineno"> 1392</span>        <span class="stringliteral">&quot;score_samples&quot;</span>,</div>
<div class="line"><span class="lineno"> 1393</span>        <span class="stringliteral">&quot;predict_proba&quot;</span>,</div>
<div class="line"><span class="lineno"> 1394</span>    ]:</div>
<div class="line"><span class="lineno"> 1395</span>        msg = (</div>
<div class="line"><span class="lineno"> 1396</span>            <span class="stringliteral">&quot;{method} of {name} is not invariant when applied to a dataset&quot;</span></div>
<div class="line"><span class="lineno"> 1397</span>            <span class="stringliteral">&quot;with different sample order.&quot;</span></div>
<div class="line"><span class="lineno"> 1398</span>        ).format(method=method, name=name)</div>
<div class="line"><span class="lineno"> 1399</span> </div>
<div class="line"><span class="lineno"> 1400</span>        <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 1401</span>            assert_allclose_dense_sparse(</div>
<div class="line"><span class="lineno"> 1402</span>                getattr(estimator, method)(X)[idx],</div>
<div class="line"><span class="lineno"> 1403</span>                getattr(estimator, method)(X[idx]),</div>
<div class="line"><span class="lineno"> 1404</span>                atol=1e-9,</div>
<div class="line"><span class="lineno"> 1405</span>                err_msg=msg,</div>
<div class="line"><span class="lineno"> 1406</span>            )</div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span> </div>
<div class="line"><span class="lineno"> 1409</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad32b507e4333d4ea2df105870cf59f0a" name="ad32b507e4333d4ea2df105870cf59f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32b507e4333d4ea2df105870cf59f0a">&#9670;&#160;</a></span>check_methods_subset_invariance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_methods_subset_invariance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1328</span><span class="keyword">def </span>check_methods_subset_invariance(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1329</span>    <span class="comment"># check that method gives invariant results if applied</span></div>
<div class="line"><span class="lineno"> 1330</span>    <span class="comment"># on mini batches or the whole set</span></div>
<div class="line"><span class="lineno"> 1331</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 1332</span>    X = 3 * rnd.uniform(size=(20, 3))</div>
<div class="line"><span class="lineno"> 1333</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 1334</span>    y = X[:, 0].astype(int)</div>
<div class="line"><span class="lineno"> 1335</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1336</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_components&quot;</span>):</div>
<div class="line"><span class="lineno"> 1339</span>        estimator.n_components = 1</div>
<div class="line"><span class="lineno"> 1340</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;n_clusters&quot;</span>):</div>
<div class="line"><span class="lineno"> 1341</span>        estimator.n_clusters = 1</div>
<div class="line"><span class="lineno"> 1342</span> </div>
<div class="line"><span class="lineno"> 1343</span>    set_random_state(estimator, 1)</div>
<div class="line"><span class="lineno"> 1344</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1345</span> </div>
<div class="line"><span class="lineno"> 1346</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> [</div>
<div class="line"><span class="lineno"> 1347</span>        <span class="stringliteral">&quot;predict&quot;</span>,</div>
<div class="line"><span class="lineno"> 1348</span>        <span class="stringliteral">&quot;transform&quot;</span>,</div>
<div class="line"><span class="lineno"> 1349</span>        <span class="stringliteral">&quot;decision_function&quot;</span>,</div>
<div class="line"><span class="lineno"> 1350</span>        <span class="stringliteral">&quot;score_samples&quot;</span>,</div>
<div class="line"><span class="lineno"> 1351</span>        <span class="stringliteral">&quot;predict_proba&quot;</span>,</div>
<div class="line"><span class="lineno"> 1352</span>    ]:</div>
<div class="line"><span class="lineno"> 1353</span> </div>
<div class="line"><span class="lineno"> 1354</span>        msg = (<span class="stringliteral">&quot;{method} of {name} is not invariant when applied to a subset.&quot;</span>).format(</div>
<div class="line"><span class="lineno"> 1355</span>            method=method, name=name</div>
<div class="line"><span class="lineno"> 1356</span>        )</div>
<div class="line"><span class="lineno"> 1357</span> </div>
<div class="line"><span class="lineno"> 1358</span>        <span class="keywordflow">if</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 1359</span>            result_full, result_by_batch = _apply_on_subsets(</div>
<div class="line"><span class="lineno"> 1360</span>                getattr(estimator, method), X</div>
<div class="line"><span class="lineno"> 1361</span>            )</div>
<div class="line"><span class="lineno"> 1362</span>            assert_allclose(result_full, result_by_batch, atol=1e-7, err_msg=msg)</div>
<div class="line"><span class="lineno"> 1363</span> </div>
<div class="line"><span class="lineno"> 1364</span> </div>
<div class="line"><span class="lineno"> 1365</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a221a41b70f53f3f45fba7c6416e66982" name="a221a41b70f53f3f45fba7c6416e66982"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a221a41b70f53f3f45fba7c6416e66982">&#9670;&#160;</a></span>check_n_features_in()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_n_features_in </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3654</span><span class="keyword">def </span>check_n_features_in(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3655</span>    <span class="comment"># Make sure that n_features_in_ attribute doesn&#39;t exist until fit is</span></div>
<div class="line"><span class="lineno"> 3656</span>    <span class="comment"># called, and that its value is correct.</span></div>
<div class="line"><span class="lineno"> 3657</span> </div>
<div class="line"><span class="lineno"> 3658</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 3659</span> </div>
<div class="line"><span class="lineno"> 3660</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3661</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3662</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;warm_start&quot;</span> <span class="keywordflow">in</span> estimator.get_params():</div>
<div class="line"><span class="lineno"> 3663</span>        estimator.set_params(warm_start=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3664</span> </div>
<div class="line"><span class="lineno"> 3665</span>    n_samples = 100</div>
<div class="line"><span class="lineno"> 3666</span>    X = rng.normal(loc=100, size=(n_samples, 2))</div>
<div class="line"><span class="lineno"> 3667</span>    X = _enforce_estimator_tags_X(estimator, X)</div>
<div class="line"><span class="lineno"> 3668</span>    <span class="keywordflow">if</span> is_regressor(estimator_orig):</div>
<div class="line"><span class="lineno"> 3669</span>        y = rng.normal(size=n_samples)</div>
<div class="line"><span class="lineno"> 3670</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3671</span>        y = rng.randint(low=0, high=2, size=n_samples)</div>
<div class="line"><span class="lineno"> 3672</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 3673</span> </div>
<div class="line"><span class="lineno"> 3674</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(estimator, <span class="stringliteral">&quot;n_features_in_&quot;</span>)</div>
<div class="line"><span class="lineno"> 3675</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 3676</span>    <span class="keyword">assert</span> hasattr(estimator, <span class="stringliteral">&quot;n_features_in_&quot;</span>)</div>
<div class="line"><span class="lineno"> 3677</span>    <span class="keyword">assert</span> estimator.n_features_in_ == X.shape[1]</div>
<div class="line"><span class="lineno"> 3678</span> </div>
<div class="line"><span class="lineno"> 3679</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4099caa93cf22904b27c9999865b1a1b" name="a4099caa93cf22904b27c9999865b1a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4099caa93cf22904b27c9999865b1a1b">&#9670;&#160;</a></span>check_n_features_in_after_fitting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_n_features_in_after_fitting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3707</span><span class="keyword">def </span>check_n_features_in_after_fitting(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3708</span>    <span class="comment"># Make sure that n_features_in are checked after fitting</span></div>
<div class="line"><span class="lineno"> 3709</span>    tags = _safe_tags(estimator_orig)</div>
<div class="line"><span class="lineno"> 3710</span> </div>
<div class="line"><span class="lineno"> 3711</span>    is_supported_X_types = (</div>
<div class="line"><span class="lineno"> 3712</span>        <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>] <span class="keywordflow">or</span> <span class="stringliteral">&quot;categorical&quot;</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>]</div>
<div class="line"><span class="lineno"> 3713</span>    )</div>
<div class="line"><span class="lineno"> 3714</span> </div>
<div class="line"><span class="lineno"> 3715</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_supported_X_types <span class="keywordflow">or</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3716</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3717</span> </div>
<div class="line"><span class="lineno"> 3718</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 3719</span> </div>
<div class="line"><span class="lineno"> 3720</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3721</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3722</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;warm_start&quot;</span> <span class="keywordflow">in</span> estimator.get_params():</div>
<div class="line"><span class="lineno"> 3723</span>        estimator.set_params(warm_start=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3724</span> </div>
<div class="line"><span class="lineno"> 3725</span>    n_samples = 150</div>
<div class="line"><span class="lineno"> 3726</span>    X = rng.normal(size=(n_samples, 8))</div>
<div class="line"><span class="lineno"> 3727</span>    X = _enforce_estimator_tags_X(estimator, X)</div>
<div class="line"><span class="lineno"> 3728</span> </div>
<div class="line"><span class="lineno"> 3729</span>    <span class="keywordflow">if</span> is_regressor(estimator):</div>
<div class="line"><span class="lineno"> 3730</span>        y = rng.normal(size=n_samples)</div>
<div class="line"><span class="lineno"> 3731</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3732</span>        y = rng.randint(low=0, high=2, size=n_samples)</div>
<div class="line"><span class="lineno"> 3733</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 3734</span> </div>
<div class="line"><span class="lineno"> 3735</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 3736</span>    <span class="keyword">assert</span> estimator.n_features_in_ == X.shape[1]</div>
<div class="line"><span class="lineno"> 3737</span> </div>
<div class="line"><span class="lineno"> 3738</span>    <span class="comment"># check methods will check n_features_in_</span></div>
<div class="line"><span class="lineno"> 3739</span>    check_methods = [</div>
<div class="line"><span class="lineno"> 3740</span>        <span class="stringliteral">&quot;predict&quot;</span>,</div>
<div class="line"><span class="lineno"> 3741</span>        <span class="stringliteral">&quot;transform&quot;</span>,</div>
<div class="line"><span class="lineno"> 3742</span>        <span class="stringliteral">&quot;decision_function&quot;</span>,</div>
<div class="line"><span class="lineno"> 3743</span>        <span class="stringliteral">&quot;predict_proba&quot;</span>,</div>
<div class="line"><span class="lineno"> 3744</span>        <span class="stringliteral">&quot;score&quot;</span>,</div>
<div class="line"><span class="lineno"> 3745</span>    ]</div>
<div class="line"><span class="lineno"> 3746</span>    X_bad = X[:, [1]]</div>
<div class="line"><span class="lineno"> 3747</span> </div>
<div class="line"><span class="lineno"> 3748</span>    msg = f<span class="stringliteral">&quot;X has 1 features, but \\w+ is expecting {X.shape[1]} features as input&quot;</span></div>
<div class="line"><span class="lineno"> 3749</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> check_methods:</div>
<div class="line"><span class="lineno"> 3750</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 3751</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 3752</span> </div>
<div class="line"><span class="lineno"> 3753</span>        callable_method = getattr(estimator, method)</div>
<div class="line"><span class="lineno"> 3754</span>        <span class="keywordflow">if</span> method == <span class="stringliteral">&quot;score&quot;</span>:</div>
<div class="line"><span class="lineno"> 3755</span>            callable_method = partial(callable_method, y=y)</div>
<div class="line"><span class="lineno"> 3756</span> </div>
<div class="line"><span class="lineno"> 3757</span>        <span class="keyword">with</span> raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 3758</span>            callable_method(X_bad)</div>
<div class="line"><span class="lineno"> 3759</span> </div>
<div class="line"><span class="lineno"> 3760</span>    <span class="comment"># partial_fit will check in the second call</span></div>
<div class="line"><span class="lineno"> 3761</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, <span class="stringliteral">&quot;partial_fit&quot;</span>):</div>
<div class="line"><span class="lineno"> 3762</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3763</span> </div>
<div class="line"><span class="lineno"> 3764</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3765</span>    <span class="keywordflow">if</span> is_classifier(estimator):</div>
<div class="line"><span class="lineno"> 3766</span>        estimator.partial_fit(X, y, classes=np.unique(y))</div>
<div class="line"><span class="lineno"> 3767</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3768</span>        estimator.partial_fit(X, y)</div>
<div class="line"><span class="lineno"> 3769</span>    <span class="keyword">assert</span> estimator.n_features_in_ == X.shape[1]</div>
<div class="line"><span class="lineno"> 3770</span> </div>
<div class="line"><span class="lineno"> 3771</span>    <span class="keyword">with</span> raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 3772</span>        estimator.partial_fit(X_bad, y)</div>
<div class="line"><span class="lineno"> 3773</span> </div>
<div class="line"><span class="lineno"> 3774</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7745745b110209d7236f92ee0d8c2636" name="a7745745b110209d7236f92ee0d8c2636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7745745b110209d7236f92ee0d8c2636">&#9670;&#160;</a></span>check_no_attributes_set_in_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_no_attributes_set_in_init </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check setting during init.</pre> <div class="fragment"><div class="line"><span class="lineno"> 3011</span><span class="keyword">def </span>check_no_attributes_set_in_init(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3012</span>    <span class="stringliteral">&quot;&quot;&quot;Check setting during init.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 3013</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3014</span>        <span class="comment"># Clone fails if the estimator does not store</span></div>
<div class="line"><span class="lineno"> 3015</span>        <span class="comment"># all parameters as an attribute during init</span></div>
<div class="line"><span class="lineno"> 3016</span>        estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3017</span>    <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><span class="lineno"> 3018</span>        <span class="keywordflow">raise</span> AttributeError(</div>
<div class="line"><span class="lineno"> 3019</span>            f<span class="stringliteral">&quot;Estimator {name} should store all parameters as an attribute during init.&quot;</span></div>
<div class="line"><span class="lineno"> 3020</span>        )</div>
<div class="line"><span class="lineno"> 3021</span> </div>
<div class="line"><span class="lineno"> 3022</span>    <span class="keywordflow">if</span> hasattr(type(estimator).__init__, <span class="stringliteral">&quot;deprecated_original&quot;</span>):</div>
<div class="line"><span class="lineno"> 3023</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3024</span> </div>
<div class="line"><span class="lineno"> 3025</span>    init_params = _get_args(type(estimator).__init__)</div>
<div class="line"><span class="lineno"> 3026</span>    <span class="keywordflow">if</span> IS_PYPY:</div>
<div class="line"><span class="lineno"> 3027</span>        <span class="comment"># __init__ signature has additional objects in PyPy</span></div>
<div class="line"><span class="lineno"> 3028</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> [<span class="stringliteral">&quot;obj&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3029</span>            <span class="keywordflow">if</span> key <span class="keywordflow">in</span> init_params:</div>
<div class="line"><span class="lineno"> 3030</span>                init_params.remove(key)</div>
<div class="line"><span class="lineno"> 3031</span>    parents_init_params = [</div>
<div class="line"><span class="lineno"> 3032</span>        param</div>
<div class="line"><span class="lineno"> 3033</span>        <span class="keywordflow">for</span> params_parent <span class="keywordflow">in</span> (_get_args(parent) <span class="keywordflow">for</span> parent <span class="keywordflow">in</span> type(estimator).__mro__)</div>
<div class="line"><span class="lineno"> 3034</span>        <span class="keywordflow">for</span> param <span class="keywordflow">in</span> params_parent</div>
<div class="line"><span class="lineno"> 3035</span>    ]</div>
<div class="line"><span class="lineno"> 3036</span> </div>
<div class="line"><span class="lineno"> 3037</span>    <span class="comment"># Test for no setting apart from parameters during init</span></div>
<div class="line"><span class="lineno"> 3038</span>    invalid_attr = set(vars(estimator)) - set(init_params) - set(parents_init_params)</div>
<div class="line"><span class="lineno"> 3039</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> invalid_attr, (</div>
<div class="line"><span class="lineno"> 3040</span>        <span class="stringliteral">&quot;Estimator %s should not set any attribute apart&quot;</span></div>
<div class="line"><span class="lineno"> 3041</span>        <span class="stringliteral">&quot; from parameters during init. Found attributes %s.&quot;</span></div>
<div class="line"><span class="lineno"> 3042</span>        % (name, sorted(invalid_attr))</div>
<div class="line"><span class="lineno"> 3043</span>    )</div>
<div class="line"><span class="lineno"> 3044</span> </div>
<div class="line"><span class="lineno"> 3045</span> </div>
<div class="line"><span class="lineno"> 3046</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c6f14bed45b34bd996d735edd107946" name="a0c6f14bed45b34bd996d735edd107946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c6f14bed45b34bd996d735edd107946">&#9670;&#160;</a></span>check_non_transformer_estimators_n_iter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_non_transformer_estimators_n_iter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3303</span><span class="keyword">def </span>check_non_transformer_estimators_n_iter(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3304</span>    <span class="comment"># Test that estimators that are not transformers with a parameter</span></div>
<div class="line"><span class="lineno"> 3305</span>    <span class="comment"># max_iter, return the attribute of n_iter_ at least 1.</span></div>
<div class="line"><span class="lineno"> 3306</span> </div>
<div class="line"><span class="lineno"> 3307</span>    <span class="comment"># These models are dependent on external solvers like</span></div>
<div class="line"><span class="lineno"> 3308</span>    <span class="comment"># libsvm and accessing the iter parameter is non-trivial.</span></div>
<div class="line"><span class="lineno"> 3309</span>    <span class="comment"># SelfTrainingClassifier does not perform an iteration if all samples are</span></div>
<div class="line"><span class="lineno"> 3310</span>    <span class="comment"># labeled, hence n_iter_ = 0 is valid.</span></div>
<div class="line"><span class="lineno"> 3311</span>    not_run_check_n_iter = [</div>
<div class="line"><span class="lineno"> 3312</span>        <span class="stringliteral">&quot;Ridge&quot;</span>,</div>
<div class="line"><span class="lineno"> 3313</span>        <span class="stringliteral">&quot;RidgeClassifier&quot;</span>,</div>
<div class="line"><span class="lineno"> 3314</span>        <span class="stringliteral">&quot;RandomizedLasso&quot;</span>,</div>
<div class="line"><span class="lineno"> 3315</span>        <span class="stringliteral">&quot;LogisticRegressionCV&quot;</span>,</div>
<div class="line"><span class="lineno"> 3316</span>        <span class="stringliteral">&quot;LinearSVC&quot;</span>,</div>
<div class="line"><span class="lineno"> 3317</span>        <span class="stringliteral">&quot;LogisticRegression&quot;</span>,</div>
<div class="line"><span class="lineno"> 3318</span>        <span class="stringliteral">&quot;SelfTrainingClassifier&quot;</span>,</div>
<div class="line"><span class="lineno"> 3319</span>    ]</div>
<div class="line"><span class="lineno"> 3320</span> </div>
<div class="line"><span class="lineno"> 3321</span>    <span class="comment"># Tested in test_transformer_n_iter</span></div>
<div class="line"><span class="lineno"> 3322</span>    not_run_check_n_iter += CROSS_DECOMPOSITION</div>
<div class="line"><span class="lineno"> 3323</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> not_run_check_n_iter:</div>
<div class="line"><span class="lineno"> 3324</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3325</span> </div>
<div class="line"><span class="lineno"> 3326</span>    <span class="comment"># LassoLars stops early for the default alpha=1.0 the iris dataset.</span></div>
<div class="line"><span class="lineno"> 3327</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;LassoLars&quot;</span>:</div>
<div class="line"><span class="lineno"> 3328</span>        estimator = clone(estimator_orig).set_params(alpha=0.0)</div>
<div class="line"><span class="lineno"> 3329</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3330</span>        estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3331</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;max_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 3332</span>        iris = load_iris()</div>
<div class="line"><span class="lineno"> 3333</span>        X, y_ = iris.data, iris.target</div>
<div class="line"><span class="lineno"> 3334</span>        y_ = _enforce_estimator_tags_y(estimator, y_)</div>
<div class="line"><span class="lineno"> 3335</span> </div>
<div class="line"><span class="lineno"> 3336</span>        set_random_state(estimator, 0)</div>
<div class="line"><span class="lineno"> 3337</span> </div>
<div class="line"><span class="lineno"> 3338</span>        X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 3339</span> </div>
<div class="line"><span class="lineno"> 3340</span>        estimator.fit(X, y_)</div>
<div class="line"><span class="lineno"> 3341</span> </div>
<div class="line"><span class="lineno"> 3342</span>        <span class="keyword">assert</span> np.all(estimator.n_iter_ &gt;= 1)</div>
<div class="line"><span class="lineno"> 3343</span> </div>
<div class="line"><span class="lineno"> 3344</span> </div>
<div class="line"><span class="lineno"> 3345</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="acee8ce03156d2998d409a004fdc3a776" name="acee8ce03156d2998d409a004fdc3a776"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee8ce03156d2998d409a004fdc3a776">&#9670;&#160;</a></span>check_nonsquare_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_nonsquare_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that error is thrown when non-square data provided.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1837</span><span class="keyword">def </span>check_nonsquare_error(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1838</span>    <span class="stringliteral">&quot;&quot;&quot;Test that error is thrown when non-square data provided.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1839</span> </div>
<div class="line"><span class="lineno"> 1840</span>    X, y = make_blobs(n_samples=20, n_features=10)</div>
<div class="line"><span class="lineno"> 1841</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1842</span> </div>
<div class="line"><span class="lineno"> 1843</span>    <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 1844</span>        ValueError,</div>
<div class="line"><span class="lineno"> 1845</span>        err_msg=(</div>
<div class="line"><span class="lineno"> 1846</span>            f<span class="stringliteral">&quot;The pairwise estimator {name} does not raise an error on non-square data&quot;</span></div>
<div class="line"><span class="lineno"> 1847</span>        ),</div>
<div class="line"><span class="lineno"> 1848</span>    ):</div>
<div class="line"><span class="lineno"> 1849</span>        estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1850</span> </div>
<div class="line"><span class="lineno"> 1851</span> </div>
<div class="line"><span class="lineno"> 1852</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d2067f1a0e74fdaacfe719631532afb" name="a0d2067f1a0e74fdaacfe719631532afb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2067f1a0e74fdaacfe719631532afb">&#9670;&#160;</a></span>check_outlier_contamination()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_outlier_contamination </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2350</span><span class="keyword">def </span>check_outlier_contamination(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 2351</span>    <span class="comment"># Check that the contamination parameter is in (0.0, 0.5] when it is an</span></div>
<div class="line"><span class="lineno"> 2352</span>    <span class="comment"># interval constraint.</span></div>
<div class="line"><span class="lineno"> 2353</span> </div>
<div class="line"><span class="lineno"> 2354</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator_orig, <span class="stringliteral">&quot;_parameter_constraints&quot;</span>):</div>
<div class="line"><span class="lineno"> 2355</span>        <span class="comment"># Only estimator implementing parameter constraints will be checked</span></div>
<div class="line"><span class="lineno"> 2356</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 2357</span> </div>
<div class="line"><span class="lineno"> 2358</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;contamination&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> estimator_orig._parameter_constraints:</div>
<div class="line"><span class="lineno"> 2359</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 2360</span> </div>
<div class="line"><span class="lineno"> 2361</span>    contamination_constraints = estimator_orig._parameter_constraints[<span class="stringliteral">&quot;contamination&quot;</span>]</div>
<div class="line"><span class="lineno"> 2362</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> any([isinstance(c, Interval) <span class="keywordflow">for</span> c <span class="keywordflow">in</span> contamination_constraints]):</div>
<div class="line"><span class="lineno"> 2363</span>        <span class="keywordflow">raise</span> AssertionError(</div>
<div class="line"><span class="lineno"> 2364</span>            <span class="stringliteral">&quot;contamination constraints should contain a Real Interval constraint.&quot;</span></div>
<div class="line"><span class="lineno"> 2365</span>        )</div>
<div class="line"><span class="lineno"> 2366</span> </div>
<div class="line"><span class="lineno"> 2367</span>    <span class="keywordflow">for</span> constraint <span class="keywordflow">in</span> contamination_constraints:</div>
<div class="line"><span class="lineno"> 2368</span>        <span class="keywordflow">if</span> isinstance(constraint, Interval):</div>
<div class="line"><span class="lineno"> 2369</span>            <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 2370</span>                constraint.type == Real</div>
<div class="line"><span class="lineno"> 2371</span>                <span class="keywordflow">and</span> constraint.left &gt;= 0.0</div>
<div class="line"><span class="lineno"> 2372</span>                <span class="keywordflow">and</span> constraint.right &lt;= 0.5</div>
<div class="line"><span class="lineno"> 2373</span>                <span class="keywordflow">and</span> (constraint.left &gt; 0 <span class="keywordflow">or</span> constraint.closed <span class="keywordflow">in</span> {<span class="stringliteral">&quot;right&quot;</span>, <span class="stringliteral">&quot;neither&quot;</span>})</div>
<div class="line"><span class="lineno"> 2374</span>            ), <span class="stringliteral">&quot;contamination constraint should be an interval in (0, 0.5]&quot;</span></div>
<div class="line"><span class="lineno"> 2375</span> </div>
<div class="line"><span class="lineno"> 2376</span> </div>
<div class="line"><span class="lineno"> 2377</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa939dcee7dec06bc8fd3d84313fcdfc7" name="aa939dcee7dec06bc8fd3d84313fcdfc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa939dcee7dec06bc8fd3d84313fcdfc7">&#9670;&#160;</a></span>check_outlier_corruption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_outlier_corruption </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_outliers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_outliers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>decision</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2256</span><span class="keyword">def </span>check_outlier_corruption(num_outliers, expected_outliers, decision):</div>
<div class="line"><span class="lineno"> 2257</span>    <span class="comment"># Check for deviation from the precise given contamination level that may</span></div>
<div class="line"><span class="lineno"> 2258</span>    <span class="comment"># be due to ties in the anomaly scores.</span></div>
<div class="line"><span class="lineno"> 2259</span>    <span class="keywordflow">if</span> num_outliers &lt; expected_outliers:</div>
<div class="line"><span class="lineno"> 2260</span>        start = num_outliers</div>
<div class="line"><span class="lineno"> 2261</span>        end = expected_outliers + 1</div>
<div class="line"><span class="lineno"> 2262</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2263</span>        start = expected_outliers</div>
<div class="line"><span class="lineno"> 2264</span>        end = num_outliers + 1</div>
<div class="line"><span class="lineno"> 2265</span> </div>
<div class="line"><span class="lineno"> 2266</span>    <span class="comment"># ensure that all values in the &#39;critical area&#39; are tied,</span></div>
<div class="line"><span class="lineno"> 2267</span>    <span class="comment"># leading to the observed discrepancy between provided</span></div>
<div class="line"><span class="lineno"> 2268</span>    <span class="comment"># and actual contamination levels.</span></div>
<div class="line"><span class="lineno"> 2269</span>    sorted_decision = np.sort(decision)</div>
<div class="line"><span class="lineno"> 2270</span>    msg = (</div>
<div class="line"><span class="lineno"> 2271</span>        <span class="stringliteral">&quot;The number of predicted outliers is not equal to the expected &quot;</span></div>
<div class="line"><span class="lineno"> 2272</span>        <span class="stringliteral">&quot;number of outliers and this difference is not explained by the &quot;</span></div>
<div class="line"><span class="lineno"> 2273</span>        <span class="stringliteral">&quot;number of ties in the decision_function values&quot;</span></div>
<div class="line"><span class="lineno"> 2274</span>    )</div>
<div class="line"><span class="lineno"> 2275</span>    <span class="keyword">assert</span> len(np.unique(sorted_decision[start:end])) == 1, msg</div>
<div class="line"><span class="lineno"> 2276</span> </div>
<div class="line"><span class="lineno"> 2277</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3109e438663a62e643ea0e536def8582" name="a3109e438663a62e643ea0e536def8582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3109e438663a62e643ea0e536def8582">&#9670;&#160;</a></span>check_outliers_fit_predict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_outliers_fit_predict </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3504</span><span class="keyword">def </span>check_outliers_fit_predict(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3505</span>    <span class="comment"># Check fit_predict for outlier detectors.</span></div>
<div class="line"><span class="lineno"> 3506</span> </div>
<div class="line"><span class="lineno"> 3507</span>    n_samples = 300</div>
<div class="line"><span class="lineno"> 3508</span>    X, _ = make_blobs(n_samples=n_samples, random_state=0)</div>
<div class="line"><span class="lineno"> 3509</span>    X = shuffle(X, random_state=7)</div>
<div class="line"><span class="lineno"> 3510</span>    n_samples, n_features = X.shape</div>
<div class="line"><span class="lineno"> 3511</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3512</span> </div>
<div class="line"><span class="lineno"> 3513</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3514</span> </div>
<div class="line"><span class="lineno"> 3515</span>    y_pred = estimator.fit_predict(X)</div>
<div class="line"><span class="lineno"> 3516</span>    <span class="keyword">assert</span> y_pred.shape == (n_samples,)</div>
<div class="line"><span class="lineno"> 3517</span>    <span class="keyword">assert</span> y_pred.dtype.kind == <span class="stringliteral">&quot;i&quot;</span></div>
<div class="line"><span class="lineno"> 3518</span>    assert_array_equal(np.unique(y_pred), np.array([-1, 1]))</div>
<div class="line"><span class="lineno"> 3519</span> </div>
<div class="line"><span class="lineno"> 3520</span>    <span class="comment"># check fit_predict = fit.predict when the estimator has both a predict and</span></div>
<div class="line"><span class="lineno"> 3521</span>    <span class="comment"># a fit_predict method. recall that it is already assumed here that the</span></div>
<div class="line"><span class="lineno"> 3522</span>    <span class="comment"># estimator has a fit_predict method</span></div>
<div class="line"><span class="lineno"> 3523</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;predict&quot;</span>):</div>
<div class="line"><span class="lineno"> 3524</span>        y_pred_2 = estimator.fit(X).predict(X)</div>
<div class="line"><span class="lineno"> 3525</span>        assert_array_equal(y_pred, y_pred_2)</div>
<div class="line"><span class="lineno"> 3526</span> </div>
<div class="line"><span class="lineno"> 3527</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;contamination&quot;</span>):</div>
<div class="line"><span class="lineno"> 3528</span>        <span class="comment"># proportion of outliers equal to contamination parameter when not</span></div>
<div class="line"><span class="lineno"> 3529</span>        <span class="comment"># set to &#39;auto&#39;</span></div>
<div class="line"><span class="lineno"> 3530</span>        expected_outliers = 30</div>
<div class="line"><span class="lineno"> 3531</span>        contamination = float(expected_outliers) / n_samples</div>
<div class="line"><span class="lineno"> 3532</span>        estimator.set_params(contamination=contamination)</div>
<div class="line"><span class="lineno"> 3533</span>        y_pred = estimator.fit_predict(X)</div>
<div class="line"><span class="lineno"> 3534</span> </div>
<div class="line"><span class="lineno"> 3535</span>        num_outliers = np.sum(y_pred != 1)</div>
<div class="line"><span class="lineno"> 3536</span>        <span class="comment"># num_outliers should be equal to expected_outliers unless</span></div>
<div class="line"><span class="lineno"> 3537</span>        <span class="comment"># there are ties in the decision_function values. this can</span></div>
<div class="line"><span class="lineno"> 3538</span>        <span class="comment"># only be tested for estimators with a decision_function</span></div>
<div class="line"><span class="lineno"> 3539</span>        <span class="comment"># method</span></div>
<div class="line"><span class="lineno"> 3540</span>        <span class="keywordflow">if</span> num_outliers != expected_outliers <span class="keywordflow">and</span> hasattr(</div>
<div class="line"><span class="lineno"> 3541</span>            estimator, <span class="stringliteral">&quot;decision_function&quot;</span></div>
<div class="line"><span class="lineno"> 3542</span>        ):</div>
<div class="line"><span class="lineno"> 3543</span>            decision = estimator.decision_function(X)</div>
<div class="line"><span class="lineno"> 3544</span>            check_outlier_corruption(num_outliers, expected_outliers, decision)</div>
<div class="line"><span class="lineno"> 3545</span> </div>
<div class="line"><span class="lineno"> 3546</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af3b4842b71349c0669630481384ea511" name="af3b4842b71349c0669630481384ea511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b4842b71349c0669630481384ea511">&#9670;&#160;</a></span>check_outliers_train()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_outliers_train </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readonly_memmap</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2278</span><span class="keyword">def </span>check_outliers_train(name, estimator_orig, readonly_memmap=True):</div>
<div class="line"><span class="lineno"> 2279</span>    n_samples = 300</div>
<div class="line"><span class="lineno"> 2280</span>    X, _ = make_blobs(n_samples=n_samples, random_state=0)</div>
<div class="line"><span class="lineno"> 2281</span>    X = shuffle(X, random_state=7)</div>
<div class="line"><span class="lineno"> 2282</span> </div>
<div class="line"><span class="lineno"> 2283</span>    <span class="keywordflow">if</span> readonly_memmap:</div>
<div class="line"><span class="lineno"> 2284</span>        X = create_memmap_backed_data(X)</div>
<div class="line"><span class="lineno"> 2285</span> </div>
<div class="line"><span class="lineno"> 2286</span>    n_samples, n_features = X.shape</div>
<div class="line"><span class="lineno"> 2287</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 2288</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 2289</span> </div>
<div class="line"><span class="lineno"> 2290</span>    <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 2291</span>    estimator.fit(X)</div>
<div class="line"><span class="lineno"> 2292</span>    <span class="comment"># with lists</span></div>
<div class="line"><span class="lineno"> 2293</span>    estimator.fit(X.tolist())</div>
<div class="line"><span class="lineno"> 2294</span> </div>
<div class="line"><span class="lineno"> 2295</span>    y_pred = estimator.predict(X)</div>
<div class="line"><span class="lineno"> 2296</span>    <span class="keyword">assert</span> y_pred.shape == (n_samples,)</div>
<div class="line"><span class="lineno"> 2297</span>    <span class="keyword">assert</span> y_pred.dtype.kind == <span class="stringliteral">&quot;i&quot;</span></div>
<div class="line"><span class="lineno"> 2298</span>    assert_array_equal(np.unique(y_pred), np.array([-1, 1]))</div>
<div class="line"><span class="lineno"> 2299</span> </div>
<div class="line"><span class="lineno"> 2300</span>    decision = estimator.decision_function(X)</div>
<div class="line"><span class="lineno"> 2301</span>    scores = estimator.score_samples(X)</div>
<div class="line"><span class="lineno"> 2302</span>    <span class="keywordflow">for</span> output <span class="keywordflow">in</span> [decision, scores]:</div>
<div class="line"><span class="lineno"> 2303</span>        <span class="keyword">assert</span> output.dtype == np.dtype(<span class="stringliteral">&quot;float&quot;</span>)</div>
<div class="line"><span class="lineno"> 2304</span>        <span class="keyword">assert</span> output.shape == (n_samples,)</div>
<div class="line"><span class="lineno"> 2305</span> </div>
<div class="line"><span class="lineno"> 2306</span>    <span class="comment"># raises error on malformed input for predict</span></div>
<div class="line"><span class="lineno"> 2307</span>    <span class="keyword">with</span> raises(ValueError):</div>
<div class="line"><span class="lineno"> 2308</span>        estimator.predict(X.T)</div>
<div class="line"><span class="lineno"> 2309</span> </div>
<div class="line"><span class="lineno"> 2310</span>    <span class="comment"># decision_function agrees with predict</span></div>
<div class="line"><span class="lineno"> 2311</span>    dec_pred = (decision &gt;= 0).astype(int)</div>
<div class="line"><span class="lineno"> 2312</span>    dec_pred[dec_pred == 0] = -1</div>
<div class="line"><span class="lineno"> 2313</span>    assert_array_equal(dec_pred, y_pred)</div>
<div class="line"><span class="lineno"> 2314</span> </div>
<div class="line"><span class="lineno"> 2315</span>    <span class="comment"># raises error on malformed input for decision_function</span></div>
<div class="line"><span class="lineno"> 2316</span>    <span class="keyword">with</span> raises(ValueError):</div>
<div class="line"><span class="lineno"> 2317</span>        estimator.decision_function(X.T)</div>
<div class="line"><span class="lineno"> 2318</span> </div>
<div class="line"><span class="lineno"> 2319</span>    <span class="comment"># decision_function is a translation of score_samples</span></div>
<div class="line"><span class="lineno"> 2320</span>    y_dec = scores - estimator.offset_</div>
<div class="line"><span class="lineno"> 2321</span>    assert_allclose(y_dec, decision)</div>
<div class="line"><span class="lineno"> 2322</span> </div>
<div class="line"><span class="lineno"> 2323</span>    <span class="comment"># raises error on malformed input for score_samples</span></div>
<div class="line"><span class="lineno"> 2324</span>    <span class="keyword">with</span> raises(ValueError):</div>
<div class="line"><span class="lineno"> 2325</span>        estimator.score_samples(X.T)</div>
<div class="line"><span class="lineno"> 2326</span> </div>
<div class="line"><span class="lineno"> 2327</span>    <span class="comment"># contamination parameter (not for OneClassSVM which has the nu parameter)</span></div>
<div class="line"><span class="lineno"> 2328</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;contamination&quot;</span>) <span class="keywordflow">and</span> <span class="keywordflow">not</span> hasattr(estimator, <span class="stringliteral">&quot;novelty&quot;</span>):</div>
<div class="line"><span class="lineno"> 2329</span>        <span class="comment"># proportion of outliers equal to contamination parameter when not</span></div>
<div class="line"><span class="lineno"> 2330</span>        <span class="comment"># set to &#39;auto&#39;. This is true for the training set and cannot thus be</span></div>
<div class="line"><span class="lineno"> 2331</span>        <span class="comment"># checked as follows for estimators with a novelty parameter such as</span></div>
<div class="line"><span class="lineno"> 2332</span>        <span class="comment"># LocalOutlierFactor (tested in check_outliers_fit_predict)</span></div>
<div class="line"><span class="lineno"> 2333</span>        expected_outliers = 30</div>
<div class="line"><span class="lineno"> 2334</span>        contamination = expected_outliers / n_samples</div>
<div class="line"><span class="lineno"> 2335</span>        estimator.set_params(contamination=contamination)</div>
<div class="line"><span class="lineno"> 2336</span>        estimator.fit(X)</div>
<div class="line"><span class="lineno"> 2337</span>        y_pred = estimator.predict(X)</div>
<div class="line"><span class="lineno"> 2338</span> </div>
<div class="line"><span class="lineno"> 2339</span>        num_outliers = np.sum(y_pred != 1)</div>
<div class="line"><span class="lineno"> 2340</span>        <span class="comment"># num_outliers should be equal to expected_outliers unless</span></div>
<div class="line"><span class="lineno"> 2341</span>        <span class="comment"># there are ties in the decision_function values. this can</span></div>
<div class="line"><span class="lineno"> 2342</span>        <span class="comment"># only be tested for estimators with a decision_function</span></div>
<div class="line"><span class="lineno"> 2343</span>        <span class="comment"># method, i.e. all estimators except LOF which is already</span></div>
<div class="line"><span class="lineno"> 2344</span>        <span class="comment"># excluded from this if branch.</span></div>
<div class="line"><span class="lineno"> 2345</span>        <span class="keywordflow">if</span> num_outliers != expected_outliers:</div>
<div class="line"><span class="lineno"> 2346</span>            decision = estimator.decision_function(X)</div>
<div class="line"><span class="lineno"> 2347</span>            check_outlier_corruption(num_outliers, expected_outliers, decision)</div>
<div class="line"><span class="lineno"> 2348</span> </div>
<div class="line"><span class="lineno"> 2349</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8cbd95351be65820097fd9ad7093a2a" name="ab8cbd95351be65820097fd9ad7093a2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8cbd95351be65820097fd9ad7093a2a">&#9670;&#160;</a></span>check_param_validation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_param_validation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4036</span><span class="keyword">def </span>check_param_validation(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 4037</span>    <span class="comment"># Check that an informative error is raised when the value of a constructor</span></div>
<div class="line"><span class="lineno"> 4038</span>    <span class="comment"># parameter does not have an appropriate type or value.</span></div>
<div class="line"><span class="lineno"> 4039</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 4040</span>    X = rng.uniform(size=(20, 5))</div>
<div class="line"><span class="lineno"> 4041</span>    y = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno"> 4042</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 4043</span> </div>
<div class="line"><span class="lineno"> 4044</span>    estimator_params = estimator_orig.get_params(deep=<span class="keyword">False</span>).keys()</div>
<div class="line"><span class="lineno"> 4045</span> </div>
<div class="line"><span class="lineno"> 4046</span>    <span class="comment"># check that there is a constraint for each parameter</span></div>
<div class="line"><span class="lineno"> 4047</span>    <span class="keywordflow">if</span> estimator_params:</div>
<div class="line"><span class="lineno"> 4048</span>        validation_params = estimator_orig._parameter_constraints.keys()</div>
<div class="line"><span class="lineno"> 4049</span>        unexpected_params = set(validation_params) - set(estimator_params)</div>
<div class="line"><span class="lineno"> 4050</span>        missing_params = set(estimator_params) - set(validation_params)</div>
<div class="line"><span class="lineno"> 4051</span>        err_msg = (</div>
<div class="line"><span class="lineno"> 4052</span>            f<span class="stringliteral">&quot;Mismatch between _parameter_constraints and the parameters of {name}.&quot;</span></div>
<div class="line"><span class="lineno"> 4053</span>            f<span class="stringliteral">&quot;\nConsider the unexpected parameters {unexpected_params} and expected but&quot;</span></div>
<div class="line"><span class="lineno"> 4054</span>            f<span class="stringliteral">&quot; missing parameters {missing_params}&quot;</span></div>
<div class="line"><span class="lineno"> 4055</span>        )</div>
<div class="line"><span class="lineno"> 4056</span>        <span class="keyword">assert</span> validation_params == estimator_params, err_msg</div>
<div class="line"><span class="lineno"> 4057</span> </div>
<div class="line"><span class="lineno"> 4058</span>    <span class="comment"># this object does not have a valid type for sure for all params</span></div>
<div class="line"><span class="lineno"> 4059</span>    param_with_bad_type = type(<span class="stringliteral">&quot;BadType&quot;</span>, (), {})()</div>
<div class="line"><span class="lineno"> 4060</span> </div>
<div class="line"><span class="lineno"> 4061</span>    fit_methods = [<span class="stringliteral">&quot;fit&quot;</span>, <span class="stringliteral">&quot;partial_fit&quot;</span>, <span class="stringliteral">&quot;fit_transform&quot;</span>, <span class="stringliteral">&quot;fit_predict&quot;</span>]</div>
<div class="line"><span class="lineno"> 4062</span> </div>
<div class="line"><span class="lineno"> 4063</span>    <span class="keywordflow">for</span> param_name <span class="keywordflow">in</span> estimator_params:</div>
<div class="line"><span class="lineno"> 4064</span>        constraints = estimator_orig._parameter_constraints[param_name]</div>
<div class="line"><span class="lineno"> 4065</span> </div>
<div class="line"><span class="lineno"> 4066</span>        <span class="keywordflow">if</span> constraints == <span class="stringliteral">&quot;no_validation&quot;</span>:</div>
<div class="line"><span class="lineno"> 4067</span>            <span class="comment"># This parameter is not validated</span></div>
<div class="line"><span class="lineno"> 4068</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 4069</span> </div>
<div class="line"><span class="lineno"> 4070</span>        match = rf<span class="stringliteral">&quot;The &#39;{param_name}&#39; parameter of {name} must be .* Got .* instead.&quot;</span></div>
<div class="line"><span class="lineno"> 4071</span>        err_msg = (</div>
<div class="line"><span class="lineno"> 4072</span>            f<span class="stringliteral">&quot;{name} does not raise an informative error message when the &quot;</span></div>
<div class="line"><span class="lineno"> 4073</span>            f<span class="stringliteral">&quot;parameter {param_name} does not have a valid type or value.&quot;</span></div>
<div class="line"><span class="lineno"> 4074</span>        )</div>
<div class="line"><span class="lineno"> 4075</span> </div>
<div class="line"><span class="lineno"> 4076</span>        estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 4077</span> </div>
<div class="line"><span class="lineno"> 4078</span>        <span class="comment"># First, check that the error is raised if param doesn&#39;t match any valid type.</span></div>
<div class="line"><span class="lineno"> 4079</span>        estimator.set_params(**{param_name: param_with_bad_type})</div>
<div class="line"><span class="lineno"> 4080</span> </div>
<div class="line"><span class="lineno"> 4081</span>        <span class="keywordflow">for</span> method <span class="keywordflow">in</span> fit_methods:</div>
<div class="line"><span class="lineno"> 4082</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 4083</span>                <span class="comment"># the method is not accessible with the current set of parameters</span></div>
<div class="line"><span class="lineno"> 4084</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 4085</span> </div>
<div class="line"><span class="lineno"> 4086</span>            <span class="keyword">with</span> raises(InvalidParameterError, match=match, err_msg=err_msg):</div>
<div class="line"><span class="lineno"> 4087</span>                <span class="keywordflow">if</span> any(</div>
<div class="line"><span class="lineno"> 4088</span>                    isinstance(X_type, str) <span class="keywordflow">and</span> X_type.endswith(<span class="stringliteral">&quot;labels&quot;</span>)</div>
<div class="line"><span class="lineno"> 4089</span>                    <span class="keywordflow">for</span> X_type <span class="keywordflow">in</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;X_types&quot;</span>)</div>
<div class="line"><span class="lineno"> 4090</span>                ):</div>
<div class="line"><span class="lineno"> 4091</span>                    <span class="comment"># The estimator is a label transformer and take only `y`</span></div>
<div class="line"><span class="lineno"> 4092</span>                    getattr(estimator, method)(y)</div>
<div class="line"><span class="lineno"> 4093</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 4094</span>                    getattr(estimator, method)(X, y)</div>
<div class="line"><span class="lineno"> 4095</span> </div>
<div class="line"><span class="lineno"> 4096</span>        <span class="comment"># Then, for constraints that are more than a type constraint, check that the</span></div>
<div class="line"><span class="lineno"> 4097</span>        <span class="comment"># error is raised if param does match a valid type but does not match any valid</span></div>
<div class="line"><span class="lineno"> 4098</span>        <span class="comment"># value for this type.</span></div>
<div class="line"><span class="lineno"> 4099</span>        constraints = [make_constraint(constraint) <span class="keywordflow">for</span> constraint <span class="keywordflow">in</span> constraints]</div>
<div class="line"><span class="lineno"> 4100</span> </div>
<div class="line"><span class="lineno"> 4101</span>        <span class="keywordflow">for</span> constraint <span class="keywordflow">in</span> constraints:</div>
<div class="line"><span class="lineno"> 4102</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 4103</span>                bad_value = generate_invalid_param_val(constraint, constraints)</div>
<div class="line"><span class="lineno"> 4104</span>            <span class="keywordflow">except</span> NotImplementedError:</div>
<div class="line"><span class="lineno"> 4105</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 4106</span> </div>
<div class="line"><span class="lineno"> 4107</span>            estimator.set_params(**{param_name: bad_value})</div>
<div class="line"><span class="lineno"> 4108</span> </div>
<div class="line"><span class="lineno"> 4109</span>            <span class="keywordflow">for</span> method <span class="keywordflow">in</span> fit_methods:</div>
<div class="line"><span class="lineno"> 4110</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(estimator, method):</div>
<div class="line"><span class="lineno"> 4111</span>                    <span class="comment"># the method is not accessible with the current set of parameters</span></div>
<div class="line"><span class="lineno"> 4112</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 4113</span> </div>
<div class="line"><span class="lineno"> 4114</span>                <span class="keyword">with</span> raises(InvalidParameterError, match=match, err_msg=err_msg):</div>
<div class="line"><span class="lineno"> 4115</span>                    <span class="keywordflow">if</span> any(</div>
<div class="line"><span class="lineno"> 4116</span>                        X_type.endswith(<span class="stringliteral">&quot;labels&quot;</span>)</div>
<div class="line"><span class="lineno"> 4117</span>                        <span class="keywordflow">for</span> X_type <span class="keywordflow">in</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;X_types&quot;</span>)</div>
<div class="line"><span class="lineno"> 4118</span>                    ):</div>
<div class="line"><span class="lineno"> 4119</span>                        <span class="comment"># The estimator is a label transformer and take only `y`</span></div>
<div class="line"><span class="lineno"> 4120</span>                        getattr(estimator, method)(y)</div>
<div class="line"><span class="lineno"> 4121</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 4122</span>                        getattr(estimator, method)(X, y)</div>
<div class="line"><span class="lineno"> 4123</span> </div>
<div class="line"><span class="lineno"> 4124</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a204cb0dbbc745c82f2791549e19e4f57" name="a204cb0dbbc745c82f2791549e19e4f57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a204cb0dbbc745c82f2791549e19e4f57">&#9670;&#160;</a></span>check_parameters_default_constructible()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_parameters_default_constructible </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Estimator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3162</span><span class="keyword">def </span>check_parameters_default_constructible(name, Estimator):</div>
<div class="line"><span class="lineno"> 3163</span>    <span class="comment"># test default-constructibility</span></div>
<div class="line"><span class="lineno"> 3164</span>    <span class="comment"># get rid of deprecation warnings</span></div>
<div class="line"><span class="lineno"> 3165</span> </div>
<div class="line"><span class="lineno"> 3166</span>    Estimator = Estimator.__class__</div>
<div class="line"><span class="lineno"> 3167</span> </div>
<div class="line"><span class="lineno"> 3168</span>    <span class="keyword">with</span> ignore_warnings(category=FutureWarning):</div>
<div class="line"><span class="lineno"> 3169</span>        estimator = _construct_instance(Estimator)</div>
<div class="line"><span class="lineno"> 3170</span>        <span class="comment"># test cloning</span></div>
<div class="line"><span class="lineno"> 3171</span>        clone(estimator)</div>
<div class="line"><span class="lineno"> 3172</span>        <span class="comment"># test __repr__</span></div>
<div class="line"><span class="lineno"> 3173</span>        repr(estimator)</div>
<div class="line"><span class="lineno"> 3174</span>        <span class="comment"># test that set_params returns self</span></div>
<div class="line"><span class="lineno"> 3175</span>        <span class="keyword">assert</span> estimator.set_params() <span class="keywordflow">is</span> estimator</div>
<div class="line"><span class="lineno"> 3176</span> </div>
<div class="line"><span class="lineno"> 3177</span>        <span class="comment"># test if init does nothing but set parameters</span></div>
<div class="line"><span class="lineno"> 3178</span>        <span class="comment"># this is important for grid_search etc.</span></div>
<div class="line"><span class="lineno"> 3179</span>        <span class="comment"># We get the default parameters from init and then</span></div>
<div class="line"><span class="lineno"> 3180</span>        <span class="comment"># compare these against the actual values of the attributes.</span></div>
<div class="line"><span class="lineno"> 3181</span> </div>
<div class="line"><span class="lineno"> 3182</span>        <span class="comment"># this comes from getattr. Gets rid of deprecation decorator.</span></div>
<div class="line"><span class="lineno"> 3183</span>        init = getattr(estimator.__init__, <span class="stringliteral">&quot;deprecated_original&quot;</span>, estimator.__init__)</div>
<div class="line"><span class="lineno"> 3184</span> </div>
<div class="line"><span class="lineno"> 3185</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3186</span> </div>
<div class="line"><span class="lineno"> 3187</span>            <span class="keyword">def </span>param_filter(p):</div>
<div class="line"><span class="lineno"> 3188</span>                <span class="stringliteral">&quot;&quot;&quot;Identify hyper parameters of an estimator.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 3189</span>                <span class="keywordflow">return</span> (</div>
<div class="line"><span class="lineno"> 3190</span>                    p.name != <span class="stringliteral">&quot;self&quot;</span></div>
<div class="line"><span class="lineno"> 3191</span>                    <span class="keywordflow">and</span> p.kind != p.VAR_KEYWORD</div>
<div class="line"><span class="lineno"> 3192</span>                    <span class="keywordflow">and</span> p.kind != p.VAR_POSITIONAL</div>
<div class="line"><span class="lineno"> 3193</span>                )</div>
<div class="line"><span class="lineno"> 3194</span> </div>
<div class="line"><span class="lineno"> 3195</span>            init_params = [</div>
<div class="line"><span class="lineno"> 3196</span>                p <span class="keywordflow">for</span> p <span class="keywordflow">in</span> signature(init).parameters.values() <span class="keywordflow">if</span> param_filter(p)</div>
<div class="line"><span class="lineno"> 3197</span>            ]</div>
<div class="line"><span class="lineno"> 3198</span> </div>
<div class="line"><span class="lineno"> 3199</span>        <span class="keywordflow">except</span> (TypeError, ValueError):</div>
<div class="line"><span class="lineno"> 3200</span>            <span class="comment"># init is not a python function.</span></div>
<div class="line"><span class="lineno"> 3201</span>            <span class="comment"># true for mixins</span></div>
<div class="line"><span class="lineno"> 3202</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3203</span>        params = estimator.get_params()</div>
<div class="line"><span class="lineno"> 3204</span>        <span class="comment"># they can need a non-default argument</span></div>
<div class="line"><span class="lineno"> 3205</span>        init_params = init_params[len(getattr(estimator, <span class="stringliteral">&quot;_required_parameters&quot;</span>, [])) :]</div>
<div class="line"><span class="lineno"> 3206</span> </div>
<div class="line"><span class="lineno"> 3207</span>        <span class="keywordflow">for</span> init_param <span class="keywordflow">in</span> init_params:</div>
<div class="line"><span class="lineno"> 3208</span>            <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 3209</span>                init_param.default != init_param.empty</div>
<div class="line"><span class="lineno"> 3210</span>            ), <span class="stringliteral">&quot;parameter %s for %s has no default value&quot;</span> % (</div>
<div class="line"><span class="lineno"> 3211</span>                init_param.name,</div>
<div class="line"><span class="lineno"> 3212</span>                type(estimator).__name__,</div>
<div class="line"><span class="lineno"> 3213</span>            )</div>
<div class="line"><span class="lineno"> 3214</span>            allowed_types = {</div>
<div class="line"><span class="lineno"> 3215</span>                str,</div>
<div class="line"><span class="lineno"> 3216</span>                int,</div>
<div class="line"><span class="lineno"> 3217</span>                float,</div>
<div class="line"><span class="lineno"> 3218</span>                bool,</div>
<div class="line"><span class="lineno"> 3219</span>                tuple,</div>
<div class="line"><span class="lineno"> 3220</span>                type(<span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno"> 3221</span>                type,</div>
<div class="line"><span class="lineno"> 3222</span>                types.FunctionType,</div>
<div class="line"><span class="lineno"> 3223</span>                <a class="code hl_class" href="classjoblib_1_1memory_1_1_memory.html">joblib.Memory</a>,</div>
<div class="line"><span class="lineno"> 3224</span>            }</div>
<div class="line"><span class="lineno"> 3225</span>            <span class="comment"># Any numpy numeric such as np.int32.</span></div>
<div class="line"><span class="lineno"> 3226</span>            allowed_types.update(np.core.numerictypes.allTypes.values())</div>
<div class="line"><span class="lineno"> 3227</span>            <span class="keyword">assert</span> type(init_param.default) <span class="keywordflow">in</span> allowed_types, (</div>
<div class="line"><span class="lineno"> 3228</span>                f<span class="stringliteral">&quot;Parameter &#39;{init_param.name}&#39; of estimator &quot;</span></div>
<div class="line"><span class="lineno"> 3229</span>                f<span class="stringliteral">&quot;&#39;{Estimator.__name__}&#39; is of type &quot;</span></div>
<div class="line"><span class="lineno"> 3230</span>                f<span class="stringliteral">&quot;{type(init_param.default).__name__} which is not &quot;</span></div>
<div class="line"><span class="lineno"> 3231</span>                <span class="stringliteral">&quot;allowed. All init parameters have to be immutable to &quot;</span></div>
<div class="line"><span class="lineno"> 3232</span>                <span class="stringliteral">&quot;make cloning possible. Therefore we restrict the set of &quot;</span></div>
<div class="line"><span class="lineno"> 3233</span>                <span class="stringliteral">&quot;legal types to &quot;</span></div>
<div class="line"><span class="lineno"> 3234</span>                f<span class="stringliteral">&quot;{set(type.__name__ for type in allowed_types)}.&quot;</span></div>
<div class="line"><span class="lineno"> 3235</span>            )</div>
<div class="line"><span class="lineno"> 3236</span>            <span class="keywordflow">if</span> init_param.name <span class="keywordflow">not</span> <span class="keywordflow">in</span> params.keys():</div>
<div class="line"><span class="lineno"> 3237</span>                <span class="comment"># deprecated parameter, not in get_params</span></div>
<div class="line"><span class="lineno"> 3238</span>                <span class="keyword">assert</span> init_param.default <span class="keywordflow">is</span> <span class="keywordtype">None</span>, (</div>
<div class="line"><span class="lineno"> 3239</span>                    f<span class="stringliteral">&quot;Estimator parameter &#39;{init_param.name}&#39; of estimator &quot;</span></div>
<div class="line"><span class="lineno"> 3240</span>                    f<span class="stringliteral">&quot;&#39;{Estimator.__name__}&#39; is not returned by get_params. &quot;</span></div>
<div class="line"><span class="lineno"> 3241</span>                    <span class="stringliteral">&quot;If it is deprecated, set its default value to None.&quot;</span></div>
<div class="line"><span class="lineno"> 3242</span>                )</div>
<div class="line"><span class="lineno"> 3243</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 3244</span> </div>
<div class="line"><span class="lineno"> 3245</span>            param_value = params[init_param.name]</div>
<div class="line"><span class="lineno"> 3246</span>            <span class="keywordflow">if</span> isinstance(param_value, np.ndarray):</div>
<div class="line"><span class="lineno"> 3247</span>                assert_array_equal(param_value, init_param.default)</div>
<div class="line"><span class="lineno"> 3248</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3249</span>                failure_text = (</div>
<div class="line"><span class="lineno"> 3250</span>                    f<span class="stringliteral">&quot;Parameter {init_param.name} was mutated on init. All &quot;</span></div>
<div class="line"><span class="lineno"> 3251</span>                    <span class="stringliteral">&quot;parameters must be stored unchanged.&quot;</span></div>
<div class="line"><span class="lineno"> 3252</span>                )</div>
<div class="line"><span class="lineno"> 3253</span>                <span class="keywordflow">if</span> is_scalar_nan(param_value):</div>
<div class="line"><span class="lineno"> 3254</span>                    <span class="comment"># Allows to set default parameters to np.nan</span></div>
<div class="line"><span class="lineno"> 3255</span>                    <span class="keyword">assert</span> param_value <span class="keywordflow">is</span> init_param.default, failure_text</div>
<div class="line"><span class="lineno"> 3256</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3257</span>                    <span class="keyword">assert</span> param_value == init_param.default, failure_text</div>
<div class="line"><span class="lineno"> 3258</span> </div>
<div class="line"><span class="lineno"> 3259</span> </div>
<div class="ttc" id="aclassjoblib_1_1memory_1_1_memory_html"><div class="ttname"><a href="classjoblib_1_1memory_1_1_memory.html">joblib.memory.Memory</a></div><div class="ttdef"><b>Definition</b> memory.py:856</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5341a27bf637423af328271fb1f6456b" name="a5341a27bf637423af328271fb1f6456b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5341a27bf637423af328271fb1f6456b">&#9670;&#160;</a></span>check_pipeline_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_pipeline_consistency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1646</span><span class="keyword">def </span>check_pipeline_consistency(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1647</span>    <span class="keywordflow">if</span> _safe_tags(estimator_orig, key=<span class="stringliteral">&quot;non_deterministic&quot;</span>):</div>
<div class="line"><span class="lineno"> 1648</span>        msg = name + <span class="stringliteral">&quot; is non deterministic&quot;</span></div>
<div class="line"><span class="lineno"> 1649</span>        <span class="keywordflow">raise</span> SkipTest(msg)</div>
<div class="line"><span class="lineno"> 1650</span> </div>
<div class="line"><span class="lineno"> 1651</span>    <span class="comment"># check that make_pipeline(est) gives same score as est</span></div>
<div class="line"><span class="lineno"> 1652</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 1653</span>        n_samples=30,</div>
<div class="line"><span class="lineno"> 1654</span>        centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 1655</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 1656</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 1657</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 1658</span>    )</div>
<div class="line"><span class="lineno"> 1659</span>    X = _enforce_estimator_tags_X(estimator_orig, X, kernel=rbf_kernel)</div>
<div class="line"><span class="lineno"> 1660</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1661</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1662</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 1663</span>    pipeline = make_pipeline(estimator)</div>
<div class="line"><span class="lineno"> 1664</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 1665</span>    pipeline.fit(X, y)</div>
<div class="line"><span class="lineno"> 1666</span> </div>
<div class="line"><span class="lineno"> 1667</span>    funcs = [<span class="stringliteral">&quot;score&quot;</span>, <span class="stringliteral">&quot;fit_transform&quot;</span>]</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>    <span class="keywordflow">for</span> func_name <span class="keywordflow">in</span> funcs:</div>
<div class="line"><span class="lineno"> 1670</span>        func = getattr(estimator, func_name, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1671</span>        <span class="keywordflow">if</span> func <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1672</span>            func_pipeline = getattr(pipeline, func_name)</div>
<div class="line"><span class="lineno"> 1673</span>            result = <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(X, y)</div>
<div class="line"><span class="lineno"> 1674</span>            result_pipe = func_pipeline(X, y)</div>
<div class="line"><span class="lineno"> 1675</span>            assert_allclose_dense_sparse(result, result_pipe)</div>
<div class="line"><span class="lineno"> 1676</span> </div>
<div class="line"><span class="lineno"> 1677</span> </div>
<div class="line"><span class="lineno"> 1678</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8495257789e21c410dd524aeb0d8a355" name="a8495257789e21c410dd524aeb0d8a355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8495257789e21c410dd524aeb0d8a355">&#9670;&#160;</a></span>check_regressor_data_not_an_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_regressor_data_not_an_array </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3107</span><span class="keyword">def </span>check_regressor_data_not_an_array(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3108</span>    X, y = _regression_dataset()</div>
<div class="line"><span class="lineno"> 3109</span>    X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 3110</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 3111</span>    <span class="keywordflow">for</span> obj_type <span class="keywordflow">in</span> [<span class="stringliteral">&quot;NotAnArray&quot;</span>, <span class="stringliteral">&quot;PandasDataframe&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3112</span>        check_estimators_data_not_an_array(name, estimator_orig, X, y, obj_type)</div>
<div class="line"><span class="lineno"> 3113</span> </div>
<div class="line"><span class="lineno"> 3114</span> </div>
<div class="line"><span class="lineno"> 3115</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4792115dd99820af5815df3f7bee88af" name="a4792115dd99820af5815df3f7bee88af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4792115dd99820af5815df3f7bee88af">&#9670;&#160;</a></span>check_regressor_multioutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_regressor_multioutput </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1994</span><span class="keyword">def </span>check_regressor_multioutput(name, estimator):</div>
<div class="line"><span class="lineno"> 1995</span>    estimator = clone(estimator)</div>
<div class="line"><span class="lineno"> 1996</span>    n_samples = n_features = 10</div>
<div class="line"><span class="lineno"> 1997</span> </div>
<div class="line"><span class="lineno"> 1998</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> _is_pairwise_metric(estimator):</div>
<div class="line"><span class="lineno"> 1999</span>        n_samples = n_samples + 1</div>
<div class="line"><span class="lineno"> 2000</span> </div>
<div class="line"><span class="lineno"> 2001</span>    X, y = make_regression(</div>
<div class="line"><span class="lineno"> 2002</span>        random_state=42, n_targets=5, n_samples=n_samples, n_features=n_features</div>
<div class="line"><span class="lineno"> 2003</span>    )</div>
<div class="line"><span class="lineno"> 2004</span>    X = _enforce_estimator_tags_X(estimator, X)</div>
<div class="line"><span class="lineno"> 2005</span> </div>
<div class="line"><span class="lineno"> 2006</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 2007</span>    y_pred = estimator.predict(X)</div>
<div class="line"><span class="lineno"> 2008</span> </div>
<div class="line"><span class="lineno"> 2009</span>    <span class="keyword">assert</span> y_pred.dtype == np.dtype(<span class="stringliteral">&quot;float64&quot;</span>), (</div>
<div class="line"><span class="lineno"> 2010</span>        <span class="stringliteral">&quot;Multioutput predictions by a regressor are expected to be&quot;</span></div>
<div class="line"><span class="lineno"> 2011</span>        <span class="stringliteral">&quot; floating-point precision. Got {} instead&quot;</span>.format(y_pred.dtype)</div>
<div class="line"><span class="lineno"> 2012</span>    )</div>
<div class="line"><span class="lineno"> 2013</span>    <span class="keyword">assert</span> y_pred.shape == y.shape, (</div>
<div class="line"><span class="lineno"> 2014</span>        <span class="stringliteral">&quot;The shape of the prediction for multioutput data is incorrect.&quot;</span></div>
<div class="line"><span class="lineno"> 2015</span>        <span class="stringliteral">&quot; Expected {}, got {}.&quot;</span></div>
<div class="line"><span class="lineno"> 2016</span>    )</div>
<div class="line"><span class="lineno"> 2017</span> </div>
<div class="line"><span class="lineno"> 2018</span> </div>
<div class="line"><span class="lineno"> 2019</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab58909a0c0e2531869ac50929cacbf15" name="ab58909a0c0e2531869ac50929cacbf15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab58909a0c0e2531869ac50929cacbf15">&#9670;&#160;</a></span>check_regressors_int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_regressors_int </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>regressor_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2772</span><span class="keyword">def </span>check_regressors_int(name, regressor_orig):</div>
<div class="line"><span class="lineno"> 2773</span>    X, _ = _regression_dataset()</div>
<div class="line"><span class="lineno"> 2774</span>    X = _enforce_estimator_tags_X(regressor_orig, X[:50])</div>
<div class="line"><span class="lineno"> 2775</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 2776</span>    y = rnd.randint(3, size=X.shape[0])</div>
<div class="line"><span class="lineno"> 2777</span>    y = _enforce_estimator_tags_y(regressor_orig, y)</div>
<div class="line"><span class="lineno"> 2778</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 2779</span>    <span class="comment"># separate estimators to control random seeds</span></div>
<div class="line"><span class="lineno"> 2780</span>    regressor_1 = clone(regressor_orig)</div>
<div class="line"><span class="lineno"> 2781</span>    regressor_2 = clone(regressor_orig)</div>
<div class="line"><span class="lineno"> 2782</span>    set_random_state(regressor_1)</div>
<div class="line"><span class="lineno"> 2783</span>    set_random_state(regressor_2)</div>
<div class="line"><span class="lineno"> 2784</span> </div>
<div class="line"><span class="lineno"> 2785</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 2786</span>        y_ = np.vstack([y, 2 * y + rnd.randint(2, size=len(y))])</div>
<div class="line"><span class="lineno"> 2787</span>        y_ = y_.T</div>
<div class="line"><span class="lineno"> 2788</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2789</span>        y_ = y</div>
<div class="line"><span class="lineno"> 2790</span> </div>
<div class="line"><span class="lineno"> 2791</span>    <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 2792</span>    regressor_1.fit(X, y_)</div>
<div class="line"><span class="lineno"> 2793</span>    pred1 = regressor_1.predict(X)</div>
<div class="line"><span class="lineno"> 2794</span>    regressor_2.fit(X, y_.astype(float))</div>
<div class="line"><span class="lineno"> 2795</span>    pred2 = regressor_2.predict(X)</div>
<div class="line"><span class="lineno"> 2796</span>    assert_allclose(pred1, pred2, atol=1e-2, err_msg=name)</div>
<div class="line"><span class="lineno"> 2797</span> </div>
<div class="line"><span class="lineno"> 2798</span> </div>
<div class="line"><span class="lineno"> 2799</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78d3c6e6fb3be3daf686db92779a3424" name="a78d3c6e6fb3be3daf686db92779a3424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78d3c6e6fb3be3daf686db92779a3424">&#9670;&#160;</a></span>check_regressors_no_decision_function()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_regressors_no_decision_function </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>regressor_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2851</span><span class="keyword">def </span>check_regressors_no_decision_function(name, regressor_orig):</div>
<div class="line"><span class="lineno"> 2852</span>    <span class="comment"># check that regressors don&#39;t have a decision_function, predict_proba, or</span></div>
<div class="line"><span class="lineno"> 2853</span>    <span class="comment"># predict_log_proba method.</span></div>
<div class="line"><span class="lineno"> 2854</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 2855</span>    regressor = clone(regressor_orig)</div>
<div class="line"><span class="lineno"> 2856</span> </div>
<div class="line"><span class="lineno"> 2857</span>    X = rng.normal(size=(10, 4))</div>
<div class="line"><span class="lineno"> 2858</span>    X = _enforce_estimator_tags_X(regressor_orig, X)</div>
<div class="line"><span class="lineno"> 2859</span>    y = _enforce_estimator_tags_y(regressor, X[:, 0])</div>
<div class="line"><span class="lineno"> 2860</span> </div>
<div class="line"><span class="lineno"> 2861</span>    regressor.fit(X, y)</div>
<div class="line"><span class="lineno"> 2862</span>    funcs = [<span class="stringliteral">&quot;decision_function&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>, <span class="stringliteral">&quot;predict_log_proba&quot;</span>]</div>
<div class="line"><span class="lineno"> 2863</span>    <span class="keywordflow">for</span> func_name <span class="keywordflow">in</span> funcs:</div>
<div class="line"><span class="lineno"> 2864</span>        <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(regressor, func_name)</div>
<div class="line"><span class="lineno"> 2865</span> </div>
<div class="line"><span class="lineno"> 2866</span> </div>
<div class="line"><span class="lineno"> 2867</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f23ac95918b09a0cf86d24aa86508fb" name="a8f23ac95918b09a0cf86d24aa86508fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f23ac95918b09a0cf86d24aa86508fb">&#9670;&#160;</a></span>check_regressors_train()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_regressors_train </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>regressor_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readonly_memmap</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_dtype</em> = <code>np.float64</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2802</span>):</div>
<div class="line"><span class="lineno"> 2803</span>    X, y = _regression_dataset()</div>
<div class="line"><span class="lineno"> 2804</span>    X = X.astype(X_dtype)</div>
<div class="line"><span class="lineno"> 2805</span>    y = scale(y)  <span class="comment"># X is already scaled</span></div>
<div class="line"><span class="lineno"> 2806</span>    regressor = clone(regressor_orig)</div>
<div class="line"><span class="lineno"> 2807</span>    X = _enforce_estimator_tags_X(regressor, X)</div>
<div class="line"><span class="lineno"> 2808</span>    y = _enforce_estimator_tags_y(regressor, y)</div>
<div class="line"><span class="lineno"> 2809</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 2810</span>        rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 2811</span>        y_ = np.vstack([y, 2 * y + rnd.randint(2, size=len(y))])</div>
<div class="line"><span class="lineno"> 2812</span>        y_ = y_.T</div>
<div class="line"><span class="lineno"> 2813</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2814</span>        y_ = y</div>
<div class="line"><span class="lineno"> 2815</span> </div>
<div class="line"><span class="lineno"> 2816</span>    <span class="keywordflow">if</span> readonly_memmap:</div>
<div class="line"><span class="lineno"> 2817</span>        X, y, y_ = create_memmap_backed_data([X, y, y_])</div>
<div class="line"><span class="lineno"> 2818</span> </div>
<div class="line"><span class="lineno"> 2819</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(regressor, <span class="stringliteral">&quot;alphas&quot;</span>) <span class="keywordflow">and</span> hasattr(regressor, <span class="stringliteral">&quot;alpha&quot;</span>):</div>
<div class="line"><span class="lineno"> 2820</span>        <span class="comment"># linear regressors need to set alpha, but not generalized CV ones</span></div>
<div class="line"><span class="lineno"> 2821</span>        regressor.alpha = 0.01</div>
<div class="line"><span class="lineno"> 2822</span>    <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;PassiveAggressiveRegressor&quot;</span>:</div>
<div class="line"><span class="lineno"> 2823</span>        regressor.C = 0.01</div>
<div class="line"><span class="lineno"> 2824</span> </div>
<div class="line"><span class="lineno"> 2825</span>    <span class="comment"># raises error on malformed input for fit</span></div>
<div class="line"><span class="lineno"> 2826</span>    <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 2827</span>        ValueError,</div>
<div class="line"><span class="lineno"> 2828</span>        err_msg=(</div>
<div class="line"><span class="lineno"> 2829</span>            f<span class="stringliteral">&quot;The classifier {name} does not raise an error when &quot;</span></div>
<div class="line"><span class="lineno"> 2830</span>            <span class="stringliteral">&quot;incorrect/malformed input data for fit is passed. The number of &quot;</span></div>
<div class="line"><span class="lineno"> 2831</span>            <span class="stringliteral">&quot;training examples is not the same as the number of labels. Perhaps &quot;</span></div>
<div class="line"><span class="lineno"> 2832</span>            <span class="stringliteral">&quot;use check_X_y in fit.&quot;</span></div>
<div class="line"><span class="lineno"> 2833</span>        ),</div>
<div class="line"><span class="lineno"> 2834</span>    ):</div>
<div class="line"><span class="lineno"> 2835</span>        regressor.fit(X, y[:-1])</div>
<div class="line"><span class="lineno"> 2836</span>    <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 2837</span>    set_random_state(regressor)</div>
<div class="line"><span class="lineno"> 2838</span>    regressor.fit(X, y_)</div>
<div class="line"><span class="lineno"> 2839</span>    regressor.fit(X.tolist(), y_.tolist())</div>
<div class="line"><span class="lineno"> 2840</span>    y_pred = regressor.predict(X)</div>
<div class="line"><span class="lineno"> 2841</span>    <span class="keyword">assert</span> y_pred.shape == y_.shape</div>
<div class="line"><span class="lineno"> 2842</span> </div>
<div class="line"><span class="lineno"> 2843</span>    <span class="comment"># TODO: find out why PLS and CCA fail. RANSAC is random</span></div>
<div class="line"><span class="lineno"> 2844</span>    <span class="comment"># and furthermore assumes the presence of outliers, hence</span></div>
<div class="line"><span class="lineno"> 2845</span>    <span class="comment"># skipped</span></div>
<div class="line"><span class="lineno"> 2846</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> _safe_tags(regressor, key=<span class="stringliteral">&quot;poor_score&quot;</span>):</div>
<div class="line"><span class="lineno"> 2847</span>        <span class="keyword">assert</span> regressor.score(X, y_) &gt; 0.5</div>
<div class="line"><span class="lineno"> 2848</span> </div>
<div class="line"><span class="lineno"> 2849</span> </div>
<div class="line"><span class="lineno"> 2850</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace5bedb55bd73a968295179ad9724377" name="ace5bedb55bd73a968295179ad9724377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace5bedb55bd73a968295179ad9724377">&#9670;&#160;</a></span>check_requires_y_none()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_requires_y_none </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3680</span><span class="keyword">def </span>check_requires_y_none(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3681</span>    <span class="comment"># Make sure that an estimator with requires_y=True fails gracefully when</span></div>
<div class="line"><span class="lineno"> 3682</span>    <span class="comment"># given y=None</span></div>
<div class="line"><span class="lineno"> 3683</span> </div>
<div class="line"><span class="lineno"> 3684</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 3685</span> </div>
<div class="line"><span class="lineno"> 3686</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3687</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 3688</span> </div>
<div class="line"><span class="lineno"> 3689</span>    n_samples = 100</div>
<div class="line"><span class="lineno"> 3690</span>    X = rng.normal(loc=100, size=(n_samples, 2))</div>
<div class="line"><span class="lineno"> 3691</span>    X = _enforce_estimator_tags_X(estimator, X)</div>
<div class="line"><span class="lineno"> 3692</span> </div>
<div class="line"><span class="lineno"> 3693</span>    expected_err_msgs = (</div>
<div class="line"><span class="lineno"> 3694</span>        <span class="stringliteral">&quot;requires y to be passed, but the target y is None&quot;</span>,</div>
<div class="line"><span class="lineno"> 3695</span>        <span class="stringliteral">&quot;Expected array-like (array or non-string sequence), got None&quot;</span>,</div>
<div class="line"><span class="lineno"> 3696</span>        <span class="stringliteral">&quot;y should be a 1d array&quot;</span>,</div>
<div class="line"><span class="lineno"> 3697</span>    )</div>
<div class="line"><span class="lineno"> 3698</span> </div>
<div class="line"><span class="lineno"> 3699</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3700</span>        estimator.fit(X, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 3701</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> ve:</div>
<div class="line"><span class="lineno"> 3702</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> any(msg <span class="keywordflow">in</span> str(ve) <span class="keywordflow">for</span> msg <span class="keywordflow">in</span> expected_err_msgs):</div>
<div class="line"><span class="lineno"> 3703</span>            <span class="keywordflow">raise</span> ve</div>
<div class="line"><span class="lineno"> 3704</span> </div>
<div class="line"><span class="lineno"> 3705</span> </div>
<div class="line"><span class="lineno"> 3706</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6c8fbdaa52371639c9dc7f5c98a2813" name="af6c8fbdaa52371639c9dc7f5c98a2813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6c8fbdaa52371639c9dc7f5c98a2813">&#9670;&#160;</a></span>check_sample_weights_invariance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_sample_weights_invariance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kind</em> = <code>&quot;ones&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1025</span><span class="keyword">def </span>check_sample_weights_invariance(name, estimator_orig, kind=&quot;ones&quot;):</div>
<div class="line"><span class="lineno"> 1026</span>    <span class="comment"># For kind=&quot;ones&quot; check that the estimators yield same results for</span></div>
<div class="line"><span class="lineno"> 1027</span>    <span class="comment"># unit weights and no weights</span></div>
<div class="line"><span class="lineno"> 1028</span>    <span class="comment"># For kind=&quot;zeros&quot; check that setting sample_weight to 0 is equivalent</span></div>
<div class="line"><span class="lineno"> 1029</span>    <span class="comment"># to removing corresponding samples.</span></div>
<div class="line"><span class="lineno"> 1030</span>    estimator1 = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1031</span>    estimator2 = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1032</span>    set_random_state(estimator1, random_state=0)</div>
<div class="line"><span class="lineno"> 1033</span>    set_random_state(estimator2, random_state=0)</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>    X1 = np.array(</div>
<div class="line"><span class="lineno"> 1036</span>        [</div>
<div class="line"><span class="lineno"> 1037</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1038</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1039</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1040</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1041</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1042</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1043</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1044</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1045</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1046</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1047</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1048</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1049</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1050</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1051</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1052</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1053</span>        ],</div>
<div class="line"><span class="lineno"> 1054</span>        dtype=np.float64,</div>
<div class="line"><span class="lineno"> 1055</span>    )</div>
<div class="line"><span class="lineno"> 1056</span>    y1 = np.array([1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 2], dtype=int)</div>
<div class="line"><span class="lineno"> 1057</span> </div>
<div class="line"><span class="lineno"> 1058</span>    <span class="keywordflow">if</span> kind == <span class="stringliteral">&quot;ones&quot;</span>:</div>
<div class="line"><span class="lineno"> 1059</span>        X2 = X1</div>
<div class="line"><span class="lineno"> 1060</span>        y2 = y1</div>
<div class="line"><span class="lineno"> 1061</span>        sw2 = np.ones(shape=len(y1))</div>
<div class="line"><span class="lineno"> 1062</span>        err_msg = (</div>
<div class="line"><span class="lineno"> 1063</span>            f<span class="stringliteral">&quot;For {name} sample_weight=None is not equivalent to sample_weight=ones&quot;</span></div>
<div class="line"><span class="lineno"> 1064</span>        )</div>
<div class="line"><span class="lineno"> 1065</span>    <span class="keywordflow">elif</span> kind == <span class="stringliteral">&quot;zeros&quot;</span>:</div>
<div class="line"><span class="lineno"> 1066</span>        <span class="comment"># Construct a dataset that is very different to (X, y) if weights</span></div>
<div class="line"><span class="lineno"> 1067</span>        <span class="comment"># are disregarded, but identical to (X, y) given weights.</span></div>
<div class="line"><span class="lineno"> 1068</span>        X2 = np.vstack([X1, X1 + 1])</div>
<div class="line"><span class="lineno"> 1069</span>        y2 = np.hstack([y1, 3 - y1])</div>
<div class="line"><span class="lineno"> 1070</span>        sw2 = np.ones(shape=len(y1) * 2)</div>
<div class="line"><span class="lineno"> 1071</span>        sw2[len(y1) :] = 0</div>
<div class="line"><span class="lineno"> 1072</span>        X2, y2, sw2 = shuffle(X2, y2, sw2, random_state=0)</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>        err_msg = (</div>
<div class="line"><span class="lineno"> 1075</span>            f<span class="stringliteral">&quot;For {name}, a zero sample_weight is not equivalent to removing the sample&quot;</span></div>
<div class="line"><span class="lineno"> 1076</span>        )</div>
<div class="line"><span class="lineno"> 1077</span>    <span class="keywordflow">else</span>:  <span class="comment"># pragma: no cover</span></div>
<div class="line"><span class="lineno"> 1078</span>        <span class="keywordflow">raise</span> ValueError</div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span>    y1 = _enforce_estimator_tags_y(estimator1, y1)</div>
<div class="line"><span class="lineno"> 1081</span>    y2 = _enforce_estimator_tags_y(estimator2, y2)</div>
<div class="line"><span class="lineno"> 1082</span> </div>
<div class="line"><span class="lineno"> 1083</span>    estimator1.fit(X1, y=y1, sample_weight=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1084</span>    estimator2.fit(X2, y=y2, sample_weight=sw2)</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> [<span class="stringliteral">&quot;predict&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>, <span class="stringliteral">&quot;decision_function&quot;</span>, <span class="stringliteral">&quot;transform&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1087</span>        <span class="keywordflow">if</span> hasattr(estimator_orig, method):</div>
<div class="line"><span class="lineno"> 1088</span>            X_pred1 = getattr(estimator1, method)(X1)</div>
<div class="line"><span class="lineno"> 1089</span>            X_pred2 = getattr(estimator2, method)(X1)</div>
<div class="line"><span class="lineno"> 1090</span>            assert_allclose_dense_sparse(X_pred1, X_pred2, err_msg=err_msg)</div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a13c59568b0c60a5c844bb4e7bd9f1930" name="a13c59568b0c60a5c844bb4e7bd9f1930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c59568b0c60a5c844bb4e7bd9f1930">&#9670;&#160;</a></span>check_sample_weights_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_sample_weights_list </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  973</span><span class="keyword">def </span>check_sample_weights_list(name, estimator_orig):</div>
<div class="line"><span class="lineno">  974</span>    <span class="comment"># check that estimators will accept a &#39;sample_weight&#39; parameter of</span></div>
<div class="line"><span class="lineno">  975</span>    <span class="comment"># type list in the &#39;fit&#39; function.</span></div>
<div class="line"><span class="lineno">  976</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno">  977</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  978</span>    n_samples = 30</div>
<div class="line"><span class="lineno">  979</span>    X = _enforce_estimator_tags_X(estimator_orig, rnd.uniform(size=(n_samples, 3)))</div>
<div class="line"><span class="lineno">  980</span>    y = np.arange(n_samples) % 3</div>
<div class="line"><span class="lineno">  981</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno">  982</span>    sample_weight = [3] * n_samples</div>
<div class="line"><span class="lineno">  983</span>    <span class="comment"># Test that estimators don&#39;t raise any exception</span></div>
<div class="line"><span class="lineno">  984</span>    estimator.fit(X, y, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno">  985</span> </div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1f6066f3e644c85bdefc66c894c3f26" name="ad1f6066f3e644c85bdefc66c894c3f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f6066f3e644c85bdefc66c894c3f26">&#9670;&#160;</a></span>check_sample_weights_not_an_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_sample_weights_not_an_array </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  944</span><span class="keyword">def </span>check_sample_weights_not_an_array(name, estimator_orig):</div>
<div class="line"><span class="lineno">  945</span>    <span class="comment"># check that estimators will accept a &#39;sample_weight&#39; parameter of</span></div>
<div class="line"><span class="lineno">  946</span>    <span class="comment"># type _NotAnArray in the &#39;fit&#39; function.</span></div>
<div class="line"><span class="lineno">  947</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno">  948</span>    X = np.array(</div>
<div class="line"><span class="lineno">  949</span>        [</div>
<div class="line"><span class="lineno">  950</span>            [1, 1],</div>
<div class="line"><span class="lineno">  951</span>            [1, 2],</div>
<div class="line"><span class="lineno">  952</span>            [1, 3],</div>
<div class="line"><span class="lineno">  953</span>            [1, 4],</div>
<div class="line"><span class="lineno">  954</span>            [2, 1],</div>
<div class="line"><span class="lineno">  955</span>            [2, 2],</div>
<div class="line"><span class="lineno">  956</span>            [2, 3],</div>
<div class="line"><span class="lineno">  957</span>            [2, 4],</div>
<div class="line"><span class="lineno">  958</span>            [3, 1],</div>
<div class="line"><span class="lineno">  959</span>            [3, 2],</div>
<div class="line"><span class="lineno">  960</span>            [3, 3],</div>
<div class="line"><span class="lineno">  961</span>            [3, 4],</div>
<div class="line"><span class="lineno">  962</span>        ]</div>
<div class="line"><span class="lineno">  963</span>    )</div>
<div class="line"><span class="lineno">  964</span>    X = _NotAnArray(_enforce_estimator_tags_X(estimator_orig, X))</div>
<div class="line"><span class="lineno">  965</span>    y = _NotAnArray([1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 2, 2])</div>
<div class="line"><span class="lineno">  966</span>    weights = _NotAnArray([1] * 12)</div>
<div class="line"><span class="lineno">  967</span>    <span class="keywordflow">if</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;multioutput_only&quot;</span>):</div>
<div class="line"><span class="lineno">  968</span>        y = _NotAnArray(y.data.reshape(-1, 1))</div>
<div class="line"><span class="lineno">  969</span>    estimator.fit(X, y, sample_weight=weights)</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span> </div>
<div class="line"><span class="lineno">  972</span><span class="preprocessor">@ignore_warnings(category=(FutureWarning)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d76f1e3f7aeb62183fa2bb441461670" name="a3d76f1e3f7aeb62183fa2bb441461670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d76f1e3f7aeb62183fa2bb441461670">&#9670;&#160;</a></span>check_sample_weights_not_overwritten()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_sample_weights_not_overwritten </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1093</span><span class="keyword">def </span>check_sample_weights_not_overwritten(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 1094</span>    <span class="comment"># check that estimators don&#39;t override the passed sample_weight parameter</span></div>
<div class="line"><span class="lineno"> 1095</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 1096</span>    set_random_state(estimator, random_state=0)</div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>    X = np.array(</div>
<div class="line"><span class="lineno"> 1099</span>        [</div>
<div class="line"><span class="lineno"> 1100</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1101</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1102</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1103</span>            [1, 3],</div>
<div class="line"><span class="lineno"> 1104</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1105</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1106</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1107</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1108</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1109</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1110</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1111</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1112</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1113</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1114</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1115</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1116</span>        ],</div>
<div class="line"><span class="lineno"> 1117</span>        dtype=np.float64,</div>
<div class="line"><span class="lineno"> 1118</span>    )</div>
<div class="line"><span class="lineno"> 1119</span>    y = np.array([1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 2], dtype=int)</div>
<div class="line"><span class="lineno"> 1120</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1121</span> </div>
<div class="line"><span class="lineno"> 1122</span>    sample_weight_original = np.ones(y.shape[0])</div>
<div class="line"><span class="lineno"> 1123</span>    sample_weight_original[0] = 10.0</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>    sample_weight_fit = sample_weight_original.copy()</div>
<div class="line"><span class="lineno"> 1126</span> </div>
<div class="line"><span class="lineno"> 1127</span>    estimator.fit(X, y, sample_weight=sample_weight_fit)</div>
<div class="line"><span class="lineno"> 1128</span> </div>
<div class="line"><span class="lineno"> 1129</span>    err_msg = f<span class="stringliteral">&quot;{name} overwrote the original `sample_weight` given during fit&quot;</span></div>
<div class="line"><span class="lineno"> 1130</span>    assert_allclose(sample_weight_fit, sample_weight_original, err_msg=err_msg)</div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span><span class="preprocessor">@ignore_warnings(category=(FutureWarning, UserWarning)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c028210d257470b3fd1caa203f529be" name="a0c028210d257470b3fd1caa203f529be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c028210d257470b3fd1caa203f529be">&#9670;&#160;</a></span>check_sample_weights_pandas_series()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_sample_weights_pandas_series </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  900</span><span class="keyword">def </span>check_sample_weights_pandas_series(name, estimator_orig):</div>
<div class="line"><span class="lineno">  901</span>    <span class="comment"># check that estimators will accept a &#39;sample_weight&#39; parameter of</span></div>
<div class="line"><span class="lineno">  902</span>    <span class="comment"># type pandas.Series in the &#39;fit&#39; function.</span></div>
<div class="line"><span class="lineno">  903</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno">  904</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  905</span>        <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>        X = np.array(</div>
<div class="line"><span class="lineno">  908</span>            [</div>
<div class="line"><span class="lineno">  909</span>                [1, 1],</div>
<div class="line"><span class="lineno">  910</span>                [1, 2],</div>
<div class="line"><span class="lineno">  911</span>                [1, 3],</div>
<div class="line"><span class="lineno">  912</span>                [1, 4],</div>
<div class="line"><span class="lineno">  913</span>                [2, 1],</div>
<div class="line"><span class="lineno">  914</span>                [2, 2],</div>
<div class="line"><span class="lineno">  915</span>                [2, 3],</div>
<div class="line"><span class="lineno">  916</span>                [2, 4],</div>
<div class="line"><span class="lineno">  917</span>                [3, 1],</div>
<div class="line"><span class="lineno">  918</span>                [3, 2],</div>
<div class="line"><span class="lineno">  919</span>                [3, 3],</div>
<div class="line"><span class="lineno">  920</span>                [3, 4],</div>
<div class="line"><span class="lineno">  921</span>            ]</div>
<div class="line"><span class="lineno">  922</span>        )</div>
<div class="line"><span class="lineno">  923</span>        X = pd.DataFrame(_enforce_estimator_tags_X(estimator_orig, X))</div>
<div class="line"><span class="lineno">  924</span>        y = pd.Series([1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 2, 2])</div>
<div class="line"><span class="lineno">  925</span>        weights = pd.Series([1] * 12)</div>
<div class="line"><span class="lineno">  926</span>        <span class="keywordflow">if</span> _safe_tags(estimator, key=<span class="stringliteral">&quot;multioutput_only&quot;</span>):</div>
<div class="line"><span class="lineno">  927</span>            y = pd.DataFrame(y)</div>
<div class="line"><span class="lineno">  928</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  929</span>            estimator.fit(X, y, sample_weight=weights)</div>
<div class="line"><span class="lineno">  930</span>        <span class="keywordflow">except</span> ValueError:</div>
<div class="line"><span class="lineno">  931</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  932</span>                <span class="stringliteral">&quot;Estimator {0} raises error if &quot;</span></div>
<div class="line"><span class="lineno">  933</span>                <span class="stringliteral">&quot;&#39;sample_weight&#39; parameter is of &quot;</span></div>
<div class="line"><span class="lineno">  934</span>                <span class="stringliteral">&quot;type pandas.Series&quot;</span>.format(name)</div>
<div class="line"><span class="lineno">  935</span>            )</div>
<div class="line"><span class="lineno">  936</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno">  937</span>        <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno">  938</span>            <span class="stringliteral">&quot;pandas is not installed: not testing for &quot;</span></div>
<div class="line"><span class="lineno">  939</span>            <span class="stringliteral">&quot;input of type pandas.Series to class weight.&quot;</span></div>
<div class="line"><span class="lineno">  940</span>        )</div>
<div class="line"><span class="lineno">  941</span> </div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span><span class="preprocessor">@ignore_warnings(category=(FutureWarning)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c194215ae75a69973c17fcc678df305" name="a0c194215ae75a69973c17fcc678df305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c194215ae75a69973c17fcc678df305">&#9670;&#160;</a></span>check_sample_weights_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_sample_weights_shape </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  988</span><span class="keyword">def </span>check_sample_weights_shape(name, estimator_orig):</div>
<div class="line"><span class="lineno">  989</span>    <span class="comment"># check that estimators raise an error if sample_weight</span></div>
<div class="line"><span class="lineno">  990</span>    <span class="comment"># shape mismatches the input</span></div>
<div class="line"><span class="lineno">  991</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno">  992</span>    X = np.array(</div>
<div class="line"><span class="lineno">  993</span>        [</div>
<div class="line"><span class="lineno">  994</span>            [1, 3],</div>
<div class="line"><span class="lineno">  995</span>            [1, 3],</div>
<div class="line"><span class="lineno">  996</span>            [1, 3],</div>
<div class="line"><span class="lineno">  997</span>            [1, 3],</div>
<div class="line"><span class="lineno">  998</span>            [2, 1],</div>
<div class="line"><span class="lineno">  999</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1000</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1001</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 1002</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1003</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1004</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1005</span>            [3, 3],</div>
<div class="line"><span class="lineno"> 1006</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1007</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1008</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1009</span>            [4, 1],</div>
<div class="line"><span class="lineno"> 1010</span>        ]</div>
<div class="line"><span class="lineno"> 1011</span>    )</div>
<div class="line"><span class="lineno"> 1012</span>    y = np.array([1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 2])</div>
<div class="line"><span class="lineno"> 1013</span>    y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno"> 1014</span> </div>
<div class="line"><span class="lineno"> 1015</span>    estimator.fit(X, y, sample_weight=np.ones(len(y)))</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>    <span class="keyword">with</span> raises(ValueError):</div>
<div class="line"><span class="lineno"> 1018</span>        estimator.fit(X, y, sample_weight=np.ones(2 * len(y)))</div>
<div class="line"><span class="lineno"> 1019</span> </div>
<div class="line"><span class="lineno"> 1020</span>    <span class="keyword">with</span> raises(ValueError):</div>
<div class="line"><span class="lineno"> 1021</span>        estimator.fit(X, y, sample_weight=np.ones((len(y), 2)))</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span> </div>
<div class="line"><span class="lineno"> 1024</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4eb1693e4b9c2e292b8adf70b9ac70c1" name="a4eb1693e4b9c2e292b8adf70b9ac70c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eb1693e4b9c2e292b8adf70b9ac70c1">&#9670;&#160;</a></span>check_set_output_transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_set_output_transform </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4125</span><span class="keyword">def </span>check_set_output_transform(name, transformer_orig):</div>
<div class="line"><span class="lineno"> 4126</span>    <span class="comment"># Check transformer.set_output with the default configuration does not</span></div>
<div class="line"><span class="lineno"> 4127</span>    <span class="comment"># change the transform output.</span></div>
<div class="line"><span class="lineno"> 4128</span>    tags = transformer_orig._get_tags()</div>
<div class="line"><span class="lineno"> 4129</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>] <span class="keywordflow">or</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 4130</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 4131</span> </div>
<div class="line"><span class="lineno"> 4132</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 4133</span>    transformer = clone(transformer_orig)</div>
<div class="line"><span class="lineno"> 4134</span> </div>
<div class="line"><span class="lineno"> 4135</span>    X = rng.uniform(size=(20, 5))</div>
<div class="line"><span class="lineno"> 4136</span>    X = _enforce_estimator_tags_X(transformer_orig, X)</div>
<div class="line"><span class="lineno"> 4137</span>    y = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno"> 4138</span>    y = _enforce_estimator_tags_y(transformer_orig, y)</div>
<div class="line"><span class="lineno"> 4139</span>    set_random_state(transformer)</div>
<div class="line"><span class="lineno"> 4140</span> </div>
<div class="line"><span class="lineno"> 4141</span>    <span class="keyword">def </span>fit_then_transform(est):</div>
<div class="line"><span class="lineno"> 4142</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 4143</span>            <span class="keywordflow">return</span> est.fit(X, y).transform(X, y)</div>
<div class="line"><span class="lineno"> 4144</span>        <span class="keywordflow">return</span> est.fit(X, y).transform(X)</div>
<div class="line"><span class="lineno"> 4145</span> </div>
<div class="line"><span class="lineno"> 4146</span>    <span class="keyword">def </span>fit_transform(est):</div>
<div class="line"><span class="lineno"> 4147</span>        <span class="keywordflow">return</span> est.fit_transform(X, y)</div>
<div class="line"><span class="lineno"> 4148</span> </div>
<div class="line"><span class="lineno"> 4149</span>    transform_methods = [fit_then_transform, fit_transform]</div>
<div class="line"><span class="lineno"> 4150</span>    <span class="keywordflow">for</span> transform_method <span class="keywordflow">in</span> transform_methods:</div>
<div class="line"><span class="lineno"> 4151</span>        transformer = clone(transformer)</div>
<div class="line"><span class="lineno"> 4152</span>        X_trans_no_setting = transform_method(transformer)</div>
<div class="line"><span class="lineno"> 4153</span> </div>
<div class="line"><span class="lineno"> 4154</span>        <span class="comment"># Auto wrapping only wraps the first array</span></div>
<div class="line"><span class="lineno"> 4155</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 4156</span>            X_trans_no_setting = X_trans_no_setting[0]</div>
<div class="line"><span class="lineno"> 4157</span> </div>
<div class="line"><span class="lineno"> 4158</span>        transformer.set_output(transform=<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><span class="lineno"> 4159</span>        X_trans_default = transform_method(transformer)</div>
<div class="line"><span class="lineno"> 4160</span> </div>
<div class="line"><span class="lineno"> 4161</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 4162</span>            X_trans_default = X_trans_default[0]</div>
<div class="line"><span class="lineno"> 4163</span> </div>
<div class="line"><span class="lineno"> 4164</span>        <span class="comment"># Default and no setting -&gt; returns the same transformation</span></div>
<div class="line"><span class="lineno"> 4165</span>        assert_allclose_dense_sparse(X_trans_no_setting, X_trans_default)</div>
<div class="line"><span class="lineno"> 4166</span> </div>
<div class="line"><span class="lineno"> 4167</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a250cc2a1b11bad84295d57202420fb3e" name="a250cc2a1b11bad84295d57202420fb3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250cc2a1b11bad84295d57202420fb3e">&#9670;&#160;</a></span>check_set_output_transform_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_set_output_transform_pandas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4233</span><span class="keyword">def </span>check_set_output_transform_pandas(name, transformer_orig):</div>
<div class="line"><span class="lineno"> 4234</span>    <span class="comment"># Check transformer.set_output configures the output of transform=&quot;pandas&quot;.</span></div>
<div class="line"><span class="lineno"> 4235</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 4236</span>        <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><span class="lineno"> 4237</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno"> 4238</span>        <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno"> 4239</span>            <span class="stringliteral">&quot;pandas is not installed: not checking column name consistency for pandas&quot;</span></div>
<div class="line"><span class="lineno"> 4240</span>        )</div>
<div class="line"><span class="lineno"> 4241</span> </div>
<div class="line"><span class="lineno"> 4242</span>    tags = transformer_orig._get_tags()</div>
<div class="line"><span class="lineno"> 4243</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>] <span class="keywordflow">or</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 4244</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 4245</span> </div>
<div class="line"><span class="lineno"> 4246</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 4247</span>    transformer = clone(transformer_orig)</div>
<div class="line"><span class="lineno"> 4248</span> </div>
<div class="line"><span class="lineno"> 4249</span>    X = rng.uniform(size=(20, 5))</div>
<div class="line"><span class="lineno"> 4250</span>    X = _enforce_estimator_tags_X(transformer_orig, X)</div>
<div class="line"><span class="lineno"> 4251</span>    y = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno"> 4252</span>    y = _enforce_estimator_tags_y(transformer_orig, y)</div>
<div class="line"><span class="lineno"> 4253</span>    set_random_state(transformer)</div>
<div class="line"><span class="lineno"> 4254</span> </div>
<div class="line"><span class="lineno"> 4255</span>    feature_names_in = [f<span class="stringliteral">&quot;col{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(X.shape[1])]</div>
<div class="line"><span class="lineno"> 4256</span>    df = pd.DataFrame(X, columns=feature_names_in)</div>
<div class="line"><span class="lineno"> 4257</span> </div>
<div class="line"><span class="lineno"> 4258</span>    transformer_default = clone(transformer).set_output(transform=<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><span class="lineno"> 4259</span>    outputs_default = _output_from_fit_transform(transformer_default, name, X, df, y)</div>
<div class="line"><span class="lineno"> 4260</span>    transformer_pandas = clone(transformer).set_output(transform=<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 4261</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 4262</span>        outputs_pandas = _output_from_fit_transform(transformer_pandas, name, X, df, y)</div>
<div class="line"><span class="lineno"> 4263</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno"> 4264</span>        <span class="comment"># transformer does not support sparse data</span></div>
<div class="line"><span class="lineno"> 4265</span>        <span class="keyword">assert</span> str(e) == <span class="stringliteral">&quot;Pandas output does not support sparse data.&quot;</span>, e</div>
<div class="line"><span class="lineno"> 4266</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 4267</span> </div>
<div class="line"><span class="lineno"> 4268</span>    <span class="keywordflow">for</span> case <span class="keywordflow">in</span> outputs_default:</div>
<div class="line"><span class="lineno"> 4269</span>        _check_generated_dataframe(</div>
<div class="line"><span class="lineno"> 4270</span>            name, case, outputs_default[case], outputs_pandas[case]</div>
<div class="line"><span class="lineno"> 4271</span>        )</div>
<div class="line"><span class="lineno"> 4272</span> </div>
<div class="line"><span class="lineno"> 4273</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e6d481b0fb75711695f0bdf23e67f73" name="a3e6d481b0fb75711695f0bdf23e67f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e6d481b0fb75711695f0bdf23e67f73">&#9670;&#160;</a></span>check_set_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_set_params </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3388</span><span class="keyword">def </span>check_set_params(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3389</span>    <span class="comment"># Check that get_params() returns the same thing</span></div>
<div class="line"><span class="lineno"> 3390</span>    <span class="comment"># before and after set_params() with some fuzz</span></div>
<div class="line"><span class="lineno"> 3391</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3392</span> </div>
<div class="line"><span class="lineno"> 3393</span>    orig_params = estimator.get_params(deep=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3394</span>    msg = <span class="stringliteral">&quot;get_params result does not match what was passed to set_params&quot;</span></div>
<div class="line"><span class="lineno"> 3395</span> </div>
<div class="line"><span class="lineno"> 3396</span>    estimator.set_params(**orig_params)</div>
<div class="line"><span class="lineno"> 3397</span>    curr_params = estimator.get_params(deep=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3398</span>    <span class="keyword">assert</span> set(orig_params.keys()) == set(curr_params.keys()), msg</div>
<div class="line"><span class="lineno"> 3399</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> curr_params.items():</div>
<div class="line"><span class="lineno"> 3400</span>        <span class="keyword">assert</span> orig_params[k] <span class="keywordflow">is</span> v, msg</div>
<div class="line"><span class="lineno"> 3401</span> </div>
<div class="line"><span class="lineno"> 3402</span>    <span class="comment"># some fuzz values</span></div>
<div class="line"><span class="lineno"> 3403</span>    test_values = [-np.inf, np.inf, <span class="keywordtype">None</span>]</div>
<div class="line"><span class="lineno"> 3404</span> </div>
<div class="line"><span class="lineno"> 3405</span>    test_params = deepcopy(orig_params)</div>
<div class="line"><span class="lineno"> 3406</span>    <span class="keywordflow">for</span> param_name <span class="keywordflow">in</span> orig_params.keys():</div>
<div class="line"><span class="lineno"> 3407</span>        default_value = orig_params[param_name]</div>
<div class="line"><span class="lineno"> 3408</span>        <span class="keywordflow">for</span> value <span class="keywordflow">in</span> test_values:</div>
<div class="line"><span class="lineno"> 3409</span>            test_params[param_name] = value</div>
<div class="line"><span class="lineno"> 3410</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3411</span>                estimator.set_params(**test_params)</div>
<div class="line"><span class="lineno"> 3412</span>            <span class="keywordflow">except</span> (TypeError, ValueError) <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno"> 3413</span>                e_type = e.__class__.__name__</div>
<div class="line"><span class="lineno"> 3414</span>                <span class="comment"># Exception occurred, possibly parameter validation</span></div>
<div class="line"><span class="lineno"> 3415</span>                warnings.warn(</div>
<div class="line"><span class="lineno"> 3416</span>                    <span class="stringliteral">&quot;{0} occurred during set_params of param {1} on &quot;</span></div>
<div class="line"><span class="lineno"> 3417</span>                    <span class="stringliteral">&quot;{2}. It is recommended to delay parameter &quot;</span></div>
<div class="line"><span class="lineno"> 3418</span>                    <span class="stringliteral">&quot;validation until fit.&quot;</span>.format(e_type, param_name, name)</div>
<div class="line"><span class="lineno"> 3419</span>                )</div>
<div class="line"><span class="lineno"> 3420</span> </div>
<div class="line"><span class="lineno"> 3421</span>                change_warning_msg = (</div>
<div class="line"><span class="lineno"> 3422</span>                    <span class="stringliteral">&quot;Estimator&#39;s parameters changed after set_params raised {}&quot;</span>.format(</div>
<div class="line"><span class="lineno"> 3423</span>                        e_type</div>
<div class="line"><span class="lineno"> 3424</span>                    )</div>
<div class="line"><span class="lineno"> 3425</span>                )</div>
<div class="line"><span class="lineno"> 3426</span>                params_before_exception = curr_params</div>
<div class="line"><span class="lineno"> 3427</span>                curr_params = estimator.get_params(deep=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3428</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3429</span>                    <span class="keyword">assert</span> set(params_before_exception.keys()) == set(</div>
<div class="line"><span class="lineno"> 3430</span>                        curr_params.keys()</div>
<div class="line"><span class="lineno"> 3431</span>                    )</div>
<div class="line"><span class="lineno"> 3432</span>                    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> curr_params.items():</div>
<div class="line"><span class="lineno"> 3433</span>                        <span class="keyword">assert</span> params_before_exception[k] <span class="keywordflow">is</span> v</div>
<div class="line"><span class="lineno"> 3434</span>                <span class="keywordflow">except</span> AssertionError:</div>
<div class="line"><span class="lineno"> 3435</span>                    warnings.warn(change_warning_msg)</div>
<div class="line"><span class="lineno"> 3436</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3437</span>                curr_params = estimator.get_params(deep=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 3438</span>                <span class="keyword">assert</span> set(test_params.keys()) == set(curr_params.keys()), msg</div>
<div class="line"><span class="lineno"> 3439</span>                <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> curr_params.items():</div>
<div class="line"><span class="lineno"> 3440</span>                    <span class="keyword">assert</span> test_params[k] <span class="keywordflow">is</span> v, msg</div>
<div class="line"><span class="lineno"> 3441</span>        test_params[param_name] = default_value</div>
<div class="line"><span class="lineno"> 3442</span> </div>
<div class="line"><span class="lineno"> 3443</span> </div>
<div class="line"><span class="lineno"> 3444</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a616cb3b612787fe0becbb77a78c69443" name="a616cb3b612787fe0becbb77a78c69443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616cb3b612787fe0becbb77a78c69443">&#9670;&#160;</a></span>check_sparsify_coefficients()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_sparsify_coefficients </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3047</span><span class="keyword">def </span>check_sparsify_coefficients(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3048</span>    X = np.array(</div>
<div class="line"><span class="lineno"> 3049</span>        [</div>
<div class="line"><span class="lineno"> 3050</span>            [-2, -1],</div>
<div class="line"><span class="lineno"> 3051</span>            [-1, -1],</div>
<div class="line"><span class="lineno"> 3052</span>            [-1, -2],</div>
<div class="line"><span class="lineno"> 3053</span>            [1, 1],</div>
<div class="line"><span class="lineno"> 3054</span>            [1, 2],</div>
<div class="line"><span class="lineno"> 3055</span>            [2, 1],</div>
<div class="line"><span class="lineno"> 3056</span>            [-1, -2],</div>
<div class="line"><span class="lineno"> 3057</span>            [2, 2],</div>
<div class="line"><span class="lineno"> 3058</span>            [-2, -2],</div>
<div class="line"><span class="lineno"> 3059</span>        ]</div>
<div class="line"><span class="lineno"> 3060</span>    )</div>
<div class="line"><span class="lineno"> 3061</span>    y = np.array([1, 1, 1, 2, 2, 2, 3, 3, 3])</div>
<div class="line"><span class="lineno"> 3062</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 3063</span>    est = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3064</span> </div>
<div class="line"><span class="lineno"> 3065</span>    est.fit(X, y)</div>
<div class="line"><span class="lineno"> 3066</span>    pred_orig = est.predict(X)</div>
<div class="line"><span class="lineno"> 3067</span> </div>
<div class="line"><span class="lineno"> 3068</span>    <span class="comment"># test sparsify with dense inputs</span></div>
<div class="line"><span class="lineno"> 3069</span>    est.sparsify()</div>
<div class="line"><span class="lineno"> 3070</span>    <span class="keyword">assert</span> sparse.issparse(est.coef_)</div>
<div class="line"><span class="lineno"> 3071</span>    pred = est.predict(X)</div>
<div class="line"><span class="lineno"> 3072</span>    assert_array_equal(pred, pred_orig)</div>
<div class="line"><span class="lineno"> 3073</span> </div>
<div class="line"><span class="lineno"> 3074</span>    <span class="comment"># pickle and unpickle with sparse coef_</span></div>
<div class="line"><span class="lineno"> 3075</span>    est = pickle.loads(pickle.dumps(est))</div>
<div class="line"><span class="lineno"> 3076</span>    <span class="keyword">assert</span> sparse.issparse(est.coef_)</div>
<div class="line"><span class="lineno"> 3077</span>    pred = est.predict(X)</div>
<div class="line"><span class="lineno"> 3078</span>    assert_array_equal(pred, pred_orig)</div>
<div class="line"><span class="lineno"> 3079</span> </div>
<div class="line"><span class="lineno"> 3080</span> </div>
<div class="line"><span class="lineno"> 3081</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a536f9ea289df7d140d3b978f6908909b" name="a536f9ea289df7d140d3b978f6908909b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536f9ea289df7d140d3b978f6908909b">&#9670;&#160;</a></span>check_supervised_y_2d()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_supervised_y_2d </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2631</span><span class="keyword">def </span>check_supervised_y_2d(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 2632</span>    tags = _safe_tags(estimator_orig)</div>
<div class="line"><span class="lineno"> 2633</span>    rnd = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 2634</span>    n_samples = 30</div>
<div class="line"><span class="lineno"> 2635</span>    X = _enforce_estimator_tags_X(estimator_orig, rnd.uniform(size=(n_samples, 3)))</div>
<div class="line"><span class="lineno"> 2636</span>    y = np.arange(n_samples) % 3</div>
<div class="line"><span class="lineno"> 2637</span>    y = _enforce_estimator_tags_y(estimator_orig, y)</div>
<div class="line"><span class="lineno"> 2638</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 2639</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 2640</span>    <span class="comment"># fit</span></div>
<div class="line"><span class="lineno"> 2641</span>    estimator.fit(X, y)</div>
<div class="line"><span class="lineno"> 2642</span>    y_pred = estimator.predict(X)</div>
<div class="line"><span class="lineno"> 2643</span> </div>
<div class="line"><span class="lineno"> 2644</span>    set_random_state(estimator)</div>
<div class="line"><span class="lineno"> 2645</span>    <span class="comment"># Check that when a 2D y is given, a DataConversionWarning is</span></div>
<div class="line"><span class="lineno"> 2646</span>    <span class="comment"># raised</span></div>
<div class="line"><span class="lineno"> 2647</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>) <span class="keyword">as</span> w:</div>
<div class="line"><span class="lineno"> 2648</span>        warnings.simplefilter(<span class="stringliteral">&quot;always&quot;</span>, DataConversionWarning)</div>
<div class="line"><span class="lineno"> 2649</span>        warnings.simplefilter(<span class="stringliteral">&quot;ignore&quot;</span>, RuntimeWarning)</div>
<div class="line"><span class="lineno"> 2650</span>        estimator.fit(X, y[:, np.newaxis])</div>
<div class="line"><span class="lineno"> 2651</span>    y_pred_2d = estimator.predict(X)</div>
<div class="line"><span class="lineno"> 2652</span>    msg = <span class="stringliteral">&quot;expected 1 DataConversionWarning, got: %s&quot;</span> % <span class="stringliteral">&quot;, &quot;</span>.join(</div>
<div class="line"><span class="lineno"> 2653</span>        [str(w_x) <span class="keywordflow">for</span> w_x <span class="keywordflow">in</span> w]</div>
<div class="line"><span class="lineno"> 2654</span>    )</div>
<div class="line"><span class="lineno"> 2655</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tags[<span class="stringliteral">&quot;multioutput&quot;</span>]:</div>
<div class="line"><span class="lineno"> 2656</span>        <span class="comment"># check that we warned if we don&#39;t support multi-output</span></div>
<div class="line"><span class="lineno"> 2657</span>        <span class="keyword">assert</span> len(w) &gt; 0, msg</div>
<div class="line"><span class="lineno"> 2658</span>        <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 2659</span>            <span class="stringliteral">&quot;DataConversionWarning(&#39;A column-vector y&quot;</span></div>
<div class="line"><span class="lineno"> 2660</span>            <span class="stringliteral">&quot; was passed when a 1d array was expected&quot;</span></div>
<div class="line"><span class="lineno"> 2661</span>            <span class="keywordflow">in</span> msg</div>
<div class="line"><span class="lineno"> 2662</span>        )</div>
<div class="line"><span class="lineno"> 2663</span>    assert_allclose(y_pred.ravel(), y_pred_2d.ravel())</div>
<div class="line"><span class="lineno"> 2664</span> </div>
<div class="line"><span class="lineno"> 2665</span> </div>
<div class="line"><span class="lineno"> 2666</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81261d88eb068f5fbf32228272ecb278" name="a81261d88eb068f5fbf32228272ecb278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81261d88eb068f5fbf32228272ecb278">&#9670;&#160;</a></span>check_supervised_y_no_nan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_supervised_y_no_nan </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  173</span><span class="keyword">def </span>check_supervised_y_no_nan(name, estimator_orig):</div>
<div class="line"><span class="lineno">  174</span>    <span class="comment"># Checks that the Estimator targets are not NaN.</span></div>
<div class="line"><span class="lineno">  175</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno">  176</span>    rng = np.random.RandomState(888)</div>
<div class="line"><span class="lineno">  177</span>    X = rng.standard_normal(size=(10, 5))</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">for</span> value <span class="keywordflow">in</span> [np.nan, np.inf]:</div>
<div class="line"><span class="lineno">  180</span>        y = np.full(10, value)</div>
<div class="line"><span class="lineno">  181</span>        y = _enforce_estimator_tags_y(estimator, y)</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        module_name = estimator.__module__</div>
<div class="line"><span class="lineno">  184</span>        <span class="keywordflow">if</span> module_name.startswith(<span class="stringliteral">&quot;sklearn.&quot;</span>) <span class="keywordflow">and</span> <span class="keywordflow">not</span> (</div>
<div class="line"><span class="lineno">  185</span>            <span class="stringliteral">&quot;test_&quot;</span> <span class="keywordflow">in</span> module_name <span class="keywordflow">or</span> module_name.endswith(<span class="stringliteral">&quot;_testing&quot;</span>)</div>
<div class="line"><span class="lineno">  186</span>        ):</div>
<div class="line"><span class="lineno">  187</span>            <span class="comment"># In scikit-learn we want the error message to mention the input</span></div>
<div class="line"><span class="lineno">  188</span>            <span class="comment"># name and be specific about the kind of unexpected value.</span></div>
<div class="line"><span class="lineno">  189</span>            <span class="keywordflow">if</span> np.isinf(value):</div>
<div class="line"><span class="lineno">  190</span>                match = (</div>
<div class="line"><span class="lineno">  191</span>                    <span class="stringliteral">r&quot;Input (y|Y) contains infinity or a value too large for&quot;</span></div>
<div class="line"><span class="lineno">  192</span>                    <span class="stringliteral">r&quot; dtype\&zwj;(&#39;float64&#39;\&zwj;).&quot;</span></div>
<div class="line"><span class="lineno">  193</span>                )</div>
<div class="line"><span class="lineno">  194</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  195</span>                match = <span class="stringliteral">r&quot;Input (y|Y) contains NaN.&quot;</span></div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  197</span>            <span class="comment"># Do not impose a particular error message to third-party libraries.</span></div>
<div class="line"><span class="lineno">  198</span>            match = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  199</span>        err_msg = (</div>
<div class="line"><span class="lineno">  200</span>            f<span class="stringliteral">&quot;Estimator {name} should have raised error on fitting array y with inf&quot;</span></div>
<div class="line"><span class="lineno">  201</span>            <span class="stringliteral">&quot; value.&quot;</span></div>
<div class="line"><span class="lineno">  202</span>        )</div>
<div class="line"><span class="lineno">  203</span>        <span class="keyword">with</span> raises(ValueError, match=match, err_msg=err_msg):</div>
<div class="line"><span class="lineno">  204</span>            estimator.fit(X, y)</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a93e70516583e6ff950029b0bae4a6483" name="a93e70516583e6ff950029b0bae4a6483"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e70516583e6ff950029b0bae4a6483">&#9670;&#160;</a></span>check_transformer_data_not_an_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_transformer_data_not_an_array </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1519</span><span class="keyword">def </span>check_transformer_data_not_an_array(name, transformer):</div>
<div class="line"><span class="lineno"> 1520</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 1521</span>        n_samples=30,</div>
<div class="line"><span class="lineno"> 1522</span>        centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 1523</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 1524</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 1525</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 1526</span>    )</div>
<div class="line"><span class="lineno"> 1527</span>    X = StandardScaler().fit_transform(X)</div>
<div class="line"><span class="lineno"> 1528</span>    X = _enforce_estimator_tags_X(transformer, X)</div>
<div class="line"><span class="lineno"> 1529</span>    this_X = _NotAnArray(X)</div>
<div class="line"><span class="lineno"> 1530</span>    this_y = _NotAnArray(np.asarray(y))</div>
<div class="line"><span class="lineno"> 1531</span>    _check_transformer(name, transformer, this_X, this_y)</div>
<div class="line"><span class="lineno"> 1532</span>    <span class="comment"># try the same with some list</span></div>
<div class="line"><span class="lineno"> 1533</span>    _check_transformer(name, transformer, X.tolist(), y.tolist())</div>
<div class="line"><span class="lineno"> 1534</span> </div>
<div class="line"><span class="lineno"> 1535</span> </div>
<div class="line"><span class="lineno"> 1536</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d0ac12ff5c524dd0c48985517db5626" name="a8d0ac12ff5c524dd0c48985517db5626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d0ac12ff5c524dd0c48985517db5626">&#9670;&#160;</a></span>check_transformer_general()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_transformer_general </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readonly_memmap</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1501</span><span class="keyword">def </span>check_transformer_general(name, transformer, readonly_memmap=False):</div>
<div class="line"><span class="lineno"> 1502</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 1503</span>        n_samples=30,</div>
<div class="line"><span class="lineno"> 1504</span>        centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 1505</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 1506</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 1507</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 1508</span>    )</div>
<div class="line"><span class="lineno"> 1509</span>    X = StandardScaler().fit_transform(X)</div>
<div class="line"><span class="lineno"> 1510</span>    X = _enforce_estimator_tags_X(transformer, X)</div>
<div class="line"><span class="lineno"> 1511</span> </div>
<div class="line"><span class="lineno"> 1512</span>    <span class="keywordflow">if</span> readonly_memmap:</div>
<div class="line"><span class="lineno"> 1513</span>        X, y = create_memmap_backed_data([X, y])</div>
<div class="line"><span class="lineno"> 1514</span> </div>
<div class="line"><span class="lineno"> 1515</span>    _check_transformer(name, transformer, X, y)</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span> </div>
<div class="line"><span class="lineno"> 1518</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5b54af40876df7078adcc08e95c5d74" name="ad5b54af40876df7078adcc08e95c5d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b54af40876df7078adcc08e95c5d74">&#9670;&#160;</a></span>check_transformer_get_feature_names_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_transformer_get_feature_names_out </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3931</span><span class="keyword">def </span>check_transformer_get_feature_names_out(name, transformer_orig):</div>
<div class="line"><span class="lineno"> 3932</span>    tags = transformer_orig._get_tags()</div>
<div class="line"><span class="lineno"> 3933</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>] <span class="keywordflow">or</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3934</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3935</span> </div>
<div class="line"><span class="lineno"> 3936</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 3937</span>        n_samples=30,</div>
<div class="line"><span class="lineno"> 3938</span>        centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 3939</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 3940</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 3941</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 3942</span>    )</div>
<div class="line"><span class="lineno"> 3943</span>    X = StandardScaler().fit_transform(X)</div>
<div class="line"><span class="lineno"> 3944</span> </div>
<div class="line"><span class="lineno"> 3945</span>    transformer = clone(transformer_orig)</div>
<div class="line"><span class="lineno"> 3946</span>    X = _enforce_estimator_tags_X(transformer, X)</div>
<div class="line"><span class="lineno"> 3947</span> </div>
<div class="line"><span class="lineno"> 3948</span>    n_features = X.shape[1]</div>
<div class="line"><span class="lineno"> 3949</span>    set_random_state(transformer)</div>
<div class="line"><span class="lineno"> 3950</span> </div>
<div class="line"><span class="lineno"> 3951</span>    y_ = y</div>
<div class="line"><span class="lineno"> 3952</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 3953</span>        y_ = np.c_[np.asarray(y), np.asarray(y)]</div>
<div class="line"><span class="lineno"> 3954</span>        y_[::2, 1] *= 2</div>
<div class="line"><span class="lineno"> 3955</span> </div>
<div class="line"><span class="lineno"> 3956</span>    X_transform = transformer.fit_transform(X, y=y_)</div>
<div class="line"><span class="lineno"> 3957</span>    input_features = [f<span class="stringliteral">&quot;feature{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_features)]</div>
<div class="line"><span class="lineno"> 3958</span> </div>
<div class="line"><span class="lineno"> 3959</span>    <span class="comment"># input_features names is not the same length as n_features_in_</span></div>
<div class="line"><span class="lineno"> 3960</span>    <span class="keyword">with</span> raises(ValueError, match=<span class="stringliteral">&quot;input_features should have length equal&quot;</span>):</div>
<div class="line"><span class="lineno"> 3961</span>        transformer.get_feature_names_out(input_features[::2])</div>
<div class="line"><span class="lineno"> 3962</span> </div>
<div class="line"><span class="lineno"> 3963</span>    feature_names_out = transformer.get_feature_names_out(input_features)</div>
<div class="line"><span class="lineno"> 3964</span>    <span class="keyword">assert</span> feature_names_out <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 3965</span>    <span class="keyword">assert</span> isinstance(feature_names_out, np.ndarray)</div>
<div class="line"><span class="lineno"> 3966</span>    <span class="keyword">assert</span> feature_names_out.dtype == object</div>
<div class="line"><span class="lineno"> 3967</span>    <span class="keyword">assert</span> all(isinstance(name, str) <span class="keywordflow">for</span> name <span class="keywordflow">in</span> feature_names_out)</div>
<div class="line"><span class="lineno"> 3968</span> </div>
<div class="line"><span class="lineno"> 3969</span>    <span class="keywordflow">if</span> isinstance(X_transform, tuple):</div>
<div class="line"><span class="lineno"> 3970</span>        n_features_out = X_transform[0].shape[1]</div>
<div class="line"><span class="lineno"> 3971</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3972</span>        n_features_out = X_transform.shape[1]</div>
<div class="line"><span class="lineno"> 3973</span> </div>
<div class="line"><span class="lineno"> 3974</span>    <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 3975</span>        len(feature_names_out) == n_features_out</div>
<div class="line"><span class="lineno"> 3976</span>    ), f<span class="stringliteral">&quot;Expected {n_features_out} feature names, got {len(feature_names_out)}&quot;</span></div>
<div class="line"><span class="lineno"> 3977</span> </div>
<div class="line"><span class="lineno"> 3978</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e49fbde9e57467e8b77e7c00fe3f202" name="a7e49fbde9e57467e8b77e7c00fe3f202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e49fbde9e57467e8b77e7c00fe3f202">&#9670;&#160;</a></span>check_transformer_get_feature_names_out_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_transformer_get_feature_names_out_pandas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3979</span><span class="keyword">def </span>check_transformer_get_feature_names_out_pandas(name, transformer_orig):</div>
<div class="line"><span class="lineno"> 3980</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 3981</span>        <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><span class="lineno"> 3982</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno"> 3983</span>        <span class="keywordflow">raise</span> SkipTest(</div>
<div class="line"><span class="lineno"> 3984</span>            <span class="stringliteral">&quot;pandas is not installed: not checking column name consistency for pandas&quot;</span></div>
<div class="line"><span class="lineno"> 3985</span>        )</div>
<div class="line"><span class="lineno"> 3986</span> </div>
<div class="line"><span class="lineno"> 3987</span>    tags = transformer_orig._get_tags()</div>
<div class="line"><span class="lineno"> 3988</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;2darray&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> tags[<span class="stringliteral">&quot;X_types&quot;</span>] <span class="keywordflow">or</span> tags[<span class="stringliteral">&quot;no_validation&quot;</span>]:</div>
<div class="line"><span class="lineno"> 3989</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 3990</span> </div>
<div class="line"><span class="lineno"> 3991</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 3992</span>        n_samples=30,</div>
<div class="line"><span class="lineno"> 3993</span>        centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 3994</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 3995</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 3996</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 3997</span>    )</div>
<div class="line"><span class="lineno"> 3998</span>    X = StandardScaler().fit_transform(X)</div>
<div class="line"><span class="lineno"> 3999</span> </div>
<div class="line"><span class="lineno"> 4000</span>    transformer = clone(transformer_orig)</div>
<div class="line"><span class="lineno"> 4001</span>    X = _enforce_estimator_tags_X(transformer, X)</div>
<div class="line"><span class="lineno"> 4002</span> </div>
<div class="line"><span class="lineno"> 4003</span>    n_features = X.shape[1]</div>
<div class="line"><span class="lineno"> 4004</span>    set_random_state(transformer)</div>
<div class="line"><span class="lineno"> 4005</span> </div>
<div class="line"><span class="lineno"> 4006</span>    y_ = y</div>
<div class="line"><span class="lineno"> 4007</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 4008</span>        y_ = np.c_[np.asarray(y), np.asarray(y)]</div>
<div class="line"><span class="lineno"> 4009</span>        y_[::2, 1] *= 2</div>
<div class="line"><span class="lineno"> 4010</span> </div>
<div class="line"><span class="lineno"> 4011</span>    feature_names_in = [f<span class="stringliteral">&quot;col{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_features)]</div>
<div class="line"><span class="lineno"> 4012</span>    df = pd.DataFrame(X, columns=feature_names_in)</div>
<div class="line"><span class="lineno"> 4013</span>    X_transform = transformer.fit_transform(df, y=y_)</div>
<div class="line"><span class="lineno"> 4014</span> </div>
<div class="line"><span class="lineno"> 4015</span>    <span class="comment"># error is raised when `input_features` do not match feature_names_in</span></div>
<div class="line"><span class="lineno"> 4016</span>    invalid_feature_names = [f<span class="stringliteral">&quot;bad{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_features)]</div>
<div class="line"><span class="lineno"> 4017</span>    <span class="keyword">with</span> raises(ValueError, match=<span class="stringliteral">&quot;input_features is not equal to feature_names_in_&quot;</span>):</div>
<div class="line"><span class="lineno"> 4018</span>        transformer.get_feature_names_out(invalid_feature_names)</div>
<div class="line"><span class="lineno"> 4019</span> </div>
<div class="line"><span class="lineno"> 4020</span>    feature_names_out_default = transformer.get_feature_names_out()</div>
<div class="line"><span class="lineno"> 4021</span>    feature_names_in_explicit_names = transformer.get_feature_names_out(</div>
<div class="line"><span class="lineno"> 4022</span>        feature_names_in</div>
<div class="line"><span class="lineno"> 4023</span>    )</div>
<div class="line"><span class="lineno"> 4024</span>    assert_array_equal(feature_names_out_default, feature_names_in_explicit_names)</div>
<div class="line"><span class="lineno"> 4025</span> </div>
<div class="line"><span class="lineno"> 4026</span>    <span class="keywordflow">if</span> isinstance(X_transform, tuple):</div>
<div class="line"><span class="lineno"> 4027</span>        n_features_out = X_transform[0].shape[1]</div>
<div class="line"><span class="lineno"> 4028</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 4029</span>        n_features_out = X_transform.shape[1]</div>
<div class="line"><span class="lineno"> 4030</span> </div>
<div class="line"><span class="lineno"> 4031</span>    <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 4032</span>        len(feature_names_out_default) == n_features_out</div>
<div class="line"><span class="lineno"> 4033</span>    ), f<span class="stringliteral">&quot;Expected {n_features_out} feature names, got {len(feature_names_out_default)}&quot;</span></div>
<div class="line"><span class="lineno"> 4034</span> </div>
<div class="line"><span class="lineno"> 4035</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a50c385b8bc0c76966a8e322dabbd331f" name="a50c385b8bc0c76966a8e322dabbd331f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50c385b8bc0c76966a8e322dabbd331f">&#9670;&#160;</a></span>check_transformer_n_iter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_transformer_n_iter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3346</span><span class="keyword">def </span>check_transformer_n_iter(name, estimator_orig):</div>
<div class="line"><span class="lineno"> 3347</span>    <span class="comment"># Test that transformers with a parameter max_iter, return the</span></div>
<div class="line"><span class="lineno"> 3348</span>    <span class="comment"># attribute of n_iter_ at least 1.</span></div>
<div class="line"><span class="lineno"> 3349</span>    estimator = clone(estimator_orig)</div>
<div class="line"><span class="lineno"> 3350</span>    <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;max_iter&quot;</span>):</div>
<div class="line"><span class="lineno"> 3351</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 3352</span>            <span class="comment"># Check using default data</span></div>
<div class="line"><span class="lineno"> 3353</span>            X = [[0.0, 0.0, 1.0], [1.0, 0.0, 0.0], [2.0, 2.0, 2.0], [2.0, 5.0, 4.0]]</div>
<div class="line"><span class="lineno"> 3354</span>            y_ = [[0.1, -0.2], [0.9, 1.1], [0.1, -0.5], [0.3, -0.2]]</div>
<div class="line"><span class="lineno"> 3355</span> </div>
<div class="line"><span class="lineno"> 3356</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3357</span>            X, y_ = make_blobs(</div>
<div class="line"><span class="lineno"> 3358</span>                n_samples=30,</div>
<div class="line"><span class="lineno"> 3359</span>                centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 3360</span>                random_state=0,</div>
<div class="line"><span class="lineno"> 3361</span>                n_features=2,</div>
<div class="line"><span class="lineno"> 3362</span>                cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 3363</span>            )</div>
<div class="line"><span class="lineno"> 3364</span>            X = _enforce_estimator_tags_X(estimator_orig, X)</div>
<div class="line"><span class="lineno"> 3365</span>        set_random_state(estimator, 0)</div>
<div class="line"><span class="lineno"> 3366</span>        estimator.fit(X, y_)</div>
<div class="line"><span class="lineno"> 3367</span> </div>
<div class="line"><span class="lineno"> 3368</span>        <span class="comment"># These return a n_iter per component.</span></div>
<div class="line"><span class="lineno"> 3369</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> CROSS_DECOMPOSITION:</div>
<div class="line"><span class="lineno"> 3370</span>            <span class="keywordflow">for</span> iter_ <span class="keywordflow">in</span> estimator.n_iter_:</div>
<div class="line"><span class="lineno"> 3371</span>                <span class="keyword">assert</span> iter_ &gt;= 1</div>
<div class="line"><span class="lineno"> 3372</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 3373</span>            <span class="keyword">assert</span> estimator.n_iter_ &gt;= 1</div>
<div class="line"><span class="lineno"> 3374</span> </div>
<div class="line"><span class="lineno"> 3375</span> </div>
<div class="line"><span class="lineno"> 3376</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a12568cd3787c556d2dc98a915deac1b6" name="a12568cd3787c556d2dc98a915deac1b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12568cd3787c556d2dc98a915deac1b6">&#9670;&#160;</a></span>check_transformer_preserve_dtypes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_transformer_preserve_dtypes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer_orig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1731</span><span class="keyword">def </span>check_transformer_preserve_dtypes(name, transformer_orig):</div>
<div class="line"><span class="lineno"> 1732</span>    <span class="comment"># check that dtype are preserved meaning if input X is of some dtype</span></div>
<div class="line"><span class="lineno"> 1733</span>    <span class="comment"># X_transformed should be from the same dtype.</span></div>
<div class="line"><span class="lineno"> 1734</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 1735</span>        n_samples=30,</div>
<div class="line"><span class="lineno"> 1736</span>        centers=[[0, 0, 0], [1, 1, 1]],</div>
<div class="line"><span class="lineno"> 1737</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 1738</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 1739</span>    )</div>
<div class="line"><span class="lineno"> 1740</span>    X = StandardScaler().fit_transform(X)</div>
<div class="line"><span class="lineno"> 1741</span>    X = _enforce_estimator_tags_X(transformer_orig, X)</div>
<div class="line"><span class="lineno"> 1742</span> </div>
<div class="line"><span class="lineno"> 1743</span>    <span class="keywordflow">for</span> dtype <span class="keywordflow">in</span> _safe_tags(transformer_orig, key=<span class="stringliteral">&quot;preserves_dtype&quot;</span>):</div>
<div class="line"><span class="lineno"> 1744</span>        X_cast = X.astype(dtype)</div>
<div class="line"><span class="lineno"> 1745</span>        transformer = clone(transformer_orig)</div>
<div class="line"><span class="lineno"> 1746</span>        set_random_state(transformer)</div>
<div class="line"><span class="lineno"> 1747</span>        X_trans1 = transformer.fit_transform(X_cast, y)</div>
<div class="line"><span class="lineno"> 1748</span>        X_trans2 = transformer.fit(X_cast, y).transform(X_cast)</div>
<div class="line"><span class="lineno"> 1749</span> </div>
<div class="line"><span class="lineno"> 1750</span>        <span class="keywordflow">for</span> Xt, method <span class="keywordflow">in</span> zip([X_trans1, X_trans2], [<span class="stringliteral">&quot;fit_transform&quot;</span>, <span class="stringliteral">&quot;transform&quot;</span>]):</div>
<div class="line"><span class="lineno"> 1751</span>            <span class="keywordflow">if</span> isinstance(Xt, tuple):</div>
<div class="line"><span class="lineno"> 1752</span>                <span class="comment"># cross-decompostion returns a tuple of (x_scores, y_scores)</span></div>
<div class="line"><span class="lineno"> 1753</span>                <span class="comment"># when given y with fit_transform; only check the first element</span></div>
<div class="line"><span class="lineno"> 1754</span>                Xt = Xt[0]</div>
<div class="line"><span class="lineno"> 1755</span> </div>
<div class="line"><span class="lineno"> 1756</span>            <span class="comment"># check that the output dtype is preserved</span></div>
<div class="line"><span class="lineno"> 1757</span>            <span class="keyword">assert</span> Xt.dtype == dtype, (</div>
<div class="line"><span class="lineno"> 1758</span>                f<span class="stringliteral">&quot;{name} (method={method}) does not preserve dtype. &quot;</span></div>
<div class="line"><span class="lineno"> 1759</span>                f<span class="stringliteral">&quot;Original/Expected dtype={dtype.__name__}, got dtype={Xt.dtype}.&quot;</span></div>
<div class="line"><span class="lineno"> 1760</span>            )</div>
<div class="line"><span class="lineno"> 1761</span> </div>
<div class="line"><span class="lineno"> 1762</span> </div>
<div class="line"><span class="lineno"> 1763</span><span class="preprocessor">@ignore_warnings(category=FutureWarning)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2bed6f99ef89505683f7b67f0c674ae" name="aa2bed6f99ef89505683f7b67f0c674ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bed6f99ef89505683f7b67f0c674ae">&#9670;&#160;</a></span>check_transformers_unfitted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.check_transformers_unfitted </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transformer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1537</span><span class="keyword">def </span>check_transformers_unfitted(name, transformer):</div>
<div class="line"><span class="lineno"> 1538</span>    X, y = _regression_dataset()</div>
<div class="line"><span class="lineno"> 1539</span> </div>
<div class="line"><span class="lineno"> 1540</span>    transformer = clone(transformer)</div>
<div class="line"><span class="lineno"> 1541</span>    <span class="keyword">with</span> raises(</div>
<div class="line"><span class="lineno"> 1542</span>        (AttributeError, ValueError),</div>
<div class="line"><span class="lineno"> 1543</span>        err_msg=(</div>
<div class="line"><span class="lineno"> 1544</span>            <span class="stringliteral">&quot;The unfitted &quot;</span></div>
<div class="line"><span class="lineno"> 1545</span>            f<span class="stringliteral">&quot;transformer {name} does not raise an error when &quot;</span></div>
<div class="line"><span class="lineno"> 1546</span>            <span class="stringliteral">&quot;transform is called. Perhaps use &quot;</span></div>
<div class="line"><span class="lineno"> 1547</span>            <span class="stringliteral">&quot;check_is_fitted in transform.&quot;</span></div>
<div class="line"><span class="lineno"> 1548</span>        ),</div>
<div class="line"><span class="lineno"> 1549</span>    ):</div>
<div class="line"><span class="lineno"> 1550</span>        transformer.transform(X)</div>
<div class="line"><span class="lineno"> 1551</span> </div>
<div class="line"><span class="lineno"> 1552</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad71f762cee28ec2c94bb2f2efeebc6f6" name="ad71f762cee28ec2c94bb2f2efeebc6f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad71f762cee28ec2c94bb2f2efeebc6f6">&#9670;&#160;</a></span>parametrize_with_checks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.parametrize_with_checks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimators</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Pytest specific decorator for parametrizing estimator checks.

The `id` of each check is set to be a pprint version of the estimator
and the name of the check with its keyword arguments.
This allows to use `pytest -k` to specify which tests to run::

    pytest test_check_estimators.py -k check_estimators_fit_returns_self

Parameters
----------
estimators : list of estimators instances
    Estimators to generated checks for.

    .. versionchanged:: 0.24
       Passing a class was deprecated in version 0.23, and support for
       classes was removed in 0.24. Pass an instance instead.

    .. versionadded:: 0.24

Returns
-------
decorator : `pytest.mark.parametrize`

See Also
--------
check_estimator : Check if estimator adheres to scikit-learn conventions.

Examples
--------
&gt;&gt;&gt; from sklearn.utils.estimator_checks import parametrize_with_checks
&gt;&gt;&gt; from sklearn.linear_model import LogisticRegression
&gt;&gt;&gt; from sklearn.tree import DecisionTreeRegressor

&gt;&gt;&gt; @parametrize_with_checks([LogisticRegression(),
...                           DecisionTreeRegressor()])
... def test_sklearn_compatible_estimator(estimator, check):
...     check(estimator)</pre> <div class="fragment"><div class="line"><span class="lineno">  485</span><span class="keyword">def </span>parametrize_with_checks(estimators):</div>
<div class="line"><span class="lineno">  486</span>    <span class="stringliteral">&quot;&quot;&quot;Pytest specific decorator for parametrizing estimator checks.</span></div>
<div class="line"><span class="lineno">  487</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  488</span><span class="stringliteral">    The `id` of each check is set to be a pprint version of the estimator</span></div>
<div class="line"><span class="lineno">  489</span><span class="stringliteral">    and the name of the check with its keyword arguments.</span></div>
<div class="line"><span class="lineno">  490</span><span class="stringliteral">    This allows to use `pytest -k` to specify which tests to run::</span></div>
<div class="line"><span class="lineno">  491</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  492</span><span class="stringliteral">        pytest test_check_estimators.py -k check_estimators_fit_returns_self</span></div>
<div class="line"><span class="lineno">  493</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  494</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  495</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  496</span><span class="stringliteral">    estimators : list of estimators instances</span></div>
<div class="line"><span class="lineno">  497</span><span class="stringliteral">        Estimators to generated checks for.</span></div>
<div class="line"><span class="lineno">  498</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  499</span><span class="stringliteral">        .. versionchanged:: 0.24</span></div>
<div class="line"><span class="lineno">  500</span><span class="stringliteral">           Passing a class was deprecated in version 0.23, and support for</span></div>
<div class="line"><span class="lineno">  501</span><span class="stringliteral">           classes was removed in 0.24. Pass an instance instead.</span></div>
<div class="line"><span class="lineno">  502</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  503</span><span class="stringliteral">        .. versionadded:: 0.24</span></div>
<div class="line"><span class="lineno">  504</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  505</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  506</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  507</span><span class="stringliteral">    decorator : `pytest.mark.parametrize`</span></div>
<div class="line"><span class="lineno">  508</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  509</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  510</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  511</span><span class="stringliteral">    check_estimator : Check if estimator adheres to scikit-learn conventions.</span></div>
<div class="line"><span class="lineno">  512</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  513</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  514</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  515</span><span class="stringliteral">    &gt;&gt;&gt; from sklearn.utils.estimator_checks import parametrize_with_checks</span></div>
<div class="line"><span class="lineno">  516</span><span class="stringliteral">    &gt;&gt;&gt; from sklearn.linear_model import LogisticRegression</span></div>
<div class="line"><span class="lineno">  517</span><span class="stringliteral">    &gt;&gt;&gt; from sklearn.tree import DecisionTreeRegressor</span></div>
<div class="line"><span class="lineno">  518</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  519</span><span class="stringliteral">    &gt;&gt;&gt; @parametrize_with_checks([LogisticRegression(),</span></div>
<div class="line"><span class="lineno">  520</span><span class="stringliteral">    ...                           DecisionTreeRegressor()])</span></div>
<div class="line"><span class="lineno">  521</span><span class="stringliteral">    ... def test_sklearn_compatible_estimator(estimator, check):</span></div>
<div class="line"><span class="lineno">  522</span><span class="stringliteral">    ...     check(estimator)</span></div>
<div class="line"><span class="lineno">  523</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  524</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  525</span>    <span class="keyword">import</span> pytest</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordflow">if</span> any(isinstance(est, type) <span class="keywordflow">for</span> est <span class="keywordflow">in</span> estimators):</div>
<div class="line"><span class="lineno">  528</span>        msg = (</div>
<div class="line"><span class="lineno">  529</span>            <span class="stringliteral">&quot;Passing a class was deprecated in version 0.23 &quot;</span></div>
<div class="line"><span class="lineno">  530</span>            <span class="stringliteral">&quot;and isn&#39;t supported anymore from 0.24.&quot;</span></div>
<div class="line"><span class="lineno">  531</span>            <span class="stringliteral">&quot;Please pass an instance instead.&quot;</span></div>
<div class="line"><span class="lineno">  532</span>        )</div>
<div class="line"><span class="lineno">  533</span>        <span class="keywordflow">raise</span> TypeError(msg)</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span>    <span class="keyword">def </span>checks_generator():</div>
<div class="line"><span class="lineno">  536</span>        <span class="keywordflow">for</span> estimator <span class="keywordflow">in</span> estimators:</div>
<div class="line"><span class="lineno">  537</span>            name = type(estimator).__name__</div>
<div class="line"><span class="lineno">  538</span>            <span class="keywordflow">for</span> check <span class="keywordflow">in</span> _yield_all_checks(estimator):</div>
<div class="line"><span class="lineno">  539</span>                check = partial(check, name)</div>
<div class="line"><span class="lineno">  540</span>                <span class="keywordflow">yield</span> _maybe_mark_xfail(estimator, check, pytest)</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>    <span class="keywordflow">return</span> pytest.mark.parametrize(</div>
<div class="line"><span class="lineno">  543</span>        <span class="stringliteral">&quot;estimator, check&quot;</span>, checks_generator(), ids=_get_check_estimator_ids</div>
<div class="line"><span class="lineno">  544</span>    )</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5254c3665094f049f2c27348765b4e83" name="a5254c3665094f049f2c27348765b4e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5254c3665094f049f2c27348765b4e83">&#9670;&#160;</a></span>CROSS_DECOMPOSITION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list sklearn.utils.estimator_checks.CROSS_DECOMPOSITION = [&quot;PLSCanonical&quot;, &quot;PLSRegression&quot;, &quot;CCA&quot;, &quot;PLSSVD&quot;]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac9a0b784b1e3148674c59a93816471cd" name="ac9a0b784b1e3148674c59a93816471cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a0b784b1e3148674c59a93816471cd">&#9670;&#160;</a></span>REGRESSION_DATASET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.utils.estimator_checks.REGRESSION_DATASET = None</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
