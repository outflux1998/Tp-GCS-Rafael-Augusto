<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: numpy.lib.stride_tricks Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenumpy.html">numpy</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1lib.html">lib</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html">stride_tricks</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">numpy.lib.stride_tricks Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1lib_1_1stride__tricks_1_1_dummy_array.html">DummyArray</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa883b4b2aa58712a445dcc2228343983" id="r_aa883b4b2aa58712a445dcc2228343983"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#aa883b4b2aa58712a445dcc2228343983">_maybe_view_as_subclass</a> (original_array, new_array)</td></tr>
<tr class="separator:aa883b4b2aa58712a445dcc2228343983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaae5ffae2a6fb4e5cd733316c3a7479" id="r_acaae5ffae2a6fb4e5cd733316c3a7479"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#acaae5ffae2a6fb4e5cd733316c3a7479">as_strided</a> (<a class="el" href="namespacenumpy_1_1core_1_1numerictypes.html#af7a40df6735224194004fe9d7a2b80d4">x</a>, <a class="el" href="namespacenumpy_1_1core_1_1fromnumeric.html#aa22b69964320c5aabb55d909c8780c9f">shape</a>=None, strides=None, subok=False, writeable=True)</td></tr>
<tr class="separator:acaae5ffae2a6fb4e5cd733316c3a7479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc280d8b99407c87d468d16fc01e8a09" id="r_abc280d8b99407c87d468d16fc01e8a09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#abc280d8b99407c87d468d16fc01e8a09">_sliding_window_view_dispatcher</a> (<a class="el" href="namespacenumpy_1_1core_1_1numerictypes.html#af7a40df6735224194004fe9d7a2b80d4">x</a>, window_shape, axis=None, *subok=None, writeable=None)</td></tr>
<tr class="separator:abc280d8b99407c87d468d16fc01e8a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b376b4008abd5a43bef8703bf91d6c" id="r_a35b376b4008abd5a43bef8703bf91d6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#a35b376b4008abd5a43bef8703bf91d6c">sliding_window_view</a> (<a class="el" href="namespacenumpy_1_1core_1_1numerictypes.html#af7a40df6735224194004fe9d7a2b80d4">x</a>, window_shape, axis=None, *subok=False, writeable=False)</td></tr>
<tr class="separator:a35b376b4008abd5a43bef8703bf91d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd2cde1518ac9b956f102ff3365c2db" id="r_a8cd2cde1518ac9b956f102ff3365c2db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#a8cd2cde1518ac9b956f102ff3365c2db">_broadcast_to</a> (array, <a class="el" href="namespacenumpy_1_1core_1_1fromnumeric.html#aa22b69964320c5aabb55d909c8780c9f">shape</a>, subok, readonly)</td></tr>
<tr class="separator:a8cd2cde1518ac9b956f102ff3365c2db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa40dd48e4f9592014059c5ca31c522f5" id="r_aa40dd48e4f9592014059c5ca31c522f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#aa40dd48e4f9592014059c5ca31c522f5">_broadcast_to_dispatcher</a> (array, <a class="el" href="namespacenumpy_1_1core_1_1fromnumeric.html#aa22b69964320c5aabb55d909c8780c9f">shape</a>, subok=None)</td></tr>
<tr class="separator:aa40dd48e4f9592014059c5ca31c522f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac137554893a860f788431190700536e2" id="r_ac137554893a860f788431190700536e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#ac137554893a860f788431190700536e2">broadcast_to</a> (array, <a class="el" href="namespacenumpy_1_1core_1_1fromnumeric.html#aa22b69964320c5aabb55d909c8780c9f">shape</a>, subok=False)</td></tr>
<tr class="separator:ac137554893a860f788431190700536e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4b1ef67600f332daefcb9315f498be" id="r_aaf4b1ef67600f332daefcb9315f498be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#aaf4b1ef67600f332daefcb9315f498be">_broadcast_shape</a> (*args)</td></tr>
<tr class="separator:aaf4b1ef67600f332daefcb9315f498be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16af301d58873b9dfcf527ecba841315" id="r_a16af301d58873b9dfcf527ecba841315"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#a16af301d58873b9dfcf527ecba841315">broadcast_shapes</a> (*args)</td></tr>
<tr class="separator:a16af301d58873b9dfcf527ecba841315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ac180c929374774f5727a2c43cbf38" id="r_a35ac180c929374774f5727a2c43cbf38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#a35ac180c929374774f5727a2c43cbf38">_broadcast_arrays_dispatcher</a> (*args, subok=None)</td></tr>
<tr class="separator:a35ac180c929374774f5727a2c43cbf38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e20d0ca23440e318c001cba89b24b70" id="r_a2e20d0ca23440e318c001cba89b24b70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1lib_1_1stride__tricks.html#a2e20d0ca23440e318c001cba89b24b70">broadcast_arrays</a> (*args, subok=False)</td></tr>
<tr class="separator:a2e20d0ca23440e318c001cba89b24b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Utilities that manipulate strides to achieve desirable effects.

An explanation of strides can be found in the "ndarray.rst" file in the
NumPy reference guide.</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a35ac180c929374774f5727a2c43cbf38" name="a35ac180c929374774f5727a2c43cbf38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35ac180c929374774f5727a2c43cbf38">&#9670;&#160;</a></span>_broadcast_arrays_dispatcher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks._broadcast_arrays_dispatcher </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subok</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  476</span><span class="keyword">def </span>_broadcast_arrays_dispatcher(*args, subok=None):</div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordflow">return</span> args</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span><span class="preprocessor">@array_function_dispatch(_broadcast_arrays_dispatcher, module=&#39;numpy&#39;)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf4b1ef67600f332daefcb9315f498be" name="aaf4b1ef67600f332daefcb9315f498be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf4b1ef67600f332daefcb9315f498be">&#9670;&#160;</a></span>_broadcast_shape()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks._broadcast_shape </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns the shape of the arrays that would result from broadcasting the
supplied arrays against each other.
</pre> <div class="fragment"><div class="line"><span class="lineno">  416</span><span class="keyword">def </span>_broadcast_shape(*args):</div>
<div class="line"><span class="lineno">  417</span>    <span class="stringliteral">&quot;&quot;&quot;Returns the shape of the arrays that would result from broadcasting the</span></div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral">    supplied arrays against each other.</span></div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  420</span>    <span class="comment"># use the old-iterator because np.nditer does not handle size 0 arrays</span></div>
<div class="line"><span class="lineno">  421</span>    <span class="comment"># consistently</span></div>
<div class="line"><span class="lineno">  422</span>    b = np.broadcast(*args[:32])</div>
<div class="line"><span class="lineno">  423</span>    <span class="comment"># unfortunately, it cannot handle 32 or more arguments directly</span></div>
<div class="line"><span class="lineno">  424</span>    <span class="keywordflow">for</span> pos <span class="keywordflow">in</span> range(32, len(args), 31):</div>
<div class="line"><span class="lineno">  425</span>        <span class="comment"># ironically, np.broadcast does not properly handle np.broadcast</span></div>
<div class="line"><span class="lineno">  426</span>        <span class="comment"># objects (it treats them as scalars)</span></div>
<div class="line"><span class="lineno">  427</span>        <span class="comment"># use broadcasting to avoid allocating the full array</span></div>
<div class="line"><span class="lineno">  428</span>        b = broadcast_to(0, b.shape)</div>
<div class="line"><span class="lineno">  429</span>        b = np.broadcast(b, *args[pos:(pos + 31)])</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">return</span> b.shape</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span><span class="preprocessor">@set_module(&#39;numpy&#39;)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8cd2cde1518ac9b956f102ff3365c2db" name="a8cd2cde1518ac9b956f102ff3365c2db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cd2cde1518ac9b956f102ff3365c2db">&#9670;&#160;</a></span>_broadcast_to()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks._broadcast_to </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subok</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>readonly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  340</span><span class="keyword">def </span>_broadcast_to(array, shape, subok, readonly):</div>
<div class="line"><span class="lineno">  341</span>    shape = tuple(shape) <span class="keywordflow">if</span> np.iterable(shape) <span class="keywordflow">else</span> (shape,)</div>
<div class="line"><span class="lineno">  342</span>    array = np.array(array, copy=<span class="keyword">False</span>, subok=subok)</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> shape <span class="keywordflow">and</span> array.shape:</div>
<div class="line"><span class="lineno">  344</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;cannot broadcast a non-scalar to a scalar array&#39;</span>)</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordflow">if</span> any(size &lt; 0 <span class="keywordflow">for</span> size <span class="keywordflow">in</span> shape):</div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;all elements of broadcast shape must be non-&#39;</span></div>
<div class="line"><span class="lineno">  347</span>                         <span class="stringliteral">&#39;negative&#39;</span>)</div>
<div class="line"><span class="lineno">  348</span>    extras = []</div>
<div class="line"><span class="lineno">  349</span>    it = np.nditer(</div>
<div class="line"><span class="lineno">  350</span>        (array,), flags=[<span class="stringliteral">&#39;multi_index&#39;</span>, <span class="stringliteral">&#39;refs_ok&#39;</span>, <span class="stringliteral">&#39;zerosize_ok&#39;</span>] + extras,</div>
<div class="line"><span class="lineno">  351</span>        op_flags=[<span class="stringliteral">&#39;readonly&#39;</span>], itershape=shape, order=<span class="stringliteral">&#39;C&#39;</span>)</div>
<div class="line"><span class="lineno">  352</span>    <span class="keyword">with</span> it:</div>
<div class="line"><span class="lineno">  353</span>        <span class="comment"># never really has writebackifcopy semantics</span></div>
<div class="line"><span class="lineno">  354</span>        broadcast = it.itviews[0]</div>
<div class="line"><span class="lineno">  355</span>    result = _maybe_view_as_subclass(array, broadcast)</div>
<div class="line"><span class="lineno">  356</span>    <span class="comment"># In a future version this will go away</span></div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> readonly <span class="keywordflow">and</span> array.flags._writeable_no_warn:</div>
<div class="line"><span class="lineno">  358</span>        result.flags.writeable = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  359</span>        result.flags._warn_on_write = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">return</span> result</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa40dd48e4f9592014059c5ca31c522f5" name="aa40dd48e4f9592014059c5ca31c522f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa40dd48e4f9592014059c5ca31c522f5">&#9670;&#160;</a></span>_broadcast_to_dispatcher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks._broadcast_to_dispatcher </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subok</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  363</span><span class="keyword">def </span>_broadcast_to_dispatcher(array, shape, subok=None):</div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordflow">return</span> (array,)</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span> </div>
<div class="line"><span class="lineno">  367</span><span class="preprocessor">@array_function_dispatch(_broadcast_to_dispatcher, module=&#39;numpy&#39;)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa883b4b2aa58712a445dcc2228343983" name="aa883b4b2aa58712a445dcc2228343983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa883b4b2aa58712a445dcc2228343983">&#9670;&#160;</a></span>_maybe_view_as_subclass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks._maybe_view_as_subclass </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>original_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>new_array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   25</span><span class="keyword">def </span>_maybe_view_as_subclass(original_array, new_array):</div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">if</span> type(original_array) <span class="keywordflow">is</span> <span class="keywordflow">not</span> type(new_array):</div>
<div class="line"><span class="lineno">   27</span>        <span class="comment"># if input was an ndarray subclass and subclasses were OK,</span></div>
<div class="line"><span class="lineno">   28</span>        <span class="comment"># then view the result as that subclass.</span></div>
<div class="line"><span class="lineno">   29</span>        new_array = new_array.view(type=type(original_array))</div>
<div class="line"><span class="lineno">   30</span>        <span class="comment"># Since we have done something akin to a view from original_array, we</span></div>
<div class="line"><span class="lineno">   31</span>        <span class="comment"># should let the subclass finalize (if it has it implemented, i.e., is</span></div>
<div class="line"><span class="lineno">   32</span>        <span class="comment"># not None).</span></div>
<div class="line"><span class="lineno">   33</span>        <span class="keywordflow">if</span> new_array.__array_finalize__:</div>
<div class="line"><span class="lineno">   34</span>            new_array.__array_finalize__(original_array)</div>
<div class="line"><span class="lineno">   35</span>    <span class="keywordflow">return</span> new_array</div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abc280d8b99407c87d468d16fc01e8a09" name="abc280d8b99407c87d468d16fc01e8a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc280d8b99407c87d468d16fc01e8a09">&#9670;&#160;</a></span>_sliding_window_view_dispatcher()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks._sliding_window_view_dispatcher </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window_shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axis</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>subok</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>writeable</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  119</span>                                    subok=<span class="keywordtype">None</span>, writeable=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">return</span> (x,)</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span><span class="preprocessor">@array_function_dispatch(_sliding_window_view_dispatcher)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="acaae5ffae2a6fb4e5cd733316c3a7479" name="acaae5ffae2a6fb4e5cd733316c3a7479"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaae5ffae2a6fb4e5cd733316c3a7479">&#9670;&#160;</a></span>as_strided()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks.as_strided </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shape</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>strides</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subok</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>writeable</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create a view into the array with the given shape and strides.

.. warning:: This function has to be used with extreme care, see notes.

Parameters
----------
x : ndarray
    Array to create a new.
shape : sequence of int, optional
    The shape of the new array. Defaults to ``x.shape``.
strides : sequence of int, optional
    The strides of the new array. Defaults to ``x.strides``.
subok : bool, optional
    .. versionadded:: 1.10

    If True, subclasses are preserved.
writeable : bool, optional
    .. versionadded:: 1.12

    If set to False, the returned array will always be readonly.
    Otherwise it will be writable if the original array was. It
    is advisable to set this to False if possible (see Notes).

Returns
-------
view : ndarray

See also
--------
broadcast_to : broadcast an array to a given shape.
reshape : reshape an array.
lib.stride_tricks.sliding_window_view :
    userfriendly and safe function for the creation of sliding window views.

Notes
-----
``as_strided`` creates a view into the array given the exact strides
and shape. This means it manipulates the internal data structure of
ndarray and, if done incorrectly, the array elements can point to
invalid memory and can corrupt results or crash your program.
It is advisable to always use the original ``x.strides`` when
calculating new strides to avoid reliance on a contiguous memory
layout.

Furthermore, arrays created with this function often contain self
overlapping memory, so that two elements are identical.
Vectorized write operations on such arrays will typically be
unpredictable. They may even give different results for small, large,
or transposed arrays.

Since writing to these arrays has to be tested and done with great
care, you may want to use ``writeable=False`` to avoid accidental write
operations.

For these reasons it is advisable to avoid ``as_strided`` when
possible.
</pre> <div class="fragment"><div class="line"><span class="lineno">   38</span><span class="keyword">def </span>as_strided(x, shape=None, strides=None, subok=False, writeable=True):</div>
<div class="line"><span class="lineno">   39</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral">    Create a view into the array with the given shape and strides.</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">    .. warning:: This function has to be used with extreme care, see notes.</span></div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   45</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral">    x : ndarray</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">        Array to create a new.</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">    shape : sequence of int, optional</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">        The shape of the new array. Defaults to ``x.shape``.</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">    strides : sequence of int, optional</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">        The strides of the new array. Defaults to ``x.strides``.</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    subok : bool, optional</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">        .. versionadded:: 1.10</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">        If True, subclasses are preserved.</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    writeable : bool, optional</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">        .. versionadded:: 1.12</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">        If set to False, the returned array will always be readonly.</span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">        Otherwise it will be writable if the original array was. It</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">        is advisable to set this to False if possible (see Notes).</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">    view : ndarray</span></div>
<div class="line"><span class="lineno">   66</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">    See also</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">    broadcast_to : broadcast an array to a given shape.</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral">    reshape : reshape an array.</span></div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral">    lib.stride_tricks.sliding_window_view :</span></div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral">        userfriendly and safe function for the creation of sliding window views.</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    ``as_strided`` creates a view into the array given the exact strides</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">    and shape. This means it manipulates the internal data structure of</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    ndarray and, if done incorrectly, the array elements can point to</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    invalid memory and can corrupt results or crash your program.</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">    It is advisable to always use the original ``x.strides`` when</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">    calculating new strides to avoid reliance on a contiguous memory</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">    layout.</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">    Furthermore, arrays created with this function often contain self</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">    overlapping memory, so that two elements are identical.</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    Vectorized write operations on such arrays will typically be</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    unpredictable. They may even give different results for small, large,</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">    or transposed arrays.</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">    Since writing to these arrays has to be tested and done with great</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">    care, you may want to use ``writeable=False`` to avoid accidental write</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    operations.</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">    For these reasons it is advisable to avoid ``as_strided`` when</span></div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">    possible.</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="comment"># first convert input to array, possibly keeping subclass</span></div>
<div class="line"><span class="lineno">   98</span>    x = np.array(x, copy=<span class="keyword">False</span>, subok=subok)</div>
<div class="line"><span class="lineno">   99</span>    interface = dict(x.__array_interface__)</div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">if</span> shape <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  101</span>        interface[<span class="stringliteral">&#39;shape&#39;</span>] = tuple(shape)</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">if</span> strides <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  103</span>        interface[<span class="stringliteral">&#39;strides&#39;</span>] = tuple(strides)</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    array = np.asarray(DummyArray(interface, base=x))</div>
<div class="line"><span class="lineno">  106</span>    <span class="comment"># The route via `__interface__` does not preserve structured</span></div>
<div class="line"><span class="lineno">  107</span>    <span class="comment"># dtypes. Since dtype should remain unchanged, we set it explicitly.</span></div>
<div class="line"><span class="lineno">  108</span>    array.dtype = x.dtype</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    view = _maybe_view_as_subclass(x, array)</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">if</span> view.flags.writeable <span class="keywordflow">and</span> <span class="keywordflow">not</span> writeable:</div>
<div class="line"><span class="lineno">  113</span>        view.flags.writeable = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">return</span> view</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e20d0ca23440e318c001cba89b24b70" name="a2e20d0ca23440e318c001cba89b24b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e20d0ca23440e318c001cba89b24b70">&#9670;&#160;</a></span>broadcast_arrays()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks.broadcast_arrays </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subok</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Broadcast any number of arrays against each other.

Parameters
----------
`*args` : array_likes
    The arrays to broadcast.

subok : bool, optional
    If True, then sub-classes will be passed-through, otherwise
    the returned arrays will be forced to be a base-class array (default).

Returns
-------
broadcasted : list of arrays
    These arrays are views on the original arrays.  They are typically
    not contiguous.  Furthermore, more than one element of a
    broadcasted array may refer to a single memory location. If you need
    to write to the arrays, make copies first. While you can set the
    ``writable`` flag True, writing to a single output value may end up
    changing more than one location in the output array.

    .. deprecated:: 1.17
        The output is currently marked so that if written to, a deprecation
        warning will be emitted. A future version will set the
        ``writable`` flag False so writing to it will raise an error.

See Also
--------
broadcast
broadcast_to
broadcast_shapes

Examples
--------
&gt;&gt;&gt; x = np.array([[1,2,3]])
&gt;&gt;&gt; y = np.array([[4],[5]])
&gt;&gt;&gt; np.broadcast_arrays(x, y)
[array([[1, 2, 3],
       [1, 2, 3]]), array([[4, 4, 4],
       [5, 5, 5]])]

Here is a useful idiom for getting contiguous copies instead of
non-contiguous views.

&gt;&gt;&gt; [np.array(a) for a in np.broadcast_arrays(x, y)]
[array([[1, 2, 3],
       [1, 2, 3]]), array([[4, 4, 4],
       [5, 5, 5]])]</pre> <div class="fragment"><div class="line"><span class="lineno">  481</span><span class="keyword">def </span>broadcast_arrays(*args, subok=False):</div>
<div class="line"><span class="lineno">  482</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  483</span><span class="stringliteral">    Broadcast any number of arrays against each other.</span></div>
<div class="line"><span class="lineno">  484</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  485</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  486</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  487</span><span class="stringliteral">    `*args` : array_likes</span></div>
<div class="line"><span class="lineno">  488</span><span class="stringliteral">        The arrays to broadcast.</span></div>
<div class="line"><span class="lineno">  489</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  490</span><span class="stringliteral">    subok : bool, optional</span></div>
<div class="line"><span class="lineno">  491</span><span class="stringliteral">        If True, then sub-classes will be passed-through, otherwise</span></div>
<div class="line"><span class="lineno">  492</span><span class="stringliteral">        the returned arrays will be forced to be a base-class array (default).</span></div>
<div class="line"><span class="lineno">  493</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  494</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  495</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  496</span><span class="stringliteral">    broadcasted : list of arrays</span></div>
<div class="line"><span class="lineno">  497</span><span class="stringliteral">        These arrays are views on the original arrays.  They are typically</span></div>
<div class="line"><span class="lineno">  498</span><span class="stringliteral">        not contiguous.  Furthermore, more than one element of a</span></div>
<div class="line"><span class="lineno">  499</span><span class="stringliteral">        broadcasted array may refer to a single memory location. If you need</span></div>
<div class="line"><span class="lineno">  500</span><span class="stringliteral">        to write to the arrays, make copies first. While you can set the</span></div>
<div class="line"><span class="lineno">  501</span><span class="stringliteral">        ``writable`` flag True, writing to a single output value may end up</span></div>
<div class="line"><span class="lineno">  502</span><span class="stringliteral">        changing more than one location in the output array.</span></div>
<div class="line"><span class="lineno">  503</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  504</span><span class="stringliteral">        .. deprecated:: 1.17</span></div>
<div class="line"><span class="lineno">  505</span><span class="stringliteral">            The output is currently marked so that if written to, a deprecation</span></div>
<div class="line"><span class="lineno">  506</span><span class="stringliteral">            warning will be emitted. A future version will set the</span></div>
<div class="line"><span class="lineno">  507</span><span class="stringliteral">            ``writable`` flag False so writing to it will raise an error.</span></div>
<div class="line"><span class="lineno">  508</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  509</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  510</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  511</span><span class="stringliteral">    broadcast</span></div>
<div class="line"><span class="lineno">  512</span><span class="stringliteral">    broadcast_to</span></div>
<div class="line"><span class="lineno">  513</span><span class="stringliteral">    broadcast_shapes</span></div>
<div class="line"><span class="lineno">  514</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  515</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  516</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  517</span><span class="stringliteral">    &gt;&gt;&gt; x = np.array([[1,2,3]])</span></div>
<div class="line"><span class="lineno">  518</span><span class="stringliteral">    &gt;&gt;&gt; y = np.array([[4],[5]])</span></div>
<div class="line"><span class="lineno">  519</span><span class="stringliteral">    &gt;&gt;&gt; np.broadcast_arrays(x, y)</span></div>
<div class="line"><span class="lineno">  520</span><span class="stringliteral">    [array([[1, 2, 3],</span></div>
<div class="line"><span class="lineno">  521</span><span class="stringliteral">           [1, 2, 3]]), array([[4, 4, 4],</span></div>
<div class="line"><span class="lineno">  522</span><span class="stringliteral">           [5, 5, 5]])]</span></div>
<div class="line"><span class="lineno">  523</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  524</span><span class="stringliteral">    Here is a useful idiom for getting contiguous copies instead of</span></div>
<div class="line"><span class="lineno">  525</span><span class="stringliteral">    non-contiguous views.</span></div>
<div class="line"><span class="lineno">  526</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  527</span><span class="stringliteral">    &gt;&gt;&gt; [np.array(a) for a in np.broadcast_arrays(x, y)]</span></div>
<div class="line"><span class="lineno">  528</span><span class="stringliteral">    [array([[1, 2, 3],</span></div>
<div class="line"><span class="lineno">  529</span><span class="stringliteral">           [1, 2, 3]]), array([[4, 4, 4],</span></div>
<div class="line"><span class="lineno">  530</span><span class="stringliteral">           [5, 5, 5]])]</span></div>
<div class="line"><span class="lineno">  531</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  532</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  533</span>    <span class="comment"># nditer is not used here to avoid the limit of 32 arrays.</span></div>
<div class="line"><span class="lineno">  534</span>    <span class="comment"># Otherwise, something like the following one-liner would suffice:</span></div>
<div class="line"><span class="lineno">  535</span>    <span class="comment"># return np.nditer(args, flags=[&#39;multi_index&#39;, &#39;zerosize_ok&#39;],</span></div>
<div class="line"><span class="lineno">  536</span>    <span class="comment">#                  order=&#39;C&#39;).itviews</span></div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>    args = [np.array(_m, copy=<span class="keyword">False</span>, subok=subok) <span class="keywordflow">for</span> _m <span class="keywordflow">in</span> args]</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>    shape = _broadcast_shape(*args)</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>    <span class="keywordflow">if</span> all(array.shape == shape <span class="keywordflow">for</span> array <span class="keywordflow">in</span> args):</div>
<div class="line"><span class="lineno">  543</span>        <span class="comment"># Common case where nothing needs to be broadcasted.</span></div>
<div class="line"><span class="lineno">  544</span>        <span class="keywordflow">return</span> args</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>    <span class="keywordflow">return</span> [_broadcast_to(array, shape, subok=subok, readonly=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  547</span>            <span class="keywordflow">for</span> array <span class="keywordflow">in</span> args]</div>
</div><!-- fragment -->
</div>
</div>
<a id="a16af301d58873b9dfcf527ecba841315" name="a16af301d58873b9dfcf527ecba841315"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16af301d58873b9dfcf527ecba841315">&#9670;&#160;</a></span>broadcast_shapes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks.broadcast_shapes </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Broadcast the input shapes into a single shape.

:ref:`Learn more about broadcasting here &lt;basics.broadcasting&gt;`.

.. versionadded:: 1.20.0

Parameters
----------
`*args` : tuples of ints, or ints
    The shapes to be broadcast against each other.

Returns
-------
tuple
    Broadcasted shape.

Raises
------
ValueError
    If the shapes are not compatible and cannot be broadcast according
    to NumPy's broadcasting rules.

See Also
--------
broadcast
broadcast_arrays
broadcast_to

Examples
--------
&gt;&gt;&gt; np.broadcast_shapes((1, 2), (3, 1), (3, 2))
(3, 2)

&gt;&gt;&gt; np.broadcast_shapes((6, 7), (5, 6, 1), (7,), (5, 1, 7))
(5, 6, 7)
</pre> <div class="fragment"><div class="line"><span class="lineno">  434</span><span class="keyword">def </span>broadcast_shapes(*args):</div>
<div class="line"><span class="lineno">  435</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  436</span><span class="stringliteral">    Broadcast the input shapes into a single shape.</span></div>
<div class="line"><span class="lineno">  437</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  438</span><span class="stringliteral">    :ref:`Learn more about broadcasting here &lt;basics.broadcasting&gt;`.</span></div>
<div class="line"><span class="lineno">  439</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  440</span><span class="stringliteral">    .. versionadded:: 1.20.0</span></div>
<div class="line"><span class="lineno">  441</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  442</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  443</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  444</span><span class="stringliteral">    `*args` : tuples of ints, or ints</span></div>
<div class="line"><span class="lineno">  445</span><span class="stringliteral">        The shapes to be broadcast against each other.</span></div>
<div class="line"><span class="lineno">  446</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  447</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  448</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  449</span><span class="stringliteral">    tuple</span></div>
<div class="line"><span class="lineno">  450</span><span class="stringliteral">        Broadcasted shape.</span></div>
<div class="line"><span class="lineno">  451</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  452</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">  453</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">  454</span><span class="stringliteral">    ValueError</span></div>
<div class="line"><span class="lineno">  455</span><span class="stringliteral">        If the shapes are not compatible and cannot be broadcast according</span></div>
<div class="line"><span class="lineno">  456</span><span class="stringliteral">        to NumPy&#39;s broadcasting rules.</span></div>
<div class="line"><span class="lineno">  457</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  458</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  459</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  460</span><span class="stringliteral">    broadcast</span></div>
<div class="line"><span class="lineno">  461</span><span class="stringliteral">    broadcast_arrays</span></div>
<div class="line"><span class="lineno">  462</span><span class="stringliteral">    broadcast_to</span></div>
<div class="line"><span class="lineno">  463</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  464</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  465</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  466</span><span class="stringliteral">    &gt;&gt;&gt; np.broadcast_shapes((1, 2), (3, 1), (3, 2))</span></div>
<div class="line"><span class="lineno">  467</span><span class="stringliteral">    (3, 2)</span></div>
<div class="line"><span class="lineno">  468</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  469</span><span class="stringliteral">    &gt;&gt;&gt; np.broadcast_shapes((6, 7), (5, 6, 1), (7,), (5, 1, 7))</span></div>
<div class="line"><span class="lineno">  470</span><span class="stringliteral">    (5, 6, 7)</span></div>
<div class="line"><span class="lineno">  471</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  472</span>    arrays = [np.empty(x, dtype=[]) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> args]</div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">return</span> _broadcast_shape(*arrays)</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac137554893a860f788431190700536e2" name="ac137554893a860f788431190700536e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac137554893a860f788431190700536e2">&#9670;&#160;</a></span>broadcast_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks.broadcast_to </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subok</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Broadcast an array to a new shape.

Parameters
----------
array : array_like
    The array to broadcast.
shape : tuple or int
    The shape of the desired array. A single integer ``i`` is interpreted
    as ``(i,)``.
subok : bool, optional
    If True, then sub-classes will be passed-through, otherwise
    the returned array will be forced to be a base-class array (default).

Returns
-------
broadcast : array
    A readonly view on the original array with the given shape. It is
    typically not contiguous. Furthermore, more than one element of a
    broadcasted array may refer to a single memory location.

Raises
------
ValueError
    If the array is not compatible with the new shape according to NumPy's
    broadcasting rules.

See Also
--------
broadcast
broadcast_arrays
broadcast_shapes

Notes
-----
.. versionadded:: 1.10.0

Examples
--------
&gt;&gt;&gt; x = np.array([1, 2, 3])
&gt;&gt;&gt; np.broadcast_to(x, (3, 3))
array([[1, 2, 3],
       [1, 2, 3],
       [1, 2, 3]])
</pre> <div class="fragment"><div class="line"><span class="lineno">  368</span><span class="keyword">def </span>broadcast_to(array, shape, subok=False):</div>
<div class="line"><span class="lineno">  369</span>    <span class="stringliteral">&quot;&quot;&quot;Broadcast an array to a new shape.</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">    array : array_like</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">        The array to broadcast.</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">    shape : tuple or int</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">        The shape of the desired array. A single integer ``i`` is interpreted</span></div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">        as ``(i,)``.</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">    subok : bool, optional</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">        If True, then sub-classes will be passed-through, otherwise</span></div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral">        the returned array will be forced to be a base-class array (default).</span></div>
<div class="line"><span class="lineno">  381</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  383</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">    broadcast : array</span></div>
<div class="line"><span class="lineno">  385</span><span class="stringliteral">        A readonly view on the original array with the given shape. It is</span></div>
<div class="line"><span class="lineno">  386</span><span class="stringliteral">        typically not contiguous. Furthermore, more than one element of a</span></div>
<div class="line"><span class="lineno">  387</span><span class="stringliteral">        broadcasted array may refer to a single memory location.</span></div>
<div class="line"><span class="lineno">  388</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  389</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral">    ValueError</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">        If the array is not compatible with the new shape according to NumPy&#39;s</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">        broadcasting rules.</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">    broadcast</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral">    broadcast_arrays</span></div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">    broadcast_shapes</span></div>
<div class="line"><span class="lineno">  400</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">    .. versionadded:: 1.10.0</span></div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  405</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  406</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  407</span><span class="stringliteral">    &gt;&gt;&gt; x = np.array([1, 2, 3])</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral">    &gt;&gt;&gt; np.broadcast_to(x, (3, 3))</span></div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">    array([[1, 2, 3],</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral">           [1, 2, 3],</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">           [1, 2, 3]])</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">return</span> _broadcast_to(array, shape, subok=subok, readonly=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a35b376b4008abd5a43bef8703bf91d6c" name="a35b376b4008abd5a43bef8703bf91d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35b376b4008abd5a43bef8703bf91d6c">&#9670;&#160;</a></span>sliding_window_view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.lib.stride_tricks.sliding_window_view </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>window_shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axis</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>subok</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>writeable</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create a sliding window view into the array with the given window shape.

Also known as rolling or moving window, the window slides across all
dimensions of the array and extracts subsets of the array at all window
positions.

.. versionadded:: 1.20.0

Parameters
----------
x : array_like
    Array to create the sliding window view from.
window_shape : int or tuple of int
    Size of window over each axis that takes part in the sliding window.
    If `axis` is not present, must have same length as the number of input
    array dimensions. Single integers `i` are treated as if they were the
    tuple `(i,)`.
axis : int or tuple of int, optional
    Axis or axes along which the sliding window is applied.
    By default, the sliding window is applied to all axes and
    `window_shape[i]` will refer to axis `i` of `x`.
    If `axis` is given as a `tuple of int`, `window_shape[i]` will refer to
    the axis `axis[i]` of `x`.
    Single integers `i` are treated as if they were the tuple `(i,)`.
subok : bool, optional
    If True, sub-classes will be passed-through, otherwise the returned
    array will be forced to be a base-class array (default).
writeable : bool, optional
    When true, allow writing to the returned view. The default is false,
    as this should be used with caution: the returned view contains the
    same memory location multiple times, so writing to one location will
    cause others to change.

Returns
-------
view : ndarray
    Sliding window view of the array. The sliding window dimensions are
    inserted at the end, and the original dimensions are trimmed as
    required by the size of the sliding window.
    That is, ``view.shape = x_shape_trimmed + window_shape``, where
    ``x_shape_trimmed`` is ``x.shape`` with every entry reduced by one less
    than the corresponding window size.

See Also
--------
lib.stride_tricks.as_strided: A lower-level and less safe routine for
    creating arbitrary views from custom shape and strides.
broadcast_to: broadcast an array to a given shape.

Notes
-----
For many applications using a sliding window view can be convenient, but
potentially very slow. Often specialized solutions exist, for example:

- `scipy.signal.fftconvolve`

- filtering functions in `scipy.ndimage`

- moving window functions provided by
  `bottleneck &lt;https://github.com/pydata/bottleneck&gt;`_.

As a rough estimate, a sliding window approach with an input size of `N`
and a window size of `W` will scale as `O(N*W)` where frequently a special
algorithm can achieve `O(N)`. That means that the sliding window variant
for a window size of 100 can be a 100 times slower than a more specialized
version.

Nevertheless, for small window sizes, when no custom algorithm exists, or
as a prototyping and developing tool, this function can be a good solution.

Examples
--------
&gt;&gt;&gt; x = np.arange(6)
&gt;&gt;&gt; x.shape
(6,)
&gt;&gt;&gt; v = sliding_window_view(x, 3)
&gt;&gt;&gt; v.shape
(4, 3)
&gt;&gt;&gt; v
array([[0, 1, 2],
       [1, 2, 3],
       [2, 3, 4],
       [3, 4, 5]])

This also works in more dimensions, e.g.

&gt;&gt;&gt; i, j = np.ogrid[:3, :4]
&gt;&gt;&gt; x = 10*i + j
&gt;&gt;&gt; x.shape
(3, 4)
&gt;&gt;&gt; x
array([[ 0,  1,  2,  3],
       [10, 11, 12, 13],
       [20, 21, 22, 23]])
&gt;&gt;&gt; shape = (2,2)
&gt;&gt;&gt; v = sliding_window_view(x, shape)
&gt;&gt;&gt; v.shape
(2, 3, 2, 2)
&gt;&gt;&gt; v
array([[[[ 0,  1],
         [10, 11]],
        [[ 1,  2],
         [11, 12]],
        [[ 2,  3],
         [12, 13]]],
       [[[10, 11],
         [20, 21]],
        [[11, 12],
         [21, 22]],
        [[12, 13],
         [22, 23]]]])

The axis can be specified explicitly:

&gt;&gt;&gt; v = sliding_window_view(x, 3, 0)
&gt;&gt;&gt; v.shape
(1, 4, 3)
&gt;&gt;&gt; v
array([[[ 0, 10, 20],
        [ 1, 11, 21],
        [ 2, 12, 22],
        [ 3, 13, 23]]])

The same axis can be used several times. In that case, every use reduces
the corresponding original dimension:

&gt;&gt;&gt; v = sliding_window_view(x, (2, 3), (1, 1))
&gt;&gt;&gt; v.shape
(3, 1, 2, 3)
&gt;&gt;&gt; v
array([[[[ 0,  1,  2],
         [ 1,  2,  3]]],
       [[[10, 11, 12],
         [11, 12, 13]]],
       [[[20, 21, 22],
         [21, 22, 23]]]])

Combining with stepped slicing (`::step`), this can be used to take sliding
views which skip elements:

&gt;&gt;&gt; x = np.arange(7)
&gt;&gt;&gt; sliding_window_view(x, 5)[:, ::2]
array([[0, 2, 4],
       [1, 3, 5],
       [2, 4, 6]])

or views which move by multiple elements

&gt;&gt;&gt; x = np.arange(7)
&gt;&gt;&gt; sliding_window_view(x, 3)[::2, :]
array([[0, 1, 2],
       [2, 3, 4],
       [4, 5, 6]])

A common application of `sliding_window_view` is the calculation of running
statistics. The simplest example is the
`moving average &lt;https://en.wikipedia.org/wiki/Moving_average&gt;`_:

&gt;&gt;&gt; x = np.arange(6)
&gt;&gt;&gt; x.shape
(6,)
&gt;&gt;&gt; v = sliding_window_view(x, 3)
&gt;&gt;&gt; v.shape
(4, 3)
&gt;&gt;&gt; v
array([[0, 1, 2],
       [1, 2, 3],
       [2, 3, 4],
       [3, 4, 5]])
&gt;&gt;&gt; moving_average = v.mean(axis=-1)
&gt;&gt;&gt; moving_average
array([1., 2., 3., 4.])

Note that a sliding window approach is often **not** optimal (see Notes).
</pre> <div class="fragment"><div class="line"><span class="lineno">  125</span>                        subok=<span class="keyword">False</span>, writeable=<span class="keyword">False</span>):</div>
<div class="line"><span class="lineno">  126</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  127</span><span class="stringliteral">    Create a sliding window view into the array with the given window shape.</span></div>
<div class="line"><span class="lineno">  128</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">    Also known as rolling or moving window, the window slides across all</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral">    dimensions of the array and extracts subsets of the array at all window</span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">    positions.</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">    </span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">    .. versionadded:: 1.20.0</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">    x : array_like</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">        Array to create the sliding window view from.</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">    window_shape : int or tuple of int</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">        Size of window over each axis that takes part in the sliding window.</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">        If `axis` is not present, must have same length as the number of input</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral">        array dimensions. Single integers `i` are treated as if they were the</span></div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">        tuple `(i,)`.</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral">    axis : int or tuple of int, optional</span></div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">        Axis or axes along which the sliding window is applied.</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">        By default, the sliding window is applied to all axes and</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral">        `window_shape[i]` will refer to axis `i` of `x`.</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">        If `axis` is given as a `tuple of int`, `window_shape[i]` will refer to</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">        the axis `axis[i]` of `x`.</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">        Single integers `i` are treated as if they were the tuple `(i,)`.</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">    subok : bool, optional</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">        If True, sub-classes will be passed-through, otherwise the returned</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral">        array will be forced to be a base-class array (default).</span></div>
<div class="line"><span class="lineno">  154</span><span class="stringliteral">    writeable : bool, optional</span></div>
<div class="line"><span class="lineno">  155</span><span class="stringliteral">        When true, allow writing to the returned view. The default is false,</span></div>
<div class="line"><span class="lineno">  156</span><span class="stringliteral">        as this should be used with caution: the returned view contains the</span></div>
<div class="line"><span class="lineno">  157</span><span class="stringliteral">        same memory location multiple times, so writing to one location will</span></div>
<div class="line"><span class="lineno">  158</span><span class="stringliteral">        cause others to change.</span></div>
<div class="line"><span class="lineno">  159</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  162</span><span class="stringliteral">    view : ndarray</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">        Sliding window view of the array. The sliding window dimensions are</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral">        inserted at the end, and the original dimensions are trimmed as</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral">        required by the size of the sliding window.</span></div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">        That is, ``view.shape = x_shape_trimmed + window_shape``, where</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral">        ``x_shape_trimmed`` is ``x.shape`` with every entry reduced by one less</span></div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">        than the corresponding window size.</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">    lib.stride_tricks.as_strided: A lower-level and less safe routine for</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">        creating arbitrary views from custom shape and strides.</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">    broadcast_to: broadcast an array to a given shape.</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral">    For many applications using a sliding window view can be convenient, but</span></div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral">    potentially very slow. Often specialized solutions exist, for example:</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">    - `scipy.signal.fftconvolve`</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">    - filtering functions in `scipy.ndimage`</span></div>
<div class="line"><span class="lineno">  184</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  185</span><span class="stringliteral">    - moving window functions provided by</span></div>
<div class="line"><span class="lineno">  186</span><span class="stringliteral">      `bottleneck &lt;https://github.com/pydata/bottleneck&gt;`_.</span></div>
<div class="line"><span class="lineno">  187</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">    As a rough estimate, a sliding window approach with an input size of `N`</span></div>
<div class="line"><span class="lineno">  189</span><span class="stringliteral">    and a window size of `W` will scale as `O(N*W)` where frequently a special</span></div>
<div class="line"><span class="lineno">  190</span><span class="stringliteral">    algorithm can achieve `O(N)`. That means that the sliding window variant</span></div>
<div class="line"><span class="lineno">  191</span><span class="stringliteral">    for a window size of 100 can be a 100 times slower than a more specialized</span></div>
<div class="line"><span class="lineno">  192</span><span class="stringliteral">    version.</span></div>
<div class="line"><span class="lineno">  193</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  194</span><span class="stringliteral">    Nevertheless, for small window sizes, when no custom algorithm exists, or</span></div>
<div class="line"><span class="lineno">  195</span><span class="stringliteral">    as a prototyping and developing tool, this function can be a good solution.</span></div>
<div class="line"><span class="lineno">  196</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  198</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  199</span><span class="stringliteral">    &gt;&gt;&gt; x = np.arange(6)</span></div>
<div class="line"><span class="lineno">  200</span><span class="stringliteral">    &gt;&gt;&gt; x.shape</span></div>
<div class="line"><span class="lineno">  201</span><span class="stringliteral">    (6,)</span></div>
<div class="line"><span class="lineno">  202</span><span class="stringliteral">    &gt;&gt;&gt; v = sliding_window_view(x, 3)</span></div>
<div class="line"><span class="lineno">  203</span><span class="stringliteral">    &gt;&gt;&gt; v.shape</span></div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral">    (4, 3)</span></div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">    &gt;&gt;&gt; v</span></div>
<div class="line"><span class="lineno">  206</span><span class="stringliteral">    array([[0, 1, 2],</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">           [1, 2, 3],</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">           [2, 3, 4],</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">           [3, 4, 5]])</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral">    This also works in more dimensions, e.g.</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">    &gt;&gt;&gt; i, j = np.ogrid[:3, :4]</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">    &gt;&gt;&gt; x = 10*i + j</span></div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral">    &gt;&gt;&gt; x.shape</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">    (3, 4)</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">    &gt;&gt;&gt; x</span></div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral">    array([[ 0,  1,  2,  3],</span></div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">           [10, 11, 12, 13],</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral">           [20, 21, 22, 23]])</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">    &gt;&gt;&gt; shape = (2,2)</span></div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">    &gt;&gt;&gt; v = sliding_window_view(x, shape)</span></div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral">    &gt;&gt;&gt; v.shape</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">    (2, 3, 2, 2)</span></div>
<div class="line"><span class="lineno">  225</span><span class="stringliteral">    &gt;&gt;&gt; v</span></div>
<div class="line"><span class="lineno">  226</span><span class="stringliteral">    array([[[[ 0,  1],</span></div>
<div class="line"><span class="lineno">  227</span><span class="stringliteral">             [10, 11]],</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral">            [[ 1,  2],</span></div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral">             [11, 12]],</span></div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">            [[ 2,  3],</span></div>
<div class="line"><span class="lineno">  231</span><span class="stringliteral">             [12, 13]]],</span></div>
<div class="line"><span class="lineno">  232</span><span class="stringliteral">           [[[10, 11],</span></div>
<div class="line"><span class="lineno">  233</span><span class="stringliteral">             [20, 21]],</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">            [[11, 12],</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">             [21, 22]],</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">            [[12, 13],</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">             [22, 23]]]])</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">    The axis can be specified explicitly:</span></div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">    &gt;&gt;&gt; v = sliding_window_view(x, 3, 0)</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">    &gt;&gt;&gt; v.shape</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">    (1, 4, 3)</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">    &gt;&gt;&gt; v</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">    array([[[ 0, 10, 20],</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">            [ 1, 11, 21],</span></div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">            [ 2, 12, 22],</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">            [ 3, 13, 23]]])</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral">    The same axis can be used several times. In that case, every use reduces</span></div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">    the corresponding original dimension:</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">    &gt;&gt;&gt; v = sliding_window_view(x, (2, 3), (1, 1))</span></div>
<div class="line"><span class="lineno">  254</span><span class="stringliteral">    &gt;&gt;&gt; v.shape</span></div>
<div class="line"><span class="lineno">  255</span><span class="stringliteral">    (3, 1, 2, 3)</span></div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral">    &gt;&gt;&gt; v</span></div>
<div class="line"><span class="lineno">  257</span><span class="stringliteral">    array([[[[ 0,  1,  2],</span></div>
<div class="line"><span class="lineno">  258</span><span class="stringliteral">             [ 1,  2,  3]]],</span></div>
<div class="line"><span class="lineno">  259</span><span class="stringliteral">           [[[10, 11, 12],</span></div>
<div class="line"><span class="lineno">  260</span><span class="stringliteral">             [11, 12, 13]]],</span></div>
<div class="line"><span class="lineno">  261</span><span class="stringliteral">           [[[20, 21, 22],</span></div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral">             [21, 22, 23]]]])</span></div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral">    Combining with stepped slicing (`::step`), this can be used to take sliding</span></div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">    views which skip elements:</span></div>
<div class="line"><span class="lineno">  266</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  267</span><span class="stringliteral">    &gt;&gt;&gt; x = np.arange(7)</span></div>
<div class="line"><span class="lineno">  268</span><span class="stringliteral">    &gt;&gt;&gt; sliding_window_view(x, 5)[:, ::2]</span></div>
<div class="line"><span class="lineno">  269</span><span class="stringliteral">    array([[0, 2, 4],</span></div>
<div class="line"><span class="lineno">  270</span><span class="stringliteral">           [1, 3, 5],</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">           [2, 4, 6]])</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">    or views which move by multiple elements</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral">    &gt;&gt;&gt; x = np.arange(7)</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral">    &gt;&gt;&gt; sliding_window_view(x, 3)[::2, :]</span></div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">    array([[0, 1, 2],</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">           [2, 3, 4],</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">           [4, 5, 6]])</span></div>
<div class="line"><span class="lineno">  280</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  281</span><span class="stringliteral">    A common application of `sliding_window_view` is the calculation of running</span></div>
<div class="line"><span class="lineno">  282</span><span class="stringliteral">    statistics. The simplest example is the</span></div>
<div class="line"><span class="lineno">  283</span><span class="stringliteral">    `moving average &lt;https://en.wikipedia.org/wiki/Moving_average&gt;`_:</span></div>
<div class="line"><span class="lineno">  284</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral">    &gt;&gt;&gt; x = np.arange(6)</span></div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral">    &gt;&gt;&gt; x.shape</span></div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral">    (6,)</span></div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">    &gt;&gt;&gt; v = sliding_window_view(x, 3)</span></div>
<div class="line"><span class="lineno">  289</span><span class="stringliteral">    &gt;&gt;&gt; v.shape</span></div>
<div class="line"><span class="lineno">  290</span><span class="stringliteral">    (4, 3)</span></div>
<div class="line"><span class="lineno">  291</span><span class="stringliteral">    &gt;&gt;&gt; v</span></div>
<div class="line"><span class="lineno">  292</span><span class="stringliteral">    array([[0, 1, 2],</span></div>
<div class="line"><span class="lineno">  293</span><span class="stringliteral">           [1, 2, 3],</span></div>
<div class="line"><span class="lineno">  294</span><span class="stringliteral">           [2, 3, 4],</span></div>
<div class="line"><span class="lineno">  295</span><span class="stringliteral">           [3, 4, 5]])</span></div>
<div class="line"><span class="lineno">  296</span><span class="stringliteral">    &gt;&gt;&gt; moving_average = v.mean(axis=-1)</span></div>
<div class="line"><span class="lineno">  297</span><span class="stringliteral">    &gt;&gt;&gt; moving_average</span></div>
<div class="line"><span class="lineno">  298</span><span class="stringliteral">    array([1., 2., 3., 4.])</span></div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral">    Note that a sliding window approach is often **not** optimal (see Notes).</span></div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  302</span>    window_shape = (tuple(window_shape)</div>
<div class="line"><span class="lineno">  303</span>                    <span class="keywordflow">if</span> np.iterable(window_shape)</div>
<div class="line"><span class="lineno">  304</span>                    <span class="keywordflow">else</span> (window_shape,))</div>
<div class="line"><span class="lineno">  305</span>    <span class="comment"># first convert input to array, possibly keeping subclass</span></div>
<div class="line"><span class="lineno">  306</span>    x = np.array(x, copy=<span class="keyword">False</span>, subok=subok)</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    window_shape_array = np.array(window_shape)</div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">if</span> np.any(window_shape_array &lt; 0):</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;`window_shape` cannot contain negative values&#39;</span>)</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">if</span> axis <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  313</span>        axis = tuple(range(x.ndim))</div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">if</span> len(window_shape) != len(axis):</div>
<div class="line"><span class="lineno">  315</span>            <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&#39;Since axis is `None`, must provide &#39;</span></div>
<div class="line"><span class="lineno">  316</span>                             f<span class="stringliteral">&#39;window_shape for all dimensions of `x`; &#39;</span></div>
<div class="line"><span class="lineno">  317</span>                             f<span class="stringliteral">&#39;got {len(window_shape)} window_shape elements &#39;</span></div>
<div class="line"><span class="lineno">  318</span>                             f<span class="stringliteral">&#39;and `x.ndim` is {x.ndim}.&#39;</span>)</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  320</span>        axis = normalize_axis_tuple(axis, x.ndim, allow_duplicate=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  321</span>        <span class="keywordflow">if</span> len(window_shape) != len(axis):</div>
<div class="line"><span class="lineno">  322</span>            <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&#39;Must provide matching length window_shape and &#39;</span></div>
<div class="line"><span class="lineno">  323</span>                             f<span class="stringliteral">&#39;axis; got {len(window_shape)} window_shape &#39;</span></div>
<div class="line"><span class="lineno">  324</span>                             f<span class="stringliteral">&#39;elements and {len(axis)} axes elements.&#39;</span>)</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>    out_strides = x.strides + tuple(x.strides[ax] <span class="keywordflow">for</span> ax <span class="keywordflow">in</span> axis)</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="comment"># note: same axis can be windowed repeatedly</span></div>
<div class="line"><span class="lineno">  329</span>    x_shape_trimmed = list(x.shape)</div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">for</span> ax, dim <span class="keywordflow">in</span> zip(axis, window_shape):</div>
<div class="line"><span class="lineno">  331</span>        <span class="keywordflow">if</span> x_shape_trimmed[ax] &lt; dim:</div>
<div class="line"><span class="lineno">  332</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  333</span>                <span class="stringliteral">&#39;window shape cannot be larger than input array shape&#39;</span>)</div>
<div class="line"><span class="lineno">  334</span>        x_shape_trimmed[ax] -= dim - 1</div>
<div class="line"><span class="lineno">  335</span>    out_shape = tuple(x_shape_trimmed) + window_shape</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">return</span> as_strided(x, strides=out_strides, shape=out_shape,</div>
<div class="line"><span class="lineno">  337</span>                      subok=subok, writeable=writeable)</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
