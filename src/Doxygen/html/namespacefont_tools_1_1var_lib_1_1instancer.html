<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: fontTools.varLib.instancer Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacefont_tools.html">fontTools</a></li><li class="navelem"><a class="el" href="namespacefont_tools_1_1var_lib.html">varLib</a></li><li class="navelem"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html">instancer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">fontTools.varLib.instancer Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacefont_tools_1_1var_lib_1_1instancer_1_1____main____" id="r_namespacefont_tools_1_1var_lib_1_1instancer_1_1____main____"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer_1_1____main____.html">__main__</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacefont_tools_1_1var_lib_1_1instancer_1_1names" id="r_namespacefont_tools_1_1var_lib_1_1instancer_1_1names"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer_1_1names.html">names</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacefont_tools_1_1var_lib_1_1instancer_1_1solver" id="r_namespacefont_tools_1_1var_lib_1_1instancer_1_1solver"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer_1_1solver.html">solver</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1___base_axis_limits.html">_BaseAxisLimits</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1___tuple_var_store_adapter.html">_TupleVarStoreAdapter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_axis_limits.html">AxisLimits</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_axis_triple.html">AxisTriple</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_normalized_axis_limits.html">NormalizedAxisLimits</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_normalized_axis_triple.html">NormalizedAxisTriple</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_overlap_mode.html">OverlapMode</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a15f65075d0ded60f1b7c1c56d1cc4d80" id="r_a15f65075d0ded60f1b7c1c56d1cc4d80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a15f65075d0ded60f1b7c1c56d1cc4d80">AxisRange</a> (minimum, maximum)</td></tr>
<tr class="separator:a15f65075d0ded60f1b7c1c56d1cc4d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e5207e9b80be29dcf5b69c50402357" id="r_a87e5207e9b80be29dcf5b69c50402357"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a87e5207e9b80be29dcf5b69c50402357">NormalizedAxisRange</a> (minimum, maximum)</td></tr>
<tr class="separator:a87e5207e9b80be29dcf5b69c50402357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4235b570a03a8c626db0fc015f2728" id="r_a7f4235b570a03a8c626db0fc015f2728"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a7f4235b570a03a8c626db0fc015f2728">instantiateTupleVariationStore</a> (variations, axisLimits, origCoords=None, endPts=None)</td></tr>
<tr class="separator:a7f4235b570a03a8c626db0fc015f2728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f8e45b7908f39ad02ed453b1343b77" id="r_a08f8e45b7908f39ad02ed453b1343b77"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a08f8e45b7908f39ad02ed453b1343b77">changeTupleVariationsAxisLimits</a> (variations, axisLimits)</td></tr>
<tr class="separator:a08f8e45b7908f39ad02ed453b1343b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade0f5eb4100d6de5cdec717cc477bd62" id="r_ade0f5eb4100d6de5cdec717cc477bd62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#ade0f5eb4100d6de5cdec717cc477bd62">changeTupleVariationAxisLimit</a> (var, axisTag, axisLimit)</td></tr>
<tr class="separator:ade0f5eb4100d6de5cdec717cc477bd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afadf66b43927852e165d16d6bef0439c" id="r_afadf66b43927852e165d16d6bef0439c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#afadf66b43927852e165d16d6bef0439c">_instantiateGvarGlyph</a> (glyphname, glyf, gvar, hMetrics, vMetrics, axisLimits, optimize=True)</td></tr>
<tr class="separator:afadf66b43927852e165d16d6bef0439c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e2fdc5b3d636608244ad1b41cf015c" id="r_a01e2fdc5b3d636608244ad1b41cf015c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a01e2fdc5b3d636608244ad1b41cf015c">instantiateGvarGlyph</a> (varfont, glyphname, axisLimits, optimize=True)</td></tr>
<tr class="separator:a01e2fdc5b3d636608244ad1b41cf015c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2769046e6dece1e15042e51bf1850653" id="r_a2769046e6dece1e15042e51bf1850653"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a2769046e6dece1e15042e51bf1850653">instantiateGvar</a> (varfont, axisLimits, optimize=True)</td></tr>
<tr class="separator:a2769046e6dece1e15042e51bf1850653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a186d65a18862e2f4b78fc3eda0ec2201" id="r_a186d65a18862e2f4b78fc3eda0ec2201"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a186d65a18862e2f4b78fc3eda0ec2201">setCvarDeltas</a> (cvt, deltas)</td></tr>
<tr class="separator:a186d65a18862e2f4b78fc3eda0ec2201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04b76daa8d4192a78d8791fa523bca2c" id="r_a04b76daa8d4192a78d8791fa523bca2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a04b76daa8d4192a78d8791fa523bca2c">instantiateCvar</a> (varfont, axisLimits)</td></tr>
<tr class="separator:a04b76daa8d4192a78d8791fa523bca2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af186a2dbaced327261346c1167c1a1ad" id="r_af186a2dbaced327261346c1167c1a1ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#af186a2dbaced327261346c1167c1a1ad">setMvarDeltas</a> (varfont, deltas)</td></tr>
<tr class="separator:af186a2dbaced327261346c1167c1a1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4cf9d9f2b17c95b5581740ccc919a2" id="r_adf4cf9d9f2b17c95b5581740ccc919a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#adf4cf9d9f2b17c95b5581740ccc919a2">instantiateMVAR</a> (varfont, axisLimits)</td></tr>
<tr class="separator:adf4cf9d9f2b17c95b5581740ccc919a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0c8c48578177d952f8c3eb7db39f4e" id="r_a4a0c8c48578177d952f8c3eb7db39f4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a4a0c8c48578177d952f8c3eb7db39f4e">_remapVarIdxMap</a> (table, attrName, varIndexMapping, glyphOrder)</td></tr>
<tr class="separator:a4a0c8c48578177d952f8c3eb7db39f4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f781aaef1fa7c17113880649e898d13" id="r_a2f781aaef1fa7c17113880649e898d13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a2f781aaef1fa7c17113880649e898d13">_instantiateVHVAR</a> (varfont, axisLimits, tableFields)</td></tr>
<tr class="separator:a2f781aaef1fa7c17113880649e898d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbeffd4f6aa3ad8e6d3e52625f0120c4" id="r_acbeffd4f6aa3ad8e6d3e52625f0120c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#acbeffd4f6aa3ad8e6d3e52625f0120c4">instantiateHVAR</a> (varfont, axisLimits)</td></tr>
<tr class="separator:acbeffd4f6aa3ad8e6d3e52625f0120c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae2eb5b3612d518a41686f574427178" id="r_a8ae2eb5b3612d518a41686f574427178"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a8ae2eb5b3612d518a41686f574427178">instantiateVVAR</a> (varfont, axisLimits)</td></tr>
<tr class="separator:a8ae2eb5b3612d518a41686f574427178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9273b3012be206432b9698fa44be685" id="r_ab9273b3012be206432b9698fa44be685"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#ab9273b3012be206432b9698fa44be685">instantiateItemVariationStore</a> (itemVarStore, fvarAxes, axisLimits)</td></tr>
<tr class="separator:ab9273b3012be206432b9698fa44be685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d8cdfdaee9bf3639fff98c7d3abf6e" id="r_ac4d8cdfdaee9bf3639fff98c7d3abf6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#ac4d8cdfdaee9bf3639fff98c7d3abf6e">instantiateOTL</a> (varfont, axisLimits)</td></tr>
<tr class="separator:ac4d8cdfdaee9bf3639fff98c7d3abf6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81c183b6f0ebc0aa6e9df390c71cde8" id="r_af81c183b6f0ebc0aa6e9df390c71cde8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#af81c183b6f0ebc0aa6e9df390c71cde8">instantiateFeatureVariations</a> (varfont, axisLimits)</td></tr>
<tr class="separator:af81c183b6f0ebc0aa6e9df390c71cde8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31206bbf5835d737889a357d5bb3b86d" id="r_a31206bbf5835d737889a357d5bb3b86d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a31206bbf5835d737889a357d5bb3b86d">_featureVariationRecordIsUnique</a> (rec, seen)</td></tr>
<tr class="separator:a31206bbf5835d737889a357d5bb3b86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eef5de5add8908b640ef0becbe0e719" id="r_a3eef5de5add8908b640ef0becbe0e719"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a3eef5de5add8908b640ef0becbe0e719">_limitFeatureVariationConditionRange</a> (condition, axisLimit)</td></tr>
<tr class="separator:a3eef5de5add8908b640ef0becbe0e719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698be9f661cbb81e2b8b8b47b8105744" id="r_a698be9f661cbb81e2b8b8b47b8105744"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a698be9f661cbb81e2b8b8b47b8105744">_instantiateFeatureVariationRecord</a> (record, recIdx, axisLimits, fvarAxes, axisIndexMap)</td></tr>
<tr class="separator:a698be9f661cbb81e2b8b8b47b8105744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43de7ae43b65a3c1c9dec67efeda4d3b" id="r_a43de7ae43b65a3c1c9dec67efeda4d3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a43de7ae43b65a3c1c9dec67efeda4d3b">_limitFeatureVariationRecord</a> (record, axisLimits, axisOrder)</td></tr>
<tr class="separator:a43de7ae43b65a3c1c9dec67efeda4d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a172d3d9d4e3d6ecb9ac515e4e07b98ba" id="r_a172d3d9d4e3d6ecb9ac515e4e07b98ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a172d3d9d4e3d6ecb9ac515e4e07b98ba">_instantiateFeatureVariations</a> (table, fvarAxes, axisLimits)</td></tr>
<tr class="separator:a172d3d9d4e3d6ecb9ac515e4e07b98ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19eb5c7bb4d8120ac1229d7d5b6cdd75" id="r_a19eb5c7bb4d8120ac1229d7d5b6cdd75"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a19eb5c7bb4d8120ac1229d7d5b6cdd75">_isValidAvarSegmentMap</a> (axisTag, segmentMap)</td></tr>
<tr class="separator:a19eb5c7bb4d8120ac1229d7d5b6cdd75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a8afd336af52da17d85b23c9a0771f5" id="r_a6a8afd336af52da17d85b23c9a0771f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a6a8afd336af52da17d85b23c9a0771f5">instantiateAvar</a> (varfont, axisLimits)</td></tr>
<tr class="separator:a6a8afd336af52da17d85b23c9a0771f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94dbad7c00e0f2481d576588da14f72e" id="r_a94dbad7c00e0f2481d576588da14f72e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a94dbad7c00e0f2481d576588da14f72e">isInstanceWithinAxisRanges</a> (location, axisRanges)</td></tr>
<tr class="separator:a94dbad7c00e0f2481d576588da14f72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7749e2b2b0f4781c6a9e39123e58b6d7" id="r_a7749e2b2b0f4781c6a9e39123e58b6d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a7749e2b2b0f4781c6a9e39123e58b6d7">instantiateFvar</a> (varfont, axisLimits)</td></tr>
<tr class="separator:a7749e2b2b0f4781c6a9e39123e58b6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13962ac0df6d21a48b0f67ff66bab014" id="r_a13962ac0df6d21a48b0f67ff66bab014"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a13962ac0df6d21a48b0f67ff66bab014">instantiateSTAT</a> (varfont, axisLimits)</td></tr>
<tr class="separator:a13962ac0df6d21a48b0f67ff66bab014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37f6012301d09d79c8edd5159deb88b" id="r_af37f6012301d09d79c8edd5159deb88b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#af37f6012301d09d79c8edd5159deb88b">axisValuesFromAxisLimits</a> (stat, axisLimits)</td></tr>
<tr class="separator:af37f6012301d09d79c8edd5159deb88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e956e37d6348d6406a9fd3f8258ba38" id="r_a5e956e37d6348d6406a9fd3f8258ba38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a5e956e37d6348d6406a9fd3f8258ba38">setMacOverlapFlags</a> (glyfTable)</td></tr>
<tr class="separator:a5e956e37d6348d6406a9fd3f8258ba38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8c4f6c67775641ab1529fd4c431a4c0" id="r_ab8c4f6c67775641ab1529fd4c431a4c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#ab8c4f6c67775641ab1529fd4c431a4c0">normalize</a> (value, triple, avarMapping)</td></tr>
<tr class="separator:ab8c4f6c67775641ab1529fd4c431a4c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa09e04f6cd4dc73b7e7cd14e786bbf" id="r_a3aa09e04f6cd4dc73b7e7cd14e786bbf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a3aa09e04f6cd4dc73b7e7cd14e786bbf">sanityCheckVariableTables</a> (varfont)</td></tr>
<tr class="separator:a3aa09e04f6cd4dc73b7e7cd14e786bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d5fa7561982d12fec6535b5eae3af83" id="r_a4d5fa7561982d12fec6535b5eae3af83"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a4d5fa7561982d12fec6535b5eae3af83">instantiateVariableFont</a> (varfont, axisLimits, inplace=False, optimize=True, overlap=<a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_overlap_mode.html#af08fe63399ad0bfa1b27bd0097d3bc04">OverlapMode.KEEP_AND_SET_FLAGS</a>, updateFontNames=False)</td></tr>
<tr class="separator:a4d5fa7561982d12fec6535b5eae3af83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24db695b7da29e7631f4d5bc5349dd5" id="r_ab24db695b7da29e7631f4d5bc5349dd5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#ab24db695b7da29e7631f4d5bc5349dd5">setRibbiBits</a> (font)</td></tr>
<tr class="separator:ab24db695b7da29e7631f4d5bc5349dd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4f6302b04d44f8e5ddce5fac702803" id="r_aae4f6302b04d44f8e5ddce5fac702803"><td class="memItemLeft" align="right" valign="top">Dict[str, Optional[<a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_axis_triple.html">AxisTriple</a>]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#aae4f6302b04d44f8e5ddce5fac702803">parseLimits</a> (Iterable[str] limits)</td></tr>
<tr class="separator:aae4f6302b04d44f8e5ddce5fac702803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af05e404cba12147603e6f1ab0d0fadc2" id="r_af05e404cba12147603e6f1ab0d0fadc2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#af05e404cba12147603e6f1ab0d0fadc2">parseArgs</a> (args)</td></tr>
<tr class="separator:af05e404cba12147603e6f1ab0d0fadc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1419ce576cb10d8f48584526b5a20ead" id="r_a1419ce576cb10d8f48584526b5a20ead"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#a1419ce576cb10d8f48584526b5a20ead">main</a> (args=None)</td></tr>
<tr class="separator:a1419ce576cb10d8f48584526b5a20ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aead81fe7e1dc6934593006eedff30198" id="r_aead81fe7e1dc6934593006eedff30198"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1var_lib_1_1instancer.html#aead81fe7e1dc6934593006eedff30198">log</a> = logging.getLogger(&quot;fontTools.varLib.instancer&quot;)</td></tr>
<tr class="separator:aead81fe7e1dc6934593006eedff30198"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment"> Partially instantiate a variable font.

The module exports an `instantiateVariableFont` function and CLI that allow to
create full instances (i.e. static fonts) from variable fonts, as well as "partial"
variable fonts that only contain a subset of the original variation space.

For example, if you wish to pin the width axis to a given location while also
restricting the weight axis to 400..700 range, you can do::

    $ fonttools varLib.instancer ./NotoSans-VF.ttf wdth=85 wght=400:700

See `fonttools varLib.instancer --help` for more info on the CLI options.

The module's entry point is the `instantiateVariableFont` function, which takes
a TTFont object and a dict specifying either axis coodinates or (min, max) ranges,
and returns a new TTFont representing either a partial VF, or full instance if all
the VF axes were given an explicit coordinate.

E.g. here's how to pin the wght axis at a given location in a wght+wdth variable
font, keeping only the deltas associated with the wdth axis::

| &gt;&gt;&gt; from fontTools import ttLib
| &gt;&gt;&gt; from fontTools.varLib import instancer
| &gt;&gt;&gt; varfont = ttLib.TTFont("path/to/MyVariableFont.ttf")
| &gt;&gt;&gt; [a.axisTag for a in varfont["fvar"].axes]  # the varfont's current axes
| ['wght', 'wdth']
| &gt;&gt;&gt; partial = instancer.instantiateVariableFont(varfont, {"wght": 300})
| &gt;&gt;&gt; [a.axisTag for a in partial["fvar"].axes]  # axes left after pinning 'wght'
| ['wdth']

If the input location specifies all the axes, the resulting instance is no longer
'variable' (same as using fontools varLib.mutator):

| &gt;&gt;&gt; instance = instancer.instantiateVariableFont(
| ...     varfont, {"wght": 700, "wdth": 67.5}
| ... )
| &gt;&gt;&gt; "fvar" not in instance
| True

If one just want to drop an axis at the default location, without knowing in
advance what the default value for that axis is, one can pass a `None` value:

| &gt;&gt;&gt; instance = instancer.instantiateVariableFont(varfont, {"wght": None})
| &gt;&gt;&gt; len(varfont["fvar"].axes)
| 1

From the console script, this is equivalent to passing `wght=drop` as input.

This module is similar to fontTools.varLib.mutator, which it's intended to supersede.
Note that, unlike varLib.mutator, when an axis is not mentioned in the input
location, the varLib.instancer will keep the axis and the corresponding deltas,
whereas mutator implicitly drops the axis at its default coordinate.

The module supports all the following "levels" of instancing, which can of
course be combined:

L1
    dropping one or more axes while leaving the default tables unmodified;

    | &gt;&gt;&gt; font = instancer.instantiateVariableFont(varfont, {"wght": None})

L2
    dropping one or more axes while pinning them at non-default locations;

    | &gt;&gt;&gt; font = instancer.instantiateVariableFont(varfont, {"wght": 700})

L3
    restricting the range of variation of one or more axes, by setting either
    a new minimum or maximum, potentially -- though not necessarily -- dropping
    entire regions of variations that fall completely outside this new range.

    | &gt;&gt;&gt; font = instancer.instantiateVariableFont(varfont, {"wght": (100, 300)})

L4
    moving the default location of an axis, by specifying (min,defalt,max) values:

    | &gt;&gt;&gt; font = instancer.instantiateVariableFont(varfont, {"wght": (100, 300, 700)})

Currently only TrueType-flavored variable fonts (i.e. containing 'glyf' table)
are supported, but support for CFF2 variable fonts will be added soon.

The discussion and implementation of these features are tracked at
https://github.com/fonttools/fonttools/issues/1537
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a31206bbf5835d737889a357d5bb3b86d" name="a31206bbf5835d737889a357d5bb3b86d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31206bbf5835d737889a357d5bb3b86d">&#9670;&#160;</a></span>_featureVariationRecordIsUnique()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._featureVariationRecordIsUnique </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>seen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  851</span><span class="keyword">def </span>_featureVariationRecordIsUnique(rec, seen):</div>
<div class="line"><span class="lineno">  852</span>    conditionSet = []</div>
<div class="line"><span class="lineno">  853</span>    <span class="keywordflow">for</span> cond <span class="keywordflow">in</span> rec.ConditionSet.ConditionTable:</div>
<div class="line"><span class="lineno">  854</span>        <span class="keywordflow">if</span> cond.Format != 1:</div>
<div class="line"><span class="lineno">  855</span>            <span class="comment"># can&#39;t tell whether this is duplicate, assume is unique</span></div>
<div class="line"><span class="lineno">  856</span>            <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  857</span>        conditionSet.append(</div>
<div class="line"><span class="lineno">  858</span>            (cond.AxisIndex, cond.FilterRangeMinValue, cond.FilterRangeMaxValue)</div>
<div class="line"><span class="lineno">  859</span>        )</div>
<div class="line"><span class="lineno">  860</span>    <span class="comment"># besides the set of conditions, we also include the FeatureTableSubstitution</span></div>
<div class="line"><span class="lineno">  861</span>    <span class="comment"># version to identify unique FeatureVariationRecords, even though only one</span></div>
<div class="line"><span class="lineno">  862</span>    <span class="comment"># version is currently defined. It&#39;s theoretically possible that multiple</span></div>
<div class="line"><span class="lineno">  863</span>    <span class="comment"># records with same conditions but different substitution table version be</span></div>
<div class="line"><span class="lineno">  864</span>    <span class="comment"># present in the same font for backward compatibility.</span></div>
<div class="line"><span class="lineno">  865</span>    recordKey = frozenset([rec.FeatureTableSubstitution.Version] + conditionSet)</div>
<div class="line"><span class="lineno">  866</span>    <span class="keywordflow">if</span> recordKey <span class="keywordflow">in</span> seen:</div>
<div class="line"><span class="lineno">  867</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  868</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  869</span>        seen.add(recordKey)  <span class="comment"># side effect</span></div>
<div class="line"><span class="lineno">  870</span>        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a698be9f661cbb81e2b8b8b47b8105744" name="a698be9f661cbb81e2b8b8b47b8105744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698be9f661cbb81e2b8b8b47b8105744">&#9670;&#160;</a></span>_instantiateFeatureVariationRecord()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._instantiateFeatureVariationRecord </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>recIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fvarAxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisIndexMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  890</span>):</div>
<div class="line"><span class="lineno">  891</span>    applies = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  892</span>    newConditions = []</div>
<div class="line"><span class="lineno">  893</span>    default_triple = NormalizedAxisTriple(-1, 0, +1)</div>
<div class="line"><span class="lineno">  894</span>    <span class="keywordflow">for</span> i, condition <span class="keywordflow">in</span> enumerate(record.ConditionSet.ConditionTable):</div>
<div class="line"><span class="lineno">  895</span>        <span class="keywordflow">if</span> condition.Format == 1:</div>
<div class="line"><span class="lineno">  896</span>            axisIdx = condition.AxisIndex</div>
<div class="line"><span class="lineno">  897</span>            axisTag = fvarAxes[axisIdx].axisTag</div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>            minValue = condition.FilterRangeMinValue</div>
<div class="line"><span class="lineno">  900</span>            maxValue = condition.FilterRangeMaxValue</div>
<div class="line"><span class="lineno">  901</span>            triple = axisLimits.get(axisTag, default_triple)</div>
<div class="line"><span class="lineno">  902</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> (minValue &lt;= triple.default &lt;= maxValue):</div>
<div class="line"><span class="lineno">  903</span>                applies = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  904</span>                <span class="comment"># condition not met so remove entire record</span></div>
<div class="line"><span class="lineno">  905</span>                <span class="keywordflow">if</span> triple.minimum &gt; maxValue <span class="keywordflow">or</span> triple.maximum &lt; minValue:</div>
<div class="line"><span class="lineno">  906</span>                    newConditions = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  907</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span>            <span class="keywordflow">if</span> axisTag <span class="keywordflow">in</span> axisIndexMap:</div>
<div class="line"><span class="lineno">  910</span>                <span class="comment"># remap axis index</span></div>
<div class="line"><span class="lineno">  911</span>                condition.AxisIndex = axisIndexMap[axisTag]</div>
<div class="line"><span class="lineno">  912</span>                newConditions.append(condition)</div>
<div class="line"><span class="lineno">  913</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  914</span>            log.warning(</div>
<div class="line"><span class="lineno">  915</span>                <span class="stringliteral">&quot;Condition table {0} of FeatureVariationRecord {1} has &quot;</span></div>
<div class="line"><span class="lineno">  916</span>                <span class="stringliteral">&quot;unsupported format ({2}); ignored&quot;</span>.format(i, recIdx, condition.Format)</div>
<div class="line"><span class="lineno">  917</span>            )</div>
<div class="line"><span class="lineno">  918</span>            applies = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  919</span>            newConditions.append(condition)</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>    <span class="keywordflow">if</span> newConditions:</div>
<div class="line"><span class="lineno">  922</span>        record.ConditionSet.ConditionTable = newConditions</div>
<div class="line"><span class="lineno">  923</span>        shouldKeep = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  924</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  925</span>        shouldKeep = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  926</span> </div>
<div class="line"><span class="lineno">  927</span>    <span class="keywordflow">return</span> applies, shouldKeep</div>
<div class="line"><span class="lineno">  928</span> </div>
<div class="line"><span class="lineno">  929</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a172d3d9d4e3d6ecb9ac515e4e07b98ba" name="a172d3d9d4e3d6ecb9ac515e4e07b98ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a172d3d9d4e3d6ecb9ac515e4e07b98ba">&#9670;&#160;</a></span>_instantiateFeatureVariations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._instantiateFeatureVariations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fvarAxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  959</span><span class="keyword">def </span>_instantiateFeatureVariations(table, fvarAxes, axisLimits):</div>
<div class="line"><span class="lineno">  960</span>    pinnedAxes = set(axisLimits.pinnedLocation())</div>
<div class="line"><span class="lineno">  961</span>    axisOrder = [axis.axisTag <span class="keywordflow">for</span> axis <span class="keywordflow">in</span> fvarAxes <span class="keywordflow">if</span> axis.axisTag <span class="keywordflow">not</span> <span class="keywordflow">in</span> pinnedAxes]</div>
<div class="line"><span class="lineno">  962</span>    axisIndexMap = {axisTag: axisOrder.index(axisTag) <span class="keywordflow">for</span> axisTag <span class="keywordflow">in</span> axisOrder}</div>
<div class="line"><span class="lineno">  963</span> </div>
<div class="line"><span class="lineno">  964</span>    featureVariationApplied = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  965</span>    uniqueRecords = set()</div>
<div class="line"><span class="lineno">  966</span>    newRecords = []</div>
<div class="line"><span class="lineno">  967</span> </div>
<div class="line"><span class="lineno">  968</span>    <span class="keywordflow">for</span> i, record <span class="keywordflow">in</span> enumerate(table.FeatureVariations.FeatureVariationRecord):</div>
<div class="line"><span class="lineno">  969</span>        applies, shouldKeep = _instantiateFeatureVariationRecord(</div>
<div class="line"><span class="lineno">  970</span>            record, i, axisLimits, fvarAxes, axisIndexMap</div>
<div class="line"><span class="lineno">  971</span>        )</div>
<div class="line"><span class="lineno">  972</span>        <span class="keywordflow">if</span> shouldKeep:</div>
<div class="line"><span class="lineno">  973</span>            shouldKeep = _limitFeatureVariationRecord(record, axisLimits, axisOrder)</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>        <span class="keywordflow">if</span> shouldKeep <span class="keywordflow">and</span> _featureVariationRecordIsUnique(record, uniqueRecords):</div>
<div class="line"><span class="lineno">  976</span>            newRecords.append(record)</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span>        <span class="keywordflow">if</span> applies <span class="keywordflow">and</span> <span class="keywordflow">not</span> featureVariationApplied:</div>
<div class="line"><span class="lineno">  979</span>            <span class="keyword">assert</span> record.FeatureTableSubstitution.Version == 0x00010000</div>
<div class="line"><span class="lineno">  980</span>            <span class="keywordflow">for</span> rec <span class="keywordflow">in</span> record.FeatureTableSubstitution.SubstitutionRecord:</div>
<div class="line"><span class="lineno">  981</span>                table.FeatureList.FeatureRecord[rec.FeatureIndex].Feature = deepcopy(</div>
<div class="line"><span class="lineno">  982</span>                    rec.Feature</div>
<div class="line"><span class="lineno">  983</span>                )</div>
<div class="line"><span class="lineno">  984</span>            <span class="comment"># Set variations only once</span></div>
<div class="line"><span class="lineno">  985</span>            featureVariationApplied = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span>    <span class="keywordflow">if</span> newRecords:</div>
<div class="line"><span class="lineno">  988</span>        table.FeatureVariations.FeatureVariationRecord = newRecords</div>
<div class="line"><span class="lineno">  989</span>        table.FeatureVariations.FeatureVariationCount = len(newRecords)</div>
<div class="line"><span class="lineno">  990</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  991</span>        del table.FeatureVariations</div>
<div class="line"><span class="lineno">  992</span>        <span class="comment"># downgrade table version if there are no FeatureVariations left</span></div>
<div class="line"><span class="lineno">  993</span>        table.Version = 0x00010000</div>
<div class="line"><span class="lineno">  994</span> </div>
<div class="line"><span class="lineno">  995</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afadf66b43927852e165d16d6bef0439c" name="afadf66b43927852e165d16d6bef0439c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afadf66b43927852e165d16d6bef0439c">&#9670;&#160;</a></span>_instantiateGvarGlyph()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._instantiateGvarGlyph </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>glyphname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>glyf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gvar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hMetrics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vMetrics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optimize</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  469</span>):</div>
<div class="line"><span class="lineno">  470</span>    coordinates, ctrl = glyf._getCoordinatesAndControls(glyphname, hMetrics, vMetrics)</div>
<div class="line"><span class="lineno">  471</span>    endPts = ctrl.endPts</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>    <span class="comment"># Not every glyph may have variations</span></div>
<div class="line"><span class="lineno">  474</span>    tupleVarStore = gvar.variations.get(glyphname)</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>    <span class="keywordflow">if</span> tupleVarStore:</div>
<div class="line"><span class="lineno">  477</span>        defaultDeltas = instantiateTupleVariationStore(</div>
<div class="line"><span class="lineno">  478</span>            tupleVarStore, axisLimits, coordinates, endPts</div>
<div class="line"><span class="lineno">  479</span>        )</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>        <span class="keywordflow">if</span> defaultDeltas:</div>
<div class="line"><span class="lineno">  482</span>            coordinates += _g_l_y_f.GlyphCoordinates(defaultDeltas)</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span>    <span class="comment"># _setCoordinates also sets the hmtx/vmtx advance widths and sidebearings from</span></div>
<div class="line"><span class="lineno">  485</span>    <span class="comment"># the four phantom points and glyph bounding boxes.</span></div>
<div class="line"><span class="lineno">  486</span>    <span class="comment"># We call it unconditionally even if a glyph has no variations or no deltas are</span></div>
<div class="line"><span class="lineno">  487</span>    <span class="comment"># applied at this location, in case the glyph&#39;s xMin and in turn its sidebearing</span></div>
<div class="line"><span class="lineno">  488</span>    <span class="comment"># have changed. E.g. a composite glyph has no deltas for the component&#39;s (x, y)</span></div>
<div class="line"><span class="lineno">  489</span>    <span class="comment"># offset nor for the 4 phantom points (e.g. it&#39;s monospaced). Thus its entry in</span></div>
<div class="line"><span class="lineno">  490</span>    <span class="comment"># gvar table is empty; however, the composite&#39;s base glyph may have deltas</span></div>
<div class="line"><span class="lineno">  491</span>    <span class="comment"># applied, hence the composite&#39;s bbox and left/top sidebearings may need updating</span></div>
<div class="line"><span class="lineno">  492</span>    <span class="comment"># in the instanced font.</span></div>
<div class="line"><span class="lineno">  493</span>    glyf._setCoordinates(glyphname, coordinates, hMetrics, vMetrics)</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> tupleVarStore:</div>
<div class="line"><span class="lineno">  496</span>        <span class="keywordflow">if</span> glyphname <span class="keywordflow">in</span> gvar.variations:</div>
<div class="line"><span class="lineno">  497</span>            del gvar.variations[glyphname]</div>
<div class="line"><span class="lineno">  498</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>    <span class="keywordflow">if</span> optimize:</div>
<div class="line"><span class="lineno">  501</span>        isComposite = glyf[glyphname].isComposite()</div>
<div class="line"><span class="lineno">  502</span>        <span class="keywordflow">for</span> var <span class="keywordflow">in</span> tupleVarStore:</div>
<div class="line"><span class="lineno">  503</span>            var.optimize(coordinates, endPts, isComposite)</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f781aaef1fa7c17113880649e898d13" name="a2f781aaef1fa7c17113880649e898d13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f781aaef1fa7c17113880649e898d13">&#9670;&#160;</a></span>_instantiateVHVAR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._instantiateVHVAR </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tableFields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  608</span><span class="keyword">def </span>_instantiateVHVAR(varfont, axisLimits, tableFields):</div>
<div class="line"><span class="lineno">  609</span>    location = axisLimits.pinnedLocation()</div>
<div class="line"><span class="lineno">  610</span>    tableTag = tableFields.tableTag</div>
<div class="line"><span class="lineno">  611</span>    fvarAxes = varfont[<span class="stringliteral">&quot;fvar&quot;</span>].axes</div>
<div class="line"><span class="lineno">  612</span>    <span class="comment"># Deltas from gvar table have already been applied to the hmtx/vmtx. For full</span></div>
<div class="line"><span class="lineno">  613</span>    <span class="comment"># instances (i.e. all axes pinned), we can simply drop HVAR/VVAR and return</span></div>
<div class="line"><span class="lineno">  614</span>    <span class="keywordflow">if</span> set(location).issuperset(axis.axisTag <span class="keywordflow">for</span> axis <span class="keywordflow">in</span> fvarAxes):</div>
<div class="line"><span class="lineno">  615</span>        log.info(<span class="stringliteral">&quot;Dropping %s table&quot;</span>, tableTag)</div>
<div class="line"><span class="lineno">  616</span>        del varfont[tableTag]</div>
<div class="line"><span class="lineno">  617</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>    log.info(<span class="stringliteral">&quot;Instantiating %s table&quot;</span>, tableTag)</div>
<div class="line"><span class="lineno">  620</span>    vhvar = varfont[tableTag].table</div>
<div class="line"><span class="lineno">  621</span>    varStore = vhvar.VarStore</div>
<div class="line"><span class="lineno">  622</span>    <span class="comment"># since deltas were already applied, the return value here is ignored</span></div>
<div class="line"><span class="lineno">  623</span>    instantiateItemVariationStore(varStore, fvarAxes, axisLimits)</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>    <span class="keywordflow">if</span> varStore.VarRegionList.Region:</div>
<div class="line"><span class="lineno">  626</span>        <span class="comment"># Only re-optimize VarStore if the HVAR/VVAR already uses indirect AdvWidthMap</span></div>
<div class="line"><span class="lineno">  627</span>        <span class="comment"># or AdvHeightMap. If a direct, implicit glyphID-&gt;VariationIndex mapping is</span></div>
<div class="line"><span class="lineno">  628</span>        <span class="comment"># used for advances, skip re-optimizing and maintain original VariationIndex.</span></div>
<div class="line"><span class="lineno">  629</span>        <span class="keywordflow">if</span> getattr(vhvar, tableFields.advMapping):</div>
<div class="line"><span class="lineno">  630</span>            varIndexMapping = varStore.optimize(use_NO_VARIATION_INDEX=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  631</span>            glyphOrder = varfont.getGlyphOrder()</div>
<div class="line"><span class="lineno">  632</span>            _remapVarIdxMap(vhvar, tableFields.advMapping, varIndexMapping, glyphOrder)</div>
<div class="line"><span class="lineno">  633</span>            <span class="keywordflow">if</span> getattr(vhvar, tableFields.sb1):  <span class="comment"># left or top sidebearings</span></div>
<div class="line"><span class="lineno">  634</span>                _remapVarIdxMap(vhvar, tableFields.sb1, varIndexMapping, glyphOrder)</div>
<div class="line"><span class="lineno">  635</span>            <span class="keywordflow">if</span> getattr(vhvar, tableFields.sb2):  <span class="comment"># right or bottom sidebearings</span></div>
<div class="line"><span class="lineno">  636</span>                _remapVarIdxMap(vhvar, tableFields.sb2, varIndexMapping, glyphOrder)</div>
<div class="line"><span class="lineno">  637</span>            <span class="keywordflow">if</span> tableTag == <span class="stringliteral">&quot;VVAR&quot;</span> <span class="keywordflow">and</span> getattr(vhvar, tableFields.vOrigMapping):</div>
<div class="line"><span class="lineno">  638</span>                _remapVarIdxMap(</div>
<div class="line"><span class="lineno">  639</span>                    vhvar, tableFields.vOrigMapping, varIndexMapping, glyphOrder</div>
<div class="line"><span class="lineno">  640</span>                )</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a19eb5c7bb4d8120ac1229d7d5b6cdd75" name="a19eb5c7bb4d8120ac1229d7d5b6cdd75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19eb5c7bb4d8120ac1229d7d5b6cdd75">&#9670;&#160;</a></span>_isValidAvarSegmentMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._isValidAvarSegmentMap </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisTag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>segmentMap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  996</span><span class="keyword">def </span>_isValidAvarSegmentMap(axisTag, segmentMap):</div>
<div class="line"><span class="lineno">  997</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> segmentMap:</div>
<div class="line"><span class="lineno">  998</span>        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  999</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> {(-1.0, -1.0), (0, 0), (1.0, 1.0)}.issubset(segmentMap.items()):</div>
<div class="line"><span class="lineno"> 1000</span>        log.warning(</div>
<div class="line"><span class="lineno"> 1001</span>            f<span class="stringliteral">&quot;Invalid avar SegmentMap record for axis &#39;{axisTag}&#39;: does not &quot;</span></div>
<div class="line"><span class="lineno"> 1002</span>            <span class="stringliteral">&quot;include all required value maps {-1.0: -1.0, 0: 0, 1.0: 1.0}&quot;</span></div>
<div class="line"><span class="lineno"> 1003</span>        )</div>
<div class="line"><span class="lineno"> 1004</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1005</span>    previousValue = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1006</span>    <span class="keywordflow">for</span> fromCoord, toCoord <span class="keywordflow">in</span> sorted(segmentMap.items()):</div>
<div class="line"><span class="lineno"> 1007</span>        <span class="keywordflow">if</span> previousValue <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> previousValue &gt; toCoord:</div>
<div class="line"><span class="lineno"> 1008</span>            log.warning(</div>
<div class="line"><span class="lineno"> 1009</span>                f<span class="stringliteral">&quot;Invalid avar AxisValueMap({fromCoord}, {toCoord}) record &quot;</span></div>
<div class="line"><span class="lineno"> 1010</span>                f<span class="stringliteral">&quot;for axis &#39;{axisTag}&#39;: the toCoordinate value must be &gt;= to &quot;</span></div>
<div class="line"><span class="lineno"> 1011</span>                f<span class="stringliteral">&quot;the toCoordinate value of the preceding record ({previousValue}).&quot;</span></div>
<div class="line"><span class="lineno"> 1012</span>            )</div>
<div class="line"><span class="lineno"> 1013</span>            <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1014</span>        previousValue = toCoord</div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3eef5de5add8908b640ef0becbe0e719" name="a3eef5de5add8908b640ef0becbe0e719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eef5de5add8908b640ef0becbe0e719">&#9670;&#160;</a></span>_limitFeatureVariationConditionRange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._limitFeatureVariationConditionRange </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  873</span><span class="keyword">def </span>_limitFeatureVariationConditionRange(condition, axisLimit):</div>
<div class="line"><span class="lineno">  874</span>    minValue = condition.FilterRangeMinValue</div>
<div class="line"><span class="lineno">  875</span>    maxValue = condition.FilterRangeMaxValue</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  878</span>        minValue &gt; maxValue</div>
<div class="line"><span class="lineno">  879</span>        <span class="keywordflow">or</span> minValue &gt; axisLimit.maximum</div>
<div class="line"><span class="lineno">  880</span>        <span class="keywordflow">or</span> maxValue &lt; axisLimit.minimum</div>
<div class="line"><span class="lineno">  881</span>    ):</div>
<div class="line"><span class="lineno">  882</span>        <span class="comment"># condition invalid or out of range</span></div>
<div class="line"><span class="lineno">  883</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  884</span> </div>
<div class="line"><span class="lineno">  885</span>    <span class="keywordflow">return</span> tuple(normalizeValue(v, axisLimit) <span class="keywordflow">for</span> v <span class="keywordflow">in</span> (minValue, maxValue))</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a43de7ae43b65a3c1c9dec67efeda4d3b" name="a43de7ae43b65a3c1c9dec67efeda4d3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43de7ae43b65a3c1c9dec67efeda4d3b">&#9670;&#160;</a></span>_limitFeatureVariationRecord()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._limitFeatureVariationRecord </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisOrder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  930</span><span class="keyword">def </span>_limitFeatureVariationRecord(record, axisLimits, axisOrder):</div>
<div class="line"><span class="lineno">  931</span>    newConditions = []</div>
<div class="line"><span class="lineno">  932</span>    <span class="keywordflow">for</span> condition <span class="keywordflow">in</span> record.ConditionSet.ConditionTable:</div>
<div class="line"><span class="lineno">  933</span>        <span class="keywordflow">if</span> condition.Format == 1:</div>
<div class="line"><span class="lineno">  934</span>            axisIdx = condition.AxisIndex</div>
<div class="line"><span class="lineno">  935</span>            axisTag = axisOrder[axisIdx]</div>
<div class="line"><span class="lineno">  936</span>            <span class="keywordflow">if</span> axisTag <span class="keywordflow">in</span> axisLimits:</div>
<div class="line"><span class="lineno">  937</span>                axisLimit = axisLimits[axisTag]</div>
<div class="line"><span class="lineno">  938</span>                newRange = _limitFeatureVariationConditionRange(condition, axisLimit)</div>
<div class="line"><span class="lineno">  939</span>                <span class="keywordflow">if</span> newRange:</div>
<div class="line"><span class="lineno">  940</span>                    <span class="comment"># keep condition with updated limits</span></div>
<div class="line"><span class="lineno">  941</span>                    minimum, maximum = newRange</div>
<div class="line"><span class="lineno">  942</span>                    condition.FilterRangeMinValue = minimum</div>
<div class="line"><span class="lineno">  943</span>                    condition.FilterRangeMaxValue = maximum</div>
<div class="line"><span class="lineno">  944</span>                    <span class="keywordflow">if</span> minimum != -1 <span class="keywordflow">or</span> maximum != +1:</div>
<div class="line"><span class="lineno">  945</span>                        newConditions.append(condition)</div>
<div class="line"><span class="lineno">  946</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  947</span>                    <span class="comment"># condition out of range, remove entire record</span></div>
<div class="line"><span class="lineno">  948</span>                    newConditions = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  949</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  950</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  951</span>                newConditions.append(condition)</div>
<div class="line"><span class="lineno">  952</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  953</span>            newConditions.append(condition)</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>    record.ConditionSet.ConditionTable = newConditions</div>
<div class="line"><span class="lineno">  956</span>    <span class="keywordflow">return</span> newConditions <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a0c8c48578177d952f8c3eb7db39f4e" name="a4a0c8c48578177d952f8c3eb7db39f4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0c8c48578177d952f8c3eb7db39f4e">&#9670;&#160;</a></span>_remapVarIdxMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer._remapVarIdxMap </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>attrName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varIndexMapping</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>glyphOrder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  601</span><span class="keyword">def </span>_remapVarIdxMap(table, attrName, varIndexMapping, glyphOrder):</div>
<div class="line"><span class="lineno">  602</span>    oldMapping = getattr(table, attrName).mapping</div>
<div class="line"><span class="lineno">  603</span>    newMapping = [varIndexMapping[oldMapping[glyphName]] <span class="keywordflow">for</span> glyphName <span class="keywordflow">in</span> glyphOrder]</div>
<div class="line"><span class="lineno">  604</span>    setattr(table, attrName, builder.buildVarIdxMap(newMapping, glyphOrder))</div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span> </div>
<div class="line"><span class="lineno">  607</span><span class="comment"># TODO(anthrotype) Add support for HVAR/VVAR in CFF2</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15f65075d0ded60f1b7c1c56d1cc4d80" name="a15f65075d0ded60f1b7c1c56d1cc4d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15f65075d0ded60f1b7c1c56d1cc4d80">&#9670;&#160;</a></span>AxisRange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.AxisRange </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>minimum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>maximum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  119</span><span class="keyword">def </span>AxisRange(minimum, maximum):</div>
<div class="line"><span class="lineno">  120</span>    warnings.warn(</div>
<div class="line"><span class="lineno">  121</span>        <span class="stringliteral">&quot;AxisRange is deprecated; use AxisTriple instead&quot;</span>,</div>
<div class="line"><span class="lineno">  122</span>        DeprecationWarning,</div>
<div class="line"><span class="lineno">  123</span>        stacklevel=2,</div>
<div class="line"><span class="lineno">  124</span>    )</div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span> AxisTriple(minimum, <span class="keywordtype">None</span>, maximum)</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af37f6012301d09d79c8edd5159deb88b" name="af37f6012301d09d79c8edd5159deb88b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37f6012301d09d79c8edd5159deb88b">&#9670;&#160;</a></span>axisValuesFromAxisLimits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.axisValuesFromAxisLimits </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1147</span><span class="keyword">def </span>axisValuesFromAxisLimits(stat, axisLimits):</div>
<div class="line"><span class="lineno"> 1148</span>    <span class="keyword">def </span>isAxisValueOutsideLimits(axisTag, axisValue):</div>
<div class="line"><span class="lineno"> 1149</span>        <span class="keywordflow">if</span> axisTag <span class="keywordflow">in</span> axisLimits:</div>
<div class="line"><span class="lineno"> 1150</span>            triple = axisLimits[axisTag]</div>
<div class="line"><span class="lineno"> 1151</span>            <span class="keywordflow">if</span> axisValue &lt; triple.minimum <span class="keywordflow">or</span> axisValue &gt; triple.maximum:</div>
<div class="line"><span class="lineno"> 1152</span>                <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1153</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1154</span> </div>
<div class="line"><span class="lineno"> 1155</span>    <span class="comment"># only keep AxisValues whose axis is not pinned nor restricted, or is pinned at the</span></div>
<div class="line"><span class="lineno"> 1156</span>    <span class="comment"># exact (nominal) value, or is restricted but the value is within the new range</span></div>
<div class="line"><span class="lineno"> 1157</span>    designAxes = stat.DesignAxisRecord.Axis</div>
<div class="line"><span class="lineno"> 1158</span>    newAxisValueTables = []</div>
<div class="line"><span class="lineno"> 1159</span>    <span class="keywordflow">for</span> axisValueTable <span class="keywordflow">in</span> stat.AxisValueArray.AxisValue:</div>
<div class="line"><span class="lineno"> 1160</span>        axisValueFormat = axisValueTable.Format</div>
<div class="line"><span class="lineno"> 1161</span>        <span class="keywordflow">if</span> axisValueFormat <span class="keywordflow">in</span> (1, 2, 3):</div>
<div class="line"><span class="lineno"> 1162</span>            axisTag = designAxes[axisValueTable.AxisIndex].AxisTag</div>
<div class="line"><span class="lineno"> 1163</span>            <span class="keywordflow">if</span> axisValueFormat == 2:</div>
<div class="line"><span class="lineno"> 1164</span>                axisValue = axisValueTable.NominalValue</div>
<div class="line"><span class="lineno"> 1165</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1166</span>                axisValue = axisValueTable.Value</div>
<div class="line"><span class="lineno"> 1167</span>            <span class="keywordflow">if</span> isAxisValueOutsideLimits(axisTag, axisValue):</div>
<div class="line"><span class="lineno"> 1168</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1169</span>        <span class="keywordflow">elif</span> axisValueFormat == 4:</div>
<div class="line"><span class="lineno"> 1170</span>            <span class="comment"># drop &#39;non-analytic&#39; AxisValue if _any_ AxisValueRecord doesn&#39;t match</span></div>
<div class="line"><span class="lineno"> 1171</span>            <span class="comment"># the pinned location or is outside range</span></div>
<div class="line"><span class="lineno"> 1172</span>            dropAxisValueTable = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1173</span>            <span class="keywordflow">for</span> rec <span class="keywordflow">in</span> axisValueTable.AxisValueRecord:</div>
<div class="line"><span class="lineno"> 1174</span>                axisTag = designAxes[rec.AxisIndex].AxisTag</div>
<div class="line"><span class="lineno"> 1175</span>                axisValue = rec.Value</div>
<div class="line"><span class="lineno"> 1176</span>                <span class="keywordflow">if</span> isAxisValueOutsideLimits(axisTag, axisValue):</div>
<div class="line"><span class="lineno"> 1177</span>                    dropAxisValueTable = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1178</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1179</span>            <span class="keywordflow">if</span> dropAxisValueTable:</div>
<div class="line"><span class="lineno"> 1180</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1181</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1182</span>            log.warning(<span class="stringliteral">&quot;Unknown AxisValue table format (%s); ignored&quot;</span>, axisValueFormat)</div>
<div class="line"><span class="lineno"> 1183</span>        newAxisValueTables.append(axisValueTable)</div>
<div class="line"><span class="lineno"> 1184</span>    <span class="keywordflow">return</span> newAxisValueTables</div>
<div class="line"><span class="lineno"> 1185</span> </div>
<div class="line"><span class="lineno"> 1186</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ade0f5eb4100d6de5cdec717cc477bd62" name="ade0f5eb4100d6de5cdec717cc477bd62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade0f5eb4100d6de5cdec717cc477bd62">&#9670;&#160;</a></span>changeTupleVariationAxisLimit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.changeTupleVariationAxisLimit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisTag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  433</span><span class="keyword">def </span>changeTupleVariationAxisLimit(var, axisTag, axisLimit):</div>
<div class="line"><span class="lineno">  434</span>    <span class="keyword">assert</span> isinstance(axisLimit, NormalizedAxisTriple)</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>    <span class="comment"># Skip when current axis is missing (i.e. doesn&#39;t participate),</span></div>
<div class="line"><span class="lineno">  437</span>    lower, peak, upper = var.axes.get(axisTag, (-1, 0, 1))</div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">if</span> peak == 0:</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">return</span> [var]</div>
<div class="line"><span class="lineno">  440</span>    <span class="comment"># Drop if the var &#39;tent&#39; isn&#39;t well-formed</span></div>
<div class="line"><span class="lineno">  441</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> (lower &lt;= peak &lt;= upper) <span class="keywordflow">or</span> (lower &lt; 0 <span class="keywordflow">and</span> upper &gt; 0):</div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">return</span> []</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">if</span> axisTag <span class="keywordflow">not</span> <span class="keywordflow">in</span> var.axes:</div>
<div class="line"><span class="lineno">  445</span>        <span class="keywordflow">return</span> [var]</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>    tent = var.axes[axisTag]</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    solutions = solver.rebaseTent(tent, axisLimit)</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    out = []</div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordflow">for</span> scalar, tent <span class="keywordflow">in</span> solutions:</div>
<div class="line"><span class="lineno">  453</span>        newVar = (</div>
<div class="line"><span class="lineno">  454</span>            TupleVariation(var.axes, var.coordinates) <span class="keywordflow">if</span> len(solutions) &gt; 1 <span class="keywordflow">else</span> var</div>
<div class="line"><span class="lineno">  455</span>        )</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordflow">if</span> tent <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  457</span>            newVar.axes.pop(axisTag)</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  459</span>            <span class="keyword">assert</span> tent[1] != 0, tent</div>
<div class="line"><span class="lineno">  460</span>            newVar.axes[axisTag] = tent</div>
<div class="line"><span class="lineno">  461</span>        newVar *= scalar</div>
<div class="line"><span class="lineno">  462</span>        out.append(newVar)</div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordflow">return</span> out</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a08f8e45b7908f39ad02ed453b1343b77" name="a08f8e45b7908f39ad02ed453b1343b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08f8e45b7908f39ad02ed453b1343b77">&#9670;&#160;</a></span>changeTupleVariationsAxisLimits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.changeTupleVariationsAxisLimits </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>variations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  424</span><span class="keyword">def </span>changeTupleVariationsAxisLimits(variations, axisLimits):</div>
<div class="line"><span class="lineno">  425</span>    <span class="keywordflow">for</span> axisTag, axisLimit <span class="keywordflow">in</span> sorted(axisLimits.items()):</div>
<div class="line"><span class="lineno">  426</span>        newVariations = []</div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">for</span> var <span class="keywordflow">in</span> variations:</div>
<div class="line"><span class="lineno">  428</span>            newVariations.extend(changeTupleVariationAxisLimit(var, axisTag, axisLimit))</div>
<div class="line"><span class="lineno">  429</span>        variations = newVariations</div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">return</span> variations</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a8afd336af52da17d85b23c9a0771f5" name="a6a8afd336af52da17d85b23c9a0771f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a8afd336af52da17d85b23c9a0771f5">&#9670;&#160;</a></span>instantiateAvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateAvar </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1018</span><span class="keyword">def </span>instantiateAvar(varfont, axisLimits):</div>
<div class="line"><span class="lineno"> 1019</span>    <span class="comment"># &#39;axisLimits&#39; dict must contain user-space (non-normalized) coordinates.</span></div>
<div class="line"><span class="lineno"> 1020</span> </div>
<div class="line"><span class="lineno"> 1021</span>    segments = varfont[<span class="stringliteral">&quot;avar&quot;</span>].segments</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>    <span class="comment"># drop table if we instantiate all the axes</span></div>
<div class="line"><span class="lineno"> 1024</span>    pinnedAxes = set(axisLimits.pinnedLocation())</div>
<div class="line"><span class="lineno"> 1025</span>    <span class="keywordflow">if</span> pinnedAxes.issuperset(segments):</div>
<div class="line"><span class="lineno"> 1026</span>        log.info(<span class="stringliteral">&quot;Dropping avar table&quot;</span>)</div>
<div class="line"><span class="lineno"> 1027</span>        del varfont[<span class="stringliteral">&quot;avar&quot;</span>]</div>
<div class="line"><span class="lineno"> 1028</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1029</span> </div>
<div class="line"><span class="lineno"> 1030</span>    log.info(<span class="stringliteral">&quot;Instantiating avar table&quot;</span>)</div>
<div class="line"><span class="lineno"> 1031</span>    <span class="keywordflow">for</span> axis <span class="keywordflow">in</span> pinnedAxes:</div>
<div class="line"><span class="lineno"> 1032</span>        <span class="keywordflow">if</span> axis <span class="keywordflow">in</span> segments:</div>
<div class="line"><span class="lineno"> 1033</span>            del segments[axis]</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>    <span class="comment"># First compute the default normalization for axisLimits coordinates: i.e.</span></div>
<div class="line"><span class="lineno"> 1036</span>    <span class="comment"># min = -1.0, default = 0, max = +1.0, and in between values interpolated linearly,</span></div>
<div class="line"><span class="lineno"> 1037</span>    <span class="comment"># without using the avar table&#39;s mappings.</span></div>
<div class="line"><span class="lineno"> 1038</span>    <span class="comment"># Then, for each SegmentMap, if we are restricting its axis, compute the new</span></div>
<div class="line"><span class="lineno"> 1039</span>    <span class="comment"># mappings by dividing the key/value pairs by the desired new min/max values,</span></div>
<div class="line"><span class="lineno"> 1040</span>    <span class="comment"># dropping any mappings that fall outside the restricted range.</span></div>
<div class="line"><span class="lineno"> 1041</span>    <span class="comment"># The keys (&#39;fromCoord&#39;) are specified in default normalized coordinate space,</span></div>
<div class="line"><span class="lineno"> 1042</span>    <span class="comment"># whereas the values (&#39;toCoord&#39;) are &quot;mapped forward&quot; using the SegmentMap.</span></div>
<div class="line"><span class="lineno"> 1043</span>    normalizedRanges = axisLimits.normalize(varfont, usingAvar=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1044</span>    newSegments = {}</div>
<div class="line"><span class="lineno"> 1045</span>    <span class="keywordflow">for</span> axisTag, mapping <span class="keywordflow">in</span> segments.items():</div>
<div class="line"><span class="lineno"> 1046</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> _isValidAvarSegmentMap(axisTag, mapping):</div>
<div class="line"><span class="lineno"> 1047</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1048</span>        <span class="keywordflow">if</span> mapping <span class="keywordflow">and</span> axisTag <span class="keywordflow">in</span> normalizedRanges:</div>
<div class="line"><span class="lineno"> 1049</span>            axisRange = normalizedRanges[axisTag]</div>
<div class="line"><span class="lineno"> 1050</span>            mappedMin = floatToFixedToFloat(</div>
<div class="line"><span class="lineno"> 1051</span>                piecewiseLinearMap(axisRange.minimum, mapping), 14</div>
<div class="line"><span class="lineno"> 1052</span>            )</div>
<div class="line"><span class="lineno"> 1053</span>            mappedDef = floatToFixedToFloat(</div>
<div class="line"><span class="lineno"> 1054</span>                piecewiseLinearMap(axisRange.default, mapping), 14</div>
<div class="line"><span class="lineno"> 1055</span>            )</div>
<div class="line"><span class="lineno"> 1056</span>            mappedMax = floatToFixedToFloat(</div>
<div class="line"><span class="lineno"> 1057</span>                piecewiseLinearMap(axisRange.maximum, mapping), 14</div>
<div class="line"><span class="lineno"> 1058</span>            )</div>
<div class="line"><span class="lineno"> 1059</span>            newMapping = {}</div>
<div class="line"><span class="lineno"> 1060</span>            <span class="keywordflow">for</span> fromCoord, toCoord <span class="keywordflow">in</span> mapping.items():</div>
<div class="line"><span class="lineno"> 1061</span> </div>
<div class="line"><span class="lineno"> 1062</span>                <span class="keywordflow">if</span> fromCoord &lt; axisRange.minimum <span class="keywordflow">or</span> fromCoord &gt; axisRange.maximum:</div>
<div class="line"><span class="lineno"> 1063</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1064</span>                fromCoord = normalizeValue(fromCoord, axisRange)</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>                <span class="keyword">assert</span> mappedMin &lt;= toCoord &lt;= mappedMax</div>
<div class="line"><span class="lineno"> 1067</span>                toCoord = normalizeValue(toCoord, (mappedMin, mappedDef, mappedMax))</div>
<div class="line"><span class="lineno"> 1068</span> </div>
<div class="line"><span class="lineno"> 1069</span>                fromCoord = floatToFixedToFloat(fromCoord, 14)</div>
<div class="line"><span class="lineno"> 1070</span>                toCoord = floatToFixedToFloat(toCoord, 14)</div>
<div class="line"><span class="lineno"> 1071</span>                newMapping[fromCoord] = toCoord</div>
<div class="line"><span class="lineno"> 1072</span>            newMapping.update({-1.0: -1.0, 0.0: 0.0, 1.0: 1.0})</div>
<div class="line"><span class="lineno"> 1073</span>            newSegments[axisTag] = newMapping</div>
<div class="line"><span class="lineno"> 1074</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1075</span>            newSegments[axisTag] = mapping</div>
<div class="line"><span class="lineno"> 1076</span>    varfont[<span class="stringliteral">&quot;avar&quot;</span>].segments = newSegments</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a04b76daa8d4192a78d8791fa523bca2c" name="a04b76daa8d4192a78d8791fa523bca2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04b76daa8d4192a78d8791fa523bca2c">&#9670;&#160;</a></span>instantiateCvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateCvar </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  553</span><span class="keyword">def </span>instantiateCvar(varfont, axisLimits):</div>
<div class="line"><span class="lineno">  554</span>    log.info(<span class="stringliteral">&quot;Instantiating cvt/cvar tables&quot;</span>)</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    cvar = varfont[<span class="stringliteral">&quot;cvar&quot;</span>]</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>    defaultDeltas = instantiateTupleVariationStore(cvar.variations, axisLimits)</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>    <span class="keywordflow">if</span> defaultDeltas:</div>
<div class="line"><span class="lineno">  561</span>        setCvarDeltas(varfont[<span class="stringliteral">&quot;cvt &quot;</span>], defaultDeltas)</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> cvar.variations:</div>
<div class="line"><span class="lineno">  564</span>        del varfont[<span class="stringliteral">&quot;cvar&quot;</span>]</div>
<div class="line"><span class="lineno">  565</span> </div>
<div class="line"><span class="lineno">  566</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af81c183b6f0ebc0aa6e9df390c71cde8" name="af81c183b6f0ebc0aa6e9df390c71cde8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af81c183b6f0ebc0aa6e9df390c71cde8">&#9670;&#160;</a></span>instantiateFeatureVariations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateFeatureVariations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  837</span><span class="keyword">def </span>instantiateFeatureVariations(varfont, axisLimits):</div>
<div class="line"><span class="lineno">  838</span>    <span class="keywordflow">for</span> tableTag <span class="keywordflow">in</span> (<span class="stringliteral">&quot;GPOS&quot;</span>, <span class="stringliteral">&quot;GSUB&quot;</span>):</div>
<div class="line"><span class="lineno">  839</span>        <span class="keywordflow">if</span> tableTag <span class="keywordflow">not</span> <span class="keywordflow">in</span> varfont <span class="keywordflow">or</span> <span class="keywordflow">not</span> getattr(</div>
<div class="line"><span class="lineno">  840</span>            varfont[tableTag].table, <span class="stringliteral">&quot;FeatureVariations&quot;</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  841</span>        ):</div>
<div class="line"><span class="lineno">  842</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  843</span>        log.info(<span class="stringliteral">&quot;Instantiating FeatureVariations of %s table&quot;</span>, tableTag)</div>
<div class="line"><span class="lineno">  844</span>        _instantiateFeatureVariations(</div>
<div class="line"><span class="lineno">  845</span>            varfont[tableTag].table, varfont[<span class="stringliteral">&quot;fvar&quot;</span>].axes, axisLimits</div>
<div class="line"><span class="lineno">  846</span>        )</div>
<div class="line"><span class="lineno">  847</span>        <span class="comment"># remove unreferenced lookups</span></div>
<div class="line"><span class="lineno">  848</span>        varfont[tableTag].prune_lookups()</div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7749e2b2b0f4781c6a9e39123e58b6d7" name="a7749e2b2b0f4781c6a9e39123e58b6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7749e2b2b0f4781c6a9e39123e58b6d7">&#9670;&#160;</a></span>instantiateFvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateFvar </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1088</span><span class="keyword">def </span>instantiateFvar(varfont, axisLimits):</div>
<div class="line"><span class="lineno"> 1089</span>    <span class="comment"># &#39;axisLimits&#39; dict must contain user-space (non-normalized) coordinates</span></div>
<div class="line"><span class="lineno"> 1090</span> </div>
<div class="line"><span class="lineno"> 1091</span>    location = axisLimits.pinnedLocation()</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>    fvar = varfont[<span class="stringliteral">&quot;fvar&quot;</span>]</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>    <span class="comment"># drop table if we instantiate all the axes</span></div>
<div class="line"><span class="lineno"> 1096</span>    <span class="keywordflow">if</span> set(location).issuperset(axis.axisTag <span class="keywordflow">for</span> axis <span class="keywordflow">in</span> fvar.axes):</div>
<div class="line"><span class="lineno"> 1097</span>        log.info(<span class="stringliteral">&quot;Dropping fvar table&quot;</span>)</div>
<div class="line"><span class="lineno"> 1098</span>        del varfont[<span class="stringliteral">&quot;fvar&quot;</span>]</div>
<div class="line"><span class="lineno"> 1099</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1100</span> </div>
<div class="line"><span class="lineno"> 1101</span>    log.info(<span class="stringliteral">&quot;Instantiating fvar table&quot;</span>)</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span>    axes = []</div>
<div class="line"><span class="lineno"> 1104</span>    <span class="keywordflow">for</span> axis <span class="keywordflow">in</span> fvar.axes:</div>
<div class="line"><span class="lineno"> 1105</span>        axisTag = axis.axisTag</div>
<div class="line"><span class="lineno"> 1106</span>        <span class="keywordflow">if</span> axisTag <span class="keywordflow">in</span> location:</div>
<div class="line"><span class="lineno"> 1107</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1108</span>        <span class="keywordflow">if</span> axisTag <span class="keywordflow">in</span> axisLimits:</div>
<div class="line"><span class="lineno"> 1109</span>            triple = axisLimits[axisTag]</div>
<div class="line"><span class="lineno"> 1110</span>            <span class="keywordflow">if</span> triple.default <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1111</span>                triple = (triple.minimum, axis.defaultValue, triple.maximum)</div>
<div class="line"><span class="lineno"> 1112</span>            axis.minValue, axis.defaultValue, axis.maxValue = triple</div>
<div class="line"><span class="lineno"> 1113</span>        axes.append(axis)</div>
<div class="line"><span class="lineno"> 1114</span>    fvar.axes = axes</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>    <span class="comment"># only keep NamedInstances whose coordinates == pinned axis location</span></div>
<div class="line"><span class="lineno"> 1117</span>    instances = []</div>
<div class="line"><span class="lineno"> 1118</span>    <span class="keywordflow">for</span> instance <span class="keywordflow">in</span> fvar.instances:</div>
<div class="line"><span class="lineno"> 1119</span>        <span class="keywordflow">if</span> any(instance.coordinates[axis] != value <span class="keywordflow">for</span> axis, value <span class="keywordflow">in</span> location.items()):</div>
<div class="line"><span class="lineno"> 1120</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1121</span>        <span class="keywordflow">for</span> axisTag <span class="keywordflow">in</span> location:</div>
<div class="line"><span class="lineno"> 1122</span>            del instance.coordinates[axisTag]</div>
<div class="line"><span class="lineno"> 1123</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isInstanceWithinAxisRanges(instance.coordinates, axisLimits):</div>
<div class="line"><span class="lineno"> 1124</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1125</span>        instances.append(instance)</div>
<div class="line"><span class="lineno"> 1126</span>    fvar.instances = instances</div>
<div class="line"><span class="lineno"> 1127</span> </div>
<div class="line"><span class="lineno"> 1128</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2769046e6dece1e15042e51bf1850653" name="a2769046e6dece1e15042e51bf1850653"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2769046e6dece1e15042e51bf1850653">&#9670;&#160;</a></span>instantiateGvar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateGvar </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optimize</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  518</span><span class="keyword">def </span>instantiateGvar(varfont, axisLimits, optimize=True):</div>
<div class="line"><span class="lineno">  519</span>    log.info(<span class="stringliteral">&quot;Instantiating glyf/gvar tables&quot;</span>)</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    gvar = varfont[<span class="stringliteral">&quot;gvar&quot;</span>]</div>
<div class="line"><span class="lineno">  522</span>    glyf = varfont[<span class="stringliteral">&quot;glyf&quot;</span>]</div>
<div class="line"><span class="lineno">  523</span>    hMetrics = varfont[<span class="stringliteral">&quot;hmtx&quot;</span>].metrics</div>
<div class="line"><span class="lineno">  524</span>    vMetrics = getattr(varfont.get(<span class="stringliteral">&quot;vmtx&quot;</span>), <span class="stringliteral">&quot;metrics&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  525</span>    <span class="comment"># Get list of glyph names sorted by component depth.</span></div>
<div class="line"><span class="lineno">  526</span>    <span class="comment"># If a composite glyph is processed before its base glyph, the bounds may</span></div>
<div class="line"><span class="lineno">  527</span>    <span class="comment"># be calculated incorrectly because deltas haven&#39;t been applied to the</span></div>
<div class="line"><span class="lineno">  528</span>    <span class="comment"># base glyph yet.</span></div>
<div class="line"><span class="lineno">  529</span>    glyphnames = sorted(</div>
<div class="line"><span class="lineno">  530</span>        glyf.glyphOrder,</div>
<div class="line"><span class="lineno">  531</span>        key=<span class="keyword">lambda</span> name: (</div>
<div class="line"><span class="lineno">  532</span>            glyf[name].getCompositeMaxpValues(glyf).maxComponentDepth</div>
<div class="line"><span class="lineno">  533</span>            <span class="keywordflow">if</span> glyf[name].isComposite()</div>
<div class="line"><span class="lineno">  534</span>            <span class="keywordflow">else</span> 0,</div>
<div class="line"><span class="lineno">  535</span>            name,</div>
<div class="line"><span class="lineno">  536</span>        ),</div>
<div class="line"><span class="lineno">  537</span>    )</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">for</span> glyphname <span class="keywordflow">in</span> glyphnames:</div>
<div class="line"><span class="lineno">  539</span>        _instantiateGvarGlyph(</div>
<div class="line"><span class="lineno">  540</span>            glyphname, glyf, gvar, hMetrics, vMetrics, axisLimits, optimize=optimize</div>
<div class="line"><span class="lineno">  541</span>        )</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> gvar.variations:</div>
<div class="line"><span class="lineno">  544</span>        del varfont[<span class="stringliteral">&quot;gvar&quot;</span>]</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a01e2fdc5b3d636608244ad1b41cf015c" name="a01e2fdc5b3d636608244ad1b41cf015c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01e2fdc5b3d636608244ad1b41cf015c">&#9670;&#160;</a></span>instantiateGvarGlyph()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateGvarGlyph </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>glyphname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optimize</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove?
https://github.com/fonttools/fonttools/pull/2266</pre> <div class="fragment"><div class="line"><span class="lineno">  506</span><span class="keyword">def </span>instantiateGvarGlyph(varfont, glyphname, axisLimits, optimize=True):</div>
<div class="line"><span class="lineno">  507</span>    <span class="stringliteral">&quot;&quot;&quot;Remove?</span></div>
<div class="line"><span class="lineno">  508</span><span class="stringliteral">    https://github.com/fonttools/fonttools/pull/2266&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  509</span>    gvar = varfont[<span class="stringliteral">&quot;gvar&quot;</span>]</div>
<div class="line"><span class="lineno">  510</span>    glyf = varfont[<span class="stringliteral">&quot;glyf&quot;</span>]</div>
<div class="line"><span class="lineno">  511</span>    hMetrics = varfont[<span class="stringliteral">&quot;hmtx&quot;</span>].metrics</div>
<div class="line"><span class="lineno">  512</span>    vMetrics = getattr(varfont.get(<span class="stringliteral">&quot;vmtx&quot;</span>), <span class="stringliteral">&quot;metrics&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  513</span>    _instantiateGvarGlyph(</div>
<div class="line"><span class="lineno">  514</span>        glyphname, glyf, gvar, hMetrics, vMetrics, axisLimits, optimize=optimize</div>
<div class="line"><span class="lineno">  515</span>    )</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="acbeffd4f6aa3ad8e6d3e52625f0120c4" name="acbeffd4f6aa3ad8e6d3e52625f0120c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbeffd4f6aa3ad8e6d3e52625f0120c4">&#9670;&#160;</a></span>instantiateHVAR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateHVAR </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  643</span><span class="keyword">def </span>instantiateHVAR(varfont, axisLimits):</div>
<div class="line"><span class="lineno">  644</span>    <span class="keywordflow">return</span> _instantiateVHVAR(varfont, axisLimits, varLib.HVAR_FIELDS)</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9273b3012be206432b9698fa44be685" name="ab9273b3012be206432b9698fa44be685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9273b3012be206432b9698fa44be685">&#9670;&#160;</a></span>instantiateItemVariationStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateItemVariationStore </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>itemVarStore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fvarAxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute deltas at partial location, and update varStore in-place.

Remove regions in which all axes were instanced, or fall outside the new axis
limits. Scale the deltas of the remaining regions where only some of the axes
were instanced.

The number of VarData subtables, and the number of items within each, are
not modified, in order to keep the existing VariationIndex valid.
One may call VarStore.optimize() method after this to further optimize those.

Args:
    varStore: An otTables.VarStore object (Item Variation Store)
    fvarAxes: list of fvar's Axis objects
    axisLimits: NormalizedAxisLimits: mapping axis tags to normalized
        min/default/max axis coordinates. May not specify coordinates/ranges for
        all the fvar axes.

Returns:
    defaultDeltas: to be added to the default instance, of type dict of floats
        keyed by VariationIndex compound values: i.e. (outer &lt;&lt; 16) + inner.
</pre> <div class="fragment"><div class="line"><span class="lineno">  739</span><span class="keyword">def </span>instantiateItemVariationStore(itemVarStore, fvarAxes, axisLimits):</div>
<div class="line"><span class="lineno">  740</span>    <span class="stringliteral">&quot;&quot;&quot;Compute deltas at partial location, and update varStore in-place.</span></div>
<div class="line"><span class="lineno">  741</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  742</span><span class="stringliteral">    Remove regions in which all axes were instanced, or fall outside the new axis</span></div>
<div class="line"><span class="lineno">  743</span><span class="stringliteral">    limits. Scale the deltas of the remaining regions where only some of the axes</span></div>
<div class="line"><span class="lineno">  744</span><span class="stringliteral">    were instanced.</span></div>
<div class="line"><span class="lineno">  745</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  746</span><span class="stringliteral">    The number of VarData subtables, and the number of items within each, are</span></div>
<div class="line"><span class="lineno">  747</span><span class="stringliteral">    not modified, in order to keep the existing VariationIndex valid.</span></div>
<div class="line"><span class="lineno">  748</span><span class="stringliteral">    One may call VarStore.optimize() method after this to further optimize those.</span></div>
<div class="line"><span class="lineno">  749</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  750</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  751</span><span class="stringliteral">        varStore: An otTables.VarStore object (Item Variation Store)</span></div>
<div class="line"><span class="lineno">  752</span><span class="stringliteral">        fvarAxes: list of fvar&#39;s Axis objects</span></div>
<div class="line"><span class="lineno">  753</span><span class="stringliteral">        axisLimits: NormalizedAxisLimits: mapping axis tags to normalized</span></div>
<div class="line"><span class="lineno">  754</span><span class="stringliteral">            min/default/max axis coordinates. May not specify coordinates/ranges for</span></div>
<div class="line"><span class="lineno">  755</span><span class="stringliteral">            all the fvar axes.</span></div>
<div class="line"><span class="lineno">  756</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  757</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  758</span><span class="stringliteral">        defaultDeltas: to be added to the default instance, of type dict of floats</span></div>
<div class="line"><span class="lineno">  759</span><span class="stringliteral">            keyed by VariationIndex compound values: i.e. (outer &lt;&lt; 16) + inner.</span></div>
<div class="line"><span class="lineno">  760</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  761</span>    tupleVarStore = _TupleVarStoreAdapter.fromItemVarStore(itemVarStore, fvarAxes)</div>
<div class="line"><span class="lineno">  762</span>    defaultDeltaArray = tupleVarStore.instantiate(axisLimits)</div>
<div class="line"><span class="lineno">  763</span>    newItemVarStore = tupleVarStore.asItemVarStore()</div>
<div class="line"><span class="lineno">  764</span> </div>
<div class="line"><span class="lineno">  765</span>    itemVarStore.VarRegionList = newItemVarStore.VarRegionList</div>
<div class="line"><span class="lineno">  766</span>    <span class="keyword">assert</span> itemVarStore.VarDataCount == newItemVarStore.VarDataCount</div>
<div class="line"><span class="lineno">  767</span>    itemVarStore.VarData = newItemVarStore.VarData</div>
<div class="line"><span class="lineno">  768</span> </div>
<div class="line"><span class="lineno">  769</span>    defaultDeltas = {</div>
<div class="line"><span class="lineno">  770</span>        ((major &lt;&lt; 16) + minor): delta</div>
<div class="line"><span class="lineno">  771</span>        <span class="keywordflow">for</span> major, deltas <span class="keywordflow">in</span> enumerate(defaultDeltaArray)</div>
<div class="line"><span class="lineno">  772</span>        <span class="keywordflow">for</span> minor, delta <span class="keywordflow">in</span> enumerate(deltas)</div>
<div class="line"><span class="lineno">  773</span>    }</div>
<div class="line"><span class="lineno">  774</span>    defaultDeltas[itemVarStore.NO_VARIATION_INDEX] = 0</div>
<div class="line"><span class="lineno">  775</span>    <span class="keywordflow">return</span> defaultDeltas</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adf4cf9d9f2b17c95b5581740ccc919a2" name="adf4cf9d9f2b17c95b5581740ccc919a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf4cf9d9f2b17c95b5581740ccc919a2">&#9670;&#160;</a></span>instantiateMVAR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateMVAR </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  584</span><span class="keyword">def </span>instantiateMVAR(varfont, axisLimits):</div>
<div class="line"><span class="lineno">  585</span>    log.info(<span class="stringliteral">&quot;Instantiating MVAR table&quot;</span>)</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span>    mvar = varfont[<span class="stringliteral">&quot;MVAR&quot;</span>].table</div>
<div class="line"><span class="lineno">  588</span>    fvarAxes = varfont[<span class="stringliteral">&quot;fvar&quot;</span>].axes</div>
<div class="line"><span class="lineno">  589</span>    varStore = mvar.VarStore</div>
<div class="line"><span class="lineno">  590</span>    defaultDeltas = instantiateItemVariationStore(varStore, fvarAxes, axisLimits)</div>
<div class="line"><span class="lineno">  591</span>    setMvarDeltas(varfont, defaultDeltas)</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordflow">if</span> varStore.VarRegionList.Region:</div>
<div class="line"><span class="lineno">  594</span>        varIndexMapping = varStore.optimize()</div>
<div class="line"><span class="lineno">  595</span>        <span class="keywordflow">for</span> rec <span class="keywordflow">in</span> mvar.ValueRecord:</div>
<div class="line"><span class="lineno">  596</span>            rec.VarIdx = varIndexMapping[rec.VarIdx]</div>
<div class="line"><span class="lineno">  597</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  598</span>        del varfont[<span class="stringliteral">&quot;MVAR&quot;</span>]</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4d8cdfdaee9bf3639fff98c7d3abf6e" name="ac4d8cdfdaee9bf3639fff98c7d3abf6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4d8cdfdaee9bf3639fff98c7d3abf6e">&#9670;&#160;</a></span>instantiateOTL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateOTL </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  778</span><span class="keyword">def </span>instantiateOTL(varfont, axisLimits):</div>
<div class="line"><span class="lineno">  779</span>    <span class="comment"># TODO(anthrotype) Support partial instancing of JSTF and BASE tables</span></div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  782</span>        <span class="stringliteral">&quot;GDEF&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> varfont</div>
<div class="line"><span class="lineno">  783</span>        <span class="keywordflow">or</span> varfont[<span class="stringliteral">&quot;GDEF&quot;</span>].table.Version &lt; 0x00010003</div>
<div class="line"><span class="lineno">  784</span>        <span class="keywordflow">or</span> <span class="keywordflow">not</span> varfont[<span class="stringliteral">&quot;GDEF&quot;</span>].table.VarStore</div>
<div class="line"><span class="lineno">  785</span>    ):</div>
<div class="line"><span class="lineno">  786</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;GPOS&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno">  789</span>        msg = <span class="stringliteral">&quot;Instantiating GDEF and GPOS tables&quot;</span></div>
<div class="line"><span class="lineno">  790</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  791</span>        msg = <span class="stringliteral">&quot;Instantiating GDEF table&quot;</span></div>
<div class="line"><span class="lineno">  792</span>    log.info(msg)</div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>    gdef = varfont[<span class="stringliteral">&quot;GDEF&quot;</span>].table</div>
<div class="line"><span class="lineno">  795</span>    varStore = gdef.VarStore</div>
<div class="line"><span class="lineno">  796</span>    fvarAxes = varfont[<span class="stringliteral">&quot;fvar&quot;</span>].axes</div>
<div class="line"><span class="lineno">  797</span> </div>
<div class="line"><span class="lineno">  798</span>    defaultDeltas = instantiateItemVariationStore(varStore, fvarAxes, axisLimits)</div>
<div class="line"><span class="lineno">  799</span> </div>
<div class="line"><span class="lineno">  800</span>    <span class="comment"># When VF are built, big lookups may overflow and be broken into multiple</span></div>
<div class="line"><span class="lineno">  801</span>    <span class="comment"># subtables. MutatorMerger (which inherits from AligningMerger) reattaches</span></div>
<div class="line"><span class="lineno">  802</span>    <span class="comment"># them upon instancing, in case they can now fit a single subtable (if not,</span></div>
<div class="line"><span class="lineno">  803</span>    <span class="comment"># they will be split again upon compilation).</span></div>
<div class="line"><span class="lineno">  804</span>    <span class="comment"># This &#39;merger&#39; also works as a &#39;visitor&#39; that traverses the OTL tables and</span></div>
<div class="line"><span class="lineno">  805</span>    <span class="comment"># calls specific methods when instances of a given type are found.</span></div>
<div class="line"><span class="lineno">  806</span>    <span class="comment"># Specifically, it adds default deltas to GPOS Anchors/ValueRecords and GDEF</span></div>
<div class="line"><span class="lineno">  807</span>    <span class="comment"># LigatureCarets, and optionally deletes all VariationIndex tables if the</span></div>
<div class="line"><span class="lineno">  808</span>    <span class="comment"># VarStore is fully instanced.</span></div>
<div class="line"><span class="lineno">  809</span>    merger = MutatorMerger(</div>
<div class="line"><span class="lineno">  810</span>        varfont, defaultDeltas, deleteVariations=(<span class="keywordflow">not</span> varStore.VarRegionList.Region)</div>
<div class="line"><span class="lineno">  811</span>    )</div>
<div class="line"><span class="lineno">  812</span>    merger.mergeTables(varfont, [varfont], [<span class="stringliteral">&quot;GDEF&quot;</span>, <span class="stringliteral">&quot;GPOS&quot;</span>])</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span>    <span class="keywordflow">if</span> varStore.VarRegionList.Region:</div>
<div class="line"><span class="lineno">  815</span>        varIndexMapping = varStore.optimize()</div>
<div class="line"><span class="lineno">  816</span>        gdef.remap_device_varidxes(varIndexMapping)</div>
<div class="line"><span class="lineno">  817</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;GPOS&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno">  818</span>            varfont[<span class="stringliteral">&quot;GPOS&quot;</span>].table.remap_device_varidxes(varIndexMapping)</div>
<div class="line"><span class="lineno">  819</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  820</span>        <span class="comment"># Downgrade GDEF.</span></div>
<div class="line"><span class="lineno">  821</span>        del gdef.VarStore</div>
<div class="line"><span class="lineno">  822</span>        gdef.Version = 0x00010002</div>
<div class="line"><span class="lineno">  823</span>        <span class="keywordflow">if</span> gdef.MarkGlyphSetsDef <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  824</span>            del gdef.MarkGlyphSetsDef</div>
<div class="line"><span class="lineno">  825</span>            gdef.Version = 0x00010000</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (</div>
<div class="line"><span class="lineno">  828</span>            gdef.LigCaretList</div>
<div class="line"><span class="lineno">  829</span>            <span class="keywordflow">or</span> gdef.MarkAttachClassDef</div>
<div class="line"><span class="lineno">  830</span>            <span class="keywordflow">or</span> gdef.GlyphClassDef</div>
<div class="line"><span class="lineno">  831</span>            <span class="keywordflow">or</span> gdef.AttachList</div>
<div class="line"><span class="lineno">  832</span>            <span class="keywordflow">or</span> (gdef.Version &gt;= 0x00010002 <span class="keywordflow">and</span> gdef.MarkGlyphSetsDef)</div>
<div class="line"><span class="lineno">  833</span>        ):</div>
<div class="line"><span class="lineno">  834</span>            del varfont[<span class="stringliteral">&quot;GDEF&quot;</span>]</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a13962ac0df6d21a48b0f67ff66bab014" name="a13962ac0df6d21a48b0f67ff66bab014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13962ac0df6d21a48b0f67ff66bab014">&#9670;&#160;</a></span>instantiateSTAT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateSTAT </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1129</span><span class="keyword">def </span>instantiateSTAT(varfont, axisLimits):</div>
<div class="line"><span class="lineno"> 1130</span>    <span class="comment"># &#39;axisLimits&#39; dict must contain user-space (non-normalized) coordinates</span></div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span>    stat = varfont[<span class="stringliteral">&quot;STAT&quot;</span>].table</div>
<div class="line"><span class="lineno"> 1133</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> stat.DesignAxisRecord <span class="keywordflow">or</span> <span class="keywordflow">not</span> (</div>
<div class="line"><span class="lineno"> 1134</span>        stat.AxisValueArray <span class="keywordflow">and</span> stat.AxisValueArray.AxisValue</div>
<div class="line"><span class="lineno"> 1135</span>    ):</div>
<div class="line"><span class="lineno"> 1136</span>        <span class="keywordflow">return</span>  <span class="comment"># STAT table empty, nothing to do</span></div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>    log.info(<span class="stringliteral">&quot;Instantiating STAT table&quot;</span>)</div>
<div class="line"><span class="lineno"> 1139</span>    newAxisValueTables = axisValuesFromAxisLimits(stat, axisLimits)</div>
<div class="line"><span class="lineno"> 1140</span>    stat.AxisValueCount = len(newAxisValueTables)</div>
<div class="line"><span class="lineno"> 1141</span>    <span class="keywordflow">if</span> stat.AxisValueCount:</div>
<div class="line"><span class="lineno"> 1142</span>        stat.AxisValueArray.AxisValue = newAxisValueTables</div>
<div class="line"><span class="lineno"> 1143</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1144</span>        stat.AxisValueArray = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1145</span> </div>
<div class="line"><span class="lineno"> 1146</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f4235b570a03a8c626db0fc015f2728" name="a7f4235b570a03a8c626db0fc015f2728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f4235b570a03a8c626db0fc015f2728">&#9670;&#160;</a></span>instantiateTupleVariationStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateTupleVariationStore </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>variations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>origCoords</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>endPts</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Instantiate TupleVariation list at the given location, or limit axes' min/max.

The 'variations' list of TupleVariation objects is modified in-place.
The 'axisLimits' (dict) maps axis tags (str) to NormalizedAxisTriple namedtuples
specifying (minimum, default, maximum) in the -1,0,+1 normalized space. Pinned axes
have minimum == default == maximum.

A 'full' instance (i.e. static font) is produced when all the axes are pinned to
single coordinates; a 'partial' instance (i.e. a less variable font) is produced
when some of the axes are omitted, or restricted with a new range.

Tuples that do not participate are kept as they are. Those that have 0 influence
at the given location are removed from the variation store.
Those that are fully instantiated (i.e. all their axes are being pinned) are also
removed from the variation store, their scaled deltas accummulated and returned, so
that they can be added by the caller to the default instance's coordinates.
Tuples that are only partially instantiated (i.e. not all the axes that they
participate in are being pinned) are kept in the store, and their deltas multiplied
by the scalar support of the axes to be pinned at the desired location.

Args:
    variations: List[TupleVariation] from either 'gvar' or 'cvar'.
    axisLimits: NormalizedAxisLimits: map from axis tags to (min, default, max)
        normalized coordinates for the full or partial instance.
    origCoords: GlyphCoordinates: default instance's coordinates for computing 'gvar'
        inferred points (cf. table__g_l_y_f._getCoordinatesAndControls).
    endPts: List[int]: indices of contour end points, for inferring 'gvar' deltas.

Returns:
    List[float]: the overall delta adjustment after applicable deltas were summed.
</pre> <div class="fragment"><div class="line"><span class="lineno">  365</span>):</div>
<div class="line"><span class="lineno">  366</span>    <span class="stringliteral">&quot;&quot;&quot;Instantiate TupleVariation list at the given location, or limit axes&#39; min/max.</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">    The &#39;variations&#39; list of TupleVariation objects is modified in-place.</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">    The &#39;axisLimits&#39; (dict) maps axis tags (str) to NormalizedAxisTriple namedtuples</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">    specifying (minimum, default, maximum) in the -1,0,+1 normalized space. Pinned axes</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">    have minimum == default == maximum.</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">    A &#39;full&#39; instance (i.e. static font) is produced when all the axes are pinned to</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">    single coordinates; a &#39;partial&#39; instance (i.e. a less variable font) is produced</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">    when some of the axes are omitted, or restricted with a new range.</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">    Tuples that do not participate are kept as they are. Those that have 0 influence</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">    at the given location are removed from the variation store.</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">    Those that are fully instantiated (i.e. all their axes are being pinned) are also</span></div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral">    removed from the variation store, their scaled deltas accummulated and returned, so</span></div>
<div class="line"><span class="lineno">  381</span><span class="stringliteral">    that they can be added by the caller to the default instance&#39;s coordinates.</span></div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral">    Tuples that are only partially instantiated (i.e. not all the axes that they</span></div>
<div class="line"><span class="lineno">  383</span><span class="stringliteral">    participate in are being pinned) are kept in the store, and their deltas multiplied</span></div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">    by the scalar support of the axes to be pinned at the desired location.</span></div>
<div class="line"><span class="lineno">  385</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  386</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  387</span><span class="stringliteral">        variations: List[TupleVariation] from either &#39;gvar&#39; or &#39;cvar&#39;.</span></div>
<div class="line"><span class="lineno">  388</span><span class="stringliteral">        axisLimits: NormalizedAxisLimits: map from axis tags to (min, default, max)</span></div>
<div class="line"><span class="lineno">  389</span><span class="stringliteral">            normalized coordinates for the full or partial instance.</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral">        origCoords: GlyphCoordinates: default instance&#39;s coordinates for computing &#39;gvar&#39;</span></div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral">            inferred points (cf. table__g_l_y_f._getCoordinatesAndControls).</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">        endPts: List[int]: indices of contour end points, for inferring &#39;gvar&#39; deltas.</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">        List[float]: the overall delta adjustment after applicable deltas were summed.</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>    newVariations = changeTupleVariationsAxisLimits(variations, axisLimits)</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>    mergedVariations = collections.OrderedDict()</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordflow">for</span> var <span class="keywordflow">in</span> newVariations:</div>
<div class="line"><span class="lineno">  402</span>        <span class="comment"># compute inferred deltas only for gvar (&#39;origCoords&#39; is None for cvar)</span></div>
<div class="line"><span class="lineno">  403</span>        <span class="keywordflow">if</span> origCoords <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  404</span>            var.calcInferredDeltas(origCoords, endPts)</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>        <span class="comment"># merge TupleVariations with overlapping &quot;tents&quot;</span></div>
<div class="line"><span class="lineno">  407</span>        axes = frozenset(var.axes.items())</div>
<div class="line"><span class="lineno">  408</span>        <span class="keywordflow">if</span> axes <span class="keywordflow">in</span> mergedVariations:</div>
<div class="line"><span class="lineno">  409</span>            mergedVariations[axes] += var</div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  411</span>            mergedVariations[axes] = var</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>    <span class="comment"># drop TupleVariation if all axes have been pinned (var.axes.items() is empty);</span></div>
<div class="line"><span class="lineno">  414</span>    <span class="comment"># its deltas will be added to the default instance&#39;s coordinates</span></div>
<div class="line"><span class="lineno">  415</span>    defaultVar = mergedVariations.pop(frozenset(), <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>    <span class="keywordflow">for</span> var <span class="keywordflow">in</span> mergedVariations.values():</div>
<div class="line"><span class="lineno">  418</span>        var.roundDeltas()</div>
<div class="line"><span class="lineno">  419</span>    variations[:] = list(mergedVariations.values())</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>    <span class="keywordflow">return</span> defaultVar.coordinates <span class="keywordflow">if</span> defaultVar <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> []</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d5fa7561982d12fec6535b5eae3af83" name="a4d5fa7561982d12fec6535b5eae3af83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d5fa7561982d12fec6535b5eae3af83">&#9670;&#160;</a></span>instantiateVariableFont()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateVariableFont </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>inplace</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optimize</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>overlap</em> = <code><a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_overlap_mode.html#af08fe63399ad0bfa1b27bd0097d3bc04">OverlapMode.KEEP_AND_SET_FLAGS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>updateFontNames</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Instantiate variable font, either fully or partially.

Depending on whether the `axisLimits` dictionary references all or some of the
input varfont's axes, the output font will either be a full instance (static
font) or a variable font with possibly less variation data.

Args:
    varfont: a TTFont instance, which must contain at least an 'fvar' table.
        Note that variable fonts with 'CFF2' table are not supported yet.
    axisLimits: a dict keyed by axis tags (str) containing the coordinates (float)
        along one or more axes where the desired instance will be located.
        If the value is `None`, the default coordinate as per 'fvar' table for
        that axis is used.
        The limit values can also be (min, max) tuples for restricting an
        axis's variation range. The default axis value must be included in
        the new range.
    inplace (bool): whether to modify input TTFont object in-place instead of
        returning a distinct object.
    optimize (bool): if False, do not perform IUP-delta optimization on the
        remaining 'gvar' table's deltas. Possibly faster, and might work around
        rendering issues in some buggy environments, at the cost of a slightly
        larger file size.
    overlap (OverlapMode): variable fonts usually contain overlapping contours, and
        some font rendering engines on Apple platforms require that the
        `OVERLAP_SIMPLE` and `OVERLAP_COMPOUND` flags in the 'glyf' table be set to
        force rendering using a non-zero fill rule. Thus we always set these flags
        on all glyphs to maximise cross-compatibility of the generated instance.
        You can disable this by passing OverlapMode.KEEP_AND_DONT_SET_FLAGS.
        If you want to remove the overlaps altogether and merge overlapping
        contours and components, you can pass OverlapMode.REMOVE (or
        REMOVE_AND_IGNORE_ERRORS to not hard-fail on tricky glyphs). Note that this
        requires the skia-pathops package (available to pip install).
        The overlap parameter only has effect when generating full static instances.
    updateFontNames (bool): if True, update the instantiated font's name table using
        the Axis Value Tables from the STAT table. The name table and the style bits
        in the head and OS/2 table will be updated so they conform to the R/I/B/BI
        model. If the STAT table is missing or an Axis Value table is missing for
        a given axis coordinate, a ValueError will be raised.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1226</span>):</div>
<div class="line"><span class="lineno"> 1227</span>    <span class="stringliteral">&quot;&quot;&quot;Instantiate variable font, either fully or partially.</span></div>
<div class="line"><span class="lineno"> 1228</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1229</span><span class="stringliteral">    Depending on whether the `axisLimits` dictionary references all or some of the</span></div>
<div class="line"><span class="lineno"> 1230</span><span class="stringliteral">    input varfont&#39;s axes, the output font will either be a full instance (static</span></div>
<div class="line"><span class="lineno"> 1231</span><span class="stringliteral">    font) or a variable font with possibly less variation data.</span></div>
<div class="line"><span class="lineno"> 1232</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1233</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno"> 1234</span><span class="stringliteral">        varfont: a TTFont instance, which must contain at least an &#39;fvar&#39; table.</span></div>
<div class="line"><span class="lineno"> 1235</span><span class="stringliteral">            Note that variable fonts with &#39;CFF2&#39; table are not supported yet.</span></div>
<div class="line"><span class="lineno"> 1236</span><span class="stringliteral">        axisLimits: a dict keyed by axis tags (str) containing the coordinates (float)</span></div>
<div class="line"><span class="lineno"> 1237</span><span class="stringliteral">            along one or more axes where the desired instance will be located.</span></div>
<div class="line"><span class="lineno"> 1238</span><span class="stringliteral">            If the value is `None`, the default coordinate as per &#39;fvar&#39; table for</span></div>
<div class="line"><span class="lineno"> 1239</span><span class="stringliteral">            that axis is used.</span></div>
<div class="line"><span class="lineno"> 1240</span><span class="stringliteral">            The limit values can also be (min, max) tuples for restricting an</span></div>
<div class="line"><span class="lineno"> 1241</span><span class="stringliteral">            axis&#39;s variation range. The default axis value must be included in</span></div>
<div class="line"><span class="lineno"> 1242</span><span class="stringliteral">            the new range.</span></div>
<div class="line"><span class="lineno"> 1243</span><span class="stringliteral">        inplace (bool): whether to modify input TTFont object in-place instead of</span></div>
<div class="line"><span class="lineno"> 1244</span><span class="stringliteral">            returning a distinct object.</span></div>
<div class="line"><span class="lineno"> 1245</span><span class="stringliteral">        optimize (bool): if False, do not perform IUP-delta optimization on the</span></div>
<div class="line"><span class="lineno"> 1246</span><span class="stringliteral">            remaining &#39;gvar&#39; table&#39;s deltas. Possibly faster, and might work around</span></div>
<div class="line"><span class="lineno"> 1247</span><span class="stringliteral">            rendering issues in some buggy environments, at the cost of a slightly</span></div>
<div class="line"><span class="lineno"> 1248</span><span class="stringliteral">            larger file size.</span></div>
<div class="line"><span class="lineno"> 1249</span><span class="stringliteral">        overlap (OverlapMode): variable fonts usually contain overlapping contours, and</span></div>
<div class="line"><span class="lineno"> 1250</span><span class="stringliteral">            some font rendering engines on Apple platforms require that the</span></div>
<div class="line"><span class="lineno"> 1251</span><span class="stringliteral">            `OVERLAP_SIMPLE` and `OVERLAP_COMPOUND` flags in the &#39;glyf&#39; table be set to</span></div>
<div class="line"><span class="lineno"> 1252</span><span class="stringliteral">            force rendering using a non-zero fill rule. Thus we always set these flags</span></div>
<div class="line"><span class="lineno"> 1253</span><span class="stringliteral">            on all glyphs to maximise cross-compatibility of the generated instance.</span></div>
<div class="line"><span class="lineno"> 1254</span><span class="stringliteral">            You can disable this by passing OverlapMode.KEEP_AND_DONT_SET_FLAGS.</span></div>
<div class="line"><span class="lineno"> 1255</span><span class="stringliteral">            If you want to remove the overlaps altogether and merge overlapping</span></div>
<div class="line"><span class="lineno"> 1256</span><span class="stringliteral">            contours and components, you can pass OverlapMode.REMOVE (or</span></div>
<div class="line"><span class="lineno"> 1257</span><span class="stringliteral">            REMOVE_AND_IGNORE_ERRORS to not hard-fail on tricky glyphs). Note that this</span></div>
<div class="line"><span class="lineno"> 1258</span><span class="stringliteral">            requires the skia-pathops package (available to pip install).</span></div>
<div class="line"><span class="lineno"> 1259</span><span class="stringliteral">            The overlap parameter only has effect when generating full static instances.</span></div>
<div class="line"><span class="lineno"> 1260</span><span class="stringliteral">        updateFontNames (bool): if True, update the instantiated font&#39;s name table using</span></div>
<div class="line"><span class="lineno"> 1261</span><span class="stringliteral">            the Axis Value Tables from the STAT table. The name table and the style bits</span></div>
<div class="line"><span class="lineno"> 1262</span><span class="stringliteral">            in the head and OS/2 table will be updated so they conform to the R/I/B/BI</span></div>
<div class="line"><span class="lineno"> 1263</span><span class="stringliteral">            model. If the STAT table is missing or an Axis Value table is missing for</span></div>
<div class="line"><span class="lineno"> 1264</span><span class="stringliteral">            a given axis coordinate, a ValueError will be raised.</span></div>
<div class="line"><span class="lineno"> 1265</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1266</span>    <span class="comment"># &#39;overlap&#39; used to be bool and is now enum; for backward compat keep accepting bool</span></div>
<div class="line"><span class="lineno"> 1267</span>    overlap = OverlapMode(int(overlap))</div>
<div class="line"><span class="lineno"> 1268</span> </div>
<div class="line"><span class="lineno"> 1269</span>    sanityCheckVariableTables(varfont)</div>
<div class="line"><span class="lineno"> 1270</span> </div>
<div class="line"><span class="lineno"> 1271</span>    axisLimits = AxisLimits(axisLimits).populateDefaults(varfont)</div>
<div class="line"><span class="lineno"> 1272</span> </div>
<div class="line"><span class="lineno"> 1273</span>    normalizedLimits = axisLimits.normalize(varfont)</div>
<div class="line"><span class="lineno"> 1274</span> </div>
<div class="line"><span class="lineno"> 1275</span>    log.info(<span class="stringliteral">&quot;Normalized limits: %s&quot;</span>, normalizedLimits)</div>
<div class="line"><span class="lineno"> 1276</span> </div>
<div class="line"><span class="lineno"> 1277</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> inplace:</div>
<div class="line"><span class="lineno"> 1278</span>        varfont = deepcopy(varfont)</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>    <span class="keywordflow">if</span> updateFontNames:</div>
<div class="line"><span class="lineno"> 1281</span>        log.info(<span class="stringliteral">&quot;Updating name table&quot;</span>)</div>
<div class="line"><span class="lineno"> 1282</span>        names.updateNameTable(varfont, axisLimits)</div>
<div class="line"><span class="lineno"> 1283</span> </div>
<div class="line"><span class="lineno"> 1284</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;gvar&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1285</span>        instantiateGvar(varfont, normalizedLimits, optimize=optimize)</div>
<div class="line"><span class="lineno"> 1286</span> </div>
<div class="line"><span class="lineno"> 1287</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;cvar&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1288</span>        instantiateCvar(varfont, normalizedLimits)</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;MVAR&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1291</span>        instantiateMVAR(varfont, normalizedLimits)</div>
<div class="line"><span class="lineno"> 1292</span> </div>
<div class="line"><span class="lineno"> 1293</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;HVAR&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1294</span>        instantiateHVAR(varfont, normalizedLimits)</div>
<div class="line"><span class="lineno"> 1295</span> </div>
<div class="line"><span class="lineno"> 1296</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;VVAR&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1297</span>        instantiateVVAR(varfont, normalizedLimits)</div>
<div class="line"><span class="lineno"> 1298</span> </div>
<div class="line"><span class="lineno"> 1299</span>    instantiateOTL(varfont, normalizedLimits)</div>
<div class="line"><span class="lineno"> 1300</span> </div>
<div class="line"><span class="lineno"> 1301</span>    instantiateFeatureVariations(varfont, normalizedLimits)</div>
<div class="line"><span class="lineno"> 1302</span> </div>
<div class="line"><span class="lineno"> 1303</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;avar&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1304</span>        instantiateAvar(varfont, axisLimits)</div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>    <span class="keyword">with</span> names.pruningUnusedNames(varfont):</div>
<div class="line"><span class="lineno"> 1307</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;STAT&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1308</span>            instantiateSTAT(varfont, axisLimits)</div>
<div class="line"><span class="lineno"> 1309</span> </div>
<div class="line"><span class="lineno"> 1310</span>        instantiateFvar(varfont, axisLimits)</div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;fvar&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1313</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1314</span>            <span class="keywordflow">if</span> overlap == OverlapMode.KEEP_AND_SET_FLAGS:</div>
<div class="line"><span class="lineno"> 1315</span>                setMacOverlapFlags(varfont[<span class="stringliteral">&quot;glyf&quot;</span>])</div>
<div class="line"><span class="lineno"> 1316</span>            <span class="keywordflow">elif</span> overlap <span class="keywordflow">in</span> (OverlapMode.REMOVE, OverlapMode.REMOVE_AND_IGNORE_ERRORS):</div>
<div class="line"><span class="lineno"> 1317</span>                <span class="keyword">from</span> <a class="code hl_namespace" href="namespacefont_tools_1_1tt_lib_1_1remove_overlaps.html">fontTools.ttLib.removeOverlaps</a> <span class="keyword">import</span> removeOverlaps</div>
<div class="line"><span class="lineno"> 1318</span> </div>
<div class="line"><span class="lineno"> 1319</span>                log.info(<span class="stringliteral">&quot;Removing overlaps from glyf table&quot;</span>)</div>
<div class="line"><span class="lineno"> 1320</span>                removeOverlaps(</div>
<div class="line"><span class="lineno"> 1321</span>                    varfont,</div>
<div class="line"><span class="lineno"> 1322</span>                    ignoreErrors=(overlap == OverlapMode.REMOVE_AND_IGNORE_ERRORS),</div>
<div class="line"><span class="lineno"> 1323</span>                )</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>    varLib.set_default_weight_width_slant(varfont, location=axisLimits.pinnedLocation())</div>
<div class="line"><span class="lineno"> 1326</span> </div>
<div class="line"><span class="lineno"> 1327</span>    <span class="keywordflow">if</span> updateFontNames:</div>
<div class="line"><span class="lineno"> 1328</span>        <span class="comment"># Set Regular/Italic/Bold/Bold Italic bits as appropriate, after the</span></div>
<div class="line"><span class="lineno"> 1329</span>        <span class="comment"># name table has been updated.</span></div>
<div class="line"><span class="lineno"> 1330</span>        setRibbiBits(varfont)</div>
<div class="line"><span class="lineno"> 1331</span> </div>
<div class="line"><span class="lineno"> 1332</span>    <span class="keywordflow">return</span> varfont</div>
<div class="line"><span class="lineno"> 1333</span> </div>
<div class="line"><span class="lineno"> 1334</span> </div>
<div class="ttc" id="anamespacefont_tools_1_1tt_lib_1_1remove_overlaps_html"><div class="ttname"><a href="namespacefont_tools_1_1tt_lib_1_1remove_overlaps.html">fontTools.ttLib.removeOverlaps</a></div><div class="ttdef"><b>Definition</b> removeOverlaps.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ae2eb5b3612d518a41686f574427178" name="a8ae2eb5b3612d518a41686f574427178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ae2eb5b3612d518a41686f574427178">&#9670;&#160;</a></span>instantiateVVAR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.instantiateVVAR </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisLimits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  647</span><span class="keyword">def </span>instantiateVVAR(varfont, axisLimits):</div>
<div class="line"><span class="lineno">  648</span>    <span class="keywordflow">return</span> _instantiateVHVAR(varfont, axisLimits, varLib.VVAR_FIELDS)</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a94dbad7c00e0f2481d576588da14f72e" name="a94dbad7c00e0f2481d576588da14f72e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94dbad7c00e0f2481d576588da14f72e">&#9670;&#160;</a></span>isInstanceWithinAxisRanges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.isInstanceWithinAxisRanges </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>axisRanges</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1079</span><span class="keyword">def </span>isInstanceWithinAxisRanges(location, axisRanges):</div>
<div class="line"><span class="lineno"> 1080</span>    <span class="keywordflow">for</span> axisTag, coord <span class="keywordflow">in</span> location.items():</div>
<div class="line"><span class="lineno"> 1081</span>        <span class="keywordflow">if</span> axisTag <span class="keywordflow">in</span> axisRanges:</div>
<div class="line"><span class="lineno"> 1082</span>            axisRange = axisRanges[axisTag]</div>
<div class="line"><span class="lineno"> 1083</span>            <span class="keywordflow">if</span> coord &lt; axisRange.minimum <span class="keywordflow">or</span> coord &gt; axisRange.maximum:</div>
<div class="line"><span class="lineno"> 1084</span>                <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1085</span>    <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1086</span> </div>
<div class="line"><span class="lineno"> 1087</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1419ce576cb10d8f48584526b5a20ead" name="a1419ce576cb10d8f48584526b5a20ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1419ce576cb10d8f48584526b5a20ead">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.main </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em> = <code>None</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Partially instantiate a variable font</pre> <div class="fragment"><div class="line"><span class="lineno"> 1518</span><span class="keyword">def </span>main(args=None):</div>
<div class="line"><span class="lineno"> 1519</span>    <span class="stringliteral">&quot;&quot;&quot;Partially instantiate a variable font&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1520</span>    infile, axisLimits, options = parseArgs(args)</div>
<div class="line"><span class="lineno"> 1521</span>    log.info(<span class="stringliteral">&quot;Restricting axes: %s&quot;</span>, axisLimits)</div>
<div class="line"><span class="lineno"> 1522</span> </div>
<div class="line"><span class="lineno"> 1523</span>    log.info(<span class="stringliteral">&quot;Loading variable font&quot;</span>)</div>
<div class="line"><span class="lineno"> 1524</span>    varfont = TTFont(</div>
<div class="line"><span class="lineno"> 1525</span>        infile,</div>
<div class="line"><span class="lineno"> 1526</span>        recalcTimestamp=options.recalc_timestamp,</div>
<div class="line"><span class="lineno"> 1527</span>        recalcBBoxes=options.recalc_bounds,</div>
<div class="line"><span class="lineno"> 1528</span>    )</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>    isFullInstance = {</div>
<div class="line"><span class="lineno"> 1531</span>        axisTag <span class="keywordflow">for</span> axisTag, limit <span class="keywordflow">in</span> axisLimits.items() <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(limit, tuple)</div>
<div class="line"><span class="lineno"> 1532</span>    }.issuperset(axis.axisTag <span class="keywordflow">for</span> axis <span class="keywordflow">in</span> varfont[<span class="stringliteral">&quot;fvar&quot;</span>].axes)</div>
<div class="line"><span class="lineno"> 1533</span> </div>
<div class="line"><span class="lineno"> 1534</span>    instantiateVariableFont(</div>
<div class="line"><span class="lineno"> 1535</span>        varfont,</div>
<div class="line"><span class="lineno"> 1536</span>        axisLimits,</div>
<div class="line"><span class="lineno"> 1537</span>        inplace=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1538</span>        optimize=options.optimize,</div>
<div class="line"><span class="lineno"> 1539</span>        overlap=options.overlap,</div>
<div class="line"><span class="lineno"> 1540</span>        updateFontNames=options.update_name_table,</div>
<div class="line"><span class="lineno"> 1541</span>    )</div>
<div class="line"><span class="lineno"> 1542</span> </div>
<div class="line"><span class="lineno"> 1543</span>    suffix = <span class="stringliteral">&quot;-instance&quot;</span> <span class="keywordflow">if</span> isFullInstance <span class="keywordflow">else</span> <span class="stringliteral">&quot;-partial&quot;</span></div>
<div class="line"><span class="lineno"> 1544</span>    outfile = (</div>
<div class="line"><span class="lineno"> 1545</span>        makeOutputFileName(infile, overWrite=<span class="keyword">True</span>, suffix=suffix)</div>
<div class="line"><span class="lineno"> 1546</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> options.output</div>
<div class="line"><span class="lineno"> 1547</span>        <span class="keywordflow">else</span> options.output</div>
<div class="line"><span class="lineno"> 1548</span>    )</div>
<div class="line"><span class="lineno"> 1549</span> </div>
<div class="line"><span class="lineno"> 1550</span>    log.info(</div>
<div class="line"><span class="lineno"> 1551</span>        <span class="stringliteral">&quot;Saving %s font %s&quot;</span>,</div>
<div class="line"><span class="lineno"> 1552</span>        <span class="stringliteral">&quot;instance&quot;</span> <span class="keywordflow">if</span> isFullInstance <span class="keywordflow">else</span> <span class="stringliteral">&quot;partial variable&quot;</span>,</div>
<div class="line"><span class="lineno"> 1553</span>        outfile,</div>
<div class="line"><span class="lineno"> 1554</span>    )</div>
<div class="line"><span class="lineno"> 1555</span>    varfont.save(outfile)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8c4f6c67775641ab1529fd4c431a4c0" name="ab8c4f6c67775641ab1529fd4c431a4c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8c4f6c67775641ab1529fd4c431a4c0">&#9670;&#160;</a></span>normalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.normalize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>triple</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>avarMapping</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1200</span><span class="keyword">def </span>normalize(value, triple, avarMapping):</div>
<div class="line"><span class="lineno"> 1201</span>    value = normalizeValue(value, triple)</div>
<div class="line"><span class="lineno"> 1202</span>    <span class="keywordflow">if</span> avarMapping:</div>
<div class="line"><span class="lineno"> 1203</span>        value = piecewiseLinearMap(value, avarMapping)</div>
<div class="line"><span class="lineno"> 1204</span>    <span class="comment"># Quantize to F2Dot14, to avoid surprise interpolations.</span></div>
<div class="line"><span class="lineno"> 1205</span>    <span class="keywordflow">return</span> floatToFixedToFloat(value, 14)</div>
<div class="line"><span class="lineno"> 1206</span> </div>
<div class="line"><span class="lineno"> 1207</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a87e5207e9b80be29dcf5b69c50402357" name="a87e5207e9b80be29dcf5b69c50402357"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87e5207e9b80be29dcf5b69c50402357">&#9670;&#160;</a></span>NormalizedAxisRange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.NormalizedAxisRange </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>minimum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>maximum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  128</span><span class="keyword">def </span>NormalizedAxisRange(minimum, maximum):</div>
<div class="line"><span class="lineno">  129</span>    warnings.warn(</div>
<div class="line"><span class="lineno">  130</span>        <span class="stringliteral">&quot;NormalizedAxisRange is deprecated; use AxisTriple instead&quot;</span>,</div>
<div class="line"><span class="lineno">  131</span>        DeprecationWarning,</div>
<div class="line"><span class="lineno">  132</span>        stacklevel=2,</div>
<div class="line"><span class="lineno">  133</span>    )</div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">return</span> NormalizedAxisTriple(minimum, <span class="keywordtype">None</span>, maximum)</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span><span class="preprocessor">@dataclasses.dataclass(frozen=True, order=True, repr=False)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af05e404cba12147603e6f1ab0d0fadc2" name="af05e404cba12147603e6f1ab0d0fadc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af05e404cba12147603e6f1ab0d0fadc2">&#9670;&#160;</a></span>parseArgs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.parseArgs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse argv.

Returns:
    3-tuple (infile, axisLimits, options)
    axisLimits is either a Dict[str, Optional[float]], for pinning variation axes
    to specific coordinates along those axes (with `None` as a placeholder for an
    axis' default value); or a Dict[str, Tuple(float, float)], meaning limit this
    axis to min/max range.
    Axes locations are in user-space coordinates, as defined in the "fvar" table.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1403</span><span class="keyword">def </span>parseArgs(args):</div>
<div class="line"><span class="lineno"> 1404</span>    <span class="stringliteral">&quot;&quot;&quot;Parse argv.</span></div>
<div class="line"><span class="lineno"> 1405</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1406</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno"> 1407</span><span class="stringliteral">        3-tuple (infile, axisLimits, options)</span></div>
<div class="line"><span class="lineno"> 1408</span><span class="stringliteral">        axisLimits is either a Dict[str, Optional[float]], for pinning variation axes</span></div>
<div class="line"><span class="lineno"> 1409</span><span class="stringliteral">        to specific coordinates along those axes (with `None` as a placeholder for an</span></div>
<div class="line"><span class="lineno"> 1410</span><span class="stringliteral">        axis&#39; default value); or a Dict[str, Tuple(float, float)], meaning limit this</span></div>
<div class="line"><span class="lineno"> 1411</span><span class="stringliteral">        axis to min/max range.</span></div>
<div class="line"><span class="lineno"> 1412</span><span class="stringliteral">        Axes locations are in user-space coordinates, as defined in the &quot;fvar&quot; table.</span></div>
<div class="line"><span class="lineno"> 1413</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1414</span>    <span class="keyword">from</span> fontTools <span class="keyword">import</span> configLogger</div>
<div class="line"><span class="lineno"> 1415</span>    <span class="keyword">import</span> argparse</div>
<div class="line"><span class="lineno"> 1416</span> </div>
<div class="line"><span class="lineno"> 1417</span>    parser = argparse.ArgumentParser(</div>
<div class="line"><span class="lineno"> 1418</span>        <span class="stringliteral">&quot;fonttools varLib.instancer&quot;</span>,</div>
<div class="line"><span class="lineno"> 1419</span>        description=<span class="stringliteral">&quot;Partially instantiate a variable font&quot;</span>,</div>
<div class="line"><span class="lineno"> 1420</span>    )</div>
<div class="line"><span class="lineno"> 1421</span>    parser.add_argument(<span class="stringliteral">&quot;input&quot;</span>, metavar=<span class="stringliteral">&quot;INPUT.ttf&quot;</span>, help=<span class="stringliteral">&quot;Input variable TTF file.&quot;</span>)</div>
<div class="line"><span class="lineno"> 1422</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1423</span>        <span class="stringliteral">&quot;locargs&quot;</span>,</div>
<div class="line"><span class="lineno"> 1424</span>        metavar=<span class="stringliteral">&quot;AXIS=LOC&quot;</span>,</div>
<div class="line"><span class="lineno"> 1425</span>        nargs=<span class="stringliteral">&quot;*&quot;</span>,</div>
<div class="line"><span class="lineno"> 1426</span>        help=<span class="stringliteral">&quot;List of space separated locations. A location consists of &quot;</span></div>
<div class="line"><span class="lineno"> 1427</span>        <span class="stringliteral">&quot;the tag of a variation axis, followed by &#39;=&#39; and one of number, &quot;</span></div>
<div class="line"><span class="lineno"> 1428</span>        <span class="stringliteral">&quot;number:number or the literal string &#39;drop&#39;. &quot;</span></div>
<div class="line"><span class="lineno"> 1429</span>        <span class="stringliteral">&quot;E.g.: wdth=100 or wght=75.0:125.0 or wght=drop&quot;</span>,</div>
<div class="line"><span class="lineno"> 1430</span>    )</div>
<div class="line"><span class="lineno"> 1431</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1432</span>        <span class="stringliteral">&quot;-o&quot;</span>,</div>
<div class="line"><span class="lineno"> 1433</span>        <span class="stringliteral">&quot;--output&quot;</span>,</div>
<div class="line"><span class="lineno"> 1434</span>        metavar=<span class="stringliteral">&quot;OUTPUT.ttf&quot;</span>,</div>
<div class="line"><span class="lineno"> 1435</span>        default=<span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 1436</span>        help=<span class="stringliteral">&quot;Output instance TTF file (default: INPUT-instance.ttf).&quot;</span>,</div>
<div class="line"><span class="lineno"> 1437</span>    )</div>
<div class="line"><span class="lineno"> 1438</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1439</span>        <span class="stringliteral">&quot;--no-optimize&quot;</span>,</div>
<div class="line"><span class="lineno"> 1440</span>        dest=<span class="stringliteral">&quot;optimize&quot;</span>,</div>
<div class="line"><span class="lineno"> 1441</span>        action=<span class="stringliteral">&quot;store_false&quot;</span>,</div>
<div class="line"><span class="lineno"> 1442</span>        help=<span class="stringliteral">&quot;Don&#39;t perform IUP optimization on the remaining gvar TupleVariations&quot;</span>,</div>
<div class="line"><span class="lineno"> 1443</span>    )</div>
<div class="line"><span class="lineno"> 1444</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1445</span>        <span class="stringliteral">&quot;--no-overlap-flag&quot;</span>,</div>
<div class="line"><span class="lineno"> 1446</span>        dest=<span class="stringliteral">&quot;overlap&quot;</span>,</div>
<div class="line"><span class="lineno"> 1447</span>        action=<span class="stringliteral">&quot;store_false&quot;</span>,</div>
<div class="line"><span class="lineno"> 1448</span>        help=<span class="stringliteral">&quot;Don&#39;t set OVERLAP_SIMPLE/OVERLAP_COMPOUND glyf flags (only applicable &quot;</span></div>
<div class="line"><span class="lineno"> 1449</span>        <span class="stringliteral">&quot;when generating a full instance)&quot;</span>,</div>
<div class="line"><span class="lineno"> 1450</span>    )</div>
<div class="line"><span class="lineno"> 1451</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1452</span>        <span class="stringliteral">&quot;--remove-overlaps&quot;</span>,</div>
<div class="line"><span class="lineno"> 1453</span>        dest=<span class="stringliteral">&quot;remove_overlaps&quot;</span>,</div>
<div class="line"><span class="lineno"> 1454</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno"> 1455</span>        help=<span class="stringliteral">&quot;Merge overlapping contours and components (only applicable &quot;</span></div>
<div class="line"><span class="lineno"> 1456</span>        <span class="stringliteral">&quot;when generating a full instance). Requires skia-pathops&quot;</span>,</div>
<div class="line"><span class="lineno"> 1457</span>    )</div>
<div class="line"><span class="lineno"> 1458</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1459</span>        <span class="stringliteral">&quot;--ignore-overlap-errors&quot;</span>,</div>
<div class="line"><span class="lineno"> 1460</span>        dest=<span class="stringliteral">&quot;ignore_overlap_errors&quot;</span>,</div>
<div class="line"><span class="lineno"> 1461</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno"> 1462</span>        help=<span class="stringliteral">&quot;Don&#39;t crash if the remove-overlaps operation fails for some glyphs.&quot;</span>,</div>
<div class="line"><span class="lineno"> 1463</span>    )</div>
<div class="line"><span class="lineno"> 1464</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1465</span>        <span class="stringliteral">&quot;--update-name-table&quot;</span>,</div>
<div class="line"><span class="lineno"> 1466</span>        action=<span class="stringliteral">&quot;store_true&quot;</span>,</div>
<div class="line"><span class="lineno"> 1467</span>        help=<span class="stringliteral">&quot;Update the instantiated font&#39;s `name` table. Input font must have &quot;</span></div>
<div class="line"><span class="lineno"> 1468</span>        <span class="stringliteral">&quot;a STAT table with Axis Value Tables&quot;</span>,</div>
<div class="line"><span class="lineno"> 1469</span>    )</div>
<div class="line"><span class="lineno"> 1470</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1471</span>        <span class="stringliteral">&quot;--no-recalc-timestamp&quot;</span>,</div>
<div class="line"><span class="lineno"> 1472</span>        dest=<span class="stringliteral">&quot;recalc_timestamp&quot;</span>,</div>
<div class="line"><span class="lineno"> 1473</span>        action=<span class="stringliteral">&quot;store_false&quot;</span>,</div>
<div class="line"><span class="lineno"> 1474</span>        help=<span class="stringliteral">&quot;Don&#39;t set the output font&#39;s timestamp to the current time.&quot;</span>,</div>
<div class="line"><span class="lineno"> 1475</span>    )</div>
<div class="line"><span class="lineno"> 1476</span>    parser.add_argument(</div>
<div class="line"><span class="lineno"> 1477</span>        <span class="stringliteral">&quot;--no-recalc-bounds&quot;</span>,</div>
<div class="line"><span class="lineno"> 1478</span>        dest=<span class="stringliteral">&quot;recalc_bounds&quot;</span>,</div>
<div class="line"><span class="lineno"> 1479</span>        action=<span class="stringliteral">&quot;store_false&quot;</span>,</div>
<div class="line"><span class="lineno"> 1480</span>        help=<span class="stringliteral">&quot;Don&#39;t recalculate font bounding boxes&quot;</span>,</div>
<div class="line"><span class="lineno"> 1481</span>    )</div>
<div class="line"><span class="lineno"> 1482</span>    loggingGroup = parser.add_mutually_exclusive_group(required=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1483</span>    loggingGroup.add_argument(</div>
<div class="line"><span class="lineno"> 1484</span>        <span class="stringliteral">&quot;-v&quot;</span>, <span class="stringliteral">&quot;--verbose&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>, help=<span class="stringliteral">&quot;Run more verbosely.&quot;</span></div>
<div class="line"><span class="lineno"> 1485</span>    )</div>
<div class="line"><span class="lineno"> 1486</span>    loggingGroup.add_argument(</div>
<div class="line"><span class="lineno"> 1487</span>        <span class="stringliteral">&quot;-q&quot;</span>, <span class="stringliteral">&quot;--quiet&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>, help=<span class="stringliteral">&quot;Turn verbosity off.&quot;</span></div>
<div class="line"><span class="lineno"> 1488</span>    )</div>
<div class="line"><span class="lineno"> 1489</span>    options = parser.parse_args(args)</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>    <span class="keywordflow">if</span> options.remove_overlaps:</div>
<div class="line"><span class="lineno"> 1492</span>        <span class="keywordflow">if</span> options.ignore_overlap_errors:</div>
<div class="line"><span class="lineno"> 1493</span>            options.overlap = OverlapMode.REMOVE_AND_IGNORE_ERRORS</div>
<div class="line"><span class="lineno"> 1494</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1495</span>            options.overlap = OverlapMode.REMOVE</div>
<div class="line"><span class="lineno"> 1496</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1497</span>        options.overlap = OverlapMode(int(options.overlap))</div>
<div class="line"><span class="lineno"> 1498</span> </div>
<div class="line"><span class="lineno"> 1499</span>    infile = options.input</div>
<div class="line"><span class="lineno"> 1500</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isfile(infile):</div>
<div class="line"><span class="lineno"> 1501</span>        parser.error(<span class="stringliteral">&quot;No such file &#39;{}&#39;&quot;</span>.format(infile))</div>
<div class="line"><span class="lineno"> 1502</span> </div>
<div class="line"><span class="lineno"> 1503</span>    configLogger(</div>
<div class="line"><span class="lineno"> 1504</span>        level=(<span class="stringliteral">&quot;DEBUG&quot;</span> <span class="keywordflow">if</span> options.verbose <span class="keywordflow">else</span> <span class="stringliteral">&quot;ERROR&quot;</span> <span class="keywordflow">if</span> options.quiet <span class="keywordflow">else</span> <span class="stringliteral">&quot;INFO&quot;</span>)</div>
<div class="line"><span class="lineno"> 1505</span>    )</div>
<div class="line"><span class="lineno"> 1506</span> </div>
<div class="line"><span class="lineno"> 1507</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1508</span>        axisLimits = parseLimits(options.locargs)</div>
<div class="line"><span class="lineno"> 1509</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno"> 1510</span>        parser.error(str(e))</div>
<div class="line"><span class="lineno"> 1511</span> </div>
<div class="line"><span class="lineno"> 1512</span>    <span class="keywordflow">if</span> len(axisLimits) != len(options.locargs):</div>
<div class="line"><span class="lineno"> 1513</span>        parser.error(<span class="stringliteral">&quot;Specified multiple limits for the same axis&quot;</span>)</div>
<div class="line"><span class="lineno"> 1514</span> </div>
<div class="line"><span class="lineno"> 1515</span>    <span class="keywordflow">return</span> (infile, axisLimits, options)</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aae4f6302b04d44f8e5ddce5fac702803" name="aae4f6302b04d44f8e5ddce5fac702803"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae4f6302b04d44f8e5ddce5fac702803">&#9670;&#160;</a></span>parseLimits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Dict[str, Optional[<a class="el" href="classfont_tools_1_1var_lib_1_1instancer_1_1_axis_triple.html">AxisTriple</a>]] fontTools.varLib.instancer.parseLimits </td>
          <td>(</td>
          <td class="paramtype">Iterable[str]&#160;</td>
          <td class="paramname"><em>limits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1372</span><span class="keyword">def </span>parseLimits(limits: Iterable[str]) -&gt; Dict[str, Optional[AxisTriple]]:</div>
<div class="line"><span class="lineno"> 1373</span>    result = {}</div>
<div class="line"><span class="lineno"> 1374</span>    <span class="keywordflow">for</span> limitString <span class="keywordflow">in</span> limits:</div>
<div class="line"><span class="lineno"> 1375</span>        match = re.match(</div>
<div class="line"><span class="lineno"> 1376</span>            <span class="stringliteral">r&quot;^(\w{1,4})=(?:(drop)|(?:([^:]+)(?:[:]([^:]+))?(?:[:]([^:]+))?))$&quot;</span>,</div>
<div class="line"><span class="lineno"> 1377</span>            limitString,</div>
<div class="line"><span class="lineno"> 1378</span>        )</div>
<div class="line"><span class="lineno"> 1379</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> match:</div>
<div class="line"><span class="lineno"> 1380</span>            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;invalid location format: %r&quot;</span> % limitString)</div>
<div class="line"><span class="lineno"> 1381</span>        tag = match.group(1).ljust(4)</div>
<div class="line"><span class="lineno"> 1382</span>        <span class="keywordflow">if</span> match.group(2):  <span class="comment"># &#39;drop&#39;</span></div>
<div class="line"><span class="lineno"> 1383</span>            lbound = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1384</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1385</span>            lbound = strToFixedToFloat(match.group(3), precisionBits=16)</div>
<div class="line"><span class="lineno"> 1386</span>        ubound = default = lbound</div>
<div class="line"><span class="lineno"> 1387</span>        <span class="keywordflow">if</span> match.group(4):</div>
<div class="line"><span class="lineno"> 1388</span>            ubound = default = strToFixedToFloat(match.group(4), precisionBits=16)</div>
<div class="line"><span class="lineno"> 1389</span>            default = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1390</span>        <span class="keywordflow">if</span> match.group(5):</div>
<div class="line"><span class="lineno"> 1391</span>            default = ubound</div>
<div class="line"><span class="lineno"> 1392</span>            ubound = strToFixedToFloat(match.group(5), precisionBits=16)</div>
<div class="line"><span class="lineno"> 1393</span> </div>
<div class="line"><span class="lineno"> 1394</span>        <span class="keywordflow">if</span> all(v <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">for</span> v <span class="keywordflow">in</span> (lbound, default, ubound)):</div>
<div class="line"><span class="lineno"> 1395</span>            result[tag] = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1396</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>        result[tag] = AxisTriple(lbound, default, ubound)</div>
<div class="line"><span class="lineno"> 1399</span> </div>
<div class="line"><span class="lineno"> 1400</span>    <span class="keywordflow">return</span> result</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3aa09e04f6cd4dc73b7e7cd14e786bbf" name="a3aa09e04f6cd4dc73b7e7cd14e786bbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aa09e04f6cd4dc73b7e7cd14e786bbf">&#9670;&#160;</a></span>sanityCheckVariableTables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.sanityCheckVariableTables </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1208</span><span class="keyword">def </span>sanityCheckVariableTables(varfont):</div>
<div class="line"><span class="lineno"> 1209</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;fvar&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1210</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Missing required table fvar&quot;</span>)</div>
<div class="line"><span class="lineno"> 1211</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;gvar&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1212</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;glyf&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1213</span>            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Can&#39;t have gvar without glyf&quot;</span>)</div>
<div class="line"><span class="lineno"> 1214</span>    <span class="comment"># TODO(anthrotype) Remove once we do support partial instancing CFF2</span></div>
<div class="line"><span class="lineno"> 1215</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;CFF2&quot;</span> <span class="keywordflow">in</span> varfont:</div>
<div class="line"><span class="lineno"> 1216</span>        <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&quot;Instancing CFF2 variable fonts is not supported yet&quot;</span>)</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a186d65a18862e2f4b78fc3eda0ec2201" name="a186d65a18862e2f4b78fc3eda0ec2201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a186d65a18862e2f4b78fc3eda0ec2201">&#9670;&#160;</a></span>setCvarDeltas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.setCvarDeltas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deltas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  547</span><span class="keyword">def </span>setCvarDeltas(cvt, deltas):</div>
<div class="line"><span class="lineno">  548</span>    <span class="keywordflow">for</span> i, delta <span class="keywordflow">in</span> enumerate(deltas):</div>
<div class="line"><span class="lineno">  549</span>        <span class="keywordflow">if</span> delta:</div>
<div class="line"><span class="lineno">  550</span>            cvt[i] += otRound(delta)</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e956e37d6348d6406a9fd3f8258ba38" name="a5e956e37d6348d6406a9fd3f8258ba38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e956e37d6348d6406a9fd3f8258ba38">&#9670;&#160;</a></span>setMacOverlapFlags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.setMacOverlapFlags </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>glyfTable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1187</span><span class="keyword">def </span>setMacOverlapFlags(glyfTable):</div>
<div class="line"><span class="lineno"> 1188</span>    flagOverlapCompound = _g_l_y_f.OVERLAP_COMPOUND</div>
<div class="line"><span class="lineno"> 1189</span>    flagOverlapSimple = _g_l_y_f.flagOverlapSimple</div>
<div class="line"><span class="lineno"> 1190</span>    <span class="keywordflow">for</span> glyphName <span class="keywordflow">in</span> glyfTable.keys():</div>
<div class="line"><span class="lineno"> 1191</span>        glyph = glyfTable[glyphName]</div>
<div class="line"><span class="lineno"> 1192</span>        <span class="comment"># Set OVERLAP_COMPOUND bit for compound glyphs</span></div>
<div class="line"><span class="lineno"> 1193</span>        <span class="keywordflow">if</span> glyph.isComposite():</div>
<div class="line"><span class="lineno"> 1194</span>            glyph.components[0].flags |= flagOverlapCompound</div>
<div class="line"><span class="lineno"> 1195</span>        <span class="comment"># Set OVERLAP_SIMPLE bit for simple glyphs</span></div>
<div class="line"><span class="lineno"> 1196</span>        <span class="keywordflow">elif</span> glyph.numberOfContours &gt; 0:</div>
<div class="line"><span class="lineno"> 1197</span>            glyph.flags[0] |= flagOverlapSimple</div>
<div class="line"><span class="lineno"> 1198</span> </div>
<div class="line"><span class="lineno"> 1199</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af186a2dbaced327261346c1167c1a1ad" name="af186a2dbaced327261346c1167c1a1ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af186a2dbaced327261346c1167c1a1ad">&#9670;&#160;</a></span>setMvarDeltas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.setMvarDeltas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>varfont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deltas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  567</span><span class="keyword">def </span>setMvarDeltas(varfont, deltas):</div>
<div class="line"><span class="lineno">  568</span>    mvar = varfont[<span class="stringliteral">&quot;MVAR&quot;</span>].table</div>
<div class="line"><span class="lineno">  569</span>    records = mvar.ValueRecord</div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">for</span> rec <span class="keywordflow">in</span> records:</div>
<div class="line"><span class="lineno">  571</span>        mvarTag = rec.ValueTag</div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordflow">if</span> mvarTag <span class="keywordflow">not</span> <span class="keywordflow">in</span> MVAR_ENTRIES:</div>
<div class="line"><span class="lineno">  573</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  574</span>        tableTag, itemName = MVAR_ENTRIES[mvarTag]</div>
<div class="line"><span class="lineno">  575</span>        delta = deltas[rec.VarIdx]</div>
<div class="line"><span class="lineno">  576</span>        <span class="keywordflow">if</span> delta != 0:</div>
<div class="line"><span class="lineno">  577</span>            setattr(</div>
<div class="line"><span class="lineno">  578</span>                varfont[tableTag],</div>
<div class="line"><span class="lineno">  579</span>                itemName,</div>
<div class="line"><span class="lineno">  580</span>                getattr(varfont[tableTag], itemName) + otRound(delta),</div>
<div class="line"><span class="lineno">  581</span>            )</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab24db695b7da29e7631f4d5bc5349dd5" name="ab24db695b7da29e7631f4d5bc5349dd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24db695b7da29e7631f4d5bc5349dd5">&#9670;&#160;</a></span>setRibbiBits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.setRibbiBits </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>font</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set the `head.macStyle` and `OS/2.fsSelection` style bits
appropriately.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1335</span><span class="keyword">def </span>setRibbiBits(font):</div>
<div class="line"><span class="lineno"> 1336</span>    <span class="stringliteral">&quot;&quot;&quot;Set the `head.macStyle` and `OS/2.fsSelection` style bits</span></div>
<div class="line"><span class="lineno"> 1337</span><span class="stringliteral">    appropriately.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1338</span> </div>
<div class="line"><span class="lineno"> 1339</span>    english_ribbi_style = font[<span class="stringliteral">&quot;name&quot;</span>].getName(names.NameID.SUBFAMILY_NAME, 3, 1, 0x409)</div>
<div class="line"><span class="lineno"> 1340</span>    <span class="keywordflow">if</span> english_ribbi_style <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1341</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1342</span> </div>
<div class="line"><span class="lineno"> 1343</span>    styleMapStyleName = english_ribbi_style.toStr().lower()</div>
<div class="line"><span class="lineno"> 1344</span>    <span class="keywordflow">if</span> styleMapStyleName <span class="keywordflow">not</span> <span class="keywordflow">in</span> {<span class="stringliteral">&quot;regular&quot;</span>, <span class="stringliteral">&quot;bold&quot;</span>, <span class="stringliteral">&quot;italic&quot;</span>, <span class="stringliteral">&quot;bold italic&quot;</span>}:</div>
<div class="line"><span class="lineno"> 1345</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1346</span> </div>
<div class="line"><span class="lineno"> 1347</span>    <span class="keywordflow">if</span> styleMapStyleName == <span class="stringliteral">&quot;bold&quot;</span>:</div>
<div class="line"><span class="lineno"> 1348</span>        font[<span class="stringliteral">&quot;head&quot;</span>].macStyle = 0b01</div>
<div class="line"><span class="lineno"> 1349</span>    <span class="keywordflow">elif</span> styleMapStyleName == <span class="stringliteral">&quot;bold italic&quot;</span>:</div>
<div class="line"><span class="lineno"> 1350</span>        font[<span class="stringliteral">&quot;head&quot;</span>].macStyle = 0b11</div>
<div class="line"><span class="lineno"> 1351</span>    <span class="keywordflow">elif</span> styleMapStyleName == <span class="stringliteral">&quot;italic&quot;</span>:</div>
<div class="line"><span class="lineno"> 1352</span>        font[<span class="stringliteral">&quot;head&quot;</span>].macStyle = 0b10</div>
<div class="line"><span class="lineno"> 1353</span> </div>
<div class="line"><span class="lineno"> 1354</span>    selection = font[<span class="stringliteral">&quot;OS/2&quot;</span>].fsSelection</div>
<div class="line"><span class="lineno"> 1355</span>    <span class="comment"># First clear...</span></div>
<div class="line"><span class="lineno"> 1356</span>    selection &amp;= ~(1 &lt;&lt; 0)</div>
<div class="line"><span class="lineno"> 1357</span>    selection &amp;= ~(1 &lt;&lt; 5)</div>
<div class="line"><span class="lineno"> 1358</span>    selection &amp;= ~(1 &lt;&lt; 6)</div>
<div class="line"><span class="lineno"> 1359</span>    <span class="comment"># ...then re-set the bits.</span></div>
<div class="line"><span class="lineno"> 1360</span>    <span class="keywordflow">if</span> styleMapStyleName == <span class="stringliteral">&quot;regular&quot;</span>:</div>
<div class="line"><span class="lineno"> 1361</span>        selection |= 1 &lt;&lt; 6</div>
<div class="line"><span class="lineno"> 1362</span>    <span class="keywordflow">elif</span> styleMapStyleName == <span class="stringliteral">&quot;bold&quot;</span>:</div>
<div class="line"><span class="lineno"> 1363</span>        selection |= 1 &lt;&lt; 5</div>
<div class="line"><span class="lineno"> 1364</span>    <span class="keywordflow">elif</span> styleMapStyleName == <span class="stringliteral">&quot;italic&quot;</span>:</div>
<div class="line"><span class="lineno"> 1365</span>        selection |= 1 &lt;&lt; 0</div>
<div class="line"><span class="lineno"> 1366</span>    <span class="keywordflow">elif</span> styleMapStyleName == <span class="stringliteral">&quot;bold italic&quot;</span>:</div>
<div class="line"><span class="lineno"> 1367</span>        selection |= 1 &lt;&lt; 0</div>
<div class="line"><span class="lineno"> 1368</span>        selection |= 1 &lt;&lt; 5</div>
<div class="line"><span class="lineno"> 1369</span>    font[<span class="stringliteral">&quot;OS/2&quot;</span>].fsSelection = selection</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aead81fe7e1dc6934593006eedff30198" name="aead81fe7e1dc6934593006eedff30198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead81fe7e1dc6934593006eedff30198">&#9670;&#160;</a></span>log</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.varLib.instancer.log = logging.getLogger(&quot;fontTools.varLib.instancer&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
