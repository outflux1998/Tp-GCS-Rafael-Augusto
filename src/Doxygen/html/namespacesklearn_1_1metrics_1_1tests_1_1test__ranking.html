<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.metrics.tests.test_ranking Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics.html">metrics</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html">test_ranking</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sklearn.metrics.tests.test_ranking Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adfb997de46c277232caeadffcbaa0cee" id="r_adfb997de46c277232caeadffcbaa0cee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#adfb997de46c277232caeadffcbaa0cee">make_prediction</a> (dataset=None, binary=False)</td></tr>
<tr class="separator:adfb997de46c277232caeadffcbaa0cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50fdd30a66c707f04bafcfd8a7437a34" id="r_a50fdd30a66c707f04bafcfd8a7437a34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a50fdd30a66c707f04bafcfd8a7437a34">_auc</a> (y_true, y_score)</td></tr>
<tr class="memdesc:a50fdd30a66c707f04bafcfd8a7437a34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests.  <br /></td></tr>
<tr class="separator:a50fdd30a66c707f04bafcfd8a7437a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5626d89895d3938c772298f34d1e93d" id="r_ad5626d89895d3938c772298f34d1e93d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ad5626d89895d3938c772298f34d1e93d">_average_precision</a> (y_true, y_score)</td></tr>
<tr class="separator:ad5626d89895d3938c772298f34d1e93d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3f4a2033278c45123fe99dd2e0f585" id="r_aac3f4a2033278c45123fe99dd2e0f585"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aac3f4a2033278c45123fe99dd2e0f585">_average_precision_slow</a> (y_true, y_score)</td></tr>
<tr class="separator:aac3f4a2033278c45123fe99dd2e0f585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae292f83b17c46c2780ef3507701b18a4" id="r_ae292f83b17c46c2780ef3507701b18a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ae292f83b17c46c2780ef3507701b18a4">_partial_roc_auc_score</a> (y_true, y_predict, max_fpr)</td></tr>
<tr class="separator:ae292f83b17c46c2780ef3507701b18a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b90e2e5691925aa1b08a183c1a8b7d9" id="r_a1b90e2e5691925aa1b08a183c1a8b7d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a1b90e2e5691925aa1b08a183c1a8b7d9">test_roc_curve</a> (drop)</td></tr>
<tr class="separator:a1b90e2e5691925aa1b08a183c1a8b7d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabfcf868157cb5ae41628084a3f80caa" id="r_aabfcf868157cb5ae41628084a3f80caa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aabfcf868157cb5ae41628084a3f80caa">test_roc_curve_end_points</a> ()</td></tr>
<tr class="separator:aabfcf868157cb5ae41628084a3f80caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af0e486b09c5c3fc9fb5287101563b3" id="r_a2af0e486b09c5c3fc9fb5287101563b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a2af0e486b09c5c3fc9fb5287101563b3">test_roc_returns_consistency</a> ()</td></tr>
<tr class="separator:a2af0e486b09c5c3fc9fb5287101563b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f43479ceea0463db8d05220fa0e1adc" id="r_a8f43479ceea0463db8d05220fa0e1adc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a8f43479ceea0463db8d05220fa0e1adc">test_roc_curve_multi</a> ()</td></tr>
<tr class="separator:a8f43479ceea0463db8d05220fa0e1adc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8770697fc2573537697e8d0a17e7d93e" id="r_a8770697fc2573537697e8d0a17e7d93e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a8770697fc2573537697e8d0a17e7d93e">test_roc_curve_confidence</a> ()</td></tr>
<tr class="separator:a8770697fc2573537697e8d0a17e7d93e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a64356c39c5210277b0f6075acadda2" id="r_a8a64356c39c5210277b0f6075acadda2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a8a64356c39c5210277b0f6075acadda2">test_roc_curve_hard</a> ()</td></tr>
<tr class="separator:a8a64356c39c5210277b0f6075acadda2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0515ab4661340ae4d5d78d2fc7d6947d" id="r_a0515ab4661340ae4d5d78d2fc7d6947d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a0515ab4661340ae4d5d78d2fc7d6947d">test_roc_curve_one_label</a> ()</td></tr>
<tr class="separator:a0515ab4661340ae4d5d78d2fc7d6947d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13abdd16a870b9946aea78c96fd514a0" id="r_a13abdd16a870b9946aea78c96fd514a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a13abdd16a870b9946aea78c96fd514a0">test_roc_curve_toydata</a> ()</td></tr>
<tr class="separator:a13abdd16a870b9946aea78c96fd514a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bdf888e96199aeaf8434e7d2e1e1e27" id="r_a4bdf888e96199aeaf8434e7d2e1e1e27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a4bdf888e96199aeaf8434e7d2e1e1e27">test_roc_curve_drop_intermediate</a> ()</td></tr>
<tr class="separator:a4bdf888e96199aeaf8434e7d2e1e1e27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1bb0a3801e18aac65203c875d3207a4" id="r_aa1bb0a3801e18aac65203c875d3207a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aa1bb0a3801e18aac65203c875d3207a4">test_roc_curve_fpr_tpr_increasing</a> ()</td></tr>
<tr class="separator:aa1bb0a3801e18aac65203c875d3207a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e08c47776de6aa2c7bcf1e3eeba3b87" id="r_a7e08c47776de6aa2c7bcf1e3eeba3b87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a7e08c47776de6aa2c7bcf1e3eeba3b87">test_auc</a> ()</td></tr>
<tr class="separator:a7e08c47776de6aa2c7bcf1e3eeba3b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b90b77bdf9833408e01498b591313d" id="r_a78b90b77bdf9833408e01498b591313d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a78b90b77bdf9833408e01498b591313d">test_auc_errors</a> ()</td></tr>
<tr class="separator:a78b90b77bdf9833408e01498b591313d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f04a0f318eefa49a105bc9037a65a99" id="r_a4f04a0f318eefa49a105bc9037a65a99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a4f04a0f318eefa49a105bc9037a65a99">test_multiclass_ovo_roc_auc_toydata</a> (y_true, labels)</td></tr>
<tr class="separator:a4f04a0f318eefa49a105bc9037a65a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726be6c7822363bb1f5adee72a327ba5" id="r_a726be6c7822363bb1f5adee72a327ba5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a726be6c7822363bb1f5adee72a327ba5">test_multiclass_ovo_roc_auc_toydata_binary</a> (y_true, labels)</td></tr>
<tr class="separator:a726be6c7822363bb1f5adee72a327ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3868feb7f886acea6160704a1423d8c" id="r_ae3868feb7f886acea6160704a1423d8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ae3868feb7f886acea6160704a1423d8c">test_multiclass_ovr_roc_auc_toydata</a> (y_true, labels)</td></tr>
<tr class="separator:ae3868feb7f886acea6160704a1423d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6a439ff839f4357680e5cc52527134" id="r_acd6a439ff839f4357680e5cc52527134"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#acd6a439ff839f4357680e5cc52527134">test_perfect_imperfect_chance_multiclass_roc_auc</a> (multi_class, average)</td></tr>
<tr class="separator:acd6a439ff839f4357680e5cc52527134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc63b97b99ef41607f7e03f86bb6794e" id="r_afc63b97b99ef41607f7e03f86bb6794e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#afc63b97b99ef41607f7e03f86bb6794e">test_micro_averaged_ovr_roc_auc</a> (global_random_seed)</td></tr>
<tr class="separator:afc63b97b99ef41607f7e03f86bb6794e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad235262bae113c1a62693201312037" id="r_aaad235262bae113c1a62693201312037"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aaad235262bae113c1a62693201312037">test_roc_auc_score_multiclass_labels_error</a> (msg, y_true, labels, multi_class)</td></tr>
<tr class="separator:aaad235262bae113c1a62693201312037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4cc7ac192351efe7fdfe8e9dd4f21dd" id="r_ae4cc7ac192351efe7fdfe8e9dd4f21dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ae4cc7ac192351efe7fdfe8e9dd4f21dd">test_roc_auc_score_multiclass_error</a> (msg, kwargs)</td></tr>
<tr class="separator:ae4cc7ac192351efe7fdfe8e9dd4f21dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18944cd44599a4e6c638fce56a730579" id="r_a18944cd44599a4e6c638fce56a730579"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a18944cd44599a4e6c638fce56a730579">test_auc_score_non_binary_class</a> ()</td></tr>
<tr class="separator:a18944cd44599a4e6c638fce56a730579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434c4aaa3e20ffe022eae8bb2ccc49b3" id="r_a434c4aaa3e20ffe022eae8bb2ccc49b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a434c4aaa3e20ffe022eae8bb2ccc49b3">test_binary_clf_curve_multiclass_error</a> (curve_func)</td></tr>
<tr class="separator:a434c4aaa3e20ffe022eae8bb2ccc49b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa2baf6036eae335a39226ca5416d397" id="r_afa2baf6036eae335a39226ca5416d397"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#afa2baf6036eae335a39226ca5416d397">test_binary_clf_curve_implicit_pos_label</a> (curve_func)</td></tr>
<tr class="separator:afa2baf6036eae335a39226ca5416d397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a038405ad0d92aedb5f1d4c78ca621547" id="r_a038405ad0d92aedb5f1d4c78ca621547"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a038405ad0d92aedb5f1d4c78ca621547">test_binary_clf_curve_zero_sample_weight</a> (curve_func)</td></tr>
<tr class="separator:a038405ad0d92aedb5f1d4c78ca621547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac874270f172af81d16015c6964fb7265" id="r_ac874270f172af81d16015c6964fb7265"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ac874270f172af81d16015c6964fb7265">test_precision_recall_curve</a> ()</td></tr>
<tr class="separator:ac874270f172af81d16015c6964fb7265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff6798440aec88f1014cd5584b7e907c" id="r_aff6798440aec88f1014cd5584b7e907c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aff6798440aec88f1014cd5584b7e907c">_test_precision_recall_curve</a> (y_true, y_score)</td></tr>
<tr class="separator:aff6798440aec88f1014cd5584b7e907c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bffda8c297c1622d5c87516fb21bdb0" id="r_a2bffda8c297c1622d5c87516fb21bdb0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a2bffda8c297c1622d5c87516fb21bdb0">test_precision_recall_curve_toydata</a> ()</td></tr>
<tr class="separator:a2bffda8c297c1622d5c87516fb21bdb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b1fc15953499379501f26207621b0c2" id="r_a6b1fc15953499379501f26207621b0c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a6b1fc15953499379501f26207621b0c2">test_average_precision_constant_values</a> ()</td></tr>
<tr class="separator:a6b1fc15953499379501f26207621b0c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79ba0e281213251bba2f476335027502" id="r_a79ba0e281213251bba2f476335027502"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a79ba0e281213251bba2f476335027502">test_average_precision_score_pos_label_errors</a> ()</td></tr>
<tr class="separator:a79ba0e281213251bba2f476335027502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab674a6b1296e84760468100dc572541d" id="r_ab674a6b1296e84760468100dc572541d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ab674a6b1296e84760468100dc572541d">test_score_scale_invariance</a> ()</td></tr>
<tr class="separator:ab674a6b1296e84760468100dc572541d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88683b06078f424b9d69ef5185d19aa0" id="r_a88683b06078f424b9d69ef5185d19aa0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a88683b06078f424b9d69ef5185d19aa0">test_det_curve_toydata</a> (y_true, y_score, expected_fpr, expected_fnr)</td></tr>
<tr class="separator:a88683b06078f424b9d69ef5185d19aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5506983e2900c416991cacbad7a5d64f" id="r_a5506983e2900c416991cacbad7a5d64f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a5506983e2900c416991cacbad7a5d64f">test_det_curve_tie_handling</a> (y_true, y_score, expected_fpr, expected_fnr)</td></tr>
<tr class="separator:a5506983e2900c416991cacbad7a5d64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b7cacd36beded8799558a69321777a" id="r_a93b7cacd36beded8799558a69321777a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a93b7cacd36beded8799558a69321777a">test_det_curve_sanity_check</a> ()</td></tr>
<tr class="separator:a93b7cacd36beded8799558a69321777a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853f20268c73404b9a0b340612c49ecc" id="r_a853f20268c73404b9a0b340612c49ecc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a853f20268c73404b9a0b340612c49ecc">test_det_curve_constant_scores</a> (y_score)</td></tr>
<tr class="separator:a853f20268c73404b9a0b340612c49ecc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e931fc509c0951e4d913555474a4cce" id="r_a3e931fc509c0951e4d913555474a4cce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a3e931fc509c0951e4d913555474a4cce">test_det_curve_perfect_scores</a> (y_true)</td></tr>
<tr class="separator:a3e931fc509c0951e4d913555474a4cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4b486ba8aa5bad920643e265bf12e0" id="r_adf4b486ba8aa5bad920643e265bf12e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#adf4b486ba8aa5bad920643e265bf12e0">test_det_curve_bad_input</a> (y_true, y_pred, err_msg)</td></tr>
<tr class="separator:adf4b486ba8aa5bad920643e265bf12e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78bb3ec42d6fb69945291a3945c4c8e" id="r_ad78bb3ec42d6fb69945291a3945c4c8e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ad78bb3ec42d6fb69945291a3945c4c8e">test_det_curve_pos_label</a> ()</td></tr>
<tr class="separator:ad78bb3ec42d6fb69945291a3945c4c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb97f853baca25ed03d7d070b96a5e2" id="r_afdb97f853baca25ed03d7d070b96a5e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#afdb97f853baca25ed03d7d070b96a5e2">check_lrap_toy</a> (lrap_score)</td></tr>
<tr class="separator:afdb97f853baca25ed03d7d070b96a5e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f3cd7ae5b47f9637b51e6ade4cb004" id="r_a03f3cd7ae5b47f9637b51e6ade4cb004"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a03f3cd7ae5b47f9637b51e6ade4cb004">check_zero_or_all_relevant_labels</a> (lrap_score)</td></tr>
<tr class="separator:a03f3cd7ae5b47f9637b51e6ade4cb004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a879c19648633285cd7dfaa70d6458975" id="r_a879c19648633285cd7dfaa70d6458975"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a879c19648633285cd7dfaa70d6458975">check_lrap_error_raised</a> (lrap_score)</td></tr>
<tr class="separator:a879c19648633285cd7dfaa70d6458975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac170675ab3bacf6bff86421687023f1d" id="r_ac170675ab3bacf6bff86421687023f1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ac170675ab3bacf6bff86421687023f1d">check_lrap_only_ties</a> (lrap_score)</td></tr>
<tr class="separator:ac170675ab3bacf6bff86421687023f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accae5bca6b039e756803504aaa64a66d" id="r_accae5bca6b039e756803504aaa64a66d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#accae5bca6b039e756803504aaa64a66d">check_lrap_without_tie_and_increasing_score</a> (lrap_score)</td></tr>
<tr class="separator:accae5bca6b039e756803504aaa64a66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1292f644df98cb852b75dd0aac661af" id="r_aa1292f644df98cb852b75dd0aac661af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aa1292f644df98cb852b75dd0aac661af">_my_lrap</a> (y_true, y_score)</td></tr>
<tr class="separator:aa1292f644df98cb852b75dd0aac661af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355635d016f7032abd1980c847dfba7f" id="r_a355635d016f7032abd1980c847dfba7f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a355635d016f7032abd1980c847dfba7f">check_alternative_lrap_implementation</a> (lrap_score, n_classes=5, n_samples=20, random_state=0)</td></tr>
<tr class="separator:a355635d016f7032abd1980c847dfba7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e2db7ef273f63c91207c3ed6161f68" id="r_a15e2db7ef273f63c91207c3ed6161f68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a15e2db7ef273f63c91207c3ed6161f68">test_label_ranking_avp</a> (check, <a class="el" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>)</td></tr>
<tr class="separator:a15e2db7ef273f63c91207c3ed6161f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae796ad47a103b810f5310fe2d3d7e79b" id="r_ae796ad47a103b810f5310fe2d3d7e79b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ae796ad47a103b810f5310fe2d3d7e79b">test_lrap_error_raised</a> ()</td></tr>
<tr class="separator:ae796ad47a103b810f5310fe2d3d7e79b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb55ba5dce5ebf2e23874de07e33f65" id="r_afbb55ba5dce5ebf2e23874de07e33f65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#afbb55ba5dce5ebf2e23874de07e33f65">test_alternative_lrap_implementation</a> (n_samples, n_classes, random_state)</td></tr>
<tr class="separator:afbb55ba5dce5ebf2e23874de07e33f65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add9e7be73a839dd0d3d977f996a7f911" id="r_add9e7be73a839dd0d3d977f996a7f911"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#add9e7be73a839dd0d3d977f996a7f911">test_lrap_sample_weighting_zero_labels</a> ()</td></tr>
<tr class="separator:add9e7be73a839dd0d3d977f996a7f911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1dc1c36770d2fd1127099833c80221b" id="r_ab1dc1c36770d2fd1127099833c80221b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ab1dc1c36770d2fd1127099833c80221b">test_coverage_error</a> ()</td></tr>
<tr class="separator:ab1dc1c36770d2fd1127099833c80221b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf65173966395c30783b3037b0e3d904" id="r_aaf65173966395c30783b3037b0e3d904"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aaf65173966395c30783b3037b0e3d904">test_coverage_tie_handling</a> ()</td></tr>
<tr class="separator:aaf65173966395c30783b3037b0e3d904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9203c53cf5e8efc2a321b52937dabd1b" id="r_a9203c53cf5e8efc2a321b52937dabd1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a9203c53cf5e8efc2a321b52937dabd1b">test_coverage_1d_error_message</a> (y_true, y_score)</td></tr>
<tr class="separator:a9203c53cf5e8efc2a321b52937dabd1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de5034cb8b9b0deac2827da4ed3cd30" id="r_a5de5034cb8b9b0deac2827da4ed3cd30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a5de5034cb8b9b0deac2827da4ed3cd30">test_label_ranking_loss</a> ()</td></tr>
<tr class="separator:a5de5034cb8b9b0deac2827da4ed3cd30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b942f23b13c6b71fcd389e76c2fb6e" id="r_ac6b942f23b13c6b71fcd389e76c2fb6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ac6b942f23b13c6b71fcd389e76c2fb6e">test_ranking_appropriate_input_shape</a> ()</td></tr>
<tr class="separator:ac6b942f23b13c6b71fcd389e76c2fb6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a81f165654dc6361f5260fb247390f" id="r_ab4a81f165654dc6361f5260fb247390f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ab4a81f165654dc6361f5260fb247390f">test_ranking_loss_ties_handling</a> ()</td></tr>
<tr class="separator:ab4a81f165654dc6361f5260fb247390f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f310cd18205b01f72475b78e58a708d" id="r_a7f310cd18205b01f72475b78e58a708d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a7f310cd18205b01f72475b78e58a708d">test_dcg_score</a> ()</td></tr>
<tr class="separator:a7f310cd18205b01f72475b78e58a708d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eb9381aeb2384f9acd97f9df5b035df" id="r_a9eb9381aeb2384f9acd97f9df5b035df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a9eb9381aeb2384f9acd97f9df5b035df">_test_dcg_score_for</a> (y_true, y_score)</td></tr>
<tr class="separator:a9eb9381aeb2384f9acd97f9df5b035df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eee4a5ac03950c37b4c000e2787b347" id="r_a5eee4a5ac03950c37b4c000e2787b347"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a5eee4a5ac03950c37b4c000e2787b347">test_dcg_ties</a> ()</td></tr>
<tr class="separator:a5eee4a5ac03950c37b4c000e2787b347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc78ec37f8739774cc40285674f8474e" id="r_afc78ec37f8739774cc40285674f8474e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#afc78ec37f8739774cc40285674f8474e">test_ndcg_ignore_ties_with_k</a> ()</td></tr>
<tr class="separator:afc78ec37f8739774cc40285674f8474e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2f6048a75d5905739b94e4ce18504f0" id="r_ab2f6048a75d5905739b94e4ce18504f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ab2f6048a75d5905739b94e4ce18504f0">test_ndcg_negative_ndarray_warn</a> ()</td></tr>
<tr class="separator:ab2f6048a75d5905739b94e4ce18504f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac349b9d7eabdecd348f7d68d8fd8669a" id="r_ac349b9d7eabdecd348f7d68d8fd8669a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ac349b9d7eabdecd348f7d68d8fd8669a">test_ndcg_invariant</a> ()</td></tr>
<tr class="separator:ac349b9d7eabdecd348f7d68d8fd8669a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af471f8d8662fa56ef467d21b24ae780a" id="r_af471f8d8662fa56ef467d21b24ae780a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#af471f8d8662fa56ef467d21b24ae780a">test_ndcg_toy_examples</a> (ignore_ties)</td></tr>
<tr class="separator:af471f8d8662fa56ef467d21b24ae780a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55edd1d5e1bb76d05301215388a2c779" id="r_a55edd1d5e1bb76d05301215388a2c779"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a55edd1d5e1bb76d05301215388a2c779">test_ndcg_score</a> ()</td></tr>
<tr class="separator:a55edd1d5e1bb76d05301215388a2c779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d34470faa9da00fa52732027e1233c" id="r_aa2d34470faa9da00fa52732027e1233c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aa2d34470faa9da00fa52732027e1233c">_test_ndcg_score_for</a> (y_true, y_score)</td></tr>
<tr class="separator:aa2d34470faa9da00fa52732027e1233c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67e01c8e0a08f6578397e9ad9c8453cc" id="r_a67e01c8e0a08f6578397e9ad9c8453cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a67e01c8e0a08f6578397e9ad9c8453cc">test_partial_roc_auc_score</a> ()</td></tr>
<tr class="separator:a67e01c8e0a08f6578397e9ad9c8453cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df63ef92a2ae909547e82e9f58f1e6c" id="r_a1df63ef92a2ae909547e82e9f58f1e6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a1df63ef92a2ae909547e82e9f58f1e6c">test_top_k_accuracy_score</a> (y_true, <a class="el" href="__blas__subroutines_8h.html#afa8f30d4cfebc7d1efb06e7d245eff5a">k</a>, true_score)</td></tr>
<tr class="separator:a1df63ef92a2ae909547e82e9f58f1e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79ce910d035a3c58a3b0a5927c62b163" id="r_a79ce910d035a3c58a3b0a5927c62b163"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a79ce910d035a3c58a3b0a5927c62b163">test_top_k_accuracy_score_binary</a> (y_score, <a class="el" href="__blas__subroutines_8h.html#afa8f30d4cfebc7d1efb06e7d245eff5a">k</a>, true_score)</td></tr>
<tr class="separator:a79ce910d035a3c58a3b0a5927c62b163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e255fd461ac3165377bde591f5d9367" id="r_a6e255fd461ac3165377bde591f5d9367"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a6e255fd461ac3165377bde591f5d9367">test_top_k_accuracy_score_multiclass_with_labels</a> (y_true, true_score, labels, labels_as_ndarray)</td></tr>
<tr class="separator:a6e255fd461ac3165377bde591f5d9367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3c8821f3d777a0af6ece23de39add80" id="r_af3c8821f3d777a0af6ece23de39add80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#af3c8821f3d777a0af6ece23de39add80">test_top_k_accuracy_score_increasing</a> ()</td></tr>
<tr class="separator:af3c8821f3d777a0af6ece23de39add80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8561037bb494679503c82f5575f3b2e" id="r_ac8561037bb494679503c82f5575f3b2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#ac8561037bb494679503c82f5575f3b2e">test_top_k_accuracy_score_ties</a> (y_true, <a class="el" href="__blas__subroutines_8h.html#afa8f30d4cfebc7d1efb06e7d245eff5a">k</a>, true_score)</td></tr>
<tr class="separator:ac8561037bb494679503c82f5575f3b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0661c82122261524dabc0ff20f21d6e2" id="r_a0661c82122261524dabc0ff20f21d6e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a0661c82122261524dabc0ff20f21d6e2">test_top_k_accuracy_score_warning</a> (y_true, <a class="el" href="__blas__subroutines_8h.html#afa8f30d4cfebc7d1efb06e7d245eff5a">k</a>)</td></tr>
<tr class="separator:a0661c82122261524dabc0ff20f21d6e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddb87b69a79fc63a8bd4b4dda9b33ee" id="r_a0ddb87b69a79fc63a8bd4b4dda9b33ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a0ddb87b69a79fc63a8bd4b4dda9b33ee">test_top_k_accuracy_score_error</a> (y_true, y_score, labels, msg)</td></tr>
<tr class="separator:a0ddb87b69a79fc63a8bd4b4dda9b33ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b03fda3bd9bd552eec20ebffed91b9b" id="r_a2b03fda3bd9bd552eec20ebffed91b9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#a2b03fda3bd9bd552eec20ebffed91b9b">test_label_ranking_avg_precision_score_should_allow_csr_matrix_for_y_true_input</a> ()</td></tr>
<tr class="separator:a2b03fda3bd9bd552eec20ebffed91b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa579dcf32e34d0b7628553e34337ad80" id="r_aa579dcf32e34d0b7628553e34337ad80"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__ranking.html#aa579dcf32e34d0b7628553e34337ad80">CURVE_FUNCS</a></td></tr>
<tr class="memdesc:aa579dcf32e34d0b7628553e34337ad80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utilities for testing.  <br /></td></tr>
<tr class="separator:aa579dcf32e34d0b7628553e34337ad80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a50fdd30a66c707f04bafcfd8a7437a34" name="a50fdd30a66c707f04bafcfd8a7437a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50fdd30a66c707f04bafcfd8a7437a34">&#9670;&#160;</a></span>_auc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._auc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tests. </p>
<pre class="fragment">Alternative implementation to check for correctness of
`roc_auc_score`.</pre> <div class="fragment"><div class="line"><span class="lineno">  100</span><span class="keyword">def </span>_auc(y_true, y_score):</div>
<div class="line"><span class="lineno">  101</span>    <span class="stringliteral">&quot;&quot;&quot;Alternative implementation to check for correctness of</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">    `roc_auc_score`.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  103</span>    pos_label = np.unique(y_true)[1]</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="comment"># Count the number of times positive samples are correctly ranked above</span></div>
<div class="line"><span class="lineno">  106</span>    <span class="comment"># negative samples.</span></div>
<div class="line"><span class="lineno">  107</span>    pos = y_score[y_true == pos_label]</div>
<div class="line"><span class="lineno">  108</span>    neg = y_score[y_true != pos_label]</div>
<div class="line"><span class="lineno">  109</span>    diff_matrix = pos.reshape(1, -1) - neg.reshape(-1, 1)</div>
<div class="line"><span class="lineno">  110</span>    n_correct = np.sum(diff_matrix &gt; 0)</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">return</span> n_correct / float(len(pos) * len(neg))</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5626d89895d3938c772298f34d1e93d" name="ad5626d89895d3938c772298f34d1e93d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5626d89895d3938c772298f34d1e93d">&#9670;&#160;</a></span>_average_precision()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._average_precision </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Alternative implementation to check for correctness of
`average_precision_score`.

Note that this implementation fails on some edge cases.
For example, for constant predictions e.g. [0.5, 0.5, 0.5],
y_true = [1, 0, 0] returns an average precision of 0.33...
but y_true = [0, 0, 1] returns 1.0.
</pre> <div class="fragment"><div class="line"><span class="lineno">  115</span><span class="keyword">def </span>_average_precision(y_true, y_score):</div>
<div class="line"><span class="lineno">  116</span>    <span class="stringliteral">&quot;&quot;&quot;Alternative implementation to check for correctness of</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">    `average_precision_score`.</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">    Note that this implementation fails on some edge cases.</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">    For example, for constant predictions e.g. [0.5, 0.5, 0.5],</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">    y_true = [1, 0, 0] returns an average precision of 0.33...</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">    but y_true = [0, 0, 1] returns 1.0.</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  124</span>    pos_label = np.unique(y_true)[1]</div>
<div class="line"><span class="lineno">  125</span>    n_pos = np.sum(y_true == pos_label)</div>
<div class="line"><span class="lineno">  126</span>    order = np.argsort(y_score)[::-1]</div>
<div class="line"><span class="lineno">  127</span>    y_score = y_score[order]</div>
<div class="line"><span class="lineno">  128</span>    y_true = y_true[order]</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>    score = 0</div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(y_score)):</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">if</span> y_true[i] == pos_label:</div>
<div class="line"><span class="lineno">  133</span>            <span class="comment"># Compute precision up to document i</span></div>
<div class="line"><span class="lineno">  134</span>            <span class="comment"># i.e, percentage of relevant documents up to document i.</span></div>
<div class="line"><span class="lineno">  135</span>            prec = 0</div>
<div class="line"><span class="lineno">  136</span>            <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(0, i + 1):</div>
<div class="line"><span class="lineno">  137</span>                <span class="keywordflow">if</span> y_true[j] == pos_label:</div>
<div class="line"><span class="lineno">  138</span>                    prec += 1.0</div>
<div class="line"><span class="lineno">  139</span>            prec /= i + 1.0</div>
<div class="line"><span class="lineno">  140</span>            score += prec</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordflow">return</span> score / n_pos</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aac3f4a2033278c45123fe99dd2e0f585" name="aac3f4a2033278c45123fe99dd2e0f585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac3f4a2033278c45123fe99dd2e0f585">&#9670;&#160;</a></span>_average_precision_slow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._average_precision_slow </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">A second alternative implementation of average precision that closely
follows the Wikipedia article's definition (see References). This should
give identical results as `average_precision_score` for all inputs.

References
----------
.. [1] `Wikipedia entry for the Average precision
   &lt;https://en.wikipedia.org/wiki/Average_precision&gt;`_
</pre> <div class="fragment"><div class="line"><span class="lineno">  145</span><span class="keyword">def </span>_average_precision_slow(y_true, y_score):</div>
<div class="line"><span class="lineno">  146</span>    <span class="stringliteral">&quot;&quot;&quot;A second alternative implementation of average precision that closely</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral">    follows the Wikipedia article&#39;s definition (see References). This should</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">    give identical results as `average_precision_score` for all inputs.</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">    References</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">    .. [1] `Wikipedia entry for the Average precision</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral">       &lt;https://en.wikipedia.org/wiki/Average_precision&gt;`_</span></div>
<div class="line"><span class="lineno">  154</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  155</span>    precision, recall, threshold = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  156</span>    precision = list(reversed(precision))</div>
<div class="line"><span class="lineno">  157</span>    recall = list(reversed(recall))</div>
<div class="line"><span class="lineno">  158</span>    average_precision = 0</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(1, len(precision)):</div>
<div class="line"><span class="lineno">  160</span>        average_precision += precision[i] * (recall[i] - recall[i - 1])</div>
<div class="line"><span class="lineno">  161</span>    <span class="keywordflow">return</span> average_precision</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1292f644df98cb852b75dd0aac661af" name="aa1292f644df98cb852b75dd0aac661af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1292f644df98cb852b75dd0aac661af">&#9670;&#160;</a></span>_my_lrap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._my_lrap </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Simple implementation of label ranking average precision</pre> <div class="fragment"><div class="line"><span class="lineno"> 1446</span><span class="keyword">def </span>_my_lrap(y_true, y_score):</div>
<div class="line"><span class="lineno"> 1447</span>    <span class="stringliteral">&quot;&quot;&quot;Simple implementation of label ranking average precision&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1448</span>    check_consistent_length(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1449</span>    y_true = check_array(y_true)</div>
<div class="line"><span class="lineno"> 1450</span>    y_score = check_array(y_score)</div>
<div class="line"><span class="lineno"> 1451</span>    n_samples, n_labels = y_true.shape</div>
<div class="line"><span class="lineno"> 1452</span>    score = np.empty((n_samples,))</div>
<div class="line"><span class="lineno"> 1453</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_samples):</div>
<div class="line"><span class="lineno"> 1454</span>        <span class="comment"># The best rank correspond to 1. Rank higher than 1 are worse.</span></div>
<div class="line"><span class="lineno"> 1455</span>        <span class="comment"># The best inverse ranking correspond to n_labels.</span></div>
<div class="line"><span class="lineno"> 1456</span>        unique_rank, inv_rank = np.unique(y_score[i], return_inverse=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1457</span>        n_ranks = unique_rank.size</div>
<div class="line"><span class="lineno"> 1458</span>        rank = n_ranks - inv_rank</div>
<div class="line"><span class="lineno"> 1459</span> </div>
<div class="line"><span class="lineno"> 1460</span>        <span class="comment"># Rank need to be corrected to take into account ties</span></div>
<div class="line"><span class="lineno"> 1461</span>        <span class="comment"># ex: rank 1 ex aequo means that both label are rank 2.</span></div>
<div class="line"><span class="lineno"> 1462</span>        corr_rank = np.bincount(rank, minlength=n_ranks + 1).cumsum()</div>
<div class="line"><span class="lineno"> 1463</span>        rank = corr_rank[rank]</div>
<div class="line"><span class="lineno"> 1464</span> </div>
<div class="line"><span class="lineno"> 1465</span>        relevant = y_true[i].nonzero()[0]</div>
<div class="line"><span class="lineno"> 1466</span>        <span class="keywordflow">if</span> relevant.size == 0 <span class="keywordflow">or</span> relevant.size == n_labels:</div>
<div class="line"><span class="lineno"> 1467</span>            score[i] = 1</div>
<div class="line"><span class="lineno"> 1468</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno"> 1469</span> </div>
<div class="line"><span class="lineno"> 1470</span>        score[i] = 0.0</div>
<div class="line"><span class="lineno"> 1471</span>        <span class="keywordflow">for</span> label <span class="keywordflow">in</span> relevant:</div>
<div class="line"><span class="lineno"> 1472</span>            <span class="comment"># Let&#39;s count the number of relevant label with better rank</span></div>
<div class="line"><span class="lineno"> 1473</span>            <span class="comment"># (smaller rank).</span></div>
<div class="line"><span class="lineno"> 1474</span>            n_ranked_above = sum(rank[r] &lt;= rank[label] <span class="keywordflow">for</span> r <span class="keywordflow">in</span> relevant)</div>
<div class="line"><span class="lineno"> 1475</span> </div>
<div class="line"><span class="lineno"> 1476</span>            <span class="comment"># Weight by the rank of the actual label</span></div>
<div class="line"><span class="lineno"> 1477</span>            score[i] += n_ranked_above / rank[label]</div>
<div class="line"><span class="lineno"> 1478</span> </div>
<div class="line"><span class="lineno"> 1479</span>        score[i] /= relevant.size</div>
<div class="line"><span class="lineno"> 1480</span> </div>
<div class="line"><span class="lineno"> 1481</span>    <span class="keywordflow">return</span> score.mean()</div>
<div class="line"><span class="lineno"> 1482</span> </div>
<div class="line"><span class="lineno"> 1483</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae292f83b17c46c2780ef3507701b18a4" name="ae292f83b17c46c2780ef3507701b18a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae292f83b17c46c2780ef3507701b18a4">&#9670;&#160;</a></span>_partial_roc_auc_score()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._partial_roc_auc_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_predict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_fpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Alternative implementation to check for correctness of `roc_auc_score`
with `max_fpr` set.
</pre> <div class="fragment"><div class="line"><span class="lineno">  164</span><span class="keyword">def </span>_partial_roc_auc_score(y_true, y_predict, max_fpr):</div>
<div class="line"><span class="lineno">  165</span>    <span class="stringliteral">&quot;&quot;&quot;Alternative implementation to check for correctness of `roc_auc_score`</span></div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">    with `max_fpr` set.</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    <span class="keyword">def </span>_partial_roc(y_true, y_predict, max_fpr):</div>
<div class="line"><span class="lineno">  170</span>        fpr, tpr, _ = roc_curve(y_true, y_predict)</div>
<div class="line"><span class="lineno">  171</span>        new_fpr = fpr[fpr &lt;= max_fpr]</div>
<div class="line"><span class="lineno">  172</span>        new_fpr = np.append(new_fpr, max_fpr)</div>
<div class="line"><span class="lineno">  173</span>        new_tpr = tpr[fpr &lt;= max_fpr]</div>
<div class="line"><span class="lineno">  174</span>        idx_out = np.argmax(fpr &gt; max_fpr)</div>
<div class="line"><span class="lineno">  175</span>        idx_in = idx_out - 1</div>
<div class="line"><span class="lineno">  176</span>        x_interp = [fpr[idx_in], fpr[idx_out]]</div>
<div class="line"><span class="lineno">  177</span>        y_interp = [tpr[idx_in], tpr[idx_out]]</div>
<div class="line"><span class="lineno">  178</span>        new_tpr = np.append(new_tpr, np.interp(max_fpr, x_interp, y_interp))</div>
<div class="line"><span class="lineno">  179</span>        <span class="keywordflow">return</span> (new_fpr, new_tpr)</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    new_fpr, new_tpr = _partial_roc(y_true, y_predict, max_fpr)</div>
<div class="line"><span class="lineno">  182</span>    partial_auc = auc(new_fpr, new_tpr)</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    <span class="comment"># Formula (5) from McClish 1989</span></div>
<div class="line"><span class="lineno">  185</span>    fpr1 = 0</div>
<div class="line"><span class="lineno">  186</span>    fpr2 = max_fpr</div>
<div class="line"><span class="lineno">  187</span>    min_area = 0.5 * (fpr2 - fpr1) * (fpr2 + fpr1)</div>
<div class="line"><span class="lineno">  188</span>    max_area = fpr2 - fpr1</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">return</span> 0.5 * (1 + (partial_auc - min_area) / (max_area - min_area))</div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [True, False])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9eb9381aeb2384f9acd97f9df5b035df" name="a9eb9381aeb2384f9acd97f9df5b035df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eb9381aeb2384f9acd97f9df5b035df">&#9670;&#160;</a></span>_test_dcg_score_for()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._test_dcg_score_for </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1738</span><span class="keyword">def </span>_test_dcg_score_for(y_true, y_score):</div>
<div class="line"><span class="lineno"> 1739</span>    discount = np.log2(np.arange(y_true.shape[1]) + 2)</div>
<div class="line"><span class="lineno"> 1740</span>    ideal = _dcg_sample_scores(y_true, y_true)</div>
<div class="line"><span class="lineno"> 1741</span>    score = _dcg_sample_scores(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1742</span>    <span class="keyword">assert</span> (score &lt;= ideal).all()</div>
<div class="line"><span class="lineno"> 1743</span>    <span class="keyword">assert</span> (_dcg_sample_scores(y_true, y_true, k=5) &lt;= ideal).all()</div>
<div class="line"><span class="lineno"> 1744</span>    <span class="keyword">assert</span> ideal.shape == (y_true.shape[0],)</div>
<div class="line"><span class="lineno"> 1745</span>    <span class="keyword">assert</span> score.shape == (y_true.shape[0],)</div>
<div class="line"><span class="lineno"> 1746</span>    <span class="keyword">assert</span> ideal == pytest.approx((np.sort(y_true)[:, ::-1] / discount).sum(axis=1))</div>
<div class="line"><span class="lineno"> 1747</span> </div>
<div class="line"><span class="lineno"> 1748</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2d34470faa9da00fa52732027e1233c" name="aa2d34470faa9da00fa52732027e1233c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d34470faa9da00fa52732027e1233c">&#9670;&#160;</a></span>_test_ndcg_score_for()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._test_ndcg_score_for </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1846</span><span class="keyword">def </span>_test_ndcg_score_for(y_true, y_score):</div>
<div class="line"><span class="lineno"> 1847</span>    ideal = _ndcg_sample_scores(y_true, y_true)</div>
<div class="line"><span class="lineno"> 1848</span>    score = _ndcg_sample_scores(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1849</span>    <span class="keyword">assert</span> (score &lt;= ideal).all()</div>
<div class="line"><span class="lineno"> 1850</span>    all_zero = (y_true == 0).all(axis=1)</div>
<div class="line"><span class="lineno"> 1851</span>    <span class="keyword">assert</span> ideal[~all_zero] == pytest.approx(np.ones((~all_zero).sum()))</div>
<div class="line"><span class="lineno"> 1852</span>    <span class="keyword">assert</span> ideal[all_zero] == pytest.approx(np.zeros(all_zero.sum()))</div>
<div class="line"><span class="lineno"> 1853</span>    <span class="keyword">assert</span> score[~all_zero] == pytest.approx(</div>
<div class="line"><span class="lineno"> 1854</span>        _dcg_sample_scores(y_true, y_score)[~all_zero]</div>
<div class="line"><span class="lineno"> 1855</span>        / _dcg_sample_scores(y_true, y_true)[~all_zero]</div>
<div class="line"><span class="lineno"> 1856</span>    )</div>
<div class="line"><span class="lineno"> 1857</span>    <span class="keyword">assert</span> score[all_zero] == pytest.approx(np.zeros(all_zero.sum()))</div>
<div class="line"><span class="lineno"> 1858</span>    <span class="keyword">assert</span> ideal.shape == (y_true.shape[0],)</div>
<div class="line"><span class="lineno"> 1859</span>    <span class="keyword">assert</span> score.shape == (y_true.shape[0],)</div>
<div class="line"><span class="lineno"> 1860</span> </div>
<div class="line"><span class="lineno"> 1861</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aff6798440aec88f1014cd5584b7e907c" name="aff6798440aec88f1014cd5584b7e907c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff6798440aec88f1014cd5584b7e907c">&#9670;&#160;</a></span>_test_precision_recall_curve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking._test_precision_recall_curve </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  920</span><span class="keyword">def </span>_test_precision_recall_curve(y_true, y_score):</div>
<div class="line"><span class="lineno">  921</span>    <span class="comment"># Test Precision-Recall and area under PR curve</span></div>
<div class="line"><span class="lineno">  922</span>    p, r, thresholds = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  923</span>    precision_recall_auc = _average_precision_slow(y_true, y_score)</div>
<div class="line"><span class="lineno">  924</span>    assert_array_almost_equal(precision_recall_auc, 0.859, 3)</div>
<div class="line"><span class="lineno">  925</span>    assert_array_almost_equal(</div>
<div class="line"><span class="lineno">  926</span>        precision_recall_auc, average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  927</span>    )</div>
<div class="line"><span class="lineno">  928</span>    <span class="comment"># `_average_precision` is not very precise in case of 0.5 ties: be tolerant</span></div>
<div class="line"><span class="lineno">  929</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  930</span>        _average_precision(y_true, y_score), precision_recall_auc, decimal=2</div>
<div class="line"><span class="lineno">  931</span>    )</div>
<div class="line"><span class="lineno">  932</span>    <span class="keyword">assert</span> p.size == r.size</div>
<div class="line"><span class="lineno">  933</span>    <span class="keyword">assert</span> p.size == thresholds.size + 1</div>
<div class="line"><span class="lineno">  934</span>    <span class="comment"># Smoke test in the case of proba having only one value</span></div>
<div class="line"><span class="lineno">  935</span>    p, r, thresholds = precision_recall_curve(y_true, np.zeros_like(y_score))</div>
<div class="line"><span class="lineno">  936</span>    <span class="keyword">assert</span> p.size == r.size</div>
<div class="line"><span class="lineno">  937</span>    <span class="keyword">assert</span> p.size == thresholds.size + 1</div>
<div class="line"><span class="lineno">  938</span> </div>
<div class="line"><span class="lineno">  939</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a355635d016f7032abd1980c847dfba7f" name="a355635d016f7032abd1980c847dfba7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a355635d016f7032abd1980c847dfba7f">&#9670;&#160;</a></span>check_alternative_lrap_implementation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.check_alternative_lrap_implementation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lrap_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_classes</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_samples</em> = <code>20</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>random_state</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1486</span>):</div>
<div class="line"><span class="lineno"> 1487</span>    _, y_true = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 1488</span>        n_features=1,</div>
<div class="line"><span class="lineno"> 1489</span>        allow_unlabeled=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1490</span>        random_state=random_state,</div>
<div class="line"><span class="lineno"> 1491</span>        n_classes=n_classes,</div>
<div class="line"><span class="lineno"> 1492</span>        n_samples=n_samples,</div>
<div class="line"><span class="lineno"> 1493</span>    )</div>
<div class="line"><span class="lineno"> 1494</span> </div>
<div class="line"><span class="lineno"> 1495</span>    <span class="comment"># Score with ties</span></div>
<div class="line"><span class="lineno"> 1496</span>    y_score = _sparse_random_matrix(</div>
<div class="line"><span class="lineno"> 1497</span>        n_components=y_true.shape[0],</div>
<div class="line"><span class="lineno"> 1498</span>        n_features=y_true.shape[1],</div>
<div class="line"><span class="lineno"> 1499</span>        random_state=random_state,</div>
<div class="line"><span class="lineno"> 1500</span>    )</div>
<div class="line"><span class="lineno"> 1501</span> </div>
<div class="line"><span class="lineno"> 1502</span>    <span class="keywordflow">if</span> hasattr(y_score, <span class="stringliteral">&quot;toarray&quot;</span>):</div>
<div class="line"><span class="lineno"> 1503</span>        y_score = y_score.toarray()</div>
<div class="line"><span class="lineno"> 1504</span>    score_lrap = label_ranking_average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1505</span>    score_my_lrap = _my_lrap(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1506</span>    assert_almost_equal(score_lrap, score_my_lrap)</div>
<div class="line"><span class="lineno"> 1507</span> </div>
<div class="line"><span class="lineno"> 1508</span>    <span class="comment"># Uniform score</span></div>
<div class="line"><span class="lineno"> 1509</span>    random_state = check_random_state(random_state)</div>
<div class="line"><span class="lineno"> 1510</span>    y_score = random_state.uniform(size=(n_samples, n_classes))</div>
<div class="line"><span class="lineno"> 1511</span>    score_lrap = label_ranking_average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1512</span>    score_my_lrap = _my_lrap(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1513</span>    assert_almost_equal(score_lrap, score_my_lrap)</div>
<div class="line"><span class="lineno"> 1514</span> </div>
<div class="line"><span class="lineno"> 1515</span> </div>
<div class="line"><span class="lineno"> 1516</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1517</span>    <span class="stringliteral">&quot;check&quot;</span>,</div>
<div class="line"><span class="lineno"> 1518</span>    (</div>
<div class="line"><span class="lineno"> 1519</span>        check_lrap_toy,</div>
<div class="line"><span class="lineno"> 1520</span>        check_lrap_without_tie_and_increasing_score,</div>
<div class="line"><span class="lineno"> 1521</span>        check_lrap_only_ties,</div>
<div class="line"><span class="lineno"> 1522</span>        check_zero_or_all_relevant_labels,</div>
<div class="line"><span class="lineno"> 1523</span>    ),</div>
<div class="line"><span class="lineno"> 1524</span>)</div>
<div class="line"><span class="lineno"> 1525</span><span class="preprocessor">@pytest.mark.parametrize(&quot;func&quot;, (label_ranking_average_precision_score, _my_lrap)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a879c19648633285cd7dfaa70d6458975" name="a879c19648633285cd7dfaa70d6458975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a879c19648633285cd7dfaa70d6458975">&#9670;&#160;</a></span>check_lrap_error_raised()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.check_lrap_error_raised </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lrap_score</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1378</span><span class="keyword">def </span>check_lrap_error_raised(lrap_score):</div>
<div class="line"><span class="lineno"> 1379</span>    <span class="comment"># Raise value error if not appropriate format</span></div>
<div class="line"><span class="lineno"> 1380</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1381</span>        lrap_score([0, 1, 0], [0.25, 0.3, 0.2])</div>
<div class="line"><span class="lineno"> 1382</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1383</span>        lrap_score([0, 1, 2], [[0.25, 0.75, 0.0], [0.7, 0.3, 0.0], [0.8, 0.2, 0.0]])</div>
<div class="line"><span class="lineno"> 1384</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1385</span>        lrap_score(</div>
<div class="line"><span class="lineno"> 1386</span>            [(0), (1), (2)], [[0.25, 0.75, 0.0], [0.7, 0.3, 0.0], [0.8, 0.2, 0.0]]</div>
<div class="line"><span class="lineno"> 1387</span>        )</div>
<div class="line"><span class="lineno"> 1388</span> </div>
<div class="line"><span class="lineno"> 1389</span>    <span class="comment"># Check that y_true.shape != y_score.shape raise the proper exception</span></div>
<div class="line"><span class="lineno"> 1390</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1391</span>        lrap_score([[0, 1], [0, 1]], [0, 1])</div>
<div class="line"><span class="lineno"> 1392</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1393</span>        lrap_score([[0, 1], [0, 1]], [[0, 1]])</div>
<div class="line"><span class="lineno"> 1394</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1395</span>        lrap_score([[0, 1], [0, 1]], [[0], [1]])</div>
<div class="line"><span class="lineno"> 1396</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1397</span>        lrap_score([[0, 1]], [[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1398</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1399</span>        lrap_score([[0], [1]], [[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1400</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1401</span>        lrap_score([[0, 1], [0, 1]], [[0], [1]])</div>
<div class="line"><span class="lineno"> 1402</span> </div>
<div class="line"><span class="lineno"> 1403</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac170675ab3bacf6bff86421687023f1d" name="ac170675ab3bacf6bff86421687023f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac170675ab3bacf6bff86421687023f1d">&#9670;&#160;</a></span>check_lrap_only_ties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.check_lrap_only_ties </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lrap_score</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1404</span><span class="keyword">def </span>check_lrap_only_ties(lrap_score):</div>
<div class="line"><span class="lineno"> 1405</span>    <span class="comment"># Check tie handling in score</span></div>
<div class="line"><span class="lineno"> 1406</span>    <span class="comment"># Basic check with only ties and increasing label space</span></div>
<div class="line"><span class="lineno"> 1407</span>    <span class="keywordflow">for</span> n_labels <span class="keywordflow">in</span> range(2, 10):</div>
<div class="line"><span class="lineno"> 1408</span>        y_score = np.ones((1, n_labels))</div>
<div class="line"><span class="lineno"> 1409</span> </div>
<div class="line"><span class="lineno"> 1410</span>        <span class="comment"># Check for growing number of consecutive relevant</span></div>
<div class="line"><span class="lineno"> 1411</span>        <span class="keywordflow">for</span> n_relevant <span class="keywordflow">in</span> range(1, n_labels):</div>
<div class="line"><span class="lineno"> 1412</span>            <span class="comment"># Check for a bunch of positions</span></div>
<div class="line"><span class="lineno"> 1413</span>            <span class="keywordflow">for</span> pos <span class="keywordflow">in</span> range(n_labels - n_relevant):</div>
<div class="line"><span class="lineno"> 1414</span>                y_true = np.zeros((1, n_labels))</div>
<div class="line"><span class="lineno"> 1415</span>                y_true[0, pos : pos + n_relevant] = 1</div>
<div class="line"><span class="lineno"> 1416</span>                assert_almost_equal(lrap_score(y_true, y_score), n_relevant / n_labels)</div>
<div class="line"><span class="lineno"> 1417</span> </div>
<div class="line"><span class="lineno"> 1418</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afdb97f853baca25ed03d7d070b96a5e2" name="afdb97f853baca25ed03d7d070b96a5e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdb97f853baca25ed03d7d070b96a5e2">&#9670;&#160;</a></span>check_lrap_toy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.check_lrap_toy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lrap_score</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1296</span><span class="keyword">def </span>check_lrap_toy(lrap_score):</div>
<div class="line"><span class="lineno"> 1297</span>    <span class="comment"># Check on several small example that it works</span></div>
<div class="line"><span class="lineno"> 1298</span>    assert_almost_equal(lrap_score([[0, 1]], [[0.25, 0.75]]), 1)</div>
<div class="line"><span class="lineno"> 1299</span>    assert_almost_equal(lrap_score([[0, 1]], [[0.75, 0.25]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1300</span>    assert_almost_equal(lrap_score([[1, 1]], [[0.75, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span>    assert_almost_equal(lrap_score([[0, 0, 1]], [[0.25, 0.5, 0.75]]), 1)</div>
<div class="line"><span class="lineno"> 1303</span>    assert_almost_equal(lrap_score([[0, 1, 0]], [[0.25, 0.5, 0.75]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1304</span>    assert_almost_equal(lrap_score([[0, 1, 1]], [[0.25, 0.5, 0.75]]), 1)</div>
<div class="line"><span class="lineno"> 1305</span>    assert_almost_equal(lrap_score([[1, 0, 0]], [[0.25, 0.5, 0.75]]), 1 / 3)</div>
<div class="line"><span class="lineno"> 1306</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1307</span>        lrap_score([[1, 0, 1]], [[0.25, 0.5, 0.75]]), (2 / 3 + 1 / 1) / 2</div>
<div class="line"><span class="lineno"> 1308</span>    )</div>
<div class="line"><span class="lineno"> 1309</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1310</span>        lrap_score([[1, 1, 0]], [[0.25, 0.5, 0.75]]), (2 / 3 + 1 / 2) / 2</div>
<div class="line"><span class="lineno"> 1311</span>    )</div>
<div class="line"><span class="lineno"> 1312</span> </div>
<div class="line"><span class="lineno"> 1313</span>    assert_almost_equal(lrap_score([[0, 0, 1]], [[0.75, 0.5, 0.25]]), 1 / 3)</div>
<div class="line"><span class="lineno"> 1314</span>    assert_almost_equal(lrap_score([[0, 1, 0]], [[0.75, 0.5, 0.25]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1315</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1316</span>        lrap_score([[0, 1, 1]], [[0.75, 0.5, 0.25]]), (1 / 2 + 2 / 3) / 2</div>
<div class="line"><span class="lineno"> 1317</span>    )</div>
<div class="line"><span class="lineno"> 1318</span>    assert_almost_equal(lrap_score([[1, 0, 0]], [[0.75, 0.5, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1319</span>    assert_almost_equal(lrap_score([[1, 0, 1]], [[0.75, 0.5, 0.25]]), (1 + 2 / 3) / 2)</div>
<div class="line"><span class="lineno"> 1320</span>    assert_almost_equal(lrap_score([[1, 1, 0]], [[0.75, 0.5, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1321</span>    assert_almost_equal(lrap_score([[1, 1, 1]], [[0.75, 0.5, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1322</span> </div>
<div class="line"><span class="lineno"> 1323</span>    assert_almost_equal(lrap_score([[0, 0, 1]], [[0.5, 0.75, 0.25]]), 1 / 3)</div>
<div class="line"><span class="lineno"> 1324</span>    assert_almost_equal(lrap_score([[0, 1, 0]], [[0.5, 0.75, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1325</span>    assert_almost_equal(lrap_score([[0, 1, 1]], [[0.5, 0.75, 0.25]]), (1 + 2 / 3) / 2)</div>
<div class="line"><span class="lineno"> 1326</span>    assert_almost_equal(lrap_score([[1, 0, 0]], [[0.5, 0.75, 0.25]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1327</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1328</span>        lrap_score([[1, 0, 1]], [[0.5, 0.75, 0.25]]), (1 / 2 + 2 / 3) / 2</div>
<div class="line"><span class="lineno"> 1329</span>    )</div>
<div class="line"><span class="lineno"> 1330</span>    assert_almost_equal(lrap_score([[1, 1, 0]], [[0.5, 0.75, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1331</span>    assert_almost_equal(lrap_score([[1, 1, 1]], [[0.5, 0.75, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1332</span> </div>
<div class="line"><span class="lineno"> 1333</span>    <span class="comment"># Tie handling</span></div>
<div class="line"><span class="lineno"> 1334</span>    assert_almost_equal(lrap_score([[1, 0]], [[0.5, 0.5]]), 0.5)</div>
<div class="line"><span class="lineno"> 1335</span>    assert_almost_equal(lrap_score([[0, 1]], [[0.5, 0.5]]), 0.5)</div>
<div class="line"><span class="lineno"> 1336</span>    assert_almost_equal(lrap_score([[1, 1]], [[0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>    assert_almost_equal(lrap_score([[0, 0, 1]], [[0.25, 0.5, 0.5]]), 0.5)</div>
<div class="line"><span class="lineno"> 1339</span>    assert_almost_equal(lrap_score([[0, 1, 0]], [[0.25, 0.5, 0.5]]), 0.5)</div>
<div class="line"><span class="lineno"> 1340</span>    assert_almost_equal(lrap_score([[0, 1, 1]], [[0.25, 0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1341</span>    assert_almost_equal(lrap_score([[1, 0, 0]], [[0.25, 0.5, 0.5]]), 1 / 3)</div>
<div class="line"><span class="lineno"> 1342</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1343</span>        lrap_score([[1, 0, 1]], [[0.25, 0.5, 0.5]]), (2 / 3 + 1 / 2) / 2</div>
<div class="line"><span class="lineno"> 1344</span>    )</div>
<div class="line"><span class="lineno"> 1345</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1346</span>        lrap_score([[1, 1, 0]], [[0.25, 0.5, 0.5]]), (2 / 3 + 1 / 2) / 2</div>
<div class="line"><span class="lineno"> 1347</span>    )</div>
<div class="line"><span class="lineno"> 1348</span>    assert_almost_equal(lrap_score([[1, 1, 1]], [[0.25, 0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1349</span> </div>
<div class="line"><span class="lineno"> 1350</span>    assert_almost_equal(lrap_score([[1, 1, 0]], [[0.5, 0.5, 0.5]]), 2 / 3)</div>
<div class="line"><span class="lineno"> 1351</span> </div>
<div class="line"><span class="lineno"> 1352</span>    assert_almost_equal(lrap_score([[1, 1, 1, 0]], [[0.5, 0.5, 0.5, 0.5]]), 3 / 4)</div>
<div class="line"><span class="lineno"> 1353</span> </div>
<div class="line"><span class="lineno"> 1354</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="accae5bca6b039e756803504aaa64a66d" name="accae5bca6b039e756803504aaa64a66d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accae5bca6b039e756803504aaa64a66d">&#9670;&#160;</a></span>check_lrap_without_tie_and_increasing_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.check_lrap_without_tie_and_increasing_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lrap_score</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1419</span><span class="keyword">def </span>check_lrap_without_tie_and_increasing_score(lrap_score):</div>
<div class="line"><span class="lineno"> 1420</span>    <span class="comment"># Check that Label ranking average precision works for various</span></div>
<div class="line"><span class="lineno"> 1421</span>    <span class="comment"># Basic check with increasing label space size and decreasing score</span></div>
<div class="line"><span class="lineno"> 1422</span>    <span class="keywordflow">for</span> n_labels <span class="keywordflow">in</span> range(2, 10):</div>
<div class="line"><span class="lineno"> 1423</span>        y_score = n_labels - (np.arange(n_labels).reshape((1, n_labels)) + 1)</div>
<div class="line"><span class="lineno"> 1424</span> </div>
<div class="line"><span class="lineno"> 1425</span>        <span class="comment"># First and last</span></div>
<div class="line"><span class="lineno"> 1426</span>        y_true = np.zeros((1, n_labels))</div>
<div class="line"><span class="lineno"> 1427</span>        y_true[0, 0] = 1</div>
<div class="line"><span class="lineno"> 1428</span>        y_true[0, -1] = 1</div>
<div class="line"><span class="lineno"> 1429</span>        assert_almost_equal(lrap_score(y_true, y_score), (2 / n_labels + 1) / 2)</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>        <span class="comment"># Check for growing number of consecutive relevant label</span></div>
<div class="line"><span class="lineno"> 1432</span>        <span class="keywordflow">for</span> n_relevant <span class="keywordflow">in</span> range(1, n_labels):</div>
<div class="line"><span class="lineno"> 1433</span>            <span class="comment"># Check for a bunch of position</span></div>
<div class="line"><span class="lineno"> 1434</span>            <span class="keywordflow">for</span> pos <span class="keywordflow">in</span> range(n_labels - n_relevant):</div>
<div class="line"><span class="lineno"> 1435</span>                y_true = np.zeros((1, n_labels))</div>
<div class="line"><span class="lineno"> 1436</span>                y_true[0, pos : pos + n_relevant] = 1</div>
<div class="line"><span class="lineno"> 1437</span>                assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1438</span>                    lrap_score(y_true, y_score),</div>
<div class="line"><span class="lineno"> 1439</span>                    sum(</div>
<div class="line"><span class="lineno"> 1440</span>                        (r + 1) / ((pos + r + 1) * n_relevant)</div>
<div class="line"><span class="lineno"> 1441</span>                        <span class="keywordflow">for</span> r <span class="keywordflow">in</span> range(n_relevant)</div>
<div class="line"><span class="lineno"> 1442</span>                    ),</div>
<div class="line"><span class="lineno"> 1443</span>                )</div>
<div class="line"><span class="lineno"> 1444</span> </div>
<div class="line"><span class="lineno"> 1445</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a03f3cd7ae5b47f9637b51e6ade4cb004" name="a03f3cd7ae5b47f9637b51e6ade4cb004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03f3cd7ae5b47f9637b51e6ade4cb004">&#9670;&#160;</a></span>check_zero_or_all_relevant_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.check_zero_or_all_relevant_labels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lrap_score</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1355</span><span class="keyword">def </span>check_zero_or_all_relevant_labels(lrap_score):</div>
<div class="line"><span class="lineno"> 1356</span>    random_state = check_random_state(0)</div>
<div class="line"><span class="lineno"> 1357</span> </div>
<div class="line"><span class="lineno"> 1358</span>    <span class="keywordflow">for</span> n_labels <span class="keywordflow">in</span> range(2, 5):</div>
<div class="line"><span class="lineno"> 1359</span>        y_score = random_state.uniform(size=(1, n_labels))</div>
<div class="line"><span class="lineno"> 1360</span>        y_score_ties = np.zeros_like(y_score)</div>
<div class="line"><span class="lineno"> 1361</span> </div>
<div class="line"><span class="lineno"> 1362</span>        <span class="comment"># No relevant labels</span></div>
<div class="line"><span class="lineno"> 1363</span>        y_true = np.zeros((1, n_labels))</div>
<div class="line"><span class="lineno"> 1364</span>        <span class="keyword">assert</span> lrap_score(y_true, y_score) == 1.0</div>
<div class="line"><span class="lineno"> 1365</span>        <span class="keyword">assert</span> lrap_score(y_true, y_score_ties) == 1.0</div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span>        <span class="comment"># Only relevant labels</span></div>
<div class="line"><span class="lineno"> 1368</span>        y_true = np.ones((1, n_labels))</div>
<div class="line"><span class="lineno"> 1369</span>        <span class="keyword">assert</span> lrap_score(y_true, y_score) == 1.0</div>
<div class="line"><span class="lineno"> 1370</span>        <span class="keyword">assert</span> lrap_score(y_true, y_score_ties) == 1.0</div>
<div class="line"><span class="lineno"> 1371</span> </div>
<div class="line"><span class="lineno"> 1372</span>    <span class="comment"># Degenerate case: only one label</span></div>
<div class="line"><span class="lineno"> 1373</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1374</span>        lrap_score([[1], [0], [1], [0]], [[0.5], [0.5], [0.5], [0.5]]), 1.0</div>
<div class="line"><span class="lineno"> 1375</span>    )</div>
<div class="line"><span class="lineno"> 1376</span> </div>
<div class="line"><span class="lineno"> 1377</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adfb997de46c277232caeadffcbaa0cee" name="adfb997de46c277232caeadffcbaa0cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfb997de46c277232caeadffcbaa0cee">&#9670;&#160;</a></span>make_prediction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.make_prediction </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dataset</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>binary</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Make some classification predictions on a toy dataset using a SVC

If binary is True restrict to a binary classification problem instead of a
multiclass classification problem
</pre> <div class="fragment"><div class="line"><span class="lineno">   52</span><span class="keyword">def </span>make_prediction(dataset=None, binary=False):</div>
<div class="line"><span class="lineno">   53</span>    <span class="stringliteral">&quot;&quot;&quot;Make some classification predictions on a toy dataset using a SVC</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">    If binary is True restrict to a binary classification problem instead of a</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    multiclass classification problem</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">if</span> dataset <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   60</span>        <span class="comment"># import some data to play with</span></div>
<div class="line"><span class="lineno">   61</span>        dataset = datasets.load_iris()</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>    X = dataset.data</div>
<div class="line"><span class="lineno">   64</span>    y = dataset.target</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">if</span> binary:</div>
<div class="line"><span class="lineno">   67</span>        <span class="comment"># restrict to a binary classification task</span></div>
<div class="line"><span class="lineno">   68</span>        X, y = X[y &lt; 2], y[y &lt; 2]</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    n_samples, n_features = X.shape</div>
<div class="line"><span class="lineno">   71</span>    p = np.arange(n_samples)</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    rng = check_random_state(37)</div>
<div class="line"><span class="lineno">   74</span>    rng.shuffle(p)</div>
<div class="line"><span class="lineno">   75</span>    X, y = X[p], y[p]</div>
<div class="line"><span class="lineno">   76</span>    half = int(n_samples / 2)</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    <span class="comment"># add noisy features to make the problem harder and avoid perfect results</span></div>
<div class="line"><span class="lineno">   79</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">   80</span>    X = np.c_[X, rng.randn(n_samples, 200 * n_features)]</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="comment"># run classifier, get class probabilities and label predictions</span></div>
<div class="line"><span class="lineno">   83</span>    clf = svm.SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>, probability=<span class="keyword">True</span>, random_state=0)</div>
<div class="line"><span class="lineno">   84</span>    y_score = clf.fit(X[:half], y[:half]).predict_proba(X[half:])</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">if</span> binary:</div>
<div class="line"><span class="lineno">   87</span>        <span class="comment"># only interested in probabilities of the positive case</span></div>
<div class="line"><span class="lineno">   88</span>        <span class="comment"># XXX: do we really want a special API for the binary case?</span></div>
<div class="line"><span class="lineno">   89</span>        y_score = y_score[:, 1]</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>    y_pred = clf.predict(X[half:])</div>
<div class="line"><span class="lineno">   92</span>    y_true = y[half:]</div>
<div class="line"><span class="lineno">   93</span>    <span class="keywordflow">return</span> y_true, y_pred, y_score</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afbb55ba5dce5ebf2e23874de07e33f65" name="afbb55ba5dce5ebf2e23874de07e33f65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb55ba5dce5ebf2e23874de07e33f65">&#9670;&#160;</a></span>test_alternative_lrap_implementation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_alternative_lrap_implementation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>random_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1537</span><span class="keyword">def </span>test_alternative_lrap_implementation(n_samples, n_classes, random_state):</div>
<div class="line"><span class="lineno"> 1538</span> </div>
<div class="line"><span class="lineno"> 1539</span>    check_alternative_lrap_implementation(</div>
<div class="line"><span class="lineno"> 1540</span>        label_ranking_average_precision_score, n_classes, n_samples, random_state</div>
<div class="line"><span class="lineno"> 1541</span>    )</div>
<div class="line"><span class="lineno"> 1542</span> </div>
<div class="line"><span class="lineno"> 1543</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e08c47776de6aa2c7bcf1e3eeba3b87" name="a7e08c47776de6aa2c7bcf1e3eeba3b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e08c47776de6aa2c7bcf1e3eeba3b87">&#9670;&#160;</a></span>test_auc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_auc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  442</span><span class="keyword">def </span>test_auc():</div>
<div class="line"><span class="lineno">  443</span>    <span class="comment"># Test Area Under Curve (AUC) computation</span></div>
<div class="line"><span class="lineno">  444</span>    x = [0, 1]</div>
<div class="line"><span class="lineno">  445</span>    y = [0, 1]</div>
<div class="line"><span class="lineno">  446</span>    assert_array_almost_equal(auc(x, y), 0.5)</div>
<div class="line"><span class="lineno">  447</span>    x = [1, 0]</div>
<div class="line"><span class="lineno">  448</span>    y = [0, 1]</div>
<div class="line"><span class="lineno">  449</span>    assert_array_almost_equal(auc(x, y), 0.5)</div>
<div class="line"><span class="lineno">  450</span>    x = [1, 0, 0]</div>
<div class="line"><span class="lineno">  451</span>    y = [0, 1, 1]</div>
<div class="line"><span class="lineno">  452</span>    assert_array_almost_equal(auc(x, y), 0.5)</div>
<div class="line"><span class="lineno">  453</span>    x = [0, 1]</div>
<div class="line"><span class="lineno">  454</span>    y = [1, 1]</div>
<div class="line"><span class="lineno">  455</span>    assert_array_almost_equal(auc(x, y), 1)</div>
<div class="line"><span class="lineno">  456</span>    x = [0, 0.5, 1]</div>
<div class="line"><span class="lineno">  457</span>    y = [0, 0.5, 1]</div>
<div class="line"><span class="lineno">  458</span>    assert_array_almost_equal(auc(x, y), 0.5)</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a78b90b77bdf9833408e01498b591313d" name="a78b90b77bdf9833408e01498b591313d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b90b77bdf9833408e01498b591313d">&#9670;&#160;</a></span>test_auc_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_auc_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  461</span><span class="keyword">def </span>test_auc_errors():</div>
<div class="line"><span class="lineno">  462</span>    <span class="comment"># Incompatible shapes</span></div>
<div class="line"><span class="lineno">  463</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  464</span>        auc([0.0, 0.5, 1.0], [0.1, 0.2])</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>    <span class="comment"># Too few x values</span></div>
<div class="line"><span class="lineno">  467</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  468</span>        auc([0.0], [0.1])</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>    <span class="comment"># x is not in order</span></div>
<div class="line"><span class="lineno">  471</span>    x = [2, 1, 3, 4]</div>
<div class="line"><span class="lineno">  472</span>    y = [5, 6, 7, 8]</div>
<div class="line"><span class="lineno">  473</span>    error_message = <span class="stringliteral">&quot;x is neither increasing nor decreasing : {}&quot;</span>.format(np.array(x))</div>
<div class="line"><span class="lineno">  474</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=re.escape(error_message)):</div>
<div class="line"><span class="lineno">  475</span>        auc(x, y)</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  479</span>    <span class="stringliteral">&quot;y_true, labels&quot;</span>,</div>
<div class="line"><span class="lineno">  480</span>    [</div>
<div class="line"><span class="lineno">  481</span>        (np.array([0, 1, 0, 2]), [0, 1, 2]),</div>
<div class="line"><span class="lineno">  482</span>        (np.array([0, 1, 0, 2]), <span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno">  483</span>        ([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]),</div>
<div class="line"><span class="lineno">  484</span>        ([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], <span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno">  485</span>    ],</div>
<div class="line"><span class="lineno">  486</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a18944cd44599a4e6c638fce56a730579" name="a18944cd44599a4e6c638fce56a730579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18944cd44599a4e6c638fce56a730579">&#9670;&#160;</a></span>test_auc_score_non_binary_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_auc_score_non_binary_class </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  803</span><span class="keyword">def </span>test_auc_score_non_binary_class():</div>
<div class="line"><span class="lineno">  804</span>    <span class="comment"># Test that roc_auc_score function returns an error when trying</span></div>
<div class="line"><span class="lineno">  805</span>    <span class="comment"># to compute AUC for non-binary class values.</span></div>
<div class="line"><span class="lineno">  806</span>    rng = check_random_state(404)</div>
<div class="line"><span class="lineno">  807</span>    y_pred = rng.rand(10)</div>
<div class="line"><span class="lineno">  808</span>    <span class="comment"># y_true contains only one class value</span></div>
<div class="line"><span class="lineno">  809</span>    y_true = np.zeros(10, dtype=<span class="stringliteral">&quot;int&quot;</span>)</div>
<div class="line"><span class="lineno">  810</span>    err_msg = <span class="stringliteral">&quot;ROC AUC score is not defined&quot;</span></div>
<div class="line"><span class="lineno">  811</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  812</span>        roc_auc_score(y_true, y_pred)</div>
<div class="line"><span class="lineno">  813</span>    y_true = np.ones(10, dtype=<span class="stringliteral">&quot;int&quot;</span>)</div>
<div class="line"><span class="lineno">  814</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  815</span>        roc_auc_score(y_true, y_pred)</div>
<div class="line"><span class="lineno">  816</span>    y_true = np.full(10, -1, dtype=<span class="stringliteral">&quot;int&quot;</span>)</div>
<div class="line"><span class="lineno">  817</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  818</span>        roc_auc_score(y_true, y_pred)</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno">  821</span>        rng = check_random_state(404)</div>
<div class="line"><span class="lineno">  822</span>        y_pred = rng.rand(10)</div>
<div class="line"><span class="lineno">  823</span>        <span class="comment"># y_true contains only one class value</span></div>
<div class="line"><span class="lineno">  824</span>        y_true = np.zeros(10, dtype=<span class="stringliteral">&quot;int&quot;</span>)</div>
<div class="line"><span class="lineno">  825</span>        <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  826</span>            roc_auc_score(y_true, y_pred)</div>
<div class="line"><span class="lineno">  827</span>        y_true = np.ones(10, dtype=<span class="stringliteral">&quot;int&quot;</span>)</div>
<div class="line"><span class="lineno">  828</span>        <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  829</span>            roc_auc_score(y_true, y_pred)</div>
<div class="line"><span class="lineno">  830</span>        y_true = np.full(10, -1, dtype=<span class="stringliteral">&quot;int&quot;</span>)</div>
<div class="line"><span class="lineno">  831</span>        <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  832</span>            roc_auc_score(y_true, y_pred)</div>
<div class="line"><span class="lineno">  833</span> </div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span><span class="preprocessor">@pytest.mark.parametrize(&quot;curve_func&quot;, CURVE_FUNCS)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b1fc15953499379501f26207621b0c2" name="a6b1fc15953499379501f26207621b0c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b1fc15953499379501f26207621b0c2">&#9670;&#160;</a></span>test_average_precision_constant_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_average_precision_constant_values </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1103</span><span class="keyword">def </span>test_average_precision_constant_values():</div>
<div class="line"><span class="lineno"> 1104</span>    <span class="comment"># Check the average_precision_score of a constant predictor is</span></div>
<div class="line"><span class="lineno"> 1105</span>    <span class="comment"># the TPR</span></div>
<div class="line"><span class="lineno"> 1106</span> </div>
<div class="line"><span class="lineno"> 1107</span>    <span class="comment"># Generate a dataset with 25% of positives</span></div>
<div class="line"><span class="lineno"> 1108</span>    y_true = np.zeros(100, dtype=int)</div>
<div class="line"><span class="lineno"> 1109</span>    y_true[::4] = 1</div>
<div class="line"><span class="lineno"> 1110</span>    <span class="comment"># And a constant score</span></div>
<div class="line"><span class="lineno"> 1111</span>    y_score = np.ones(100)</div>
<div class="line"><span class="lineno"> 1112</span>    <span class="comment"># The precision is then the fraction of positive whatever the recall</span></div>
<div class="line"><span class="lineno"> 1113</span>    <span class="comment"># is, as there is only one threshold:</span></div>
<div class="line"><span class="lineno"> 1114</span>    <span class="keyword">assert</span> average_precision_score(y_true, y_score) == 0.25</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a79ba0e281213251bba2f476335027502" name="a79ba0e281213251bba2f476335027502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79ba0e281213251bba2f476335027502">&#9670;&#160;</a></span>test_average_precision_score_pos_label_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_average_precision_score_pos_label_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1117</span><span class="keyword">def </span>test_average_precision_score_pos_label_errors():</div>
<div class="line"><span class="lineno"> 1118</span>    <span class="comment"># Raise an error when pos_label is not in binary y_true</span></div>
<div class="line"><span class="lineno"> 1119</span>    y_true = np.array([0, 1])</div>
<div class="line"><span class="lineno"> 1120</span>    y_pred = np.array([0, 1])</div>
<div class="line"><span class="lineno"> 1121</span>    err_msg = <span class="stringliteral">r&quot;pos_label=2 is not a valid label. It should be one of \[0, 1\]&quot;</span></div>
<div class="line"><span class="lineno"> 1122</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1123</span>        average_precision_score(y_true, y_pred, pos_label=2)</div>
<div class="line"><span class="lineno"> 1124</span>    <span class="comment"># Raise an error for multilabel-indicator y_true with</span></div>
<div class="line"><span class="lineno"> 1125</span>    <span class="comment"># pos_label other than 1</span></div>
<div class="line"><span class="lineno"> 1126</span>    y_true = np.array([[1, 0], [0, 1], [0, 1], [1, 0]])</div>
<div class="line"><span class="lineno"> 1127</span>    y_pred = np.array([[0.9, 0.1], [0.1, 0.9], [0.8, 0.2], [0.2, 0.8]])</div>
<div class="line"><span class="lineno"> 1128</span>    err_msg = (</div>
<div class="line"><span class="lineno"> 1129</span>        <span class="stringliteral">&quot;Parameter pos_label is fixed to 1 for multilabel-indicator y_true. &quot;</span></div>
<div class="line"><span class="lineno"> 1130</span>        <span class="stringliteral">&quot;Do not set pos_label or set pos_label to 1.&quot;</span></div>
<div class="line"><span class="lineno"> 1131</span>    )</div>
<div class="line"><span class="lineno"> 1132</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1133</span>        average_precision_score(y_true, y_pred, pos_label=0)</div>
<div class="line"><span class="lineno"> 1134</span> </div>
<div class="line"><span class="lineno"> 1135</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afa2baf6036eae335a39226ca5416d397" name="afa2baf6036eae335a39226ca5416d397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa2baf6036eae335a39226ca5416d397">&#9670;&#160;</a></span>test_binary_clf_curve_implicit_pos_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_binary_clf_curve_implicit_pos_label </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>curve_func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  846</span><span class="keyword">def </span>test_binary_clf_curve_implicit_pos_label(curve_func):</div>
<div class="line"><span class="lineno">  847</span>    <span class="comment"># Check that using string class labels raises an informative</span></div>
<div class="line"><span class="lineno">  848</span>    <span class="comment"># error for any supported string dtype:</span></div>
<div class="line"><span class="lineno">  849</span>    msg = (</div>
<div class="line"><span class="lineno">  850</span>        <span class="stringliteral">&quot;y_true takes value in {&#39;a&#39;, &#39;b&#39;} and pos_label is &quot;</span></div>
<div class="line"><span class="lineno">  851</span>        <span class="stringliteral">&quot;not specified: either make y_true take &quot;</span></div>
<div class="line"><span class="lineno">  852</span>        <span class="stringliteral">&quot;value in {0, 1} or {-1, 1} or pass pos_label &quot;</span></div>
<div class="line"><span class="lineno">  853</span>        <span class="stringliteral">&quot;explicitly.&quot;</span></div>
<div class="line"><span class="lineno">  854</span>    )</div>
<div class="line"><span class="lineno">  855</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  856</span>        curve_func(np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], dtype=<span class="stringliteral">&quot;&lt;U1&quot;</span>), [0.0, 1.0])</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  859</span>        curve_func(np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], dtype=object), [0.0, 1.0])</div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>    <span class="comment"># The error message is slightly different for bytes-encoded</span></div>
<div class="line"><span class="lineno">  862</span>    <span class="comment"># class labels, but otherwise the behavior is the same:</span></div>
<div class="line"><span class="lineno">  863</span>    msg = (</div>
<div class="line"><span class="lineno">  864</span>        <span class="stringliteral">&quot;y_true takes value in {b&#39;a&#39;, b&#39;b&#39;} and pos_label is &quot;</span></div>
<div class="line"><span class="lineno">  865</span>        <span class="stringliteral">&quot;not specified: either make y_true take &quot;</span></div>
<div class="line"><span class="lineno">  866</span>        <span class="stringliteral">&quot;value in {0, 1} or {-1, 1} or pass pos_label &quot;</span></div>
<div class="line"><span class="lineno">  867</span>        <span class="stringliteral">&quot;explicitly.&quot;</span></div>
<div class="line"><span class="lineno">  868</span>    )</div>
<div class="line"><span class="lineno">  869</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  870</span>        curve_func(np.array([b<span class="stringliteral">&quot;a&quot;</span>, b<span class="stringliteral">&quot;b&quot;</span>], dtype=<span class="stringliteral">&quot;&lt;S1&quot;</span>), [0.0, 1.0])</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>    <span class="comment"># Check that it is possible to use floating point class labels</span></div>
<div class="line"><span class="lineno">  873</span>    <span class="comment"># that are interpreted similarly to integer class labels:</span></div>
<div class="line"><span class="lineno">  874</span>    y_pred = [0.0, 1.0, 0.2, 0.42]</div>
<div class="line"><span class="lineno">  875</span>    int_curve = curve_func([0, 1, 1, 0], y_pred)</div>
<div class="line"><span class="lineno">  876</span>    float_curve = curve_func([0.0, 1.0, 1.0, 0.0], y_pred)</div>
<div class="line"><span class="lineno">  877</span>    <span class="keywordflow">for</span> int_curve_part, float_curve_part <span class="keywordflow">in</span> zip(int_curve, float_curve):</div>
<div class="line"><span class="lineno">  878</span>        np.testing.assert_allclose(int_curve_part, float_curve_part)</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span><span class="preprocessor">@pytest.mark.parametrize(&quot;curve_func&quot;, CURVE_FUNCS)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a434c4aaa3e20ffe022eae8bb2ccc49b3" name="a434c4aaa3e20ffe022eae8bb2ccc49b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434c4aaa3e20ffe022eae8bb2ccc49b3">&#9670;&#160;</a></span>test_binary_clf_curve_multiclass_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_binary_clf_curve_multiclass_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>curve_func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  836</span><span class="keyword">def </span>test_binary_clf_curve_multiclass_error(curve_func):</div>
<div class="line"><span class="lineno">  837</span>    rng = check_random_state(404)</div>
<div class="line"><span class="lineno">  838</span>    y_true = rng.randint(0, 3, size=10)</div>
<div class="line"><span class="lineno">  839</span>    y_pred = rng.rand(10)</div>
<div class="line"><span class="lineno">  840</span>    msg = <span class="stringliteral">&quot;multiclass format is not supported&quot;</span></div>
<div class="line"><span class="lineno">  841</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  842</span>        curve_func(y_true, y_pred)</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span> </div>
<div class="line"><span class="lineno">  845</span><span class="preprocessor">@pytest.mark.parametrize(&quot;curve_func&quot;, CURVE_FUNCS)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a038405ad0d92aedb5f1d4c78ca621547" name="a038405ad0d92aedb5f1d4c78ca621547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a038405ad0d92aedb5f1d4c78ca621547">&#9670;&#160;</a></span>test_binary_clf_curve_zero_sample_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_binary_clf_curve_zero_sample_weight </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>curve_func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  882</span><span class="keyword">def </span>test_binary_clf_curve_zero_sample_weight(curve_func):</div>
<div class="line"><span class="lineno">  883</span>    y_true = [0, 0, 1, 1, 1]</div>
<div class="line"><span class="lineno">  884</span>    y_score = [0.1, 0.2, 0.3, 0.4, 0.5]</div>
<div class="line"><span class="lineno">  885</span>    sample_weight = [1, 1, 1, 0.5, 0]</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>    result_1 = curve_func(y_true, y_score, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno">  888</span>    result_2 = curve_func(y_true[:-1], y_score[:-1], sample_weight=sample_weight[:-1])</div>
<div class="line"><span class="lineno">  889</span> </div>
<div class="line"><span class="lineno">  890</span>    <span class="keywordflow">for</span> arr_1, arr_2 <span class="keywordflow">in</span> zip(result_1, result_2):</div>
<div class="line"><span class="lineno">  891</span>        assert_allclose(arr_1, arr_2)</div>
<div class="line"><span class="lineno">  892</span> </div>
<div class="line"><span class="lineno">  893</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9203c53cf5e8efc2a321b52937dabd1b" name="a9203c53cf5e8efc2a321b52937dabd1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9203c53cf5e8efc2a321b52937dabd1b">&#9670;&#160;</a></span>test_coverage_1d_error_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_coverage_1d_error_message </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1644</span><span class="keyword">def </span>test_coverage_1d_error_message(y_true, y_score):</div>
<div class="line"><span class="lineno"> 1645</span>    <span class="comment"># Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 1646</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/23368</span></div>
<div class="line"><span class="lineno"> 1647</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">r&quot;Expected 2D array, got 1D array instead&quot;</span>):</div>
<div class="line"><span class="lineno"> 1648</span>        coverage_error(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1649</span> </div>
<div class="line"><span class="lineno"> 1650</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1dc1c36770d2fd1127099833c80221b" name="ab1dc1c36770d2fd1127099833c80221b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1dc1c36770d2fd1127099833c80221b">&#9670;&#160;</a></span>test_coverage_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_coverage_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1565</span><span class="keyword">def </span>test_coverage_error():</div>
<div class="line"><span class="lineno"> 1566</span>    <span class="comment"># Toy case</span></div>
<div class="line"><span class="lineno"> 1567</span>    assert_almost_equal(coverage_error([[0, 1]], [[0.25, 0.75]]), 1)</div>
<div class="line"><span class="lineno"> 1568</span>    assert_almost_equal(coverage_error([[0, 1]], [[0.75, 0.25]]), 2)</div>
<div class="line"><span class="lineno"> 1569</span>    assert_almost_equal(coverage_error([[1, 1]], [[0.75, 0.25]]), 2)</div>
<div class="line"><span class="lineno"> 1570</span>    assert_almost_equal(coverage_error([[0, 0]], [[0.75, 0.25]]), 0)</div>
<div class="line"><span class="lineno"> 1571</span> </div>
<div class="line"><span class="lineno"> 1572</span>    assert_almost_equal(coverage_error([[0, 0, 0]], [[0.25, 0.5, 0.75]]), 0)</div>
<div class="line"><span class="lineno"> 1573</span>    assert_almost_equal(coverage_error([[0, 0, 1]], [[0.25, 0.5, 0.75]]), 1)</div>
<div class="line"><span class="lineno"> 1574</span>    assert_almost_equal(coverage_error([[0, 1, 0]], [[0.25, 0.5, 0.75]]), 2)</div>
<div class="line"><span class="lineno"> 1575</span>    assert_almost_equal(coverage_error([[0, 1, 1]], [[0.25, 0.5, 0.75]]), 2)</div>
<div class="line"><span class="lineno"> 1576</span>    assert_almost_equal(coverage_error([[1, 0, 0]], [[0.25, 0.5, 0.75]]), 3)</div>
<div class="line"><span class="lineno"> 1577</span>    assert_almost_equal(coverage_error([[1, 0, 1]], [[0.25, 0.5, 0.75]]), 3)</div>
<div class="line"><span class="lineno"> 1578</span>    assert_almost_equal(coverage_error([[1, 1, 0]], [[0.25, 0.5, 0.75]]), 3)</div>
<div class="line"><span class="lineno"> 1579</span>    assert_almost_equal(coverage_error([[1, 1, 1]], [[0.25, 0.5, 0.75]]), 3)</div>
<div class="line"><span class="lineno"> 1580</span> </div>
<div class="line"><span class="lineno"> 1581</span>    assert_almost_equal(coverage_error([[0, 0, 0]], [[0.75, 0.5, 0.25]]), 0)</div>
<div class="line"><span class="lineno"> 1582</span>    assert_almost_equal(coverage_error([[0, 0, 1]], [[0.75, 0.5, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1583</span>    assert_almost_equal(coverage_error([[0, 1, 0]], [[0.75, 0.5, 0.25]]), 2)</div>
<div class="line"><span class="lineno"> 1584</span>    assert_almost_equal(coverage_error([[0, 1, 1]], [[0.75, 0.5, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1585</span>    assert_almost_equal(coverage_error([[1, 0, 0]], [[0.75, 0.5, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1586</span>    assert_almost_equal(coverage_error([[1, 0, 1]], [[0.75, 0.5, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1587</span>    assert_almost_equal(coverage_error([[1, 1, 0]], [[0.75, 0.5, 0.25]]), 2)</div>
<div class="line"><span class="lineno"> 1588</span>    assert_almost_equal(coverage_error([[1, 1, 1]], [[0.75, 0.5, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1589</span> </div>
<div class="line"><span class="lineno"> 1590</span>    assert_almost_equal(coverage_error([[0, 0, 0]], [[0.5, 0.75, 0.25]]), 0)</div>
<div class="line"><span class="lineno"> 1591</span>    assert_almost_equal(coverage_error([[0, 0, 1]], [[0.5, 0.75, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1592</span>    assert_almost_equal(coverage_error([[0, 1, 0]], [[0.5, 0.75, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1593</span>    assert_almost_equal(coverage_error([[0, 1, 1]], [[0.5, 0.75, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1594</span>    assert_almost_equal(coverage_error([[1, 0, 0]], [[0.5, 0.75, 0.25]]), 2)</div>
<div class="line"><span class="lineno"> 1595</span>    assert_almost_equal(coverage_error([[1, 0, 1]], [[0.5, 0.75, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1596</span>    assert_almost_equal(coverage_error([[1, 1, 0]], [[0.5, 0.75, 0.25]]), 2)</div>
<div class="line"><span class="lineno"> 1597</span>    assert_almost_equal(coverage_error([[1, 1, 1]], [[0.5, 0.75, 0.25]]), 3)</div>
<div class="line"><span class="lineno"> 1598</span> </div>
<div class="line"><span class="lineno"> 1599</span>    <span class="comment"># Non trivial case</span></div>
<div class="line"><span class="lineno"> 1600</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1601</span>        coverage_error([[0, 1, 0], [1, 1, 0]], [[0.1, 10.0, -3], [0, 1, 3]]),</div>
<div class="line"><span class="lineno"> 1602</span>        (1 + 3) / 2.0,</div>
<div class="line"><span class="lineno"> 1603</span>    )</div>
<div class="line"><span class="lineno"> 1604</span> </div>
<div class="line"><span class="lineno"> 1605</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1606</span>        coverage_error(</div>
<div class="line"><span class="lineno"> 1607</span>            [[0, 1, 0], [1, 1, 0], [0, 1, 1]], [[0.1, 10, -3], [0, 1, 3], [0, 2, 0]]</div>
<div class="line"><span class="lineno"> 1608</span>        ),</div>
<div class="line"><span class="lineno"> 1609</span>        (1 + 3 + 3) / 3.0,</div>
<div class="line"><span class="lineno"> 1610</span>    )</div>
<div class="line"><span class="lineno"> 1611</span> </div>
<div class="line"><span class="lineno"> 1612</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1613</span>        coverage_error(</div>
<div class="line"><span class="lineno"> 1614</span>            [[0, 1, 0], [1, 1, 0], [0, 1, 1]], [[0.1, 10, -3], [3, 1, 3], [0, 2, 0]]</div>
<div class="line"><span class="lineno"> 1615</span>        ),</div>
<div class="line"><span class="lineno"> 1616</span>        (1 + 3 + 3) / 3.0,</div>
<div class="line"><span class="lineno"> 1617</span>    )</div>
<div class="line"><span class="lineno"> 1618</span> </div>
<div class="line"><span class="lineno"> 1619</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf65173966395c30783b3037b0e3d904" name="aaf65173966395c30783b3037b0e3d904"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf65173966395c30783b3037b0e3d904">&#9670;&#160;</a></span>test_coverage_tie_handling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_coverage_tie_handling </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1620</span><span class="keyword">def </span>test_coverage_tie_handling():</div>
<div class="line"><span class="lineno"> 1621</span>    assert_almost_equal(coverage_error([[0, 0]], [[0.5, 0.5]]), 0)</div>
<div class="line"><span class="lineno"> 1622</span>    assert_almost_equal(coverage_error([[1, 0]], [[0.5, 0.5]]), 2)</div>
<div class="line"><span class="lineno"> 1623</span>    assert_almost_equal(coverage_error([[0, 1]], [[0.5, 0.5]]), 2)</div>
<div class="line"><span class="lineno"> 1624</span>    assert_almost_equal(coverage_error([[1, 1]], [[0.5, 0.5]]), 2)</div>
<div class="line"><span class="lineno"> 1625</span> </div>
<div class="line"><span class="lineno"> 1626</span>    assert_almost_equal(coverage_error([[0, 0, 0]], [[0.25, 0.5, 0.5]]), 0)</div>
<div class="line"><span class="lineno"> 1627</span>    assert_almost_equal(coverage_error([[0, 0, 1]], [[0.25, 0.5, 0.5]]), 2)</div>
<div class="line"><span class="lineno"> 1628</span>    assert_almost_equal(coverage_error([[0, 1, 0]], [[0.25, 0.5, 0.5]]), 2)</div>
<div class="line"><span class="lineno"> 1629</span>    assert_almost_equal(coverage_error([[0, 1, 1]], [[0.25, 0.5, 0.5]]), 2)</div>
<div class="line"><span class="lineno"> 1630</span>    assert_almost_equal(coverage_error([[1, 0, 0]], [[0.25, 0.5, 0.5]]), 3)</div>
<div class="line"><span class="lineno"> 1631</span>    assert_almost_equal(coverage_error([[1, 0, 1]], [[0.25, 0.5, 0.5]]), 3)</div>
<div class="line"><span class="lineno"> 1632</span>    assert_almost_equal(coverage_error([[1, 1, 0]], [[0.25, 0.5, 0.5]]), 3)</div>
<div class="line"><span class="lineno"> 1633</span>    assert_almost_equal(coverage_error([[1, 1, 1]], [[0.25, 0.5, 0.5]]), 3)</div>
<div class="line"><span class="lineno"> 1634</span> </div>
<div class="line"><span class="lineno"> 1635</span> </div>
<div class="line"><span class="lineno"> 1636</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1637</span>    <span class="stringliteral">&quot;y_true, y_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1638</span>    [</div>
<div class="line"><span class="lineno"> 1639</span>        ([1, 0, 1], [0.25, 0.5, 0.5]),</div>
<div class="line"><span class="lineno"> 1640</span>        ([1, 0, 1], [[0.25, 0.5, 0.5]]),</div>
<div class="line"><span class="lineno"> 1641</span>        ([[1, 0, 1]], [0.25, 0.5, 0.5]),</div>
<div class="line"><span class="lineno"> 1642</span>    ],</div>
<div class="line"><span class="lineno"> 1643</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f310cd18205b01f72475b78e58a708d" name="a7f310cd18205b01f72475b78e58a708d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f310cd18205b01f72475b78e58a708d">&#9670;&#160;</a></span>test_dcg_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_dcg_score </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1730</span><span class="keyword">def </span>test_dcg_score():</div>
<div class="line"><span class="lineno"> 1731</span>    _, y_true = make_multilabel_classification(random_state=0, n_classes=10)</div>
<div class="line"><span class="lineno"> 1732</span>    y_score = -y_true + 1</div>
<div class="line"><span class="lineno"> 1733</span>    _test_dcg_score_for(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1734</span>    y_true, y_score = np.random.RandomState(0).random_sample((2, 100, 10))</div>
<div class="line"><span class="lineno"> 1735</span>    _test_dcg_score_for(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1736</span> </div>
<div class="line"><span class="lineno"> 1737</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5eee4a5ac03950c37b4c000e2787b347" name="a5eee4a5ac03950c37b4c000e2787b347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eee4a5ac03950c37b4c000e2787b347">&#9670;&#160;</a></span>test_dcg_ties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_dcg_ties </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1749</span><span class="keyword">def </span>test_dcg_ties():</div>
<div class="line"><span class="lineno"> 1750</span>    y_true = np.asarray([np.arange(5)])</div>
<div class="line"><span class="lineno"> 1751</span>    y_score = np.zeros(y_true.shape)</div>
<div class="line"><span class="lineno"> 1752</span>    dcg = _dcg_sample_scores(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1753</span>    dcg_ignore_ties = _dcg_sample_scores(y_true, y_score, ignore_ties=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1754</span>    discounts = 1 / np.log2(np.arange(2, 7))</div>
<div class="line"><span class="lineno"> 1755</span>    <span class="keyword">assert</span> dcg == pytest.approx([discounts.sum() * y_true.mean()])</div>
<div class="line"><span class="lineno"> 1756</span>    <span class="keyword">assert</span> dcg_ignore_ties == pytest.approx([(discounts * y_true[:, ::-1]).sum()])</div>
<div class="line"><span class="lineno"> 1757</span>    y_score[0, 3:] = 1</div>
<div class="line"><span class="lineno"> 1758</span>    dcg = _dcg_sample_scores(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1759</span>    dcg_ignore_ties = _dcg_sample_scores(y_true, y_score, ignore_ties=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1760</span>    <span class="keyword">assert</span> dcg_ignore_ties == pytest.approx([(discounts * y_true[:, ::-1]).sum()])</div>
<div class="line"><span class="lineno"> 1761</span>    <span class="keyword">assert</span> dcg == pytest.approx(</div>
<div class="line"><span class="lineno"> 1762</span>        [</div>
<div class="line"><span class="lineno"> 1763</span>            discounts[:2].sum() * y_true[0, 3:].mean()</div>
<div class="line"><span class="lineno"> 1764</span>            + discounts[2:].sum() * y_true[0, :3].mean()</div>
<div class="line"><span class="lineno"> 1765</span>        ]</div>
<div class="line"><span class="lineno"> 1766</span>    )</div>
<div class="line"><span class="lineno"> 1767</span> </div>
<div class="line"><span class="lineno"> 1768</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adf4b486ba8aa5bad920643e265bf12e0" name="adf4b486ba8aa5bad920643e265bf12e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf4b486ba8aa5bad920643e265bf12e0">&#9670;&#160;</a></span>test_det_curve_bad_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_det_curve_bad_input </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_pred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>err_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1264</span><span class="keyword">def </span>test_det_curve_bad_input(y_true, y_pred, err_msg):</div>
<div class="line"><span class="lineno"> 1265</span>    <span class="comment"># input variables with inconsistent numbers of samples</span></div>
<div class="line"><span class="lineno"> 1266</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1267</span>        det_curve(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1268</span> </div>
<div class="line"><span class="lineno"> 1269</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a853f20268c73404b9a0b340612c49ecc" name="a853f20268c73404b9a0b340612c49ecc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a853f20268c73404b9a0b340612c49ecc">&#9670;&#160;</a></span>test_det_curve_constant_scores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_det_curve_constant_scores </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1223</span><span class="keyword">def </span>test_det_curve_constant_scores(y_score):</div>
<div class="line"><span class="lineno"> 1224</span>    fpr, fnr, threshold = det_curve(</div>
<div class="line"><span class="lineno"> 1225</span>        y_true=[0, 1, 0, 1, 0, 1], y_score=np.full(6, y_score)</div>
<div class="line"><span class="lineno"> 1226</span>    )</div>
<div class="line"><span class="lineno"> 1227</span> </div>
<div class="line"><span class="lineno"> 1228</span>    assert_allclose(fpr, [1])</div>
<div class="line"><span class="lineno"> 1229</span>    assert_allclose(fnr, [0])</div>
<div class="line"><span class="lineno"> 1230</span>    assert_allclose(threshold, [y_score])</div>
<div class="line"><span class="lineno"> 1231</span> </div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1234</span>    <span class="stringliteral">&quot;y_true&quot;</span>,</div>
<div class="line"><span class="lineno"> 1235</span>    [</div>
<div class="line"><span class="lineno"> 1236</span>        ([0, 0, 0, 0, 0, 1]),</div>
<div class="line"><span class="lineno"> 1237</span>        ([0, 0, 0, 0, 1, 1]),</div>
<div class="line"><span class="lineno"> 1238</span>        ([0, 0, 0, 1, 1, 1]),</div>
<div class="line"><span class="lineno"> 1239</span>        ([0, 0, 1, 1, 1, 1]),</div>
<div class="line"><span class="lineno"> 1240</span>        ([0, 1, 1, 1, 1, 1]),</div>
<div class="line"><span class="lineno"> 1241</span>    ],</div>
<div class="line"><span class="lineno"> 1242</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e931fc509c0951e4d913555474a4cce" name="a3e931fc509c0951e4d913555474a4cce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e931fc509c0951e4d913555474a4cce">&#9670;&#160;</a></span>test_det_curve_perfect_scores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_det_curve_perfect_scores </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1243</span><span class="keyword">def </span>test_det_curve_perfect_scores(y_true):</div>
<div class="line"><span class="lineno"> 1244</span>    fpr, fnr, _ = det_curve(y_true=y_true, y_score=y_true)</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>    assert_allclose(fpr, [0])</div>
<div class="line"><span class="lineno"> 1247</span>    assert_allclose(fnr, [0])</div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1251</span>    <span class="stringliteral">&quot;y_true, y_pred, err_msg&quot;</span>,</div>
<div class="line"><span class="lineno"> 1252</span>    [</div>
<div class="line"><span class="lineno"> 1253</span>        ([0, 1], [0, 0.5, 1], <span class="stringliteral">&quot;inconsistent numbers of samples&quot;</span>),</div>
<div class="line"><span class="lineno"> 1254</span>        ([0, 1, 1], [0, 0.5], <span class="stringliteral">&quot;inconsistent numbers of samples&quot;</span>),</div>
<div class="line"><span class="lineno"> 1255</span>        ([0, 0, 0], [0, 0.5, 1], <span class="stringliteral">&quot;Only one class present in y_true&quot;</span>),</div>
<div class="line"><span class="lineno"> 1256</span>        ([1, 1, 1], [0, 0.5, 1], <span class="stringliteral">&quot;Only one class present in y_true&quot;</span>),</div>
<div class="line"><span class="lineno"> 1257</span>        (</div>
<div class="line"><span class="lineno"> 1258</span>            [<span class="stringliteral">&quot;cancer&quot;</span>, <span class="stringliteral">&quot;cancer&quot;</span>, <span class="stringliteral">&quot;not cancer&quot;</span>],</div>
<div class="line"><span class="lineno"> 1259</span>            [0.2, 0.3, 0.8],</div>
<div class="line"><span class="lineno"> 1260</span>            <span class="stringliteral">&quot;pos_label is not specified&quot;</span>,</div>
<div class="line"><span class="lineno"> 1261</span>        ),</div>
<div class="line"><span class="lineno"> 1262</span>    ],</div>
<div class="line"><span class="lineno"> 1263</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad78bb3ec42d6fb69945291a3945c4c8e" name="ad78bb3ec42d6fb69945291a3945c4c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78bb3ec42d6fb69945291a3945c4c8e">&#9670;&#160;</a></span>test_det_curve_pos_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_det_curve_pos_label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1270</span><span class="keyword">def </span>test_det_curve_pos_label():</div>
<div class="line"><span class="lineno"> 1271</span>    y_true = [<span class="stringliteral">&quot;cancer&quot;</span>] * 3 + [<span class="stringliteral">&quot;not cancer&quot;</span>] * 7</div>
<div class="line"><span class="lineno"> 1272</span>    y_pred_pos_not_cancer = np.array([0.1, 0.4, 0.6, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.9])</div>
<div class="line"><span class="lineno"> 1273</span>    y_pred_pos_cancer = 1 - y_pred_pos_not_cancer</div>
<div class="line"><span class="lineno"> 1274</span> </div>
<div class="line"><span class="lineno"> 1275</span>    fpr_pos_cancer, fnr_pos_cancer, th_pos_cancer = det_curve(</div>
<div class="line"><span class="lineno"> 1276</span>        y_true,</div>
<div class="line"><span class="lineno"> 1277</span>        y_pred_pos_cancer,</div>
<div class="line"><span class="lineno"> 1278</span>        pos_label=<span class="stringliteral">&quot;cancer&quot;</span>,</div>
<div class="line"><span class="lineno"> 1279</span>    )</div>
<div class="line"><span class="lineno"> 1280</span>    fpr_pos_not_cancer, fnr_pos_not_cancer, th_pos_not_cancer = det_curve(</div>
<div class="line"><span class="lineno"> 1281</span>        y_true,</div>
<div class="line"><span class="lineno"> 1282</span>        y_pred_pos_not_cancer,</div>
<div class="line"><span class="lineno"> 1283</span>        pos_label=<span class="stringliteral">&quot;not cancer&quot;</span>,</div>
<div class="line"><span class="lineno"> 1284</span>    )</div>
<div class="line"><span class="lineno"> 1285</span> </div>
<div class="line"><span class="lineno"> 1286</span>    <span class="comment"># check that the first threshold will change depending which label we</span></div>
<div class="line"><span class="lineno"> 1287</span>    <span class="comment"># consider positive</span></div>
<div class="line"><span class="lineno"> 1288</span>    <span class="keyword">assert</span> th_pos_cancer[0] == pytest.approx(0.4)</div>
<div class="line"><span class="lineno"> 1289</span>    <span class="keyword">assert</span> th_pos_not_cancer[0] == pytest.approx(0.2)</div>
<div class="line"><span class="lineno"> 1290</span> </div>
<div class="line"><span class="lineno"> 1291</span>    <span class="comment"># check for the symmetry of the fpr and fnr</span></div>
<div class="line"><span class="lineno"> 1292</span>    assert_allclose(fpr_pos_cancer, fnr_pos_not_cancer[::-1])</div>
<div class="line"><span class="lineno"> 1293</span>    assert_allclose(fnr_pos_cancer, fpr_pos_not_cancer[::-1])</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a93b7cacd36beded8799558a69321777a" name="a93b7cacd36beded8799558a69321777a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93b7cacd36beded8799558a69321777a">&#9670;&#160;</a></span>test_det_curve_sanity_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_det_curve_sanity_check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1214</span><span class="keyword">def </span>test_det_curve_sanity_check():</div>
<div class="line"><span class="lineno"> 1215</span>    <span class="comment"># Exactly duplicated inputs yield the same result.</span></div>
<div class="line"><span class="lineno"> 1216</span>    assert_allclose(</div>
<div class="line"><span class="lineno"> 1217</span>        det_curve([0, 0, 1], [0, 0.5, 1]),</div>
<div class="line"><span class="lineno"> 1218</span>        det_curve([0, 0, 0, 0, 1, 1], [0, 0, 0.5, 0.5, 1, 1]),</div>
<div class="line"><span class="lineno"> 1219</span>    )</div>
<div class="line"><span class="lineno"> 1220</span> </div>
<div class="line"><span class="lineno"> 1221</span> </div>
<div class="line"><span class="lineno"> 1222</span><span class="preprocessor">@pytest.mark.parametrize(&quot;y_score&quot;, [(0)</span>, (0.25), (0.5), (0.75), (1)])</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5506983e2900c416991cacbad7a5d64f" name="a5506983e2900c416991cacbad7a5d64f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5506983e2900c416991cacbad7a5d64f">&#9670;&#160;</a></span>test_det_curve_tie_handling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_det_curve_tie_handling </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_fpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_fnr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1207</span><span class="keyword">def </span>test_det_curve_tie_handling(y_true, y_score, expected_fpr, expected_fnr):</div>
<div class="line"><span class="lineno"> 1208</span>    fpr, fnr, _ = det_curve(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1209</span> </div>
<div class="line"><span class="lineno"> 1210</span>    assert_allclose(fpr, expected_fpr)</div>
<div class="line"><span class="lineno"> 1211</span>    assert_allclose(fnr, expected_fnr)</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a88683b06078f424b9d69ef5185d19aa0" name="a88683b06078f424b9d69ef5185d19aa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88683b06078f424b9d69ef5185d19aa0">&#9670;&#160;</a></span>test_det_curve_toydata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_det_curve_toydata </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_fpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_fnr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1186</span><span class="keyword">def </span>test_det_curve_toydata(y_true, y_score, expected_fpr, expected_fnr):</div>
<div class="line"><span class="lineno"> 1187</span>    <span class="comment"># Check on a batch of small examples.</span></div>
<div class="line"><span class="lineno"> 1188</span>    fpr, fnr, _ = det_curve(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>    assert_allclose(fpr, expected_fpr)</div>
<div class="line"><span class="lineno"> 1191</span>    assert_allclose(fnr, expected_fnr)</div>
<div class="line"><span class="lineno"> 1192</span> </div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1195</span>    <span class="stringliteral">&quot;y_true,y_score,expected_fpr,expected_fnr&quot;</span>,</div>
<div class="line"><span class="lineno"> 1196</span>    [</div>
<div class="line"><span class="lineno"> 1197</span>        ([1, 0], [0.5, 0.5], [1], [0]),</div>
<div class="line"><span class="lineno"> 1198</span>        ([0, 1], [0.5, 0.5], [1], [0]),</div>
<div class="line"><span class="lineno"> 1199</span>        ([0, 0, 1], [0.25, 0.5, 0.5], [0.5], [0]),</div>
<div class="line"><span class="lineno"> 1200</span>        ([0, 1, 0], [0.25, 0.5, 0.5], [0.5], [0]),</div>
<div class="line"><span class="lineno"> 1201</span>        ([0, 1, 1], [0.25, 0.5, 0.5], [0], [0]),</div>
<div class="line"><span class="lineno"> 1202</span>        ([1, 0, 0], [0.25, 0.5, 0.5], [1], [0]),</div>
<div class="line"><span class="lineno"> 1203</span>        ([1, 0, 1], [0.25, 0.5, 0.5], [1], [0]),</div>
<div class="line"><span class="lineno"> 1204</span>        ([1, 1, 0], [0.25, 0.5, 0.5], [1], [0]),</div>
<div class="line"><span class="lineno"> 1205</span>    ],</div>
<div class="line"><span class="lineno"> 1206</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b03fda3bd9bd552eec20ebffed91b9b" name="a2b03fda3bd9bd552eec20ebffed91b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b03fda3bd9bd552eec20ebffed91b9b">&#9670;&#160;</a></span>test_label_ranking_avg_precision_score_should_allow_csr_matrix_for_y_true_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_label_ranking_avg_precision_score_should_allow_csr_matrix_for_y_true_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2111</span><span class="keyword">def </span>test_label_ranking_avg_precision_score_should_allow_csr_matrix_for_y_true_input():</div>
<div class="line"><span class="lineno"> 2112</span>    <span class="comment"># Test that label_ranking_avg_precision_score accept sparse y_true.</span></div>
<div class="line"><span class="lineno"> 2113</span>    <span class="comment"># Non-regression test for #22575</span></div>
<div class="line"><span class="lineno"> 2114</span>    y_true = csr_matrix([[1, 0, 0], [0, 0, 1]])</div>
<div class="line"><span class="lineno"> 2115</span>    y_score = np.array([[0.5, 0.9, 0.6], [0, 0, 1]])</div>
<div class="line"><span class="lineno"> 2116</span>    result = label_ranking_average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno"> 2117</span>    <span class="keyword">assert</span> result == pytest.approx(2 / 3)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a15e2db7ef273f63c91207c3ed6161f68" name="a15e2db7ef273f63c91207c3ed6161f68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e2db7ef273f63c91207c3ed6161f68">&#9670;&#160;</a></span>test_label_ranking_avp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_label_ranking_avp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1526</span><span class="keyword">def </span>test_label_ranking_avp(check, func):</div>
<div class="line"><span class="lineno"> 1527</span>    check(func)</div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5de5034cb8b9b0deac2827da4ed3cd30" name="a5de5034cb8b9b0deac2827da4ed3cd30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5de5034cb8b9b0deac2827da4ed3cd30">&#9670;&#160;</a></span>test_label_ranking_loss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_label_ranking_loss </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1651</span><span class="keyword">def </span>test_label_ranking_loss():</div>
<div class="line"><span class="lineno"> 1652</span>    assert_almost_equal(label_ranking_loss([[0, 1]], [[0.25, 0.75]]), 0)</div>
<div class="line"><span class="lineno"> 1653</span>    assert_almost_equal(label_ranking_loss([[0, 1]], [[0.75, 0.25]]), 1)</div>
<div class="line"><span class="lineno"> 1654</span> </div>
<div class="line"><span class="lineno"> 1655</span>    assert_almost_equal(label_ranking_loss([[0, 0, 1]], [[0.25, 0.5, 0.75]]), 0)</div>
<div class="line"><span class="lineno"> 1656</span>    assert_almost_equal(label_ranking_loss([[0, 1, 0]], [[0.25, 0.5, 0.75]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1657</span>    assert_almost_equal(label_ranking_loss([[0, 1, 1]], [[0.25, 0.5, 0.75]]), 0)</div>
<div class="line"><span class="lineno"> 1658</span>    assert_almost_equal(label_ranking_loss([[1, 0, 0]], [[0.25, 0.5, 0.75]]), 2 / 2)</div>
<div class="line"><span class="lineno"> 1659</span>    assert_almost_equal(label_ranking_loss([[1, 0, 1]], [[0.25, 0.5, 0.75]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1660</span>    assert_almost_equal(label_ranking_loss([[1, 1, 0]], [[0.25, 0.5, 0.75]]), 2 / 2)</div>
<div class="line"><span class="lineno"> 1661</span> </div>
<div class="line"><span class="lineno"> 1662</span>    <span class="comment"># Undefined metrics -  the ranking doesn&#39;t matter</span></div>
<div class="line"><span class="lineno"> 1663</span>    assert_almost_equal(label_ranking_loss([[0, 0]], [[0.75, 0.25]]), 0)</div>
<div class="line"><span class="lineno"> 1664</span>    assert_almost_equal(label_ranking_loss([[1, 1]], [[0.75, 0.25]]), 0)</div>
<div class="line"><span class="lineno"> 1665</span>    assert_almost_equal(label_ranking_loss([[0, 0]], [[0.5, 0.5]]), 0)</div>
<div class="line"><span class="lineno"> 1666</span>    assert_almost_equal(label_ranking_loss([[1, 1]], [[0.5, 0.5]]), 0)</div>
<div class="line"><span class="lineno"> 1667</span> </div>
<div class="line"><span class="lineno"> 1668</span>    assert_almost_equal(label_ranking_loss([[0, 0, 0]], [[0.5, 0.75, 0.25]]), 0)</div>
<div class="line"><span class="lineno"> 1669</span>    assert_almost_equal(label_ranking_loss([[1, 1, 1]], [[0.5, 0.75, 0.25]]), 0)</div>
<div class="line"><span class="lineno"> 1670</span>    assert_almost_equal(label_ranking_loss([[0, 0, 0]], [[0.25, 0.5, 0.5]]), 0)</div>
<div class="line"><span class="lineno"> 1671</span>    assert_almost_equal(label_ranking_loss([[1, 1, 1]], [[0.25, 0.5, 0.5]]), 0)</div>
<div class="line"><span class="lineno"> 1672</span> </div>
<div class="line"><span class="lineno"> 1673</span>    <span class="comment"># Non trivial case</span></div>
<div class="line"><span class="lineno"> 1674</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1675</span>        label_ranking_loss([[0, 1, 0], [1, 1, 0]], [[0.1, 10.0, -3], [0, 1, 3]]),</div>
<div class="line"><span class="lineno"> 1676</span>        (0 + 2 / 2) / 2.0,</div>
<div class="line"><span class="lineno"> 1677</span>    )</div>
<div class="line"><span class="lineno"> 1678</span> </div>
<div class="line"><span class="lineno"> 1679</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1680</span>        label_ranking_loss(</div>
<div class="line"><span class="lineno"> 1681</span>            [[0, 1, 0], [1, 1, 0], [0, 1, 1]], [[0.1, 10, -3], [0, 1, 3], [0, 2, 0]]</div>
<div class="line"><span class="lineno"> 1682</span>        ),</div>
<div class="line"><span class="lineno"> 1683</span>        (0 + 2 / 2 + 1 / 2) / 3.0,</div>
<div class="line"><span class="lineno"> 1684</span>    )</div>
<div class="line"><span class="lineno"> 1685</span> </div>
<div class="line"><span class="lineno"> 1686</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1687</span>        label_ranking_loss(</div>
<div class="line"><span class="lineno"> 1688</span>            [[0, 1, 0], [1, 1, 0], [0, 1, 1]], [[0.1, 10, -3], [3, 1, 3], [0, 2, 0]]</div>
<div class="line"><span class="lineno"> 1689</span>        ),</div>
<div class="line"><span class="lineno"> 1690</span>        (0 + 2 / 2 + 1 / 2) / 3.0,</div>
<div class="line"><span class="lineno"> 1691</span>    )</div>
<div class="line"><span class="lineno"> 1692</span> </div>
<div class="line"><span class="lineno"> 1693</span>    <span class="comment"># Sparse csr matrices</span></div>
<div class="line"><span class="lineno"> 1694</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1695</span>        label_ranking_loss(</div>
<div class="line"><span class="lineno"> 1696</span>            csr_matrix(np.array([[0, 1, 0], [1, 1, 0]])), [[0.1, 10, -3], [3, 1, 3]]</div>
<div class="line"><span class="lineno"> 1697</span>        ),</div>
<div class="line"><span class="lineno"> 1698</span>        (0 + 2 / 2) / 2.0,</div>
<div class="line"><span class="lineno"> 1699</span>    )</div>
<div class="line"><span class="lineno"> 1700</span> </div>
<div class="line"><span class="lineno"> 1701</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae796ad47a103b810f5310fe2d3d7e79b" name="ae796ad47a103b810f5310fe2d3d7e79b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae796ad47a103b810f5310fe2d3d7e79b">&#9670;&#160;</a></span>test_lrap_error_raised()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_lrap_error_raised </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1530</span><span class="keyword">def </span>test_lrap_error_raised():</div>
<div class="line"><span class="lineno"> 1531</span>    check_lrap_error_raised(label_ranking_average_precision_score)</div>
<div class="line"><span class="lineno"> 1532</span> </div>
<div class="line"><span class="lineno"> 1533</span> </div>
<div class="line"><span class="lineno"> 1534</span><span class="preprocessor">@pytest.mark.parametrize(&quot;n_samples&quot;, (1, 2, 8, 20)</span>)</div>
<div class="line"><span class="lineno"> 1535</span><span class="preprocessor">@pytest.mark.parametrize(&quot;n_classes&quot;, (2, 5, 10)</span>)</div>
<div class="line"><span class="lineno"> 1536</span><span class="preprocessor">@pytest.mark.parametrize(&quot;random_state&quot;, range(1)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="add9e7be73a839dd0d3d977f996a7f911" name="add9e7be73a839dd0d3d977f996a7f911"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add9e7be73a839dd0d3d977f996a7f911">&#9670;&#160;</a></span>test_lrap_sample_weighting_zero_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_lrap_sample_weighting_zero_labels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1544</span><span class="keyword">def </span>test_lrap_sample_weighting_zero_labels():</div>
<div class="line"><span class="lineno"> 1545</span>    <span class="comment"># Degenerate sample labeling (e.g., zero labels for a sample) is a valid</span></div>
<div class="line"><span class="lineno"> 1546</span>    <span class="comment"># special case for lrap (the sample is considered to achieve perfect</span></div>
<div class="line"><span class="lineno"> 1547</span>    <span class="comment"># precision), but this case is not tested in test_common.</span></div>
<div class="line"><span class="lineno"> 1548</span>    <span class="comment"># For these test samples, the APs are 0.5, 0.75, and 1.0 (default for zero</span></div>
<div class="line"><span class="lineno"> 1549</span>    <span class="comment"># labels).</span></div>
<div class="line"><span class="lineno"> 1550</span>    y_true = np.array([[1, 0, 0, 0], [1, 0, 0, 1], [0, 0, 0, 0]], dtype=bool)</div>
<div class="line"><span class="lineno"> 1551</span>    y_score = np.array(</div>
<div class="line"><span class="lineno"> 1552</span>        [[0.3, 0.4, 0.2, 0.1], [0.1, 0.2, 0.3, 0.4], [0.4, 0.3, 0.2, 0.1]]</div>
<div class="line"><span class="lineno"> 1553</span>    )</div>
<div class="line"><span class="lineno"> 1554</span>    samplewise_lraps = np.array([0.5, 0.75, 1.0])</div>
<div class="line"><span class="lineno"> 1555</span>    sample_weight = np.array([1.0, 1.0, 0.0])</div>
<div class="line"><span class="lineno"> 1556</span> </div>
<div class="line"><span class="lineno"> 1557</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1558</span>        label_ranking_average_precision_score(</div>
<div class="line"><span class="lineno"> 1559</span>            y_true, y_score, sample_weight=sample_weight</div>
<div class="line"><span class="lineno"> 1560</span>        ),</div>
<div class="line"><span class="lineno"> 1561</span>        np.sum(sample_weight * samplewise_lraps) / np.sum(sample_weight),</div>
<div class="line"><span class="lineno"> 1562</span>    )</div>
<div class="line"><span class="lineno"> 1563</span> </div>
<div class="line"><span class="lineno"> 1564</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afc63b97b99ef41607f7e03f86bb6794e" name="afc63b97b99ef41607f7e03f86bb6794e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc63b97b99ef41607f7e03f86bb6794e">&#9670;&#160;</a></span>test_micro_averaged_ovr_roc_auc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_micro_averaged_ovr_roc_auc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  658</span><span class="keyword">def </span>test_micro_averaged_ovr_roc_auc(global_random_seed):</div>
<div class="line"><span class="lineno">  659</span>    seed = global_random_seed</div>
<div class="line"><span class="lineno">  660</span>    <span class="comment"># Let&#39;s generate a set of random predictions and matching true labels such</span></div>
<div class="line"><span class="lineno">  661</span>    <span class="comment"># that the predictions are not perfect. To make the problem more interesting,</span></div>
<div class="line"><span class="lineno">  662</span>    <span class="comment"># we use an imbalanced class distribution (by using different parameters</span></div>
<div class="line"><span class="lineno">  663</span>    <span class="comment"># in the Dirichlet prior (conjugate prior of the multinomial distribution).</span></div>
<div class="line"><span class="lineno">  664</span>    y_pred = stats.dirichlet.rvs([2.0, 1.0, 0.5], size=1000, random_state=seed)</div>
<div class="line"><span class="lineno">  665</span>    y_true = np.asarray(</div>
<div class="line"><span class="lineno">  666</span>        [</div>
<div class="line"><span class="lineno">  667</span>            stats.multinomial.rvs(n=1, p=y_pred_i, random_state=seed).argmax()</div>
<div class="line"><span class="lineno">  668</span>            <span class="keywordflow">for</span> y_pred_i <span class="keywordflow">in</span> y_pred</div>
<div class="line"><span class="lineno">  669</span>        ]</div>
<div class="line"><span class="lineno">  670</span>    )</div>
<div class="line"><span class="lineno">  671</span>    y_onehot = label_binarize(y_true, classes=[0, 1, 2])</div>
<div class="line"><span class="lineno">  672</span>    fpr, tpr, _ = roc_curve(y_onehot.ravel(), y_pred.ravel())</div>
<div class="line"><span class="lineno">  673</span>    roc_auc_by_hand = auc(fpr, tpr)</div>
<div class="line"><span class="lineno">  674</span>    roc_auc_auto = roc_auc_score(y_true, y_pred, multi_class=<span class="stringliteral">&quot;ovr&quot;</span>, average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno">  675</span>    <span class="keyword">assert</span> roc_auc_by_hand == pytest.approx(roc_auc_auto)</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  679</span>    <span class="stringliteral">&quot;msg, y_true, labels&quot;</span>,</div>
<div class="line"><span class="lineno">  680</span>    [</div>
<div class="line"><span class="lineno">  681</span>        (<span class="stringliteral">&quot;Parameter &#39;labels&#39; must be unique&quot;</span>, np.array([0, 1, 2, 2]), [0, 2, 0]),</div>
<div class="line"><span class="lineno">  682</span>        (</div>
<div class="line"><span class="lineno">  683</span>            <span class="stringliteral">&quot;Parameter &#39;labels&#39; must be unique&quot;</span>,</div>
<div class="line"><span class="lineno">  684</span>            np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]),</div>
<div class="line"><span class="lineno">  685</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno">  686</span>        ),</div>
<div class="line"><span class="lineno">  687</span>        (</div>
<div class="line"><span class="lineno">  688</span>            <span class="stringliteral">&quot;Number of classes in y_true not equal to the number of columns &quot;</span></div>
<div class="line"><span class="lineno">  689</span>            <span class="stringliteral">&quot;in &#39;y_score&#39;&quot;</span>,</div>
<div class="line"><span class="lineno">  690</span>            np.array([0, 2, 0, 2]),</div>
<div class="line"><span class="lineno">  691</span>            <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  692</span>        ),</div>
<div class="line"><span class="lineno">  693</span>        (</div>
<div class="line"><span class="lineno">  694</span>            <span class="stringliteral">&quot;Parameter &#39;labels&#39; must be ordered&quot;</span>,</div>
<div class="line"><span class="lineno">  695</span>            np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]),</div>
<div class="line"><span class="lineno">  696</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno">  697</span>        ),</div>
<div class="line"><span class="lineno">  698</span>        (</div>
<div class="line"><span class="lineno">  699</span>            <span class="stringliteral">&quot;Number of given labels, 2, not equal to the number of columns in &quot;</span></div>
<div class="line"><span class="lineno">  700</span>            <span class="stringliteral">&quot;&#39;y_score&#39;, 3&quot;</span>,</div>
<div class="line"><span class="lineno">  701</span>            np.array([0, 1, 2, 2]),</div>
<div class="line"><span class="lineno">  702</span>            [0, 1],</div>
<div class="line"><span class="lineno">  703</span>        ),</div>
<div class="line"><span class="lineno">  704</span>        (</div>
<div class="line"><span class="lineno">  705</span>            <span class="stringliteral">&quot;Number of given labels, 2, not equal to the number of columns in &quot;</span></div>
<div class="line"><span class="lineno">  706</span>            <span class="stringliteral">&quot;&#39;y_score&#39;, 3&quot;</span>,</div>
<div class="line"><span class="lineno">  707</span>            np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]),</div>
<div class="line"><span class="lineno">  708</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno">  709</span>        ),</div>
<div class="line"><span class="lineno">  710</span>        (</div>
<div class="line"><span class="lineno">  711</span>            <span class="stringliteral">&quot;Number of given labels, 4, not equal to the number of columns in &quot;</span></div>
<div class="line"><span class="lineno">  712</span>            <span class="stringliteral">&quot;&#39;y_score&#39;, 3&quot;</span>,</div>
<div class="line"><span class="lineno">  713</span>            np.array([0, 1, 2, 2]),</div>
<div class="line"><span class="lineno">  714</span>            [0, 1, 2, 3],</div>
<div class="line"><span class="lineno">  715</span>        ),</div>
<div class="line"><span class="lineno">  716</span>        (</div>
<div class="line"><span class="lineno">  717</span>            <span class="stringliteral">&quot;Number of given labels, 4, not equal to the number of columns in &quot;</span></div>
<div class="line"><span class="lineno">  718</span>            <span class="stringliteral">&quot;&#39;y_score&#39;, 3&quot;</span>,</div>
<div class="line"><span class="lineno">  719</span>            np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]),</div>
<div class="line"><span class="lineno">  720</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>],</div>
<div class="line"><span class="lineno">  721</span>        ),</div>
<div class="line"><span class="lineno">  722</span>        (</div>
<div class="line"><span class="lineno">  723</span>            <span class="stringliteral">&quot;&#39;y_true&#39; contains labels not in parameter &#39;labels&#39;&quot;</span>,</div>
<div class="line"><span class="lineno">  724</span>            np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>]),</div>
<div class="line"><span class="lineno">  725</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>],</div>
<div class="line"><span class="lineno">  726</span>        ),</div>
<div class="line"><span class="lineno">  727</span>        (</div>
<div class="line"><span class="lineno">  728</span>            <span class="stringliteral">&quot;&#39;y_true&#39; contains labels not in parameter &#39;labels&#39;&quot;</span>,</div>
<div class="line"><span class="lineno">  729</span>            np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]),</div>
<div class="line"><span class="lineno">  730</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>],</div>
<div class="line"><span class="lineno">  731</span>        ),</div>
<div class="line"><span class="lineno">  732</span>        (</div>
<div class="line"><span class="lineno">  733</span>            <span class="stringliteral">&quot;&#39;y_true&#39; contains labels not in parameter &#39;labels&#39;&quot;</span>,</div>
<div class="line"><span class="lineno">  734</span>            np.array([0, 1, 2, 3]),</div>
<div class="line"><span class="lineno">  735</span>            [0, 1, 2],</div>
<div class="line"><span class="lineno">  736</span>        ),</div>
<div class="line"><span class="lineno">  737</span>    ],</div>
<div class="line"><span class="lineno">  738</span>)</div>
<div class="line"><span class="lineno">  739</span><span class="preprocessor">@pytest.mark.parametrize(&quot;multi_class&quot;, [&quot;ovo&quot;, &quot;ovr&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f04a0f318eefa49a105bc9037a65a99" name="a4f04a0f318eefa49a105bc9037a65a99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f04a0f318eefa49a105bc9037a65a99">&#9670;&#160;</a></span>test_multiclass_ovo_roc_auc_toydata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_multiclass_ovo_roc_auc_toydata </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  487</span><span class="keyword">def </span>test_multiclass_ovo_roc_auc_toydata(y_true, labels):</div>
<div class="line"><span class="lineno">  488</span>    <span class="comment"># Tests the one-vs-one multiclass ROC AUC algorithm</span></div>
<div class="line"><span class="lineno">  489</span>    <span class="comment"># on a small example, representative of an expected use case.</span></div>
<div class="line"><span class="lineno">  490</span>    y_scores = np.array(</div>
<div class="line"><span class="lineno">  491</span>        [[0.1, 0.8, 0.1], [0.3, 0.4, 0.3], [0.35, 0.5, 0.15], [0, 0.2, 0.8]]</div>
<div class="line"><span class="lineno">  492</span>    )</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>    <span class="comment"># Used to compute the expected output.</span></div>
<div class="line"><span class="lineno">  495</span>    <span class="comment"># Consider labels 0 and 1:</span></div>
<div class="line"><span class="lineno">  496</span>    <span class="comment"># positive label is 0, negative label is 1</span></div>
<div class="line"><span class="lineno">  497</span>    score_01 = roc_auc_score([1, 0, 1], [0.1, 0.3, 0.35])</div>
<div class="line"><span class="lineno">  498</span>    <span class="comment"># positive label is 1, negative label is 0</span></div>
<div class="line"><span class="lineno">  499</span>    score_10 = roc_auc_score([0, 1, 0], [0.8, 0.4, 0.5])</div>
<div class="line"><span class="lineno">  500</span>    average_score_01 = (score_01 + score_10) / 2</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    <span class="comment"># Consider labels 0 and 2:</span></div>
<div class="line"><span class="lineno">  503</span>    score_02 = roc_auc_score([1, 1, 0], [0.1, 0.35, 0])</div>
<div class="line"><span class="lineno">  504</span>    score_20 = roc_auc_score([0, 0, 1], [0.1, 0.15, 0.8])</div>
<div class="line"><span class="lineno">  505</span>    average_score_02 = (score_02 + score_20) / 2</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>    <span class="comment"># Consider labels 1 and 2:</span></div>
<div class="line"><span class="lineno">  508</span>    score_12 = roc_auc_score([1, 0], [0.4, 0.2])</div>
<div class="line"><span class="lineno">  509</span>    score_21 = roc_auc_score([0, 1], [0.3, 0.8])</div>
<div class="line"><span class="lineno">  510</span>    average_score_12 = (score_12 + score_21) / 2</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <span class="comment"># Unweighted, one-vs-one multiclass ROC AUC algorithm</span></div>
<div class="line"><span class="lineno">  513</span>    ovo_unweighted_score = (average_score_01 + average_score_02 + average_score_12) / 3</div>
<div class="line"><span class="lineno">  514</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  515</span>        roc_auc_score(y_true, y_scores, labels=labels, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>),</div>
<div class="line"><span class="lineno">  516</span>        ovo_unweighted_score,</div>
<div class="line"><span class="lineno">  517</span>    )</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>    <span class="comment"># Weighted, one-vs-one multiclass ROC AUC algorithm</span></div>
<div class="line"><span class="lineno">  520</span>    <span class="comment"># Each term is weighted by the prevalence for the positive label.</span></div>
<div class="line"><span class="lineno">  521</span>    pair_scores = [average_score_01, average_score_02, average_score_12]</div>
<div class="line"><span class="lineno">  522</span>    prevalence = [0.75, 0.75, 0.50]</div>
<div class="line"><span class="lineno">  523</span>    ovo_weighted_score = np.average(pair_scores, weights=prevalence)</div>
<div class="line"><span class="lineno">  524</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  525</span>        roc_auc_score(</div>
<div class="line"><span class="lineno">  526</span>            y_true, y_scores, labels=labels, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>, average=<span class="stringliteral">&quot;weighted&quot;</span></div>
<div class="line"><span class="lineno">  527</span>        ),</div>
<div class="line"><span class="lineno">  528</span>        ovo_weighted_score,</div>
<div class="line"><span class="lineno">  529</span>    )</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>    <span class="comment"># Check that average=None raises NotImplemented error</span></div>
<div class="line"><span class="lineno">  532</span>    error_message = <span class="stringliteral">&quot;average=None is not implemented for multi_class=&#39;ovo&#39;.&quot;</span></div>
<div class="line"><span class="lineno">  533</span>    <span class="keyword">with</span> pytest.raises(NotImplementedError, match=error_message):</div>
<div class="line"><span class="lineno">  534</span>        roc_auc_score(y_true, y_scores, labels=labels, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  538</span>    <span class="stringliteral">&quot;y_true, labels&quot;</span>,</div>
<div class="line"><span class="lineno">  539</span>    [</div>
<div class="line"><span class="lineno">  540</span>        (np.array([0, 2, 0, 2]), [0, 1, 2]),</div>
<div class="line"><span class="lineno">  541</span>        (np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]), [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]),</div>
<div class="line"><span class="lineno">  542</span>    ],</div>
<div class="line"><span class="lineno">  543</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a726be6c7822363bb1f5adee72a327ba5" name="a726be6c7822363bb1f5adee72a327ba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726be6c7822363bb1f5adee72a327ba5">&#9670;&#160;</a></span>test_multiclass_ovo_roc_auc_toydata_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_multiclass_ovo_roc_auc_toydata_binary </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  544</span><span class="keyword">def </span>test_multiclass_ovo_roc_auc_toydata_binary(y_true, labels):</div>
<div class="line"><span class="lineno">  545</span>    <span class="comment"># Tests the one-vs-one multiclass ROC AUC algorithm for binary y_true</span></div>
<div class="line"><span class="lineno">  546</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  547</span>    <span class="comment"># on a small example, representative of an expected use case.</span></div>
<div class="line"><span class="lineno">  548</span>    y_scores = np.array(</div>
<div class="line"><span class="lineno">  549</span>        [[0.2, 0.0, 0.8], [0.6, 0.0, 0.4], [0.55, 0.0, 0.45], [0.4, 0.0, 0.6]]</div>
<div class="line"><span class="lineno">  550</span>    )</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    <span class="comment"># Used to compute the expected output.</span></div>
<div class="line"><span class="lineno">  553</span>    <span class="comment"># Consider labels 0 and 1:</span></div>
<div class="line"><span class="lineno">  554</span>    <span class="comment"># positive label is 0, negative label is 1</span></div>
<div class="line"><span class="lineno">  555</span>    score_01 = roc_auc_score([1, 0, 1, 0], [0.2, 0.6, 0.55, 0.4])</div>
<div class="line"><span class="lineno">  556</span>    <span class="comment"># positive label is 1, negative label is 0</span></div>
<div class="line"><span class="lineno">  557</span>    score_10 = roc_auc_score([0, 1, 0, 1], [0.8, 0.4, 0.45, 0.6])</div>
<div class="line"><span class="lineno">  558</span>    ovo_score = (score_01 + score_10) / 2</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  561</span>        roc_auc_score(y_true, y_scores, labels=labels, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>), ovo_score</div>
<div class="line"><span class="lineno">  562</span>    )</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>    <span class="comment"># Weighted, one-vs-one multiclass ROC AUC algorithm</span></div>
<div class="line"><span class="lineno">  565</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  566</span>        roc_auc_score(</div>
<div class="line"><span class="lineno">  567</span>            y_true, y_scores, labels=labels, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>, average=<span class="stringliteral">&quot;weighted&quot;</span></div>
<div class="line"><span class="lineno">  568</span>        ),</div>
<div class="line"><span class="lineno">  569</span>        ovo_score,</div>
<div class="line"><span class="lineno">  570</span>    )</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span> </div>
<div class="line"><span class="lineno">  573</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  574</span>    <span class="stringliteral">&quot;y_true, labels&quot;</span>,</div>
<div class="line"><span class="lineno">  575</span>    [</div>
<div class="line"><span class="lineno">  576</span>        (np.array([0, 1, 2, 2]), <span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno">  577</span>        ([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], <span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno">  578</span>        ([0, 1, 2, 2], [0, 1, 2]),</div>
<div class="line"><span class="lineno">  579</span>        ([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]),</div>
<div class="line"><span class="lineno">  580</span>    ],</div>
<div class="line"><span class="lineno">  581</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3868feb7f886acea6160704a1423d8c" name="ae3868feb7f886acea6160704a1423d8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3868feb7f886acea6160704a1423d8c">&#9670;&#160;</a></span>test_multiclass_ovr_roc_auc_toydata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_multiclass_ovr_roc_auc_toydata </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  582</span><span class="keyword">def </span>test_multiclass_ovr_roc_auc_toydata(y_true, labels):</div>
<div class="line"><span class="lineno">  583</span>    <span class="comment"># Tests the unweighted, one-vs-rest multiclass ROC AUC algorithm</span></div>
<div class="line"><span class="lineno">  584</span>    <span class="comment"># on a small example, representative of an expected use case.</span></div>
<div class="line"><span class="lineno">  585</span>    y_scores = np.array(</div>
<div class="line"><span class="lineno">  586</span>        [[1.0, 0.0, 0.0], [0.1, 0.5, 0.4], [0.1, 0.1, 0.8], [0.3, 0.3, 0.4]]</div>
<div class="line"><span class="lineno">  587</span>    )</div>
<div class="line"><span class="lineno">  588</span>    <span class="comment"># Compute the expected result by individually computing the &#39;one-vs-rest&#39;</span></div>
<div class="line"><span class="lineno">  589</span>    <span class="comment"># ROC AUC scores for classes 0, 1, and 2.</span></div>
<div class="line"><span class="lineno">  590</span>    out_0 = roc_auc_score([1, 0, 0, 0], y_scores[:, 0])</div>
<div class="line"><span class="lineno">  591</span>    out_1 = roc_auc_score([0, 1, 0, 0], y_scores[:, 1])</div>
<div class="line"><span class="lineno">  592</span>    out_2 = roc_auc_score([0, 0, 1, 1], y_scores[:, 2])</div>
<div class="line"><span class="lineno">  593</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  594</span>        roc_auc_score(y_true, y_scores, multi_class=<span class="stringliteral">&quot;ovr&quot;</span>, labels=labels, average=<span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno">  595</span>        [out_0, out_1, out_2],</div>
<div class="line"><span class="lineno">  596</span>    )</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>    <span class="comment"># Compute unweighted results (default behaviour is average=&quot;macro&quot;)</span></div>
<div class="line"><span class="lineno">  599</span>    result_unweighted = (out_0 + out_1 + out_2) / 3.0</div>
<div class="line"><span class="lineno">  600</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  601</span>        roc_auc_score(y_true, y_scores, multi_class=<span class="stringliteral">&quot;ovr&quot;</span>, labels=labels),</div>
<div class="line"><span class="lineno">  602</span>        result_unweighted,</div>
<div class="line"><span class="lineno">  603</span>    )</div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>    <span class="comment"># Tests the weighted, one-vs-rest multiclass ROC AUC algorithm</span></div>
<div class="line"><span class="lineno">  606</span>    <span class="comment"># on the same input (Provost &amp; Domingos, 2000)</span></div>
<div class="line"><span class="lineno">  607</span>    result_weighted = out_0 * 0.25 + out_1 * 0.25 + out_2 * 0.5</div>
<div class="line"><span class="lineno">  608</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  609</span>        roc_auc_score(</div>
<div class="line"><span class="lineno">  610</span>            y_true, y_scores, multi_class=<span class="stringliteral">&quot;ovr&quot;</span>, labels=labels, average=<span class="stringliteral">&quot;weighted&quot;</span></div>
<div class="line"><span class="lineno">  611</span>        ),</div>
<div class="line"><span class="lineno">  612</span>        result_weighted,</div>
<div class="line"><span class="lineno">  613</span>    )</div>
<div class="line"><span class="lineno">  614</span> </div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  617</span>    <span class="stringliteral">&quot;multi_class, average&quot;</span>,</div>
<div class="line"><span class="lineno">  618</span>    [</div>
<div class="line"><span class="lineno">  619</span>        (<span class="stringliteral">&quot;ovr&quot;</span>, <span class="stringliteral">&quot;macro&quot;</span>),</div>
<div class="line"><span class="lineno">  620</span>        (<span class="stringliteral">&quot;ovr&quot;</span>, <span class="stringliteral">&quot;micro&quot;</span>),</div>
<div class="line"><span class="lineno">  621</span>        (<span class="stringliteral">&quot;ovo&quot;</span>, <span class="stringliteral">&quot;macro&quot;</span>),</div>
<div class="line"><span class="lineno">  622</span>    ],</div>
<div class="line"><span class="lineno">  623</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="afc78ec37f8739774cc40285674f8474e" name="afc78ec37f8739774cc40285674f8474e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc78ec37f8739774cc40285674f8474e">&#9670;&#160;</a></span>test_ndcg_ignore_ties_with_k()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_ndcg_ignore_ties_with_k </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1769</span><span class="keyword">def </span>test_ndcg_ignore_ties_with_k():</div>
<div class="line"><span class="lineno"> 1770</span>    a = np.arange(12).reshape((2, 6))</div>
<div class="line"><span class="lineno"> 1771</span>    <span class="keyword">assert</span> ndcg_score(a, a, k=3, ignore_ties=<span class="keyword">True</span>) == pytest.approx(</div>
<div class="line"><span class="lineno"> 1772</span>        ndcg_score(a, a, k=3, ignore_ties=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1773</span>    )</div>
<div class="line"><span class="lineno"> 1774</span> </div>
<div class="line"><span class="lineno"> 1775</span> </div>
<div class="line"><span class="lineno"> 1776</span><span class="comment"># TODO(1.4): Replace warning w/ ValueError</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac349b9d7eabdecd348f7d68d8fd8669a" name="ac349b9d7eabdecd348f7d68d8fd8669a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac349b9d7eabdecd348f7d68d8fd8669a">&#9670;&#160;</a></span>test_ndcg_invariant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_ndcg_invariant </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1788</span><span class="keyword">def </span>test_ndcg_invariant():</div>
<div class="line"><span class="lineno"> 1789</span>    y_true = np.arange(70).reshape(7, 10)</div>
<div class="line"><span class="lineno"> 1790</span>    y_score = y_true + np.random.RandomState(0).uniform(-0.2, 0.2, size=y_true.shape)</div>
<div class="line"><span class="lineno"> 1791</span>    ndcg = ndcg_score(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1792</span>    ndcg_no_ties = ndcg_score(y_true, y_score, ignore_ties=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1793</span>    <span class="keyword">assert</span> ndcg == pytest.approx(ndcg_no_ties)</div>
<div class="line"><span class="lineno"> 1794</span>    <span class="keyword">assert</span> ndcg == pytest.approx(1.0)</div>
<div class="line"><span class="lineno"> 1795</span>    y_score += 1000</div>
<div class="line"><span class="lineno"> 1796</span>    <span class="keyword">assert</span> ndcg_score(y_true, y_score) == pytest.approx(1.0)</div>
<div class="line"><span class="lineno"> 1797</span> </div>
<div class="line"><span class="lineno"> 1798</span> </div>
<div class="line"><span class="lineno"> 1799</span><span class="preprocessor">@pytest.mark.parametrize(&quot;ignore_ties&quot;, [True, False])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2f6048a75d5905739b94e4ce18504f0" name="ab2f6048a75d5905739b94e4ce18504f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2f6048a75d5905739b94e4ce18504f0">&#9670;&#160;</a></span>test_ndcg_negative_ndarray_warn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_ndcg_negative_ndarray_warn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1777</span><span class="keyword">def </span>test_ndcg_negative_ndarray_warn():</div>
<div class="line"><span class="lineno"> 1778</span>    y_true = np.array([[-0.89, -0.53, -0.47, 0.39, 0.56]])</div>
<div class="line"><span class="lineno"> 1779</span>    y_score = np.array([[0.07, 0.31, 0.75, 0.33, 0.27]])</div>
<div class="line"><span class="lineno"> 1780</span>    expected_message = (</div>
<div class="line"><span class="lineno"> 1781</span>        <span class="stringliteral">&quot;ndcg_score should not be used on negative y_true values. ndcg_score will raise&quot;</span></div>
<div class="line"><span class="lineno"> 1782</span>        <span class="stringliteral">&quot; a ValueError on negative y_true values starting from version 1.4.&quot;</span></div>
<div class="line"><span class="lineno"> 1783</span>    )</div>
<div class="line"><span class="lineno"> 1784</span>    <span class="keyword">with</span> pytest.warns(FutureWarning, match=expected_message):</div>
<div class="line"><span class="lineno"> 1785</span>        <span class="keyword">assert</span> ndcg_score(y_true, y_score) == pytest.approx(396.0329)</div>
<div class="line"><span class="lineno"> 1786</span> </div>
<div class="line"><span class="lineno"> 1787</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a55edd1d5e1bb76d05301215388a2c779" name="a55edd1d5e1bb76d05301215388a2c779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55edd1d5e1bb76d05301215388a2c779">&#9670;&#160;</a></span>test_ndcg_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_ndcg_score </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1838</span><span class="keyword">def </span>test_ndcg_score():</div>
<div class="line"><span class="lineno"> 1839</span>    _, y_true = make_multilabel_classification(random_state=0, n_classes=10)</div>
<div class="line"><span class="lineno"> 1840</span>    y_score = -y_true + 1</div>
<div class="line"><span class="lineno"> 1841</span>    _test_ndcg_score_for(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1842</span>    y_true, y_score = np.random.RandomState(0).random_sample((2, 100, 10))</div>
<div class="line"><span class="lineno"> 1843</span>    _test_ndcg_score_for(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1844</span> </div>
<div class="line"><span class="lineno"> 1845</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af471f8d8662fa56ef467d21b24ae780a" name="af471f8d8662fa56ef467d21b24ae780a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af471f8d8662fa56ef467d21b24ae780a">&#9670;&#160;</a></span>test_ndcg_toy_examples()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_ndcg_toy_examples </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ignore_ties</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1800</span><span class="keyword">def </span>test_ndcg_toy_examples(ignore_ties):</div>
<div class="line"><span class="lineno"> 1801</span>    y_true = 3 * np.eye(7)[:5]</div>
<div class="line"><span class="lineno"> 1802</span>    y_score = np.tile(np.arange(6, -1, -1), (5, 1))</div>
<div class="line"><span class="lineno"> 1803</span>    y_score_noisy = y_score + np.random.RandomState(0).uniform(</div>
<div class="line"><span class="lineno"> 1804</span>        -0.2, 0.2, size=y_score.shape</div>
<div class="line"><span class="lineno"> 1805</span>    )</div>
<div class="line"><span class="lineno"> 1806</span>    <span class="keyword">assert</span> _dcg_sample_scores(</div>
<div class="line"><span class="lineno"> 1807</span>        y_true, y_score, ignore_ties=ignore_ties</div>
<div class="line"><span class="lineno"> 1808</span>    ) == pytest.approx(3 / np.log2(np.arange(2, 7)))</div>
<div class="line"><span class="lineno"> 1809</span>    <span class="keyword">assert</span> _dcg_sample_scores(</div>
<div class="line"><span class="lineno"> 1810</span>        y_true, y_score_noisy, ignore_ties=ignore_ties</div>
<div class="line"><span class="lineno"> 1811</span>    ) == pytest.approx(3 / np.log2(np.arange(2, 7)))</div>
<div class="line"><span class="lineno"> 1812</span>    <span class="keyword">assert</span> _ndcg_sample_scores(</div>
<div class="line"><span class="lineno"> 1813</span>        y_true, y_score, ignore_ties=ignore_ties</div>
<div class="line"><span class="lineno"> 1814</span>    ) == pytest.approx(1 / np.log2(np.arange(2, 7)))</div>
<div class="line"><span class="lineno"> 1815</span>    <span class="keyword">assert</span> _dcg_sample_scores(</div>
<div class="line"><span class="lineno"> 1816</span>        y_true, y_score, log_base=10, ignore_ties=ignore_ties</div>
<div class="line"><span class="lineno"> 1817</span>    ) == pytest.approx(3 / np.log10(np.arange(2, 7)))</div>
<div class="line"><span class="lineno"> 1818</span>    <span class="keyword">assert</span> ndcg_score(y_true, y_score, ignore_ties=ignore_ties) == pytest.approx(</div>
<div class="line"><span class="lineno"> 1819</span>        (1 / np.log2(np.arange(2, 7))).mean()</div>
<div class="line"><span class="lineno"> 1820</span>    )</div>
<div class="line"><span class="lineno"> 1821</span>    <span class="keyword">assert</span> dcg_score(y_true, y_score, ignore_ties=ignore_ties) == pytest.approx(</div>
<div class="line"><span class="lineno"> 1822</span>        (3 / np.log2(np.arange(2, 7))).mean()</div>
<div class="line"><span class="lineno"> 1823</span>    )</div>
<div class="line"><span class="lineno"> 1824</span>    y_true = 3 * np.ones((5, 7))</div>
<div class="line"><span class="lineno"> 1825</span>    expected_dcg_score = (3 / np.log2(np.arange(2, 9))).sum()</div>
<div class="line"><span class="lineno"> 1826</span>    <span class="keyword">assert</span> _dcg_sample_scores(</div>
<div class="line"><span class="lineno"> 1827</span>        y_true, y_score, ignore_ties=ignore_ties</div>
<div class="line"><span class="lineno"> 1828</span>    ) == pytest.approx(expected_dcg_score * np.ones(5))</div>
<div class="line"><span class="lineno"> 1829</span>    <span class="keyword">assert</span> _ndcg_sample_scores(</div>
<div class="line"><span class="lineno"> 1830</span>        y_true, y_score, ignore_ties=ignore_ties</div>
<div class="line"><span class="lineno"> 1831</span>    ) == pytest.approx(np.ones(5))</div>
<div class="line"><span class="lineno"> 1832</span>    <span class="keyword">assert</span> dcg_score(y_true, y_score, ignore_ties=ignore_ties) == pytest.approx(</div>
<div class="line"><span class="lineno"> 1833</span>        expected_dcg_score</div>
<div class="line"><span class="lineno"> 1834</span>    )</div>
<div class="line"><span class="lineno"> 1835</span>    <span class="keyword">assert</span> ndcg_score(y_true, y_score, ignore_ties=ignore_ties) == pytest.approx(1.0)</div>
<div class="line"><span class="lineno"> 1836</span> </div>
<div class="line"><span class="lineno"> 1837</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a67e01c8e0a08f6578397e9ad9c8453cc" name="a67e01c8e0a08f6578397e9ad9c8453cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67e01c8e0a08f6578397e9ad9c8453cc">&#9670;&#160;</a></span>test_partial_roc_auc_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_partial_roc_auc_score </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1862</span><span class="keyword">def </span>test_partial_roc_auc_score():</div>
<div class="line"><span class="lineno"> 1863</span>    <span class="comment"># Check `roc_auc_score` for max_fpr != `None`</span></div>
<div class="line"><span class="lineno"> 1864</span>    y_true = np.array([0, 0, 1, 1])</div>
<div class="line"><span class="lineno"> 1865</span>    <span class="keyword">assert</span> roc_auc_score(y_true, y_true, max_fpr=1) == 1</div>
<div class="line"><span class="lineno"> 1866</span>    <span class="keyword">assert</span> roc_auc_score(y_true, y_true, max_fpr=0.001) == 1</div>
<div class="line"><span class="lineno"> 1867</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1868</span>        <span class="keyword">assert</span> roc_auc_score(y_true, y_true, max_fpr=-0.1)</div>
<div class="line"><span class="lineno"> 1869</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1870</span>        <span class="keyword">assert</span> roc_auc_score(y_true, y_true, max_fpr=1.1)</div>
<div class="line"><span class="lineno"> 1871</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1872</span>        <span class="keyword">assert</span> roc_auc_score(y_true, y_true, max_fpr=0)</div>
<div class="line"><span class="lineno"> 1873</span> </div>
<div class="line"><span class="lineno"> 1874</span>    y_scores = np.array([0.1, 0, 0.1, 0.01])</div>
<div class="line"><span class="lineno"> 1875</span>    roc_auc_with_max_fpr_one = roc_auc_score(y_true, y_scores, max_fpr=1)</div>
<div class="line"><span class="lineno"> 1876</span>    unconstrained_roc_auc = roc_auc_score(y_true, y_scores)</div>
<div class="line"><span class="lineno"> 1877</span>    <span class="keyword">assert</span> roc_auc_with_max_fpr_one == unconstrained_roc_auc</div>
<div class="line"><span class="lineno"> 1878</span>    <span class="keyword">assert</span> roc_auc_score(y_true, y_scores, max_fpr=0.3) == 0.5</div>
<div class="line"><span class="lineno"> 1879</span> </div>
<div class="line"><span class="lineno"> 1880</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1881</span>    <span class="keywordflow">for</span> max_fpr <span class="keywordflow">in</span> np.linspace(1e-4, 1, 5):</div>
<div class="line"><span class="lineno"> 1882</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1883</span>            roc_auc_score(y_true, y_pred, max_fpr=max_fpr),</div>
<div class="line"><span class="lineno"> 1884</span>            _partial_roc_auc_score(y_true, y_pred, max_fpr),</div>
<div class="line"><span class="lineno"> 1885</span>        )</div>
<div class="line"><span class="lineno"> 1886</span> </div>
<div class="line"><span class="lineno"> 1887</span> </div>
<div class="line"><span class="lineno"> 1888</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1889</span>    <span class="stringliteral">&quot;y_true, k, true_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1890</span>    [</div>
<div class="line"><span class="lineno"> 1891</span>        ([0, 1, 2, 3], 1, 0.25),</div>
<div class="line"><span class="lineno"> 1892</span>        ([0, 1, 2, 3], 2, 0.5),</div>
<div class="line"><span class="lineno"> 1893</span>        ([0, 1, 2, 3], 3, 0.75),</div>
<div class="line"><span class="lineno"> 1894</span>    ],</div>
<div class="line"><span class="lineno"> 1895</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="acd6a439ff839f4357680e5cc52527134" name="acd6a439ff839f4357680e5cc52527134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6a439ff839f4357680e5cc52527134">&#9670;&#160;</a></span>test_perfect_imperfect_chance_multiclass_roc_auc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_perfect_imperfect_chance_multiclass_roc_auc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>multi_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>average</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  624</span><span class="keyword">def </span>test_perfect_imperfect_chance_multiclass_roc_auc(multi_class, average):</div>
<div class="line"><span class="lineno">  625</span>    y_true = np.array([3, 1, 2, 0])</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>    <span class="comment"># Perfect classifier (from a ranking point of view) has roc_auc_score = 1.0</span></div>
<div class="line"><span class="lineno">  628</span>    y_perfect = [</div>
<div class="line"><span class="lineno">  629</span>        [0.0, 0.0, 0.0, 1.0],</div>
<div class="line"><span class="lineno">  630</span>        [0.0, 1.0, 0.0, 0.0],</div>
<div class="line"><span class="lineno">  631</span>        [0.0, 0.0, 1.0, 0.0],</div>
<div class="line"><span class="lineno">  632</span>        [0.75, 0.05, 0.05, 0.15],</div>
<div class="line"><span class="lineno">  633</span>    ]</div>
<div class="line"><span class="lineno">  634</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  635</span>        roc_auc_score(y_true, y_perfect, multi_class=multi_class, average=average),</div>
<div class="line"><span class="lineno">  636</span>        1.0,</div>
<div class="line"><span class="lineno">  637</span>    )</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>    <span class="comment"># Imperfect classifier has roc_auc_score &lt; 1.0</span></div>
<div class="line"><span class="lineno">  640</span>    y_imperfect = [</div>
<div class="line"><span class="lineno">  641</span>        [0.0, 0.0, 0.0, 1.0],</div>
<div class="line"><span class="lineno">  642</span>        [0.0, 1.0, 0.0, 0.0],</div>
<div class="line"><span class="lineno">  643</span>        [0.0, 0.0, 1.0, 0.0],</div>
<div class="line"><span class="lineno">  644</span>        [0.0, 0.0, 0.0, 1.0],</div>
<div class="line"><span class="lineno">  645</span>    ]</div>
<div class="line"><span class="lineno">  646</span>    <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno">  647</span>        roc_auc_score(y_true, y_imperfect, multi_class=multi_class, average=average)</div>
<div class="line"><span class="lineno">  648</span>        &lt; 1.0</div>
<div class="line"><span class="lineno">  649</span>    )</div>
<div class="line"><span class="lineno">  650</span> </div>
<div class="line"><span class="lineno">  651</span>    <span class="comment"># Chance level classifier has roc_auc_score = 5.0</span></div>
<div class="line"><span class="lineno">  652</span>    y_chance = 0.25 * np.ones((4, 4))</div>
<div class="line"><span class="lineno">  653</span>    <span class="keyword">assert</span> roc_auc_score(</div>
<div class="line"><span class="lineno">  654</span>        y_true, y_chance, multi_class=multi_class, average=average</div>
<div class="line"><span class="lineno">  655</span>    ) == pytest.approx(0.5)</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac874270f172af81d16015c6964fb7265" name="ac874270f172af81d16015c6964fb7265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac874270f172af81d16015c6964fb7265">&#9670;&#160;</a></span>test_precision_recall_curve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_precision_recall_curve </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  894</span><span class="keyword">def </span>test_precision_recall_curve():</div>
<div class="line"><span class="lineno">  895</span>    y_true, _, y_score = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  896</span>    _test_precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>    <span class="comment"># Make sure the first point of the Precision-Recall on the right is:</span></div>
<div class="line"><span class="lineno">  899</span>    <span class="comment"># (p=1.0, r=class balance) on a non-balanced dataset [1:]</span></div>
<div class="line"><span class="lineno">  900</span>    p, r, t = precision_recall_curve(y_true[1:], y_score[1:])</div>
<div class="line"><span class="lineno">  901</span>    <span class="keyword">assert</span> r[0] == 1.0</div>
<div class="line"><span class="lineno">  902</span>    <span class="keyword">assert</span> p[0] == y_true[1:].mean()</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>    <span class="comment"># Use {-1, 1} for labels; make sure original labels aren&#39;t modified</span></div>
<div class="line"><span class="lineno">  905</span>    y_true[np.where(y_true == 0)] = -1</div>
<div class="line"><span class="lineno">  906</span>    y_true_copy = y_true.copy()</div>
<div class="line"><span class="lineno">  907</span>    _test_precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  908</span>    assert_array_equal(y_true_copy, y_true)</div>
<div class="line"><span class="lineno">  909</span> </div>
<div class="line"><span class="lineno">  910</span>    labels = [1, 0, 0, 1]</div>
<div class="line"><span class="lineno">  911</span>    predict_probas = [1, 2, 3, 4]</div>
<div class="line"><span class="lineno">  912</span>    p, r, t = precision_recall_curve(labels, predict_probas)</div>
<div class="line"><span class="lineno">  913</span>    assert_array_almost_equal(p, np.array([0.5, 0.33333333, 0.5, 1.0, 1.0]))</div>
<div class="line"><span class="lineno">  914</span>    assert_array_almost_equal(r, np.array([1.0, 0.5, 0.5, 0.5, 0.0]))</div>
<div class="line"><span class="lineno">  915</span>    assert_array_almost_equal(t, np.array([1, 2, 3, 4]))</div>
<div class="line"><span class="lineno">  916</span>    <span class="keyword">assert</span> p.size == r.size</div>
<div class="line"><span class="lineno">  917</span>    <span class="keyword">assert</span> p.size == t.size + 1</div>
<div class="line"><span class="lineno">  918</span> </div>
<div class="line"><span class="lineno">  919</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bffda8c297c1622d5c87516fb21bdb0" name="a2bffda8c297c1622d5c87516fb21bdb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bffda8c297c1622d5c87516fb21bdb0">&#9670;&#160;</a></span>test_precision_recall_curve_toydata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_precision_recall_curve_toydata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  940</span><span class="keyword">def </span>test_precision_recall_curve_toydata():</div>
<div class="line"><span class="lineno">  941</span>    <span class="keyword">with</span> np.errstate(all=<span class="stringliteral">&quot;raise&quot;</span>):</div>
<div class="line"><span class="lineno">  942</span>        <span class="comment"># Binary classification</span></div>
<div class="line"><span class="lineno">  943</span>        y_true = [0, 1]</div>
<div class="line"><span class="lineno">  944</span>        y_score = [0, 1]</div>
<div class="line"><span class="lineno">  945</span>        p, r, _ = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  946</span>        auc_prc = average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  947</span>        assert_array_almost_equal(p, [0.5, 1, 1])</div>
<div class="line"><span class="lineno">  948</span>        assert_array_almost_equal(r, [1, 1, 0])</div>
<div class="line"><span class="lineno">  949</span>        assert_almost_equal(auc_prc, 1.0)</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>        y_true = [0, 1]</div>
<div class="line"><span class="lineno">  952</span>        y_score = [1, 0]</div>
<div class="line"><span class="lineno">  953</span>        p, r, _ = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  954</span>        auc_prc = average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  955</span>        assert_array_almost_equal(p, [0.5, 0.0, 1.0])</div>
<div class="line"><span class="lineno">  956</span>        assert_array_almost_equal(r, [1.0, 0.0, 0.0])</div>
<div class="line"><span class="lineno">  957</span>        <span class="comment"># Here we are doing a terrible prediction: we are always getting</span></div>
<div class="line"><span class="lineno">  958</span>        <span class="comment"># it wrong, hence the average_precision_score is the accuracy at</span></div>
<div class="line"><span class="lineno">  959</span>        <span class="comment"># chance: 50%</span></div>
<div class="line"><span class="lineno">  960</span>        assert_almost_equal(auc_prc, 0.5)</div>
<div class="line"><span class="lineno">  961</span> </div>
<div class="line"><span class="lineno">  962</span>        y_true = [1, 0]</div>
<div class="line"><span class="lineno">  963</span>        y_score = [1, 1]</div>
<div class="line"><span class="lineno">  964</span>        p, r, _ = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  965</span>        auc_prc = average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  966</span>        assert_array_almost_equal(p, [0.5, 1])</div>
<div class="line"><span class="lineno">  967</span>        assert_array_almost_equal(r, [1.0, 0])</div>
<div class="line"><span class="lineno">  968</span>        assert_almost_equal(auc_prc, 0.5)</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>        y_true = [1, 0]</div>
<div class="line"><span class="lineno">  971</span>        y_score = [1, 0]</div>
<div class="line"><span class="lineno">  972</span>        p, r, _ = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  973</span>        auc_prc = average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  974</span>        assert_array_almost_equal(p, [0.5, 1, 1])</div>
<div class="line"><span class="lineno">  975</span>        assert_array_almost_equal(r, [1, 1, 0])</div>
<div class="line"><span class="lineno">  976</span>        assert_almost_equal(auc_prc, 1.0)</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span>        y_true = [1, 0]</div>
<div class="line"><span class="lineno">  979</span>        y_score = [0.5, 0.5]</div>
<div class="line"><span class="lineno">  980</span>        p, r, _ = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  981</span>        auc_prc = average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  982</span>        assert_array_almost_equal(p, [0.5, 1])</div>
<div class="line"><span class="lineno">  983</span>        assert_array_almost_equal(r, [1, 0.0])</div>
<div class="line"><span class="lineno">  984</span>        assert_almost_equal(auc_prc, 0.5)</div>
<div class="line"><span class="lineno">  985</span> </div>
<div class="line"><span class="lineno">  986</span>        y_true = [0, 0]</div>
<div class="line"><span class="lineno">  987</span>        y_score = [0.25, 0.75]</div>
<div class="line"><span class="lineno">  988</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno">  989</span>            p, r, _ = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  990</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno">  991</span>            auc_prc = average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  992</span>        assert_allclose(p, [0, 0, 1])</div>
<div class="line"><span class="lineno">  993</span>        assert_allclose(r, [1, 1, 0])</div>
<div class="line"><span class="lineno">  994</span>        assert_allclose(auc_prc, 0)</div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span>        y_true = [1, 1]</div>
<div class="line"><span class="lineno">  997</span>        y_score = [0.25, 0.75]</div>
<div class="line"><span class="lineno">  998</span>        p, r, _ = precision_recall_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  999</span>        assert_almost_equal(average_precision_score(y_true, y_score), 1.0)</div>
<div class="line"><span class="lineno"> 1000</span>        assert_array_almost_equal(p, [1.0, 1.0, 1.0])</div>
<div class="line"><span class="lineno"> 1001</span>        assert_array_almost_equal(r, [1, 0.5, 0.0])</div>
<div class="line"><span class="lineno"> 1002</span> </div>
<div class="line"><span class="lineno"> 1003</span>        <span class="comment"># Multi-label classification task</span></div>
<div class="line"><span class="lineno"> 1004</span>        y_true = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1005</span>        y_score = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1006</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1007</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1008</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1009</span>            )</div>
<div class="line"><span class="lineno"> 1010</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1011</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1012</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 1.0</div>
<div class="line"><span class="lineno"> 1013</span>            )</div>
<div class="line"><span class="lineno"> 1014</span>        assert_allclose(</div>
<div class="line"><span class="lineno"> 1015</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 1.0</div>
<div class="line"><span class="lineno"> 1016</span>        )</div>
<div class="line"><span class="lineno"> 1017</span>        assert_allclose(average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 1.0)</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>        y_true = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1020</span>        y_score = np.array([[0, 1], [1, 0]])</div>
<div class="line"><span class="lineno"> 1021</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1022</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1023</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1024</span>            )</div>
<div class="line"><span class="lineno"> 1025</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1026</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1027</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 1.0</div>
<div class="line"><span class="lineno"> 1028</span>            )</div>
<div class="line"><span class="lineno"> 1029</span>        assert_allclose(</div>
<div class="line"><span class="lineno"> 1030</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.75</div>
<div class="line"><span class="lineno"> 1031</span>        )</div>
<div class="line"><span class="lineno"> 1032</span>        assert_allclose(average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno"> 1033</span> </div>
<div class="line"><span class="lineno"> 1034</span>        y_true = np.array([[1, 0], [0, 1]])</div>
<div class="line"><span class="lineno"> 1035</span>        y_score = np.array([[0, 1], [1, 0]])</div>
<div class="line"><span class="lineno"> 1036</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1037</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1038</span>        )</div>
<div class="line"><span class="lineno"> 1039</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1040</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1041</span>        )</div>
<div class="line"><span class="lineno"> 1042</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1043</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1044</span>        )</div>
<div class="line"><span class="lineno"> 1045</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1046</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1047</span>        )</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>        y_true = np.array([[0, 0], [0, 0]])</div>
<div class="line"><span class="lineno"> 1050</span>        y_score = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1051</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1052</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1053</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.0</div>
<div class="line"><span class="lineno"> 1054</span>            )</div>
<div class="line"><span class="lineno"> 1055</span>        assert_allclose(</div>
<div class="line"><span class="lineno"> 1056</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 0.0</div>
<div class="line"><span class="lineno"> 1057</span>        )</div>
<div class="line"><span class="lineno"> 1058</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1059</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1060</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.0</div>
<div class="line"><span class="lineno"> 1061</span>            )</div>
<div class="line"><span class="lineno"> 1062</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1063</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1064</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 0.0</div>
<div class="line"><span class="lineno"> 1065</span>            )</div>
<div class="line"><span class="lineno"> 1066</span> </div>
<div class="line"><span class="lineno"> 1067</span>        y_true = np.array([[1, 1], [1, 1]])</div>
<div class="line"><span class="lineno"> 1068</span>        y_score = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1069</span>        assert_allclose(average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 1.0)</div>
<div class="line"><span class="lineno"> 1070</span>        assert_allclose(</div>
<div class="line"><span class="lineno"> 1071</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 1.0</div>
<div class="line"><span class="lineno"> 1072</span>        )</div>
<div class="line"><span class="lineno"> 1073</span>        assert_allclose(</div>
<div class="line"><span class="lineno"> 1074</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 1.0</div>
<div class="line"><span class="lineno"> 1075</span>        )</div>
<div class="line"><span class="lineno"> 1076</span>        assert_allclose(average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 1.0)</div>
<div class="line"><span class="lineno"> 1077</span> </div>
<div class="line"><span class="lineno"> 1078</span>        y_true = np.array([[1, 0], [0, 1]])</div>
<div class="line"><span class="lineno"> 1079</span>        y_score = np.array([[0.5, 0.5], [0.5, 0.5]])</div>
<div class="line"><span class="lineno"> 1080</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1081</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1082</span>        )</div>
<div class="line"><span class="lineno"> 1083</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1084</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1085</span>        )</div>
<div class="line"><span class="lineno"> 1086</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1087</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1088</span>        )</div>
<div class="line"><span class="lineno"> 1089</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1090</span>            average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 0.5</div>
<div class="line"><span class="lineno"> 1091</span>        )</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keyword">with</span> np.errstate(all=<span class="stringliteral">&quot;ignore&quot;</span>):</div>
<div class="line"><span class="lineno"> 1094</span>        <span class="comment"># if one class is never present weighted should not be NaN</span></div>
<div class="line"><span class="lineno"> 1095</span>        y_true = np.array([[0, 0], [0, 1]])</div>
<div class="line"><span class="lineno"> 1096</span>        y_score = np.array([[0, 0], [0, 1]])</div>
<div class="line"><span class="lineno"> 1097</span>        <span class="keyword">with</span> pytest.warns(UserWarning, match=<span class="stringliteral">&quot;No positive class found in y_true&quot;</span>):</div>
<div class="line"><span class="lineno"> 1098</span>            assert_allclose(</div>
<div class="line"><span class="lineno"> 1099</span>                average_precision_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 1</div>
<div class="line"><span class="lineno"> 1100</span>            )</div>
<div class="line"><span class="lineno"> 1101</span> </div>
<div class="line"><span class="lineno"> 1102</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6b942f23b13c6b71fcd389e76c2fb6e" name="ac6b942f23b13c6b71fcd389e76c2fb6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6b942f23b13c6b71fcd389e76c2fb6e">&#9670;&#160;</a></span>test_ranking_appropriate_input_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_ranking_appropriate_input_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1702</span><span class="keyword">def </span>test_ranking_appropriate_input_shape():</div>
<div class="line"><span class="lineno"> 1703</span>    <span class="comment"># Check that y_true.shape != y_score.shape raise the proper exception</span></div>
<div class="line"><span class="lineno"> 1704</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1705</span>        label_ranking_loss([[0, 1], [0, 1]], [0, 1])</div>
<div class="line"><span class="lineno"> 1706</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1707</span>        label_ranking_loss([[0, 1], [0, 1]], [[0, 1]])</div>
<div class="line"><span class="lineno"> 1708</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1709</span>        label_ranking_loss([[0, 1], [0, 1]], [[0], [1]])</div>
<div class="line"><span class="lineno"> 1710</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1711</span>        label_ranking_loss([[0, 1]], [[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1712</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1713</span>        label_ranking_loss([[0], [1]], [[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1714</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1715</span>        label_ranking_loss([[0, 1], [0, 1]], [[0], [1]])</div>
<div class="line"><span class="lineno"> 1716</span> </div>
<div class="line"><span class="lineno"> 1717</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4a81f165654dc6361f5260fb247390f" name="ab4a81f165654dc6361f5260fb247390f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4a81f165654dc6361f5260fb247390f">&#9670;&#160;</a></span>test_ranking_loss_ties_handling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_ranking_loss_ties_handling </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1718</span><span class="keyword">def </span>test_ranking_loss_ties_handling():</div>
<div class="line"><span class="lineno"> 1719</span>    <span class="comment"># Tie handling</span></div>
<div class="line"><span class="lineno"> 1720</span>    assert_almost_equal(label_ranking_loss([[1, 0]], [[0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1721</span>    assert_almost_equal(label_ranking_loss([[0, 1]], [[0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1722</span>    assert_almost_equal(label_ranking_loss([[0, 0, 1]], [[0.25, 0.5, 0.5]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1723</span>    assert_almost_equal(label_ranking_loss([[0, 1, 0]], [[0.25, 0.5, 0.5]]), 1 / 2)</div>
<div class="line"><span class="lineno"> 1724</span>    assert_almost_equal(label_ranking_loss([[0, 1, 1]], [[0.25, 0.5, 0.5]]), 0)</div>
<div class="line"><span class="lineno"> 1725</span>    assert_almost_equal(label_ranking_loss([[1, 0, 0]], [[0.25, 0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1726</span>    assert_almost_equal(label_ranking_loss([[1, 0, 1]], [[0.25, 0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1727</span>    assert_almost_equal(label_ranking_loss([[1, 1, 0]], [[0.25, 0.5, 0.5]]), 1)</div>
<div class="line"><span class="lineno"> 1728</span> </div>
<div class="line"><span class="lineno"> 1729</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4cc7ac192351efe7fdfe8e9dd4f21dd" name="ae4cc7ac192351efe7fdfe8e9dd4f21dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4cc7ac192351efe7fdfe8e9dd4f21dd">&#9670;&#160;</a></span>test_roc_auc_score_multiclass_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_auc_score_multiclass_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  791</span><span class="keyword">def </span>test_roc_auc_score_multiclass_error(msg, kwargs):</div>
<div class="line"><span class="lineno">  792</span>    <span class="comment"># Test that roc_auc_score function returns an error when trying</span></div>
<div class="line"><span class="lineno">  793</span>    <span class="comment"># to compute multiclass AUC for parameters where an output</span></div>
<div class="line"><span class="lineno">  794</span>    <span class="comment"># is not defined.</span></div>
<div class="line"><span class="lineno">  795</span>    rng = check_random_state(404)</div>
<div class="line"><span class="lineno">  796</span>    y_score = rng.rand(20, 3)</div>
<div class="line"><span class="lineno">  797</span>    y_prob = softmax(y_score)</div>
<div class="line"><span class="lineno">  798</span>    y_true = rng.randint(0, 3, size=20)</div>
<div class="line"><span class="lineno">  799</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  800</span>        roc_auc_score(y_true, y_prob, **kwargs)</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaad235262bae113c1a62693201312037" name="aaad235262bae113c1a62693201312037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad235262bae113c1a62693201312037">&#9670;&#160;</a></span>test_roc_auc_score_multiclass_labels_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_auc_score_multiclass_labels_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>multi_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  740</span><span class="keyword">def </span>test_roc_auc_score_multiclass_labels_error(msg, y_true, labels, multi_class):</div>
<div class="line"><span class="lineno">  741</span>    y_scores = np.array(</div>
<div class="line"><span class="lineno">  742</span>        [[0.1, 0.8, 0.1], [0.3, 0.4, 0.3], [0.35, 0.5, 0.15], [0, 0.2, 0.8]]</div>
<div class="line"><span class="lineno">  743</span>    )</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  746</span>        roc_auc_score(y_true, y_scores, labels=labels, multi_class=multi_class)</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  750</span>    <span class="stringliteral">&quot;msg, kwargs&quot;</span>,</div>
<div class="line"><span class="lineno">  751</span>    [</div>
<div class="line"><span class="lineno">  752</span>        (</div>
<div class="line"><span class="lineno">  753</span>            (</div>
<div class="line"><span class="lineno">  754</span>                <span class="stringliteral">r&quot;average must be one of \&zwj;(&#39;macro&#39;, &#39;weighted&#39;, None\&zwj;) for &quot;</span></div>
<div class="line"><span class="lineno">  755</span>                <span class="stringliteral">r&quot;multiclass problems&quot;</span></div>
<div class="line"><span class="lineno">  756</span>            ),</div>
<div class="line"><span class="lineno">  757</span>            {<span class="stringliteral">&quot;average&quot;</span>: <span class="stringliteral">&quot;samples&quot;</span>, <span class="stringliteral">&quot;multi_class&quot;</span>: <span class="stringliteral">&quot;ovo&quot;</span>},</div>
<div class="line"><span class="lineno">  758</span>        ),</div>
<div class="line"><span class="lineno">  759</span>        (</div>
<div class="line"><span class="lineno">  760</span>            (</div>
<div class="line"><span class="lineno">  761</span>                <span class="stringliteral">r&quot;average must be one of \&zwj;(&#39;micro&#39;, &#39;macro&#39;, &#39;weighted&#39;, None\&zwj;) for &quot;</span></div>
<div class="line"><span class="lineno">  762</span>                <span class="stringliteral">r&quot;multiclass problems&quot;</span></div>
<div class="line"><span class="lineno">  763</span>            ),</div>
<div class="line"><span class="lineno">  764</span>            {<span class="stringliteral">&quot;average&quot;</span>: <span class="stringliteral">&quot;samples&quot;</span>, <span class="stringliteral">&quot;multi_class&quot;</span>: <span class="stringliteral">&quot;ovr&quot;</span>},</div>
<div class="line"><span class="lineno">  765</span>        ),</div>
<div class="line"><span class="lineno">  766</span>        (</div>
<div class="line"><span class="lineno">  767</span>            (</div>
<div class="line"><span class="lineno">  768</span>                <span class="stringliteral">r&quot;sample_weight is not supported for multiclass one-vs-one &quot;</span></div>
<div class="line"><span class="lineno">  769</span>                <span class="stringliteral">r&quot;ROC AUC, &#39;sample_weight&#39; must be None in this case&quot;</span></div>
<div class="line"><span class="lineno">  770</span>            ),</div>
<div class="line"><span class="lineno">  771</span>            {<span class="stringliteral">&quot;multi_class&quot;</span>: <span class="stringliteral">&quot;ovo&quot;</span>, <span class="stringliteral">&quot;sample_weight&quot;</span>: []},</div>
<div class="line"><span class="lineno">  772</span>        ),</div>
<div class="line"><span class="lineno">  773</span>        (</div>
<div class="line"><span class="lineno">  774</span>            (</div>
<div class="line"><span class="lineno">  775</span>                <span class="stringliteral">r&quot;Partial AUC computation not available in multiclass setting, &quot;</span></div>
<div class="line"><span class="lineno">  776</span>                <span class="stringliteral">r&quot;&#39;max_fpr&#39; must be set to `None`, received `max_fpr=0.5` &quot;</span></div>
<div class="line"><span class="lineno">  777</span>                <span class="stringliteral">r&quot;instead&quot;</span></div>
<div class="line"><span class="lineno">  778</span>            ),</div>
<div class="line"><span class="lineno">  779</span>            {<span class="stringliteral">&quot;multi_class&quot;</span>: <span class="stringliteral">&quot;ovo&quot;</span>, <span class="stringliteral">&quot;max_fpr&quot;</span>: 0.5},</div>
<div class="line"><span class="lineno">  780</span>        ),</div>
<div class="line"><span class="lineno">  781</span>        (</div>
<div class="line"><span class="lineno">  782</span>            (</div>
<div class="line"><span class="lineno">  783</span>                <span class="stringliteral">r&quot;multi_class=&#39;ovp&#39; is not supported for multiclass ROC AUC, &quot;</span></div>
<div class="line"><span class="lineno">  784</span>                <span class="stringliteral">r&quot;multi_class must be in \&zwj;(&#39;ovo&#39;, &#39;ovr&#39;\&zwj;)&quot;</span></div>
<div class="line"><span class="lineno">  785</span>            ),</div>
<div class="line"><span class="lineno">  786</span>            {<span class="stringliteral">&quot;multi_class&quot;</span>: <span class="stringliteral">&quot;ovp&quot;</span>},</div>
<div class="line"><span class="lineno">  787</span>        ),</div>
<div class="line"><span class="lineno">  788</span>        (<span class="stringliteral">r&quot;multi_class must be in \&zwj;(&#39;ovo&#39;, &#39;ovr&#39;\&zwj;)&quot;</span>, {}),</div>
<div class="line"><span class="lineno">  789</span>    ],</div>
<div class="line"><span class="lineno">  790</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b90e2e5691925aa1b08a183c1a8b7d9" name="a1b90e2e5691925aa1b08a183c1a8b7d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b90e2e5691925aa1b08a183c1a8b7d9">&#9670;&#160;</a></span>test_roc_curve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  193</span><span class="keyword">def </span>test_roc_curve(drop):</div>
<div class="line"><span class="lineno">  194</span>    <span class="comment"># Test Area under Receiver Operating Characteristic (ROC) curve</span></div>
<div class="line"><span class="lineno">  195</span>    y_true, _, y_score = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  196</span>    expected_auc = _auc(y_true, y_score)</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    fpr, tpr, thresholds = roc_curve(y_true, y_score, drop_intermediate=drop)</div>
<div class="line"><span class="lineno">  199</span>    roc_auc = auc(fpr, tpr)</div>
<div class="line"><span class="lineno">  200</span>    assert_array_almost_equal(roc_auc, expected_auc, decimal=2)</div>
<div class="line"><span class="lineno">  201</span>    assert_almost_equal(roc_auc, roc_auc_score(y_true, y_score))</div>
<div class="line"><span class="lineno">  202</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  203</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8770697fc2573537697e8d0a17e7d93e" name="a8770697fc2573537697e8d0a17e7d93e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8770697fc2573537697e8d0a17e7d93e">&#9670;&#160;</a></span>test_roc_curve_confidence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_confidence </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  246</span><span class="keyword">def </span>test_roc_curve_confidence():</div>
<div class="line"><span class="lineno">  247</span>    <span class="comment"># roc_curve for confidence scores</span></div>
<div class="line"><span class="lineno">  248</span>    y_true, _, y_score = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    fpr, tpr, thresholds = roc_curve(y_true, y_score - 0.5)</div>
<div class="line"><span class="lineno">  251</span>    roc_auc = auc(fpr, tpr)</div>
<div class="line"><span class="lineno">  252</span>    assert_array_almost_equal(roc_auc, 0.90, decimal=2)</div>
<div class="line"><span class="lineno">  253</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  254</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4bdf888e96199aeaf8434e7d2e1e1e27" name="a4bdf888e96199aeaf8434e7d2e1e1e27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bdf888e96199aeaf8434e7d2e1e1e27">&#9670;&#160;</a></span>test_roc_curve_drop_intermediate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_drop_intermediate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  416</span><span class="keyword">def </span>test_roc_curve_drop_intermediate():</div>
<div class="line"><span class="lineno">  417</span>    <span class="comment"># Test that drop_intermediate drops the correct thresholds</span></div>
<div class="line"><span class="lineno">  418</span>    y_true = [0, 0, 0, 0, 1, 1]</div>
<div class="line"><span class="lineno">  419</span>    y_score = [0.0, 0.2, 0.5, 0.6, 0.7, 1.0]</div>
<div class="line"><span class="lineno">  420</span>    tpr, fpr, thresholds = roc_curve(y_true, y_score, drop_intermediate=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  421</span>    assert_array_almost_equal(thresholds, [2.0, 1.0, 0.7, 0.0])</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>    <span class="comment"># Test dropping thresholds with repeating scores</span></div>
<div class="line"><span class="lineno">  424</span>    y_true = [0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1]</div>
<div class="line"><span class="lineno">  425</span>    y_score = [0.0, 0.1, 0.6, 0.6, 0.7, 0.8, 0.9, 0.6, 0.7, 0.8, 0.9, 0.9, 1.0]</div>
<div class="line"><span class="lineno">  426</span>    tpr, fpr, thresholds = roc_curve(y_true, y_score, drop_intermediate=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  427</span>    assert_array_almost_equal(thresholds, [2.0, 1.0, 0.9, 0.7, 0.6, 0.0])</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aabfcf868157cb5ae41628084a3f80caa" name="aabfcf868157cb5ae41628084a3f80caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabfcf868157cb5ae41628084a3f80caa">&#9670;&#160;</a></span>test_roc_curve_end_points()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_end_points </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  206</span><span class="keyword">def </span>test_roc_curve_end_points():</div>
<div class="line"><span class="lineno">  207</span>    <span class="comment"># Make sure that roc_curve returns a curve start at 0 and ending and</span></div>
<div class="line"><span class="lineno">  208</span>    <span class="comment"># 1 even in corner cases</span></div>
<div class="line"><span class="lineno">  209</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  210</span>    y_true = np.array([0] * 50 + [1] * 50)</div>
<div class="line"><span class="lineno">  211</span>    y_pred = rng.randint(3, size=100)</div>
<div class="line"><span class="lineno">  212</span>    fpr, tpr, thr = roc_curve(y_true, y_pred, drop_intermediate=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  213</span>    <span class="keyword">assert</span> fpr[0] == 0</div>
<div class="line"><span class="lineno">  214</span>    <span class="keyword">assert</span> fpr[-1] == 1</div>
<div class="line"><span class="lineno">  215</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  216</span>    <span class="keyword">assert</span> fpr.shape == thr.shape</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1bb0a3801e18aac65203c875d3207a4" name="aa1bb0a3801e18aac65203c875d3207a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1bb0a3801e18aac65203c875d3207a4">&#9670;&#160;</a></span>test_roc_curve_fpr_tpr_increasing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_fpr_tpr_increasing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  430</span><span class="keyword">def </span>test_roc_curve_fpr_tpr_increasing():</div>
<div class="line"><span class="lineno">  431</span>    <span class="comment"># Ensure that fpr and tpr returned by roc_curve are increasing.</span></div>
<div class="line"><span class="lineno">  432</span>    <span class="comment"># Construct an edge case with float y_score and sample_weight</span></div>
<div class="line"><span class="lineno">  433</span>    <span class="comment"># when some adjacent values of fpr and tpr are actually the same.</span></div>
<div class="line"><span class="lineno">  434</span>    y_true = [0, 0, 1, 1, 1]</div>
<div class="line"><span class="lineno">  435</span>    y_score = [0.1, 0.7, 0.3, 0.4, 0.5]</div>
<div class="line"><span class="lineno">  436</span>    sample_weight = np.repeat(0.2, 5)</div>
<div class="line"><span class="lineno">  437</span>    fpr, tpr, _ = roc_curve(y_true, y_score, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno">  438</span>    <span class="keyword">assert</span> (np.diff(fpr) &lt; 0).sum() == 0</div>
<div class="line"><span class="lineno">  439</span>    <span class="keyword">assert</span> (np.diff(tpr) &lt; 0).sum() == 0</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a64356c39c5210277b0f6075acadda2" name="a8a64356c39c5210277b0f6075acadda2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a64356c39c5210277b0f6075acadda2">&#9670;&#160;</a></span>test_roc_curve_hard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_hard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  257</span><span class="keyword">def </span>test_roc_curve_hard():</div>
<div class="line"><span class="lineno">  258</span>    <span class="comment"># roc_curve for hard decisions</span></div>
<div class="line"><span class="lineno">  259</span>    y_true, pred, y_score = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    <span class="comment"># always predict one</span></div>
<div class="line"><span class="lineno">  262</span>    trivial_pred = np.ones(y_true.shape)</div>
<div class="line"><span class="lineno">  263</span>    fpr, tpr, thresholds = roc_curve(y_true, trivial_pred)</div>
<div class="line"><span class="lineno">  264</span>    roc_auc = auc(fpr, tpr)</div>
<div class="line"><span class="lineno">  265</span>    assert_array_almost_equal(roc_auc, 0.50, decimal=2)</div>
<div class="line"><span class="lineno">  266</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  267</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>    <span class="comment"># always predict zero</span></div>
<div class="line"><span class="lineno">  270</span>    trivial_pred = np.zeros(y_true.shape)</div>
<div class="line"><span class="lineno">  271</span>    fpr, tpr, thresholds = roc_curve(y_true, trivial_pred)</div>
<div class="line"><span class="lineno">  272</span>    roc_auc = auc(fpr, tpr)</div>
<div class="line"><span class="lineno">  273</span>    assert_array_almost_equal(roc_auc, 0.50, decimal=2)</div>
<div class="line"><span class="lineno">  274</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  275</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    <span class="comment"># hard decisions</span></div>
<div class="line"><span class="lineno">  278</span>    fpr, tpr, thresholds = roc_curve(y_true, pred)</div>
<div class="line"><span class="lineno">  279</span>    roc_auc = auc(fpr, tpr)</div>
<div class="line"><span class="lineno">  280</span>    assert_array_almost_equal(roc_auc, 0.78, decimal=2)</div>
<div class="line"><span class="lineno">  281</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  282</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f43479ceea0463db8d05220fa0e1adc" name="a8f43479ceea0463db8d05220fa0e1adc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f43479ceea0463db8d05220fa0e1adc">&#9670;&#160;</a></span>test_roc_curve_multi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_multi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  238</span><span class="keyword">def </span>test_roc_curve_multi():</div>
<div class="line"><span class="lineno">  239</span>    <span class="comment"># roc_curve not applicable for multi-class problems</span></div>
<div class="line"><span class="lineno">  240</span>    y_true, _, y_score = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  243</span>        roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0515ab4661340ae4d5d78d2fc7d6947d" name="a0515ab4661340ae4d5d78d2fc7d6947d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0515ab4661340ae4d5d78d2fc7d6947d">&#9670;&#160;</a></span>test_roc_curve_one_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_one_label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  285</span><span class="keyword">def </span>test_roc_curve_one_label():</div>
<div class="line"><span class="lineno">  286</span>    y_true = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</div>
<div class="line"><span class="lineno">  287</span>    y_pred = [0, 1, 0, 1, 0, 1, 0, 1, 0, 1]</div>
<div class="line"><span class="lineno">  288</span>    <span class="comment"># assert there are warnings</span></div>
<div class="line"><span class="lineno">  289</span>    expected_message = (</div>
<div class="line"><span class="lineno">  290</span>        <span class="stringliteral">&quot;No negative samples in y_true, false positive value should be meaningless&quot;</span></div>
<div class="line"><span class="lineno">  291</span>    )</div>
<div class="line"><span class="lineno">  292</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=expected_message):</div>
<div class="line"><span class="lineno">  293</span>        fpr, tpr, thresholds = roc_curve(y_true, y_pred)</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>    <span class="comment"># all true labels, all fpr should be nan</span></div>
<div class="line"><span class="lineno">  296</span>    assert_array_equal(fpr, np.full(len(thresholds), np.nan))</div>
<div class="line"><span class="lineno">  297</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  298</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    <span class="comment"># assert there are warnings</span></div>
<div class="line"><span class="lineno">  301</span>    expected_message = (</div>
<div class="line"><span class="lineno">  302</span>        <span class="stringliteral">&quot;No positive samples in y_true, true positive value should be meaningless&quot;</span></div>
<div class="line"><span class="lineno">  303</span>    )</div>
<div class="line"><span class="lineno">  304</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=expected_message):</div>
<div class="line"><span class="lineno">  305</span>        fpr, tpr, thresholds = roc_curve([1 - x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> y_true], y_pred)</div>
<div class="line"><span class="lineno">  306</span>    <span class="comment"># all negative labels, all tpr should be nan</span></div>
<div class="line"><span class="lineno">  307</span>    assert_array_equal(tpr, np.full(len(thresholds), np.nan))</div>
<div class="line"><span class="lineno">  308</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  309</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a13abdd16a870b9946aea78c96fd514a0" name="a13abdd16a870b9946aea78c96fd514a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13abdd16a870b9946aea78c96fd514a0">&#9670;&#160;</a></span>test_roc_curve_toydata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_curve_toydata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  312</span><span class="keyword">def </span>test_roc_curve_toydata():</div>
<div class="line"><span class="lineno">  313</span>    <span class="comment"># Binary classification</span></div>
<div class="line"><span class="lineno">  314</span>    y_true = [0, 1]</div>
<div class="line"><span class="lineno">  315</span>    y_score = [0, 1]</div>
<div class="line"><span class="lineno">  316</span>    tpr, fpr, _ = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  317</span>    roc_auc = roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  318</span>    assert_array_almost_equal(tpr, [0, 0, 1])</div>
<div class="line"><span class="lineno">  319</span>    assert_array_almost_equal(fpr, [0, 1, 1])</div>
<div class="line"><span class="lineno">  320</span>    assert_almost_equal(roc_auc, 1.0)</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    y_true = [0, 1]</div>
<div class="line"><span class="lineno">  323</span>    y_score = [1, 0]</div>
<div class="line"><span class="lineno">  324</span>    tpr, fpr, _ = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  325</span>    roc_auc = roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  326</span>    assert_array_almost_equal(tpr, [0, 1, 1])</div>
<div class="line"><span class="lineno">  327</span>    assert_array_almost_equal(fpr, [0, 0, 1])</div>
<div class="line"><span class="lineno">  328</span>    assert_almost_equal(roc_auc, 0.0)</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>    y_true = [1, 0]</div>
<div class="line"><span class="lineno">  331</span>    y_score = [1, 1]</div>
<div class="line"><span class="lineno">  332</span>    tpr, fpr, _ = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  333</span>    roc_auc = roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  334</span>    assert_array_almost_equal(tpr, [0, 1])</div>
<div class="line"><span class="lineno">  335</span>    assert_array_almost_equal(fpr, [0, 1])</div>
<div class="line"><span class="lineno">  336</span>    assert_almost_equal(roc_auc, 0.5)</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    y_true = [1, 0]</div>
<div class="line"><span class="lineno">  339</span>    y_score = [1, 0]</div>
<div class="line"><span class="lineno">  340</span>    tpr, fpr, _ = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  341</span>    roc_auc = roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  342</span>    assert_array_almost_equal(tpr, [0, 0, 1])</div>
<div class="line"><span class="lineno">  343</span>    assert_array_almost_equal(fpr, [0, 1, 1])</div>
<div class="line"><span class="lineno">  344</span>    assert_almost_equal(roc_auc, 1.0)</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>    y_true = [1, 0]</div>
<div class="line"><span class="lineno">  347</span>    y_score = [0.5, 0.5]</div>
<div class="line"><span class="lineno">  348</span>    tpr, fpr, _ = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  349</span>    roc_auc = roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  350</span>    assert_array_almost_equal(tpr, [0, 1])</div>
<div class="line"><span class="lineno">  351</span>    assert_array_almost_equal(fpr, [0, 1])</div>
<div class="line"><span class="lineno">  352</span>    assert_almost_equal(roc_auc, 0.5)</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    y_true = [0, 0]</div>
<div class="line"><span class="lineno">  355</span>    y_score = [0.25, 0.75]</div>
<div class="line"><span class="lineno">  356</span>    <span class="comment"># assert UndefinedMetricWarning because of no positive sample in y_true</span></div>
<div class="line"><span class="lineno">  357</span>    expected_message = (</div>
<div class="line"><span class="lineno">  358</span>        <span class="stringliteral">&quot;No positive samples in y_true, true positive value should be meaningless&quot;</span></div>
<div class="line"><span class="lineno">  359</span>    )</div>
<div class="line"><span class="lineno">  360</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=expected_message):</div>
<div class="line"><span class="lineno">  361</span>        tpr, fpr, _ = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  364</span>        roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  365</span>    assert_array_almost_equal(tpr, [0.0, 0.5, 1.0])</div>
<div class="line"><span class="lineno">  366</span>    assert_array_almost_equal(fpr, [np.nan, np.nan, np.nan])</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span>    y_true = [1, 1]</div>
<div class="line"><span class="lineno">  369</span>    y_score = [0.25, 0.75]</div>
<div class="line"><span class="lineno">  370</span>    <span class="comment"># assert UndefinedMetricWarning because of no negative sample in y_true</span></div>
<div class="line"><span class="lineno">  371</span>    expected_message = (</div>
<div class="line"><span class="lineno">  372</span>        <span class="stringliteral">&quot;No negative samples in y_true, false positive value should be meaningless&quot;</span></div>
<div class="line"><span class="lineno">  373</span>    )</div>
<div class="line"><span class="lineno">  374</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=expected_message):</div>
<div class="line"><span class="lineno">  375</span>        tpr, fpr, _ = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  378</span>        roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno">  379</span>    assert_array_almost_equal(tpr, [np.nan, np.nan, np.nan])</div>
<div class="line"><span class="lineno">  380</span>    assert_array_almost_equal(fpr, [0.0, 0.5, 1.0])</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>    <span class="comment"># Multi-label classification task</span></div>
<div class="line"><span class="lineno">  383</span>    y_true = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno">  384</span>    y_score = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno">  385</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  386</span>        roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno">  387</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  388</span>        roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno">  389</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 1.0)</div>
<div class="line"><span class="lineno">  390</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 1.0)</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>    y_true = np.array([[0, 1], [0, 1]])</div>
<div class="line"><span class="lineno">  393</span>    y_score = np.array([[0, 1], [1, 0]])</div>
<div class="line"><span class="lineno">  394</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  395</span>        roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno">  396</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  397</span>        roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno">  398</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno">  399</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>    y_true = np.array([[1, 0], [0, 1]])</div>
<div class="line"><span class="lineno">  402</span>    y_score = np.array([[0, 1], [1, 0]])</div>
<div class="line"><span class="lineno">  403</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 0)</div>
<div class="line"><span class="lineno">  404</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 0)</div>
<div class="line"><span class="lineno">  405</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 0)</div>
<div class="line"><span class="lineno">  406</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 0)</div>
<div class="line"><span class="lineno">  407</span> </div>
<div class="line"><span class="lineno">  408</span>    y_true = np.array([[1, 0], [0, 1]])</div>
<div class="line"><span class="lineno">  409</span>    y_score = np.array([[0.5, 0.5], [0.5, 0.5]])</div>
<div class="line"><span class="lineno">  410</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno">  411</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;weighted&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno">  412</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno">  413</span>    assert_almost_equal(roc_auc_score(y_true, y_score, average=<span class="stringliteral">&quot;micro&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2af0e486b09c5c3fc9fb5287101563b3" name="a2af0e486b09c5c3fc9fb5287101563b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af0e486b09c5c3fc9fb5287101563b3">&#9670;&#160;</a></span>test_roc_returns_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_roc_returns_consistency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  219</span><span class="keyword">def </span>test_roc_returns_consistency():</div>
<div class="line"><span class="lineno">  220</span>    <span class="comment"># Test whether the returned threshold matches up with tpr</span></div>
<div class="line"><span class="lineno">  221</span>    <span class="comment"># make small toy dataset</span></div>
<div class="line"><span class="lineno">  222</span>    y_true, _, y_score = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  223</span>    fpr, tpr, thresholds = roc_curve(y_true, y_score)</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>    <span class="comment"># use the given thresholds to determine the tpr</span></div>
<div class="line"><span class="lineno">  226</span>    tpr_correct = []</div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordflow">for</span> t <span class="keywordflow">in</span> thresholds:</div>
<div class="line"><span class="lineno">  228</span>        tp = np.sum((y_score &gt;= t) &amp; y_true)</div>
<div class="line"><span class="lineno">  229</span>        p = np.sum(y_true)</div>
<div class="line"><span class="lineno">  230</span>        tpr_correct.append(1.0 * tp / p)</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>    <span class="comment"># compare tpr and tpr_correct to see if the thresholds&#39; order was correct</span></div>
<div class="line"><span class="lineno">  233</span>    assert_array_almost_equal(tpr, tpr_correct, decimal=2)</div>
<div class="line"><span class="lineno">  234</span>    <span class="keyword">assert</span> fpr.shape == tpr.shape</div>
<div class="line"><span class="lineno">  235</span>    <span class="keyword">assert</span> fpr.shape == thresholds.shape</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab674a6b1296e84760468100dc572541d" name="ab674a6b1296e84760468100dc572541d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab674a6b1296e84760468100dc572541d">&#9670;&#160;</a></span>test_score_scale_invariance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_score_scale_invariance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1136</span><span class="keyword">def </span>test_score_scale_invariance():</div>
<div class="line"><span class="lineno"> 1137</span>    <span class="comment"># Test that average_precision_score and roc_auc_score are invariant by</span></div>
<div class="line"><span class="lineno"> 1138</span>    <span class="comment"># the scaling or shifting of probabilities</span></div>
<div class="line"><span class="lineno"> 1139</span>    <span class="comment"># This test was expanded (added scaled_down) in response to github</span></div>
<div class="line"><span class="lineno"> 1140</span>    <span class="comment"># issue #3864 (and others), where overly aggressive rounding was causing</span></div>
<div class="line"><span class="lineno"> 1141</span>    <span class="comment"># problems for users with very small y_score values</span></div>
<div class="line"><span class="lineno"> 1142</span>    y_true, _, y_score = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1143</span> </div>
<div class="line"><span class="lineno"> 1144</span>    roc_auc = roc_auc_score(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1145</span>    roc_auc_scaled_up = roc_auc_score(y_true, 100 * y_score)</div>
<div class="line"><span class="lineno"> 1146</span>    roc_auc_scaled_down = roc_auc_score(y_true, 1e-6 * y_score)</div>
<div class="line"><span class="lineno"> 1147</span>    roc_auc_shifted = roc_auc_score(y_true, y_score - 10)</div>
<div class="line"><span class="lineno"> 1148</span>    <span class="keyword">assert</span> roc_auc == roc_auc_scaled_up</div>
<div class="line"><span class="lineno"> 1149</span>    <span class="keyword">assert</span> roc_auc == roc_auc_scaled_down</div>
<div class="line"><span class="lineno"> 1150</span>    <span class="keyword">assert</span> roc_auc == roc_auc_shifted</div>
<div class="line"><span class="lineno"> 1151</span> </div>
<div class="line"><span class="lineno"> 1152</span>    pr_auc = average_precision_score(y_true, y_score)</div>
<div class="line"><span class="lineno"> 1153</span>    pr_auc_scaled_up = average_precision_score(y_true, 100 * y_score)</div>
<div class="line"><span class="lineno"> 1154</span>    pr_auc_scaled_down = average_precision_score(y_true, 1e-6 * y_score)</div>
<div class="line"><span class="lineno"> 1155</span>    pr_auc_shifted = average_precision_score(y_true, y_score - 10)</div>
<div class="line"><span class="lineno"> 1156</span>    <span class="keyword">assert</span> pr_auc == pr_auc_scaled_up</div>
<div class="line"><span class="lineno"> 1157</span>    <span class="keyword">assert</span> pr_auc == pr_auc_scaled_down</div>
<div class="line"><span class="lineno"> 1158</span>    <span class="keyword">assert</span> pr_auc == pr_auc_shifted</div>
<div class="line"><span class="lineno"> 1159</span> </div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1162</span>    <span class="stringliteral">&quot;y_true,y_score,expected_fpr,expected_fnr&quot;</span>,</div>
<div class="line"><span class="lineno"> 1163</span>    [</div>
<div class="line"><span class="lineno"> 1164</span>        ([0, 0, 1], [0, 0.5, 1], [0], [0]),</div>
<div class="line"><span class="lineno"> 1165</span>        ([0, 0, 1], [0, 0.25, 0.5], [0], [0]),</div>
<div class="line"><span class="lineno"> 1166</span>        ([0, 0, 1], [0.5, 0.75, 1], [0], [0]),</div>
<div class="line"><span class="lineno"> 1167</span>        ([0, 0, 1], [0.25, 0.5, 0.75], [0], [0]),</div>
<div class="line"><span class="lineno"> 1168</span>        ([0, 1, 0], [0, 0.5, 1], [0.5], [0]),</div>
<div class="line"><span class="lineno"> 1169</span>        ([0, 1, 0], [0, 0.25, 0.5], [0.5], [0]),</div>
<div class="line"><span class="lineno"> 1170</span>        ([0, 1, 0], [0.5, 0.75, 1], [0.5], [0]),</div>
<div class="line"><span class="lineno"> 1171</span>        ([0, 1, 0], [0.25, 0.5, 0.75], [0.5], [0]),</div>
<div class="line"><span class="lineno"> 1172</span>        ([0, 1, 1], [0, 0.5, 1], [0.0], [0]),</div>
<div class="line"><span class="lineno"> 1173</span>        ([0, 1, 1], [0, 0.25, 0.5], [0], [0]),</div>
<div class="line"><span class="lineno"> 1174</span>        ([0, 1, 1], [0.5, 0.75, 1], [0], [0]),</div>
<div class="line"><span class="lineno"> 1175</span>        ([0, 1, 1], [0.25, 0.5, 0.75], [0], [0]),</div>
<div class="line"><span class="lineno"> 1176</span>        ([1, 0, 0], [0, 0.5, 1], [1, 1, 0.5], [0, 1, 1]),</div>
<div class="line"><span class="lineno"> 1177</span>        ([1, 0, 0], [0, 0.25, 0.5], [1, 1, 0.5], [0, 1, 1]),</div>
<div class="line"><span class="lineno"> 1178</span>        ([1, 0, 0], [0.5, 0.75, 1], [1, 1, 0.5], [0, 1, 1]),</div>
<div class="line"><span class="lineno"> 1179</span>        ([1, 0, 0], [0.25, 0.5, 0.75], [1, 1, 0.5], [0, 1, 1]),</div>
<div class="line"><span class="lineno"> 1180</span>        ([1, 0, 1], [0, 0.5, 1], [1, 1, 0], [0, 0.5, 0.5]),</div>
<div class="line"><span class="lineno"> 1181</span>        ([1, 0, 1], [0, 0.25, 0.5], [1, 1, 0], [0, 0.5, 0.5]),</div>
<div class="line"><span class="lineno"> 1182</span>        ([1, 0, 1], [0.5, 0.75, 1], [1, 1, 0], [0, 0.5, 0.5]),</div>
<div class="line"><span class="lineno"> 1183</span>        ([1, 0, 1], [0.25, 0.5, 0.75], [1, 1, 0], [0, 0.5, 0.5]),</div>
<div class="line"><span class="lineno"> 1184</span>    ],</div>
<div class="line"><span class="lineno"> 1185</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1df63ef92a2ae909547e82e9f58f1e6c" name="a1df63ef92a2ae909547e82e9f58f1e6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df63ef92a2ae909547e82e9f58f1e6c">&#9670;&#160;</a></span>test_top_k_accuracy_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_top_k_accuracy_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>true_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1896</span><span class="keyword">def </span>test_top_k_accuracy_score(y_true, k, true_score):</div>
<div class="line"><span class="lineno"> 1897</span>    y_score = np.array(</div>
<div class="line"><span class="lineno"> 1898</span>        [</div>
<div class="line"><span class="lineno"> 1899</span>            [0.4, 0.3, 0.2, 0.1],</div>
<div class="line"><span class="lineno"> 1900</span>            [0.1, 0.3, 0.4, 0.2],</div>
<div class="line"><span class="lineno"> 1901</span>            [0.4, 0.1, 0.2, 0.3],</div>
<div class="line"><span class="lineno"> 1902</span>            [0.3, 0.2, 0.4, 0.1],</div>
<div class="line"><span class="lineno"> 1903</span>        ]</div>
<div class="line"><span class="lineno"> 1904</span>    )</div>
<div class="line"><span class="lineno"> 1905</span>    score = top_k_accuracy_score(y_true, y_score, k=k)</div>
<div class="line"><span class="lineno"> 1906</span>    <span class="keyword">assert</span> score == pytest.approx(true_score)</div>
<div class="line"><span class="lineno"> 1907</span> </div>
<div class="line"><span class="lineno"> 1908</span> </div>
<div class="line"><span class="lineno"> 1909</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1910</span>    <span class="stringliteral">&quot;y_score, k, true_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1911</span>    [</div>
<div class="line"><span class="lineno"> 1912</span>        (np.array([-1, -1, 1, 1]), 1, 1),</div>
<div class="line"><span class="lineno"> 1913</span>        (np.array([-1, 1, -1, 1]), 1, 0.5),</div>
<div class="line"><span class="lineno"> 1914</span>        (np.array([-1, 1, -1, 1]), 2, 1),</div>
<div class="line"><span class="lineno"> 1915</span>        (np.array([0.2, 0.2, 0.7, 0.7]), 1, 1),</div>
<div class="line"><span class="lineno"> 1916</span>        (np.array([0.2, 0.7, 0.2, 0.7]), 1, 0.5),</div>
<div class="line"><span class="lineno"> 1917</span>        (np.array([0.2, 0.7, 0.2, 0.7]), 2, 1),</div>
<div class="line"><span class="lineno"> 1918</span>    ],</div>
<div class="line"><span class="lineno"> 1919</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a79ce910d035a3c58a3b0a5927c62b163" name="a79ce910d035a3c58a3b0a5927c62b163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79ce910d035a3c58a3b0a5927c62b163">&#9670;&#160;</a></span>test_top_k_accuracy_score_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_top_k_accuracy_score_binary </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>true_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1920</span><span class="keyword">def </span>test_top_k_accuracy_score_binary(y_score, k, true_score):</div>
<div class="line"><span class="lineno"> 1921</span>    y_true = [0, 0, 1, 1]</div>
<div class="line"><span class="lineno"> 1922</span> </div>
<div class="line"><span class="lineno"> 1923</span>    threshold = 0.5 <span class="keywordflow">if</span> y_score.min() &gt;= 0 <span class="keywordflow">and</span> y_score.max() &lt;= 1 <span class="keywordflow">else</span> 0</div>
<div class="line"><span class="lineno"> 1924</span>    y_pred = (y_score &gt; threshold).astype(np.int64) <span class="keywordflow">if</span> k == 1 <span class="keywordflow">else</span> y_true</div>
<div class="line"><span class="lineno"> 1925</span> </div>
<div class="line"><span class="lineno"> 1926</span>    score = top_k_accuracy_score(y_true, y_score, k=k)</div>
<div class="line"><span class="lineno"> 1927</span>    score_acc = accuracy_score(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1928</span> </div>
<div class="line"><span class="lineno"> 1929</span>    <span class="keyword">assert</span> score == score_acc == pytest.approx(true_score)</div>
<div class="line"><span class="lineno"> 1930</span> </div>
<div class="line"><span class="lineno"> 1931</span> </div>
<div class="line"><span class="lineno"> 1932</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1933</span>    <span class="stringliteral">&quot;y_true, true_score, labels&quot;</span>,</div>
<div class="line"><span class="lineno"> 1934</span>    [</div>
<div class="line"><span class="lineno"> 1935</span>        (np.array([0, 1, 1, 2]), 0.75, [0, 1, 2, 3]),</div>
<div class="line"><span class="lineno"> 1936</span>        (np.array([0, 1, 1, 1]), 0.5, [0, 1, 2, 3]),</div>
<div class="line"><span class="lineno"> 1937</span>        (np.array([1, 1, 1, 1]), 0.5, [0, 1, 2, 3]),</div>
<div class="line"><span class="lineno"> 1938</span>        (np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>]), 0.75, [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>]),</div>
<div class="line"><span class="lineno"> 1939</span>    ],</div>
<div class="line"><span class="lineno"> 1940</span>)</div>
<div class="line"><span class="lineno"> 1941</span><span class="preprocessor">@pytest.mark.parametrize(&quot;labels_as_ndarray&quot;, [True, False])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ddb87b69a79fc63a8bd4b4dda9b33ee" name="a0ddb87b69a79fc63a8bd4b4dda9b33ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddb87b69a79fc63a8bd4b4dda9b33ee">&#9670;&#160;</a></span>test_top_k_accuracy_score_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_top_k_accuracy_score_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2106</span><span class="keyword">def </span>test_top_k_accuracy_score_error(y_true, y_score, labels, msg):</div>
<div class="line"><span class="lineno"> 2107</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 2108</span>        top_k_accuracy_score(y_true, y_score, k=2, labels=labels)</div>
<div class="line"><span class="lineno"> 2109</span> </div>
<div class="line"><span class="lineno"> 2110</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af3c8821f3d777a0af6ece23de39add80" name="af3c8821f3d777a0af6ece23de39add80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3c8821f3d777a0af6ece23de39add80">&#9670;&#160;</a></span>test_top_k_accuracy_score_increasing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_top_k_accuracy_score_increasing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1961</span><span class="keyword">def </span>test_top_k_accuracy_score_increasing():</div>
<div class="line"><span class="lineno"> 1962</span>    <span class="comment"># Make sure increasing k leads to a higher score</span></div>
<div class="line"><span class="lineno"> 1963</span>    X, y = datasets.make_classification(</div>
<div class="line"><span class="lineno"> 1964</span>        n_classes=10, n_samples=1000, n_informative=10, random_state=0</div>
<div class="line"><span class="lineno"> 1965</span>    )</div>
<div class="line"><span class="lineno"> 1966</span> </div>
<div class="line"><span class="lineno"> 1967</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno"> 1968</span> </div>
<div class="line"><span class="lineno"> 1969</span>    clf = LogisticRegression(random_state=0)</div>
<div class="line"><span class="lineno"> 1970</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno"> 1971</span> </div>
<div class="line"><span class="lineno"> 1972</span>    <span class="keywordflow">for</span> X, y <span class="keywordflow">in</span> zip((X_train, X_test), (y_train, y_test)):</div>
<div class="line"><span class="lineno"> 1973</span>        scores = [</div>
<div class="line"><span class="lineno"> 1974</span>            top_k_accuracy_score(y, clf.predict_proba(X), k=k) <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(2, 10)</div>
<div class="line"><span class="lineno"> 1975</span>        ]</div>
<div class="line"><span class="lineno"> 1976</span> </div>
<div class="line"><span class="lineno"> 1977</span>        <span class="keyword">assert</span> np.all(np.diff(scores) &gt; 0)</div>
<div class="line"><span class="lineno"> 1978</span> </div>
<div class="line"><span class="lineno"> 1979</span> </div>
<div class="line"><span class="lineno"> 1980</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1981</span>    <span class="stringliteral">&quot;y_true, k, true_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1982</span>    [</div>
<div class="line"><span class="lineno"> 1983</span>        ([0, 1, 2, 3], 1, 0.25),</div>
<div class="line"><span class="lineno"> 1984</span>        ([0, 1, 2, 3], 2, 0.5),</div>
<div class="line"><span class="lineno"> 1985</span>        ([0, 1, 2, 3], 3, 1),</div>
<div class="line"><span class="lineno"> 1986</span>    ],</div>
<div class="line"><span class="lineno"> 1987</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e255fd461ac3165377bde591f5d9367" name="a6e255fd461ac3165377bde591f5d9367"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e255fd461ac3165377bde591f5d9367">&#9670;&#160;</a></span>test_top_k_accuracy_score_multiclass_with_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_top_k_accuracy_score_multiclass_with_labels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>true_score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels_as_ndarray</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test when labels and y_score are multiclass.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1944</span>):</div>
<div class="line"><span class="lineno"> 1945</span>    <span class="stringliteral">&quot;&quot;&quot;Test when labels and y_score are multiclass.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1946</span>    <span class="keywordflow">if</span> labels_as_ndarray:</div>
<div class="line"><span class="lineno"> 1947</span>        labels = np.asarray(labels)</div>
<div class="line"><span class="lineno"> 1948</span>    y_score = np.array(</div>
<div class="line"><span class="lineno"> 1949</span>        [</div>
<div class="line"><span class="lineno"> 1950</span>            [0.4, 0.3, 0.2, 0.1],</div>
<div class="line"><span class="lineno"> 1951</span>            [0.1, 0.3, 0.4, 0.2],</div>
<div class="line"><span class="lineno"> 1952</span>            [0.4, 0.1, 0.2, 0.3],</div>
<div class="line"><span class="lineno"> 1953</span>            [0.3, 0.2, 0.4, 0.1],</div>
<div class="line"><span class="lineno"> 1954</span>        ]</div>
<div class="line"><span class="lineno"> 1955</span>    )</div>
<div class="line"><span class="lineno"> 1956</span> </div>
<div class="line"><span class="lineno"> 1957</span>    score = top_k_accuracy_score(y_true, y_score, k=2, labels=labels)</div>
<div class="line"><span class="lineno"> 1958</span>    <span class="keyword">assert</span> score == pytest.approx(true_score)</div>
<div class="line"><span class="lineno"> 1959</span> </div>
<div class="line"><span class="lineno"> 1960</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8561037bb494679503c82f5575f3b2e" name="ac8561037bb494679503c82f5575f3b2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8561037bb494679503c82f5575f3b2e">&#9670;&#160;</a></span>test_top_k_accuracy_score_ties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_top_k_accuracy_score_ties </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>true_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1988</span><span class="keyword">def </span>test_top_k_accuracy_score_ties(y_true, k, true_score):</div>
<div class="line"><span class="lineno"> 1989</span>    <span class="comment"># Make sure highest indices labels are chosen first in case of ties</span></div>
<div class="line"><span class="lineno"> 1990</span>    y_score = np.array(</div>
<div class="line"><span class="lineno"> 1991</span>        [</div>
<div class="line"><span class="lineno"> 1992</span>            [5, 5, 7, 0],</div>
<div class="line"><span class="lineno"> 1993</span>            [1, 5, 5, 5],</div>
<div class="line"><span class="lineno"> 1994</span>            [0, 0, 3, 3],</div>
<div class="line"><span class="lineno"> 1995</span>            [1, 1, 1, 1],</div>
<div class="line"><span class="lineno"> 1996</span>        ]</div>
<div class="line"><span class="lineno"> 1997</span>    )</div>
<div class="line"><span class="lineno"> 1998</span>    <span class="keyword">assert</span> top_k_accuracy_score(y_true, y_score, k=k) == pytest.approx(true_score)</div>
<div class="line"><span class="lineno"> 1999</span> </div>
<div class="line"><span class="lineno"> 2000</span> </div>
<div class="line"><span class="lineno"> 2001</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 2002</span>    <span class="stringliteral">&quot;y_true, k&quot;</span>,</div>
<div class="line"><span class="lineno"> 2003</span>    [</div>
<div class="line"><span class="lineno"> 2004</span>        ([0, 1, 2, 3], 4),</div>
<div class="line"><span class="lineno"> 2005</span>        ([0, 1, 2, 3], 5),</div>
<div class="line"><span class="lineno"> 2006</span>    ],</div>
<div class="line"><span class="lineno"> 2007</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0661c82122261524dabc0ff20f21d6e2" name="a0661c82122261524dabc0ff20f21d6e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0661c82122261524dabc0ff20f21d6e2">&#9670;&#160;</a></span>test_top_k_accuracy_score_warning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_ranking.test_top_k_accuracy_score_warning </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2008</span><span class="keyword">def </span>test_top_k_accuracy_score_warning(y_true, k):</div>
<div class="line"><span class="lineno"> 2009</span>    y_score = np.array(</div>
<div class="line"><span class="lineno"> 2010</span>        [</div>
<div class="line"><span class="lineno"> 2011</span>            [0.4, 0.3, 0.2, 0.1],</div>
<div class="line"><span class="lineno"> 2012</span>            [0.1, 0.4, 0.3, 0.2],</div>
<div class="line"><span class="lineno"> 2013</span>            [0.2, 0.1, 0.4, 0.3],</div>
<div class="line"><span class="lineno"> 2014</span>            [0.3, 0.2, 0.1, 0.4],</div>
<div class="line"><span class="lineno"> 2015</span>        ]</div>
<div class="line"><span class="lineno"> 2016</span>    )</div>
<div class="line"><span class="lineno"> 2017</span>    expected_message = (</div>
<div class="line"><span class="lineno"> 2018</span>        <span class="stringliteral">r&quot;&#39;k&#39; \&zwj;(\d+\&zwj;) greater than or equal to &#39;n_classes&#39; \&zwj;(\d+\&zwj;) will result in a &quot;</span></div>
<div class="line"><span class="lineno"> 2019</span>        <span class="stringliteral">&quot;perfect score and is therefore meaningless.&quot;</span></div>
<div class="line"><span class="lineno"> 2020</span>    )</div>
<div class="line"><span class="lineno"> 2021</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=expected_message):</div>
<div class="line"><span class="lineno"> 2022</span>        score = top_k_accuracy_score(y_true, y_score, k=k)</div>
<div class="line"><span class="lineno"> 2023</span>    <span class="keyword">assert</span> score == 1</div>
<div class="line"><span class="lineno"> 2024</span> </div>
<div class="line"><span class="lineno"> 2025</span> </div>
<div class="line"><span class="lineno"> 2026</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 2027</span>    <span class="stringliteral">&quot;y_true, y_score, labels, msg&quot;</span>,</div>
<div class="line"><span class="lineno"> 2028</span>    [</div>
<div class="line"><span class="lineno"> 2029</span>        (</div>
<div class="line"><span class="lineno"> 2030</span>            [0, 0.57, 1, 2],</div>
<div class="line"><span class="lineno"> 2031</span>            [</div>
<div class="line"><span class="lineno"> 2032</span>                [0.2, 0.1, 0.7],</div>
<div class="line"><span class="lineno"> 2033</span>                [0.4, 0.3, 0.3],</div>
<div class="line"><span class="lineno"> 2034</span>                [0.3, 0.4, 0.3],</div>
<div class="line"><span class="lineno"> 2035</span>                [0.4, 0.5, 0.1],</div>
<div class="line"><span class="lineno"> 2036</span>            ],</div>
<div class="line"><span class="lineno"> 2037</span>            <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2038</span>            <span class="stringliteral">&quot;y type must be &#39;binary&#39; or &#39;multiclass&#39;, got &#39;continuous&#39;&quot;</span>,</div>
<div class="line"><span class="lineno"> 2039</span>        ),</div>
<div class="line"><span class="lineno"> 2040</span>        (</div>
<div class="line"><span class="lineno"> 2041</span>            [0, 1, 2, 3],</div>
<div class="line"><span class="lineno"> 2042</span>            [</div>
<div class="line"><span class="lineno"> 2043</span>                [0.2, 0.1, 0.7],</div>
<div class="line"><span class="lineno"> 2044</span>                [0.4, 0.3, 0.3],</div>
<div class="line"><span class="lineno"> 2045</span>                [0.3, 0.4, 0.3],</div>
<div class="line"><span class="lineno"> 2046</span>                [0.4, 0.5, 0.1],</div>
<div class="line"><span class="lineno"> 2047</span>            ],</div>
<div class="line"><span class="lineno"> 2048</span>            <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2049</span>            <span class="stringliteral">r&quot;Number of classes in &#39;y_true&#39; \&zwj;(4\&zwj;) not equal to the number of &quot;</span></div>
<div class="line"><span class="lineno"> 2050</span>            <span class="stringliteral">r&quot;classes in &#39;y_score&#39; \&zwj;(3\&zwj;).&quot;</span>,</div>
<div class="line"><span class="lineno"> 2051</span>        ),</div>
<div class="line"><span class="lineno"> 2052</span>        (</div>
<div class="line"><span class="lineno"> 2053</span>            [<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno"> 2054</span>            [</div>
<div class="line"><span class="lineno"> 2055</span>                [0.2, 0.1, 0.7],</div>
<div class="line"><span class="lineno"> 2056</span>                [0.4, 0.3, 0.3],</div>
<div class="line"><span class="lineno"> 2057</span>                [0.3, 0.4, 0.3],</div>
<div class="line"><span class="lineno"> 2058</span>                [0.4, 0.5, 0.1],</div>
<div class="line"><span class="lineno"> 2059</span>            ],</div>
<div class="line"><span class="lineno"> 2060</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>],</div>
<div class="line"><span class="lineno"> 2061</span>            <span class="stringliteral">&quot;Parameter &#39;labels&#39; must be unique.&quot;</span>,</div>
<div class="line"><span class="lineno"> 2062</span>        ),</div>
<div class="line"><span class="lineno"> 2063</span>        (</div>
<div class="line"><span class="lineno"> 2064</span>            [<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno"> 2065</span>            [</div>
<div class="line"><span class="lineno"> 2066</span>                [0.2, 0.1, 0.7],</div>
<div class="line"><span class="lineno"> 2067</span>                [0.4, 0.3, 0.3],</div>
<div class="line"><span class="lineno"> 2068</span>                [0.3, 0.4, 0.3],</div>
<div class="line"><span class="lineno"> 2069</span>                [0.4, 0.5, 0.1],</div>
<div class="line"><span class="lineno"> 2070</span>            ],</div>
<div class="line"><span class="lineno"> 2071</span>            [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno"> 2072</span>            <span class="stringliteral">&quot;Parameter &#39;labels&#39; must be ordered.&quot;</span>,</div>
<div class="line"><span class="lineno"> 2073</span>        ),</div>
<div class="line"><span class="lineno"> 2074</span>        (</div>
<div class="line"><span class="lineno"> 2075</span>            [0, 0, 1, 2],</div>
<div class="line"><span class="lineno"> 2076</span>            [</div>
<div class="line"><span class="lineno"> 2077</span>                [0.2, 0.1, 0.7],</div>
<div class="line"><span class="lineno"> 2078</span>                [0.4, 0.3, 0.3],</div>
<div class="line"><span class="lineno"> 2079</span>                [0.3, 0.4, 0.3],</div>
<div class="line"><span class="lineno"> 2080</span>                [0.4, 0.5, 0.1],</div>
<div class="line"><span class="lineno"> 2081</span>            ],</div>
<div class="line"><span class="lineno"> 2082</span>            [0, 1, 2, 3],</div>
<div class="line"><span class="lineno"> 2083</span>            <span class="stringliteral">r&quot;Number of given labels \&zwj;(4\&zwj;) not equal to the number of classes in &quot;</span></div>
<div class="line"><span class="lineno"> 2084</span>            <span class="stringliteral">r&quot;&#39;y_score&#39; \&zwj;(3\&zwj;).&quot;</span>,</div>
<div class="line"><span class="lineno"> 2085</span>        ),</div>
<div class="line"><span class="lineno"> 2086</span>        (</div>
<div class="line"><span class="lineno"> 2087</span>            [0, 0, 1, 2],</div>
<div class="line"><span class="lineno"> 2088</span>            [</div>
<div class="line"><span class="lineno"> 2089</span>                [0.2, 0.1, 0.7],</div>
<div class="line"><span class="lineno"> 2090</span>                [0.4, 0.3, 0.3],</div>
<div class="line"><span class="lineno"> 2091</span>                [0.3, 0.4, 0.3],</div>
<div class="line"><span class="lineno"> 2092</span>                [0.4, 0.5, 0.1],</div>
<div class="line"><span class="lineno"> 2093</span>            ],</div>
<div class="line"><span class="lineno"> 2094</span>            [0, 1, 3],</div>
<div class="line"><span class="lineno"> 2095</span>            <span class="stringliteral">&quot;&#39;y_true&#39; contains labels not in parameter &#39;labels&#39;.&quot;</span>,</div>
<div class="line"><span class="lineno"> 2096</span>        ),</div>
<div class="line"><span class="lineno"> 2097</span>        (</div>
<div class="line"><span class="lineno"> 2098</span>            [0, 1],</div>
<div class="line"><span class="lineno"> 2099</span>            [[0.5, 0.2, 0.2], [0.3, 0.4, 0.2]],</div>
<div class="line"><span class="lineno"> 2100</span>            <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2101</span>            <span class="stringliteral">&quot;`y_true` is binary while y_score is 2d with 3 classes. If&quot;</span></div>
<div class="line"><span class="lineno"> 2102</span>            <span class="stringliteral">&quot; `y_true` does not contain all the labels, `labels` must be provided&quot;</span>,</div>
<div class="line"><span class="lineno"> 2103</span>        ),</div>
<div class="line"><span class="lineno"> 2104</span>    ],</div>
<div class="line"><span class="lineno"> 2105</span>)</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa579dcf32e34d0b7628553e34337ad80" name="aa579dcf32e34d0b7628553e34337ad80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa579dcf32e34d0b7628553e34337ad80">&#9670;&#160;</a></span>CURVE_FUNCS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list sklearn.metrics.tests.test_ranking.CURVE_FUNCS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  [</div>
<div class="line"><span class="lineno">    2</span>    det_curve,</div>
<div class="line"><span class="lineno">    3</span>    precision_recall_curve,</div>
<div class="line"><span class="lineno">    4</span>    roc_curve,</div>
<div class="line"><span class="lineno">    5</span>]</div>
</div><!-- fragment -->
<p>Utilities for testing. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
