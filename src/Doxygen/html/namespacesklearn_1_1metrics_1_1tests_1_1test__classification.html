<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.metrics.tests.test_classification Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics.html">metrics</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html">test_classification</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sklearn.metrics.tests.test_classification Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a47240abd8ec04e979eeea0dac8ccc2ea" id="r_a47240abd8ec04e979eeea0dac8ccc2ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a47240abd8ec04e979eeea0dac8ccc2ea">make_prediction</a> (dataset=None, binary=False)</td></tr>
<tr class="memdesc:a47240abd8ec04e979eeea0dac8ccc2ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utilities for testing.  <br /></td></tr>
<tr class="separator:a47240abd8ec04e979eeea0dac8ccc2ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7b1cbee884ed048a655a2bfe73e035" id="r_a2c7b1cbee884ed048a655a2bfe73e035"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a2c7b1cbee884ed048a655a2bfe73e035">test_classification_report_dictionary_output</a> ()</td></tr>
<tr class="memdesc:a2c7b1cbee884ed048a655a2bfe73e035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests.  <br /></td></tr>
<tr class="separator:a2c7b1cbee884ed048a655a2bfe73e035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1656e933c93e4d70c1e7ba8fef122e88" id="r_a1656e933c93e4d70c1e7ba8fef122e88"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a1656e933c93e4d70c1e7ba8fef122e88">test_classification_report_output_dict_empty_input</a> ()</td></tr>
<tr class="separator:a1656e933c93e4d70c1e7ba8fef122e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6247e4c1586fdd1c12ebfd1486895244" id="r_a6247e4c1586fdd1c12ebfd1486895244"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a6247e4c1586fdd1c12ebfd1486895244">test_classification_report_zero_division_warning</a> (zero_division)</td></tr>
<tr class="separator:a6247e4c1586fdd1c12ebfd1486895244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5101d7842d6577ac46c9605a9e3835e" id="r_ae5101d7842d6577ac46c9605a9e3835e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ae5101d7842d6577ac46c9605a9e3835e">test_multilabel_accuracy_score_subset_accuracy</a> ()</td></tr>
<tr class="separator:ae5101d7842d6577ac46c9605a9e3835e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a316ec66710ca27a2b0216cf1b69edba9" id="r_a316ec66710ca27a2b0216cf1b69edba9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a316ec66710ca27a2b0216cf1b69edba9">test_precision_recall_f1_score_binary</a> ()</td></tr>
<tr class="separator:a316ec66710ca27a2b0216cf1b69edba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cff3e56dba7a8425652781fae74d1f3" id="r_a3cff3e56dba7a8425652781fae74d1f3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a3cff3e56dba7a8425652781fae74d1f3">test_precision_recall_f_binary_single_class</a> ()</td></tr>
<tr class="separator:a3cff3e56dba7a8425652781fae74d1f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af83113c4b50514b5c79af8b46f5937dd" id="r_af83113c4b50514b5c79af8b46f5937dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#af83113c4b50514b5c79af8b46f5937dd">test_precision_recall_f_extra_labels</a> ()</td></tr>
<tr class="separator:af83113c4b50514b5c79af8b46f5937dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655662bdb32791b78d7007adabf611d2" id="r_a655662bdb32791b78d7007adabf611d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a655662bdb32791b78d7007adabf611d2">test_precision_recall_f_ignored_labels</a> ()</td></tr>
<tr class="separator:a655662bdb32791b78d7007adabf611d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbbcd850ae1a52c06ac59deadee65619" id="r_abbbcd850ae1a52c06ac59deadee65619"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#abbbcd850ae1a52c06ac59deadee65619">test_average_precision_score_score_non_binary_class</a> ()</td></tr>
<tr class="separator:abbbcd850ae1a52c06ac59deadee65619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac76cd9ea649a6da953802cbdf012bc94" id="r_ac76cd9ea649a6da953802cbdf012bc94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ac76cd9ea649a6da953802cbdf012bc94">test_average_precision_score_duplicate_values</a> ()</td></tr>
<tr class="separator:ac76cd9ea649a6da953802cbdf012bc94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab178bf0823f409fb2514eb96bf7bd272" id="r_ab178bf0823f409fb2514eb96bf7bd272"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ab178bf0823f409fb2514eb96bf7bd272">test_average_precision_score_tied_values</a> ()</td></tr>
<tr class="separator:ab178bf0823f409fb2514eb96bf7bd272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c9413c38317af8fa194fb9a6748d32" id="r_a43c9413c38317af8fa194fb9a6748d32"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a43c9413c38317af8fa194fb9a6748d32">test_precision_recall_fscore_support_errors</a> ()</td></tr>
<tr class="separator:a43c9413c38317af8fa194fb9a6748d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14423894d6682029a03d2289d3562368" id="r_a14423894d6682029a03d2289d3562368"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a14423894d6682029a03d2289d3562368">test_precision_recall_f_unused_pos_label</a> ()</td></tr>
<tr class="separator:a14423894d6682029a03d2289d3562368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663e9e3c25646678aa0f521ec21a5ce7" id="r_a663e9e3c25646678aa0f521ec21a5ce7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a663e9e3c25646678aa0f521ec21a5ce7">test_confusion_matrix_binary</a> ()</td></tr>
<tr class="separator:a663e9e3c25646678aa0f521ec21a5ce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebff44931492c9c7867afd8f3f11ddd3" id="r_aebff44931492c9c7867afd8f3f11ddd3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#aebff44931492c9c7867afd8f3f11ddd3">test_multilabel_confusion_matrix_binary</a> ()</td></tr>
<tr class="separator:aebff44931492c9c7867afd8f3f11ddd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd8c344ad89bd0e7a17371b3a688071d" id="r_acd8c344ad89bd0e7a17371b3a688071d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#acd8c344ad89bd0e7a17371b3a688071d">test_multilabel_confusion_matrix_multiclass</a> ()</td></tr>
<tr class="separator:acd8c344ad89bd0e7a17371b3a688071d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94837269c3c1f85719c1db2594456238" id="r_a94837269c3c1f85719c1db2594456238"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a94837269c3c1f85719c1db2594456238">test_multilabel_confusion_matrix_multilabel</a> ()</td></tr>
<tr class="separator:a94837269c3c1f85719c1db2594456238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada6d7abd0d04b0e5f90f481cec19a295" id="r_ada6d7abd0d04b0e5f90f481cec19a295"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ada6d7abd0d04b0e5f90f481cec19a295">test_multilabel_confusion_matrix_errors</a> ()</td></tr>
<tr class="separator:ada6d7abd0d04b0e5f90f481cec19a295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb4807c6272aac6268025a8fb5e0e16" id="r_a6bb4807c6272aac6268025a8fb5e0e16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a6bb4807c6272aac6268025a8fb5e0e16">test_confusion_matrix_normalize</a> (normalize, cm_dtype, expected_results)</td></tr>
<tr class="separator:a6bb4807c6272aac6268025a8fb5e0e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3682020983f6ea9e56a8c6fd20bb30e" id="r_ab3682020983f6ea9e56a8c6fd20bb30e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ab3682020983f6ea9e56a8c6fd20bb30e">test_confusion_matrix_normalize_wrong_option</a> ()</td></tr>
<tr class="separator:ab3682020983f6ea9e56a8c6fd20bb30e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad118bd3cefae7307fc773d658c8357fc" id="r_ad118bd3cefae7307fc773d658c8357fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ad118bd3cefae7307fc773d658c8357fc">test_confusion_matrix_normalize_single_class</a> ()</td></tr>
<tr class="separator:ad118bd3cefae7307fc773d658c8357fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae645cf4fda35b0db7ca257bc3d3fd7a7" id="r_ae645cf4fda35b0db7ca257bc3d3fd7a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ae645cf4fda35b0db7ca257bc3d3fd7a7">test_likelihood_ratios_warnings</a> (params, warn_msg)</td></tr>
<tr class="separator:ae645cf4fda35b0db7ca257bc3d3fd7a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a651170b189d193bd398c6e90d91db55c" id="r_a651170b189d193bd398c6e90d91db55c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a651170b189d193bd398c6e90d91db55c">test_likelihood_ratios_errors</a> (params, err_msg)</td></tr>
<tr class="separator:a651170b189d193bd398c6e90d91db55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa87e3887579016432eebdc59d789406a" id="r_aa87e3887579016432eebdc59d789406a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#aa87e3887579016432eebdc59d789406a">test_likelihood_ratios</a> ()</td></tr>
<tr class="separator:aa87e3887579016432eebdc59d789406a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9189151cb6d93c28168712545fde4e60" id="r_a9189151cb6d93c28168712545fde4e60"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a9189151cb6d93c28168712545fde4e60">test_cohen_kappa</a> ()</td></tr>
<tr class="separator:a9189151cb6d93c28168712545fde4e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb6a244c830e89ce3bcc319f2ad607d6" id="r_adb6a244c830e89ce3bcc319f2ad607d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#adb6a244c830e89ce3bcc319f2ad607d6">test_matthews_corrcoef_nan</a> ()</td></tr>
<tr class="separator:adb6a244c830e89ce3bcc319f2ad607d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d2c2d985836662c8576ab3b838c4d8" id="r_a12d2c2d985836662c8576ab3b838c4d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a12d2c2d985836662c8576ab3b838c4d8">test_matthews_corrcoef_against_numpy_corrcoef</a> ()</td></tr>
<tr class="separator:a12d2c2d985836662c8576ab3b838c4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91302840d9a231768e74518c95863e52" id="r_a91302840d9a231768e74518c95863e52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a91302840d9a231768e74518c95863e52">test_matthews_corrcoef_against_jurman</a> ()</td></tr>
<tr class="separator:a91302840d9a231768e74518c95863e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50db98c1a32a724de065fc13fafef167" id="r_a50db98c1a32a724de065fc13fafef167"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a50db98c1a32a724de065fc13fafef167">test_matthews_corrcoef</a> ()</td></tr>
<tr class="separator:a50db98c1a32a724de065fc13fafef167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f6aa7553e5c40163944a054fee55d0" id="r_a49f6aa7553e5c40163944a054fee55d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a49f6aa7553e5c40163944a054fee55d0">test_matthews_corrcoef_multiclass</a> ()</td></tr>
<tr class="separator:a49f6aa7553e5c40163944a054fee55d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1f2542143294f54e8b479d60c963b65" id="r_ac1f2542143294f54e8b479d60c963b65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ac1f2542143294f54e8b479d60c963b65">test_matthews_corrcoef_overflow</a> (n_points)</td></tr>
<tr class="separator:ac1f2542143294f54e8b479d60c963b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5feeee200576db9295fadc6fae8898e5" id="r_a5feeee200576db9295fadc6fae8898e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a5feeee200576db9295fadc6fae8898e5">test_precision_recall_f1_score_multiclass</a> ()</td></tr>
<tr class="separator:a5feeee200576db9295fadc6fae8898e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee50850629cf7860b5245f65f2ed7a7" id="r_a9ee50850629cf7860b5245f65f2ed7a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a9ee50850629cf7860b5245f65f2ed7a7">test_precision_refcall_f1_score_multilabel_unordered_labels</a> (average)</td></tr>
<tr class="separator:a9ee50850629cf7860b5245f65f2ed7a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927454e3a669c1e673f149aab22e74c1" id="r_a927454e3a669c1e673f149aab22e74c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a927454e3a669c1e673f149aab22e74c1">test_precision_recall_f1_score_binary_averaged</a> ()</td></tr>
<tr class="separator:a927454e3a669c1e673f149aab22e74c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05bcaf9fa64d8fbbf0670b74eb46baf" id="r_ad05bcaf9fa64d8fbbf0670b74eb46baf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ad05bcaf9fa64d8fbbf0670b74eb46baf">test_zero_precision_recall</a> ()</td></tr>
<tr class="separator:ad05bcaf9fa64d8fbbf0670b74eb46baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad74358cf1e2428adc23a89508f39b992" id="r_ad74358cf1e2428adc23a89508f39b992"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ad74358cf1e2428adc23a89508f39b992">test_confusion_matrix_multiclass_subset_labels</a> ()</td></tr>
<tr class="separator:ad74358cf1e2428adc23a89508f39b992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61a53f6920d18df86122c69aaeae641" id="r_af61a53f6920d18df86122c69aaeae641"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#af61a53f6920d18df86122c69aaeae641">test_confusion_matrix_error</a> (labels, err_msg)</td></tr>
<tr class="separator:af61a53f6920d18df86122c69aaeae641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335fea802bbdfc37f22e9b16a1c48041" id="r_a335fea802bbdfc37f22e9b16a1c48041"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a335fea802bbdfc37f22e9b16a1c48041">test_confusion_matrix_on_zero_length_input</a> (labels)</td></tr>
<tr class="separator:a335fea802bbdfc37f22e9b16a1c48041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac94a66a4d23936d82b35ba8325c66389" id="r_ac94a66a4d23936d82b35ba8325c66389"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ac94a66a4d23936d82b35ba8325c66389">test_confusion_matrix_dtype</a> ()</td></tr>
<tr class="separator:ac94a66a4d23936d82b35ba8325c66389"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66d22bc909246036bb05e33c46418b0" id="r_ad66d22bc909246036bb05e33c46418b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ad66d22bc909246036bb05e33c46418b0">test_classification_report_multiclass</a> ()</td></tr>
<tr class="separator:ad66d22bc909246036bb05e33c46418b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af809310a70faab281f35e1c9d21f2ad0" id="r_af809310a70faab281f35e1c9d21f2ad0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#af809310a70faab281f35e1c9d21f2ad0">test_classification_report_multiclass_balanced</a> ()</td></tr>
<tr class="separator:af809310a70faab281f35e1c9d21f2ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2e22e752087057c35a3be979e9bf18" id="r_a2f2e22e752087057c35a3be979e9bf18"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a2f2e22e752087057c35a3be979e9bf18">test_classification_report_multiclass_with_label_detection</a> ()</td></tr>
<tr class="separator:a2f2e22e752087057c35a3be979e9bf18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad854c945d2a8f11249c520897d5c1e49" id="r_ad854c945d2a8f11249c520897d5c1e49"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ad854c945d2a8f11249c520897d5c1e49">test_classification_report_multiclass_with_digits</a> ()</td></tr>
<tr class="separator:ad854c945d2a8f11249c520897d5c1e49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c8b0a3e2ba4f319d723cc0b0f9db0c3" id="r_a3c8b0a3e2ba4f319d723cc0b0f9db0c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a3c8b0a3e2ba4f319d723cc0b0f9db0c3">test_classification_report_multiclass_with_string_label</a> ()</td></tr>
<tr class="separator:a3c8b0a3e2ba4f319d723cc0b0f9db0c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f8ca4f6b14e2e199614da3880cd3a7" id="r_aa6f8ca4f6b14e2e199614da3880cd3a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#aa6f8ca4f6b14e2e199614da3880cd3a7">test_classification_report_multiclass_with_unicode_label</a> ()</td></tr>
<tr class="separator:aa6f8ca4f6b14e2e199614da3880cd3a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30996dbd7dc1f6ae96802db6780d92b7" id="r_a30996dbd7dc1f6ae96802db6780d92b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a30996dbd7dc1f6ae96802db6780d92b7">test_classification_report_multiclass_with_long_string_label</a> ()</td></tr>
<tr class="separator:a30996dbd7dc1f6ae96802db6780d92b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4bb7ab5298e52728578ab08886aebdc" id="r_ac4bb7ab5298e52728578ab08886aebdc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ac4bb7ab5298e52728578ab08886aebdc">test_classification_report_labels_target_names_unequal_length</a> ()</td></tr>
<tr class="separator:ac4bb7ab5298e52728578ab08886aebdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd5efeb2320c94a7a74310762d30f27" id="r_a3dd5efeb2320c94a7a74310762d30f27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a3dd5efeb2320c94a7a74310762d30f27">test_classification_report_no_labels_target_names_unequal_length</a> ()</td></tr>
<tr class="separator:a3dd5efeb2320c94a7a74310762d30f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ec4a82a84d19166c6c09b5a801ec4f" id="r_a94ec4a82a84d19166c6c09b5a801ec4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a94ec4a82a84d19166c6c09b5a801ec4f">test_multilabel_classification_report</a> ()</td></tr>
<tr class="separator:a94ec4a82a84d19166c6c09b5a801ec4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a0623aa95efafc9d26e4825d5b74cb" id="r_a78a0623aa95efafc9d26e4825d5b74cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a78a0623aa95efafc9d26e4825d5b74cb">test_multilabel_zero_one_loss_subset</a> ()</td></tr>
<tr class="separator:a78a0623aa95efafc9d26e4825d5b74cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4036b0aac89f3d3676e2290d265fd3ed" id="r_a4036b0aac89f3d3676e2290d265fd3ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a4036b0aac89f3d3676e2290d265fd3ed">test_multilabel_hamming_loss</a> ()</td></tr>
<tr class="separator:a4036b0aac89f3d3676e2290d265fd3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fb149b42a451a3392a9686d11d7f1d1" id="r_a0fb149b42a451a3392a9686d11d7f1d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a0fb149b42a451a3392a9686d11d7f1d1">test_jaccard_score_validation</a> ()</td></tr>
<tr class="separator:a0fb149b42a451a3392a9686d11d7f1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e79133b0baa803c1a19a5235168123" id="r_af6e79133b0baa803c1a19a5235168123"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#af6e79133b0baa803c1a19a5235168123">test_multilabel_jaccard_score</a> (recwarn)</td></tr>
<tr class="separator:af6e79133b0baa803c1a19a5235168123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081eb61a43afef630f024095c309ac48" id="r_a081eb61a43afef630f024095c309ac48"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a081eb61a43afef630f024095c309ac48">test_multiclass_jaccard_score</a> (recwarn)</td></tr>
<tr class="separator:a081eb61a43afef630f024095c309ac48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a079214533433bdf7b8251ba1d4fb19b8" id="r_a079214533433bdf7b8251ba1d4fb19b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a079214533433bdf7b8251ba1d4fb19b8">test_average_binary_jaccard_score</a> (recwarn)</td></tr>
<tr class="separator:a079214533433bdf7b8251ba1d4fb19b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f3a44bfb5b2d5f05171b13d5663647d" id="r_a3f3a44bfb5b2d5f05171b13d5663647d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a3f3a44bfb5b2d5f05171b13d5663647d">test_jaccard_score_zero_division_warning</a> ()</td></tr>
<tr class="separator:a3f3a44bfb5b2d5f05171b13d5663647d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469b28dac684af459ddc26f2c9cc2e95" id="r_a469b28dac684af459ddc26f2c9cc2e95"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a469b28dac684af459ddc26f2c9cc2e95">test_jaccard_score_zero_division_set_value</a> (zero_division, expected_score)</td></tr>
<tr class="separator:a469b28dac684af459ddc26f2c9cc2e95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a003504962d49d571d5af7aae40e8d64f" id="r_a003504962d49d571d5af7aae40e8d64f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a003504962d49d571d5af7aae40e8d64f">test_precision_recall_f1_score_multilabel_1</a> ()</td></tr>
<tr class="separator:a003504962d49d571d5af7aae40e8d64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a8fba4cb9b2ef5ac3b5641821095c5c" id="r_a9a8fba4cb9b2ef5ac3b5641821095c5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a9a8fba4cb9b2ef5ac3b5641821095c5c">test_precision_recall_f1_score_multilabel_2</a> ()</td></tr>
<tr class="separator:a9a8fba4cb9b2ef5ac3b5641821095c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5dddb0c39b56cb414f00a56895fd700" id="r_af5dddb0c39b56cb414f00a56895fd700"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#af5dddb0c39b56cb414f00a56895fd700">test_precision_recall_f1_score_with_an_empty_prediction</a> (zero_division)</td></tr>
<tr class="separator:af5dddb0c39b56cb414f00a56895fd700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeefadd9c134f7c91531ec24bbbe6b4b7" id="r_aeefadd9c134f7c91531ec24bbbe6b4b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#aeefadd9c134f7c91531ec24bbbe6b4b7">test_precision_recall_f1_no_labels</a> (beta, average, zero_division)</td></tr>
<tr class="separator:aeefadd9c134f7c91531ec24bbbe6b4b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4d7679361c2b45499234c645bd2ff7d" id="r_aa4d7679361c2b45499234c645bd2ff7d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#aa4d7679361c2b45499234c645bd2ff7d">test_precision_recall_f1_no_labels_check_warnings</a> (average)</td></tr>
<tr class="separator:aa4d7679361c2b45499234c645bd2ff7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba702b9de40a1343a95b35dc2beace0" id="r_a8ba702b9de40a1343a95b35dc2beace0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a8ba702b9de40a1343a95b35dc2beace0">test_precision_recall_f1_no_labels_average_none</a> (zero_division)</td></tr>
<tr class="separator:a8ba702b9de40a1343a95b35dc2beace0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639096c7c94868cbc836f9f8bfd04ecb" id="r_a639096c7c94868cbc836f9f8bfd04ecb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a639096c7c94868cbc836f9f8bfd04ecb">test_precision_recall_f1_no_labels_average_none_warn</a> ()</td></tr>
<tr class="separator:a639096c7c94868cbc836f9f8bfd04ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60b6b410f1fef3e93eb4544d51a14cef" id="r_a60b6b410f1fef3e93eb4544d51a14cef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a60b6b410f1fef3e93eb4544d51a14cef">test_prf_warnings</a> ()</td></tr>
<tr class="separator:a60b6b410f1fef3e93eb4544d51a14cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2140a5aad92c9032de98833d8c7ec0f7" id="r_a2140a5aad92c9032de98833d8c7ec0f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a2140a5aad92c9032de98833d8c7ec0f7">test_prf_no_warnings_if_zero_division_set</a> (zero_division)</td></tr>
<tr class="separator:a2140a5aad92c9032de98833d8c7ec0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d83e72e4b1c0043b0abe727319c32dc" id="r_a7d83e72e4b1c0043b0abe727319c32dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a7d83e72e4b1c0043b0abe727319c32dc">test_recall_warnings</a> (zero_division)</td></tr>
<tr class="separator:a7d83e72e4b1c0043b0abe727319c32dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e1e5a7da6c27f452cdcd041df6f1a7" id="r_a35e1e5a7da6c27f452cdcd041df6f1a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a35e1e5a7da6c27f452cdcd041df6f1a7">test_precision_warnings</a> (zero_division)</td></tr>
<tr class="separator:a35e1e5a7da6c27f452cdcd041df6f1a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f61f12b603447d06ea7f68ddab89a93" id="r_a7f61f12b603447d06ea7f68ddab89a93"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a7f61f12b603447d06ea7f68ddab89a93">test_fscore_warnings</a> (zero_division)</td></tr>
<tr class="separator:a7f61f12b603447d06ea7f68ddab89a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a585d5407359d666dfa19744877ee4922" id="r_a585d5407359d666dfa19744877ee4922"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a585d5407359d666dfa19744877ee4922">test_prf_average_binary_data_non_binary</a> ()</td></tr>
<tr class="separator:a585d5407359d666dfa19744877ee4922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e6426a1c43ce03ce4b190e797c11ab" id="r_ab3e6426a1c43ce03ce4b190e797c11ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ab3e6426a1c43ce03ce4b190e797c11ab">test__check_targets</a> ()</td></tr>
<tr class="separator:ab3e6426a1c43ce03ce4b190e797c11ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c8eabc33a35ec5d71d3411f4ec50e0" id="r_a30c8eabc33a35ec5d71d3411f4ec50e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a30c8eabc33a35ec5d71d3411f4ec50e0">test__check_targets_multiclass_with_both_y_true_and_y_pred_binary</a> ()</td></tr>
<tr class="separator:a30c8eabc33a35ec5d71d3411f4ec50e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab35c8549280c4d75b9144c7662ce7ed" id="r_aab35c8549280c4d75b9144c7662ce7ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#aab35c8549280c4d75b9144c7662ce7ed">test_hinge_loss_binary</a> ()</td></tr>
<tr class="separator:aab35c8549280c4d75b9144c7662ce7ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a524cc3737362c934178ecbc7e68ad26b" id="r_a524cc3737362c934178ecbc7e68ad26b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a524cc3737362c934178ecbc7e68ad26b">test_hinge_loss_multiclass</a> ()</td></tr>
<tr class="separator:a524cc3737362c934178ecbc7e68ad26b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d2206253e3d5728b0574da8b2d292b4" id="r_a6d2206253e3d5728b0574da8b2d292b4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a6d2206253e3d5728b0574da8b2d292b4">test_hinge_loss_multiclass_missing_labels_with_labels_none</a> ()</td></tr>
<tr class="separator:a6d2206253e3d5728b0574da8b2d292b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd7707f1bc4b4a42efc4fd8b6d3fbb39" id="r_abd7707f1bc4b4a42efc4fd8b6d3fbb39"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#abd7707f1bc4b4a42efc4fd8b6d3fbb39">test_hinge_loss_multiclass_no_consistent_pred_decision_shape</a> ()</td></tr>
<tr class="separator:abd7707f1bc4b4a42efc4fd8b6d3fbb39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b4ea9881311ee9ee091235dbea92c8" id="r_a50b4ea9881311ee9ee091235dbea92c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a50b4ea9881311ee9ee091235dbea92c8">test_hinge_loss_multiclass_with_missing_labels</a> ()</td></tr>
<tr class="separator:a50b4ea9881311ee9ee091235dbea92c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660f7b817ddbbd46fde15656652e14e4" id="r_a660f7b817ddbbd46fde15656652e14e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a660f7b817ddbbd46fde15656652e14e4">test_hinge_loss_multiclass_missing_labels_only_two_unq_in_y_true</a> ()</td></tr>
<tr class="separator:a660f7b817ddbbd46fde15656652e14e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bb9d4862d23fd53e5f0569b74ff4dcb" id="r_a1bb9d4862d23fd53e5f0569b74ff4dcb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a1bb9d4862d23fd53e5f0569b74ff4dcb">test_hinge_loss_multiclass_invariance_lists</a> ()</td></tr>
<tr class="separator:a1bb9d4862d23fd53e5f0569b74ff4dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb99d116b8e2ff8e09459fc754076fda" id="r_acb99d116b8e2ff8e09459fc754076fda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#acb99d116b8e2ff8e09459fc754076fda">test_log_loss</a> ()</td></tr>
<tr class="separator:acb99d116b8e2ff8e09459fc754076fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad970200c3718a45251bf460bdf567f6d" id="r_ad970200c3718a45251bf460bdf567f6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ad970200c3718a45251bf460bdf567f6d">test_log_loss_eps_auto</a> (global_dtype)</td></tr>
<tr class="separator:ad970200c3718a45251bf460bdf567f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad80611e396446e7d5c0b61b0da175410" id="r_ad80611e396446e7d5c0b61b0da175410"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ad80611e396446e7d5c0b61b0da175410">test_log_loss_eps_auto_float16</a> ()</td></tr>
<tr class="separator:ad80611e396446e7d5c0b61b0da175410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd491c5d9925804823768b060f1f1046" id="r_acd491c5d9925804823768b060f1f1046"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#acd491c5d9925804823768b060f1f1046">test_log_loss_pandas_input</a> ()</td></tr>
<tr class="separator:acd491c5d9925804823768b060f1f1046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac32ad17b59c1d5c6806007d9ca693b7b" id="r_ac32ad17b59c1d5c6806007d9ca693b7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#ac32ad17b59c1d5c6806007d9ca693b7b">test_brier_score_loss</a> ()</td></tr>
<tr class="separator:ac32ad17b59c1d5c6806007d9ca693b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a614ec9b255d33a83c0479ee0d1dc9915" id="r_a614ec9b255d33a83c0479ee0d1dc9915"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a614ec9b255d33a83c0479ee0d1dc9915">test_balanced_accuracy_score_unseen</a> ()</td></tr>
<tr class="separator:a614ec9b255d33a83c0479ee0d1dc9915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf3122a482afcd92f9e75542759e534" id="r_a9cf3122a482afcd92f9e75542759e534"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__classification.html#a9cf3122a482afcd92f9e75542759e534">test_balanced_accuracy_score</a> (y_true, y_pred)</td></tr>
<tr class="separator:a9cf3122a482afcd92f9e75542759e534"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a47240abd8ec04e979eeea0dac8ccc2ea" name="a47240abd8ec04e979eeea0dac8ccc2ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47240abd8ec04e979eeea0dac8ccc2ea">&#9670;&#160;</a></span>make_prediction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.make_prediction </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dataset</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>binary</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utilities for testing. </p>
<pre class="fragment">Make some classification predictions on a toy dataset using a SVC

If binary is True restrict to a binary classification problem instead of a
multiclass classification problem
</pre> <div class="fragment"><div class="line"><span class="lineno">   57</span><span class="keyword">def </span>make_prediction(dataset=None, binary=False):</div>
<div class="line"><span class="lineno">   58</span>    <span class="stringliteral">&quot;&quot;&quot;Make some classification predictions on a toy dataset using a SVC</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">    If binary is True restrict to a binary classification problem instead of a</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">    multiclass classification problem</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">if</span> dataset <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   65</span>        <span class="comment"># import some data to play with</span></div>
<div class="line"><span class="lineno">   66</span>        dataset = datasets.load_iris()</div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    X = dataset.data</div>
<div class="line"><span class="lineno">   69</span>    y = dataset.target</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">if</span> binary:</div>
<div class="line"><span class="lineno">   72</span>        <span class="comment"># restrict to a binary classification task</span></div>
<div class="line"><span class="lineno">   73</span>        X, y = X[y &lt; 2], y[y &lt; 2]</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>    n_samples, n_features = X.shape</div>
<div class="line"><span class="lineno">   76</span>    p = np.arange(n_samples)</div>
<div class="line"><span class="lineno">   77</span> </div>
<div class="line"><span class="lineno">   78</span>    rng = check_random_state(37)</div>
<div class="line"><span class="lineno">   79</span>    rng.shuffle(p)</div>
<div class="line"><span class="lineno">   80</span>    X, y = X[p], y[p]</div>
<div class="line"><span class="lineno">   81</span>    half = int(n_samples / 2)</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment"># add noisy features to make the problem harder and avoid perfect results</span></div>
<div class="line"><span class="lineno">   84</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">   85</span>    X = np.c_[X, rng.randn(n_samples, 200 * n_features)]</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="comment"># run classifier, get class probabilities and label predictions</span></div>
<div class="line"><span class="lineno">   88</span>    clf = svm.SVC(kernel=<span class="stringliteral">&quot;linear&quot;</span>, probability=<span class="keyword">True</span>, random_state=0)</div>
<div class="line"><span class="lineno">   89</span>    probas_pred = clf.fit(X[:half], y[:half]).predict_proba(X[half:])</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">if</span> binary:</div>
<div class="line"><span class="lineno">   92</span>        <span class="comment"># only interested in probabilities of the positive case</span></div>
<div class="line"><span class="lineno">   93</span>        <span class="comment"># XXX: do we really want a special API for the binary case?</span></div>
<div class="line"><span class="lineno">   94</span>        probas_pred = probas_pred[:, 1]</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    y_pred = clf.predict(X[half:])</div>
<div class="line"><span class="lineno">   97</span>    y_true = y[half:]</div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">return</span> y_true, y_pred, probas_pred</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3e6426a1c43ce03ce4b190e797c11ab" name="ab3e6426a1c43ce03ce4b190e797c11ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3e6426a1c43ce03ce4b190e797c11ab">&#9670;&#160;</a></span>test__check_targets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test__check_targets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2194</span><span class="keyword">def </span>test__check_targets():</div>
<div class="line"><span class="lineno"> 2195</span>    <span class="comment"># Check that _check_targets correctly merges target types, squeezes</span></div>
<div class="line"><span class="lineno"> 2196</span>    <span class="comment"># output and fails if input lengths differ.</span></div>
<div class="line"><span class="lineno"> 2197</span>    IND = <span class="stringliteral">&quot;multilabel-indicator&quot;</span></div>
<div class="line"><span class="lineno"> 2198</span>    MC = <span class="stringliteral">&quot;multiclass&quot;</span></div>
<div class="line"><span class="lineno"> 2199</span>    BIN = <span class="stringliteral">&quot;binary&quot;</span></div>
<div class="line"><span class="lineno"> 2200</span>    CNT = <span class="stringliteral">&quot;continuous&quot;</span></div>
<div class="line"><span class="lineno"> 2201</span>    MMC = <span class="stringliteral">&quot;multiclass-multioutput&quot;</span></div>
<div class="line"><span class="lineno"> 2202</span>    MCN = <span class="stringliteral">&quot;continuous-multioutput&quot;</span></div>
<div class="line"><span class="lineno"> 2203</span>    <span class="comment"># all of length 3</span></div>
<div class="line"><span class="lineno"> 2204</span>    EXAMPLES = [</div>
<div class="line"><span class="lineno"> 2205</span>        (IND, np.array([[0, 1, 1], [1, 0, 0], [0, 0, 1]])),</div>
<div class="line"><span class="lineno"> 2206</span>        <span class="comment"># must not be considered binary</span></div>
<div class="line"><span class="lineno"> 2207</span>        (IND, np.array([[0, 1], [1, 0], [1, 1]])),</div>
<div class="line"><span class="lineno"> 2208</span>        (MC, [2, 3, 1]),</div>
<div class="line"><span class="lineno"> 2209</span>        (BIN, [0, 1, 1]),</div>
<div class="line"><span class="lineno"> 2210</span>        (CNT, [0.0, 1.5, 1.0]),</div>
<div class="line"><span class="lineno"> 2211</span>        (MC, np.array([[2], [3], [1]])),</div>
<div class="line"><span class="lineno"> 2212</span>        (BIN, np.array([[0], [1], [1]])),</div>
<div class="line"><span class="lineno"> 2213</span>        (CNT, np.array([[0.0], [1.5], [1.0]])),</div>
<div class="line"><span class="lineno"> 2214</span>        (MMC, np.array([[0, 2], [1, 3], [2, 3]])),</div>
<div class="line"><span class="lineno"> 2215</span>        (MCN, np.array([[0.5, 2.0], [1.1, 3.0], [2.0, 3.0]])),</div>
<div class="line"><span class="lineno"> 2216</span>    ]</div>
<div class="line"><span class="lineno"> 2217</span>    <span class="comment"># expected type given input types, or None for error</span></div>
<div class="line"><span class="lineno"> 2218</span>    <span class="comment"># (types will be tried in either order)</span></div>
<div class="line"><span class="lineno"> 2219</span>    EXPECTED = {</div>
<div class="line"><span class="lineno"> 2220</span>        (IND, IND): IND,</div>
<div class="line"><span class="lineno"> 2221</span>        (MC, MC): MC,</div>
<div class="line"><span class="lineno"> 2222</span>        (BIN, BIN): BIN,</div>
<div class="line"><span class="lineno"> 2223</span>        (MC, IND): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2224</span>        (BIN, IND): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2225</span>        (BIN, MC): MC,</div>
<div class="line"><span class="lineno"> 2226</span>        <span class="comment"># Disallowed types</span></div>
<div class="line"><span class="lineno"> 2227</span>        (CNT, CNT): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2228</span>        (MMC, MMC): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2229</span>        (MCN, MCN): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2230</span>        (IND, CNT): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2231</span>        (MC, CNT): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2232</span>        (BIN, CNT): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2233</span>        (MMC, CNT): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2234</span>        (MCN, CNT): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2235</span>        (IND, MMC): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2236</span>        (MC, MMC): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2237</span>        (BIN, MMC): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2238</span>        (MCN, MMC): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2239</span>        (IND, MCN): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2240</span>        (MC, MCN): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2241</span>        (BIN, MCN): <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 2242</span>    }</div>
<div class="line"><span class="lineno"> 2243</span> </div>
<div class="line"><span class="lineno"> 2244</span>    <span class="keywordflow">for</span> (type1, y1), (type2, y2) <span class="keywordflow">in</span> product(EXAMPLES, repeat=2):</div>
<div class="line"><span class="lineno"> 2245</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 2246</span>            expected = EXPECTED[type1, type2]</div>
<div class="line"><span class="lineno"> 2247</span>        <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno"> 2248</span>            expected = EXPECTED[type2, type1]</div>
<div class="line"><span class="lineno"> 2249</span>        <span class="keywordflow">if</span> expected <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 2250</span>            <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 2251</span>                _check_targets(y1, y2)</div>
<div class="line"><span class="lineno"> 2252</span> </div>
<div class="line"><span class="lineno"> 2253</span>            <span class="keywordflow">if</span> type1 != type2:</div>
<div class="line"><span class="lineno"> 2254</span>                err_msg = (</div>
<div class="line"><span class="lineno"> 2255</span>                    <span class="stringliteral">&quot;Classification metrics can&#39;t handle a mix &quot;</span></div>
<div class="line"><span class="lineno"> 2256</span>                    <span class="stringliteral">&quot;of {0} and {1} targets&quot;</span>.format(type1, type2)</div>
<div class="line"><span class="lineno"> 2257</span>                )</div>
<div class="line"><span class="lineno"> 2258</span>                <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 2259</span>                    _check_targets(y1, y2)</div>
<div class="line"><span class="lineno"> 2260</span> </div>
<div class="line"><span class="lineno"> 2261</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2262</span>                <span class="keywordflow">if</span> type1 <span class="keywordflow">not</span> <span class="keywordflow">in</span> (BIN, MC, IND):</div>
<div class="line"><span class="lineno"> 2263</span>                    err_msg = <span class="stringliteral">&quot;{0} is not supported&quot;</span>.format(type1)</div>
<div class="line"><span class="lineno"> 2264</span>                    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 2265</span>                        _check_targets(y1, y2)</div>
<div class="line"><span class="lineno"> 2266</span> </div>
<div class="line"><span class="lineno"> 2267</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2268</span>            merged_type, y1out, y2out = _check_targets(y1, y2)</div>
<div class="line"><span class="lineno"> 2269</span>            <span class="keyword">assert</span> merged_type == expected</div>
<div class="line"><span class="lineno"> 2270</span>            <span class="keywordflow">if</span> merged_type.startswith(<span class="stringliteral">&quot;multilabel&quot;</span>):</div>
<div class="line"><span class="lineno"> 2271</span>                <span class="keyword">assert</span> y1out.format == <span class="stringliteral">&quot;csr&quot;</span></div>
<div class="line"><span class="lineno"> 2272</span>                <span class="keyword">assert</span> y2out.format == <span class="stringliteral">&quot;csr&quot;</span></div>
<div class="line"><span class="lineno"> 2273</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2274</span>                assert_array_equal(y1out, np.squeeze(y1))</div>
<div class="line"><span class="lineno"> 2275</span>                assert_array_equal(y2out, np.squeeze(y2))</div>
<div class="line"><span class="lineno"> 2276</span>            <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 2277</span>                _check_targets(y1[:-1], y2)</div>
<div class="line"><span class="lineno"> 2278</span> </div>
<div class="line"><span class="lineno"> 2279</span>    <span class="comment"># Make sure seq of seq is not supported</span></div>
<div class="line"><span class="lineno"> 2280</span>    y1 = [(1, 2), (0, 2, 3)]</div>
<div class="line"><span class="lineno"> 2281</span>    y2 = [(2,), (0, 2)]</div>
<div class="line"><span class="lineno"> 2282</span>    msg = (</div>
<div class="line"><span class="lineno"> 2283</span>        <span class="stringliteral">&quot;You appear to be using a legacy multi-label data representation. &quot;</span></div>
<div class="line"><span class="lineno"> 2284</span>        <span class="stringliteral">&quot;Sequence of sequences are no longer supported; use a binary array&quot;</span></div>
<div class="line"><span class="lineno"> 2285</span>        <span class="stringliteral">&quot; or sparse matrix instead - the MultiLabelBinarizer&quot;</span></div>
<div class="line"><span class="lineno"> 2286</span>        <span class="stringliteral">&quot; transformer can convert to this format.&quot;</span></div>
<div class="line"><span class="lineno"> 2287</span>    )</div>
<div class="line"><span class="lineno"> 2288</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 2289</span>        _check_targets(y1, y2)</div>
<div class="line"><span class="lineno"> 2290</span> </div>
<div class="line"><span class="lineno"> 2291</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a30c8eabc33a35ec5d71d3411f4ec50e0" name="a30c8eabc33a35ec5d71d3411f4ec50e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c8eabc33a35ec5d71d3411f4ec50e0">&#9670;&#160;</a></span>test__check_targets_multiclass_with_both_y_true_and_y_pred_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test__check_targets_multiclass_with_both_y_true_and_y_pred_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2292</span><span class="keyword">def </span>test__check_targets_multiclass_with_both_y_true_and_y_pred_binary():</div>
<div class="line"><span class="lineno"> 2293</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/8098</span></div>
<div class="line"><span class="lineno"> 2294</span>    y_true = [0, 1]</div>
<div class="line"><span class="lineno"> 2295</span>    y_pred = [0, -1]</div>
<div class="line"><span class="lineno"> 2296</span>    <span class="keyword">assert</span> _check_targets(y_true, y_pred)[0] == <span class="stringliteral">&quot;multiclass&quot;</span></div>
<div class="line"><span class="lineno"> 2297</span> </div>
<div class="line"><span class="lineno"> 2298</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a079214533433bdf7b8251ba1d4fb19b8" name="a079214533433bdf7b8251ba1d4fb19b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a079214533433bdf7b8251ba1d4fb19b8">&#9670;&#160;</a></span>test_average_binary_jaccard_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_average_binary_jaccard_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>recwarn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1504</span><span class="keyword">def </span>test_average_binary_jaccard_score(recwarn):</div>
<div class="line"><span class="lineno"> 1505</span>    <span class="comment"># tp=0, fp=0, fn=1, tn=0</span></div>
<div class="line"><span class="lineno"> 1506</span>    <span class="keyword">assert</span> jaccard_score([1], [0], average=<span class="stringliteral">&quot;binary&quot;</span>) == 0.0</div>
<div class="line"><span class="lineno"> 1507</span>    <span class="comment"># tp=0, fp=0, fn=0, tn=1</span></div>
<div class="line"><span class="lineno"> 1508</span>    msg = (</div>
<div class="line"><span class="lineno"> 1509</span>        <span class="stringliteral">&quot;Jaccard is ill-defined and being set to 0.0 due to &quot;</span></div>
<div class="line"><span class="lineno"> 1510</span>        <span class="stringliteral">&quot;no true or predicted samples&quot;</span></div>
<div class="line"><span class="lineno"> 1511</span>    )</div>
<div class="line"><span class="lineno"> 1512</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=msg):</div>
<div class="line"><span class="lineno"> 1513</span>        <span class="keyword">assert</span> jaccard_score([0, 0], [0, 0], average=<span class="stringliteral">&quot;binary&quot;</span>) == 0.0</div>
<div class="line"><span class="lineno"> 1514</span> </div>
<div class="line"><span class="lineno"> 1515</span>    <span class="comment"># tp=1, fp=0, fn=0, tn=0 (pos_label=0)</span></div>
<div class="line"><span class="lineno"> 1516</span>    <span class="keyword">assert</span> jaccard_score([0], [0], pos_label=0, average=<span class="stringliteral">&quot;binary&quot;</span>) == 1.0</div>
<div class="line"><span class="lineno"> 1517</span>    y_true = np.array([1, 0, 1, 1, 0])</div>
<div class="line"><span class="lineno"> 1518</span>    y_pred = np.array([1, 0, 1, 1, 1])</div>
<div class="line"><span class="lineno"> 1519</span>    assert_almost_equal(jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;binary&quot;</span>), 3.0 / 4)</div>
<div class="line"><span class="lineno"> 1520</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1521</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;binary&quot;</span>, pos_label=0), 1.0 / 2</div>
<div class="line"><span class="lineno"> 1522</span>    )</div>
<div class="line"><span class="lineno"> 1523</span> </div>
<div class="line"><span class="lineno"> 1524</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> list(recwarn)</div>
<div class="line"><span class="lineno"> 1525</span> </div>
<div class="line"><span class="lineno"> 1526</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac76cd9ea649a6da953802cbdf012bc94" name="ac76cd9ea649a6da953802cbdf012bc94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac76cd9ea649a6da953802cbdf012bc94">&#9670;&#160;</a></span>test_average_precision_score_duplicate_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_average_precision_score_duplicate_values </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  366</span><span class="keyword">def </span>test_average_precision_score_duplicate_values():</div>
<div class="line"><span class="lineno">  367</span>    <span class="comment"># Duplicate values with precision-recall require a different</span></div>
<div class="line"><span class="lineno">  368</span>    <span class="comment"># processing than when computing the AUC of a ROC, because the</span></div>
<div class="line"><span class="lineno">  369</span>    <span class="comment"># precision-recall curve is a decreasing curve</span></div>
<div class="line"><span class="lineno">  370</span>    <span class="comment"># The following situation corresponds to a perfect</span></div>
<div class="line"><span class="lineno">  371</span>    <span class="comment"># test statistic, the average_precision_score should be 1</span></div>
<div class="line"><span class="lineno">  372</span>    y_true = [0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1]</div>
<div class="line"><span class="lineno">  373</span>    y_score = [0, 0.1, 0.1, 0.4, 0.5, 0.6, 0.6, 0.9, 0.9, 1, 1]</div>
<div class="line"><span class="lineno">  374</span>    <span class="keyword">assert</span> average_precision_score(y_true, y_score) == 1</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abbbcd850ae1a52c06ac59deadee65619" name="abbbcd850ae1a52c06ac59deadee65619"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbbcd850ae1a52c06ac59deadee65619">&#9670;&#160;</a></span>test_average_precision_score_score_non_binary_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_average_precision_score_score_non_binary_class </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  353</span><span class="keyword">def </span>test_average_precision_score_score_non_binary_class():</div>
<div class="line"><span class="lineno">  354</span>    <span class="comment"># Test that average_precision_score function returns an error when trying</span></div>
<div class="line"><span class="lineno">  355</span>    <span class="comment"># to compute average_precision_score for multiclass task.</span></div>
<div class="line"><span class="lineno">  356</span>    rng = check_random_state(404)</div>
<div class="line"><span class="lineno">  357</span>    y_pred = rng.rand(10)</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    <span class="comment"># y_true contains three different class values</span></div>
<div class="line"><span class="lineno">  360</span>    y_true = rng.randint(0, 3, size=10)</div>
<div class="line"><span class="lineno">  361</span>    err_msg = <span class="stringliteral">&quot;multiclass format is not supported&quot;</span></div>
<div class="line"><span class="lineno">  362</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  363</span>        average_precision_score(y_true, y_pred)</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab178bf0823f409fb2514eb96bf7bd272" name="ab178bf0823f409fb2514eb96bf7bd272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab178bf0823f409fb2514eb96bf7bd272">&#9670;&#160;</a></span>test_average_precision_score_tied_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_average_precision_score_tied_values </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  377</span><span class="keyword">def </span>test_average_precision_score_tied_values():</div>
<div class="line"><span class="lineno">  378</span>    <span class="comment"># Here if we go from left to right in y_true, the 0 values are</span></div>
<div class="line"><span class="lineno">  379</span>    <span class="comment"># are separated from the 1 values, so it appears that we&#39;ve</span></div>
<div class="line"><span class="lineno">  380</span>    <span class="comment"># Correctly sorted our classifications. But in fact the first two</span></div>
<div class="line"><span class="lineno">  381</span>    <span class="comment"># values have the same score (0.5) and so the first two values</span></div>
<div class="line"><span class="lineno">  382</span>    <span class="comment"># could be swapped around, creating an imperfect sorting. This</span></div>
<div class="line"><span class="lineno">  383</span>    <span class="comment"># imperfection should come through in the end score, making it less</span></div>
<div class="line"><span class="lineno">  384</span>    <span class="comment"># than one.</span></div>
<div class="line"><span class="lineno">  385</span>    y_true = [0, 1, 1]</div>
<div class="line"><span class="lineno">  386</span>    y_score = [0.5, 0.5, 0.6]</div>
<div class="line"><span class="lineno">  387</span>    <span class="keyword">assert</span> average_precision_score(y_true, y_score) != 1.0</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9cf3122a482afcd92f9e75542759e534" name="a9cf3122a482afcd92f9e75542759e534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cf3122a482afcd92f9e75542759e534">&#9670;&#160;</a></span>test_balanced_accuracy_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_balanced_accuracy_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_true</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_pred</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2634</span><span class="keyword">def </span>test_balanced_accuracy_score(y_true, y_pred):</div>
<div class="line"><span class="lineno"> 2635</span>    macro_recall = recall_score(</div>
<div class="line"><span class="lineno"> 2636</span>        y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>, labels=np.unique(y_true)</div>
<div class="line"><span class="lineno"> 2637</span>    )</div>
<div class="line"><span class="lineno"> 2638</span>    <span class="keyword">with</span> ignore_warnings():</div>
<div class="line"><span class="lineno"> 2639</span>        <span class="comment"># Warnings are tested in test_balanced_accuracy_score_unseen</span></div>
<div class="line"><span class="lineno"> 2640</span>        balanced = balanced_accuracy_score(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2641</span>    <span class="keyword">assert</span> balanced == pytest.approx(macro_recall)</div>
<div class="line"><span class="lineno"> 2642</span>    adjusted = balanced_accuracy_score(y_true, y_pred, adjusted=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 2643</span>    chance = balanced_accuracy_score(y_true, np.full_like(y_true, y_true[0]))</div>
<div class="line"><span class="lineno"> 2644</span>    <span class="keyword">assert</span> adjusted == (balanced - chance) / (1 - chance)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a614ec9b255d33a83c0479ee0d1dc9915" name="a614ec9b255d33a83c0479ee0d1dc9915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a614ec9b255d33a83c0479ee0d1dc9915">&#9670;&#160;</a></span>test_balanced_accuracy_score_unseen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_balanced_accuracy_score_unseen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2620</span><span class="keyword">def </span>test_balanced_accuracy_score_unseen():</div>
<div class="line"><span class="lineno"> 2621</span>    msg = <span class="stringliteral">&quot;y_pred contains classes not in y_true&quot;</span></div>
<div class="line"><span class="lineno"> 2622</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=msg):</div>
<div class="line"><span class="lineno"> 2623</span>        balanced_accuracy_score([0, 0, 0], [0, 0, 1])</div>
<div class="line"><span class="lineno"> 2624</span> </div>
<div class="line"><span class="lineno"> 2625</span> </div>
<div class="line"><span class="lineno"> 2626</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 2627</span>    <span class="stringliteral">&quot;y_true,y_pred&quot;</span>,</div>
<div class="line"><span class="lineno"> 2628</span>    [</div>
<div class="line"><span class="lineno"> 2629</span>        ([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]),</div>
<div class="line"><span class="lineno"> 2630</span>        ([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]),</div>
<div class="line"><span class="lineno"> 2631</span>        ([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]),</div>
<div class="line"><span class="lineno"> 2632</span>    ],</div>
<div class="line"><span class="lineno"> 2633</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac32ad17b59c1d5c6806007d9ca693b7b" name="ac32ad17b59c1d5c6806007d9ca693b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac32ad17b59c1d5c6806007d9ca693b7b">&#9670;&#160;</a></span>test_brier_score_loss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_brier_score_loss </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2585</span><span class="keyword">def </span>test_brier_score_loss():</div>
<div class="line"><span class="lineno"> 2586</span>    <span class="comment"># Check brier_score_loss function</span></div>
<div class="line"><span class="lineno"> 2587</span>    y_true = np.array([0, 1, 1, 0, 1, 1])</div>
<div class="line"><span class="lineno"> 2588</span>    y_pred = np.array([0.1, 0.8, 0.9, 0.3, 1.0, 0.95])</div>
<div class="line"><span class="lineno"> 2589</span>    true_score = linalg.norm(y_true - y_pred) ** 2 / len(y_true)</div>
<div class="line"><span class="lineno"> 2590</span> </div>
<div class="line"><span class="lineno"> 2591</span>    assert_almost_equal(brier_score_loss(y_true, y_true), 0.0)</div>
<div class="line"><span class="lineno"> 2592</span>    assert_almost_equal(brier_score_loss(y_true, y_pred), true_score)</div>
<div class="line"><span class="lineno"> 2593</span>    assert_almost_equal(brier_score_loss(1.0 + y_true, y_pred), true_score)</div>
<div class="line"><span class="lineno"> 2594</span>    assert_almost_equal(brier_score_loss(2 * y_true - 1, y_pred), true_score)</div>
<div class="line"><span class="lineno"> 2595</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 2596</span>        brier_score_loss(y_true, y_pred[1:])</div>
<div class="line"><span class="lineno"> 2597</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 2598</span>        brier_score_loss(y_true, y_pred + 1.0)</div>
<div class="line"><span class="lineno"> 2599</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 2600</span>        brier_score_loss(y_true, y_pred - 1.0)</div>
<div class="line"><span class="lineno"> 2601</span> </div>
<div class="line"><span class="lineno"> 2602</span>    <span class="comment"># ensure to raise an error for multiclass y_true</span></div>
<div class="line"><span class="lineno"> 2603</span>    y_true = np.array([0, 1, 2, 0])</div>
<div class="line"><span class="lineno"> 2604</span>    y_pred = np.array([0.8, 0.6, 0.4, 0.2])</div>
<div class="line"><span class="lineno"> 2605</span>    error_message = (</div>
<div class="line"><span class="lineno"> 2606</span>        <span class="stringliteral">&quot;Only binary classification is supported. The type of the target is multiclass&quot;</span></div>
<div class="line"><span class="lineno"> 2607</span>    )</div>
<div class="line"><span class="lineno"> 2608</span> </div>
<div class="line"><span class="lineno"> 2609</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=error_message):</div>
<div class="line"><span class="lineno"> 2610</span>        brier_score_loss(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2611</span> </div>
<div class="line"><span class="lineno"> 2612</span>    <span class="comment"># calculate correctly when there&#39;s only one class in y_true</span></div>
<div class="line"><span class="lineno"> 2613</span>    assert_almost_equal(brier_score_loss([-1], [0.4]), 0.16)</div>
<div class="line"><span class="lineno"> 2614</span>    assert_almost_equal(brier_score_loss([0], [0.4]), 0.16)</div>
<div class="line"><span class="lineno"> 2615</span>    assert_almost_equal(brier_score_loss([1], [0.4]), 0.36)</div>
<div class="line"><span class="lineno"> 2616</span>    assert_almost_equal(brier_score_loss([<span class="stringliteral">&quot;foo&quot;</span>], [0.4], pos_label=<span class="stringliteral">&quot;bar&quot;</span>), 0.16)</div>
<div class="line"><span class="lineno"> 2617</span>    assert_almost_equal(brier_score_loss([<span class="stringliteral">&quot;foo&quot;</span>], [0.4], pos_label=<span class="stringliteral">&quot;foo&quot;</span>), 0.36)</div>
<div class="line"><span class="lineno"> 2618</span> </div>
<div class="line"><span class="lineno"> 2619</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c7b1cbee884ed048a655a2bfe73e035" name="a2c7b1cbee884ed048a655a2bfe73e035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c7b1cbee884ed048a655a2bfe73e035">&#9670;&#160;</a></span>test_classification_report_dictionary_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_dictionary_output </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tests. </p>
<div class="fragment"><div class="line"><span class="lineno">  105</span><span class="keyword">def </span>test_classification_report_dictionary_output():</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment"># Test performance report with dictionary output</span></div>
<div class="line"><span class="lineno">  108</span>    iris = datasets.load_iris()</div>
<div class="line"><span class="lineno">  109</span>    y_true, y_pred, _ = make_prediction(dataset=iris, binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    <span class="comment"># print classification report with class names</span></div>
<div class="line"><span class="lineno">  112</span>    expected_report = {</div>
<div class="line"><span class="lineno">  113</span>        <span class="stringliteral">&quot;setosa&quot;</span>: {</div>
<div class="line"><span class="lineno">  114</span>            <span class="stringliteral">&quot;precision&quot;</span>: 0.82608695652173914,</div>
<div class="line"><span class="lineno">  115</span>            <span class="stringliteral">&quot;recall&quot;</span>: 0.79166666666666663,</div>
<div class="line"><span class="lineno">  116</span>            <span class="stringliteral">&quot;f1-score&quot;</span>: 0.8085106382978724,</div>
<div class="line"><span class="lineno">  117</span>            <span class="stringliteral">&quot;support&quot;</span>: 24,</div>
<div class="line"><span class="lineno">  118</span>        },</div>
<div class="line"><span class="lineno">  119</span>        <span class="stringliteral">&quot;versicolor&quot;</span>: {</div>
<div class="line"><span class="lineno">  120</span>            <span class="stringliteral">&quot;precision&quot;</span>: 0.33333333333333331,</div>
<div class="line"><span class="lineno">  121</span>            <span class="stringliteral">&quot;recall&quot;</span>: 0.096774193548387094,</div>
<div class="line"><span class="lineno">  122</span>            <span class="stringliteral">&quot;f1-score&quot;</span>: 0.15000000000000002,</div>
<div class="line"><span class="lineno">  123</span>            <span class="stringliteral">&quot;support&quot;</span>: 31,</div>
<div class="line"><span class="lineno">  124</span>        },</div>
<div class="line"><span class="lineno">  125</span>        <span class="stringliteral">&quot;virginica&quot;</span>: {</div>
<div class="line"><span class="lineno">  126</span>            <span class="stringliteral">&quot;precision&quot;</span>: 0.41860465116279072,</div>
<div class="line"><span class="lineno">  127</span>            <span class="stringliteral">&quot;recall&quot;</span>: 0.90000000000000002,</div>
<div class="line"><span class="lineno">  128</span>            <span class="stringliteral">&quot;f1-score&quot;</span>: 0.57142857142857151,</div>
<div class="line"><span class="lineno">  129</span>            <span class="stringliteral">&quot;support&quot;</span>: 20,</div>
<div class="line"><span class="lineno">  130</span>        },</div>
<div class="line"><span class="lineno">  131</span>        <span class="stringliteral">&quot;macro avg&quot;</span>: {</div>
<div class="line"><span class="lineno">  132</span>            <span class="stringliteral">&quot;f1-score&quot;</span>: 0.5099797365754813,</div>
<div class="line"><span class="lineno">  133</span>            <span class="stringliteral">&quot;precision&quot;</span>: 0.5260083136726211,</div>
<div class="line"><span class="lineno">  134</span>            <span class="stringliteral">&quot;recall&quot;</span>: 0.596146953405018,</div>
<div class="line"><span class="lineno">  135</span>            <span class="stringliteral">&quot;support&quot;</span>: 75,</div>
<div class="line"><span class="lineno">  136</span>        },</div>
<div class="line"><span class="lineno">  137</span>        <span class="stringliteral">&quot;accuracy&quot;</span>: 0.5333333333333333,</div>
<div class="line"><span class="lineno">  138</span>        <span class="stringliteral">&quot;weighted avg&quot;</span>: {</div>
<div class="line"><span class="lineno">  139</span>            <span class="stringliteral">&quot;f1-score&quot;</span>: 0.47310435663627154,</div>
<div class="line"><span class="lineno">  140</span>            <span class="stringliteral">&quot;precision&quot;</span>: 0.5137535108414785,</div>
<div class="line"><span class="lineno">  141</span>            <span class="stringliteral">&quot;recall&quot;</span>: 0.5333333333333333,</div>
<div class="line"><span class="lineno">  142</span>            <span class="stringliteral">&quot;support&quot;</span>: 75,</div>
<div class="line"><span class="lineno">  143</span>        },</div>
<div class="line"><span class="lineno">  144</span>    }</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>    report = classification_report(</div>
<div class="line"><span class="lineno">  147</span>        y_true,</div>
<div class="line"><span class="lineno">  148</span>        y_pred,</div>
<div class="line"><span class="lineno">  149</span>        labels=np.arange(len(iris.target_names)),</div>
<div class="line"><span class="lineno">  150</span>        target_names=iris.target_names,</div>
<div class="line"><span class="lineno">  151</span>        output_dict=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  152</span>    )</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    <span class="comment"># assert the 2 dicts are equal.</span></div>
<div class="line"><span class="lineno">  155</span>    <span class="keyword">assert</span> report.keys() == expected_report.keys()</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> expected_report:</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">if</span> key == <span class="stringliteral">&quot;accuracy&quot;</span>:</div>
<div class="line"><span class="lineno">  158</span>            <span class="keyword">assert</span> isinstance(report[key], float)</div>
<div class="line"><span class="lineno">  159</span>            <span class="keyword">assert</span> report[key] == expected_report[key]</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  161</span>            <span class="keyword">assert</span> report[key].keys() == expected_report[key].keys()</div>
<div class="line"><span class="lineno">  162</span>            <span class="keywordflow">for</span> metric <span class="keywordflow">in</span> expected_report[key]:</div>
<div class="line"><span class="lineno">  163</span>                assert_almost_equal(expected_report[key][metric], report[key][metric])</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>    <span class="keyword">assert</span> type(expected_report[<span class="stringliteral">&quot;setosa&quot;</span>][<span class="stringliteral">&quot;precision&quot;</span>]) == float</div>
<div class="line"><span class="lineno">  166</span>    <span class="keyword">assert</span> type(expected_report[<span class="stringliteral">&quot;macro avg&quot;</span>][<span class="stringliteral">&quot;precision&quot;</span>]) == float</div>
<div class="line"><span class="lineno">  167</span>    <span class="keyword">assert</span> type(expected_report[<span class="stringliteral">&quot;setosa&quot;</span>][<span class="stringliteral">&quot;support&quot;</span>]) == int</div>
<div class="line"><span class="lineno">  168</span>    <span class="keyword">assert</span> type(expected_report[<span class="stringliteral">&quot;macro avg&quot;</span>][<span class="stringliteral">&quot;support&quot;</span>]) == int</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4bb7ab5298e52728578ab08886aebdc" name="ac4bb7ab5298e52728578ab08886aebdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4bb7ab5298e52728578ab08886aebdc">&#9670;&#160;</a></span>test_classification_report_labels_target_names_unequal_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_labels_target_names_unequal_length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1261</span><span class="keyword">def </span>test_classification_report_labels_target_names_unequal_length():</div>
<div class="line"><span class="lineno"> 1262</span>    y_true = [0, 0, 2, 0, 0]</div>
<div class="line"><span class="lineno"> 1263</span>    y_pred = [0, 2, 2, 0, 0]</div>
<div class="line"><span class="lineno"> 1264</span>    target_names = [<span class="stringliteral">&quot;class 0&quot;</span>, <span class="stringliteral">&quot;class 1&quot;</span>, <span class="stringliteral">&quot;class 2&quot;</span>]</div>
<div class="line"><span class="lineno"> 1265</span> </div>
<div class="line"><span class="lineno"> 1266</span>    msg = <span class="stringliteral">&quot;labels size, 2, does not match size of target_names, 3&quot;</span></div>
<div class="line"><span class="lineno"> 1267</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=msg):</div>
<div class="line"><span class="lineno"> 1268</span>        classification_report(y_true, y_pred, labels=[0, 2], target_names=target_names)</div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad66d22bc909246036bb05e33c46418b0" name="ad66d22bc909246036bb05e33c46418b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66d22bc909246036bb05e33c46418b0">&#9670;&#160;</a></span>test_classification_report_multiclass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_multiclass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1090</span><span class="keyword">def </span>test_classification_report_multiclass():</div>
<div class="line"><span class="lineno"> 1091</span>    <span class="comment"># Test performance report</span></div>
<div class="line"><span class="lineno"> 1092</span>    iris = datasets.load_iris()</div>
<div class="line"><span class="lineno"> 1093</span>    y_true, y_pred, _ = make_prediction(dataset=iris, binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>    <span class="comment"># print classification report with class names</span></div>
<div class="line"><span class="lineno"> 1096</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1097</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1098</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1099</span><span class="stringliteral">      setosa       0.83      0.79      0.81        24</span></div>
<div class="line"><span class="lineno"> 1100</span><span class="stringliteral">  versicolor       0.33      0.10      0.15        31</span></div>
<div class="line"><span class="lineno"> 1101</span><span class="stringliteral">   virginica       0.42      0.90      0.57        20</span></div>
<div class="line"><span class="lineno"> 1102</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1103</span><span class="stringliteral">    accuracy                           0.53        75</span></div>
<div class="line"><span class="lineno"> 1104</span><span class="stringliteral">   macro avg       0.53      0.60      0.51        75</span></div>
<div class="line"><span class="lineno"> 1105</span><span class="stringliteral">weighted avg       0.51      0.53      0.47        75</span></div>
<div class="line"><span class="lineno"> 1106</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1107</span>    report = classification_report(</div>
<div class="line"><span class="lineno"> 1108</span>        y_true,</div>
<div class="line"><span class="lineno"> 1109</span>        y_pred,</div>
<div class="line"><span class="lineno"> 1110</span>        labels=np.arange(len(iris.target_names)),</div>
<div class="line"><span class="lineno"> 1111</span>        target_names=iris.target_names,</div>
<div class="line"><span class="lineno"> 1112</span>    )</div>
<div class="line"><span class="lineno"> 1113</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af809310a70faab281f35e1c9d21f2ad0" name="af809310a70faab281f35e1c9d21f2ad0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af809310a70faab281f35e1c9d21f2ad0">&#9670;&#160;</a></span>test_classification_report_multiclass_balanced()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_multiclass_balanced </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1116</span><span class="keyword">def </span>test_classification_report_multiclass_balanced():</div>
<div class="line"><span class="lineno"> 1117</span>    y_true, y_pred = [0, 0, 0, 1, 1, 1, 2, 2, 2], [0, 1, 2, 0, 1, 2, 0, 1, 2]</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1120</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1121</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1122</span><span class="stringliteral">           0       0.33      0.33      0.33         3</span></div>
<div class="line"><span class="lineno"> 1123</span><span class="stringliteral">           1       0.33      0.33      0.33         3</span></div>
<div class="line"><span class="lineno"> 1124</span><span class="stringliteral">           2       0.33      0.33      0.33         3</span></div>
<div class="line"><span class="lineno"> 1125</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1126</span><span class="stringliteral">    accuracy                           0.33         9</span></div>
<div class="line"><span class="lineno"> 1127</span><span class="stringliteral">   macro avg       0.33      0.33      0.33         9</span></div>
<div class="line"><span class="lineno"> 1128</span><span class="stringliteral">weighted avg       0.33      0.33      0.33         9</span></div>
<div class="line"><span class="lineno"> 1129</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1130</span>    report = classification_report(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1131</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad854c945d2a8f11249c520897d5c1e49" name="ad854c945d2a8f11249c520897d5c1e49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad854c945d2a8f11249c520897d5c1e49">&#9670;&#160;</a></span>test_classification_report_multiclass_with_digits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_multiclass_with_digits </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1154</span><span class="keyword">def </span>test_classification_report_multiclass_with_digits():</div>
<div class="line"><span class="lineno"> 1155</span>    <span class="comment"># Test performance report with added digits in floating point values</span></div>
<div class="line"><span class="lineno"> 1156</span>    iris = datasets.load_iris()</div>
<div class="line"><span class="lineno"> 1157</span>    y_true, y_pred, _ = make_prediction(dataset=iris, binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1158</span> </div>
<div class="line"><span class="lineno"> 1159</span>    <span class="comment"># print classification report with class names</span></div>
<div class="line"><span class="lineno"> 1160</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1161</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1162</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1163</span><span class="stringliteral">      setosa    0.82609   0.79167   0.80851        24</span></div>
<div class="line"><span class="lineno"> 1164</span><span class="stringliteral">  versicolor    0.33333   0.09677   0.15000        31</span></div>
<div class="line"><span class="lineno"> 1165</span><span class="stringliteral">   virginica    0.41860   0.90000   0.57143        20</span></div>
<div class="line"><span class="lineno"> 1166</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1167</span><span class="stringliteral">    accuracy                        0.53333        75</span></div>
<div class="line"><span class="lineno"> 1168</span><span class="stringliteral">   macro avg    0.52601   0.59615   0.50998        75</span></div>
<div class="line"><span class="lineno"> 1169</span><span class="stringliteral">weighted avg    0.51375   0.53333   0.47310        75</span></div>
<div class="line"><span class="lineno"> 1170</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1171</span>    report = classification_report(</div>
<div class="line"><span class="lineno"> 1172</span>        y_true,</div>
<div class="line"><span class="lineno"> 1173</span>        y_pred,</div>
<div class="line"><span class="lineno"> 1174</span>        labels=np.arange(len(iris.target_names)),</div>
<div class="line"><span class="lineno"> 1175</span>        target_names=iris.target_names,</div>
<div class="line"><span class="lineno"> 1176</span>        digits=5,</div>
<div class="line"><span class="lineno"> 1177</span>    )</div>
<div class="line"><span class="lineno"> 1178</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1179</span> </div>
<div class="line"><span class="lineno"> 1180</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f2e22e752087057c35a3be979e9bf18" name="a2f2e22e752087057c35a3be979e9bf18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2e22e752087057c35a3be979e9bf18">&#9670;&#160;</a></span>test_classification_report_multiclass_with_label_detection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_multiclass_with_label_detection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1134</span><span class="keyword">def </span>test_classification_report_multiclass_with_label_detection():</div>
<div class="line"><span class="lineno"> 1135</span>    iris = datasets.load_iris()</div>
<div class="line"><span class="lineno"> 1136</span>    y_true, y_pred, _ = make_prediction(dataset=iris, binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>    <span class="comment"># print classification report with label detection</span></div>
<div class="line"><span class="lineno"> 1139</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1140</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1141</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1142</span><span class="stringliteral">           0       0.83      0.79      0.81        24</span></div>
<div class="line"><span class="lineno"> 1143</span><span class="stringliteral">           1       0.33      0.10      0.15        31</span></div>
<div class="line"><span class="lineno"> 1144</span><span class="stringliteral">           2       0.42      0.90      0.57        20</span></div>
<div class="line"><span class="lineno"> 1145</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1146</span><span class="stringliteral">    accuracy                           0.53        75</span></div>
<div class="line"><span class="lineno"> 1147</span><span class="stringliteral">   macro avg       0.53      0.60      0.51        75</span></div>
<div class="line"><span class="lineno"> 1148</span><span class="stringliteral">weighted avg       0.51      0.53      0.47        75</span></div>
<div class="line"><span class="lineno"> 1149</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1150</span>    report = classification_report(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1151</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a30996dbd7dc1f6ae96802db6780d92b7" name="a30996dbd7dc1f6ae96802db6780d92b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30996dbd7dc1f6ae96802db6780d92b7">&#9670;&#160;</a></span>test_classification_report_multiclass_with_long_string_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_multiclass_with_long_string_label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1238</span><span class="keyword">def </span>test_classification_report_multiclass_with_long_string_label():</div>
<div class="line"><span class="lineno"> 1239</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1240</span> </div>
<div class="line"><span class="lineno"> 1241</span>    labels = np.array([<span class="stringliteral">&quot;blue&quot;</span>, <span class="stringliteral">&quot;green&quot;</span> * 5, <span class="stringliteral">&quot;red&quot;</span>])</div>
<div class="line"><span class="lineno"> 1242</span>    y_true = labels[y_true]</div>
<div class="line"><span class="lineno"> 1243</span>    y_pred = labels[y_pred]</div>
<div class="line"><span class="lineno"> 1244</span> </div>
<div class="line"><span class="lineno"> 1245</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1246</span><span class="stringliteral">                           precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1247</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1248</span><span class="stringliteral">                     blue       0.83      0.79      0.81        24</span></div>
<div class="line"><span class="lineno"> 1249</span><span class="stringliteral">greengreengreengreengreen       0.33      0.10      0.15        31</span></div>
<div class="line"><span class="lineno"> 1250</span><span class="stringliteral">                      red       0.42      0.90      0.57        20</span></div>
<div class="line"><span class="lineno"> 1251</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1252</span><span class="stringliteral">                 accuracy                           0.53        75</span></div>
<div class="line"><span class="lineno"> 1253</span><span class="stringliteral">                macro avg       0.53      0.60      0.51        75</span></div>
<div class="line"><span class="lineno"> 1254</span><span class="stringliteral">             weighted avg       0.51      0.53      0.47        75</span></div>
<div class="line"><span class="lineno"> 1255</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>    report = classification_report(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1258</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1259</span> </div>
<div class="line"><span class="lineno"> 1260</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c8b0a3e2ba4f319d723cc0b0f9db0c3" name="a3c8b0a3e2ba4f319d723cc0b0f9db0c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c8b0a3e2ba4f319d723cc0b0f9db0c3">&#9670;&#160;</a></span>test_classification_report_multiclass_with_string_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_multiclass_with_string_label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1181</span><span class="keyword">def </span>test_classification_report_multiclass_with_string_label():</div>
<div class="line"><span class="lineno"> 1182</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>    y_true = np.array([<span class="stringliteral">&quot;blue&quot;</span>, <span class="stringliteral">&quot;green&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>])[y_true]</div>
<div class="line"><span class="lineno"> 1185</span>    y_pred = np.array([<span class="stringliteral">&quot;blue&quot;</span>, <span class="stringliteral">&quot;green&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>])[y_pred]</div>
<div class="line"><span class="lineno"> 1186</span> </div>
<div class="line"><span class="lineno"> 1187</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1188</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1189</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1190</span><span class="stringliteral">        blue       0.83      0.79      0.81        24</span></div>
<div class="line"><span class="lineno"> 1191</span><span class="stringliteral">       green       0.33      0.10      0.15        31</span></div>
<div class="line"><span class="lineno"> 1192</span><span class="stringliteral">         red       0.42      0.90      0.57        20</span></div>
<div class="line"><span class="lineno"> 1193</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1194</span><span class="stringliteral">    accuracy                           0.53        75</span></div>
<div class="line"><span class="lineno"> 1195</span><span class="stringliteral">   macro avg       0.53      0.60      0.51        75</span></div>
<div class="line"><span class="lineno"> 1196</span><span class="stringliteral">weighted avg       0.51      0.53      0.47        75</span></div>
<div class="line"><span class="lineno"> 1197</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1198</span>    report = classification_report(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1199</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1200</span> </div>
<div class="line"><span class="lineno"> 1201</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1202</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1203</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1204</span><span class="stringliteral">           a       0.83      0.79      0.81        24</span></div>
<div class="line"><span class="lineno"> 1205</span><span class="stringliteral">           b       0.33      0.10      0.15        31</span></div>
<div class="line"><span class="lineno"> 1206</span><span class="stringliteral">           c       0.42      0.90      0.57        20</span></div>
<div class="line"><span class="lineno"> 1207</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1208</span><span class="stringliteral">    accuracy                           0.53        75</span></div>
<div class="line"><span class="lineno"> 1209</span><span class="stringliteral">   macro avg       0.53      0.60      0.51        75</span></div>
<div class="line"><span class="lineno"> 1210</span><span class="stringliteral">weighted avg       0.51      0.53      0.47        75</span></div>
<div class="line"><span class="lineno"> 1211</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1212</span>    report = classification_report(y_true, y_pred, target_names=[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>])</div>
<div class="line"><span class="lineno"> 1213</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1214</span> </div>
<div class="line"><span class="lineno"> 1215</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6f8ca4f6b14e2e199614da3880cd3a7" name="aa6f8ca4f6b14e2e199614da3880cd3a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f8ca4f6b14e2e199614da3880cd3a7">&#9670;&#160;</a></span>test_classification_report_multiclass_with_unicode_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_multiclass_with_unicode_label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1216</span><span class="keyword">def </span>test_classification_report_multiclass_with_unicode_label():</div>
<div class="line"><span class="lineno"> 1217</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1218</span> </div>
<div class="line"><span class="lineno"> 1219</span>    labels = np.array([<span class="stringliteral">&quot;blue\xa2&quot;</span>, <span class="stringliteral">&quot;green\xa2&quot;</span>, <span class="stringliteral">&quot;red\xa2&quot;</span>])</div>
<div class="line"><span class="lineno"> 1220</span>    y_true = labels[y_true]</div>
<div class="line"><span class="lineno"> 1221</span>    y_pred = labels[y_pred]</div>
<div class="line"><span class="lineno"> 1222</span> </div>
<div class="line"><span class="lineno"> 1223</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1224</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1225</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1226</span><span class="stringliteral">       blue\xa2       0.83      0.79      0.81        24</span></div>
<div class="line"><span class="lineno"> 1227</span><span class="stringliteral">      green\xa2       0.33      0.10      0.15        31</span></div>
<div class="line"><span class="lineno"> 1228</span><span class="stringliteral">        red\xa2       0.42      0.90      0.57        20</span></div>
<div class="line"><span class="lineno"> 1229</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1230</span><span class="stringliteral">    accuracy                           0.53        75</span></div>
<div class="line"><span class="lineno"> 1231</span><span class="stringliteral">   macro avg       0.53      0.60      0.51        75</span></div>
<div class="line"><span class="lineno"> 1232</span><span class="stringliteral">weighted avg       0.51      0.53      0.47        75</span></div>
<div class="line"><span class="lineno"> 1233</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1234</span>    report = classification_report(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1235</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1236</span> </div>
<div class="line"><span class="lineno"> 1237</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3dd5efeb2320c94a7a74310762d30f27" name="a3dd5efeb2320c94a7a74310762d30f27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd5efeb2320c94a7a74310762d30f27">&#9670;&#160;</a></span>test_classification_report_no_labels_target_names_unequal_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_no_labels_target_names_unequal_length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1271</span><span class="keyword">def </span>test_classification_report_no_labels_target_names_unequal_length():</div>
<div class="line"><span class="lineno"> 1272</span>    y_true = [0, 0, 2, 0, 0]</div>
<div class="line"><span class="lineno"> 1273</span>    y_pred = [0, 2, 2, 0, 0]</div>
<div class="line"><span class="lineno"> 1274</span>    target_names = [<span class="stringliteral">&quot;class 0&quot;</span>, <span class="stringliteral">&quot;class 1&quot;</span>, <span class="stringliteral">&quot;class 2&quot;</span>]</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>    err_msg = (</div>
<div class="line"><span class="lineno"> 1277</span>        <span class="stringliteral">&quot;Number of classes, 2, does not &quot;</span></div>
<div class="line"><span class="lineno"> 1278</span>        <span class="stringliteral">&quot;match size of target_names, 3. &quot;</span></div>
<div class="line"><span class="lineno"> 1279</span>        <span class="stringliteral">&quot;Try specifying the labels parameter&quot;</span></div>
<div class="line"><span class="lineno"> 1280</span>    )</div>
<div class="line"><span class="lineno"> 1281</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1282</span>        classification_report(y_true, y_pred, target_names=target_names)</div>
<div class="line"><span class="lineno"> 1283</span> </div>
<div class="line"><span class="lineno"> 1284</span> </div>
<div class="line"><span class="lineno"> 1285</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1656e933c93e4d70c1e7ba8fef122e88" name="a1656e933c93e4d70c1e7ba8fef122e88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1656e933c93e4d70c1e7ba8fef122e88">&#9670;&#160;</a></span>test_classification_report_output_dict_empty_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_output_dict_empty_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  171</span><span class="keyword">def </span>test_classification_report_output_dict_empty_input():</div>
<div class="line"><span class="lineno">  172</span>    report = classification_report(y_true=[], y_pred=[], output_dict=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  173</span>    expected_report = {</div>
<div class="line"><span class="lineno">  174</span>        <span class="stringliteral">&quot;accuracy&quot;</span>: 0.0,</div>
<div class="line"><span class="lineno">  175</span>        <span class="stringliteral">&quot;macro avg&quot;</span>: {</div>
<div class="line"><span class="lineno">  176</span>            <span class="stringliteral">&quot;f1-score&quot;</span>: np.nan,</div>
<div class="line"><span class="lineno">  177</span>            <span class="stringliteral">&quot;precision&quot;</span>: np.nan,</div>
<div class="line"><span class="lineno">  178</span>            <span class="stringliteral">&quot;recall&quot;</span>: np.nan,</div>
<div class="line"><span class="lineno">  179</span>            <span class="stringliteral">&quot;support&quot;</span>: 0,</div>
<div class="line"><span class="lineno">  180</span>        },</div>
<div class="line"><span class="lineno">  181</span>        <span class="stringliteral">&quot;weighted avg&quot;</span>: {</div>
<div class="line"><span class="lineno">  182</span>            <span class="stringliteral">&quot;f1-score&quot;</span>: 0.0,</div>
<div class="line"><span class="lineno">  183</span>            <span class="stringliteral">&quot;precision&quot;</span>: 0.0,</div>
<div class="line"><span class="lineno">  184</span>            <span class="stringliteral">&quot;recall&quot;</span>: 0.0,</div>
<div class="line"><span class="lineno">  185</span>            <span class="stringliteral">&quot;support&quot;</span>: 0,</div>
<div class="line"><span class="lineno">  186</span>        },</div>
<div class="line"><span class="lineno">  187</span>    }</div>
<div class="line"><span class="lineno">  188</span>    <span class="keyword">assert</span> isinstance(report, dict)</div>
<div class="line"><span class="lineno">  189</span>    <span class="comment"># assert the 2 dicts are equal.</span></div>
<div class="line"><span class="lineno">  190</span>    <span class="keyword">assert</span> report.keys() == expected_report.keys()</div>
<div class="line"><span class="lineno">  191</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> expected_report:</div>
<div class="line"><span class="lineno">  192</span>        <span class="keywordflow">if</span> key == <span class="stringliteral">&quot;accuracy&quot;</span>:</div>
<div class="line"><span class="lineno">  193</span>            <span class="keyword">assert</span> isinstance(report[key], float)</div>
<div class="line"><span class="lineno">  194</span>            <span class="keyword">assert</span> report[key] == expected_report[key]</div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  196</span>            <span class="keyword">assert</span> report[key].keys() == expected_report[key].keys()</div>
<div class="line"><span class="lineno">  197</span>            <span class="keywordflow">for</span> metric <span class="keywordflow">in</span> expected_report[key]:</div>
<div class="line"><span class="lineno">  198</span>                assert_almost_equal(expected_report[key][metric], report[key][metric])</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [&quot;warn&quot;, 0, 1])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6247e4c1586fdd1c12ebfd1486895244" name="a6247e4c1586fdd1c12ebfd1486895244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6247e4c1586fdd1c12ebfd1486895244">&#9670;&#160;</a></span>test_classification_report_zero_division_warning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_classification_report_zero_division_warning </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  202</span><span class="keyword">def </span>test_classification_report_zero_division_warning(zero_division):</div>
<div class="line"><span class="lineno">  203</span>    y_true, y_pred = [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]</div>
<div class="line"><span class="lineno">  204</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>) <span class="keyword">as</span> record:</div>
<div class="line"><span class="lineno">  205</span>        classification_report(</div>
<div class="line"><span class="lineno">  206</span>            y_true, y_pred, zero_division=zero_division, output_dict=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  207</span>        )</div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">if</span> zero_division == <span class="stringliteral">&quot;warn&quot;</span>:</div>
<div class="line"><span class="lineno">  209</span>            <span class="keyword">assert</span> len(record) &gt; 1</div>
<div class="line"><span class="lineno">  210</span>            <span class="keywordflow">for</span> item <span class="keywordflow">in</span> record:</div>
<div class="line"><span class="lineno">  211</span>                msg = <span class="stringliteral">&quot;Use `zero_division` parameter to control this behavior.&quot;</span></div>
<div class="line"><span class="lineno">  212</span>                <span class="keyword">assert</span> msg <span class="keywordflow">in</span> str(item.message)</div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  214</span>            <span class="keyword">assert</span> <span class="keywordflow">not</span> record</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9189151cb6d93c28168712545fde4e60" name="a9189151cb6d93c28168712545fde4e60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9189151cb6d93c28168712545fde4e60">&#9670;&#160;</a></span>test_cohen_kappa()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_cohen_kappa </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  703</span><span class="keyword">def </span>test_cohen_kappa():</div>
<div class="line"><span class="lineno">  704</span>    <span class="comment"># These label vectors reproduce the contingency matrix from Artstein and</span></div>
<div class="line"><span class="lineno">  705</span>    <span class="comment"># Poesio (2008), Table 1: np.array([[20, 20], [10, 50]]).</span></div>
<div class="line"><span class="lineno">  706</span>    y1 = np.array([0] * 40 + [1] * 60)</div>
<div class="line"><span class="lineno">  707</span>    y2 = np.array([0] * 20 + [1] * 20 + [0] * 10 + [1] * 50)</div>
<div class="line"><span class="lineno">  708</span>    kappa = cohen_kappa_score(y1, y2)</div>
<div class="line"><span class="lineno">  709</span>    assert_almost_equal(kappa, 0.348, decimal=3)</div>
<div class="line"><span class="lineno">  710</span>    <span class="keyword">assert</span> kappa == cohen_kappa_score(y2, y1)</div>
<div class="line"><span class="lineno">  711</span> </div>
<div class="line"><span class="lineno">  712</span>    <span class="comment"># Add spurious labels and ignore them.</span></div>
<div class="line"><span class="lineno">  713</span>    y1 = np.append(y1, [2] * 4)</div>
<div class="line"><span class="lineno">  714</span>    y2 = np.append(y2, [2] * 4)</div>
<div class="line"><span class="lineno">  715</span>    <span class="keyword">assert</span> cohen_kappa_score(y1, y2, labels=[0, 1]) == kappa</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>    assert_almost_equal(cohen_kappa_score(y1, y1), 1.0)</div>
<div class="line"><span class="lineno">  718</span> </div>
<div class="line"><span class="lineno">  719</span>    <span class="comment"># Multiclass example: Artstein and Poesio, Table 4.</span></div>
<div class="line"><span class="lineno">  720</span>    y1 = np.array([0] * 46 + [1] * 44 + [2] * 10)</div>
<div class="line"><span class="lineno">  721</span>    y2 = np.array([0] * 52 + [1] * 32 + [2] * 16)</div>
<div class="line"><span class="lineno">  722</span>    assert_almost_equal(cohen_kappa_score(y1, y2), 0.8013, decimal=4)</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>    <span class="comment"># Weighting example: none, linear, quadratic.</span></div>
<div class="line"><span class="lineno">  725</span>    y1 = np.array([0] * 46 + [1] * 44 + [2] * 10)</div>
<div class="line"><span class="lineno">  726</span>    y2 = np.array([0] * 50 + [1] * 40 + [2] * 10)</div>
<div class="line"><span class="lineno">  727</span>    assert_almost_equal(cohen_kappa_score(y1, y2), 0.9315, decimal=4)</div>
<div class="line"><span class="lineno">  728</span>    assert_almost_equal(cohen_kappa_score(y1, y2, weights=<span class="stringliteral">&quot;linear&quot;</span>), 0.9412, decimal=4)</div>
<div class="line"><span class="lineno">  729</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  730</span>        cohen_kappa_score(y1, y2, weights=<span class="stringliteral">&quot;quadratic&quot;</span>), 0.9541, decimal=4</div>
<div class="line"><span class="lineno">  731</span>    )</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a663e9e3c25646678aa0f521ec21a5ce7" name="a663e9e3c25646678aa0f521ec21a5ce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a663e9e3c25646678aa0f521ec21a5ce7">&#9670;&#160;</a></span>test_confusion_matrix_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  423</span><span class="keyword">def </span>test_confusion_matrix_binary():</div>
<div class="line"><span class="lineno">  424</span>    <span class="comment"># Test confusion matrix - binary classification case</span></div>
<div class="line"><span class="lineno">  425</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    <span class="keyword">def </span><a class="code hl_namespace" href="namespacetest.html">test</a>(y_true, y_pred):</div>
<div class="line"><span class="lineno">  428</span>        cm = confusion_matrix(y_true, y_pred)</div>
<div class="line"><span class="lineno">  429</span>        assert_array_equal(cm, [[22, 3], [8, 17]])</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>        tp, fp, fn, tn = cm.flatten()</div>
<div class="line"><span class="lineno">  432</span>        num = tp * tn - fp * fn</div>
<div class="line"><span class="lineno">  433</span>        den = np.sqrt((tp + fp) * (tp + fn) * (tn + fp) * (tn + fn))</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>        true_mcc = 0 <span class="keywordflow">if</span> den == 0 <span class="keywordflow">else</span> num / den</div>
<div class="line"><span class="lineno">  436</span>        mcc = matthews_corrcoef(y_true, y_pred)</div>
<div class="line"><span class="lineno">  437</span>        assert_array_almost_equal(mcc, true_mcc, decimal=2)</div>
<div class="line"><span class="lineno">  438</span>        assert_array_almost_equal(mcc, 0.57, decimal=2)</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <a class="code hl_namespace" href="namespacetest.html">test</a>(y_true, y_pred)</div>
<div class="line"><span class="lineno">  441</span>    <a class="code hl_namespace" href="namespacetest.html">test</a>([str(y) <span class="keywordflow">for</span> y <span class="keywordflow">in</span> y_true], [str(y) <span class="keywordflow">for</span> y <span class="keywordflow">in</span> y_pred])</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="ttc" id="anamespacetest_html"><div class="ttname"><a href="namespacetest.html">test</a></div><div class="ttdef"><b>Definition</b> gh18403_mod.f90:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac94a66a4d23936d82b35ba8325c66389" name="ac94a66a4d23936d82b35ba8325c66389"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac94a66a4d23936d82b35ba8325c66389">&#9670;&#160;</a></span>test_confusion_matrix_dtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_dtype </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1063</span><span class="keyword">def </span>test_confusion_matrix_dtype():</div>
<div class="line"><span class="lineno"> 1064</span>    y = [0, 1, 1]</div>
<div class="line"><span class="lineno"> 1065</span>    weight = np.ones(len(y))</div>
<div class="line"><span class="lineno"> 1066</span>    <span class="comment"># confusion_matrix returns int64 by default</span></div>
<div class="line"><span class="lineno"> 1067</span>    cm = confusion_matrix(y, y)</div>
<div class="line"><span class="lineno"> 1068</span>    <span class="keyword">assert</span> cm.dtype == np.int64</div>
<div class="line"><span class="lineno"> 1069</span>    <span class="comment"># The dtype of confusion_matrix is always 64 bit</span></div>
<div class="line"><span class="lineno"> 1070</span>    <span class="keywordflow">for</span> dtype <span class="keywordflow">in</span> [np.bool_, np.int32, np.uint64]:</div>
<div class="line"><span class="lineno"> 1071</span>        cm = confusion_matrix(y, y, sample_weight=weight.astype(dtype, copy=<span class="keyword">False</span>))</div>
<div class="line"><span class="lineno"> 1072</span>        <span class="keyword">assert</span> cm.dtype == np.int64</div>
<div class="line"><span class="lineno"> 1073</span>    <span class="keywordflow">for</span> dtype <span class="keywordflow">in</span> [np.float32, np.float64, <span class="keywordtype">None</span>, object]:</div>
<div class="line"><span class="lineno"> 1074</span>        cm = confusion_matrix(y, y, sample_weight=weight.astype(dtype, copy=<span class="keyword">False</span>))</div>
<div class="line"><span class="lineno"> 1075</span>        <span class="keyword">assert</span> cm.dtype == np.float64</div>
<div class="line"><span class="lineno"> 1076</span> </div>
<div class="line"><span class="lineno"> 1077</span>    <span class="comment"># np.iinfo(np.uint32).max should be accumulated correctly</span></div>
<div class="line"><span class="lineno"> 1078</span>    weight = np.full(len(y), 4294967295, dtype=np.uint32)</div>
<div class="line"><span class="lineno"> 1079</span>    cm = confusion_matrix(y, y, sample_weight=weight)</div>
<div class="line"><span class="lineno"> 1080</span>    <span class="keyword">assert</span> cm[0, 0] == 4294967295</div>
<div class="line"><span class="lineno"> 1081</span>    <span class="keyword">assert</span> cm[1, 1] == 8589934590</div>
<div class="line"><span class="lineno"> 1082</span> </div>
<div class="line"><span class="lineno"> 1083</span>    <span class="comment"># np.iinfo(np.int64).max should cause an overflow</span></div>
<div class="line"><span class="lineno"> 1084</span>    weight = np.full(len(y), 9223372036854775807, dtype=np.int64)</div>
<div class="line"><span class="lineno"> 1085</span>    cm = confusion_matrix(y, y, sample_weight=weight)</div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keyword">assert</span> cm[0, 0] == 9223372036854775807</div>
<div class="line"><span class="lineno"> 1087</span>    <span class="keyword">assert</span> cm[1, 1] == -2</div>
<div class="line"><span class="lineno"> 1088</span> </div>
<div class="line"><span class="lineno"> 1089</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af61a53f6920d18df86122c69aaeae641" name="af61a53f6920d18df86122c69aaeae641"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af61a53f6920d18df86122c69aaeae641">&#9670;&#160;</a></span>test_confusion_matrix_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>err_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1047</span><span class="keyword">def </span>test_confusion_matrix_error(labels, err_msg):</div>
<div class="line"><span class="lineno"> 1048</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1049</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1050</span>        confusion_matrix(y_true, y_pred, labels=labels)</div>
<div class="line"><span class="lineno"> 1051</span> </div>
<div class="line"><span class="lineno"> 1052</span> </div>
<div class="line"><span class="lineno"> 1053</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1054</span>    <span class="stringliteral">&quot;labels&quot;</span>, (<span class="keywordtype">None</span>, [0, 1], [0, 1, 2]), ids=[<span class="stringliteral">&quot;None&quot;</span>, <span class="stringliteral">&quot;binary&quot;</span>, <span class="stringliteral">&quot;multiclass&quot;</span>]</div>
<div class="line"><span class="lineno"> 1055</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad74358cf1e2428adc23a89508f39b992" name="ad74358cf1e2428adc23a89508f39b992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad74358cf1e2428adc23a89508f39b992">&#9670;&#160;</a></span>test_confusion_matrix_multiclass_subset_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_multiclass_subset_labels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1020</span><span class="keyword">def </span>test_confusion_matrix_multiclass_subset_labels():</div>
<div class="line"><span class="lineno"> 1021</span>    <span class="comment"># Test confusion matrix - multi-class case with subset of labels</span></div>
<div class="line"><span class="lineno"> 1022</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1023</span> </div>
<div class="line"><span class="lineno"> 1024</span>    <span class="comment"># compute confusion matrix with only first two labels considered</span></div>
<div class="line"><span class="lineno"> 1025</span>    cm = confusion_matrix(y_true, y_pred, labels=[0, 1])</div>
<div class="line"><span class="lineno"> 1026</span>    assert_array_equal(cm, [[19, 4], [4, 3]])</div>
<div class="line"><span class="lineno"> 1027</span> </div>
<div class="line"><span class="lineno"> 1028</span>    <span class="comment"># compute confusion matrix with explicit label ordering for only subset</span></div>
<div class="line"><span class="lineno"> 1029</span>    <span class="comment"># of labels</span></div>
<div class="line"><span class="lineno"> 1030</span>    cm = confusion_matrix(y_true, y_pred, labels=[2, 1])</div>
<div class="line"><span class="lineno"> 1031</span>    assert_array_equal(cm, [[18, 2], [24, 3]])</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>    <span class="comment"># a label not in y_true should result in zeros for that row/column</span></div>
<div class="line"><span class="lineno"> 1034</span>    extra_label = np.max(y_true) + 1</div>
<div class="line"><span class="lineno"> 1035</span>    cm = confusion_matrix(y_true, y_pred, labels=[2, extra_label])</div>
<div class="line"><span class="lineno"> 1036</span>    assert_array_equal(cm, [[18, 0], [0, 0]])</div>
<div class="line"><span class="lineno"> 1037</span> </div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1040</span>    <span class="stringliteral">&quot;labels, err_msg&quot;</span>,</div>
<div class="line"><span class="lineno"> 1041</span>    [</div>
<div class="line"><span class="lineno"> 1042</span>        ([], <span class="stringliteral">&quot;&#39;labels&#39; should contains at least one label.&quot;</span>),</div>
<div class="line"><span class="lineno"> 1043</span>        ([3, 4], <span class="stringliteral">&quot;At least one label specified must be in y_true&quot;</span>),</div>
<div class="line"><span class="lineno"> 1044</span>    ],</div>
<div class="line"><span class="lineno"> 1045</span>    ids=[<span class="stringliteral">&quot;empty list&quot;</span>, <span class="stringliteral">&quot;unknown labels&quot;</span>],</div>
<div class="line"><span class="lineno"> 1046</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6bb4807c6272aac6268025a8fb5e0e16" name="a6bb4807c6272aac6268025a8fb5e0e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb4807c6272aac6268025a8fb5e0e16">&#9670;&#160;</a></span>test_confusion_matrix_normalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_normalize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cm_dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  571</span><span class="keyword">def </span>test_confusion_matrix_normalize(normalize, cm_dtype, expected_results):</div>
<div class="line"><span class="lineno">  572</span>    y_test = [0, 1, 2] * 6</div>
<div class="line"><span class="lineno">  573</span>    y_pred = list(chain(*permutations([0, 1, 2])))</div>
<div class="line"><span class="lineno">  574</span>    cm = confusion_matrix(y_test, y_pred, normalize=normalize)</div>
<div class="line"><span class="lineno">  575</span>    assert_allclose(cm, expected_results)</div>
<div class="line"><span class="lineno">  576</span>    <span class="keyword">assert</span> cm.dtype.kind == cm_dtype</div>
<div class="line"><span class="lineno">  577</span> </div>
<div class="line"><span class="lineno">  578</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad118bd3cefae7307fc773d658c8357fc" name="ad118bd3cefae7307fc773d658c8357fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad118bd3cefae7307fc773d658c8357fc">&#9670;&#160;</a></span>test_confusion_matrix_normalize_single_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_normalize_single_class </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  586</span><span class="keyword">def </span>test_confusion_matrix_normalize_single_class():</div>
<div class="line"><span class="lineno">  587</span>    y_test = [0, 0, 0, 0, 1, 1, 1, 1]</div>
<div class="line"><span class="lineno">  588</span>    y_pred = [0, 0, 0, 0, 0, 0, 0, 0]</div>
<div class="line"><span class="lineno">  589</span> </div>
<div class="line"><span class="lineno">  590</span>    cm_true = confusion_matrix(y_test, y_pred, normalize=<span class="stringliteral">&quot;true&quot;</span>)</div>
<div class="line"><span class="lineno">  591</span>    <span class="keyword">assert</span> cm_true.sum() == pytest.approx(2.0)</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>    <span class="comment"># additionally check that no warnings are raised due to a division by zero</span></div>
<div class="line"><span class="lineno">  594</span>    <span class="keyword">with</span> warnings.catch_warnings():</div>
<div class="line"><span class="lineno">  595</span>        warnings.simplefilter(<span class="stringliteral">&quot;error&quot;</span>, RuntimeWarning)</div>
<div class="line"><span class="lineno">  596</span>        cm_pred = confusion_matrix(y_test, y_pred, normalize=<span class="stringliteral">&quot;pred&quot;</span>)</div>
<div class="line"><span class="lineno">  597</span> </div>
<div class="line"><span class="lineno">  598</span>    <span class="keyword">assert</span> cm_pred.sum() == pytest.approx(1.0)</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>    <span class="keyword">with</span> warnings.catch_warnings():</div>
<div class="line"><span class="lineno">  601</span>        warnings.simplefilter(<span class="stringliteral">&quot;error&quot;</span>, RuntimeWarning)</div>
<div class="line"><span class="lineno">  602</span>        confusion_matrix(y_pred, y_test, normalize=<span class="stringliteral">&quot;true&quot;</span>)</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  606</span>    <span class="stringliteral">&quot;params, warn_msg&quot;</span>,</div>
<div class="line"><span class="lineno">  607</span>    [</div>
<div class="line"><span class="lineno">  608</span>        <span class="comment"># When y_test contains one class only and y_test==y_pred, LR+ is undefined</span></div>
<div class="line"><span class="lineno">  609</span>        (</div>
<div class="line"><span class="lineno">  610</span>            {</div>
<div class="line"><span class="lineno">  611</span>                <span class="stringliteral">&quot;y_true&quot;</span>: np.array([0, 0, 0, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  612</span>                <span class="stringliteral">&quot;y_pred&quot;</span>: np.array([0, 0, 0, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  613</span>            },</div>
<div class="line"><span class="lineno">  614</span>            <span class="stringliteral">&quot;samples of only one class were seen during testing&quot;</span>,</div>
<div class="line"><span class="lineno">  615</span>        ),</div>
<div class="line"><span class="lineno">  616</span>        <span class="comment"># When `fp == 0` and `tp != 0`, LR+ is undefined</span></div>
<div class="line"><span class="lineno">  617</span>        (</div>
<div class="line"><span class="lineno">  618</span>            {</div>
<div class="line"><span class="lineno">  619</span>                <span class="stringliteral">&quot;y_true&quot;</span>: np.array([1, 1, 1, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  620</span>                <span class="stringliteral">&quot;y_pred&quot;</span>: np.array([1, 1, 1, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  621</span>            },</div>
<div class="line"><span class="lineno">  622</span>            <span class="stringliteral">&quot;positive_likelihood_ratio ill-defined and being set to nan&quot;</span>,</div>
<div class="line"><span class="lineno">  623</span>        ),</div>
<div class="line"><span class="lineno">  624</span>        <span class="comment"># When `fp == 0` and `tp == 0`, LR+ is undefined</span></div>
<div class="line"><span class="lineno">  625</span>        (</div>
<div class="line"><span class="lineno">  626</span>            {</div>
<div class="line"><span class="lineno">  627</span>                <span class="stringliteral">&quot;y_true&quot;</span>: np.array([1, 1, 1, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  628</span>                <span class="stringliteral">&quot;y_pred&quot;</span>: np.array([0, 0, 0, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  629</span>            },</div>
<div class="line"><span class="lineno">  630</span>            <span class="stringliteral">&quot;no samples predicted for the positive class&quot;</span>,</div>
<div class="line"><span class="lineno">  631</span>        ),</div>
<div class="line"><span class="lineno">  632</span>        <span class="comment"># When `tn == 0`, LR- is undefined</span></div>
<div class="line"><span class="lineno">  633</span>        (</div>
<div class="line"><span class="lineno">  634</span>            {</div>
<div class="line"><span class="lineno">  635</span>                <span class="stringliteral">&quot;y_true&quot;</span>: np.array([1, 1, 1, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  636</span>                <span class="stringliteral">&quot;y_pred&quot;</span>: np.array([0, 0, 0, 1, 1, 1]),</div>
<div class="line"><span class="lineno">  637</span>            },</div>
<div class="line"><span class="lineno">  638</span>            <span class="stringliteral">&quot;negative_likelihood_ratio ill-defined and being set to nan&quot;</span>,</div>
<div class="line"><span class="lineno">  639</span>        ),</div>
<div class="line"><span class="lineno">  640</span>        <span class="comment"># When `tp + fn == 0` both ratios are undefined</span></div>
<div class="line"><span class="lineno">  641</span>        (</div>
<div class="line"><span class="lineno">  642</span>            {</div>
<div class="line"><span class="lineno">  643</span>                <span class="stringliteral">&quot;y_true&quot;</span>: np.array([0, 0, 0, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  644</span>                <span class="stringliteral">&quot;y_pred&quot;</span>: np.array([1, 1, 1, 0, 0, 0]),</div>
<div class="line"><span class="lineno">  645</span>            },</div>
<div class="line"><span class="lineno">  646</span>            <span class="stringliteral">&quot;no samples of the positive class were present in the testing set&quot;</span>,</div>
<div class="line"><span class="lineno">  647</span>        ),</div>
<div class="line"><span class="lineno">  648</span>    ],</div>
<div class="line"><span class="lineno">  649</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3682020983f6ea9e56a8c6fd20bb30e" name="ab3682020983f6ea9e56a8c6fd20bb30e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3682020983f6ea9e56a8c6fd20bb30e">&#9670;&#160;</a></span>test_confusion_matrix_normalize_wrong_option()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_normalize_wrong_option </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  579</span><span class="keyword">def </span>test_confusion_matrix_normalize_wrong_option():</div>
<div class="line"><span class="lineno">  580</span>    y_test = [0, 0, 0, 0, 1, 1, 1, 1]</div>
<div class="line"><span class="lineno">  581</span>    y_pred = [0, 0, 0, 0, 0, 0, 0, 0]</div>
<div class="line"><span class="lineno">  582</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;normalize must be one of&quot;</span>):</div>
<div class="line"><span class="lineno">  583</span>        confusion_matrix(y_test, y_pred, normalize=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a335fea802bbdfc37f22e9b16a1c48041" name="a335fea802bbdfc37f22e9b16a1c48041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a335fea802bbdfc37f22e9b16a1c48041">&#9670;&#160;</a></span>test_confusion_matrix_on_zero_length_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_confusion_matrix_on_zero_length_input </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1056</span><span class="keyword">def </span>test_confusion_matrix_on_zero_length_input(labels):</div>
<div class="line"><span class="lineno"> 1057</span>    expected_n_classes = len(labels) <span class="keywordflow">if</span> labels <span class="keywordflow">else</span> 0</div>
<div class="line"><span class="lineno"> 1058</span>    expected = np.zeros((expected_n_classes, expected_n_classes), dtype=int)</div>
<div class="line"><span class="lineno"> 1059</span>    cm = confusion_matrix([], [], labels=labels)</div>
<div class="line"><span class="lineno"> 1060</span>    assert_array_equal(cm, expected)</div>
<div class="line"><span class="lineno"> 1061</span> </div>
<div class="line"><span class="lineno"> 1062</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f61f12b603447d06ea7f68ddab89a93" name="a7f61f12b603447d06ea7f68ddab89a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f61f12b603447d06ea7f68ddab89a93">&#9670;&#160;</a></span>test_fscore_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_fscore_warnings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2124</span><span class="keyword">def </span>test_fscore_warnings(zero_division):</div>
<div class="line"><span class="lineno"> 2125</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>) <span class="keyword">as</span> record:</div>
<div class="line"><span class="lineno"> 2126</span>        warnings.simplefilter(<span class="stringliteral">&quot;always&quot;</span>)</div>
<div class="line"><span class="lineno"> 2127</span> </div>
<div class="line"><span class="lineno"> 2128</span>        <span class="keywordflow">for</span> score <span class="keywordflow">in</span> [f1_score, partial(fbeta_score, beta=2)]:</div>
<div class="line"><span class="lineno"> 2129</span>            score(</div>
<div class="line"><span class="lineno"> 2130</span>                np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2131</span>                np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2132</span>                average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2133</span>                zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2134</span>            )</div>
<div class="line"><span class="lineno"> 2135</span>            <span class="keyword">assert</span> len(record) == 0</div>
<div class="line"><span class="lineno"> 2136</span> </div>
<div class="line"><span class="lineno"> 2137</span>            score(</div>
<div class="line"><span class="lineno"> 2138</span>                np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2139</span>                np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2140</span>                average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2141</span>                zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2142</span>            )</div>
<div class="line"><span class="lineno"> 2143</span>            <span class="keyword">assert</span> len(record) == 0</div>
<div class="line"><span class="lineno"> 2144</span> </div>
<div class="line"><span class="lineno"> 2145</span>            score(</div>
<div class="line"><span class="lineno"> 2146</span>                np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2147</span>                np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2148</span>                average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2149</span>                zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2150</span>            )</div>
<div class="line"><span class="lineno"> 2151</span>            <span class="keywordflow">if</span> zero_division == <span class="stringliteral">&quot;warn&quot;</span>:</div>
<div class="line"><span class="lineno"> 2152</span>                <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 2153</span>                    str(record.pop().message)</div>
<div class="line"><span class="lineno"> 2154</span>                    == <span class="stringliteral">&quot;F-score is ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 2155</span>                    <span class="stringliteral">&quot;being set to 0.0 due to no true nor predicted &quot;</span></div>
<div class="line"><span class="lineno"> 2156</span>                    <span class="stringliteral">&quot;samples. Use `zero_division` parameter to &quot;</span></div>
<div class="line"><span class="lineno"> 2157</span>                    <span class="stringliteral">&quot;control this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 2158</span>                )</div>
<div class="line"><span class="lineno"> 2159</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2160</span>                <span class="keyword">assert</span> len(record) == 0</div>
<div class="line"><span class="lineno"> 2161</span> </div>
<div class="line"><span class="lineno"> 2162</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aab35c8549280c4d75b9144c7662ce7ed" name="aab35c8549280c4d75b9144c7662ce7ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab35c8549280c4d75b9144c7662ce7ed">&#9670;&#160;</a></span>test_hinge_loss_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_hinge_loss_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2299</span><span class="keyword">def </span>test_hinge_loss_binary():</div>
<div class="line"><span class="lineno"> 2300</span>    y_true = np.array([-1, 1, 1, -1])</div>
<div class="line"><span class="lineno"> 2301</span>    pred_decision = np.array([-8.5, 0.5, 1.5, -0.3])</div>
<div class="line"><span class="lineno"> 2302</span>    <span class="keyword">assert</span> hinge_loss(y_true, pred_decision) == 1.2 / 4</div>
<div class="line"><span class="lineno"> 2303</span> </div>
<div class="line"><span class="lineno"> 2304</span>    y_true = np.array([0, 2, 2, 0])</div>
<div class="line"><span class="lineno"> 2305</span>    pred_decision = np.array([-8.5, 0.5, 1.5, -0.3])</div>
<div class="line"><span class="lineno"> 2306</span>    <span class="keyword">assert</span> hinge_loss(y_true, pred_decision) == 1.2 / 4</div>
<div class="line"><span class="lineno"> 2307</span> </div>
<div class="line"><span class="lineno"> 2308</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a524cc3737362c934178ecbc7e68ad26b" name="a524cc3737362c934178ecbc7e68ad26b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a524cc3737362c934178ecbc7e68ad26b">&#9670;&#160;</a></span>test_hinge_loss_multiclass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_hinge_loss_multiclass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2309</span><span class="keyword">def </span>test_hinge_loss_multiclass():</div>
<div class="line"><span class="lineno"> 2310</span>    pred_decision = np.array(</div>
<div class="line"><span class="lineno"> 2311</span>        [</div>
<div class="line"><span class="lineno"> 2312</span>            [+0.36, -0.17, -0.58, -0.99],</div>
<div class="line"><span class="lineno"> 2313</span>            [-0.54, -0.37, -0.48, -0.58],</div>
<div class="line"><span class="lineno"> 2314</span>            [-1.45, -0.58, -0.38, -0.17],</div>
<div class="line"><span class="lineno"> 2315</span>            [-0.54, -0.38, -0.48, -0.58],</div>
<div class="line"><span class="lineno"> 2316</span>            [-2.36, -0.79, -0.27, +0.24],</div>
<div class="line"><span class="lineno"> 2317</span>            [-1.45, -0.58, -0.38, -0.17],</div>
<div class="line"><span class="lineno"> 2318</span>        ]</div>
<div class="line"><span class="lineno"> 2319</span>    )</div>
<div class="line"><span class="lineno"> 2320</span>    y_true = np.array([0, 1, 2, 1, 3, 2])</div>
<div class="line"><span class="lineno"> 2321</span>    dummy_losses = np.array(</div>
<div class="line"><span class="lineno"> 2322</span>        [</div>
<div class="line"><span class="lineno"> 2323</span>            1 - pred_decision[0][0] + pred_decision[0][1],</div>
<div class="line"><span class="lineno"> 2324</span>            1 - pred_decision[1][1] + pred_decision[1][2],</div>
<div class="line"><span class="lineno"> 2325</span>            1 - pred_decision[2][2] + pred_decision[2][3],</div>
<div class="line"><span class="lineno"> 2326</span>            1 - pred_decision[3][1] + pred_decision[3][2],</div>
<div class="line"><span class="lineno"> 2327</span>            1 - pred_decision[4][3] + pred_decision[4][2],</div>
<div class="line"><span class="lineno"> 2328</span>            1 - pred_decision[5][2] + pred_decision[5][3],</div>
<div class="line"><span class="lineno"> 2329</span>        ]</div>
<div class="line"><span class="lineno"> 2330</span>    )</div>
<div class="line"><span class="lineno"> 2331</span>    np.clip(dummy_losses, 0, <span class="keywordtype">None</span>, out=dummy_losses)</div>
<div class="line"><span class="lineno"> 2332</span>    dummy_hinge_loss = np.mean(dummy_losses)</div>
<div class="line"><span class="lineno"> 2333</span>    <span class="keyword">assert</span> hinge_loss(y_true, pred_decision) == dummy_hinge_loss</div>
<div class="line"><span class="lineno"> 2334</span> </div>
<div class="line"><span class="lineno"> 2335</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bb9d4862d23fd53e5f0569b74ff4dcb" name="a1bb9d4862d23fd53e5f0569b74ff4dcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bb9d4862d23fd53e5f0569b74ff4dcb">&#9670;&#160;</a></span>test_hinge_loss_multiclass_invariance_lists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_hinge_loss_multiclass_invariance_lists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2439</span><span class="keyword">def </span>test_hinge_loss_multiclass_invariance_lists():</div>
<div class="line"><span class="lineno"> 2440</span>    <span class="comment"># Currently, invariance of string and integer labels cannot be tested</span></div>
<div class="line"><span class="lineno"> 2441</span>    <span class="comment"># in common invariance tests because invariance tests for multiclass</span></div>
<div class="line"><span class="lineno"> 2442</span>    <span class="comment"># decision functions is not implemented yet.</span></div>
<div class="line"><span class="lineno"> 2443</span>    y_true = [<span class="stringliteral">&quot;blue&quot;</span>, <span class="stringliteral">&quot;green&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>, <span class="stringliteral">&quot;green&quot;</span>, <span class="stringliteral">&quot;white&quot;</span>, <span class="stringliteral">&quot;red&quot;</span>]</div>
<div class="line"><span class="lineno"> 2444</span>    pred_decision = [</div>
<div class="line"><span class="lineno"> 2445</span>        [+0.36, -0.17, -0.58, -0.99],</div>
<div class="line"><span class="lineno"> 2446</span>        [-0.55, -0.38, -0.48, -0.58],</div>
<div class="line"><span class="lineno"> 2447</span>        [-1.45, -0.58, -0.38, -0.17],</div>
<div class="line"><span class="lineno"> 2448</span>        [-0.55, -0.38, -0.48, -0.58],</div>
<div class="line"><span class="lineno"> 2449</span>        [-2.36, -0.79, -0.27, +0.24],</div>
<div class="line"><span class="lineno"> 2450</span>        [-1.45, -0.58, -0.38, -0.17],</div>
<div class="line"><span class="lineno"> 2451</span>    ]</div>
<div class="line"><span class="lineno"> 2452</span>    dummy_losses = np.array(</div>
<div class="line"><span class="lineno"> 2453</span>        [</div>
<div class="line"><span class="lineno"> 2454</span>            1 - pred_decision[0][0] + pred_decision[0][1],</div>
<div class="line"><span class="lineno"> 2455</span>            1 - pred_decision[1][1] + pred_decision[1][2],</div>
<div class="line"><span class="lineno"> 2456</span>            1 - pred_decision[2][2] + pred_decision[2][3],</div>
<div class="line"><span class="lineno"> 2457</span>            1 - pred_decision[3][1] + pred_decision[3][2],</div>
<div class="line"><span class="lineno"> 2458</span>            1 - pred_decision[4][3] + pred_decision[4][2],</div>
<div class="line"><span class="lineno"> 2459</span>            1 - pred_decision[5][2] + pred_decision[5][3],</div>
<div class="line"><span class="lineno"> 2460</span>        ]</div>
<div class="line"><span class="lineno"> 2461</span>    )</div>
<div class="line"><span class="lineno"> 2462</span>    np.clip(dummy_losses, 0, <span class="keywordtype">None</span>, out=dummy_losses)</div>
<div class="line"><span class="lineno"> 2463</span>    dummy_hinge_loss = np.mean(dummy_losses)</div>
<div class="line"><span class="lineno"> 2464</span>    <span class="keyword">assert</span> hinge_loss(y_true, pred_decision) == dummy_hinge_loss</div>
<div class="line"><span class="lineno"> 2465</span> </div>
<div class="line"><span class="lineno"> 2466</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a660f7b817ddbbd46fde15656652e14e4" name="a660f7b817ddbbd46fde15656652e14e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660f7b817ddbbd46fde15656652e14e4">&#9670;&#160;</a></span>test_hinge_loss_multiclass_missing_labels_only_two_unq_in_y_true()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_hinge_loss_multiclass_missing_labels_only_two_unq_in_y_true </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2407</span><span class="keyword">def </span>test_hinge_loss_multiclass_missing_labels_only_two_unq_in_y_true():</div>
<div class="line"><span class="lineno"> 2408</span>    <span class="comment"># non-regression test for:</span></div>
<div class="line"><span class="lineno"> 2409</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/17630</span></div>
<div class="line"><span class="lineno"> 2410</span>    <span class="comment"># check that we can compute the hinge loss when providing an array</span></div>
<div class="line"><span class="lineno"> 2411</span>    <span class="comment"># with labels allowing to not have all labels in y_true</span></div>
<div class="line"><span class="lineno"> 2412</span>    pred_decision = np.array(</div>
<div class="line"><span class="lineno"> 2413</span>        [</div>
<div class="line"><span class="lineno"> 2414</span>            [+0.36, -0.17, -0.58],</div>
<div class="line"><span class="lineno"> 2415</span>            [-0.15, -0.58, -0.48],</div>
<div class="line"><span class="lineno"> 2416</span>            [-1.45, -0.58, -0.38],</div>
<div class="line"><span class="lineno"> 2417</span>            [-0.55, -0.78, -0.42],</div>
<div class="line"><span class="lineno"> 2418</span>            [-1.45, -0.58, -0.38],</div>
<div class="line"><span class="lineno"> 2419</span>        ]</div>
<div class="line"><span class="lineno"> 2420</span>    )</div>
<div class="line"><span class="lineno"> 2421</span>    y_true = np.array([0, 2, 2, 0, 2])</div>
<div class="line"><span class="lineno"> 2422</span>    labels = np.array([0, 1, 2])</div>
<div class="line"><span class="lineno"> 2423</span>    dummy_losses = np.array(</div>
<div class="line"><span class="lineno"> 2424</span>        [</div>
<div class="line"><span class="lineno"> 2425</span>            1 - pred_decision[0][0] + pred_decision[0][1],</div>
<div class="line"><span class="lineno"> 2426</span>            1 - pred_decision[1][2] + pred_decision[1][0],</div>
<div class="line"><span class="lineno"> 2427</span>            1 - pred_decision[2][2] + pred_decision[2][1],</div>
<div class="line"><span class="lineno"> 2428</span>            1 - pred_decision[3][0] + pred_decision[3][2],</div>
<div class="line"><span class="lineno"> 2429</span>            1 - pred_decision[4][2] + pred_decision[4][1],</div>
<div class="line"><span class="lineno"> 2430</span>        ]</div>
<div class="line"><span class="lineno"> 2431</span>    )</div>
<div class="line"><span class="lineno"> 2432</span>    np.clip(dummy_losses, 0, <span class="keywordtype">None</span>, out=dummy_losses)</div>
<div class="line"><span class="lineno"> 2433</span>    dummy_hinge_loss = np.mean(dummy_losses)</div>
<div class="line"><span class="lineno"> 2434</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 2435</span>        hinge_loss(y_true, pred_decision, labels=labels), dummy_hinge_loss</div>
<div class="line"><span class="lineno"> 2436</span>    )</div>
<div class="line"><span class="lineno"> 2437</span> </div>
<div class="line"><span class="lineno"> 2438</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d2206253e3d5728b0574da8b2d292b4" name="a6d2206253e3d5728b0574da8b2d292b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d2206253e3d5728b0574da8b2d292b4">&#9670;&#160;</a></span>test_hinge_loss_multiclass_missing_labels_with_labels_none()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_hinge_loss_multiclass_missing_labels_with_labels_none </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2336</span><span class="keyword">def </span>test_hinge_loss_multiclass_missing_labels_with_labels_none():</div>
<div class="line"><span class="lineno"> 2337</span>    y_true = np.array([0, 1, 2, 2])</div>
<div class="line"><span class="lineno"> 2338</span>    pred_decision = np.array(</div>
<div class="line"><span class="lineno"> 2339</span>        [</div>
<div class="line"><span class="lineno"> 2340</span>            [+1.27, 0.034, -0.68, -1.40],</div>
<div class="line"><span class="lineno"> 2341</span>            [-1.45, -0.58, -0.38, -0.17],</div>
<div class="line"><span class="lineno"> 2342</span>            [-2.36, -0.79, -0.27, +0.24],</div>
<div class="line"><span class="lineno"> 2343</span>            [-2.36, -0.79, -0.27, +0.24],</div>
<div class="line"><span class="lineno"> 2344</span>        ]</div>
<div class="line"><span class="lineno"> 2345</span>    )</div>
<div class="line"><span class="lineno"> 2346</span>    error_message = (</div>
<div class="line"><span class="lineno"> 2347</span>        <span class="stringliteral">&quot;Please include all labels in y_true or pass labels as third argument&quot;</span></div>
<div class="line"><span class="lineno"> 2348</span>    )</div>
<div class="line"><span class="lineno"> 2349</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=error_message):</div>
<div class="line"><span class="lineno"> 2350</span>        hinge_loss(y_true, pred_decision)</div>
<div class="line"><span class="lineno"> 2351</span> </div>
<div class="line"><span class="lineno"> 2352</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abd7707f1bc4b4a42efc4fd8b6d3fbb39" name="abd7707f1bc4b4a42efc4fd8b6d3fbb39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd7707f1bc4b4a42efc4fd8b6d3fbb39">&#9670;&#160;</a></span>test_hinge_loss_multiclass_no_consistent_pred_decision_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_hinge_loss_multiclass_no_consistent_pred_decision_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2353</span><span class="keyword">def </span>test_hinge_loss_multiclass_no_consistent_pred_decision_shape():</div>
<div class="line"><span class="lineno"> 2354</span>    <span class="comment"># test for inconsistency between multiclass problem and pred_decision</span></div>
<div class="line"><span class="lineno"> 2355</span>    <span class="comment"># argument</span></div>
<div class="line"><span class="lineno"> 2356</span>    y_true = np.array([2, 1, 0, 1, 0, 1, 1])</div>
<div class="line"><span class="lineno"> 2357</span>    pred_decision = np.array([0, 1, 2, 1, 0, 2, 1])</div>
<div class="line"><span class="lineno"> 2358</span>    error_message = (</div>
<div class="line"><span class="lineno"> 2359</span>        <span class="stringliteral">&quot;The shape of pred_decision cannot be 1d array&quot;</span></div>
<div class="line"><span class="lineno"> 2360</span>        <span class="stringliteral">&quot;with a multiclass target. pred_decision shape &quot;</span></div>
<div class="line"><span class="lineno"> 2361</span>        <span class="stringliteral">&quot;must be (n_samples, n_classes), that is &quot;</span></div>
<div class="line"><span class="lineno"> 2362</span>        <span class="stringliteral">&quot;(7, 3). Got: (7,)&quot;</span></div>
<div class="line"><span class="lineno"> 2363</span>    )</div>
<div class="line"><span class="lineno"> 2364</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=re.escape(error_message)):</div>
<div class="line"><span class="lineno"> 2365</span>        hinge_loss(y_true=y_true, pred_decision=pred_decision)</div>
<div class="line"><span class="lineno"> 2366</span> </div>
<div class="line"><span class="lineno"> 2367</span>    <span class="comment"># test for inconsistency between pred_decision shape and labels number</span></div>
<div class="line"><span class="lineno"> 2368</span>    pred_decision = np.array([[0, 1], [0, 1], [0, 1], [0, 1], [2, 0], [0, 1], [1, 0]])</div>
<div class="line"><span class="lineno"> 2369</span>    labels = [0, 1, 2]</div>
<div class="line"><span class="lineno"> 2370</span>    error_message = (</div>
<div class="line"><span class="lineno"> 2371</span>        <span class="stringliteral">&quot;The shape of pred_decision is not &quot;</span></div>
<div class="line"><span class="lineno"> 2372</span>        <span class="stringliteral">&quot;consistent with the number of classes. &quot;</span></div>
<div class="line"><span class="lineno"> 2373</span>        <span class="stringliteral">&quot;With a multiclass target, pred_decision &quot;</span></div>
<div class="line"><span class="lineno"> 2374</span>        <span class="stringliteral">&quot;shape must be (n_samples, n_classes), that is &quot;</span></div>
<div class="line"><span class="lineno"> 2375</span>        <span class="stringliteral">&quot;(7, 3). Got: (7, 2)&quot;</span></div>
<div class="line"><span class="lineno"> 2376</span>    )</div>
<div class="line"><span class="lineno"> 2377</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=re.escape(error_message)):</div>
<div class="line"><span class="lineno"> 2378</span>        hinge_loss(y_true=y_true, pred_decision=pred_decision, labels=labels)</div>
<div class="line"><span class="lineno"> 2379</span> </div>
<div class="line"><span class="lineno"> 2380</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a50b4ea9881311ee9ee091235dbea92c8" name="a50b4ea9881311ee9ee091235dbea92c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50b4ea9881311ee9ee091235dbea92c8">&#9670;&#160;</a></span>test_hinge_loss_multiclass_with_missing_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_hinge_loss_multiclass_with_missing_labels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2381</span><span class="keyword">def </span>test_hinge_loss_multiclass_with_missing_labels():</div>
<div class="line"><span class="lineno"> 2382</span>    pred_decision = np.array(</div>
<div class="line"><span class="lineno"> 2383</span>        [</div>
<div class="line"><span class="lineno"> 2384</span>            [+0.36, -0.17, -0.58, -0.99],</div>
<div class="line"><span class="lineno"> 2385</span>            [-0.55, -0.38, -0.48, -0.58],</div>
<div class="line"><span class="lineno"> 2386</span>            [-1.45, -0.58, -0.38, -0.17],</div>
<div class="line"><span class="lineno"> 2387</span>            [-0.55, -0.38, -0.48, -0.58],</div>
<div class="line"><span class="lineno"> 2388</span>            [-1.45, -0.58, -0.38, -0.17],</div>
<div class="line"><span class="lineno"> 2389</span>        ]</div>
<div class="line"><span class="lineno"> 2390</span>    )</div>
<div class="line"><span class="lineno"> 2391</span>    y_true = np.array([0, 1, 2, 1, 2])</div>
<div class="line"><span class="lineno"> 2392</span>    labels = np.array([0, 1, 2, 3])</div>
<div class="line"><span class="lineno"> 2393</span>    dummy_losses = np.array(</div>
<div class="line"><span class="lineno"> 2394</span>        [</div>
<div class="line"><span class="lineno"> 2395</span>            1 - pred_decision[0][0] + pred_decision[0][1],</div>
<div class="line"><span class="lineno"> 2396</span>            1 - pred_decision[1][1] + pred_decision[1][2],</div>
<div class="line"><span class="lineno"> 2397</span>            1 - pred_decision[2][2] + pred_decision[2][3],</div>
<div class="line"><span class="lineno"> 2398</span>            1 - pred_decision[3][1] + pred_decision[3][2],</div>
<div class="line"><span class="lineno"> 2399</span>            1 - pred_decision[4][2] + pred_decision[4][3],</div>
<div class="line"><span class="lineno"> 2400</span>        ]</div>
<div class="line"><span class="lineno"> 2401</span>    )</div>
<div class="line"><span class="lineno"> 2402</span>    np.clip(dummy_losses, 0, <span class="keywordtype">None</span>, out=dummy_losses)</div>
<div class="line"><span class="lineno"> 2403</span>    dummy_hinge_loss = np.mean(dummy_losses)</div>
<div class="line"><span class="lineno"> 2404</span>    <span class="keyword">assert</span> hinge_loss(y_true, pred_decision, labels=labels) == dummy_hinge_loss</div>
<div class="line"><span class="lineno"> 2405</span> </div>
<div class="line"><span class="lineno"> 2406</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0fb149b42a451a3392a9686d11d7f1d1" name="a0fb149b42a451a3392a9686d11d7f1d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fb149b42a451a3392a9686d11d7f1d1">&#9670;&#160;</a></span>test_jaccard_score_validation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_jaccard_score_validation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1350</span><span class="keyword">def </span>test_jaccard_score_validation():</div>
<div class="line"><span class="lineno"> 1351</span>    y_true = np.array([0, 1, 0, 1, 1])</div>
<div class="line"><span class="lineno"> 1352</span>    y_pred = np.array([0, 1, 0, 1, 1])</div>
<div class="line"><span class="lineno"> 1353</span>    err_msg = <span class="stringliteral">r&quot;pos_label=2 is not a valid label. It should be one of \[0, 1\]&quot;</span></div>
<div class="line"><span class="lineno"> 1354</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1355</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;binary&quot;</span>, pos_label=2)</div>
<div class="line"><span class="lineno"> 1356</span> </div>
<div class="line"><span class="lineno"> 1357</span>    y_true = np.array([[0, 1, 1], [1, 0, 0]])</div>
<div class="line"><span class="lineno"> 1358</span>    y_pred = np.array([[1, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1359</span>    msg1 = (</div>
<div class="line"><span class="lineno"> 1360</span>        <span class="stringliteral">r&quot;Target is multilabel-indicator but average=&#39;binary&#39;. &quot;</span></div>
<div class="line"><span class="lineno"> 1361</span>        <span class="stringliteral">r&quot;Please choose another average setting, one of \[None, &quot;</span></div>
<div class="line"><span class="lineno"> 1362</span>        <span class="stringliteral">r&quot;&#39;micro&#39;, &#39;macro&#39;, &#39;weighted&#39;, &#39;samples&#39;\].&quot;</span></div>
<div class="line"><span class="lineno"> 1363</span>    )</div>
<div class="line"><span class="lineno"> 1364</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg1):</div>
<div class="line"><span class="lineno"> 1365</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;binary&quot;</span>, pos_label=-1)</div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span>    y_true = np.array([0, 1, 1, 0, 2])</div>
<div class="line"><span class="lineno"> 1368</span>    y_pred = np.array([1, 1, 1, 1, 0])</div>
<div class="line"><span class="lineno"> 1369</span>    msg2 = (</div>
<div class="line"><span class="lineno"> 1370</span>        <span class="stringliteral">r&quot;Target is multiclass but average=&#39;binary&#39;. Please choose &quot;</span></div>
<div class="line"><span class="lineno"> 1371</span>        <span class="stringliteral">r&quot;another average setting, one of \[None, &#39;micro&#39;, &#39;macro&#39;, &quot;</span></div>
<div class="line"><span class="lineno"> 1372</span>        <span class="stringliteral">r&quot;&#39;weighted&#39;\].&quot;</span></div>
<div class="line"><span class="lineno"> 1373</span>    )</div>
<div class="line"><span class="lineno"> 1374</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg2):</div>
<div class="line"><span class="lineno"> 1375</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;binary&quot;</span>)</div>
<div class="line"><span class="lineno"> 1376</span>    msg3 = <span class="stringliteral">&quot;Samplewise metrics are not available outside of multilabel classification.&quot;</span></div>
<div class="line"><span class="lineno"> 1377</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg3):</div>
<div class="line"><span class="lineno"> 1378</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno"> 1379</span> </div>
<div class="line"><span class="lineno"> 1380</span>    msg = (</div>
<div class="line"><span class="lineno"> 1381</span>        <span class="stringliteral">r&quot;Note that pos_label \&zwj;(set to 3\&zwj;) is ignored when &quot;</span></div>
<div class="line"><span class="lineno"> 1382</span>        <span class="stringliteral">r&quot;average != &#39;binary&#39; \&zwj;(got &#39;micro&#39;\&zwj;). You may use &quot;</span></div>
<div class="line"><span class="lineno"> 1383</span>        <span class="stringliteral">r&quot;labels=\[pos_label\] to specify a single positive &quot;</span></div>
<div class="line"><span class="lineno"> 1384</span>        <span class="stringliteral">&quot;class.&quot;</span></div>
<div class="line"><span class="lineno"> 1385</span>    )</div>
<div class="line"><span class="lineno"> 1386</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=msg):</div>
<div class="line"><span class="lineno"> 1387</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;micro&quot;</span>, pos_label=3)</div>
<div class="line"><span class="lineno"> 1388</span> </div>
<div class="line"><span class="lineno"> 1389</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a469b28dac684af459ddc26f2c9cc2e95" name="a469b28dac684af459ddc26f2c9cc2e95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469b28dac684af459ddc26f2c9cc2e95">&#9670;&#160;</a></span>test_jaccard_score_zero_division_set_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_jaccard_score_zero_division_set_value </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1543</span><span class="keyword">def </span>test_jaccard_score_zero_division_set_value(zero_division, expected_score):</div>
<div class="line"><span class="lineno"> 1544</span>    <span class="comment"># check that we don&#39;t issue warning by passing the zero_division parameter</span></div>
<div class="line"><span class="lineno"> 1545</span>    y_true = np.array([[1, 0, 1], [0, 0, 0]])</div>
<div class="line"><span class="lineno"> 1546</span>    y_pred = np.array([[0, 0, 0], [0, 0, 0]])</div>
<div class="line"><span class="lineno"> 1547</span>    <span class="keyword">with</span> warnings.catch_warnings():</div>
<div class="line"><span class="lineno"> 1548</span>        warnings.simplefilter(<span class="stringliteral">&quot;error&quot;</span>, UndefinedMetricWarning)</div>
<div class="line"><span class="lineno"> 1549</span>        score = jaccard_score(</div>
<div class="line"><span class="lineno"> 1550</span>            y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1551</span>        )</div>
<div class="line"><span class="lineno"> 1552</span>    <span class="keyword">assert</span> score == pytest.approx(expected_score)</div>
<div class="line"><span class="lineno"> 1553</span> </div>
<div class="line"><span class="lineno"> 1554</span> </div>
<div class="line"><span class="lineno"> 1555</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f3a44bfb5b2d5f05171b13d5663647d" name="a3f3a44bfb5b2d5f05171b13d5663647d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f3a44bfb5b2d5f05171b13d5663647d">&#9670;&#160;</a></span>test_jaccard_score_zero_division_warning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_jaccard_score_zero_division_warning </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1527</span><span class="keyword">def </span>test_jaccard_score_zero_division_warning():</div>
<div class="line"><span class="lineno"> 1528</span>    <span class="comment"># check that we raised a warning with default behavior if a zero division</span></div>
<div class="line"><span class="lineno"> 1529</span>    <span class="comment"># happens</span></div>
<div class="line"><span class="lineno"> 1530</span>    y_true = np.array([[1, 0, 1], [0, 0, 0]])</div>
<div class="line"><span class="lineno"> 1531</span>    y_pred = np.array([[0, 0, 0], [0, 0, 0]])</div>
<div class="line"><span class="lineno"> 1532</span>    msg = (</div>
<div class="line"><span class="lineno"> 1533</span>        <span class="stringliteral">&quot;Jaccard is ill-defined and being set to 0.0 in &quot;</span></div>
<div class="line"><span class="lineno"> 1534</span>        <span class="stringliteral">&quot;samples with no true or predicted labels.&quot;</span></div>
<div class="line"><span class="lineno"> 1535</span>        <span class="stringliteral">&quot; Use `zero_division` parameter to control this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1536</span>    )</div>
<div class="line"><span class="lineno"> 1537</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=msg):</div>
<div class="line"><span class="lineno"> 1538</span>        score = jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>, zero_division=<span class="stringliteral">&quot;warn&quot;</span>)</div>
<div class="line"><span class="lineno"> 1539</span>        <span class="keyword">assert</span> score == pytest.approx(0.0)</div>
<div class="line"><span class="lineno"> 1540</span> </div>
<div class="line"><span class="lineno"> 1541</span> </div>
<div class="line"><span class="lineno"> 1542</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division, expected_score&quot;, [(0, 0)</span>, (1, 0.5)])</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa87e3887579016432eebdc59d789406a" name="aa87e3887579016432eebdc59d789406a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa87e3887579016432eebdc59d789406a">&#9670;&#160;</a></span>test_likelihood_ratios()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_likelihood_ratios </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  678</span><span class="keyword">def </span>test_likelihood_ratios():</div>
<div class="line"><span class="lineno">  679</span>    <span class="comment"># Build confusion matrix with tn=9, fp=8, fn=1, tp=2,</span></div>
<div class="line"><span class="lineno">  680</span>    <span class="comment"># sensitivity=2/3, specificity=9/17, prevalence=3/20,</span></div>
<div class="line"><span class="lineno">  681</span>    <span class="comment"># LR+=34/24, LR-=17/27</span></div>
<div class="line"><span class="lineno">  682</span>    y_true = np.array([1] * 3 + [0] * 17)</div>
<div class="line"><span class="lineno">  683</span>    y_pred = np.array([1] * 2 + [0] * 10 + [1] * 8)</div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span>    pos, neg = class_likelihood_ratios(y_true, y_pred)</div>
<div class="line"><span class="lineno">  686</span>    assert_allclose(pos, 34 / 24)</div>
<div class="line"><span class="lineno">  687</span>    assert_allclose(neg, 17 / 27)</div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>    <span class="comment"># Build limit case with y_pred = y_true</span></div>
<div class="line"><span class="lineno">  690</span>    pos, neg = class_likelihood_ratios(y_true, y_true)</div>
<div class="line"><span class="lineno">  691</span>    assert_array_equal(pos, np.nan * 2)</div>
<div class="line"><span class="lineno">  692</span>    assert_allclose(neg, np.zeros(2), rtol=1e-12)</div>
<div class="line"><span class="lineno">  693</span> </div>
<div class="line"><span class="lineno">  694</span>    <span class="comment"># Ignore last 5 samples to get tn=9, fp=3, fn=1, tp=2,</span></div>
<div class="line"><span class="lineno">  695</span>    <span class="comment"># sensitivity=2/3, specificity=9/12, prevalence=3/20,</span></div>
<div class="line"><span class="lineno">  696</span>    <span class="comment"># LR+=24/9, LR-=12/27</span></div>
<div class="line"><span class="lineno">  697</span>    sample_weight = np.array([1.0] * 15 + [0.0] * 5)</div>
<div class="line"><span class="lineno">  698</span>    pos, neg = class_likelihood_ratios(y_true, y_pred, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno">  699</span>    assert_allclose(pos, 24 / 9)</div>
<div class="line"><span class="lineno">  700</span>    assert_allclose(neg, 12 / 27)</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a651170b189d193bd398c6e90d91db55c" name="a651170b189d193bd398c6e90d91db55c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a651170b189d193bd398c6e90d91db55c">&#9670;&#160;</a></span>test_likelihood_ratios_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_likelihood_ratios_errors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>err_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  671</span><span class="keyword">def </span>test_likelihood_ratios_errors(params, err_msg):</div>
<div class="line"><span class="lineno">  672</span>    <span class="comment"># likelihood_ratios must raise error when attempting</span></div>
<div class="line"><span class="lineno">  673</span>    <span class="comment"># non-binary classes to avoid Simpson&#39;s paradox</span></div>
<div class="line"><span class="lineno">  674</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  675</span>        class_likelihood_ratios(**params)</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae645cf4fda35b0db7ca257bc3d3fd7a7" name="ae645cf4fda35b0db7ca257bc3d3fd7a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae645cf4fda35b0db7ca257bc3d3fd7a7">&#9670;&#160;</a></span>test_likelihood_ratios_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_likelihood_ratios_warnings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>warn_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  650</span><span class="keyword">def </span>test_likelihood_ratios_warnings(params, warn_msg):</div>
<div class="line"><span class="lineno">  651</span>    <span class="comment"># likelihood_ratios must raise warnings when at</span></div>
<div class="line"><span class="lineno">  652</span>    <span class="comment"># least one of the ratios is ill-defined.</span></div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=warn_msg):</div>
<div class="line"><span class="lineno">  655</span>        class_likelihood_ratios(**params)</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  659</span>    <span class="stringliteral">&quot;params, err_msg&quot;</span>,</div>
<div class="line"><span class="lineno">  660</span>    [</div>
<div class="line"><span class="lineno">  661</span>        (</div>
<div class="line"><span class="lineno">  662</span>            {</div>
<div class="line"><span class="lineno">  663</span>                <span class="stringliteral">&quot;y_true&quot;</span>: np.array([0, 1, 0, 1, 0]),</div>
<div class="line"><span class="lineno">  664</span>                <span class="stringliteral">&quot;y_pred&quot;</span>: np.array([1, 1, 0, 0, 2]),</div>
<div class="line"><span class="lineno">  665</span>            },</div>
<div class="line"><span class="lineno">  666</span>            <span class="stringliteral">&quot;class_likelihood_ratios only supports binary classification &quot;</span></div>
<div class="line"><span class="lineno">  667</span>            <span class="stringliteral">&quot;problems, got targets of type: multiclass&quot;</span>,</div>
<div class="line"><span class="lineno">  668</span>        ),</div>
<div class="line"><span class="lineno">  669</span>    ],</div>
<div class="line"><span class="lineno">  670</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb99d116b8e2ff8e09459fc754076fda" name="acb99d116b8e2ff8e09459fc754076fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb99d116b8e2ff8e09459fc754076fda">&#9670;&#160;</a></span>test_log_loss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_log_loss </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2467</span><span class="keyword">def </span>test_log_loss():</div>
<div class="line"><span class="lineno"> 2468</span>    <span class="comment"># binary case with symbolic labels (&quot;no&quot; &lt; &quot;yes&quot;)</span></div>
<div class="line"><span class="lineno"> 2469</span>    y_true = [<span class="stringliteral">&quot;no&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>]</div>
<div class="line"><span class="lineno"> 2470</span>    y_pred = np.array(</div>
<div class="line"><span class="lineno"> 2471</span>        [[0.5, 0.5], [0.1, 0.9], [0.01, 0.99], [0.9, 0.1], [0.75, 0.25], [0.001, 0.999]]</div>
<div class="line"><span class="lineno"> 2472</span>    )</div>
<div class="line"><span class="lineno"> 2473</span>    loss = log_loss(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2474</span>    loss_true = -np.mean(bernoulli.logpmf(np.array(y_true) == <span class="stringliteral">&quot;yes&quot;</span>, y_pred[:, 1]))</div>
<div class="line"><span class="lineno"> 2475</span>    assert_almost_equal(loss, loss_true)</div>
<div class="line"><span class="lineno"> 2476</span> </div>
<div class="line"><span class="lineno"> 2477</span>    <span class="comment"># multiclass case; adapted from http://bit.ly/RJJHWA</span></div>
<div class="line"><span class="lineno"> 2478</span>    y_true = [1, 0, 2]</div>
<div class="line"><span class="lineno"> 2479</span>    y_pred = [[0.2, 0.7, 0.1], [0.6, 0.2, 0.2], [0.6, 0.1, 0.3]]</div>
<div class="line"><span class="lineno"> 2480</span>    loss = log_loss(y_true, y_pred, normalize=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 2481</span>    assert_almost_equal(loss, 0.6904911)</div>
<div class="line"><span class="lineno"> 2482</span> </div>
<div class="line"><span class="lineno"> 2483</span>    <span class="comment"># check that we got all the shapes and axes right</span></div>
<div class="line"><span class="lineno"> 2484</span>    <span class="comment"># by doubling the length of y_true and y_pred</span></div>
<div class="line"><span class="lineno"> 2485</span>    y_true *= 2</div>
<div class="line"><span class="lineno"> 2486</span>    y_pred *= 2</div>
<div class="line"><span class="lineno"> 2487</span>    loss = log_loss(y_true, y_pred, normalize=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 2488</span>    assert_almost_equal(loss, 0.6904911 * 6, decimal=6)</div>
<div class="line"><span class="lineno"> 2489</span> </div>
<div class="line"><span class="lineno"> 2490</span>    <span class="comment"># check eps and handling of absolute zero and one probabilities</span></div>
<div class="line"><span class="lineno"> 2491</span>    y_pred = np.asarray(y_pred) &gt; 0.5</div>
<div class="line"><span class="lineno"> 2492</span>    loss = log_loss(y_true, y_pred, normalize=<span class="keyword">True</span>, eps=0.1)</div>
<div class="line"><span class="lineno"> 2493</span>    assert_almost_equal(loss, log_loss(y_true, np.clip(y_pred, 0.1, 0.9)))</div>
<div class="line"><span class="lineno"> 2494</span> </div>
<div class="line"><span class="lineno"> 2495</span>    <span class="comment"># binary case: check correct boundary values for eps = 0</span></div>
<div class="line"><span class="lineno"> 2496</span>    <span class="keyword">assert</span> log_loss([0, 1], [0, 1], eps=0) == 0</div>
<div class="line"><span class="lineno"> 2497</span>    <span class="keyword">assert</span> log_loss([0, 1], [0, 0], eps=0) == np.inf</div>
<div class="line"><span class="lineno"> 2498</span>    <span class="keyword">assert</span> log_loss([0, 1], [1, 1], eps=0) == np.inf</div>
<div class="line"><span class="lineno"> 2499</span> </div>
<div class="line"><span class="lineno"> 2500</span>    <span class="comment"># multiclass case: check correct boundary values for eps = 0</span></div>
<div class="line"><span class="lineno"> 2501</span>    <span class="keyword">assert</span> log_loss([0, 1, 2], [[1, 0, 0], [0, 1, 0], [0, 0, 1]], eps=0) == 0</div>
<div class="line"><span class="lineno"> 2502</span>    <span class="keyword">assert</span> log_loss([0, 1, 2], [[0, 0.5, 0.5], [0, 1, 0], [0, 0, 1]], eps=0) == np.inf</div>
<div class="line"><span class="lineno"> 2503</span> </div>
<div class="line"><span class="lineno"> 2504</span>    <span class="comment"># raise error if number of classes are not equal.</span></div>
<div class="line"><span class="lineno"> 2505</span>    y_true = [1, 0, 2]</div>
<div class="line"><span class="lineno"> 2506</span>    y_pred = [[0.2, 0.7], [0.6, 0.5], [0.4, 0.1]]</div>
<div class="line"><span class="lineno"> 2507</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 2508</span>        log_loss(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2509</span> </div>
<div class="line"><span class="lineno"> 2510</span>    <span class="comment"># case when y_true is a string array object</span></div>
<div class="line"><span class="lineno"> 2511</span>    y_true = [<span class="stringliteral">&quot;ham&quot;</span>, <span class="stringliteral">&quot;spam&quot;</span>, <span class="stringliteral">&quot;spam&quot;</span>, <span class="stringliteral">&quot;ham&quot;</span>]</div>
<div class="line"><span class="lineno"> 2512</span>    y_pred = [[0.2, 0.7], [0.6, 0.5], [0.4, 0.1], [0.7, 0.2]]</div>
<div class="line"><span class="lineno"> 2513</span>    loss = log_loss(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2514</span>    assert_almost_equal(loss, 1.0383217, decimal=6)</div>
<div class="line"><span class="lineno"> 2515</span> </div>
<div class="line"><span class="lineno"> 2516</span>    <span class="comment"># test labels option</span></div>
<div class="line"><span class="lineno"> 2517</span> </div>
<div class="line"><span class="lineno"> 2518</span>    y_true = [2, 2]</div>
<div class="line"><span class="lineno"> 2519</span>    y_pred = [[0.2, 0.7], [0.6, 0.5]]</div>
<div class="line"><span class="lineno"> 2520</span>    y_score = np.array([[0.1, 0.9], [0.1, 0.9]])</div>
<div class="line"><span class="lineno"> 2521</span>    error_str = (</div>
<div class="line"><span class="lineno"> 2522</span>        <span class="stringliteral">r&quot;y_true contains only one label \&zwj;(2\&zwj;). Please provide &quot;</span></div>
<div class="line"><span class="lineno"> 2523</span>        <span class="stringliteral">r&quot;the true labels explicitly through the labels argument.&quot;</span></div>
<div class="line"><span class="lineno"> 2524</span>    )</div>
<div class="line"><span class="lineno"> 2525</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=error_str):</div>
<div class="line"><span class="lineno"> 2526</span>        log_loss(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2527</span> </div>
<div class="line"><span class="lineno"> 2528</span>    y_pred = [[0.2, 0.7], [0.6, 0.5], [0.2, 0.3]]</div>
<div class="line"><span class="lineno"> 2529</span>    error_str = <span class="stringliteral">&quot;Found input variables with inconsistent numbers of samples: [3, 2]&quot;</span></div>
<div class="line"><span class="lineno"> 2530</span>    (ValueError, error_str, log_loss, y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2531</span> </div>
<div class="line"><span class="lineno"> 2532</span>    <span class="comment"># works when the labels argument is used</span></div>
<div class="line"><span class="lineno"> 2533</span> </div>
<div class="line"><span class="lineno"> 2534</span>    true_log_loss = -np.mean(np.log(y_score[:, 1]))</div>
<div class="line"><span class="lineno"> 2535</span>    calculated_log_loss = log_loss(y_true, y_score, labels=[1, 2])</div>
<div class="line"><span class="lineno"> 2536</span>    assert_almost_equal(calculated_log_loss, true_log_loss)</div>
<div class="line"><span class="lineno"> 2537</span> </div>
<div class="line"><span class="lineno"> 2538</span>    <span class="comment"># ensure labels work when len(np.unique(y_true)) != y_pred.shape[1]</span></div>
<div class="line"><span class="lineno"> 2539</span>    y_true = [1, 2, 2]</div>
<div class="line"><span class="lineno"> 2540</span>    y_score2 = [[0.2, 0.7, 0.3], [0.6, 0.5, 0.3], [0.3, 0.9, 0.1]]</div>
<div class="line"><span class="lineno"> 2541</span>    loss = log_loss(y_true, y_score2, labels=[1, 2, 3])</div>
<div class="line"><span class="lineno"> 2542</span>    assert_almost_equal(loss, 1.0630345, decimal=6)</div>
<div class="line"><span class="lineno"> 2543</span> </div>
<div class="line"><span class="lineno"> 2544</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad970200c3718a45251bf460bdf567f6d" name="ad970200c3718a45251bf460bdf567f6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad970200c3718a45251bf460bdf567f6d">&#9670;&#160;</a></span>test_log_loss_eps_auto()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_log_loss_eps_auto </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_dtype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the behaviour of `eps="auto"` that changes depending on the input
array dtype.
Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/24315
</pre> <div class="fragment"><div class="line"><span class="lineno"> 2545</span><span class="keyword">def </span>test_log_loss_eps_auto(global_dtype):</div>
<div class="line"><span class="lineno"> 2546</span>    <span class="stringliteral">&quot;&quot;&quot;Check the behaviour of `eps=&quot;auto&quot;` that changes depending on the input</span></div>
<div class="line"><span class="lineno"> 2547</span><span class="stringliteral">    array dtype.</span></div>
<div class="line"><span class="lineno"> 2548</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 2549</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/24315</span></div>
<div class="line"><span class="lineno"> 2550</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2551</span>    y_true = np.array([0, 1], dtype=global_dtype)</div>
<div class="line"><span class="lineno"> 2552</span>    y_pred = y_true.copy()</div>
<div class="line"><span class="lineno"> 2553</span> </div>
<div class="line"><span class="lineno"> 2554</span>    loss = log_loss(y_true, y_pred, eps=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno"> 2555</span>    <span class="keyword">assert</span> np.isfinite(loss)</div>
<div class="line"><span class="lineno"> 2556</span> </div>
<div class="line"><span class="lineno"> 2557</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad80611e396446e7d5c0b61b0da175410" name="ad80611e396446e7d5c0b61b0da175410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad80611e396446e7d5c0b61b0da175410">&#9670;&#160;</a></span>test_log_loss_eps_auto_float16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_log_loss_eps_auto_float16 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the behaviour of `eps="auto"` for np.float16</pre> <div class="fragment"><div class="line"><span class="lineno"> 2558</span><span class="keyword">def </span>test_log_loss_eps_auto_float16():</div>
<div class="line"><span class="lineno"> 2559</span>    <span class="stringliteral">&quot;&quot;&quot;Check the behaviour of `eps=&quot;auto&quot;` for np.float16&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2560</span>    y_true = np.array([0, 1], dtype=np.float16)</div>
<div class="line"><span class="lineno"> 2561</span>    y_pred = y_true.copy()</div>
<div class="line"><span class="lineno"> 2562</span> </div>
<div class="line"><span class="lineno"> 2563</span>    loss = log_loss(y_true, y_pred, eps=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno"> 2564</span>    <span class="keyword">assert</span> np.isfinite(loss)</div>
<div class="line"><span class="lineno"> 2565</span> </div>
<div class="line"><span class="lineno"> 2566</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="acd491c5d9925804823768b060f1f1046" name="acd491c5d9925804823768b060f1f1046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd491c5d9925804823768b060f1f1046">&#9670;&#160;</a></span>test_log_loss_pandas_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_log_loss_pandas_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2567</span><span class="keyword">def </span>test_log_loss_pandas_input():</div>
<div class="line"><span class="lineno"> 2568</span>    <span class="comment"># case when input is a pandas series and dataframe gh-5715</span></div>
<div class="line"><span class="lineno"> 2569</span>    y_tr = np.array([<span class="stringliteral">&quot;ham&quot;</span>, <span class="stringliteral">&quot;spam&quot;</span>, <span class="stringliteral">&quot;spam&quot;</span>, <span class="stringliteral">&quot;ham&quot;</span>])</div>
<div class="line"><span class="lineno"> 2570</span>    y_pr = np.array([[0.2, 0.7], [0.6, 0.5], [0.4, 0.1], [0.7, 0.2]])</div>
<div class="line"><span class="lineno"> 2571</span>    types = [(MockDataFrame, MockDataFrame)]</div>
<div class="line"><span class="lineno"> 2572</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 2573</span>        <span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div>
<div class="line"><span class="lineno"> 2574</span> </div>
<div class="line"><span class="lineno"> 2575</span>        types.append((Series, DataFrame))</div>
<div class="line"><span class="lineno"> 2576</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno"> 2577</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 2578</span>    <span class="keywordflow">for</span> TrueInputType, PredInputType <span class="keywordflow">in</span> types:</div>
<div class="line"><span class="lineno"> 2579</span>        <span class="comment"># y_pred dataframe, y_true series</span></div>
<div class="line"><span class="lineno"> 2580</span>        y_true, y_pred = TrueInputType(y_tr), PredInputType(y_pr)</div>
<div class="line"><span class="lineno"> 2581</span>        loss = log_loss(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2582</span>        assert_almost_equal(loss, 1.0383217, decimal=6)</div>
<div class="line"><span class="lineno"> 2583</span> </div>
<div class="line"><span class="lineno"> 2584</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a50db98c1a32a724de065fc13fafef167" name="a50db98c1a32a724de065fc13fafef167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50db98c1a32a724de065fc13fafef167">&#9670;&#160;</a></span>test_matthews_corrcoef()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_matthews_corrcoef </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  788</span><span class="keyword">def </span>test_matthews_corrcoef():</div>
<div class="line"><span class="lineno">  789</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  790</span>    y_true = [<span class="stringliteral">&quot;a&quot;</span> <span class="keywordflow">if</span> i == 0 <span class="keywordflow">else</span> <span class="stringliteral">&quot;b&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> rng.randint(0, 2, size=20)]</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>    <span class="comment"># corrcoef of same vectors must be 1</span></div>
<div class="line"><span class="lineno">  793</span>    assert_almost_equal(matthews_corrcoef(y_true, y_true), 1.0)</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>    <span class="comment"># corrcoef, when the two vectors are opposites of each other, should be -1</span></div>
<div class="line"><span class="lineno">  796</span>    y_true_inv = [<span class="stringliteral">&quot;b&quot;</span> <span class="keywordflow">if</span> i == <span class="stringliteral">&quot;a&quot;</span> <span class="keywordflow">else</span> <span class="stringliteral">&quot;a&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> y_true]</div>
<div class="line"><span class="lineno">  797</span>    assert_almost_equal(matthews_corrcoef(y_true, y_true_inv), -1)</div>
<div class="line"><span class="lineno">  798</span> </div>
<div class="line"><span class="lineno">  799</span>    y_true_inv2 = label_binarize(y_true, classes=[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>])</div>
<div class="line"><span class="lineno">  800</span>    y_true_inv2 = np.where(y_true_inv2, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>)</div>
<div class="line"><span class="lineno">  801</span>    assert_almost_equal(matthews_corrcoef(y_true, y_true_inv2), -1)</div>
<div class="line"><span class="lineno">  802</span> </div>
<div class="line"><span class="lineno">  803</span>    <span class="comment"># For the zero vector case, the corrcoef cannot be calculated and should</span></div>
<div class="line"><span class="lineno">  804</span>    <span class="comment"># output 0</span></div>
<div class="line"><span class="lineno">  805</span>    assert_almost_equal(matthews_corrcoef([0, 0, 0, 0], [0, 0, 0, 0]), 0.0)</div>
<div class="line"><span class="lineno">  806</span> </div>
<div class="line"><span class="lineno">  807</span>    <span class="comment"># And also for any other vector with 0 variance</span></div>
<div class="line"><span class="lineno">  808</span>    assert_almost_equal(matthews_corrcoef(y_true, [<span class="stringliteral">&quot;a&quot;</span>] * len(y_true)), 0.0)</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    <span class="comment"># These two vectors have 0 correlation and hence mcc should be 0</span></div>
<div class="line"><span class="lineno">  811</span>    y_1 = [1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1]</div>
<div class="line"><span class="lineno">  812</span>    y_2 = [1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1]</div>
<div class="line"><span class="lineno">  813</span>    assert_almost_equal(matthews_corrcoef(y_1, y_2), 0.0)</div>
<div class="line"><span class="lineno">  814</span> </div>
<div class="line"><span class="lineno">  815</span>    <span class="comment"># Check that sample weight is able to selectively exclude</span></div>
<div class="line"><span class="lineno">  816</span>    mask = [1] * 10 + [0] * 10</div>
<div class="line"><span class="lineno">  817</span>    <span class="comment"># Now the first half of the vector elements are alone given a weight of 1</span></div>
<div class="line"><span class="lineno">  818</span>    <span class="comment"># and hence the mcc will not be a perfect 0 as in the previous case</span></div>
<div class="line"><span class="lineno">  819</span>    <span class="keyword">with</span> pytest.raises(AssertionError):</div>
<div class="line"><span class="lineno">  820</span>        assert_almost_equal(matthews_corrcoef(y_1, y_2, sample_weight=mask), 0.0)</div>
<div class="line"><span class="lineno">  821</span> </div>
<div class="line"><span class="lineno">  822</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a91302840d9a231768e74518c95863e52" name="a91302840d9a231768e74518c95863e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91302840d9a231768e74518c95863e52">&#9670;&#160;</a></span>test_matthews_corrcoef_against_jurman()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_matthews_corrcoef_against_jurman </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  749</span><span class="keyword">def </span>test_matthews_corrcoef_against_jurman():</div>
<div class="line"><span class="lineno">  750</span>    <span class="comment"># Check that the multiclass matthews_corrcoef agrees with the definition</span></div>
<div class="line"><span class="lineno">  751</span>    <span class="comment"># presented in Jurman, Riccadonna, Furlanello, (2012). A Comparison of MCC</span></div>
<div class="line"><span class="lineno">  752</span>    <span class="comment"># and CEN Error Measures in MultiClass Prediction</span></div>
<div class="line"><span class="lineno">  753</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  754</span>    y_true = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno">  755</span>    y_pred = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno">  756</span>    sample_weight = rng.rand(20)</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>    C = confusion_matrix(y_true, y_pred, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno">  759</span>    N = len(C)</div>
<div class="line"><span class="lineno">  760</span>    cov_ytyp = sum(</div>
<div class="line"><span class="lineno">  761</span>        [</div>
<div class="line"><span class="lineno">  762</span>            C[k, k] * C[m, l] - C[l, k] * C[k, m]</div>
<div class="line"><span class="lineno">  763</span>            <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(N)</div>
<div class="line"><span class="lineno">  764</span>            <span class="keywordflow">for</span> m <span class="keywordflow">in</span> range(N)</div>
<div class="line"><span class="lineno">  765</span>            <span class="keywordflow">for</span> l <span class="keywordflow">in</span> range(N)</div>
<div class="line"><span class="lineno">  766</span>        ]</div>
<div class="line"><span class="lineno">  767</span>    )</div>
<div class="line"><span class="lineno">  768</span>    cov_ytyt = sum(</div>
<div class="line"><span class="lineno">  769</span>        [</div>
<div class="line"><span class="lineno">  770</span>            C[:, k].sum()</div>
<div class="line"><span class="lineno">  771</span>            * np.sum([C[g, f] <span class="keywordflow">for</span> f <span class="keywordflow">in</span> range(N) <span class="keywordflow">for</span> g <span class="keywordflow">in</span> range(N) <span class="keywordflow">if</span> f != k])</div>
<div class="line"><span class="lineno">  772</span>            <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(N)</div>
<div class="line"><span class="lineno">  773</span>        ]</div>
<div class="line"><span class="lineno">  774</span>    )</div>
<div class="line"><span class="lineno">  775</span>    cov_ypyp = np.sum(</div>
<div class="line"><span class="lineno">  776</span>        [</div>
<div class="line"><span class="lineno">  777</span>            C[k, :].sum()</div>
<div class="line"><span class="lineno">  778</span>            * np.sum([C[f, g] <span class="keywordflow">for</span> f <span class="keywordflow">in</span> range(N) <span class="keywordflow">for</span> g <span class="keywordflow">in</span> range(N) <span class="keywordflow">if</span> f != k])</div>
<div class="line"><span class="lineno">  779</span>            <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(N)</div>
<div class="line"><span class="lineno">  780</span>        ]</div>
<div class="line"><span class="lineno">  781</span>    )</div>
<div class="line"><span class="lineno">  782</span>    mcc_jurman = cov_ytyp / np.sqrt(cov_ytyt * cov_ypyp)</div>
<div class="line"><span class="lineno">  783</span>    mcc_ours = matthews_corrcoef(y_true, y_pred, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    assert_almost_equal(mcc_ours, mcc_jurman, 10)</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a12d2c2d985836662c8576ab3b838c4d8" name="a12d2c2d985836662c8576ab3b838c4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12d2c2d985836662c8576ab3b838c4d8">&#9670;&#160;</a></span>test_matthews_corrcoef_against_numpy_corrcoef()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_matthews_corrcoef_against_numpy_corrcoef </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  739</span><span class="keyword">def </span>test_matthews_corrcoef_against_numpy_corrcoef():</div>
<div class="line"><span class="lineno">  740</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  741</span>    y_true = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno">  742</span>    y_pred = rng.randint(0, 2, size=20)</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  745</span>        matthews_corrcoef(y_true, y_pred), np.corrcoef(y_true, y_pred)[0, 1], 10</div>
<div class="line"><span class="lineno">  746</span>    )</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a49f6aa7553e5c40163944a054fee55d0" name="a49f6aa7553e5c40163944a054fee55d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49f6aa7553e5c40163944a054fee55d0">&#9670;&#160;</a></span>test_matthews_corrcoef_multiclass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_matthews_corrcoef_multiclass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  823</span><span class="keyword">def </span>test_matthews_corrcoef_multiclass():</div>
<div class="line"><span class="lineno">  824</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  825</span>    ord_a = ord(<span class="stringliteral">&quot;a&quot;</span>)</div>
<div class="line"><span class="lineno">  826</span>    n_classes = 4</div>
<div class="line"><span class="lineno">  827</span>    y_true = [chr(ord_a + i) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> rng.randint(0, n_classes, size=20)]</div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span>    <span class="comment"># corrcoef of same vectors must be 1</span></div>
<div class="line"><span class="lineno">  830</span>    assert_almost_equal(matthews_corrcoef(y_true, y_true), 1.0)</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>    <span class="comment"># with multiclass &gt; 2 it is not possible to achieve -1</span></div>
<div class="line"><span class="lineno">  833</span>    y_true = [0, 0, 1, 1, 2, 2]</div>
<div class="line"><span class="lineno">  834</span>    y_pred_bad = [2, 2, 0, 0, 1, 1]</div>
<div class="line"><span class="lineno">  835</span>    assert_almost_equal(matthews_corrcoef(y_true, y_pred_bad), -0.5)</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>    <span class="comment"># Maximizing false positives and negatives minimizes the MCC</span></div>
<div class="line"><span class="lineno">  838</span>    <span class="comment"># The minimum will be different for depending on the input</span></div>
<div class="line"><span class="lineno">  839</span>    y_true = [0, 0, 1, 1, 2, 2]</div>
<div class="line"><span class="lineno">  840</span>    y_pred_min = [1, 1, 0, 0, 0, 0]</div>
<div class="line"><span class="lineno">  841</span>    assert_almost_equal(matthews_corrcoef(y_true, y_pred_min), -12 / np.sqrt(24 * 16))</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>    <span class="comment"># Zero variance will result in an mcc of zero</span></div>
<div class="line"><span class="lineno">  844</span>    y_true = [0, 1, 2]</div>
<div class="line"><span class="lineno">  845</span>    y_pred = [3, 3, 3]</div>
<div class="line"><span class="lineno">  846</span>    assert_almost_equal(matthews_corrcoef(y_true, y_pred), 0.0)</div>
<div class="line"><span class="lineno">  847</span> </div>
<div class="line"><span class="lineno">  848</span>    <span class="comment"># Also for ground truth with zero variance</span></div>
<div class="line"><span class="lineno">  849</span>    y_true = [3, 3, 3]</div>
<div class="line"><span class="lineno">  850</span>    y_pred = [0, 1, 2]</div>
<div class="line"><span class="lineno">  851</span>    assert_almost_equal(matthews_corrcoef(y_true, y_pred), 0.0)</div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span>    <span class="comment"># These two vectors have 0 correlation and hence mcc should be 0</span></div>
<div class="line"><span class="lineno">  854</span>    y_1 = [0, 1, 2, 0, 1, 2, 0, 1, 2]</div>
<div class="line"><span class="lineno">  855</span>    y_2 = [1, 1, 1, 2, 2, 2, 0, 0, 0]</div>
<div class="line"><span class="lineno">  856</span>    assert_almost_equal(matthews_corrcoef(y_1, y_2), 0.0)</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>    <span class="comment"># We can test that binary assumptions hold using the multiclass computation</span></div>
<div class="line"><span class="lineno">  859</span>    <span class="comment"># by masking the weight of samples not in the first two classes</span></div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>    <span class="comment"># Masking the last label should let us get an MCC of -1</span></div>
<div class="line"><span class="lineno">  862</span>    y_true = [0, 0, 1, 1, 2]</div>
<div class="line"><span class="lineno">  863</span>    y_pred = [1, 1, 0, 0, 2]</div>
<div class="line"><span class="lineno">  864</span>    sample_weight = [1, 1, 1, 1, 0]</div>
<div class="line"><span class="lineno">  865</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  866</span>        matthews_corrcoef(y_true, y_pred, sample_weight=sample_weight), -1</div>
<div class="line"><span class="lineno">  867</span>    )</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>    <span class="comment"># For the zero vector case, the corrcoef cannot be calculated and should</span></div>
<div class="line"><span class="lineno">  870</span>    <span class="comment"># output 0</span></div>
<div class="line"><span class="lineno">  871</span>    y_true = [0, 0, 1, 2]</div>
<div class="line"><span class="lineno">  872</span>    y_pred = [0, 0, 1, 2]</div>
<div class="line"><span class="lineno">  873</span>    sample_weight = [1, 1, 0, 0]</div>
<div class="line"><span class="lineno">  874</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno">  875</span>        matthews_corrcoef(y_true, y_pred, sample_weight=sample_weight), 0.0</div>
<div class="line"><span class="lineno">  876</span>    )</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span><span class="preprocessor">@pytest.mark.parametrize(&quot;n_points&quot;, [100, 10000])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb6a244c830e89ce3bcc319f2ad607d6" name="adb6a244c830e89ce3bcc319f2ad607d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb6a244c830e89ce3bcc319f2ad607d6">&#9670;&#160;</a></span>test_matthews_corrcoef_nan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_matthews_corrcoef_nan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  734</span><span class="keyword">def </span>test_matthews_corrcoef_nan():</div>
<div class="line"><span class="lineno">  735</span>    <span class="keyword">assert</span> matthews_corrcoef([0], [1]) == 0.0</div>
<div class="line"><span class="lineno">  736</span>    <span class="keyword">assert</span> matthews_corrcoef([0, 0], [0, 1]) == 0.0</div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1f2542143294f54e8b479d60c963b65" name="ac1f2542143294f54e8b479d60c963b65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1f2542143294f54e8b479d60c963b65">&#9670;&#160;</a></span>test_matthews_corrcoef_overflow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_matthews_corrcoef_overflow </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_points</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  880</span><span class="keyword">def </span>test_matthews_corrcoef_overflow(n_points):</div>
<div class="line"><span class="lineno">  881</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/9622</span></div>
<div class="line"><span class="lineno">  882</span>    rng = np.random.RandomState(20170906)</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>    <span class="keyword">def </span>mcc_safe(y_true, y_pred):</div>
<div class="line"><span class="lineno">  885</span>        conf_matrix = confusion_matrix(y_true, y_pred)</div>
<div class="line"><span class="lineno">  886</span>        true_pos = conf_matrix[1, 1]</div>
<div class="line"><span class="lineno">  887</span>        false_pos = conf_matrix[1, 0]</div>
<div class="line"><span class="lineno">  888</span>        false_neg = conf_matrix[0, 1]</div>
<div class="line"><span class="lineno">  889</span>        n_points = len(y_true)</div>
<div class="line"><span class="lineno">  890</span>        pos_rate = (true_pos + false_neg) / n_points</div>
<div class="line"><span class="lineno">  891</span>        activity = (true_pos + false_pos) / n_points</div>
<div class="line"><span class="lineno">  892</span>        mcc_numerator = true_pos / n_points - pos_rate * activity</div>
<div class="line"><span class="lineno">  893</span>        mcc_denominator = activity * pos_rate * (1 - activity) * (1 - pos_rate)</div>
<div class="line"><span class="lineno">  894</span>        <span class="keywordflow">return</span> mcc_numerator / np.sqrt(mcc_denominator)</div>
<div class="line"><span class="lineno">  895</span> </div>
<div class="line"><span class="lineno">  896</span>    <span class="keyword">def </span>random_ys(n_points):  <span class="comment"># binary</span></div>
<div class="line"><span class="lineno">  897</span>        x_true = rng.random_sample(n_points)</div>
<div class="line"><span class="lineno">  898</span>        x_pred = x_true + 0.2 * (rng.random_sample(n_points) - 0.5)</div>
<div class="line"><span class="lineno">  899</span>        y_true = x_true &gt; 0.5</div>
<div class="line"><span class="lineno">  900</span>        y_pred = x_pred &gt; 0.5</div>
<div class="line"><span class="lineno">  901</span>        <span class="keywordflow">return</span> y_true, y_pred</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>    arr = np.repeat([0.0, 1.0], n_points)  <span class="comment"># binary</span></div>
<div class="line"><span class="lineno">  904</span>    assert_almost_equal(matthews_corrcoef(arr, arr), 1.0)</div>
<div class="line"><span class="lineno">  905</span>    arr = np.repeat([0.0, 1.0, 2.0], n_points)  <span class="comment"># multiclass</span></div>
<div class="line"><span class="lineno">  906</span>    assert_almost_equal(matthews_corrcoef(arr, arr), 1.0)</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>    y_true, y_pred = random_ys(n_points)</div>
<div class="line"><span class="lineno">  909</span>    assert_almost_equal(matthews_corrcoef(y_true, y_true), 1.0)</div>
<div class="line"><span class="lineno">  910</span>    assert_almost_equal(matthews_corrcoef(y_true, y_pred), mcc_safe(y_true, y_pred))</div>
<div class="line"><span class="lineno">  911</span> </div>
<div class="line"><span class="lineno">  912</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a081eb61a43afef630f024095c309ac48" name="a081eb61a43afef630f024095c309ac48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a081eb61a43afef630f024095c309ac48">&#9670;&#160;</a></span>test_multiclass_jaccard_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multiclass_jaccard_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>recwarn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1467</span><span class="keyword">def </span>test_multiclass_jaccard_score(recwarn):</div>
<div class="line"><span class="lineno"> 1468</span>    y_true = [<span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;bird&quot;</span>, <span class="stringliteral">&quot;bird&quot;</span>]</div>
<div class="line"><span class="lineno"> 1469</span>    y_pred = [<span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;bird&quot;</span>, <span class="stringliteral">&quot;bird&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>]</div>
<div class="line"><span class="lineno"> 1470</span>    labels = [<span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;bird&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>]</div>
<div class="line"><span class="lineno"> 1471</span>    lb = LabelBinarizer()</div>
<div class="line"><span class="lineno"> 1472</span>    lb.fit(labels)</div>
<div class="line"><span class="lineno"> 1473</span>    y_true_bin = lb.transform(y_true)</div>
<div class="line"><span class="lineno"> 1474</span>    y_pred_bin = lb.transform(y_pred)</div>
<div class="line"><span class="lineno"> 1475</span>    multi_jaccard_score = partial(jaccard_score, y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1476</span>    bin_jaccard_score = partial(jaccard_score, y_true_bin, y_pred_bin)</div>
<div class="line"><span class="lineno"> 1477</span>    multi_labels_list = [</div>
<div class="line"><span class="lineno"> 1478</span>        [<span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;bird&quot;</span>],</div>
<div class="line"><span class="lineno"> 1479</span>        [<span class="stringliteral">&quot;ant&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>],</div>
<div class="line"><span class="lineno"> 1480</span>        [<span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;bird&quot;</span>],</div>
<div class="line"><span class="lineno"> 1481</span>        [<span class="stringliteral">&quot;ant&quot;</span>],</div>
<div class="line"><span class="lineno"> 1482</span>        [<span class="stringliteral">&quot;bird&quot;</span>],</div>
<div class="line"><span class="lineno"> 1483</span>        [<span class="stringliteral">&quot;cat&quot;</span>],</div>
<div class="line"><span class="lineno"> 1484</span>        <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 1485</span>    ]</div>
<div class="line"><span class="lineno"> 1486</span>    bin_labels_list = [[0, 1], [0, 2], [2, 1], [0], [1], [2], <span class="keywordtype">None</span>]</div>
<div class="line"><span class="lineno"> 1487</span> </div>
<div class="line"><span class="lineno"> 1488</span>    <span class="comment"># other than average=&#39;samples&#39;/&#39;none-samples&#39;, test everything else here</span></div>
<div class="line"><span class="lineno"> 1489</span>    <span class="keywordflow">for</span> average <span class="keywordflow">in</span> (<span class="stringliteral">&quot;macro&quot;</span>, <span class="stringliteral">&quot;weighted&quot;</span>, <span class="stringliteral">&quot;micro&quot;</span>, <span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno"> 1490</span>        <span class="keywordflow">for</span> m_label, b_label <span class="keywordflow">in</span> zip(multi_labels_list, bin_labels_list):</div>
<div class="line"><span class="lineno"> 1491</span>            assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1492</span>                multi_jaccard_score(average=average, labels=m_label),</div>
<div class="line"><span class="lineno"> 1493</span>                bin_jaccard_score(average=average, labels=b_label),</div>
<div class="line"><span class="lineno"> 1494</span>            )</div>
<div class="line"><span class="lineno"> 1495</span> </div>
<div class="line"><span class="lineno"> 1496</span>    y_true = np.array([[0, 0], [0, 0], [0, 0]])</div>
<div class="line"><span class="lineno"> 1497</span>    y_pred = np.array([[0, 0], [0, 0], [0, 0]])</div>
<div class="line"><span class="lineno"> 1498</span>    <span class="keyword">with</span> ignore_warnings():</div>
<div class="line"><span class="lineno"> 1499</span>        <span class="keyword">assert</span> jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>) == 0</div>
<div class="line"><span class="lineno"> 1500</span> </div>
<div class="line"><span class="lineno"> 1501</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> list(recwarn)</div>
<div class="line"><span class="lineno"> 1502</span> </div>
<div class="line"><span class="lineno"> 1503</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5101d7842d6577ac46c9605a9e3835e" name="ae5101d7842d6577ac46c9605a9e3835e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5101d7842d6577ac46c9605a9e3835e">&#9670;&#160;</a></span>test_multilabel_accuracy_score_subset_accuracy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_accuracy_score_subset_accuracy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  217</span><span class="keyword">def </span>test_multilabel_accuracy_score_subset_accuracy():</div>
<div class="line"><span class="lineno">  218</span>    <span class="comment"># Dense label indicator matrix format</span></div>
<div class="line"><span class="lineno">  219</span>    y1 = np.array([[0, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno">  220</span>    y2 = np.array([[0, 0, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>    <span class="keyword">assert</span> accuracy_score(y1, y2) == 0.5</div>
<div class="line"><span class="lineno">  223</span>    <span class="keyword">assert</span> accuracy_score(y1, y1) == 1</div>
<div class="line"><span class="lineno">  224</span>    <span class="keyword">assert</span> accuracy_score(y2, y2) == 1</div>
<div class="line"><span class="lineno">  225</span>    <span class="keyword">assert</span> accuracy_score(y2, np.logical_not(y2)) == 0</div>
<div class="line"><span class="lineno">  226</span>    <span class="keyword">assert</span> accuracy_score(y1, np.logical_not(y1)) == 0</div>
<div class="line"><span class="lineno">  227</span>    <span class="keyword">assert</span> accuracy_score(y1, np.zeros(y1.shape)) == 0</div>
<div class="line"><span class="lineno">  228</span>    <span class="keyword">assert</span> accuracy_score(y2, np.zeros(y1.shape)) == 0</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a94ec4a82a84d19166c6c09b5a801ec4f" name="a94ec4a82a84d19166c6c09b5a801ec4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ec4a82a84d19166c6c09b5a801ec4f">&#9670;&#160;</a></span>test_multilabel_classification_report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_classification_report </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1286</span><span class="keyword">def </span>test_multilabel_classification_report():</div>
<div class="line"><span class="lineno"> 1287</span>    n_classes = 4</div>
<div class="line"><span class="lineno"> 1288</span>    n_samples = 50</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>    _, y_true = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 1291</span>        n_features=1, n_samples=n_samples, n_classes=n_classes, random_state=0</div>
<div class="line"><span class="lineno"> 1292</span>    )</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>    _, y_pred = make_multilabel_classification(</div>
<div class="line"><span class="lineno"> 1295</span>        n_features=1, n_samples=n_samples, n_classes=n_classes, random_state=1</div>
<div class="line"><span class="lineno"> 1296</span>    )</div>
<div class="line"><span class="lineno"> 1297</span> </div>
<div class="line"><span class="lineno"> 1298</span>    expected_report = <span class="stringliteral">&quot;&quot;&quot;\</span></div>
<div class="line"><span class="lineno"> 1299</span><span class="stringliteral">              precision    recall  f1-score   support</span></div>
<div class="line"><span class="lineno"> 1300</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1301</span><span class="stringliteral">           0       0.50      0.67      0.57        24</span></div>
<div class="line"><span class="lineno"> 1302</span><span class="stringliteral">           1       0.51      0.74      0.61        27</span></div>
<div class="line"><span class="lineno"> 1303</span><span class="stringliteral">           2       0.29      0.08      0.12        26</span></div>
<div class="line"><span class="lineno"> 1304</span><span class="stringliteral">           3       0.52      0.56      0.54        27</span></div>
<div class="line"><span class="lineno"> 1305</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1306</span><span class="stringliteral">   micro avg       0.50      0.51      0.50       104</span></div>
<div class="line"><span class="lineno"> 1307</span><span class="stringliteral">   macro avg       0.45      0.51      0.46       104</span></div>
<div class="line"><span class="lineno"> 1308</span><span class="stringliteral">weighted avg       0.45      0.51      0.46       104</span></div>
<div class="line"><span class="lineno"> 1309</span><span class="stringliteral"> samples avg       0.46      0.42      0.40       104</span></div>
<div class="line"><span class="lineno"> 1310</span><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>    report = classification_report(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 1313</span>    <span class="keyword">assert</span> report == expected_report</div>
<div class="line"><span class="lineno"> 1314</span> </div>
<div class="line"><span class="lineno"> 1315</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aebff44931492c9c7867afd8f3f11ddd3" name="aebff44931492c9c7867afd8f3f11ddd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebff44931492c9c7867afd8f3f11ddd3">&#9670;&#160;</a></span>test_multilabel_confusion_matrix_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_confusion_matrix_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  444</span><span class="keyword">def </span>test_multilabel_confusion_matrix_binary():</div>
<div class="line"><span class="lineno">  445</span>    <span class="comment"># Test multilabel confusion matrix - binary classification case</span></div>
<div class="line"><span class="lineno">  446</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>    <span class="keyword">def </span><a class="code hl_namespace" href="namespacetest.html">test</a>(y_true, y_pred):</div>
<div class="line"><span class="lineno">  449</span>        cm = multilabel_confusion_matrix(y_true, y_pred)</div>
<div class="line"><span class="lineno">  450</span>        assert_array_equal(cm, [[[17, 8], [3, 22]], [[22, 3], [8, 17]]])</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_namespace" href="namespacetest.html">test</a>(y_true, y_pred)</div>
<div class="line"><span class="lineno">  453</span>    <a class="code hl_namespace" href="namespacetest.html">test</a>([str(y) <span class="keywordflow">for</span> y <span class="keywordflow">in</span> y_true], [str(y) <span class="keywordflow">for</span> y <span class="keywordflow">in</span> y_pred])</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ada6d7abd0d04b0e5f90f481cec19a295" name="ada6d7abd0d04b0e5f90f481cec19a295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada6d7abd0d04b0e5f90f481cec19a295">&#9670;&#160;</a></span>test_multilabel_confusion_matrix_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_confusion_matrix_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  532</span><span class="keyword">def </span>test_multilabel_confusion_matrix_errors():</div>
<div class="line"><span class="lineno">  533</span>    y_true = np.array([[1, 0, 1], [0, 1, 0], [1, 1, 0]])</div>
<div class="line"><span class="lineno">  534</span>    y_pred = np.array([[1, 0, 0], [0, 1, 1], [0, 0, 1]])</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>    <span class="comment"># Bad sample_weight</span></div>
<div class="line"><span class="lineno">  537</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;inconsistent numbers of samples&quot;</span>):</div>
<div class="line"><span class="lineno">  538</span>        multilabel_confusion_matrix(y_true, y_pred, sample_weight=[1, 2])</div>
<div class="line"><span class="lineno">  539</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;should be a 1d array&quot;</span>):</div>
<div class="line"><span class="lineno">  540</span>        multilabel_confusion_matrix(</div>
<div class="line"><span class="lineno">  541</span>            y_true, y_pred, sample_weight=[[1, 2, 3], [2, 3, 4], [3, 4, 5]]</div>
<div class="line"><span class="lineno">  542</span>        )</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>    <span class="comment"># Bad labels</span></div>
<div class="line"><span class="lineno">  545</span>    err_msg = <span class="stringliteral">r&quot;All labels must be in \[0, n labels\&zwj;)&quot;</span></div>
<div class="line"><span class="lineno">  546</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  547</span>        multilabel_confusion_matrix(y_true, y_pred, labels=[-1])</div>
<div class="line"><span class="lineno">  548</span>    err_msg = <span class="stringliteral">r&quot;All labels must be in \[0, n labels\&zwj;)&quot;</span></div>
<div class="line"><span class="lineno">  549</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  550</span>        multilabel_confusion_matrix(y_true, y_pred, labels=[3])</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span>    <span class="comment"># Using samplewise outside multilabel</span></div>
<div class="line"><span class="lineno">  553</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;Samplewise metrics&quot;</span>):</div>
<div class="line"><span class="lineno">  554</span>        multilabel_confusion_matrix([0, 1, 2], [1, 2, 0], samplewise=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    <span class="comment"># Bad y_type</span></div>
<div class="line"><span class="lineno">  557</span>    err_msg = <span class="stringliteral">&quot;multiclass-multioutput is not supported&quot;</span></div>
<div class="line"><span class="lineno">  558</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  559</span>        multilabel_confusion_matrix([[0, 1, 2], [2, 1, 0]], [[1, 2, 0], [1, 0, 2]])</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  563</span>    <span class="stringliteral">&quot;normalize, cm_dtype, expected_results&quot;</span>,</div>
<div class="line"><span class="lineno">  564</span>    [</div>
<div class="line"><span class="lineno">  565</span>        (<span class="stringliteral">&quot;true&quot;</span>, <span class="stringliteral">&quot;f&quot;</span>, 0.333333333),</div>
<div class="line"><span class="lineno">  566</span>        (<span class="stringliteral">&quot;pred&quot;</span>, <span class="stringliteral">&quot;f&quot;</span>, 0.333333333),</div>
<div class="line"><span class="lineno">  567</span>        (<span class="stringliteral">&quot;all&quot;</span>, <span class="stringliteral">&quot;f&quot;</span>, 0.1111111111),</div>
<div class="line"><span class="lineno">  568</span>        (<span class="keywordtype">None</span>, <span class="stringliteral">&quot;i&quot;</span>, 2),</div>
<div class="line"><span class="lineno">  569</span>    ],</div>
<div class="line"><span class="lineno">  570</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="acd8c344ad89bd0e7a17371b3a688071d" name="acd8c344ad89bd0e7a17371b3a688071d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd8c344ad89bd0e7a17371b3a688071d">&#9670;&#160;</a></span>test_multilabel_confusion_matrix_multiclass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_confusion_matrix_multiclass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  456</span><span class="keyword">def </span>test_multilabel_confusion_matrix_multiclass():</div>
<div class="line"><span class="lineno">  457</span>    <span class="comment"># Test multilabel confusion matrix - multi-class case</span></div>
<div class="line"><span class="lineno">  458</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>    <span class="keyword">def </span><a class="code hl_namespace" href="namespacetest.html">test</a>(y_true, y_pred, string_type=False):</div>
<div class="line"><span class="lineno">  461</span>        <span class="comment"># compute confusion matrix with default labels introspection</span></div>
<div class="line"><span class="lineno">  462</span>        cm = multilabel_confusion_matrix(y_true, y_pred)</div>
<div class="line"><span class="lineno">  463</span>        assert_array_equal(</div>
<div class="line"><span class="lineno">  464</span>            cm, [[[47, 4], [5, 19]], [[38, 6], [28, 3]], [[30, 25], [2, 18]]]</div>
<div class="line"><span class="lineno">  465</span>        )</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>        <span class="comment"># compute confusion matrix with explicit label ordering</span></div>
<div class="line"><span class="lineno">  468</span>        labels = [<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>] <span class="keywordflow">if</span> string_type <span class="keywordflow">else</span> [0, 2, 1]</div>
<div class="line"><span class="lineno">  469</span>        cm = multilabel_confusion_matrix(y_true, y_pred, labels=labels)</div>
<div class="line"><span class="lineno">  470</span>        assert_array_equal(</div>
<div class="line"><span class="lineno">  471</span>            cm, [[[47, 4], [5, 19]], [[30, 25], [2, 18]], [[38, 6], [28, 3]]]</div>
<div class="line"><span class="lineno">  472</span>        )</div>
<div class="line"><span class="lineno">  473</span> </div>
<div class="line"><span class="lineno">  474</span>        <span class="comment"># compute confusion matrix with super set of present labels</span></div>
<div class="line"><span class="lineno">  475</span>        labels = [<span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>] <span class="keywordflow">if</span> string_type <span class="keywordflow">else</span> [0, 2, 1, 3]</div>
<div class="line"><span class="lineno">  476</span>        cm = multilabel_confusion_matrix(y_true, y_pred, labels=labels)</div>
<div class="line"><span class="lineno">  477</span>        assert_array_equal(</div>
<div class="line"><span class="lineno">  478</span>            cm,</div>
<div class="line"><span class="lineno">  479</span>            [</div>
<div class="line"><span class="lineno">  480</span>                [[47, 4], [5, 19]],</div>
<div class="line"><span class="lineno">  481</span>                [[30, 25], [2, 18]],</div>
<div class="line"><span class="lineno">  482</span>                [[38, 6], [28, 3]],</div>
<div class="line"><span class="lineno">  483</span>                [[75, 0], [0, 0]],</div>
<div class="line"><span class="lineno">  484</span>            ],</div>
<div class="line"><span class="lineno">  485</span>        )</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>    <a class="code hl_namespace" href="namespacetest.html">test</a>(y_true, y_pred)</div>
<div class="line"><span class="lineno">  488</span>    <a class="code hl_namespace" href="namespacetest.html">test</a>([str(y) <span class="keywordflow">for</span> y <span class="keywordflow">in</span> y_true], [str(y) <span class="keywordflow">for</span> y <span class="keywordflow">in</span> y_pred], string_type=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a94837269c3c1f85719c1db2594456238" name="a94837269c3c1f85719c1db2594456238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94837269c3c1f85719c1db2594456238">&#9670;&#160;</a></span>test_multilabel_confusion_matrix_multilabel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_confusion_matrix_multilabel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  491</span><span class="keyword">def </span>test_multilabel_confusion_matrix_multilabel():</div>
<div class="line"><span class="lineno">  492</span>    <span class="comment"># Test multilabel confusion matrix - multilabel-indicator case</span></div>
<div class="line"><span class="lineno">  493</span>    <span class="keyword">from</span> <a class="code hl_namespace" href="namespacescipy_1_1sparse.html">scipy.sparse</a> <span class="keyword">import</span> csc_matrix, csr_matrix</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    y_true = np.array([[1, 0, 1], [0, 1, 0], [1, 1, 0]])</div>
<div class="line"><span class="lineno">  496</span>    y_pred = np.array([[1, 0, 0], [0, 1, 1], [0, 0, 1]])</div>
<div class="line"><span class="lineno">  497</span>    y_true_csr = csr_matrix(y_true)</div>
<div class="line"><span class="lineno">  498</span>    y_pred_csr = csr_matrix(y_pred)</div>
<div class="line"><span class="lineno">  499</span>    y_true_csc = csc_matrix(y_true)</div>
<div class="line"><span class="lineno">  500</span>    y_pred_csc = csc_matrix(y_pred)</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>    <span class="comment"># cross test different types</span></div>
<div class="line"><span class="lineno">  503</span>    sample_weight = np.array([2, 1, 3])</div>
<div class="line"><span class="lineno">  504</span>    real_cm = [[[1, 0], [1, 1]], [[1, 0], [1, 1]], [[0, 2], [1, 0]]]</div>
<div class="line"><span class="lineno">  505</span>    trues = [y_true, y_true_csr, y_true_csc]</div>
<div class="line"><span class="lineno">  506</span>    preds = [y_pred, y_pred_csr, y_pred_csc]</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <span class="keywordflow">for</span> y_true_tmp <span class="keywordflow">in</span> trues:</div>
<div class="line"><span class="lineno">  509</span>        <span class="keywordflow">for</span> y_pred_tmp <span class="keywordflow">in</span> preds:</div>
<div class="line"><span class="lineno">  510</span>            cm = multilabel_confusion_matrix(y_true_tmp, y_pred_tmp)</div>
<div class="line"><span class="lineno">  511</span>            assert_array_equal(cm, real_cm)</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    <span class="comment"># test support for samplewise</span></div>
<div class="line"><span class="lineno">  514</span>    cm = multilabel_confusion_matrix(y_true, y_pred, samplewise=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  515</span>    assert_array_equal(cm, [[[1, 0], [1, 1]], [[1, 1], [0, 1]], [[0, 1], [2, 0]]])</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    <span class="comment"># test support for labels</span></div>
<div class="line"><span class="lineno">  518</span>    cm = multilabel_confusion_matrix(y_true, y_pred, labels=[2, 0])</div>
<div class="line"><span class="lineno">  519</span>    assert_array_equal(cm, [[[0, 2], [1, 0]], [[1, 0], [1, 1]]])</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="comment"># test support for labels with samplewise</span></div>
<div class="line"><span class="lineno">  522</span>    cm = multilabel_confusion_matrix(y_true, y_pred, labels=[2, 0], samplewise=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  523</span>    assert_array_equal(cm, [[[0, 0], [1, 1]], [[1, 1], [0, 0]], [[0, 1], [1, 0]]])</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>    <span class="comment"># test support for sample_weight with sample_wise</span></div>
<div class="line"><span class="lineno">  526</span>    cm = multilabel_confusion_matrix(</div>
<div class="line"><span class="lineno">  527</span>        y_true, y_pred, sample_weight=sample_weight, samplewise=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  528</span>    )</div>
<div class="line"><span class="lineno">  529</span>    assert_array_equal(cm, [[[2, 0], [2, 2]], [[1, 1], [0, 1]], [[0, 3], [6, 0]]])</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="ttc" id="anamespacescipy_1_1sparse_html"><div class="ttname"><a href="namespacescipy_1_1sparse.html">scipy.sparse</a></div><div class="ttdef"><b>Definition</b> __init__.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4036b0aac89f3d3676e2290d265fd3ed" name="a4036b0aac89f3d3676e2290d265fd3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4036b0aac89f3d3676e2290d265fd3ed">&#9670;&#160;</a></span>test_multilabel_hamming_loss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_hamming_loss </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1330</span><span class="keyword">def </span>test_multilabel_hamming_loss():</div>
<div class="line"><span class="lineno"> 1331</span>    <span class="comment"># Dense label indicator matrix format</span></div>
<div class="line"><span class="lineno"> 1332</span>    y1 = np.array([[0, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1333</span>    y2 = np.array([[0, 0, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1334</span>    w = np.array([1, 3])</div>
<div class="line"><span class="lineno"> 1335</span> </div>
<div class="line"><span class="lineno"> 1336</span>    <span class="keyword">assert</span> hamming_loss(y1, y2) == 1 / 6</div>
<div class="line"><span class="lineno"> 1337</span>    <span class="keyword">assert</span> hamming_loss(y1, y1) == 0</div>
<div class="line"><span class="lineno"> 1338</span>    <span class="keyword">assert</span> hamming_loss(y2, y2) == 0</div>
<div class="line"><span class="lineno"> 1339</span>    <span class="keyword">assert</span> hamming_loss(y2, 1 - y2) == 1</div>
<div class="line"><span class="lineno"> 1340</span>    <span class="keyword">assert</span> hamming_loss(y1, 1 - y1) == 1</div>
<div class="line"><span class="lineno"> 1341</span>    <span class="keyword">assert</span> hamming_loss(y1, np.zeros(y1.shape)) == 4 / 6</div>
<div class="line"><span class="lineno"> 1342</span>    <span class="keyword">assert</span> hamming_loss(y2, np.zeros(y1.shape)) == 0.5</div>
<div class="line"><span class="lineno"> 1343</span>    <span class="keyword">assert</span> hamming_loss(y1, y2, sample_weight=w) == 1.0 / 12</div>
<div class="line"><span class="lineno"> 1344</span>    <span class="keyword">assert</span> hamming_loss(y1, 1 - y2, sample_weight=w) == 11.0 / 12</div>
<div class="line"><span class="lineno"> 1345</span>    <span class="keyword">assert</span> hamming_loss(y1, np.zeros_like(y1), sample_weight=w) == 2.0 / 3</div>
<div class="line"><span class="lineno"> 1346</span>    <span class="comment"># sp_hamming only works with 1-D arrays</span></div>
<div class="line"><span class="lineno"> 1347</span>    <span class="keyword">assert</span> hamming_loss(y1[0], y2[0]) == sp_hamming(y1[0], y2[0])</div>
<div class="line"><span class="lineno"> 1348</span> </div>
<div class="line"><span class="lineno"> 1349</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af6e79133b0baa803c1a19a5235168123" name="af6e79133b0baa803c1a19a5235168123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e79133b0baa803c1a19a5235168123">&#9670;&#160;</a></span>test_multilabel_jaccard_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_jaccard_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>recwarn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1390</span><span class="keyword">def </span>test_multilabel_jaccard_score(recwarn):</div>
<div class="line"><span class="lineno"> 1391</span>    <span class="comment"># Dense label indicator matrix format</span></div>
<div class="line"><span class="lineno"> 1392</span>    y1 = np.array([[0, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1393</span>    y2 = np.array([[0, 0, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>    <span class="comment"># size(y1 \inter y2) = [1, 2]</span></div>
<div class="line"><span class="lineno"> 1396</span>    <span class="comment"># size(y1 \union y2) = [2, 2]</span></div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>    <span class="keyword">assert</span> jaccard_score(y1, y2, average=<span class="stringliteral">&quot;samples&quot;</span>) == 0.75</div>
<div class="line"><span class="lineno"> 1399</span>    <span class="keyword">assert</span> jaccard_score(y1, y1, average=<span class="stringliteral">&quot;samples&quot;</span>) == 1</div>
<div class="line"><span class="lineno"> 1400</span>    <span class="keyword">assert</span> jaccard_score(y2, y2, average=<span class="stringliteral">&quot;samples&quot;</span>) == 1</div>
<div class="line"><span class="lineno"> 1401</span>    <span class="keyword">assert</span> jaccard_score(y2, np.logical_not(y2), average=<span class="stringliteral">&quot;samples&quot;</span>) == 0</div>
<div class="line"><span class="lineno"> 1402</span>    <span class="keyword">assert</span> jaccard_score(y1, np.logical_not(y1), average=<span class="stringliteral">&quot;samples&quot;</span>) == 0</div>
<div class="line"><span class="lineno"> 1403</span>    <span class="keyword">assert</span> jaccard_score(y1, np.zeros(y1.shape), average=<span class="stringliteral">&quot;samples&quot;</span>) == 0</div>
<div class="line"><span class="lineno"> 1404</span>    <span class="keyword">assert</span> jaccard_score(y2, np.zeros(y1.shape), average=<span class="stringliteral">&quot;samples&quot;</span>) == 0</div>
<div class="line"><span class="lineno"> 1405</span> </div>
<div class="line"><span class="lineno"> 1406</span>    y_true = np.array([[0, 1, 1], [1, 0, 0]])</div>
<div class="line"><span class="lineno"> 1407</span>    y_pred = np.array([[1, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1408</span>    <span class="comment"># average=&#39;macro&#39;</span></div>
<div class="line"><span class="lineno"> 1409</span>    assert_almost_equal(jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>), 2.0 / 3)</div>
<div class="line"><span class="lineno"> 1410</span>    <span class="comment"># average=&#39;micro&#39;</span></div>
<div class="line"><span class="lineno"> 1411</span>    assert_almost_equal(jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;micro&quot;</span>), 3.0 / 5)</div>
<div class="line"><span class="lineno"> 1412</span>    <span class="comment"># average=&#39;samples&#39;</span></div>
<div class="line"><span class="lineno"> 1413</span>    assert_almost_equal(jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>), 7.0 / 12)</div>
<div class="line"><span class="lineno"> 1414</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1415</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>, labels=[0, 2]), 1.0 / 2</div>
<div class="line"><span class="lineno"> 1416</span>    )</div>
<div class="line"><span class="lineno"> 1417</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1418</span>        jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>, labels=[1, 2]), 1.0 / 2</div>
<div class="line"><span class="lineno"> 1419</span>    )</div>
<div class="line"><span class="lineno"> 1420</span>    <span class="comment"># average=None</span></div>
<div class="line"><span class="lineno"> 1421</span>    assert_array_equal(</div>
<div class="line"><span class="lineno"> 1422</span>        jaccard_score(y_true, y_pred, average=<span class="keywordtype">None</span>), np.array([1.0 / 2, 1.0, 1.0 / 2])</div>
<div class="line"><span class="lineno"> 1423</span>    )</div>
<div class="line"><span class="lineno"> 1424</span> </div>
<div class="line"><span class="lineno"> 1425</span>    y_true = np.array([[0, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1426</span>    y_pred = np.array([[1, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1427</span>    assert_almost_equal(jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>), 5.0 / 6)</div>
<div class="line"><span class="lineno"> 1428</span>    <span class="comment"># average=&#39;weighted&#39;</span></div>
<div class="line"><span class="lineno"> 1429</span>    assert_almost_equal(jaccard_score(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>), 7.0 / 8)</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>    msg2 = <span class="stringliteral">&quot;Got 4 &gt; 2&quot;</span></div>
<div class="line"><span class="lineno"> 1432</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg2):</div>
<div class="line"><span class="lineno"> 1433</span>        jaccard_score(y_true, y_pred, labels=[4], average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1434</span>    msg3 = <span class="stringliteral">&quot;Got -1 &lt; 0&quot;</span></div>
<div class="line"><span class="lineno"> 1435</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg3):</div>
<div class="line"><span class="lineno"> 1436</span>        jaccard_score(y_true, y_pred, labels=[-1], average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1437</span> </div>
<div class="line"><span class="lineno"> 1438</span>    msg = (</div>
<div class="line"><span class="lineno"> 1439</span>        <span class="stringliteral">&quot;Jaccard is ill-defined and being set to 0.0 in labels &quot;</span></div>
<div class="line"><span class="lineno"> 1440</span>        <span class="stringliteral">&quot;with no true or predicted samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1441</span>    )</div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=msg):</div>
<div class="line"><span class="lineno"> 1444</span>        <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 1445</span>            jaccard_score(np.array([[0, 1]]), np.array([[0, 1]]), average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1446</span>            == 0.5</div>
<div class="line"><span class="lineno"> 1447</span>        )</div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span>    msg = (</div>
<div class="line"><span class="lineno"> 1450</span>        <span class="stringliteral">&quot;Jaccard is ill-defined and being set to 0.0 in samples &quot;</span></div>
<div class="line"><span class="lineno"> 1451</span>        <span class="stringliteral">&quot;with no true or predicted labels.&quot;</span></div>
<div class="line"><span class="lineno"> 1452</span>    )</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning, match=msg):</div>
<div class="line"><span class="lineno"> 1455</span>        <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 1456</span>            jaccard_score(</div>
<div class="line"><span class="lineno"> 1457</span>                np.array([[0, 0], [1, 1]]),</div>
<div class="line"><span class="lineno"> 1458</span>                np.array([[0, 0], [1, 1]]),</div>
<div class="line"><span class="lineno"> 1459</span>                average=<span class="stringliteral">&quot;samples&quot;</span>,</div>
<div class="line"><span class="lineno"> 1460</span>            )</div>
<div class="line"><span class="lineno"> 1461</span>            == 0.5</div>
<div class="line"><span class="lineno"> 1462</span>        )</div>
<div class="line"><span class="lineno"> 1463</span> </div>
<div class="line"><span class="lineno"> 1464</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> list(recwarn)</div>
<div class="line"><span class="lineno"> 1465</span> </div>
<div class="line"><span class="lineno"> 1466</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a78a0623aa95efafc9d26e4825d5b74cb" name="a78a0623aa95efafc9d26e4825d5b74cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a0623aa95efafc9d26e4825d5b74cb">&#9670;&#160;</a></span>test_multilabel_zero_one_loss_subset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_multilabel_zero_one_loss_subset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1316</span><span class="keyword">def </span>test_multilabel_zero_one_loss_subset():</div>
<div class="line"><span class="lineno"> 1317</span>    <span class="comment"># Dense label indicator matrix format</span></div>
<div class="line"><span class="lineno"> 1318</span>    y1 = np.array([[0, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1319</span>    y2 = np.array([[0, 0, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno"> 1320</span> </div>
<div class="line"><span class="lineno"> 1321</span>    <span class="keyword">assert</span> zero_one_loss(y1, y2) == 0.5</div>
<div class="line"><span class="lineno"> 1322</span>    <span class="keyword">assert</span> zero_one_loss(y1, y1) == 0</div>
<div class="line"><span class="lineno"> 1323</span>    <span class="keyword">assert</span> zero_one_loss(y2, y2) == 0</div>
<div class="line"><span class="lineno"> 1324</span>    <span class="keyword">assert</span> zero_one_loss(y2, np.logical_not(y2)) == 1</div>
<div class="line"><span class="lineno"> 1325</span>    <span class="keyword">assert</span> zero_one_loss(y1, np.logical_not(y1)) == 1</div>
<div class="line"><span class="lineno"> 1326</span>    <span class="keyword">assert</span> zero_one_loss(y1, np.zeros(y1.shape)) == 1</div>
<div class="line"><span class="lineno"> 1327</span>    <span class="keyword">assert</span> zero_one_loss(y2, np.zeros(y1.shape)) == 1</div>
<div class="line"><span class="lineno"> 1328</span> </div>
<div class="line"><span class="lineno"> 1329</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aeefadd9c134f7c91531ec24bbbe6b4b7" name="aeefadd9c134f7c91531ec24bbbe6b4b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeefadd9c134f7c91531ec24bbbe6b4b7">&#9670;&#160;</a></span>test_precision_recall_f1_no_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_no_labels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>beta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>average</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1768</span><span class="keyword">def </span>test_precision_recall_f1_no_labels(beta, average, zero_division):</div>
<div class="line"><span class="lineno"> 1769</span>    y_true = np.zeros((20, 3))</div>
<div class="line"><span class="lineno"> 1770</span>    y_pred = np.zeros_like(y_true)</div>
<div class="line"><span class="lineno"> 1771</span> </div>
<div class="line"><span class="lineno"> 1772</span>    p, r, f, s = assert_no_warnings(</div>
<div class="line"><span class="lineno"> 1773</span>        precision_recall_fscore_support,</div>
<div class="line"><span class="lineno"> 1774</span>        y_true,</div>
<div class="line"><span class="lineno"> 1775</span>        y_pred,</div>
<div class="line"><span class="lineno"> 1776</span>        average=average,</div>
<div class="line"><span class="lineno"> 1777</span>        beta=beta,</div>
<div class="line"><span class="lineno"> 1778</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 1779</span>    )</div>
<div class="line"><span class="lineno"> 1780</span>    fbeta = assert_no_warnings(</div>
<div class="line"><span class="lineno"> 1781</span>        fbeta_score,</div>
<div class="line"><span class="lineno"> 1782</span>        y_true,</div>
<div class="line"><span class="lineno"> 1783</span>        y_pred,</div>
<div class="line"><span class="lineno"> 1784</span>        beta=beta,</div>
<div class="line"><span class="lineno"> 1785</span>        average=average,</div>
<div class="line"><span class="lineno"> 1786</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 1787</span>    )</div>
<div class="line"><span class="lineno"> 1788</span> </div>
<div class="line"><span class="lineno"> 1789</span>    zero_division = float(zero_division)</div>
<div class="line"><span class="lineno"> 1790</span>    assert_almost_equal(p, zero_division)</div>
<div class="line"><span class="lineno"> 1791</span>    assert_almost_equal(r, zero_division)</div>
<div class="line"><span class="lineno"> 1792</span>    assert_almost_equal(f, zero_division)</div>
<div class="line"><span class="lineno"> 1793</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1794</span> </div>
<div class="line"><span class="lineno"> 1795</span>    assert_almost_equal(fbeta, float(zero_division))</div>
<div class="line"><span class="lineno"> 1796</span> </div>
<div class="line"><span class="lineno"> 1797</span> </div>
<div class="line"><span class="lineno"> 1798</span><span class="preprocessor">@pytest.mark.parametrize(&quot;average&quot;, [&quot;macro&quot;, &quot;micro&quot;, &quot;weighted&quot;, &quot;samples&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ba702b9de40a1343a95b35dc2beace0" name="a8ba702b9de40a1343a95b35dc2beace0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba702b9de40a1343a95b35dc2beace0">&#9670;&#160;</a></span>test_precision_recall_f1_no_labels_average_none()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_no_labels_average_none </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1819</span><span class="keyword">def </span>test_precision_recall_f1_no_labels_average_none(zero_division):</div>
<div class="line"><span class="lineno"> 1820</span>    y_true = np.zeros((20, 3))</div>
<div class="line"><span class="lineno"> 1821</span>    y_pred = np.zeros_like(y_true)</div>
<div class="line"><span class="lineno"> 1822</span> </div>
<div class="line"><span class="lineno"> 1823</span>    <span class="comment"># tp = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1824</span>    <span class="comment"># fn = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1825</span>    <span class="comment"># fp = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1826</span>    <span class="comment"># support = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1827</span>    <span class="comment"># |y_hat_i inter y_i | = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1828</span>    <span class="comment"># |y_i| = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1829</span>    <span class="comment"># |y_hat_i| = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1830</span> </div>
<div class="line"><span class="lineno"> 1831</span>    p, r, f, s = assert_no_warnings(</div>
<div class="line"><span class="lineno"> 1832</span>        precision_recall_fscore_support,</div>
<div class="line"><span class="lineno"> 1833</span>        y_true,</div>
<div class="line"><span class="lineno"> 1834</span>        y_pred,</div>
<div class="line"><span class="lineno"> 1835</span>        average=<span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 1836</span>        beta=1.0,</div>
<div class="line"><span class="lineno"> 1837</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 1838</span>    )</div>
<div class="line"><span class="lineno"> 1839</span>    fbeta = assert_no_warnings(</div>
<div class="line"><span class="lineno"> 1840</span>        fbeta_score, y_true, y_pred, beta=1.0, average=<span class="keywordtype">None</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1841</span>    )</div>
<div class="line"><span class="lineno"> 1842</span> </div>
<div class="line"><span class="lineno"> 1843</span>    zero_division = float(zero_division)</div>
<div class="line"><span class="lineno"> 1844</span>    assert_array_almost_equal(p, [zero_division, zero_division, zero_division], 2)</div>
<div class="line"><span class="lineno"> 1845</span>    assert_array_almost_equal(r, [zero_division, zero_division, zero_division], 2)</div>
<div class="line"><span class="lineno"> 1846</span>    assert_array_almost_equal(f, [zero_division, zero_division, zero_division], 2)</div>
<div class="line"><span class="lineno"> 1847</span>    assert_array_almost_equal(s, [0, 0, 0], 2)</div>
<div class="line"><span class="lineno"> 1848</span> </div>
<div class="line"><span class="lineno"> 1849</span>    assert_array_almost_equal(fbeta, [zero_division, zero_division, zero_division], 2)</div>
<div class="line"><span class="lineno"> 1850</span> </div>
<div class="line"><span class="lineno"> 1851</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a639096c7c94868cbc836f9f8bfd04ecb" name="a639096c7c94868cbc836f9f8bfd04ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a639096c7c94868cbc836f9f8bfd04ecb">&#9670;&#160;</a></span>test_precision_recall_f1_no_labels_average_none_warn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_no_labels_average_none_warn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1852</span><span class="keyword">def </span>test_precision_recall_f1_no_labels_average_none_warn():</div>
<div class="line"><span class="lineno"> 1853</span>    y_true = np.zeros((20, 3))</div>
<div class="line"><span class="lineno"> 1854</span>    y_pred = np.zeros_like(y_true)</div>
<div class="line"><span class="lineno"> 1855</span> </div>
<div class="line"><span class="lineno"> 1856</span>    <span class="comment"># tp = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1857</span>    <span class="comment"># fn = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1858</span>    <span class="comment"># fp = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1859</span>    <span class="comment"># support = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1860</span>    <span class="comment"># |y_hat_i inter y_i | = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1861</span>    <span class="comment"># |y_i| = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1862</span>    <span class="comment"># |y_hat_i| = [0, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1863</span> </div>
<div class="line"><span class="lineno"> 1864</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning):</div>
<div class="line"><span class="lineno"> 1865</span>        p, r, f, s = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno"> 1866</span>            y_true, y_pred, average=<span class="keywordtype">None</span>, beta=1</div>
<div class="line"><span class="lineno"> 1867</span>        )</div>
<div class="line"><span class="lineno"> 1868</span> </div>
<div class="line"><span class="lineno"> 1869</span>    assert_array_almost_equal(p, [0, 0, 0], 2)</div>
<div class="line"><span class="lineno"> 1870</span>    assert_array_almost_equal(r, [0, 0, 0], 2)</div>
<div class="line"><span class="lineno"> 1871</span>    assert_array_almost_equal(f, [0, 0, 0], 2)</div>
<div class="line"><span class="lineno"> 1872</span>    assert_array_almost_equal(s, [0, 0, 0], 2)</div>
<div class="line"><span class="lineno"> 1873</span> </div>
<div class="line"><span class="lineno"> 1874</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning):</div>
<div class="line"><span class="lineno"> 1875</span>        fbeta = fbeta_score(y_true, y_pred, beta=1, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1876</span> </div>
<div class="line"><span class="lineno"> 1877</span>    assert_array_almost_equal(fbeta, [0, 0, 0], 2)</div>
<div class="line"><span class="lineno"> 1878</span> </div>
<div class="line"><span class="lineno"> 1879</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4d7679361c2b45499234c645bd2ff7d" name="aa4d7679361c2b45499234c645bd2ff7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4d7679361c2b45499234c645bd2ff7d">&#9670;&#160;</a></span>test_precision_recall_f1_no_labels_check_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_no_labels_check_warnings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>average</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1799</span><span class="keyword">def </span>test_precision_recall_f1_no_labels_check_warnings(average):</div>
<div class="line"><span class="lineno"> 1800</span>    y_true = np.zeros((20, 3))</div>
<div class="line"><span class="lineno"> 1801</span>    y_pred = np.zeros_like(y_true)</div>
<div class="line"><span class="lineno"> 1802</span> </div>
<div class="line"><span class="lineno"> 1803</span>    func = precision_recall_fscore_support</div>
<div class="line"><span class="lineno"> 1804</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning):</div>
<div class="line"><span class="lineno"> 1805</span>        p, r, f, s = <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(y_true, y_pred, average=average, beta=1.0)</div>
<div class="line"><span class="lineno"> 1806</span> </div>
<div class="line"><span class="lineno"> 1807</span>    assert_almost_equal(p, 0)</div>
<div class="line"><span class="lineno"> 1808</span>    assert_almost_equal(r, 0)</div>
<div class="line"><span class="lineno"> 1809</span>    assert_almost_equal(f, 0)</div>
<div class="line"><span class="lineno"> 1810</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1811</span> </div>
<div class="line"><span class="lineno"> 1812</span>    <span class="keyword">with</span> pytest.warns(UndefinedMetricWarning):</div>
<div class="line"><span class="lineno"> 1813</span>        fbeta = fbeta_score(y_true, y_pred, average=average, beta=1.0)</div>
<div class="line"><span class="lineno"> 1814</span> </div>
<div class="line"><span class="lineno"> 1815</span>    assert_almost_equal(fbeta, 0)</div>
<div class="line"><span class="lineno"> 1816</span> </div>
<div class="line"><span class="lineno"> 1817</span> </div>
<div class="line"><span class="lineno"> 1818</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [0, 1])</span></div>
<div class="ttc" id="acallback_2foo_8f_html_a565fe2cc583df102f120752b0011c330"><div class="ttname"><a href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a></div><div class="ttdeci">subroutine func(a)</div><div class="ttdef"><b>Definition</b> foo.f:9</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a316ec66710ca27a2b0216cf1b69edba9" name="a316ec66710ca27a2b0216cf1b69edba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a316ec66710ca27a2b0216cf1b69edba9">&#9670;&#160;</a></span>test_precision_recall_f1_score_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_score_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  231</span><span class="keyword">def </span>test_precision_recall_f1_score_binary():</div>
<div class="line"><span class="lineno">  232</span>    <span class="comment"># Test Precision Recall and F1 Score for binary classification task</span></div>
<div class="line"><span class="lineno">  233</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    <span class="comment"># detailed measures for each class</span></div>
<div class="line"><span class="lineno">  236</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  237</span>    assert_array_almost_equal(p, [0.73, 0.85], 2)</div>
<div class="line"><span class="lineno">  238</span>    assert_array_almost_equal(r, [0.88, 0.68], 2)</div>
<div class="line"><span class="lineno">  239</span>    assert_array_almost_equal(f, [0.80, 0.76], 2)</div>
<div class="line"><span class="lineno">  240</span>    assert_array_equal(s, [25, 25])</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    <span class="comment"># individual scoring function that can be used for grid search: in the</span></div>
<div class="line"><span class="lineno">  243</span>    <span class="comment"># binary class case the score is the value of the measure for the positive</span></div>
<div class="line"><span class="lineno">  244</span>    <span class="comment"># class (e.g. label == 1). This is deprecated for average != &#39;binary&#39;.</span></div>
<div class="line"><span class="lineno">  245</span>    <span class="keywordflow">for</span> kwargs, my_assert <span class="keywordflow">in</span> [</div>
<div class="line"><span class="lineno">  246</span>        ({}, assert_no_warnings),</div>
<div class="line"><span class="lineno">  247</span>        ({<span class="stringliteral">&quot;average&quot;</span>: <span class="stringliteral">&quot;binary&quot;</span>}, assert_no_warnings),</div>
<div class="line"><span class="lineno">  248</span>    ]:</div>
<div class="line"><span class="lineno">  249</span>        ps = my_assert(precision_score, y_true, y_pred, **kwargs)</div>
<div class="line"><span class="lineno">  250</span>        assert_array_almost_equal(ps, 0.85, 2)</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>        rs = my_assert(recall_score, y_true, y_pred, **kwargs)</div>
<div class="line"><span class="lineno">  253</span>        assert_array_almost_equal(rs, 0.68, 2)</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>        fs = my_assert(f1_score, y_true, y_pred, **kwargs)</div>
<div class="line"><span class="lineno">  256</span>        assert_array_almost_equal(fs, 0.76, 2)</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno">  259</span>            my_assert(fbeta_score, y_true, y_pred, beta=2, **kwargs),</div>
<div class="line"><span class="lineno">  260</span>            (1 + 2**2) * ps * rs / (2**2 * ps + rs),</div>
<div class="line"><span class="lineno">  261</span>            2,</div>
<div class="line"><span class="lineno">  262</span>        )</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a927454e3a669c1e673f149aab22e74c1" name="a927454e3a669c1e673f149aab22e74c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927454e3a669c1e673f149aab22e74c1">&#9670;&#160;</a></span>test_precision_recall_f1_score_binary_averaged()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_score_binary_averaged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  986</span><span class="keyword">def </span>test_precision_recall_f1_score_binary_averaged():</div>
<div class="line"><span class="lineno">  987</span>    y_true = np.array([0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1])</div>
<div class="line"><span class="lineno">  988</span>    y_pred = np.array([1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1])</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>    <span class="comment"># compute scores with default labels introspection</span></div>
<div class="line"><span class="lineno">  991</span>    ps, rs, fs, _ = precision_recall_fscore_support(y_true, y_pred, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  992</span>    p, r, f, _ = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno">  993</span>    <span class="keyword">assert</span> p == np.mean(ps)</div>
<div class="line"><span class="lineno">  994</span>    <span class="keyword">assert</span> r == np.mean(rs)</div>
<div class="line"><span class="lineno">  995</span>    <span class="keyword">assert</span> f == np.mean(fs)</div>
<div class="line"><span class="lineno">  996</span>    p, r, f, _ = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno">  997</span>    support = np.bincount(y_true)</div>
<div class="line"><span class="lineno">  998</span>    <span class="keyword">assert</span> p == np.average(ps, weights=support)</div>
<div class="line"><span class="lineno">  999</span>    <span class="keyword">assert</span> r == np.average(rs, weights=support)</div>
<div class="line"><span class="lineno"> 1000</span>    <span class="keyword">assert</span> f == np.average(fs, weights=support)</div>
<div class="line"><span class="lineno"> 1001</span> </div>
<div class="line"><span class="lineno"> 1002</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5feeee200576db9295fadc6fae8898e5" name="a5feeee200576db9295fadc6fae8898e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5feeee200576db9295fadc6fae8898e5">&#9670;&#160;</a></span>test_precision_recall_f1_score_multiclass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_score_multiclass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  913</span><span class="keyword">def </span>test_precision_recall_f1_score_multiclass():</div>
<div class="line"><span class="lineno">  914</span>    <span class="comment"># Test Precision Recall and F1 Score for multiclass classification task</span></div>
<div class="line"><span class="lineno">  915</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  916</span> </div>
<div class="line"><span class="lineno">  917</span>    <span class="comment"># compute scores with default labels introspection</span></div>
<div class="line"><span class="lineno">  918</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  919</span>    assert_array_almost_equal(p, [0.83, 0.33, 0.42], 2)</div>
<div class="line"><span class="lineno">  920</span>    assert_array_almost_equal(r, [0.79, 0.09, 0.90], 2)</div>
<div class="line"><span class="lineno">  921</span>    assert_array_almost_equal(f, [0.81, 0.15, 0.57], 2)</div>
<div class="line"><span class="lineno">  922</span>    assert_array_equal(s, [24, 31, 20])</div>
<div class="line"><span class="lineno">  923</span> </div>
<div class="line"><span class="lineno">  924</span>    <span class="comment"># averaging tests</span></div>
<div class="line"><span class="lineno">  925</span>    ps = precision_score(y_true, y_pred, pos_label=1, average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno">  926</span>    assert_array_almost_equal(ps, 0.53, 2)</div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>    rs = recall_score(y_true, y_pred, average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno">  929</span>    assert_array_almost_equal(rs, 0.53, 2)</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>    fs = f1_score(y_true, y_pred, average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno">  932</span>    assert_array_almost_equal(fs, 0.53, 2)</div>
<div class="line"><span class="lineno">  933</span> </div>
<div class="line"><span class="lineno">  934</span>    ps = precision_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno">  935</span>    assert_array_almost_equal(ps, 0.53, 2)</div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span>    rs = recall_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno">  938</span>    assert_array_almost_equal(rs, 0.60, 2)</div>
<div class="line"><span class="lineno">  939</span> </div>
<div class="line"><span class="lineno">  940</span>    fs = f1_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno">  941</span>    assert_array_almost_equal(fs, 0.51, 2)</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>    ps = precision_score(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno">  944</span>    assert_array_almost_equal(ps, 0.51, 2)</div>
<div class="line"><span class="lineno">  945</span> </div>
<div class="line"><span class="lineno">  946</span>    rs = recall_score(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno">  947</span>    assert_array_almost_equal(rs, 0.53, 2)</div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>    fs = f1_score(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno">  950</span>    assert_array_almost_equal(fs, 0.47, 2)</div>
<div class="line"><span class="lineno">  951</span> </div>
<div class="line"><span class="lineno">  952</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  953</span>        precision_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno">  954</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  955</span>        recall_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno">  956</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  957</span>        f1_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno">  958</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  959</span>        fbeta_score(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>, beta=0.5)</div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>    <span class="comment"># same prediction but with and explicit label ordering</span></div>
<div class="line"><span class="lineno">  962</span>    p, r, f, s = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno">  963</span>        y_true, y_pred, labels=[0, 2, 1], average=<span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  964</span>    )</div>
<div class="line"><span class="lineno">  965</span>    assert_array_almost_equal(p, [0.83, 0.41, 0.33], 2)</div>
<div class="line"><span class="lineno">  966</span>    assert_array_almost_equal(r, [0.79, 0.90, 0.10], 2)</div>
<div class="line"><span class="lineno">  967</span>    assert_array_almost_equal(f, [0.81, 0.57, 0.15], 2)</div>
<div class="line"><span class="lineno">  968</span>    assert_array_equal(s, [24, 20, 31])</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span><span class="preprocessor">@pytest.mark.parametrize(&quot;average&quot;, [&quot;samples&quot;, &quot;micro&quot;, &quot;macro&quot;, &quot;weighted&quot;, None])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a003504962d49d571d5af7aae40e8d64f" name="a003504962d49d571d5af7aae40e8d64f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a003504962d49d571d5af7aae40e8d64f">&#9670;&#160;</a></span>test_precision_recall_f1_score_multilabel_1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_score_multilabel_1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1556</span><span class="keyword">def </span>test_precision_recall_f1_score_multilabel_1():</div>
<div class="line"><span class="lineno"> 1557</span>    <span class="comment"># Test precision_recall_f1_score on a crafted multilabel example</span></div>
<div class="line"><span class="lineno"> 1558</span>    <span class="comment"># First crafted example</span></div>
<div class="line"><span class="lineno"> 1559</span> </div>
<div class="line"><span class="lineno"> 1560</span>    y_true = np.array([[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 1]])</div>
<div class="line"><span class="lineno"> 1561</span>    y_pred = np.array([[0, 1, 0, 0], [0, 1, 0, 0], [1, 0, 1, 0]])</div>
<div class="line"><span class="lineno"> 1562</span> </div>
<div class="line"><span class="lineno"> 1563</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1564</span> </div>
<div class="line"><span class="lineno"> 1565</span>    <span class="comment"># tp = [0, 1, 1, 0]</span></div>
<div class="line"><span class="lineno"> 1566</span>    <span class="comment"># fn = [1, 0, 0, 1]</span></div>
<div class="line"><span class="lineno"> 1567</span>    <span class="comment"># fp = [1, 1, 0, 0]</span></div>
<div class="line"><span class="lineno"> 1568</span>    <span class="comment"># Check per class</span></div>
<div class="line"><span class="lineno"> 1569</span> </div>
<div class="line"><span class="lineno"> 1570</span>    assert_array_almost_equal(p, [0.0, 0.5, 1.0, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1571</span>    assert_array_almost_equal(r, [0.0, 1.0, 1.0, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1572</span>    assert_array_almost_equal(f, [0.0, 1 / 1.5, 1, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1573</span>    assert_array_almost_equal(s, [1, 1, 1, 1], 2)</div>
<div class="line"><span class="lineno"> 1574</span> </div>
<div class="line"><span class="lineno"> 1575</span>    f2 = fbeta_score(y_true, y_pred, beta=2, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1576</span>    support = s</div>
<div class="line"><span class="lineno"> 1577</span>    assert_array_almost_equal(f2, [0, 0.83, 1, 0], 2)</div>
<div class="line"><span class="lineno"> 1578</span> </div>
<div class="line"><span class="lineno"> 1579</span>    <span class="comment"># Check macro</span></div>
<div class="line"><span class="lineno"> 1580</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1581</span>    assert_almost_equal(p, 1.5 / 4)</div>
<div class="line"><span class="lineno"> 1582</span>    assert_almost_equal(r, 0.5)</div>
<div class="line"><span class="lineno"> 1583</span>    assert_almost_equal(f, 2.5 / 1.5 * 0.25)</div>
<div class="line"><span class="lineno"> 1584</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1585</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1586</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;macro&quot;</span>), np.mean(f2)</div>
<div class="line"><span class="lineno"> 1587</span>    )</div>
<div class="line"><span class="lineno"> 1588</span> </div>
<div class="line"><span class="lineno"> 1589</span>    <span class="comment"># Check micro</span></div>
<div class="line"><span class="lineno"> 1590</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1591</span>    assert_almost_equal(p, 0.5)</div>
<div class="line"><span class="lineno"> 1592</span>    assert_almost_equal(r, 0.5)</div>
<div class="line"><span class="lineno"> 1593</span>    assert_almost_equal(f, 0.5)</div>
<div class="line"><span class="lineno"> 1594</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1595</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1596</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;micro&quot;</span>),</div>
<div class="line"><span class="lineno"> 1597</span>        (1 + 4) * p * r / (4 * p + r),</div>
<div class="line"><span class="lineno"> 1598</span>    )</div>
<div class="line"><span class="lineno"> 1599</span> </div>
<div class="line"><span class="lineno"> 1600</span>    <span class="comment"># Check weighted</span></div>
<div class="line"><span class="lineno"> 1601</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno"> 1602</span>    assert_almost_equal(p, 1.5 / 4)</div>
<div class="line"><span class="lineno"> 1603</span>    assert_almost_equal(r, 0.5)</div>
<div class="line"><span class="lineno"> 1604</span>    assert_almost_equal(f, 2.5 / 1.5 * 0.25)</div>
<div class="line"><span class="lineno"> 1605</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1606</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1607</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;weighted&quot;</span>),</div>
<div class="line"><span class="lineno"> 1608</span>        np.average(f2, weights=support),</div>
<div class="line"><span class="lineno"> 1609</span>    )</div>
<div class="line"><span class="lineno"> 1610</span>    <span class="comment"># Check samples</span></div>
<div class="line"><span class="lineno"> 1611</span>    <span class="comment"># |h(x_i) inter y_i | = [0, 1, 1]</span></div>
<div class="line"><span class="lineno"> 1612</span>    <span class="comment"># |y_i| = [1, 1, 2]</span></div>
<div class="line"><span class="lineno"> 1613</span>    <span class="comment"># |h(x_i)| = [1, 1, 2]</span></div>
<div class="line"><span class="lineno"> 1614</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno"> 1615</span>    assert_almost_equal(p, 0.5)</div>
<div class="line"><span class="lineno"> 1616</span>    assert_almost_equal(r, 0.5)</div>
<div class="line"><span class="lineno"> 1617</span>    assert_almost_equal(f, 0.5)</div>
<div class="line"><span class="lineno"> 1618</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1619</span>    assert_almost_equal(fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.5)</div>
<div class="line"><span class="lineno"> 1620</span> </div>
<div class="line"><span class="lineno"> 1621</span> </div>
<div class="line"><span class="lineno"> 1622</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a8fba4cb9b2ef5ac3b5641821095c5c" name="a9a8fba4cb9b2ef5ac3b5641821095c5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a8fba4cb9b2ef5ac3b5641821095c5c">&#9670;&#160;</a></span>test_precision_recall_f1_score_multilabel_2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_score_multilabel_2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1623</span><span class="keyword">def </span>test_precision_recall_f1_score_multilabel_2():</div>
<div class="line"><span class="lineno"> 1624</span>    <span class="comment"># Test precision_recall_f1_score on a crafted multilabel example 2</span></div>
<div class="line"><span class="lineno"> 1625</span>    <span class="comment"># Second crafted example</span></div>
<div class="line"><span class="lineno"> 1626</span>    y_true = np.array([[1, 0, 0, 0], [0, 1, 0, 0], [0, 1, 1, 0]])</div>
<div class="line"><span class="lineno"> 1627</span>    y_pred = np.array([[0, 0, 0, 1], [0, 0, 0, 1], [1, 1, 0, 0]])</div>
<div class="line"><span class="lineno"> 1628</span> </div>
<div class="line"><span class="lineno"> 1629</span>    <span class="comment"># tp = [ 0.  1.  0.  0.]</span></div>
<div class="line"><span class="lineno"> 1630</span>    <span class="comment"># fp = [ 1.  0.  0.  2.]</span></div>
<div class="line"><span class="lineno"> 1631</span>    <span class="comment"># fn = [ 1.  1.  1.  0.]</span></div>
<div class="line"><span class="lineno"> 1632</span> </div>
<div class="line"><span class="lineno"> 1633</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1634</span>    assert_array_almost_equal(p, [0.0, 1.0, 0.0, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1635</span>    assert_array_almost_equal(r, [0.0, 0.5, 0.0, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1636</span>    assert_array_almost_equal(f, [0.0, 0.66, 0.0, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1637</span>    assert_array_almost_equal(s, [1, 2, 1, 0], 2)</div>
<div class="line"><span class="lineno"> 1638</span> </div>
<div class="line"><span class="lineno"> 1639</span>    f2 = fbeta_score(y_true, y_pred, beta=2, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1640</span>    support = s</div>
<div class="line"><span class="lineno"> 1641</span>    assert_array_almost_equal(f2, [0, 0.55, 0, 0], 2)</div>
<div class="line"><span class="lineno"> 1642</span> </div>
<div class="line"><span class="lineno"> 1643</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1644</span>    assert_almost_equal(p, 0.25)</div>
<div class="line"><span class="lineno"> 1645</span>    assert_almost_equal(r, 0.25)</div>
<div class="line"><span class="lineno"> 1646</span>    assert_almost_equal(f, 2 * 0.25 * 0.25 / 0.5)</div>
<div class="line"><span class="lineno"> 1647</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1648</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1649</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;micro&quot;</span>),</div>
<div class="line"><span class="lineno"> 1650</span>        (1 + 4) * p * r / (4 * p + r),</div>
<div class="line"><span class="lineno"> 1651</span>    )</div>
<div class="line"><span class="lineno"> 1652</span> </div>
<div class="line"><span class="lineno"> 1653</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1654</span>    assert_almost_equal(p, 0.25)</div>
<div class="line"><span class="lineno"> 1655</span>    assert_almost_equal(r, 0.125)</div>
<div class="line"><span class="lineno"> 1656</span>    assert_almost_equal(f, 2 / 12)</div>
<div class="line"><span class="lineno"> 1657</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1658</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1659</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;macro&quot;</span>), np.mean(f2)</div>
<div class="line"><span class="lineno"> 1660</span>    )</div>
<div class="line"><span class="lineno"> 1661</span> </div>
<div class="line"><span class="lineno"> 1662</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>)</div>
<div class="line"><span class="lineno"> 1663</span>    assert_almost_equal(p, 2 / 4)</div>
<div class="line"><span class="lineno"> 1664</span>    assert_almost_equal(r, 1 / 4)</div>
<div class="line"><span class="lineno"> 1665</span>    assert_almost_equal(f, 2 / 3 * 2 / 4)</div>
<div class="line"><span class="lineno"> 1666</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1667</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1668</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;weighted&quot;</span>),</div>
<div class="line"><span class="lineno"> 1669</span>        np.average(f2, weights=support),</div>
<div class="line"><span class="lineno"> 1670</span>    )</div>
<div class="line"><span class="lineno"> 1671</span> </div>
<div class="line"><span class="lineno"> 1672</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno"> 1673</span>    <span class="comment"># Check samples</span></div>
<div class="line"><span class="lineno"> 1674</span>    <span class="comment"># |h(x_i) inter y_i | = [0, 0, 1]</span></div>
<div class="line"><span class="lineno"> 1675</span>    <span class="comment"># |y_i| = [1, 1, 2]</span></div>
<div class="line"><span class="lineno"> 1676</span>    <span class="comment"># |h(x_i)| = [1, 1, 2]</span></div>
<div class="line"><span class="lineno"> 1677</span> </div>
<div class="line"><span class="lineno"> 1678</span>    assert_almost_equal(p, 1 / 6)</div>
<div class="line"><span class="lineno"> 1679</span>    assert_almost_equal(r, 1 / 6)</div>
<div class="line"><span class="lineno"> 1680</span>    assert_almost_equal(f, 2 / 4 * 1 / 3)</div>
<div class="line"><span class="lineno"> 1681</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1682</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1683</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;samples&quot;</span>), 0.1666, 2</div>
<div class="line"><span class="lineno"> 1684</span>    )</div>
<div class="line"><span class="lineno"> 1685</span> </div>
<div class="line"><span class="lineno"> 1686</span> </div>
<div class="line"><span class="lineno"> 1687</span><span class="preprocessor">@ignore_warnings</span></div>
<div class="line"><span class="lineno"> 1688</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [&quot;warn&quot;, 0, 1])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5dddb0c39b56cb414f00a56895fd700" name="af5dddb0c39b56cb414f00a56895fd700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5dddb0c39b56cb414f00a56895fd700">&#9670;&#160;</a></span>test_precision_recall_f1_score_with_an_empty_prediction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f1_score_with_an_empty_prediction </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1689</span><span class="keyword">def </span>test_precision_recall_f1_score_with_an_empty_prediction(zero_division):</div>
<div class="line"><span class="lineno"> 1690</span>    y_true = np.array([[0, 1, 0, 0], [1, 0, 0, 0], [0, 1, 1, 0]])</div>
<div class="line"><span class="lineno"> 1691</span>    y_pred = np.array([[0, 0, 0, 0], [0, 0, 0, 1], [0, 1, 1, 0]])</div>
<div class="line"><span class="lineno"> 1692</span> </div>
<div class="line"><span class="lineno"> 1693</span>    <span class="comment"># true_pos = [ 0.  1.  1.  0.]</span></div>
<div class="line"><span class="lineno"> 1694</span>    <span class="comment"># false_pos = [ 0.  0.  0.  1.]</span></div>
<div class="line"><span class="lineno"> 1695</span>    <span class="comment"># false_neg = [ 1.  1.  0.  0.]</span></div>
<div class="line"><span class="lineno"> 1696</span>    zero_division = 1.0 <span class="keywordflow">if</span> zero_division == 1.0 <span class="keywordflow">else</span> 0.0</div>
<div class="line"><span class="lineno"> 1697</span>    p, r, f, s = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno"> 1698</span>        y_true, y_pred, average=<span class="keywordtype">None</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1699</span>    )</div>
<div class="line"><span class="lineno"> 1700</span>    assert_array_almost_equal(p, [zero_division, 1.0, 1.0, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1701</span>    assert_array_almost_equal(r, [0.0, 0.5, 1.0, zero_division], 2)</div>
<div class="line"><span class="lineno"> 1702</span>    assert_array_almost_equal(f, [0.0, 1 / 1.5, 1, 0.0], 2)</div>
<div class="line"><span class="lineno"> 1703</span>    assert_array_almost_equal(s, [1, 2, 1, 0], 2)</div>
<div class="line"><span class="lineno"> 1704</span> </div>
<div class="line"><span class="lineno"> 1705</span>    f2 = fbeta_score(y_true, y_pred, beta=2, average=<span class="keywordtype">None</span>, zero_division=zero_division)</div>
<div class="line"><span class="lineno"> 1706</span>    support = s</div>
<div class="line"><span class="lineno"> 1707</span>    assert_array_almost_equal(f2, [0, 0.55, 1, 0], 2)</div>
<div class="line"><span class="lineno"> 1708</span> </div>
<div class="line"><span class="lineno"> 1709</span>    p, r, f, s = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno"> 1710</span>        y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1711</span>    )</div>
<div class="line"><span class="lineno"> 1712</span>    assert_almost_equal(p, (2 + zero_division) / 4)</div>
<div class="line"><span class="lineno"> 1713</span>    assert_almost_equal(r, (1.5 + zero_division) / 4)</div>
<div class="line"><span class="lineno"> 1714</span>    assert_almost_equal(f, 2.5 / (4 * 1.5))</div>
<div class="line"><span class="lineno"> 1715</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1716</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1717</span>        fbeta_score(y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;macro&quot;</span>), np.mean(f2)</div>
<div class="line"><span class="lineno"> 1718</span>    )</div>
<div class="line"><span class="lineno"> 1719</span> </div>
<div class="line"><span class="lineno"> 1720</span>    p, r, f, s = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno"> 1721</span>        y_true, y_pred, average=<span class="stringliteral">&quot;micro&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1722</span>    )</div>
<div class="line"><span class="lineno"> 1723</span>    assert_almost_equal(p, 2 / 3)</div>
<div class="line"><span class="lineno"> 1724</span>    assert_almost_equal(r, 0.5)</div>
<div class="line"><span class="lineno"> 1725</span>    assert_almost_equal(f, 2 / 3 / (2 / 3 + 0.5))</div>
<div class="line"><span class="lineno"> 1726</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1727</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1728</span>        fbeta_score(</div>
<div class="line"><span class="lineno"> 1729</span>            y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;micro&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1730</span>        ),</div>
<div class="line"><span class="lineno"> 1731</span>        (1 + 4) * p * r / (4 * p + r),</div>
<div class="line"><span class="lineno"> 1732</span>    )</div>
<div class="line"><span class="lineno"> 1733</span> </div>
<div class="line"><span class="lineno"> 1734</span>    p, r, f, s = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno"> 1735</span>        y_true, y_pred, average=<span class="stringliteral">&quot;weighted&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1736</span>    )</div>
<div class="line"><span class="lineno"> 1737</span>    assert_almost_equal(p, 3 / 4 <span class="keywordflow">if</span> zero_division == 0 <span class="keywordflow">else</span> 1.0)</div>
<div class="line"><span class="lineno"> 1738</span>    assert_almost_equal(r, 0.5)</div>
<div class="line"><span class="lineno"> 1739</span>    assert_almost_equal(f, (2 / 1.5 + 1) / 4)</div>
<div class="line"><span class="lineno"> 1740</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1741</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1742</span>        fbeta_score(</div>
<div class="line"><span class="lineno"> 1743</span>            y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;weighted&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1744</span>        ),</div>
<div class="line"><span class="lineno"> 1745</span>        np.average(f2, weights=support),</div>
<div class="line"><span class="lineno"> 1746</span>    )</div>
<div class="line"><span class="lineno"> 1747</span> </div>
<div class="line"><span class="lineno"> 1748</span>    p, r, f, s = precision_recall_fscore_support(y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno"> 1749</span>    <span class="comment"># |h(x_i) inter y_i | = [0, 0, 2]</span></div>
<div class="line"><span class="lineno"> 1750</span>    <span class="comment"># |y_i| = [1, 1, 2]</span></div>
<div class="line"><span class="lineno"> 1751</span>    <span class="comment"># |h(x_i)| = [0, 1, 2]</span></div>
<div class="line"><span class="lineno"> 1752</span>    assert_almost_equal(p, 1 / 3)</div>
<div class="line"><span class="lineno"> 1753</span>    assert_almost_equal(r, 1 / 3)</div>
<div class="line"><span class="lineno"> 1754</span>    assert_almost_equal(f, 1 / 3)</div>
<div class="line"><span class="lineno"> 1755</span>    <span class="keyword">assert</span> s <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1756</span>    assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1757</span>        fbeta_score(</div>
<div class="line"><span class="lineno"> 1758</span>            y_true, y_pred, beta=2, average=<span class="stringliteral">&quot;samples&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1759</span>        ),</div>
<div class="line"><span class="lineno"> 1760</span>        0.333,</div>
<div class="line"><span class="lineno"> 1761</span>        2,</div>
<div class="line"><span class="lineno"> 1762</span>    )</div>
<div class="line"><span class="lineno"> 1763</span> </div>
<div class="line"><span class="lineno"> 1764</span> </div>
<div class="line"><span class="lineno"> 1765</span><span class="preprocessor">@pytest.mark.parametrize(&quot;beta&quot;, [1])</span></div>
<div class="line"><span class="lineno"> 1766</span><span class="preprocessor">@pytest.mark.parametrize(&quot;average&quot;, [&quot;macro&quot;, &quot;micro&quot;, &quot;weighted&quot;, &quot;samples&quot;])</span></div>
<div class="line"><span class="lineno"> 1767</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [0, 1])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3cff3e56dba7a8425652781fae74d1f3" name="a3cff3e56dba7a8425652781fae74d1f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cff3e56dba7a8425652781fae74d1f3">&#9670;&#160;</a></span>test_precision_recall_f_binary_single_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f_binary_single_class </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  266</span><span class="keyword">def </span>test_precision_recall_f_binary_single_class():</div>
<div class="line"><span class="lineno">  267</span>    <span class="comment"># Test precision, recall and F-scores behave with a single positive or</span></div>
<div class="line"><span class="lineno">  268</span>    <span class="comment"># negative class</span></div>
<div class="line"><span class="lineno">  269</span>    <span class="comment"># Such a case may occur with non-stratified cross-validation</span></div>
<div class="line"><span class="lineno">  270</span>    <span class="keyword">assert</span> 1.0 == precision_score([1, 1], [1, 1])</div>
<div class="line"><span class="lineno">  271</span>    <span class="keyword">assert</span> 1.0 == recall_score([1, 1], [1, 1])</div>
<div class="line"><span class="lineno">  272</span>    <span class="keyword">assert</span> 1.0 == f1_score([1, 1], [1, 1])</div>
<div class="line"><span class="lineno">  273</span>    <span class="keyword">assert</span> 1.0 == fbeta_score([1, 1], [1, 1], beta=0)</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>    <span class="keyword">assert</span> 0.0 == precision_score([-1, -1], [-1, -1])</div>
<div class="line"><span class="lineno">  276</span>    <span class="keyword">assert</span> 0.0 == recall_score([-1, -1], [-1, -1])</div>
<div class="line"><span class="lineno">  277</span>    <span class="keyword">assert</span> 0.0 == f1_score([-1, -1], [-1, -1])</div>
<div class="line"><span class="lineno">  278</span>    <span class="keyword">assert</span> 0.0 == fbeta_score([-1, -1], [-1, -1], beta=float(<span class="stringliteral">&quot;inf&quot;</span>))</div>
<div class="line"><span class="lineno">  279</span>    <span class="keyword">assert</span> fbeta_score([-1, -1], [-1, -1], beta=float(<span class="stringliteral">&quot;inf&quot;</span>)) == pytest.approx(</div>
<div class="line"><span class="lineno">  280</span>        fbeta_score([-1, -1], [-1, -1], beta=1e5)</div>
<div class="line"><span class="lineno">  281</span>    )</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af83113c4b50514b5c79af8b46f5937dd" name="af83113c4b50514b5c79af8b46f5937dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af83113c4b50514b5c79af8b46f5937dd">&#9670;&#160;</a></span>test_precision_recall_f_extra_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f_extra_labels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  285</span><span class="keyword">def </span>test_precision_recall_f_extra_labels():</div>
<div class="line"><span class="lineno">  286</span>    <span class="comment"># Test handling of explicit additional (not in input) labels to PRF</span></div>
<div class="line"><span class="lineno">  287</span>    y_true = [1, 3, 3, 2]</div>
<div class="line"><span class="lineno">  288</span>    y_pred = [1, 1, 3, 2]</div>
<div class="line"><span class="lineno">  289</span>    y_true_bin = label_binarize(y_true, classes=np.arange(5))</div>
<div class="line"><span class="lineno">  290</span>    y_pred_bin = label_binarize(y_pred, classes=np.arange(5))</div>
<div class="line"><span class="lineno">  291</span>    data = [(y_true, y_pred), (y_true_bin, y_pred_bin)]</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    <span class="keywordflow">for</span> i, (y_true, y_pred) <span class="keywordflow">in</span> enumerate(data):</div>
<div class="line"><span class="lineno">  294</span>        <span class="comment"># No average: zeros in array</span></div>
<div class="line"><span class="lineno">  295</span>        actual = recall_score(y_true, y_pred, labels=[0, 1, 2, 3, 4], average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  296</span>        assert_array_almost_equal([0.0, 1.0, 1.0, 0.5, 0.0], actual)</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>        <span class="comment"># Macro average is changed</span></div>
<div class="line"><span class="lineno">  299</span>        actual = recall_score(y_true, y_pred, labels=[0, 1, 2, 3, 4], average=<span class="stringliteral">&quot;macro&quot;</span>)</div>
<div class="line"><span class="lineno">  300</span>        assert_array_almost_equal(np.mean([0.0, 1.0, 1.0, 0.5, 0.0]), actual)</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>        <span class="comment"># No effect otherwise</span></div>
<div class="line"><span class="lineno">  303</span>        <span class="keywordflow">for</span> average <span class="keywordflow">in</span> [<span class="stringliteral">&quot;micro&quot;</span>, <span class="stringliteral">&quot;weighted&quot;</span>, <span class="stringliteral">&quot;samples&quot;</span>]:</div>
<div class="line"><span class="lineno">  304</span>            <span class="keywordflow">if</span> average == <span class="stringliteral">&quot;samples&quot;</span> <span class="keywordflow">and</span> i == 0:</div>
<div class="line"><span class="lineno">  305</span>                <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  306</span>            assert_almost_equal(</div>
<div class="line"><span class="lineno">  307</span>                recall_score(y_true, y_pred, labels=[0, 1, 2, 3, 4], average=average),</div>
<div class="line"><span class="lineno">  308</span>                recall_score(y_true, y_pred, labels=<span class="keywordtype">None</span>, average=average),</div>
<div class="line"><span class="lineno">  309</span>            )</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>    <span class="comment"># Error when introducing invalid label in multilabel case</span></div>
<div class="line"><span class="lineno">  312</span>    <span class="comment"># (although it would only affect performance if average=&#39;macro&#39;/None)</span></div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">for</span> average <span class="keywordflow">in</span> [<span class="keywordtype">None</span>, <span class="stringliteral">&quot;macro&quot;</span>, <span class="stringliteral">&quot;micro&quot;</span>, <span class="stringliteral">&quot;samples&quot;</span>]:</div>
<div class="line"><span class="lineno">  314</span>        <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  315</span>            recall_score(y_true_bin, y_pred_bin, labels=np.arange(6), average=average)</div>
<div class="line"><span class="lineno">  316</span>        <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  317</span>            recall_score(</div>
<div class="line"><span class="lineno">  318</span>                y_true_bin, y_pred_bin, labels=np.arange(-1, 4), average=average</div>
<div class="line"><span class="lineno">  319</span>            )</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    <span class="comment"># tests non-regression on issue #10307</span></div>
<div class="line"><span class="lineno">  322</span>    y_true = np.array([[0, 1, 1], [1, 0, 0]])</div>
<div class="line"><span class="lineno">  323</span>    y_pred = np.array([[1, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno">  324</span>    p, r, f, _ = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno">  325</span>        y_true, y_pred, average=<span class="stringliteral">&quot;samples&quot;</span>, labels=[0, 1]</div>
<div class="line"><span class="lineno">  326</span>    )</div>
<div class="line"><span class="lineno">  327</span>    assert_almost_equal(np.array([p, r, f]), np.array([3 / 4, 1, 5 / 6]))</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a655662bdb32791b78d7007adabf611d2" name="a655662bdb32791b78d7007adabf611d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a655662bdb32791b78d7007adabf611d2">&#9670;&#160;</a></span>test_precision_recall_f_ignored_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f_ignored_labels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  331</span><span class="keyword">def </span>test_precision_recall_f_ignored_labels():</div>
<div class="line"><span class="lineno">  332</span>    <span class="comment"># Test a subset of labels may be requested for PRF</span></div>
<div class="line"><span class="lineno">  333</span>    y_true = [1, 1, 2, 3]</div>
<div class="line"><span class="lineno">  334</span>    y_pred = [1, 3, 3, 3]</div>
<div class="line"><span class="lineno">  335</span>    y_true_bin = label_binarize(y_true, classes=np.arange(5))</div>
<div class="line"><span class="lineno">  336</span>    y_pred_bin = label_binarize(y_pred, classes=np.arange(5))</div>
<div class="line"><span class="lineno">  337</span>    data = [(y_true, y_pred), (y_true_bin, y_pred_bin)]</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">for</span> i, (y_true, y_pred) <span class="keywordflow">in</span> enumerate(data):</div>
<div class="line"><span class="lineno">  340</span>        recall_13 = partial(recall_score, y_true, y_pred, labels=[1, 3])</div>
<div class="line"><span class="lineno">  341</span>        recall_all = partial(recall_score, y_true, y_pred, labels=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>        assert_array_almost_equal([0.5, 1.0], recall_13(average=<span class="keywordtype">None</span>))</div>
<div class="line"><span class="lineno">  344</span>        assert_almost_equal((0.5 + 1.0) / 2, recall_13(average=<span class="stringliteral">&quot;macro&quot;</span>))</div>
<div class="line"><span class="lineno">  345</span>        assert_almost_equal((0.5 * 2 + 1.0 * 1) / 3, recall_13(average=<span class="stringliteral">&quot;weighted&quot;</span>))</div>
<div class="line"><span class="lineno">  346</span>        assert_almost_equal(2.0 / 3, recall_13(average=<span class="stringliteral">&quot;micro&quot;</span>))</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>        <span class="comment"># ensure the above were meaningful tests:</span></div>
<div class="line"><span class="lineno">  349</span>        <span class="keywordflow">for</span> average <span class="keywordflow">in</span> [<span class="stringliteral">&quot;macro&quot;</span>, <span class="stringliteral">&quot;weighted&quot;</span>, <span class="stringliteral">&quot;micro&quot;</span>]:</div>
<div class="line"><span class="lineno">  350</span>            <span class="keyword">assert</span> recall_13(average=average) != recall_all(average=average)</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a14423894d6682029a03d2289d3562368" name="a14423894d6682029a03d2289d3562368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14423894d6682029a03d2289d3562368">&#9670;&#160;</a></span>test_precision_recall_f_unused_pos_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_f_unused_pos_label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  407</span><span class="keyword">def </span>test_precision_recall_f_unused_pos_label():</div>
<div class="line"><span class="lineno">  408</span>    <span class="comment"># Check warning that pos_label unused when set to non-default value</span></div>
<div class="line"><span class="lineno">  409</span>    <span class="comment"># but average != &#39;binary&#39;; even if data is binary.</span></div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>    msg = (</div>
<div class="line"><span class="lineno">  412</span>        <span class="stringliteral">r&quot;Note that pos_label \&zwj;(set to 2\&zwj;) is &quot;</span></div>
<div class="line"><span class="lineno">  413</span>        <span class="stringliteral">r&quot;ignored when average != &#39;binary&#39; \&zwj;(got &#39;macro&#39;\&zwj;). You &quot;</span></div>
<div class="line"><span class="lineno">  414</span>        <span class="stringliteral">r&quot;may use labels=\[pos_label\] to specify a single &quot;</span></div>
<div class="line"><span class="lineno">  415</span>        <span class="stringliteral">&quot;positive class.&quot;</span></div>
<div class="line"><span class="lineno">  416</span>    )</div>
<div class="line"><span class="lineno">  417</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=msg):</div>
<div class="line"><span class="lineno">  418</span>        precision_recall_fscore_support(</div>
<div class="line"><span class="lineno">  419</span>            [1, 2, 1], [1, 2, 2], pos_label=2, average=<span class="stringliteral">&quot;macro&quot;</span></div>
<div class="line"><span class="lineno">  420</span>        )</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a43c9413c38317af8fa194fb9a6748d32" name="a43c9413c38317af8fa194fb9a6748d32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43c9413c38317af8fa194fb9a6748d32">&#9670;&#160;</a></span>test_precision_recall_fscore_support_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_recall_fscore_support_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  391</span><span class="keyword">def </span>test_precision_recall_fscore_support_errors():</div>
<div class="line"><span class="lineno">  392</span>    y_true, y_pred, _ = make_prediction(binary=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>    <span class="comment"># Bad beta</span></div>
<div class="line"><span class="lineno">  395</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  396</span>        precision_recall_fscore_support(y_true, y_pred, beta=-0.1)</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>    <span class="comment"># Bad pos_label</span></div>
<div class="line"><span class="lineno">  399</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  400</span>        precision_recall_fscore_support(y_true, y_pred, pos_label=2, average=<span class="stringliteral">&quot;binary&quot;</span>)</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>    <span class="comment"># Bad average option</span></div>
<div class="line"><span class="lineno">  403</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  404</span>        precision_recall_fscore_support([0, 1, 2], [1, 2, 0], average=<span class="stringliteral">&quot;mega&quot;</span>)</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ee50850629cf7860b5245f65f2ed7a7" name="a9ee50850629cf7860b5245f65f2ed7a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee50850629cf7860b5245f65f2ed7a7">&#9670;&#160;</a></span>test_precision_refcall_f1_score_multilabel_unordered_labels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_refcall_f1_score_multilabel_unordered_labels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>average</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  972</span><span class="keyword">def </span>test_precision_refcall_f1_score_multilabel_unordered_labels(average):</div>
<div class="line"><span class="lineno">  973</span>    <span class="comment"># test that labels need not be sorted in the multilabel case</span></div>
<div class="line"><span class="lineno">  974</span>    y_true = np.array([[1, 1, 0, 0]])</div>
<div class="line"><span class="lineno">  975</span>    y_pred = np.array([[0, 0, 1, 1]])</div>
<div class="line"><span class="lineno">  976</span>    p, r, f, s = precision_recall_fscore_support(</div>
<div class="line"><span class="lineno">  977</span>        y_true, y_pred, labels=[3, 0, 1, 2], warn_for=[], average=average</div>
<div class="line"><span class="lineno">  978</span>    )</div>
<div class="line"><span class="lineno">  979</span>    assert_array_equal(p, 0)</div>
<div class="line"><span class="lineno">  980</span>    assert_array_equal(r, 0)</div>
<div class="line"><span class="lineno">  981</span>    assert_array_equal(f, 0)</div>
<div class="line"><span class="lineno">  982</span>    <span class="keywordflow">if</span> average <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  983</span>        assert_array_equal(s, [0, 1, 1, 0])</div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a35e1e5a7da6c27f452cdcd041df6f1a7" name="a35e1e5a7da6c27f452cdcd041df6f1a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35e1e5a7da6c27f452cdcd041df6f1a7">&#9670;&#160;</a></span>test_precision_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_precision_warnings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2084</span><span class="keyword">def </span>test_precision_warnings(zero_division):</div>
<div class="line"><span class="lineno"> 2085</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>) <span class="keyword">as</span> record:</div>
<div class="line"><span class="lineno"> 2086</span>        warnings.simplefilter(<span class="stringliteral">&quot;always&quot;</span>)</div>
<div class="line"><span class="lineno"> 2087</span>        precision_score(</div>
<div class="line"><span class="lineno"> 2088</span>            np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2089</span>            np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2090</span>            average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2091</span>            zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2092</span>        )</div>
<div class="line"><span class="lineno"> 2093</span>        <span class="keywordflow">if</span> zero_division == <span class="stringliteral">&quot;warn&quot;</span>:</div>
<div class="line"><span class="lineno"> 2094</span>            <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 2095</span>                str(record.pop().message)</div>
<div class="line"><span class="lineno"> 2096</span>                == <span class="stringliteral">&quot;Precision is ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 2097</span>                <span class="stringliteral">&quot;being set to 0.0 due to no predicted samples.&quot;</span></div>
<div class="line"><span class="lineno"> 2098</span>                <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 2099</span>                <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 2100</span>            )</div>
<div class="line"><span class="lineno"> 2101</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2102</span>            <span class="keyword">assert</span> len(record) == 0</div>
<div class="line"><span class="lineno"> 2103</span> </div>
<div class="line"><span class="lineno"> 2104</span>        precision_score([0, 0], [0, 0])</div>
<div class="line"><span class="lineno"> 2105</span>        <span class="keywordflow">if</span> zero_division == <span class="stringliteral">&quot;warn&quot;</span>:</div>
<div class="line"><span class="lineno"> 2106</span>            <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 2107</span>                str(record.pop().message)</div>
<div class="line"><span class="lineno"> 2108</span>                == <span class="stringliteral">&quot;Precision is ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 2109</span>                <span class="stringliteral">&quot;being set to 0.0 due to no predicted samples.&quot;</span></div>
<div class="line"><span class="lineno"> 2110</span>                <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 2111</span>                <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 2112</span>            )</div>
<div class="line"><span class="lineno"> 2113</span> </div>
<div class="line"><span class="lineno"> 2114</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 2115</span>        precision_score,</div>
<div class="line"><span class="lineno"> 2116</span>        np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2117</span>        np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2118</span>        average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2119</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2120</span>    )</div>
<div class="line"><span class="lineno"> 2121</span> </div>
<div class="line"><span class="lineno"> 2122</span> </div>
<div class="line"><span class="lineno"> 2123</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [&quot;warn&quot;, 0, 1])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a585d5407359d666dfa19744877ee4922" name="a585d5407359d666dfa19744877ee4922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a585d5407359d666dfa19744877ee4922">&#9670;&#160;</a></span>test_prf_average_binary_data_non_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_prf_average_binary_data_non_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2163</span><span class="keyword">def </span>test_prf_average_binary_data_non_binary():</div>
<div class="line"><span class="lineno"> 2164</span>    <span class="comment"># Error if user does not explicitly set non-binary average mode</span></div>
<div class="line"><span class="lineno"> 2165</span>    y_true_mc = [1, 2, 3, 3]</div>
<div class="line"><span class="lineno"> 2166</span>    y_pred_mc = [1, 2, 3, 1]</div>
<div class="line"><span class="lineno"> 2167</span>    msg_mc = (</div>
<div class="line"><span class="lineno"> 2168</span>        <span class="stringliteral">r&quot;Target is multiclass but average=&#39;binary&#39;. Please &quot;</span></div>
<div class="line"><span class="lineno"> 2169</span>        <span class="stringliteral">r&quot;choose another average setting, one of \[&quot;</span></div>
<div class="line"><span class="lineno"> 2170</span>        <span class="stringliteral">r&quot;None, &#39;micro&#39;, &#39;macro&#39;, &#39;weighted&#39;\].&quot;</span></div>
<div class="line"><span class="lineno"> 2171</span>    )</div>
<div class="line"><span class="lineno"> 2172</span>    y_true_ind = np.array([[0, 1, 1], [1, 0, 0], [0, 0, 1]])</div>
<div class="line"><span class="lineno"> 2173</span>    y_pred_ind = np.array([[0, 1, 0], [1, 0, 0], [0, 0, 1]])</div>
<div class="line"><span class="lineno"> 2174</span>    msg_ind = (</div>
<div class="line"><span class="lineno"> 2175</span>        <span class="stringliteral">r&quot;Target is multilabel-indicator but average=&#39;binary&#39;. Please &quot;</span></div>
<div class="line"><span class="lineno"> 2176</span>        <span class="stringliteral">r&quot;choose another average setting, one of \[&quot;</span></div>
<div class="line"><span class="lineno"> 2177</span>        <span class="stringliteral">r&quot;None, &#39;micro&#39;, &#39;macro&#39;, &#39;weighted&#39;, &#39;samples&#39;\].&quot;</span></div>
<div class="line"><span class="lineno"> 2178</span>    )</div>
<div class="line"><span class="lineno"> 2179</span> </div>
<div class="line"><span class="lineno"> 2180</span>    <span class="keywordflow">for</span> y_true, y_pred, msg <span class="keywordflow">in</span> [</div>
<div class="line"><span class="lineno"> 2181</span>        (y_true_mc, y_pred_mc, msg_mc),</div>
<div class="line"><span class="lineno"> 2182</span>        (y_true_ind, y_pred_ind, msg_ind),</div>
<div class="line"><span class="lineno"> 2183</span>    ]:</div>
<div class="line"><span class="lineno"> 2184</span>        <span class="keywordflow">for</span> metric <span class="keywordflow">in</span> [</div>
<div class="line"><span class="lineno"> 2185</span>            precision_score,</div>
<div class="line"><span class="lineno"> 2186</span>            recall_score,</div>
<div class="line"><span class="lineno"> 2187</span>            f1_score,</div>
<div class="line"><span class="lineno"> 2188</span>            partial(fbeta_score, beta=2),</div>
<div class="line"><span class="lineno"> 2189</span>        ]:</div>
<div class="line"><span class="lineno"> 2190</span>            <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 2191</span>                metric(y_true, y_pred)</div>
<div class="line"><span class="lineno"> 2192</span> </div>
<div class="line"><span class="lineno"> 2193</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2140a5aad92c9032de98833d8c7ec0f7" name="a2140a5aad92c9032de98833d8c7ec0f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2140a5aad92c9032de98833d8c7ec0f7">&#9670;&#160;</a></span>test_prf_no_warnings_if_zero_division_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_prf_no_warnings_if_zero_division_set </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1980</span><span class="keyword">def </span>test_prf_no_warnings_if_zero_division_set(zero_division):</div>
<div class="line"><span class="lineno"> 1981</span>    <span class="comment"># average of per-label scores</span></div>
<div class="line"><span class="lineno"> 1982</span>    f = precision_recall_fscore_support</div>
<div class="line"><span class="lineno"> 1983</span>    <span class="keywordflow">for</span> average <span class="keywordflow">in</span> [<span class="keywordtype">None</span>, <span class="stringliteral">&quot;weighted&quot;</span>, <span class="stringliteral">&quot;macro&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1984</span> </div>
<div class="line"><span class="lineno"> 1985</span>        assert_no_warnings(</div>
<div class="line"><span class="lineno"> 1986</span>            f, [0, 1, 2], [1, 1, 2], average=average, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1987</span>        )</div>
<div class="line"><span class="lineno"> 1988</span> </div>
<div class="line"><span class="lineno"> 1989</span>        assert_no_warnings(</div>
<div class="line"><span class="lineno"> 1990</span>            f, [1, 1, 2], [0, 1, 2], average=average, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 1991</span>        )</div>
<div class="line"><span class="lineno"> 1992</span> </div>
<div class="line"><span class="lineno"> 1993</span>    <span class="comment"># average of per-sample scores</span></div>
<div class="line"><span class="lineno"> 1994</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 1995</span>        f,</div>
<div class="line"><span class="lineno"> 1996</span>        np.array([[1, 0], [1, 0]]),</div>
<div class="line"><span class="lineno"> 1997</span>        np.array([[1, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 1998</span>        average=<span class="stringliteral">&quot;samples&quot;</span>,</div>
<div class="line"><span class="lineno"> 1999</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2000</span>    )</div>
<div class="line"><span class="lineno"> 2001</span> </div>
<div class="line"><span class="lineno"> 2002</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 2003</span>        f,</div>
<div class="line"><span class="lineno"> 2004</span>        np.array([[1, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2005</span>        np.array([[1, 0], [1, 0]]),</div>
<div class="line"><span class="lineno"> 2006</span>        average=<span class="stringliteral">&quot;samples&quot;</span>,</div>
<div class="line"><span class="lineno"> 2007</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2008</span>    )</div>
<div class="line"><span class="lineno"> 2009</span> </div>
<div class="line"><span class="lineno"> 2010</span>    <span class="comment"># single score: micro-average</span></div>
<div class="line"><span class="lineno"> 2011</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 2012</span>        f,</div>
<div class="line"><span class="lineno"> 2013</span>        np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2014</span>        np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2015</span>        average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2016</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2017</span>    )</div>
<div class="line"><span class="lineno"> 2018</span> </div>
<div class="line"><span class="lineno"> 2019</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 2020</span>        f,</div>
<div class="line"><span class="lineno"> 2021</span>        np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2022</span>        np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2023</span>        average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2024</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2025</span>    )</div>
<div class="line"><span class="lineno"> 2026</span> </div>
<div class="line"><span class="lineno"> 2027</span>    <span class="comment"># single positive label</span></div>
<div class="line"><span class="lineno"> 2028</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 2029</span>        f, [1, 1], [-1, -1], average=<span class="stringliteral">&quot;binary&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 2030</span>    )</div>
<div class="line"><span class="lineno"> 2031</span> </div>
<div class="line"><span class="lineno"> 2032</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 2033</span>        f, [-1, -1], [1, 1], average=<span class="stringliteral">&quot;binary&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 2034</span>    )</div>
<div class="line"><span class="lineno"> 2035</span> </div>
<div class="line"><span class="lineno"> 2036</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>) <span class="keyword">as</span> record:</div>
<div class="line"><span class="lineno"> 2037</span>        warnings.simplefilter(<span class="stringliteral">&quot;always&quot;</span>)</div>
<div class="line"><span class="lineno"> 2038</span>        precision_recall_fscore_support(</div>
<div class="line"><span class="lineno"> 2039</span>            [0, 0], [0, 0], average=<span class="stringliteral">&quot;binary&quot;</span>, zero_division=zero_division</div>
<div class="line"><span class="lineno"> 2040</span>        )</div>
<div class="line"><span class="lineno"> 2041</span>        <span class="keyword">assert</span> len(record) == 0</div>
<div class="line"><span class="lineno"> 2042</span> </div>
<div class="line"><span class="lineno"> 2043</span> </div>
<div class="line"><span class="lineno"> 2044</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [&quot;warn&quot;, 0, 1])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a60b6b410f1fef3e93eb4544d51a14cef" name="a60b6b410f1fef3e93eb4544d51a14cef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60b6b410f1fef3e93eb4544d51a14cef">&#9670;&#160;</a></span>test_prf_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_prf_warnings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1880</span><span class="keyword">def </span>test_prf_warnings():</div>
<div class="line"><span class="lineno"> 1881</span>    <span class="comment"># average of per-label scores</span></div>
<div class="line"><span class="lineno"> 1882</span>    f, w = precision_recall_fscore_support, UndefinedMetricWarning</div>
<div class="line"><span class="lineno"> 1883</span>    <span class="keywordflow">for</span> average <span class="keywordflow">in</span> [<span class="keywordtype">None</span>, <span class="stringliteral">&quot;weighted&quot;</span>, <span class="stringliteral">&quot;macro&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1884</span> </div>
<div class="line"><span class="lineno"> 1885</span>        msg = (</div>
<div class="line"><span class="lineno"> 1886</span>            <span class="stringliteral">&quot;Precision and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1887</span>            <span class="stringliteral">&quot;being set to 0.0 in labels with no predicted samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1888</span>            <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1889</span>            <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1890</span>        )</div>
<div class="line"><span class="lineno"> 1891</span>        <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1892</span>            <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>([0, 1, 2], [1, 1, 2], average=average)</div>
<div class="line"><span class="lineno"> 1893</span> </div>
<div class="line"><span class="lineno"> 1894</span>        msg = (</div>
<div class="line"><span class="lineno"> 1895</span>            <span class="stringliteral">&quot;Recall and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1896</span>            <span class="stringliteral">&quot;being set to 0.0 in labels with no true samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1897</span>            <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1898</span>            <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1899</span>        )</div>
<div class="line"><span class="lineno"> 1900</span>        <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1901</span>            <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>([1, 1, 2], [0, 1, 2], average=average)</div>
<div class="line"><span class="lineno"> 1902</span> </div>
<div class="line"><span class="lineno"> 1903</span>    <span class="comment"># average of per-sample scores</span></div>
<div class="line"><span class="lineno"> 1904</span>    msg = (</div>
<div class="line"><span class="lineno"> 1905</span>        <span class="stringliteral">&quot;Precision and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1906</span>        <span class="stringliteral">&quot;being set to 0.0 in samples with no predicted labels.&quot;</span></div>
<div class="line"><span class="lineno"> 1907</span>        <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1908</span>        <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1909</span>    )</div>
<div class="line"><span class="lineno"> 1910</span>    <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1911</span>        <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>(np.array([[1, 0], [1, 0]]), np.array([[1, 0], [0, 0]]), average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno"> 1912</span> </div>
<div class="line"><span class="lineno"> 1913</span>    msg = (</div>
<div class="line"><span class="lineno"> 1914</span>        <span class="stringliteral">&quot;Recall and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1915</span>        <span class="stringliteral">&quot;being set to 0.0 in samples with no true labels.&quot;</span></div>
<div class="line"><span class="lineno"> 1916</span>        <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1917</span>        <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1918</span>    )</div>
<div class="line"><span class="lineno"> 1919</span>    <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1920</span>        <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>(np.array([[1, 0], [0, 0]]), np.array([[1, 0], [1, 0]]), average=<span class="stringliteral">&quot;samples&quot;</span>)</div>
<div class="line"><span class="lineno"> 1921</span> </div>
<div class="line"><span class="lineno"> 1922</span>    <span class="comment"># single score: micro-average</span></div>
<div class="line"><span class="lineno"> 1923</span>    msg = (</div>
<div class="line"><span class="lineno"> 1924</span>        <span class="stringliteral">&quot;Precision and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1925</span>        <span class="stringliteral">&quot;being set to 0.0 due to no predicted samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1926</span>        <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1927</span>        <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1928</span>    )</div>
<div class="line"><span class="lineno"> 1929</span>    <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1930</span>        <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>(np.array([[1, 1], [1, 1]]), np.array([[0, 0], [0, 0]]), average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1931</span> </div>
<div class="line"><span class="lineno"> 1932</span>    msg = (</div>
<div class="line"><span class="lineno"> 1933</span>        <span class="stringliteral">&quot;Recall and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1934</span>        <span class="stringliteral">&quot;being set to 0.0 due to no true samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1935</span>        <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1936</span>        <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1937</span>    )</div>
<div class="line"><span class="lineno"> 1938</span>    <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1939</span>        <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>(np.array([[0, 0], [0, 0]]), np.array([[1, 1], [1, 1]]), average=<span class="stringliteral">&quot;micro&quot;</span>)</div>
<div class="line"><span class="lineno"> 1940</span> </div>
<div class="line"><span class="lineno"> 1941</span>    <span class="comment"># single positive label</span></div>
<div class="line"><span class="lineno"> 1942</span>    msg = (</div>
<div class="line"><span class="lineno"> 1943</span>        <span class="stringliteral">&quot;Precision and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1944</span>        <span class="stringliteral">&quot;being set to 0.0 due to no predicted samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1945</span>        <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1946</span>        <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1947</span>    )</div>
<div class="line"><span class="lineno"> 1948</span>    <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1949</span>        <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>([1, 1], [-1, -1], average=<span class="stringliteral">&quot;binary&quot;</span>)</div>
<div class="line"><span class="lineno"> 1950</span> </div>
<div class="line"><span class="lineno"> 1951</span>    msg = (</div>
<div class="line"><span class="lineno"> 1952</span>        <span class="stringliteral">&quot;Recall and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1953</span>        <span class="stringliteral">&quot;being set to 0.0 due to no true samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1954</span>        <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1955</span>        <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1956</span>    )</div>
<div class="line"><span class="lineno"> 1957</span>    <span class="keyword">with</span> pytest.warns(w, match=msg):</div>
<div class="line"><span class="lineno"> 1958</span>        <a class="code hl_variable" href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a>([-1, -1], [1, 1], average=<span class="stringliteral">&quot;binary&quot;</span>)</div>
<div class="line"><span class="lineno"> 1959</span> </div>
<div class="line"><span class="lineno"> 1960</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>) <span class="keyword">as</span> record:</div>
<div class="line"><span class="lineno"> 1961</span>        warnings.simplefilter(<span class="stringliteral">&quot;always&quot;</span>)</div>
<div class="line"><span class="lineno"> 1962</span>        precision_recall_fscore_support([0, 0], [0, 0], average=<span class="stringliteral">&quot;binary&quot;</span>)</div>
<div class="line"><span class="lineno"> 1963</span>        msg = (</div>
<div class="line"><span class="lineno"> 1964</span>            <span class="stringliteral">&quot;Recall and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1965</span>            <span class="stringliteral">&quot;being set to 0.0 due to no true samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1966</span>            <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1967</span>            <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1968</span>        )</div>
<div class="line"><span class="lineno"> 1969</span>        <span class="keyword">assert</span> str(record.pop().message) == msg</div>
<div class="line"><span class="lineno"> 1970</span>        msg = (</div>
<div class="line"><span class="lineno"> 1971</span>            <span class="stringliteral">&quot;Precision and F-score are ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 1972</span>            <span class="stringliteral">&quot;being set to 0.0 due to no predicted samples.&quot;</span></div>
<div class="line"><span class="lineno"> 1973</span>            <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 1974</span>            <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 1975</span>        )</div>
<div class="line"><span class="lineno"> 1976</span>        <span class="keyword">assert</span> str(record.pop().message) == msg</div>
<div class="line"><span class="lineno"> 1977</span> </div>
<div class="line"><span class="lineno"> 1978</span> </div>
<div class="line"><span class="lineno"> 1979</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [0, 1])</span></div>
<div class="ttc" id="a__lapack__subroutines_8h_html_af01a903df7bdb7a494f5827e45bf3a2a"><div class="ttname"><a href="__lapack__subroutines_8h.html#af01a903df7bdb7a494f5827e45bf3a2a">f</a></div><div class="ttdeci">void int int int int npy_complex64 int int npy_complex64 float float npy_complex64 npy_complex64 * f</div><div class="ttdef"><b>Definition</b> _lapack_subroutines.h:262</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d83e72e4b1c0043b0abe727319c32dc" name="a7d83e72e4b1c0043b0abe727319c32dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d83e72e4b1c0043b0abe727319c32dc">&#9670;&#160;</a></span>test_recall_warnings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_recall_warnings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>zero_division</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2045</span><span class="keyword">def </span>test_recall_warnings(zero_division):</div>
<div class="line"><span class="lineno"> 2046</span>    assert_no_warnings(</div>
<div class="line"><span class="lineno"> 2047</span>        recall_score,</div>
<div class="line"><span class="lineno"> 2048</span>        np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2049</span>        np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2050</span>        average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2051</span>        zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2052</span>    )</div>
<div class="line"><span class="lineno"> 2053</span>    <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>) <span class="keyword">as</span> record:</div>
<div class="line"><span class="lineno"> 2054</span>        warnings.simplefilter(<span class="stringliteral">&quot;always&quot;</span>)</div>
<div class="line"><span class="lineno"> 2055</span>        recall_score(</div>
<div class="line"><span class="lineno"> 2056</span>            np.array([[0, 0], [0, 0]]),</div>
<div class="line"><span class="lineno"> 2057</span>            np.array([[1, 1], [1, 1]]),</div>
<div class="line"><span class="lineno"> 2058</span>            average=<span class="stringliteral">&quot;micro&quot;</span>,</div>
<div class="line"><span class="lineno"> 2059</span>            zero_division=zero_division,</div>
<div class="line"><span class="lineno"> 2060</span>        )</div>
<div class="line"><span class="lineno"> 2061</span>        <span class="keywordflow">if</span> zero_division == <span class="stringliteral">&quot;warn&quot;</span>:</div>
<div class="line"><span class="lineno"> 2062</span>            <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 2063</span>                str(record.pop().message)</div>
<div class="line"><span class="lineno"> 2064</span>                == <span class="stringliteral">&quot;Recall is ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 2065</span>                <span class="stringliteral">&quot;being set to 0.0 due to no true samples.&quot;</span></div>
<div class="line"><span class="lineno"> 2066</span>                <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 2067</span>                <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 2068</span>            )</div>
<div class="line"><span class="lineno"> 2069</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2070</span>            <span class="keyword">assert</span> len(record) == 0</div>
<div class="line"><span class="lineno"> 2071</span> </div>
<div class="line"><span class="lineno"> 2072</span>        recall_score([0, 0], [0, 0])</div>
<div class="line"><span class="lineno"> 2073</span>        <span class="keywordflow">if</span> zero_division == <span class="stringliteral">&quot;warn&quot;</span>:</div>
<div class="line"><span class="lineno"> 2074</span>            <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno"> 2075</span>                str(record.pop().message)</div>
<div class="line"><span class="lineno"> 2076</span>                == <span class="stringliteral">&quot;Recall is ill-defined and &quot;</span></div>
<div class="line"><span class="lineno"> 2077</span>                <span class="stringliteral">&quot;being set to 0.0 due to no true samples.&quot;</span></div>
<div class="line"><span class="lineno"> 2078</span>                <span class="stringliteral">&quot; Use `zero_division` parameter to control&quot;</span></div>
<div class="line"><span class="lineno"> 2079</span>                <span class="stringliteral">&quot; this behavior.&quot;</span></div>
<div class="line"><span class="lineno"> 2080</span>            )</div>
<div class="line"><span class="lineno"> 2081</span> </div>
<div class="line"><span class="lineno"> 2082</span> </div>
<div class="line"><span class="lineno"> 2083</span><span class="preprocessor">@pytest.mark.parametrize(&quot;zero_division&quot;, [&quot;warn&quot;, 0, 1])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad05bcaf9fa64d8fbbf0670b74eb46baf" name="ad05bcaf9fa64d8fbbf0670b74eb46baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad05bcaf9fa64d8fbbf0670b74eb46baf">&#9670;&#160;</a></span>test_zero_precision_recall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_classification.test_zero_precision_recall </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1003</span><span class="keyword">def </span>test_zero_precision_recall():</div>
<div class="line"><span class="lineno"> 1004</span>    <span class="comment"># Check that pathological cases do not bring NaNs</span></div>
<div class="line"><span class="lineno"> 1005</span> </div>
<div class="line"><span class="lineno"> 1006</span>    old_error_settings = np.seterr(all=<span class="stringliteral">&quot;raise&quot;</span>)</div>
<div class="line"><span class="lineno"> 1007</span> </div>
<div class="line"><span class="lineno"> 1008</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1009</span>        y_true = np.array([0, 1, 2, 0, 1, 2])</div>
<div class="line"><span class="lineno"> 1010</span>        y_pred = np.array([2, 0, 1, 1, 2, 0])</div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>        assert_almost_equal(precision_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.0, 2)</div>
<div class="line"><span class="lineno"> 1013</span>        assert_almost_equal(recall_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.0, 2)</div>
<div class="line"><span class="lineno"> 1014</span>        assert_almost_equal(f1_score(y_true, y_pred, average=<span class="stringliteral">&quot;macro&quot;</span>), 0.0, 2)</div>
<div class="line"><span class="lineno"> 1015</span> </div>
<div class="line"><span class="lineno"> 1016</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno"> 1017</span>        np.seterr(**old_error_settings)</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
