<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: smart_open.s3 Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesmart__open.html">smart_open</a></li><li class="navelem"><a class="el" href="namespacesmart__open_1_1s3.html">s3</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">smart_open.s3 Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmart__open_1_1s3_1_1___client_wrapper.html">_ClientWrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmart__open_1_1s3_1_1___seekable_raw_reader.html">_SeekableRawReader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmart__open_1_1s3_1_1_multipart_writer.html">MultipartWriter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmart__open_1_1s3_1_1_reader.html">Reader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmart__open_1_1s3_1_1_singlepart_writer.html">SinglepartWriter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7a4aca8f0d37976651ff0d72015ad023" id="r_a7a4aca8f0d37976651ff0d72015ad023"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a7a4aca8f0d37976651ff0d72015ad023">parse_uri</a> (uri_as_string)</td></tr>
<tr class="separator:a7a4aca8f0d37976651ff0d72015ad023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ec32108db7a767e0c98498b71b5d4d" id="r_af6ec32108db7a767e0c98498b71b5d4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#af6ec32108db7a767e0c98498b71b5d4d">_consolidate_params</a> (uri, transport_params)</td></tr>
<tr class="separator:af6ec32108db7a767e0c98498b71b5d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d7deb872ec61ac1f4ac1acfca48e10" id="r_aa7d7deb872ec61ac1f4ac1acfca48e10"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#aa7d7deb872ec61ac1f4ac1acfca48e10">open_uri</a> (uri, mode, transport_params)</td></tr>
<tr class="separator:aa7d7deb872ec61ac1f4ac1acfca48e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5fe9bfea79d9f61021f271567eb5fa3" id="r_af5fe9bfea79d9f61021f271567eb5fa3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#af5fe9bfea79d9f61021f271567eb5fa3">open</a> (bucket_id, key_id, mode, version_id=None, buffer_size=<a class="el" href="namespacesmart__open_1_1s3.html#a6c5570825c82f95ed011f66e253d3492">DEFAULT_BUFFER_SIZE</a>, min_part_size=<a class="el" href="namespacesmart__open_1_1s3.html#a1c5fb7289ed2d1c6f5982f004a7c28d7">DEFAULT_MIN_PART_SIZE</a>, multipart_upload=True, defer_seek=False, client=None, client_kwargs=None, writebuffer=None)</td></tr>
<tr class="separator:af5fe9bfea79d9f61021f271567eb5fa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a436ab3c48c021680b2c97fd7c6d71428" id="r_a436ab3c48c021680b2c97fd7c6d71428"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a436ab3c48c021680b2c97fd7c6d71428">_get</a> (client, bucket, key, version, range_string)</td></tr>
<tr class="separator:a436ab3c48c021680b2c97fd7c6d71428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26cea1412a12b40e7942d0fe211f187a" id="r_a26cea1412a12b40e7942d0fe211f187a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a26cea1412a12b40e7942d0fe211f187a">_unwrap_ioerror</a> (ioe)</td></tr>
<tr class="separator:a26cea1412a12b40e7942d0fe211f187a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad217bb9ff33e9fff312eb5f83b78807" id="r_aad217bb9ff33e9fff312eb5f83b78807"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#aad217bb9ff33e9fff312eb5f83b78807">_initialize_boto3</a> (rw, client, client_kwargs, bucket, key)</td></tr>
<tr class="separator:aad217bb9ff33e9fff312eb5f83b78807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4ae0293763a17117c89b3cee70073c" id="r_afe4ae0293763a17117c89b3cee70073c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#afe4ae0293763a17117c89b3cee70073c">_retry_if_failed</a> (partial, attempts=<a class="el" href="namespacesmart__open_1_1s3.html#aa6dc43026ecc0825308c4d1e37d6649f">_UPLOAD_ATTEMPTS</a>, sleep_seconds=<a class="el" href="namespacesmart__open_1_1s3.html#a2969028d9bb07513085964aa41c468ce">_SLEEP_SECONDS</a>, exceptions=None)</td></tr>
<tr class="separator:afe4ae0293763a17117c89b3cee70073c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac85cf473fe998449519099191c3f24e9" id="r_ac85cf473fe998449519099191c3f24e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#ac85cf473fe998449519099191c3f24e9">_accept_all</a> (key)</td></tr>
<tr class="separator:ac85cf473fe998449519099191c3f24e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac567325e6fa46a90ee30217afae4e4bc" id="r_ac567325e6fa46a90ee30217afae4e4bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#ac567325e6fa46a90ee30217afae4e4bc">iter_bucket</a> (bucket_name, prefix='', accept_key=None, key_limit=None, workers=16, retries=3, **session_kwargs)</td></tr>
<tr class="separator:ac567325e6fa46a90ee30217afae4e4bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fa98149816768c48aaa5f17806dc9f6" id="r_a8fa98149816768c48aaa5f17806dc9f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a8fa98149816768c48aaa5f17806dc9f6">_list_bucket</a> (bucket_name, prefix='', accept_key=<a class="el" href="__lapack__subroutines_8h.html#a76093d20ca2e1c5d5216168f26f73e19">lambda</a> k:True, **session_kwargs)</td></tr>
<tr class="separator:a8fa98149816768c48aaa5f17806dc9f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a764b8129ee677cffb71053de3af7a035" id="r_a764b8129ee677cffb71053de3af7a035"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a764b8129ee677cffb71053de3af7a035">_download_key</a> (key_name, bucket_name=None, retries=3, **session_kwargs)</td></tr>
<tr class="separator:a764b8129ee677cffb71053de3af7a035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d50e7ba5a45f854624874eec7973d36" id="r_a6d50e7ba5a45f854624874eec7973d36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a6d50e7ba5a45f854624874eec7973d36">_download_fileobj</a> (bucket, key_name)</td></tr>
<tr class="separator:a6d50e7ba5a45f854624874eec7973d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a167e7e8d46680e11c06049b2d882c0a9" id="r_a167e7e8d46680e11c06049b2d882c0a9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a167e7e8d46680e11c06049b2d882c0a9">MISSING_DEPS</a> = True</td></tr>
<tr class="separator:a167e7e8d46680e11c06049b2d882c0a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8cf0532c3dc3e84ba54b573ff109bdd" id="r_af8cf0532c3dc3e84ba54b573ff109bdd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#af8cf0532c3dc3e84ba54b573ff109bdd">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:af8cf0532c3dc3e84ba54b573ff109bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c5fb7289ed2d1c6f5982f004a7c28d7" id="r_a1c5fb7289ed2d1c6f5982f004a7c28d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a1c5fb7289ed2d1c6f5982f004a7c28d7">DEFAULT_MIN_PART_SIZE</a> = 50 * 1024**2</td></tr>
<tr class="separator:a1c5fb7289ed2d1c6f5982f004a7c28d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d49052e33923d09f2ec7b78725fca25" id="r_a6d49052e33923d09f2ec7b78725fca25"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a6d49052e33923d09f2ec7b78725fca25">MIN_MIN_PART_SIZE</a> = 5 * 1024 ** 2</td></tr>
<tr class="separator:a6d49052e33923d09f2ec7b78725fca25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbbf2645716771bb1db9c8110a484700" id="r_afbbf2645716771bb1db9c8110a484700"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#afbbf2645716771bb1db9c8110a484700">SCHEMES</a> = (&quot;s3&quot;, &quot;s3n&quot;, 's3u', &quot;s3a&quot;)</td></tr>
<tr class="separator:afbbf2645716771bb1db9c8110a484700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97fb378fd584d07c8680f412e636a675" id="r_a97fb378fd584d07c8680f412e636a675"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a97fb378fd584d07c8680f412e636a675">DEFAULT_PORT</a> = 443</td></tr>
<tr class="separator:a97fb378fd584d07c8680f412e636a675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abacb91af46164214da7a2a09250807df" id="r_abacb91af46164214da7a2a09250807df"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#abacb91af46164214da7a2a09250807df">DEFAULT_HOST</a> = 's3.amazonaws.com'</td></tr>
<tr class="separator:abacb91af46164214da7a2a09250807df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c5570825c82f95ed011f66e253d3492" id="r_a6c5570825c82f95ed011f66e253d3492"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a6c5570825c82f95ed011f66e253d3492">DEFAULT_BUFFER_SIZE</a> = 128 * 1024</td></tr>
<tr class="separator:a6c5570825c82f95ed011f66e253d3492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf8ccc46aee0045c17b5458779b9c94b" id="r_abf8ccc46aee0045c17b5458779b9c94b"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#abf8ccc46aee0045c17b5458779b9c94b">URI_EXAMPLES</a></td></tr>
<tr class="separator:abf8ccc46aee0045c17b5458779b9c94b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6dc43026ecc0825308c4d1e37d6649f" id="r_aa6dc43026ecc0825308c4d1e37d6649f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#aa6dc43026ecc0825308c4d1e37d6649f">_UPLOAD_ATTEMPTS</a> = 6</td></tr>
<tr class="separator:aa6dc43026ecc0825308c4d1e37d6649f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2969028d9bb07513085964aa41c468ce" id="r_a2969028d9bb07513085964aa41c468ce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a2969028d9bb07513085964aa41c468ce">_SLEEP_SECONDS</a> = 10</td></tr>
<tr class="separator:a2969028d9bb07513085964aa41c468ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eae2cc368e8d06c7475d946016aaf6f" id="r_a8eae2cc368e8d06c7475d946016aaf6f"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1s3.html#a8eae2cc368e8d06c7475d946016aaf6f">_OUT_OF_RANGE</a> = 'InvalidRange'</td></tr>
<tr class="separator:a8eae2cc368e8d06c7475d946016aaf6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Implements file-like objects for reading and writing from/to AWS S3.</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="ac85cf473fe998449519099191c3f24e9" name="ac85cf473fe998449519099191c3f24e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac85cf473fe998449519099191c3f24e9">&#9670;&#160;</a></span>_accept_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._accept_all </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1103</span><span class="keyword">def </span>_accept_all(key):</div>
<div class="line"><span class="lineno"> 1104</span>    <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1105</span> </div>
<div class="line"><span class="lineno"> 1106</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af6ec32108db7a767e0c98498b71b5d4d" name="af6ec32108db7a767e0c98498b71b5d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6ec32108db7a767e0c98498b71b5d4d">&#9670;&#160;</a></span>_consolidate_params()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._consolidate_params </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transport_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Consolidates the parsed Uri with the additional parameters.

This is necessary because the user can pass some of the parameters can in
two different ways:

1) Via the URI itself
2) Via the transport parameters

These are not mutually exclusive, but we have to pick one over the other
in a sensible way in order to proceed.</pre> <div class="fragment"><div class="line"><span class="lineno">  136</span><span class="keyword">def </span>_consolidate_params(uri, transport_params):</div>
<div class="line"><span class="lineno">  137</span>    <span class="stringliteral">&quot;&quot;&quot;Consolidates the parsed Uri with the additional parameters.</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">    This is necessary because the user can pass some of the parameters can in</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">    two different ways:</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral">    1) Via the URI itself</span></div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">    2) Via the transport parameters</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">    These are not mutually exclusive, but we have to pick one over the other</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">    in a sensible way in order to proceed.</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  149</span>    transport_params = dict(transport_params)</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>    <span class="keyword">def </span>inject(**kwargs):</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  153</span>            client_kwargs = transport_params[<span class="stringliteral">&#39;client_kwargs&#39;</span>]</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">  155</span>            client_kwargs = transport_params[<span class="stringliteral">&#39;client_kwargs&#39;</span>] = {}</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  158</span>            init_kwargs = client_kwargs[<span class="stringliteral">&#39;S3.Client&#39;</span>]</div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">  160</span>            init_kwargs = client_kwargs[<span class="stringliteral">&#39;S3.Client&#39;</span>] = {}</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        init_kwargs.update(**kwargs)</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>    client = transport_params.get(<span class="stringliteral">&#39;client&#39;</span>)</div>
<div class="line"><span class="lineno">  165</span>    <span class="keywordflow">if</span> client <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> (uri[<span class="stringliteral">&#39;access_id&#39;</span>] <span class="keywordflow">or</span> uri[<span class="stringliteral">&#39;access_secret&#39;</span>]):</div>
<div class="line"><span class="lineno">  166</span>        logger.warning(</div>
<div class="line"><span class="lineno">  167</span>            <span class="stringliteral">&#39;ignoring credentials parsed from URL because they conflict with &#39;</span></div>
<div class="line"><span class="lineno">  168</span>            <span class="stringliteral">&#39;transport_params[&quot;client&quot;]. Set transport_params[&quot;client&quot;] to None &#39;</span></div>
<div class="line"><span class="lineno">  169</span>            <span class="stringliteral">&#39;to suppress this warning.&#39;</span></div>
<div class="line"><span class="lineno">  170</span>        )</div>
<div class="line"><span class="lineno">  171</span>        uri.update(access_id=<span class="keywordtype">None</span>, access_secret=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">elif</span> (uri[<span class="stringliteral">&#39;access_id&#39;</span>] <span class="keywordflow">and</span> uri[<span class="stringliteral">&#39;access_secret&#39;</span>]):</div>
<div class="line"><span class="lineno">  173</span>        inject(</div>
<div class="line"><span class="lineno">  174</span>            aws_access_key_id=uri[<span class="stringliteral">&#39;access_id&#39;</span>],</div>
<div class="line"><span class="lineno">  175</span>            aws_secret_access_key=uri[<span class="stringliteral">&#39;access_secret&#39;</span>],</div>
<div class="line"><span class="lineno">  176</span>        )</div>
<div class="line"><span class="lineno">  177</span>        uri.update(access_id=<span class="keywordtype">None</span>, access_secret=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">if</span> client <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> uri[<span class="stringliteral">&#39;host&#39;</span>] != DEFAULT_HOST:</div>
<div class="line"><span class="lineno">  180</span>        logger.warning(</div>
<div class="line"><span class="lineno">  181</span>            <span class="stringliteral">&#39;ignoring endpoint_url parsed from URL because they conflict with &#39;</span></div>
<div class="line"><span class="lineno">  182</span>            <span class="stringliteral">&#39;transport_params[&quot;client&quot;]. Set transport_params[&quot;client&quot;] to None &#39;</span></div>
<div class="line"><span class="lineno">  183</span>            <span class="stringliteral">&#39;to suppress this warning.&#39;</span></div>
<div class="line"><span class="lineno">  184</span>        )</div>
<div class="line"><span class="lineno">  185</span>        uri.update(host=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">elif</span> uri[<span class="stringliteral">&#39;host&#39;</span>] != DEFAULT_HOST:</div>
<div class="line"><span class="lineno">  187</span>        inject(endpoint_url=<span class="stringliteral">&#39;https://%(host)s:%(port)d&#39;</span> % uri)</div>
<div class="line"><span class="lineno">  188</span>        uri.update(host=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">return</span> uri, transport_params</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d50e7ba5a45f854624874eec7973d36" name="a6d50e7ba5a45f854624874eec7973d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d50e7ba5a45f854624874eec7973d36">&#9670;&#160;</a></span>_download_fileobj()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._download_fileobj </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1278</span><span class="keyword">def </span>_download_fileobj(bucket, key_name):</div>
<div class="line"><span class="lineno"> 1279</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1280</span>    <span class="comment"># This is a separate function only because it makes it easier to inject</span></div>
<div class="line"><span class="lineno"> 1281</span>    <span class="comment"># exceptions during tests.</span></div>
<div class="line"><span class="lineno"> 1282</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1283</span>    buf = io.BytesIO()</div>
<div class="line"><span class="lineno"> 1284</span>    bucket.download_fileobj(key_name, buf)</div>
<div class="line"><span class="lineno"> 1285</span>    <span class="keywordflow">return</span> buf.getvalue()</div>
</div><!-- fragment -->
</div>
</div>
<a id="a764b8129ee677cffb71053de3af7a035" name="a764b8129ee677cffb71053de3af7a035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a764b8129ee677cffb71053de3af7a035">&#9670;&#160;</a></span>_download_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._download_key </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucket_name</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>retries</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>session_kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1251</span><span class="keyword">def </span>_download_key(key_name, bucket_name=None, retries=3, **session_kwargs):</div>
<div class="line"><span class="lineno"> 1252</span>    <span class="keywordflow">if</span> bucket_name <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1253</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;bucket_name may not be None&#39;</span>)</div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1256</span>    <span class="comment"># https://boto3.amazonaws.com/v1/documentation/api/latest/guide/resources.html#multithreading-or-multiprocessing-with-resources</span></div>
<div class="line"><span class="lineno"> 1257</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1258</span>    session = boto3.session.Session(**session_kwargs)</div>
<div class="line"><span class="lineno"> 1259</span>    s3 = session.resource(<span class="stringliteral">&#39;s3&#39;</span>)</div>
<div class="line"><span class="lineno"> 1260</span>    bucket = s3.Bucket(bucket_name)</div>
<div class="line"><span class="lineno"> 1261</span> </div>
<div class="line"><span class="lineno"> 1262</span>    <span class="comment"># Sometimes, https://github.com/boto/boto/issues/2409 can happen</span></div>
<div class="line"><span class="lineno"> 1263</span>    <span class="comment"># because of network issues on either side.</span></div>
<div class="line"><span class="lineno"> 1264</span>    <span class="comment"># Retry up to 3 times to ensure its not a transient issue.</span></div>
<div class="line"><span class="lineno"> 1265</span>    <span class="keywordflow">for</span> x <span class="keywordflow">in</span> range(retries + 1):</div>
<div class="line"><span class="lineno"> 1266</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1267</span>            content_bytes = _download_fileobj(bucket, key_name)</div>
<div class="line"><span class="lineno"> 1268</span>        <span class="keywordflow">except</span> botocore.client.ClientError:</div>
<div class="line"><span class="lineno"> 1269</span>            <span class="comment"># Actually fail on last pass through the loop</span></div>
<div class="line"><span class="lineno"> 1270</span>            <span class="keywordflow">if</span> x == retries:</div>
<div class="line"><span class="lineno"> 1271</span>                <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno"> 1272</span>            <span class="comment"># Otherwise, try again, as this might be a transient timeout</span></div>
<div class="line"><span class="lineno"> 1273</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 1274</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1275</span>            <span class="keywordflow">return</span> key_name, content_bytes</div>
<div class="line"><span class="lineno"> 1276</span> </div>
<div class="line"><span class="lineno"> 1277</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a436ab3c48c021680b2c97fd7c6d71428" name="a436ab3c48c021680b2c97fd7c6d71428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a436ab3c48c021680b2c97fd7c6d71428">&#9670;&#160;</a></span>_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._get </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>range_string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  325</span><span class="keyword">def </span>_get(client, bucket, key, version, range_string):</div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">if</span> version:</div>
<div class="line"><span class="lineno">  328</span>            <span class="keywordflow">return</span> client.get_object(Bucket=bucket, Key=key, VersionId=version, Range=range_string)</div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  330</span>            <span class="keywordflow">return</span> client.get_object(Bucket=bucket, Key=key, Range=range_string)</div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">except</span> botocore.client.ClientError <span class="keyword">as</span> error:</div>
<div class="line"><span class="lineno">  332</span>        wrapped_error = IOError(</div>
<div class="line"><span class="lineno">  333</span>            <span class="stringliteral">&#39;unable to access bucket: %r key: %r version: %r error: %s&#39;</span> % (</div>
<div class="line"><span class="lineno">  334</span>                bucket, key, version, error</div>
<div class="line"><span class="lineno">  335</span>            )</div>
<div class="line"><span class="lineno">  336</span>        )</div>
<div class="line"><span class="lineno">  337</span>        wrapped_error.backend_error = error</div>
<div class="line"><span class="lineno">  338</span>        <span class="keywordflow">raise</span> wrapped_error <span class="keyword">from</span> error</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aad217bb9ff33e9fff312eb5f83b78807" name="aad217bb9ff33e9fff312eb5f83b78807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad217bb9ff33e9fff312eb5f83b78807">&#9670;&#160;</a></span>_initialize_boto3()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._initialize_boto3 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client_kwargs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Created the required objects for accessing S3.  Ideally, they have
been already created for us and we can just reuse them.</pre> <div class="fragment"><div class="line"><span class="lineno">  520</span><span class="keyword">def </span>_initialize_boto3(rw, client, client_kwargs, bucket, key):</div>
<div class="line"><span class="lineno">  521</span>    <span class="stringliteral">&quot;&quot;&quot;Created the required objects for accessing S3.  Ideally, they have</span></div>
<div class="line"><span class="lineno">  522</span><span class="stringliteral">    been already created for us and we can just reuse them.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  523</span>    <span class="keywordflow">if</span> client_kwargs <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  524</span>        client_kwargs = {}</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordflow">if</span> client <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  527</span>        init_kwargs = client_kwargs.get(<span class="stringliteral">&#39;S3.Client&#39;</span>, {})</div>
<div class="line"><span class="lineno">  528</span>        client = boto3.client(<span class="stringliteral">&#39;s3&#39;</span>, **init_kwargs)</div>
<div class="line"><span class="lineno">  529</span>    <span class="keyword">assert</span> client</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>    rw._client = _ClientWrapper(client, client_kwargs)</div>
<div class="line"><span class="lineno">  532</span>    rw._bucket = bucket</div>
<div class="line"><span class="lineno">  533</span>    rw._key = key</div>
<div class="line"><span class="lineno">  534</span> </div>
<div class="line"><span class="lineno">  535</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8fa98149816768c48aaa5f17806dc9f6" name="a8fa98149816768c48aaa5f17806dc9f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fa98149816768c48aaa5f17806dc9f6">&#9670;&#160;</a></span>_list_bucket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._list_bucket </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucket_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prefix</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>accept_key</em> = <code><a class="el" href="__lapack__subroutines_8h.html#a76093d20ca2e1c5d5216168f26f73e19">lambda</a>&#160;k:&#160;True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>session_kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1224</span>        **session_kwargs):</div>
<div class="line"><span class="lineno"> 1225</span>    session = boto3.session.Session(**session_kwargs)</div>
<div class="line"><span class="lineno"> 1226</span>    client = session.client(<span class="stringliteral">&#39;s3&#39;</span>)</div>
<div class="line"><span class="lineno"> 1227</span>    ctoken = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1228</span> </div>
<div class="line"><span class="lineno"> 1229</span>    <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno"> 1230</span>        <span class="comment"># list_objects_v2 doesn&#39;t like a None value for ContinuationToken</span></div>
<div class="line"><span class="lineno"> 1231</span>        <span class="comment"># so we don&#39;t set it if we don&#39;t have one.</span></div>
<div class="line"><span class="lineno"> 1232</span>        <span class="keywordflow">if</span> ctoken:</div>
<div class="line"><span class="lineno"> 1233</span>            kwargs = dict(Bucket=bucket_name, Prefix=prefix, ContinuationToken=ctoken)</div>
<div class="line"><span class="lineno"> 1234</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1235</span>            kwargs = dict(Bucket=bucket_name, Prefix=prefix)</div>
<div class="line"><span class="lineno"> 1236</span>        response = client.list_objects_v2(**kwargs)</div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1238</span>            content = response[<span class="stringliteral">&#39;Contents&#39;</span>]</div>
<div class="line"><span class="lineno"> 1239</span>        <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno"> 1240</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 1241</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1242</span>            <span class="keywordflow">for</span> c <span class="keywordflow">in</span> content:</div>
<div class="line"><span class="lineno"> 1243</span>                key = c[<span class="stringliteral">&#39;Key&#39;</span>]</div>
<div class="line"><span class="lineno"> 1244</span>                <span class="keywordflow">if</span> accept_key(key):</div>
<div class="line"><span class="lineno"> 1245</span>                    <span class="keywordflow">yield</span> key</div>
<div class="line"><span class="lineno"> 1246</span>        ctoken = response.get(<span class="stringliteral">&#39;NextContinuationToken&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1247</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> ctoken:</div>
<div class="line"><span class="lineno"> 1248</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1249</span> </div>
<div class="line"><span class="lineno"> 1250</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afe4ae0293763a17117c89b3cee70073c" name="afe4ae0293763a17117c89b3cee70073c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4ae0293763a17117c89b3cee70073c">&#9670;&#160;</a></span>_retry_if_failed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._retry_if_failed </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>partial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>attempts</em> = <code><a class="el" href="namespacesmart__open_1_1s3.html#aa6dc43026ecc0825308c4d1e37d6649f">_UPLOAD_ATTEMPTS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sleep_seconds</em> = <code><a class="el" href="namespacesmart__open_1_1s3.html#a2969028d9bb07513085964aa41c468ce">_SLEEP_SECONDS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>exceptions</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1085</span>        exceptions=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno"> 1086</span>    <span class="keywordflow">if</span> exceptions <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1087</span>        exceptions = (botocore.exceptions.EndpointConnectionError, )</div>
<div class="line"><span class="lineno"> 1088</span>    <span class="keywordflow">for</span> attempt <span class="keywordflow">in</span> range(attempts):</div>
<div class="line"><span class="lineno"> 1089</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1090</span>            <span class="keywordflow">return</span> partial()</div>
<div class="line"><span class="lineno"> 1091</span>        <span class="keywordflow">except</span> exceptions:</div>
<div class="line"><span class="lineno"> 1092</span>            logger.critical(</div>
<div class="line"><span class="lineno"> 1093</span>                <span class="stringliteral">&#39;Unable to connect to the endpoint. Check your network connection. &#39;</span></div>
<div class="line"><span class="lineno"> 1094</span>                <span class="stringliteral">&#39;Sleeping and retrying %d more times &#39;</span></div>
<div class="line"><span class="lineno"> 1095</span>                <span class="stringliteral">&#39;before giving up.&#39;</span> % (attempts - attempt - 1)</div>
<div class="line"><span class="lineno"> 1096</span>            )</div>
<div class="line"><span class="lineno"> 1097</span>            time.sleep(sleep_seconds)</div>
<div class="line"><span class="lineno"> 1098</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1099</span>        logger.critical(<span class="stringliteral">&#39;Unable to connect to the endpoint. Giving up.&#39;</span>)</div>
<div class="line"><span class="lineno"> 1100</span>        <span class="keywordflow">raise</span> IOError(<span class="stringliteral">&#39;Unable to connect to the endpoint after %d attempts&#39;</span> % attempts)</div>
<div class="line"><span class="lineno"> 1101</span> </div>
<div class="line"><span class="lineno"> 1102</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a26cea1412a12b40e7942d0fe211f187a" name="a26cea1412a12b40e7942d0fe211f187a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26cea1412a12b40e7942d0fe211f187a">&#9670;&#160;</a></span>_unwrap_ioerror()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3._unwrap_ioerror </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ioe</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Given an IOError from _get, return the 'Error' dictionary from boto.</pre> <div class="fragment"><div class="line"><span class="lineno">  341</span><span class="keyword">def </span>_unwrap_ioerror(ioe):</div>
<div class="line"><span class="lineno">  342</span>    <span class="stringliteral">&quot;&quot;&quot;Given an IOError from _get, return the &#39;Error&#39; dictionary from boto.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  344</span>        <span class="keywordflow">return</span> ioe.backend_error.response[<span class="stringliteral">&#39;Error&#39;</span>]</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordflow">except</span> (AttributeError, KeyError):</div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac567325e6fa46a90ee30217afae4e4bc" name="ac567325e6fa46a90ee30217afae4e4bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac567325e6fa46a90ee30217afae4e4bc">&#9670;&#160;</a></span>iter_bucket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3.iter_bucket </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucket_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prefix</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>accept_key</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key_limit</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>workers</em> = <code>16</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>retries</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>session_kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Iterate and download all S3 objects under `s3://bucket_name/prefix`.

Parameters
----------
bucket_name: str
    The name of the bucket.
prefix: str, optional
    Limits the iteration to keys starting with the prefix.
accept_key: callable, optional
    This is a function that accepts a key name (unicode string) and
    returns True/False, signalling whether the given key should be downloaded.
    The default behavior is to accept all keys.
key_limit: int, optional
    If specified, the iterator will stop after yielding this many results.
workers: int, optional
    The number of subprocesses to use.
retries: int, optional
    The number of time to retry a failed download.
session_kwargs: dict, optional
    Keyword arguments to pass when creating a new session.
    For a list of available names and values, see:
    https://boto3.amazonaws.com/v1/documentation/api/latest/reference/core/session.html#boto3.session.Session


Yields
------
str
    The full key name (does not include the bucket name).
bytes
    The full contents of the key.

Notes
-----
The keys are processed in parallel, using `workers` processes (default: 16),
to speed up downloads greatly. If multiprocessing is not available, thus
_MULTIPROCESSING is False, this parameter will be ignored.

Examples
--------

  &gt;&gt;&gt; # get all JSON files under "mybucket/foo/"
  &gt;&gt;&gt; for key, content in iter_bucket(
  ...         bucket_name, prefix='foo/',
  ...         accept_key=lambda key: key.endswith('.json')):
  ...     print key, len(content)

  &gt;&gt;&gt; # limit to 10k files, using 32 parallel workers (default is 16)
  &gt;&gt;&gt; for key, content in iter_bucket(bucket_name, key_limit=10000, workers=32):
  ...     print key, len(content)
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1114</span>        **session_kwargs):</div>
<div class="line"><span class="lineno"> 1115</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1116</span><span class="stringliteral">    Iterate and download all S3 objects under `s3://bucket_name/prefix`.</span></div>
<div class="line"><span class="lineno"> 1117</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1118</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno"> 1119</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno"> 1120</span><span class="stringliteral">    bucket_name: str</span></div>
<div class="line"><span class="lineno"> 1121</span><span class="stringliteral">        The name of the bucket.</span></div>
<div class="line"><span class="lineno"> 1122</span><span class="stringliteral">    prefix: str, optional</span></div>
<div class="line"><span class="lineno"> 1123</span><span class="stringliteral">        Limits the iteration to keys starting with the prefix.</span></div>
<div class="line"><span class="lineno"> 1124</span><span class="stringliteral">    accept_key: callable, optional</span></div>
<div class="line"><span class="lineno"> 1125</span><span class="stringliteral">        This is a function that accepts a key name (unicode string) and</span></div>
<div class="line"><span class="lineno"> 1126</span><span class="stringliteral">        returns True/False, signalling whether the given key should be downloaded.</span></div>
<div class="line"><span class="lineno"> 1127</span><span class="stringliteral">        The default behavior is to accept all keys.</span></div>
<div class="line"><span class="lineno"> 1128</span><span class="stringliteral">    key_limit: int, optional</span></div>
<div class="line"><span class="lineno"> 1129</span><span class="stringliteral">        If specified, the iterator will stop after yielding this many results.</span></div>
<div class="line"><span class="lineno"> 1130</span><span class="stringliteral">    workers: int, optional</span></div>
<div class="line"><span class="lineno"> 1131</span><span class="stringliteral">        The number of subprocesses to use.</span></div>
<div class="line"><span class="lineno"> 1132</span><span class="stringliteral">    retries: int, optional</span></div>
<div class="line"><span class="lineno"> 1133</span><span class="stringliteral">        The number of time to retry a failed download.</span></div>
<div class="line"><span class="lineno"> 1134</span><span class="stringliteral">    session_kwargs: dict, optional</span></div>
<div class="line"><span class="lineno"> 1135</span><span class="stringliteral">        Keyword arguments to pass when creating a new session.</span></div>
<div class="line"><span class="lineno"> 1136</span><span class="stringliteral">        For a list of available names and values, see:</span></div>
<div class="line"><span class="lineno"> 1137</span><span class="stringliteral">        https://boto3.amazonaws.com/v1/documentation/api/latest/reference/core/session.html#boto3.session.Session</span></div>
<div class="line"><span class="lineno"> 1138</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1139</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1140</span><span class="stringliteral">    Yields</span></div>
<div class="line"><span class="lineno"> 1141</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno"> 1142</span><span class="stringliteral">    str</span></div>
<div class="line"><span class="lineno"> 1143</span><span class="stringliteral">        The full key name (does not include the bucket name).</span></div>
<div class="line"><span class="lineno"> 1144</span><span class="stringliteral">    bytes</span></div>
<div class="line"><span class="lineno"> 1145</span><span class="stringliteral">        The full contents of the key.</span></div>
<div class="line"><span class="lineno"> 1146</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1147</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno"> 1148</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno"> 1149</span><span class="stringliteral">    The keys are processed in parallel, using `workers` processes (default: 16),</span></div>
<div class="line"><span class="lineno"> 1150</span><span class="stringliteral">    to speed up downloads greatly. If multiprocessing is not available, thus</span></div>
<div class="line"><span class="lineno"> 1151</span><span class="stringliteral">    _MULTIPROCESSING is False, this parameter will be ignored.</span></div>
<div class="line"><span class="lineno"> 1152</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1153</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno"> 1154</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno"> 1155</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1156</span><span class="stringliteral">      &gt;&gt;&gt; # get all JSON files under &quot;mybucket/foo/&quot;</span></div>
<div class="line"><span class="lineno"> 1157</span><span class="stringliteral">      &gt;&gt;&gt; for key, content in iter_bucket(</span></div>
<div class="line"><span class="lineno"> 1158</span><span class="stringliteral">      ...         bucket_name, prefix=&#39;foo/&#39;,</span></div>
<div class="line"><span class="lineno"> 1159</span><span class="stringliteral">      ...         accept_key=lambda key: key.endswith(&#39;.json&#39;)):</span></div>
<div class="line"><span class="lineno"> 1160</span><span class="stringliteral">      ...     print key, len(content)</span></div>
<div class="line"><span class="lineno"> 1161</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1162</span><span class="stringliteral">      &gt;&gt;&gt; # limit to 10k files, using 32 parallel workers (default is 16)</span></div>
<div class="line"><span class="lineno"> 1163</span><span class="stringliteral">      &gt;&gt;&gt; for key, content in iter_bucket(bucket_name, key_limit=10000, workers=32):</span></div>
<div class="line"><span class="lineno"> 1164</span><span class="stringliteral">      ...     print key, len(content)</span></div>
<div class="line"><span class="lineno"> 1165</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1166</span>    <span class="keywordflow">if</span> accept_key <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1167</span>        accept_key = _accept_all</div>
<div class="line"><span class="lineno"> 1168</span> </div>
<div class="line"><span class="lineno"> 1169</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1170</span>    <span class="comment"># If people insist on giving us bucket instances, silently extract the name</span></div>
<div class="line"><span class="lineno"> 1171</span>    <span class="comment"># before moving on.  Works for boto3 as well as boto.</span></div>
<div class="line"><span class="lineno"> 1172</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1173</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1174</span>        bucket_name = bucket_name.name</div>
<div class="line"><span class="lineno"> 1175</span>    <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><span class="lineno"> 1176</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 1177</span> </div>
<div class="line"><span class="lineno"> 1178</span>    total_size, key_no = 0, -1</div>
<div class="line"><span class="lineno"> 1179</span>    key_iterator = _list_bucket(</div>
<div class="line"><span class="lineno"> 1180</span>        bucket_name,</div>
<div class="line"><span class="lineno"> 1181</span>        prefix=prefix,</div>
<div class="line"><span class="lineno"> 1182</span>        accept_key=accept_key,</div>
<div class="line"><span class="lineno"> 1183</span>        **session_kwargs)</div>
<div class="line"><span class="lineno"> 1184</span>    download_key = functools.partial(</div>
<div class="line"><span class="lineno"> 1185</span>        _download_key,</div>
<div class="line"><span class="lineno"> 1186</span>        bucket_name=bucket_name,</div>
<div class="line"><span class="lineno"> 1187</span>        retries=retries,</div>
<div class="line"><span class="lineno"> 1188</span>        **session_kwargs)</div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>    <span class="keyword">with</span> <a class="code hl_function" href="namespacesmart__open_1_1concurrency.html#af710033a29eb82eeaec7770780f8e1d4">smart_open.concurrency.create_pool</a>(processes=workers) <span class="keyword">as</span> pool:</div>
<div class="line"><span class="lineno"> 1191</span>        result_iterator = pool.imap_unordered(download_key, key_iterator)</div>
<div class="line"><span class="lineno"> 1192</span>        key_no = 0</div>
<div class="line"><span class="lineno"> 1193</span>        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno"> 1194</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1195</span>                (key, content) = result_iterator.__next__()</div>
<div class="line"><span class="lineno"> 1196</span>                <span class="keywordflow">if</span> key_no % 1000 == 0:</div>
<div class="line"><span class="lineno"> 1197</span>                    logger.info(</div>
<div class="line"><span class="lineno"> 1198</span>                        <span class="stringliteral">&quot;yielding key #%i: %s, size %i (total %.1fMB)&quot;</span>,</div>
<div class="line"><span class="lineno"> 1199</span>                        key_no, key, len(content), total_size / 1024.0 ** 2</div>
<div class="line"><span class="lineno"> 1200</span>                    )</div>
<div class="line"><span class="lineno"> 1201</span>                <span class="keywordflow">yield</span> key, content</div>
<div class="line"><span class="lineno"> 1202</span>                total_size += len(content)</div>
<div class="line"><span class="lineno"> 1203</span>                <span class="keywordflow">if</span> key_limit <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> key_no + 1 &gt;= key_limit:</div>
<div class="line"><span class="lineno"> 1204</span>                    <span class="comment"># we were asked to output only a limited number of keys =&gt; we&#39;re done</span></div>
<div class="line"><span class="lineno"> 1205</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1206</span>            <span class="keywordflow">except</span> botocore.exceptions.ClientError <span class="keyword">as</span> err:</div>
<div class="line"><span class="lineno"> 1207</span>                <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1208</span>                <span class="comment"># ignore 404 not found errors: they mean the object was deleted</span></div>
<div class="line"><span class="lineno"> 1209</span>                <span class="comment"># after we listed the contents of the bucket, but before we</span></div>
<div class="line"><span class="lineno"> 1210</span>                <span class="comment"># downloaded the object.</span></div>
<div class="line"><span class="lineno"> 1211</span>                <span class="comment">#</span></div>
<div class="line"><span class="lineno"> 1212</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> (<span class="stringliteral">&#39;Error&#39;</span> <span class="keywordflow">in</span> err.response <span class="keywordflow">and</span> err.response[<span class="stringliteral">&#39;Error&#39;</span>].get(<span class="stringliteral">&#39;Code&#39;</span>) == <span class="stringliteral">&#39;404&#39;</span>):</div>
<div class="line"><span class="lineno"> 1213</span>                    <span class="keywordflow">raise</span> err</div>
<div class="line"><span class="lineno"> 1214</span>            <span class="keywordflow">except</span> StopIteration:</div>
<div class="line"><span class="lineno"> 1215</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1216</span>            key_no += 1</div>
<div class="line"><span class="lineno"> 1217</span>    logger.info(<span class="stringliteral">&quot;processed %i keys, total size %i&quot;</span> % (key_no + 1, total_size))</div>
<div class="line"><span class="lineno"> 1218</span> </div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="ttc" id="anamespacesmart__open_1_1concurrency_html_af710033a29eb82eeaec7770780f8e1d4"><div class="ttname"><a href="namespacesmart__open_1_1concurrency.html#af710033a29eb82eeaec7770780f8e1d4">smart_open.concurrency.create_pool</a></div><div class="ttdeci">create_pool(processes=1)</div><div class="ttdef"><b>Definition</b> concurrency.py:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5fe9bfea79d9f61021f271567eb5fa3" name="af5fe9bfea79d9f61021f271567eb5fa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5fe9bfea79d9f61021f271567eb5fa3">&#9670;&#160;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3.open </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bucket_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>version_id</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>buffer_size</em> = <code><a class="el" href="namespacesmart__open_1_1s3.html#a6c5570825c82f95ed011f66e253d3492">DEFAULT_BUFFER_SIZE</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_part_size</em> = <code><a class="el" href="namespacesmart__open_1_1s3.html#a1c5fb7289ed2d1c6f5982f004a7c28d7">DEFAULT_MIN_PART_SIZE</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>multipart_upload</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>defer_seek</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client_kwargs</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>writebuffer</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Open an S3 object for reading or writing.

Parameters
----------
bucket_id: str
    The name of the bucket this object resides in.
key_id: str
    The name of the key within the bucket.
mode: str
    The mode for opening the object.  Must be either "rb" or "wb".
buffer_size: int, optional
    The buffer size to use when performing I/O.
min_part_size: int, optional
    The minimum part size for multipart uploads.  For writing only.
multipart_upload: bool, optional
    Default: `True`
    If set to `True`, will use multipart upload for writing to S3. If set
    to `False`, S3 upload will use the S3 Single-Part Upload API, which
    is more ideal for small file sizes.
    For writing only.
version_id: str, optional
    Version of the object, used when reading object.
    If None, will fetch the most recent version.
defer_seek: boolean, optional
    Default: `False`
    If set to `True` on a file opened for reading, GetObject will not be
    called until the first seek() or read().
    Avoids redundant API queries when seeking before reading.
client: object, optional
    The S3 client to use when working with boto3.
    If you don't specify this, then smart_open will create a new client for you.
client_kwargs: dict, optional
    Additional parameters to pass to the relevant functions of the client.
    The keys are fully qualified method names, e.g. `S3.Client.create_multipart_upload`.
    The values are kwargs to pass to that method each time it is called.
writebuffer: IO[bytes], optional
    By default, this module will buffer data in memory using io.BytesIO
    when writing. Pass another binary IO instance here to use it instead.
    For example, you may pass a file object to buffer to local disk instead
    of in RAM. Use this to keep RAM usage low at the expense of additional
    disk IO. If you pass in an open file, then you are responsible for
    cleaning it up after writing completes.
</pre> <div class="fragment"><div class="line"><span class="lineno">  239</span>):</div>
<div class="line"><span class="lineno">  240</span>    <span class="stringliteral">&quot;&quot;&quot;Open an S3 object for reading or writing.</span></div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">    bucket_id: str</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">        The name of the bucket this object resides in.</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">    key_id: str</span></div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">        The name of the key within the bucket.</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">    mode: str</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">        The mode for opening the object.  Must be either &quot;rb&quot; or &quot;wb&quot;.</span></div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral">    buffer_size: int, optional</span></div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">        The buffer size to use when performing I/O.</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral">    min_part_size: int, optional</span></div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">        The minimum part size for multipart uploads.  For writing only.</span></div>
<div class="line"><span class="lineno">  254</span><span class="stringliteral">    multipart_upload: bool, optional</span></div>
<div class="line"><span class="lineno">  255</span><span class="stringliteral">        Default: `True`</span></div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral">        If set to `True`, will use multipart upload for writing to S3. If set</span></div>
<div class="line"><span class="lineno">  257</span><span class="stringliteral">        to `False`, S3 upload will use the S3 Single-Part Upload API, which</span></div>
<div class="line"><span class="lineno">  258</span><span class="stringliteral">        is more ideal for small file sizes.</span></div>
<div class="line"><span class="lineno">  259</span><span class="stringliteral">        For writing only.</span></div>
<div class="line"><span class="lineno">  260</span><span class="stringliteral">    version_id: str, optional</span></div>
<div class="line"><span class="lineno">  261</span><span class="stringliteral">        Version of the object, used when reading object.</span></div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral">        If None, will fetch the most recent version.</span></div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">    defer_seek: boolean, optional</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral">        Default: `False`</span></div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">        If set to `True` on a file opened for reading, GetObject will not be</span></div>
<div class="line"><span class="lineno">  266</span><span class="stringliteral">        called until the first seek() or read().</span></div>
<div class="line"><span class="lineno">  267</span><span class="stringliteral">        Avoids redundant API queries when seeking before reading.</span></div>
<div class="line"><span class="lineno">  268</span><span class="stringliteral">    client: object, optional</span></div>
<div class="line"><span class="lineno">  269</span><span class="stringliteral">        The S3 client to use when working with boto3.</span></div>
<div class="line"><span class="lineno">  270</span><span class="stringliteral">        If you don&#39;t specify this, then smart_open will create a new client for you.</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">    client_kwargs: dict, optional</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral">        Additional parameters to pass to the relevant functions of the client.</span></div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">        The keys are fully qualified method names, e.g. `S3.Client.create_multipart_upload`.</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral">        The values are kwargs to pass to that method each time it is called.</span></div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral">    writebuffer: IO[bytes], optional</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral">        By default, this module will buffer data in memory using io.BytesIO</span></div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">        when writing. Pass another binary IO instance here to use it instead.</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">        For example, you may pass a file object to buffer to local disk instead</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">        of in RAM. Use this to keep RAM usage low at the expense of additional</span></div>
<div class="line"><span class="lineno">  280</span><span class="stringliteral">        disk IO. If you pass in an open file, then you are responsible for</span></div>
<div class="line"><span class="lineno">  281</span><span class="stringliteral">        cleaning it up after writing completes.</span></div>
<div class="line"><span class="lineno">  282</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  283</span>    logger.debug(<span class="stringliteral">&#39;%r&#39;</span>, locals())</div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">if</span> mode <span class="keywordflow">not</span> <span class="keywordflow">in</span> constants.BINARY_MODES:</div>
<div class="line"><span class="lineno">  285</span>        <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&#39;bad mode: %r expected one of %r&#39;</span> % (mode, constants.BINARY_MODES))</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordflow">if</span> (mode == constants.WRITE_BINARY) <span class="keywordflow">and</span> (version_id <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  288</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;version_id must be None when writing&quot;</span>)</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">if</span> mode == constants.READ_BINARY:</div>
<div class="line"><span class="lineno">  291</span>        fileobj = Reader(</div>
<div class="line"><span class="lineno">  292</span>            bucket_id,</div>
<div class="line"><span class="lineno">  293</span>            key_id,</div>
<div class="line"><span class="lineno">  294</span>            version_id=version_id,</div>
<div class="line"><span class="lineno">  295</span>            buffer_size=buffer_size,</div>
<div class="line"><span class="lineno">  296</span>            defer_seek=defer_seek,</div>
<div class="line"><span class="lineno">  297</span>            client=client,</div>
<div class="line"><span class="lineno">  298</span>            client_kwargs=client_kwargs,</div>
<div class="line"><span class="lineno">  299</span>        )</div>
<div class="line"><span class="lineno">  300</span>    <span class="keywordflow">elif</span> mode == constants.WRITE_BINARY:</div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordflow">if</span> multipart_upload:</div>
<div class="line"><span class="lineno">  302</span>            fileobj = MultipartWriter(</div>
<div class="line"><span class="lineno">  303</span>                bucket_id,</div>
<div class="line"><span class="lineno">  304</span>                key_id,</div>
<div class="line"><span class="lineno">  305</span>                min_part_size=min_part_size,</div>
<div class="line"><span class="lineno">  306</span>                client=client,</div>
<div class="line"><span class="lineno">  307</span>                client_kwargs=client_kwargs,</div>
<div class="line"><span class="lineno">  308</span>                writebuffer=writebuffer,</div>
<div class="line"><span class="lineno">  309</span>            )</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  311</span>            fileobj = SinglepartWriter(</div>
<div class="line"><span class="lineno">  312</span>                bucket_id,</div>
<div class="line"><span class="lineno">  313</span>                key_id,</div>
<div class="line"><span class="lineno">  314</span>                client=client,</div>
<div class="line"><span class="lineno">  315</span>                client_kwargs=client_kwargs,</div>
<div class="line"><span class="lineno">  316</span>                writebuffer=writebuffer,</div>
<div class="line"><span class="lineno">  317</span>            )</div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  319</span>        <span class="keyword">assert</span> <span class="keyword">False</span>, <span class="stringliteral">&#39;unexpected mode: %r&#39;</span> % mode</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    fileobj.name = key_id</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">return</span> fileobj</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7d7deb872ec61ac1f4ac1acfca48e10" name="aa7d7deb872ec61ac1f4ac1acfca48e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d7deb872ec61ac1f4ac1acfca48e10">&#9670;&#160;</a></span>open_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3.open_uri </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transport_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  193</span><span class="keyword">def </span>open_uri(uri, mode, transport_params):</div>
<div class="line"><span class="lineno">  194</span>    deprecated = (</div>
<div class="line"><span class="lineno">  195</span>        <span class="stringliteral">&#39;multipart_upload_kwargs&#39;</span>,</div>
<div class="line"><span class="lineno">  196</span>        <span class="stringliteral">&#39;object_kwargs&#39;</span>,</div>
<div class="line"><span class="lineno">  197</span>        <span class="stringliteral">&#39;resource&#39;</span>,</div>
<div class="line"><span class="lineno">  198</span>        <span class="stringliteral">&#39;resource_kwargs&#39;</span>,</div>
<div class="line"><span class="lineno">  199</span>        <span class="stringliteral">&#39;session&#39;</span>,</div>
<div class="line"><span class="lineno">  200</span>        <span class="stringliteral">&#39;singlepart_upload_kwargs&#39;</span>,</div>
<div class="line"><span class="lineno">  201</span>    )</div>
<div class="line"><span class="lineno">  202</span>    detected = [k <span class="keywordflow">for</span> k <span class="keywordflow">in</span> deprecated <span class="keywordflow">if</span> k <span class="keywordflow">in</span> transport_params]</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">if</span> detected:</div>
<div class="line"><span class="lineno">  204</span>        doc_url = (</div>
<div class="line"><span class="lineno">  205</span>            <span class="stringliteral">&#39;https://github.com/RaRe-Technologies/smart_open/blob/develop/&#39;</span></div>
<div class="line"><span class="lineno">  206</span>            <span class="stringliteral">&#39;MIGRATING_FROM_OLDER_VERSIONS.rst&#39;</span></div>
<div class="line"><span class="lineno">  207</span>        )</div>
<div class="line"><span class="lineno">  208</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  209</span>        <span class="comment"># We use warnings.warn /w UserWarning instead of logger.warn here because</span></div>
<div class="line"><span class="lineno">  210</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  211</span>        <span class="comment"># 1) Not everyone has logging enabled; and</span></div>
<div class="line"><span class="lineno">  212</span>        <span class="comment"># 2) check_kwargs (below) already uses logger.warn with a similar message</span></div>
<div class="line"><span class="lineno">  213</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  214</span>        <span class="comment"># https://github.com/RaRe-Technologies/smart_open/issues/614</span></div>
<div class="line"><span class="lineno">  215</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  216</span>        message = (</div>
<div class="line"><span class="lineno">  217</span>            <span class="stringliteral">&#39;ignoring the following deprecated transport parameters: %r. &#39;</span></div>
<div class="line"><span class="lineno">  218</span>            <span class="stringliteral">&#39;See &lt;%s&gt; for details&#39;</span> % (detected, doc_url)</div>
<div class="line"><span class="lineno">  219</span>        )</div>
<div class="line"><span class="lineno">  220</span>        warnings.warn(message, UserWarning)</div>
<div class="line"><span class="lineno">  221</span>    parsed_uri = parse_uri(uri)</div>
<div class="line"><span class="lineno">  222</span>    parsed_uri, transport_params = _consolidate_params(parsed_uri, transport_params)</div>
<div class="line"><span class="lineno">  223</span>    kwargs = <a class="code hl_function" href="namespacesmart__open_1_1utils.html#a42111e0a72a97c0364b887a8bb4da756">smart_open.utils.check_kwargs</a>(open, transport_params)</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">return</span> open(parsed_uri[<span class="stringliteral">&#39;bucket_id&#39;</span>], parsed_uri[<span class="stringliteral">&#39;key_id&#39;</span>], mode, **kwargs)</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="ttc" id="anamespacesmart__open_1_1utils_html_a42111e0a72a97c0364b887a8bb4da756"><div class="ttname"><a href="namespacesmart__open_1_1utils.html#a42111e0a72a97c0364b887a8bb4da756">smart_open.utils.check_kwargs</a></div><div class="ttdeci">check_kwargs(kallable, kwargs)</div><div class="ttdef"><b>Definition</b> utils.py:51</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a4aca8f0d37976651ff0d72015ad023" name="a7a4aca8f0d37976651ff0d72015ad023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a4aca8f0d37976651ff0d72015ad023">&#9670;&#160;</a></span>parse_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3.parse_uri </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri_as_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   76</span><span class="keyword">def </span>parse_uri(uri_as_string):</div>
<div class="line"><span class="lineno">   77</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   78</span>    <span class="comment"># Restrictions on bucket names and labels:</span></div>
<div class="line"><span class="lineno">   79</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   80</span>    <span class="comment"># - Bucket names must be at least 3 and no more than 63 characters long.</span></div>
<div class="line"><span class="lineno">   81</span>    <span class="comment"># - Bucket names must be a series of one or more labels.</span></div>
<div class="line"><span class="lineno">   82</span>    <span class="comment"># - Adjacent labels are separated by a single period (.).</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="comment"># - Bucket names can contain lowercase letters, numbers, and hyphens.</span></div>
<div class="line"><span class="lineno">   84</span>    <span class="comment"># - Each label must start and end with a lowercase letter or a number.</span></div>
<div class="line"><span class="lineno">   85</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   86</span>    <span class="comment"># We use the above as a guide only, and do not perform any validation.  We</span></div>
<div class="line"><span class="lineno">   87</span>    <span class="comment"># let boto3 take care of that for us.</span></div>
<div class="line"><span class="lineno">   88</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   89</span>    split_uri = <a class="code hl_function" href="namespacesmart__open_1_1utils.html#a157e30c99046cc51304defa4ee8fb113">smart_open.utils.safe_urlsplit</a>(uri_as_string)</div>
<div class="line"><span class="lineno">   90</span>    <span class="keyword">assert</span> split_uri.scheme <span class="keywordflow">in</span> SCHEMES</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    port = DEFAULT_PORT</div>
<div class="line"><span class="lineno">   93</span>    host = DEFAULT_HOST</div>
<div class="line"><span class="lineno">   94</span>    ordinary_calling_format = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">   95</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="comment"># These defaults tell boto3 to look for credentials elsewhere</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   98</span>    access_id, access_secret = <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  101</span>    <span class="comment"># Common URI template [secret:key@][host[:port]@]bucket/object</span></div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  103</span>    <span class="comment"># The urlparse function doesn&#39;t handle the above schema, so we have to do</span></div>
<div class="line"><span class="lineno">  104</span>    <span class="comment"># it ourselves.</span></div>
<div class="line"><span class="lineno">  105</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  106</span>    uri = split_uri.netloc + split_uri.path</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;@&#39;</span> <span class="keywordflow">in</span> uri <span class="keywordflow">and</span> <span class="stringliteral">&#39;:&#39;</span> <span class="keywordflow">in</span> uri.split(<span class="stringliteral">&#39;@&#39;</span>)[0]:</div>
<div class="line"><span class="lineno">  109</span>        auth, uri = uri.split(<span class="stringliteral">&#39;@&#39;</span>, 1)</div>
<div class="line"><span class="lineno">  110</span>        access_id, access_secret = auth.split(<span class="stringliteral">&#39;:&#39;</span>)</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    head, key_id = uri.split(<span class="stringliteral">&#39;/&#39;</span>, 1)</div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;@&#39;</span> <span class="keywordflow">in</span> head <span class="keywordflow">and</span> <span class="stringliteral">&#39;:&#39;</span> <span class="keywordflow">in</span> head:</div>
<div class="line"><span class="lineno">  114</span>        ordinary_calling_format = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  115</span>        host_port, bucket_id = head.split(<span class="stringliteral">&#39;@&#39;</span>)</div>
<div class="line"><span class="lineno">  116</span>        host, port = host_port.split(<span class="stringliteral">&#39;:&#39;</span>, 1)</div>
<div class="line"><span class="lineno">  117</span>        port = int(port)</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;@&#39;</span> <span class="keywordflow">in</span> head:</div>
<div class="line"><span class="lineno">  119</span>        ordinary_calling_format = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  120</span>        host, bucket_id = head.split(<span class="stringliteral">&#39;@&#39;</span>)</div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  122</span>        bucket_id = head</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">return</span> dict(</div>
<div class="line"><span class="lineno">  125</span>        scheme=split_uri.scheme,</div>
<div class="line"><span class="lineno">  126</span>        bucket_id=bucket_id,</div>
<div class="line"><span class="lineno">  127</span>        key_id=key_id,</div>
<div class="line"><span class="lineno">  128</span>        port=port,</div>
<div class="line"><span class="lineno">  129</span>        host=host,</div>
<div class="line"><span class="lineno">  130</span>        ordinary_calling_format=ordinary_calling_format,</div>
<div class="line"><span class="lineno">  131</span>        access_id=access_id,</div>
<div class="line"><span class="lineno">  132</span>        access_secret=access_secret,</div>
<div class="line"><span class="lineno">  133</span>    )</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="ttc" id="anamespacesmart__open_1_1utils_html_a157e30c99046cc51304defa4ee8fb113"><div class="ttname"><a href="namespacesmart__open_1_1utils.html#a157e30c99046cc51304defa4ee8fb113">smart_open.utils.safe_urlsplit</a></div><div class="ttdeci">safe_urlsplit(url)</div><div class="ttdef"><b>Definition</b> utils.py:153</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8eae2cc368e8d06c7475d946016aaf6f" name="a8eae2cc368e8d06c7475d946016aaf6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eae2cc368e8d06c7475d946016aaf6f">&#9670;&#160;</a></span>_OUT_OF_RANGE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">str smart_open.s3._OUT_OF_RANGE = 'InvalidRange'</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2969028d9bb07513085964aa41c468ce" name="a2969028d9bb07513085964aa41c468ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2969028d9bb07513085964aa41c468ce">&#9670;&#160;</a></span>_SLEEP_SECONDS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int smart_open.s3._SLEEP_SECONDS = 10</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa6dc43026ecc0825308c4d1e37d6649f" name="aa6dc43026ecc0825308c4d1e37d6649f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6dc43026ecc0825308c4d1e37d6649f">&#9670;&#160;</a></span>_UPLOAD_ATTEMPTS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int smart_open.s3._UPLOAD_ATTEMPTS = 6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6c5570825c82f95ed011f66e253d3492" name="a6c5570825c82f95ed011f66e253d3492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c5570825c82f95ed011f66e253d3492">&#9670;&#160;</a></span>DEFAULT_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int smart_open.s3.DEFAULT_BUFFER_SIZE = 128 * 1024</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abacb91af46164214da7a2a09250807df" name="abacb91af46164214da7a2a09250807df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abacb91af46164214da7a2a09250807df">&#9670;&#160;</a></span>DEFAULT_HOST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str smart_open.s3.DEFAULT_HOST = 's3.amazonaws.com'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1c5fb7289ed2d1c6f5982f004a7c28d7" name="a1c5fb7289ed2d1c6f5982f004a7c28d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c5fb7289ed2d1c6f5982f004a7c28d7">&#9670;&#160;</a></span>DEFAULT_MIN_PART_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int smart_open.s3.DEFAULT_MIN_PART_SIZE = 50 * 1024**2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a97fb378fd584d07c8680f412e636a675" name="a97fb378fd584d07c8680f412e636a675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97fb378fd584d07c8680f412e636a675">&#9670;&#160;</a></span>DEFAULT_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int smart_open.s3.DEFAULT_PORT = 443</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af8cf0532c3dc3e84ba54b573ff109bdd" name="af8cf0532c3dc3e84ba54b573ff109bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8cf0532c3dc3e84ba54b573ff109bdd">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.s3.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6d49052e33923d09f2ec7b78725fca25" name="a6d49052e33923d09f2ec7b78725fca25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d49052e33923d09f2ec7b78725fca25">&#9670;&#160;</a></span>MIN_MIN_PART_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int smart_open.s3.MIN_MIN_PART_SIZE = 5 * 1024 ** 2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a167e7e8d46680e11c06049b2d882c0a9" name="a167e7e8d46680e11c06049b2d882c0a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a167e7e8d46680e11c06049b2d882c0a9">&#9670;&#160;</a></span>MISSING_DEPS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool smart_open.s3.MISSING_DEPS = True</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afbbf2645716771bb1db9c8110a484700" name="afbbf2645716771bb1db9c8110a484700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbbf2645716771bb1db9c8110a484700">&#9670;&#160;</a></span>SCHEMES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tuple smart_open.s3.SCHEMES = (&quot;s3&quot;, &quot;s3n&quot;, 's3u', &quot;s3a&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abf8ccc46aee0045c17b5458779b9c94b" name="abf8ccc46aee0045c17b5458779b9c94b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf8ccc46aee0045c17b5458779b9c94b">&#9670;&#160;</a></span>URI_EXAMPLES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tuple smart_open.s3.URI_EXAMPLES</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  (</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&#39;s3://my_bucket/my_key&#39;</span>,</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&#39;s3://my_key:my_secret@my_bucket/my_key&#39;</span>,</div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&#39;s3://my_key:my_secret@my_server:my_port@my_bucket/my_key&#39;</span>,</div>
<div class="line"><span class="lineno">    5</span>)</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
