<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.metrics.tests.test_score_objects Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics.html">metrics</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html">test_score_objects</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sklearn.metrics.tests.test_score_objects Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1metrics_1_1tests_1_1test__score__objects_1_1_dummy_scorer.html">DummyScorer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1metrics_1_1tests_1_1test__score__objects_1_1_estimator_with_fit.html">EstimatorWithFit</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1metrics_1_1tests_1_1test__score__objects_1_1_estimator_with_fit_and_predict.html">EstimatorWithFitAndPredict</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1metrics_1_1tests_1_1test__score__objects_1_1_estimator_with_fit_and_score.html">EstimatorWithFitAndScore</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1metrics_1_1tests_1_1test__score__objects_1_1_estimator_without_fit.html">EstimatorWithoutFit</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2cdce313c427c4baf56da85e511198b2" id="r_a2cdce313c427c4baf56da85e511198b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a2cdce313c427c4baf56da85e511198b2">_require_positive_y</a> (y)</td></tr>
<tr class="separator:a2cdce313c427c4baf56da85e511198b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab542bb86b7d1c2634b333f05eb97f0a1" id="r_ab542bb86b7d1c2634b333f05eb97f0a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#ab542bb86b7d1c2634b333f05eb97f0a1">_make_estimators</a> (X_train, y_train, y_ml_train)</td></tr>
<tr class="separator:ab542bb86b7d1c2634b333f05eb97f0a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab421eb4f3f445f1f2caf7827555966d4" id="r_ab421eb4f3f445f1f2caf7827555966d4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#ab421eb4f3f445f1f2caf7827555966d4">setup_module</a> ()</td></tr>
<tr class="separator:ab421eb4f3f445f1f2caf7827555966d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1baf5faf3ee80deba6fc9cc4fec6e7cf" id="r_a1baf5faf3ee80deba6fc9cc4fec6e7cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a1baf5faf3ee80deba6fc9cc4fec6e7cf">teardown_module</a> ()</td></tr>
<tr class="separator:a1baf5faf3ee80deba6fc9cc4fec6e7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa591162a9eaafe555eb07a4354655fa9" id="r_aa591162a9eaafe555eb07a4354655fa9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aa591162a9eaafe555eb07a4354655fa9">test_all_scorers_repr</a> ()</td></tr>
<tr class="separator:aa591162a9eaafe555eb07a4354655fa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3115be5e6984a00baf19fa3782c124c1" id="r_a3115be5e6984a00baf19fa3782c124c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a3115be5e6984a00baf19fa3782c124c1">check_scoring_validator_for_single_metric_usecases</a> (scoring_validator)</td></tr>
<tr class="separator:a3115be5e6984a00baf19fa3782c124c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca5a47a68e6baf1660211c0f4210b405" id="r_aca5a47a68e6baf1660211c0f4210b405"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aca5a47a68e6baf1660211c0f4210b405">test_check_scoring_and_check_multimetric_scoring</a> (scoring)</td></tr>
<tr class="separator:aca5a47a68e6baf1660211c0f4210b405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add6ec2684da7b0ebc8951aca9921bffd" id="r_add6ec2684da7b0ebc8951aca9921bffd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#add6ec2684da7b0ebc8951aca9921bffd">test_check_scoring_and_check_multimetric_scoring_errors</a> (scoring, msg)</td></tr>
<tr class="separator:add6ec2684da7b0ebc8951aca9921bffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1e18a527c5058fb76ca2459d5bb80a" id="r_adb1e18a527c5058fb76ca2459d5bb80a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#adb1e18a527c5058fb76ca2459d5bb80a">test_check_scoring_gridsearchcv</a> ()</td></tr>
<tr class="separator:adb1e18a527c5058fb76ca2459d5bb80a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbbe1285e42d36be0daea8f37b00606d" id="r_acbbe1285e42d36be0daea8f37b00606d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#acbbe1285e42d36be0daea8f37b00606d">test_make_scorer</a> ()</td></tr>
<tr class="separator:acbbe1285e42d36be0daea8f37b00606d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba55c16703299366fcc928cafc92f4b0" id="r_aba55c16703299366fcc928cafc92f4b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aba55c16703299366fcc928cafc92f4b0">test_classification_binary_scores</a> (scorer_name, metric)</td></tr>
<tr class="separator:aba55c16703299366fcc928cafc92f4b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d41fe3f938d5f4322e2a6147f2677f" id="r_af0d41fe3f938d5f4322e2a6147f2677f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#af0d41fe3f938d5f4322e2a6147f2677f">test_classification_multiclass_scores</a> (scorer_name, metric)</td></tr>
<tr class="separator:af0d41fe3f938d5f4322e2a6147f2677f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad436f2fda3b9845764dbc0152ba88b" id="r_a5ad436f2fda3b9845764dbc0152ba88b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a5ad436f2fda3b9845764dbc0152ba88b">test_custom_scorer_pickling</a> ()</td></tr>
<tr class="separator:a5ad436f2fda3b9845764dbc0152ba88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc5a652303b1e05d4f25f9cf1ee7efdc" id="r_adc5a652303b1e05d4f25f9cf1ee7efdc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#adc5a652303b1e05d4f25f9cf1ee7efdc">test_regression_scorers</a> ()</td></tr>
<tr class="separator:adc5a652303b1e05d4f25f9cf1ee7efdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526026d2c8930507223e9c6da8f5e35b" id="r_a526026d2c8930507223e9c6da8f5e35b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a526026d2c8930507223e9c6da8f5e35b">test_thresholded_scorers</a> ()</td></tr>
<tr class="separator:a526026d2c8930507223e9c6da8f5e35b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a9bb4f6e36c117b9c59d0ea8040dba0" id="r_a0a9bb4f6e36c117b9c59d0ea8040dba0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a0a9bb4f6e36c117b9c59d0ea8040dba0">test_thresholded_scorers_multilabel_indicator_data</a> ()</td></tr>
<tr class="separator:a0a9bb4f6e36c117b9c59d0ea8040dba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f484f4944b5dd2ff00c19a0cb300086" id="r_a7f484f4944b5dd2ff00c19a0cb300086"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a7f484f4944b5dd2ff00c19a0cb300086">test_supervised_cluster_scorers</a> ()</td></tr>
<tr class="separator:a7f484f4944b5dd2ff00c19a0cb300086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a622682dac05fc1700e55364d644e8c06" id="r_a622682dac05fc1700e55364d644e8c06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a622682dac05fc1700e55364d644e8c06">test_raises_on_score_list</a> ()</td></tr>
<tr class="separator:a622682dac05fc1700e55364d644e8c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85ce909c29144b04409e13352074008d" id="r_a85ce909c29144b04409e13352074008d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a85ce909c29144b04409e13352074008d">test_classification_scorer_sample_weight</a> ()</td></tr>
<tr class="separator:a85ce909c29144b04409e13352074008d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b351624950476268708b6ca858eeba" id="r_ab7b351624950476268708b6ca858eeba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#ab7b351624950476268708b6ca858eeba">test_regression_scorer_sample_weight</a> ()</td></tr>
<tr class="separator:ab7b351624950476268708b6ca858eeba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71066389aeae01b8b5206cf3aca606f" id="r_ac71066389aeae01b8b5206cf3aca606f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#ac71066389aeae01b8b5206cf3aca606f">test_scorer_memmap_input</a> (name)</td></tr>
<tr class="separator:ac71066389aeae01b8b5206cf3aca606f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663606108a9b218ad3327ac2ac12c359" id="r_a663606108a9b218ad3327ac2ac12c359"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a663606108a9b218ad3327ac2ac12c359">test_scoring_is_not_metric</a> ()</td></tr>
<tr class="separator:a663606108a9b218ad3327ac2ac12c359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a690cab9b8584fb43cdb5d34b88152ee4" id="r_a690cab9b8584fb43cdb5d34b88152ee4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a690cab9b8584fb43cdb5d34b88152ee4">test_multimetric_scorer_calls_method_once</a> (scorers, expected_predict_count, expected_predict_proba_count, expected_decision_func_count)</td></tr>
<tr class="separator:a690cab9b8584fb43cdb5d34b88152ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd1f3910e8f98b333dbbfd5e9f2d44de" id="r_afd1f3910e8f98b333dbbfd5e9f2d44de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#afd1f3910e8f98b333dbbfd5e9f2d44de">test_multimetric_scorer_calls_method_once_classifier_no_decision</a> ()</td></tr>
<tr class="separator:afd1f3910e8f98b333dbbfd5e9f2d44de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1da844a4040efe7744f3d9db536b77b" id="r_ab1da844a4040efe7744f3d9db536b77b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#ab1da844a4040efe7744f3d9db536b77b">test_multimetric_scorer_calls_method_once_regressor_threshold</a> ()</td></tr>
<tr class="separator:ab1da844a4040efe7744f3d9db536b77b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa256805c2d7317f213eef317cdf1ffa0" id="r_aa256805c2d7317f213eef317cdf1ffa0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aa256805c2d7317f213eef317cdf1ffa0">test_multimetric_scorer_sanity_check</a> ()</td></tr>
<tr class="separator:aa256805c2d7317f213eef317cdf1ffa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d883fbb289efaf7890be66f1b19afc6" id="r_a8d883fbb289efaf7890be66f1b19afc6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a8d883fbb289efaf7890be66f1b19afc6">test_multiclass_roc_proba_scorer</a> (scorer_name, metric)</td></tr>
<tr class="separator:a8d883fbb289efaf7890be66f1b19afc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb29547dd362b8e24778b52fd5be4f07" id="r_aeb29547dd362b8e24778b52fd5be4f07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aeb29547dd362b8e24778b52fd5be4f07">test_multiclass_roc_proba_scorer_label</a> ()</td></tr>
<tr class="separator:aeb29547dd362b8e24778b52fd5be4f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e56dc6c5bdbea0b6a0ddccacc198aec" id="r_a1e56dc6c5bdbea0b6a0ddccacc198aec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a1e56dc6c5bdbea0b6a0ddccacc198aec">test_multiclass_roc_no_proba_scorer_errors</a> (scorer_name)</td></tr>
<tr class="separator:a1e56dc6c5bdbea0b6a0ddccacc198aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165b05cca84b631e6503949241c9f973" id="r_a165b05cca84b631e6503949241c9f973"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a165b05cca84b631e6503949241c9f973">string_labeled_classification_problem</a> ()</td></tr>
<tr class="separator:a165b05cca84b631e6503949241c9f973"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace79a672202533cb9f49f9cf12822b01" id="r_ace79a672202533cb9f49f9cf12822b01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#ace79a672202533cb9f49f9cf12822b01">test_average_precision_pos_label</a> (<a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a165b05cca84b631e6503949241c9f973">string_labeled_classification_problem</a>)</td></tr>
<tr class="separator:ace79a672202533cb9f49f9cf12822b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21305a2dfbf53e385789d19f2372c0af" id="r_a21305a2dfbf53e385789d19f2372c0af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a21305a2dfbf53e385789d19f2372c0af">test_brier_score_loss_pos_label</a> (<a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a165b05cca84b631e6503949241c9f973">string_labeled_classification_problem</a>)</td></tr>
<tr class="separator:a21305a2dfbf53e385789d19f2372c0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affc143c379e258ce85c9c09bac968c24" id="r_affc143c379e258ce85c9c09bac968c24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#affc143c379e258ce85c9c09bac968c24">test_non_symmetric_metric_pos_label</a> (score_func, <a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a165b05cca84b631e6503949241c9f973">string_labeled_classification_problem</a>)</td></tr>
<tr class="separator:affc143c379e258ce85c9c09bac968c24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0746c383149dab3b34f59b3e7aa23a96" id="r_a0746c383149dab3b34f59b3e7aa23a96"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a0746c383149dab3b34f59b3e7aa23a96">test_scorer_select_proba_error</a> (scorer)</td></tr>
<tr class="separator:a0746c383149dab3b34f59b3e7aa23a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab7384db9dcf02d99a1d54da43dec71" id="r_aaab7384db9dcf02d99a1d54da43dec71"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aaab7384db9dcf02d99a1d54da43dec71">test_get_scorer_return_copy</a> ()</td></tr>
<tr class="separator:aaab7384db9dcf02d99a1d54da43dec71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a28d62527b7627df6a6cf05ddd51ae0" id="r_a1a28d62527b7627df6a6cf05ddd51ae0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a1a28d62527b7627df6a6cf05ddd51ae0">test_SCORERS_deprecated</a> ()</td></tr>
<tr class="separator:a1a28d62527b7627df6a6cf05ddd51ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0975dbd8a73d73013fe3f29fbc38534b" id="r_a0975dbd8a73d73013fe3f29fbc38534b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a0975dbd8a73d73013fe3f29fbc38534b">test_scorer_no_op_multiclass_select_proba</a> ()</td></tr>
<tr class="separator:a0975dbd8a73d73013fe3f29fbc38534b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a36d70a03faf2b30067d7810bf16e4faf" id="r_a36d70a03faf2b30067d7810bf16e4faf"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a36d70a03faf2b30067d7810bf16e4faf">REGRESSION_SCORERS</a></td></tr>
<tr class="separator:a36d70a03faf2b30067d7810bf16e4faf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47cd49629f3ad3281151a67142701a0e" id="r_a47cd49629f3ad3281151a67142701a0e"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a47cd49629f3ad3281151a67142701a0e">CLF_SCORERS</a></td></tr>
<tr class="separator:a47cd49629f3ad3281151a67142701a0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206bdfec791c69b5ebff6e27457536f3" id="r_a206bdfec791c69b5ebff6e27457536f3"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a206bdfec791c69b5ebff6e27457536f3">CLUSTER_SCORERS</a></td></tr>
<tr class="separator:a206bdfec791c69b5ebff6e27457536f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91d3170487b1dc78145a33d3f01a587" id="r_ad91d3170487b1dc78145a33d3f01a587"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#ad91d3170487b1dc78145a33d3f01a587">MULTILABEL_ONLY_SCORERS</a></td></tr>
<tr class="separator:ad91d3170487b1dc78145a33d3f01a587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c2b35f868da438493e749d90d75dc6" id="r_af4c2b35f868da438493e749d90d75dc6"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#af4c2b35f868da438493e749d90d75dc6">REQUIRE_POSITIVE_Y_SCORERS</a> = [&quot;neg_mean_poisson_deviance&quot;, &quot;neg_mean_gamma_deviance&quot;]</td></tr>
<tr class="separator:af4c2b35f868da438493e749d90d75dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2bea148966e902cf6f21de3f69aaf5" id="r_a2a2bea148966e902cf6f21de3f69aaf5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a2a2bea148966e902cf6f21de3f69aaf5">X_mm</a></td></tr>
<tr class="separator:a2a2bea148966e902cf6f21de3f69aaf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf2c336089f83848c39bd6ea793efa6" id="r_aabf2c336089f83848c39bd6ea793efa6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aabf2c336089f83848c39bd6ea793efa6">y_mm</a></td></tr>
<tr class="separator:aabf2c336089f83848c39bd6ea793efa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacbf8d6f2c5d8f859f4ee5d47c6c14b7" id="r_aacbf8d6f2c5d8f859f4ee5d47c6c14b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#aacbf8d6f2c5d8f859f4ee5d47c6c14b7">y_ml_mm</a></td></tr>
<tr class="separator:aacbf8d6f2c5d8f859f4ee5d47c6c14b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a8c1ac02504e5edd9ccd274053bb7d" id="r_af5a8c1ac02504e5edd9ccd274053bb7d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#af5a8c1ac02504e5edd9ccd274053bb7d">ESTIMATORS</a> = None</td></tr>
<tr class="separator:af5a8c1ac02504e5edd9ccd274053bb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a758b02f7b271a76fba5f316afc577ab0" id="r_a758b02f7b271a76fba5f316afc577ab0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1metrics_1_1tests_1_1test__score__objects.html#a758b02f7b271a76fba5f316afc577ab0">TEMP_FOLDER</a> = None</td></tr>
<tr class="separator:a758b02f7b271a76fba5f316afc577ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab542bb86b7d1c2634b333f05eb97f0a1" name="ab542bb86b7d1c2634b333f05eb97f0a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab542bb86b7d1c2634b333f05eb97f0a1">&#9670;&#160;</a></span>_make_estimators()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects._make_estimators </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_train</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_train</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_ml_train</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  141</span><span class="keyword">def </span>_make_estimators(X_train, y_train, y_ml_train):</div>
<div class="line"><span class="lineno">  142</span>    <span class="comment"># Make estimators that make sense to test various scoring methods</span></div>
<div class="line"><span class="lineno">  143</span>    sensible_regr = DecisionTreeRegressor(random_state=0)</div>
<div class="line"><span class="lineno">  144</span>    <span class="comment"># some of the regressions scorers require strictly positive input.</span></div>
<div class="line"><span class="lineno">  145</span>    sensible_regr.fit(X_train, _require_positive_y(y_train))</div>
<div class="line"><span class="lineno">  146</span>    sensible_clf = DecisionTreeClassifier(random_state=0)</div>
<div class="line"><span class="lineno">  147</span>    sensible_clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  148</span>    sensible_ml_clf = DecisionTreeClassifier(random_state=0)</div>
<div class="line"><span class="lineno">  149</span>    sensible_ml_clf.fit(X_train, y_ml_train)</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">return</span> dict(</div>
<div class="line"><span class="lineno">  151</span>        [(name, sensible_regr) <span class="keywordflow">for</span> name <span class="keywordflow">in</span> REGRESSION_SCORERS]</div>
<div class="line"><span class="lineno">  152</span>        + [(name, sensible_clf) <span class="keywordflow">for</span> name <span class="keywordflow">in</span> CLF_SCORERS]</div>
<div class="line"><span class="lineno">  153</span>        + [(name, sensible_clf) <span class="keywordflow">for</span> name <span class="keywordflow">in</span> CLUSTER_SCORERS]</div>
<div class="line"><span class="lineno">  154</span>        + [(name, sensible_ml_clf) <span class="keywordflow">for</span> name <span class="keywordflow">in</span> MULTILABEL_ONLY_SCORERS]</div>
<div class="line"><span class="lineno">  155</span>    )</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cdce313c427c4baf56da85e511198b2" name="a2cdce313c427c4baf56da85e511198b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cdce313c427c4baf56da85e511198b2">&#9670;&#160;</a></span>_require_positive_y()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects._require_positive_y </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Make targets strictly positive</pre> <div class="fragment"><div class="line"><span class="lineno">  134</span><span class="keyword">def </span>_require_positive_y(y):</div>
<div class="line"><span class="lineno">  135</span>    <span class="stringliteral">&quot;&quot;&quot;Make targets strictly positive&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  136</span>    offset = abs(y.min()) + 1</div>
<div class="line"><span class="lineno">  137</span>    y = y + offset</div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">return</span> y</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3115be5e6984a00baf19fa3782c124c1" name="a3115be5e6984a00baf19fa3782c124c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3115be5e6984a00baf19fa3782c124c1">&#9670;&#160;</a></span>check_scoring_validator_for_single_metric_usecases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.check_scoring_validator_for_single_metric_usecases </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scoring_validator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  229</span><span class="keyword">def </span>check_scoring_validator_for_single_metric_usecases(scoring_validator):</div>
<div class="line"><span class="lineno">  230</span>    <span class="comment"># Test all branches of single metric usecases</span></div>
<div class="line"><span class="lineno">  231</span>    estimator = EstimatorWithoutFit()</div>
<div class="line"><span class="lineno">  232</span>    pattern = (</div>
<div class="line"><span class="lineno">  233</span>        <span class="stringliteral">r&quot;estimator should be an estimator implementing &#39;fit&#39; method,&quot;</span> <span class="stringliteral">r&quot; .* was passed&quot;</span></div>
<div class="line"><span class="lineno">  234</span>    )</div>
<div class="line"><span class="lineno">  235</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=pattern):</div>
<div class="line"><span class="lineno">  236</span>        scoring_validator(estimator)</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    estimator = EstimatorWithFitAndScore()</div>
<div class="line"><span class="lineno">  239</span>    estimator.fit([[1]], [1])</div>
<div class="line"><span class="lineno">  240</span>    scorer = scoring_validator(estimator)</div>
<div class="line"><span class="lineno">  241</span>    <span class="keyword">assert</span> scorer <span class="keywordflow">is</span> _passthrough_scorer</div>
<div class="line"><span class="lineno">  242</span>    assert_almost_equal(scorer(estimator, [[1]], [1]), 1.0)</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    estimator = EstimatorWithFitAndPredict()</div>
<div class="line"><span class="lineno">  245</span>    estimator.fit([[1]], [1])</div>
<div class="line"><span class="lineno">  246</span>    pattern = (</div>
<div class="line"><span class="lineno">  247</span>        <span class="stringliteral">r&quot;If no scoring is specified, the estimator passed should have&quot;</span></div>
<div class="line"><span class="lineno">  248</span>        <span class="stringliteral">r&quot; a &#39;score&#39; method\. The estimator .* does not\.&quot;</span></div>
<div class="line"><span class="lineno">  249</span>    )</div>
<div class="line"><span class="lineno">  250</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=pattern):</div>
<div class="line"><span class="lineno">  251</span>        scoring_validator(estimator)</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>    scorer = scoring_validator(estimator, scoring=<span class="stringliteral">&quot;accuracy&quot;</span>)</div>
<div class="line"><span class="lineno">  254</span>    assert_almost_equal(scorer(estimator, [[1]], [1]), 1.0)</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>    estimator = EstimatorWithFit()</div>
<div class="line"><span class="lineno">  257</span>    scorer = scoring_validator(estimator, scoring=<span class="stringliteral">&quot;accuracy&quot;</span>)</div>
<div class="line"><span class="lineno">  258</span>    <span class="keyword">assert</span> isinstance(scorer, _PredictScorer)</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    <span class="comment"># Test the allow_none parameter for check_scoring alone</span></div>
<div class="line"><span class="lineno">  261</span>    <span class="keywordflow">if</span> scoring_validator <span class="keywordflow">is</span> check_scoring:</div>
<div class="line"><span class="lineno">  262</span>        estimator = EstimatorWithFit()</div>
<div class="line"><span class="lineno">  263</span>        scorer = scoring_validator(estimator, allow_none=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  264</span>        <span class="keyword">assert</span> scorer <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  268</span>    <span class="stringliteral">&quot;scoring&quot;</span>,</div>
<div class="line"><span class="lineno">  269</span>    (</div>
<div class="line"><span class="lineno">  270</span>        (<span class="stringliteral">&quot;accuracy&quot;</span>,),</div>
<div class="line"><span class="lineno">  271</span>        [<span class="stringliteral">&quot;precision&quot;</span>],</div>
<div class="line"><span class="lineno">  272</span>        {<span class="stringliteral">&quot;acc&quot;</span>: <span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;precision&quot;</span>: <span class="stringliteral">&quot;precision&quot;</span>},</div>
<div class="line"><span class="lineno">  273</span>        (<span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;precision&quot;</span>),</div>
<div class="line"><span class="lineno">  274</span>        [<span class="stringliteral">&quot;precision&quot;</span>, <span class="stringliteral">&quot;accuracy&quot;</span>],</div>
<div class="line"><span class="lineno">  275</span>        {</div>
<div class="line"><span class="lineno">  276</span>            <span class="stringliteral">&quot;accuracy&quot;</span>: make_scorer(accuracy_score),</div>
<div class="line"><span class="lineno">  277</span>            <span class="stringliteral">&quot;precision&quot;</span>: make_scorer(precision_score),</div>
<div class="line"><span class="lineno">  278</span>        },</div>
<div class="line"><span class="lineno">  279</span>    ),</div>
<div class="line"><span class="lineno">  280</span>    ids=[</div>
<div class="line"><span class="lineno">  281</span>        <span class="stringliteral">&quot;single_tuple&quot;</span>,</div>
<div class="line"><span class="lineno">  282</span>        <span class="stringliteral">&quot;single_list&quot;</span>,</div>
<div class="line"><span class="lineno">  283</span>        <span class="stringliteral">&quot;dict_str&quot;</span>,</div>
<div class="line"><span class="lineno">  284</span>        <span class="stringliteral">&quot;multi_tuple&quot;</span>,</div>
<div class="line"><span class="lineno">  285</span>        <span class="stringliteral">&quot;multi_list&quot;</span>,</div>
<div class="line"><span class="lineno">  286</span>        <span class="stringliteral">&quot;dict_callable&quot;</span>,</div>
<div class="line"><span class="lineno">  287</span>    ],</div>
<div class="line"><span class="lineno">  288</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab421eb4f3f445f1f2caf7827555966d4" name="ab421eb4f3f445f1f2caf7827555966d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab421eb4f3f445f1f2caf7827555966d4">&#9670;&#160;</a></span>setup_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.setup_module </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  163</span><span class="keyword">def </span>setup_module():</div>
<div class="line"><span class="lineno">  164</span>    <span class="comment"># Create some memory mapped data</span></div>
<div class="line"><span class="lineno">  165</span>    <span class="keyword">global</span> X_mm, y_mm, y_ml_mm, TEMP_FOLDER, ESTIMATORS</div>
<div class="line"><span class="lineno">  166</span>    TEMP_FOLDER = tempfile.mkdtemp(prefix=<span class="stringliteral">&quot;sklearn_test_score_objects_&quot;</span>)</div>
<div class="line"><span class="lineno">  167</span>    X, y = make_classification(n_samples=30, n_features=5, random_state=0)</div>
<div class="line"><span class="lineno">  168</span>    _, y_ml = make_multilabel_classification(n_samples=X.shape[0], random_state=0)</div>
<div class="line"><span class="lineno">  169</span>    filename = os.path.join(TEMP_FOLDER, <span class="stringliteral">&quot;test_data.pkl&quot;</span>)</div>
<div class="line"><span class="lineno">  170</span>    joblib.dump((X, y, y_ml), filename)</div>
<div class="line"><span class="lineno">  171</span>    X_mm, y_mm, y_ml_mm = joblib.load(filename, mmap_mode=<span class="stringliteral">&quot;r&quot;</span>)</div>
<div class="line"><span class="lineno">  172</span>    ESTIMATORS = _make_estimators(X_mm, y_mm, y_ml_mm)</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a165b05cca84b631e6503949241c9f973" name="a165b05cca84b631e6503949241c9f973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a165b05cca84b631e6503949241c9f973">&#9670;&#160;</a></span>string_labeled_classification_problem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.string_labeled_classification_problem </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Train a classifier on binary problem with string target.

The classifier is trained on a binary classification problem where the
minority class of interest has a string label that is intentionally not the
greatest class label using the lexicographic order. In this case, "cancer"
is the positive label, and `classifier.classes_` is
`["cancer", "not cancer"]`.

In addition, the dataset is imbalanced to better identify problems when
using non-symmetric performance metrics such as f1-score, average precision
and so on.

Returns
-------
classifier : estimator object
    Trained classifier on the binary problem.
X_test : ndarray of shape (n_samples, n_features)
    Data to be used as testing set in tests.
y_test : ndarray of shape (n_samples,), dtype=object
    Binary target where labels are strings.
y_pred : ndarray of shape (n_samples,), dtype=object
    Prediction of `classifier` when predicting for `X_test`.
y_pred_proba : ndarray of shape (n_samples, 2), dtype=np.float64
    Probabilities of `classifier` when predicting for `X_test`.
y_pred_decision : ndarray of shape (n_samples,), dtype=np.float64
    Decision function values of `classifier` when predicting on `X_test`.
</pre> <div class="fragment"><div class="line"><span class="lineno">  938</span><span class="keyword">def </span>string_labeled_classification_problem():</div>
<div class="line"><span class="lineno">  939</span>    <span class="stringliteral">&quot;&quot;&quot;Train a classifier on binary problem with string target.</span></div>
<div class="line"><span class="lineno">  940</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  941</span><span class="stringliteral">    The classifier is trained on a binary classification problem where the</span></div>
<div class="line"><span class="lineno">  942</span><span class="stringliteral">    minority class of interest has a string label that is intentionally not the</span></div>
<div class="line"><span class="lineno">  943</span><span class="stringliteral">    greatest class label using the lexicographic order. In this case, &quot;cancer&quot;</span></div>
<div class="line"><span class="lineno">  944</span><span class="stringliteral">    is the positive label, and `classifier.classes_` is</span></div>
<div class="line"><span class="lineno">  945</span><span class="stringliteral">    `[&quot;cancer&quot;, &quot;not cancer&quot;]`.</span></div>
<div class="line"><span class="lineno">  946</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  947</span><span class="stringliteral">    In addition, the dataset is imbalanced to better identify problems when</span></div>
<div class="line"><span class="lineno">  948</span><span class="stringliteral">    using non-symmetric performance metrics such as f1-score, average precision</span></div>
<div class="line"><span class="lineno">  949</span><span class="stringliteral">    and so on.</span></div>
<div class="line"><span class="lineno">  950</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  951</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  952</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  953</span><span class="stringliteral">    classifier : estimator object</span></div>
<div class="line"><span class="lineno">  954</span><span class="stringliteral">        Trained classifier on the binary problem.</span></div>
<div class="line"><span class="lineno">  955</span><span class="stringliteral">    X_test : ndarray of shape (n_samples, n_features)</span></div>
<div class="line"><span class="lineno">  956</span><span class="stringliteral">        Data to be used as testing set in tests.</span></div>
<div class="line"><span class="lineno">  957</span><span class="stringliteral">    y_test : ndarray of shape (n_samples,), dtype=object</span></div>
<div class="line"><span class="lineno">  958</span><span class="stringliteral">        Binary target where labels are strings.</span></div>
<div class="line"><span class="lineno">  959</span><span class="stringliteral">    y_pred : ndarray of shape (n_samples,), dtype=object</span></div>
<div class="line"><span class="lineno">  960</span><span class="stringliteral">        Prediction of `classifier` when predicting for `X_test`.</span></div>
<div class="line"><span class="lineno">  961</span><span class="stringliteral">    y_pred_proba : ndarray of shape (n_samples, 2), dtype=np.float64</span></div>
<div class="line"><span class="lineno">  962</span><span class="stringliteral">        Probabilities of `classifier` when predicting for `X_test`.</span></div>
<div class="line"><span class="lineno">  963</span><span class="stringliteral">    y_pred_decision : ndarray of shape (n_samples,), dtype=np.float64</span></div>
<div class="line"><span class="lineno">  964</span><span class="stringliteral">        Decision function values of `classifier` when predicting on `X_test`.</span></div>
<div class="line"><span class="lineno">  965</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  966</span>    <span class="keyword">from</span> <a class="code hl_namespace" href="namespacesklearn_1_1datasets.html">sklearn.datasets</a> <span class="keyword">import</span> load_breast_cancer</div>
<div class="line"><span class="lineno">  967</span>    <span class="keyword">from</span> <a class="code hl_namespace" href="namespacesklearn_1_1utils.html">sklearn.utils</a> <span class="keyword">import</span> shuffle</div>
<div class="line"><span class="lineno">  968</span> </div>
<div class="line"><span class="lineno">  969</span>    X, y = load_breast_cancer(return_X_y=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  970</span>    <span class="comment"># create an highly imbalanced classification task</span></div>
<div class="line"><span class="lineno">  971</span>    idx_positive = np.flatnonzero(y == 1)</div>
<div class="line"><span class="lineno">  972</span>    idx_negative = np.flatnonzero(y == 0)</div>
<div class="line"><span class="lineno">  973</span>    idx_selected = np.hstack([idx_negative, idx_positive[:25]])</div>
<div class="line"><span class="lineno">  974</span>    X, y = X[idx_selected], y[idx_selected]</div>
<div class="line"><span class="lineno">  975</span>    X, y = shuffle(X, y, random_state=42)</div>
<div class="line"><span class="lineno">  976</span>    <span class="comment"># only use 2 features to make the problem even harder</span></div>
<div class="line"><span class="lineno">  977</span>    X = X[:, :2]</div>
<div class="line"><span class="lineno">  978</span>    y = np.array([<span class="stringliteral">&quot;cancer&quot;</span> <span class="keywordflow">if</span> c == 1 <span class="keywordflow">else</span> <span class="stringliteral">&quot;not cancer&quot;</span> <span class="keywordflow">for</span> c <span class="keywordflow">in</span> y], dtype=object)</div>
<div class="line"><span class="lineno">  979</span>    X_train, X_test, y_train, y_test = train_test_split(</div>
<div class="line"><span class="lineno">  980</span>        X,</div>
<div class="line"><span class="lineno">  981</span>        y,</div>
<div class="line"><span class="lineno">  982</span>        stratify=y,</div>
<div class="line"><span class="lineno">  983</span>        random_state=0,</div>
<div class="line"><span class="lineno">  984</span>    )</div>
<div class="line"><span class="lineno">  985</span>    classifier = LogisticRegression().fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  986</span>    y_pred = classifier.predict(X_test)</div>
<div class="line"><span class="lineno">  987</span>    y_pred_proba = classifier.predict_proba(X_test)</div>
<div class="line"><span class="lineno">  988</span>    y_pred_decision = classifier.decision_function(X_test)</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>    <span class="keywordflow">return</span> classifier, X_test, y_test, y_pred, y_pred_proba, y_pred_decision</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span> </div>
<div class="ttc" id="anamespacesklearn_1_1datasets_html"><div class="ttname"><a href="namespacesklearn_1_1datasets.html">sklearn.datasets</a></div><div class="ttdef"><b>Definition</b> __init__.py:1</div></div>
<div class="ttc" id="anamespacesklearn_1_1utils_html"><div class="ttname"><a href="namespacesklearn_1_1utils.html">sklearn.utils</a></div><div class="ttdef"><b>Definition</b> __init__.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1baf5faf3ee80deba6fc9cc4fec6e7cf" name="a1baf5faf3ee80deba6fc9cc4fec6e7cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1baf5faf3ee80deba6fc9cc4fec6e7cf">&#9670;&#160;</a></span>teardown_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.teardown_module </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  175</span><span class="keyword">def </span>teardown_module():</div>
<div class="line"><span class="lineno">  176</span>    <span class="keyword">global</span> X_mm, y_mm, y_ml_mm, TEMP_FOLDER, ESTIMATORS</div>
<div class="line"><span class="lineno">  177</span>    <span class="comment"># GC closes the mmap file descriptors</span></div>
<div class="line"><span class="lineno">  178</span>    X_mm, y_mm, y_ml_mm, ESTIMATORS = <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  179</span>    shutil.rmtree(TEMP_FOLDER)</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa591162a9eaafe555eb07a4354655fa9" name="aa591162a9eaafe555eb07a4354655fa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa591162a9eaafe555eb07a4354655fa9">&#9670;&#160;</a></span>test_all_scorers_repr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_all_scorers_repr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  223</span><span class="keyword">def </span>test_all_scorers_repr():</div>
<div class="line"><span class="lineno">  224</span>    <span class="comment"># Test that all scorers have a working repr</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> get_scorer_names():</div>
<div class="line"><span class="lineno">  226</span>        repr(get_scorer(name))</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ace79a672202533cb9f49f9cf12822b01" name="ace79a672202533cb9f49f9cf12822b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace79a672202533cb9f49f9cf12822b01">&#9670;&#160;</a></span>test_average_precision_pos_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_average_precision_pos_label </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>string_labeled_classification_problem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  993</span><span class="keyword">def </span>test_average_precision_pos_label(string_labeled_classification_problem):</div>
<div class="line"><span class="lineno">  994</span>    <span class="comment"># check that _ThresholdScorer will lead to the right score when passing</span></div>
<div class="line"><span class="lineno">  995</span>    <span class="comment"># `pos_label`. Currently, only `average_precision_score` is defined to</span></div>
<div class="line"><span class="lineno">  996</span>    <span class="comment"># be such a scorer.</span></div>
<div class="line"><span class="lineno">  997</span>    (</div>
<div class="line"><span class="lineno">  998</span>        clf,</div>
<div class="line"><span class="lineno">  999</span>        X_test,</div>
<div class="line"><span class="lineno"> 1000</span>        y_test,</div>
<div class="line"><span class="lineno"> 1001</span>        _,</div>
<div class="line"><span class="lineno"> 1002</span>        y_pred_proba,</div>
<div class="line"><span class="lineno"> 1003</span>        y_pred_decision,</div>
<div class="line"><span class="lineno"> 1004</span>    ) = string_labeled_classification_problem</div>
<div class="line"><span class="lineno"> 1005</span> </div>
<div class="line"><span class="lineno"> 1006</span>    pos_label = <span class="stringliteral">&quot;cancer&quot;</span></div>
<div class="line"><span class="lineno"> 1007</span>    <span class="comment"># we need to select the positive column or reverse the decision values</span></div>
<div class="line"><span class="lineno"> 1008</span>    y_pred_proba = y_pred_proba[:, 0]</div>
<div class="line"><span class="lineno"> 1009</span>    y_pred_decision = y_pred_decision * -1</div>
<div class="line"><span class="lineno"> 1010</span>    <span class="keyword">assert</span> clf.classes_[0] == pos_label</div>
<div class="line"><span class="lineno"> 1011</span> </div>
<div class="line"><span class="lineno"> 1012</span>    <span class="comment"># check that when calling the scoring function, probability estimates and</span></div>
<div class="line"><span class="lineno"> 1013</span>    <span class="comment"># decision values lead to the same results</span></div>
<div class="line"><span class="lineno"> 1014</span>    ap_proba = average_precision_score(y_test, y_pred_proba, pos_label=pos_label)</div>
<div class="line"><span class="lineno"> 1015</span>    ap_decision_function = average_precision_score(</div>
<div class="line"><span class="lineno"> 1016</span>        y_test, y_pred_decision, pos_label=pos_label</div>
<div class="line"><span class="lineno"> 1017</span>    )</div>
<div class="line"><span class="lineno"> 1018</span>    <span class="keyword">assert</span> ap_proba == pytest.approx(ap_decision_function)</div>
<div class="line"><span class="lineno"> 1019</span> </div>
<div class="line"><span class="lineno"> 1020</span>    <span class="comment"># create a scorer which would require to pass a `pos_label`</span></div>
<div class="line"><span class="lineno"> 1021</span>    <span class="comment"># check that it fails if `pos_label` is not provided</span></div>
<div class="line"><span class="lineno"> 1022</span>    average_precision_scorer = make_scorer(</div>
<div class="line"><span class="lineno"> 1023</span>        average_precision_score,</div>
<div class="line"><span class="lineno"> 1024</span>        needs_threshold=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1025</span>    )</div>
<div class="line"><span class="lineno"> 1026</span>    err_msg = <span class="stringliteral">&quot;pos_label=1 is not a valid label. It should be one of &quot;</span></div>
<div class="line"><span class="lineno"> 1027</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1028</span>        average_precision_scorer(clf, X_test, y_test)</div>
<div class="line"><span class="lineno"> 1029</span> </div>
<div class="line"><span class="lineno"> 1030</span>    <span class="comment"># otherwise, the scorer should give the same results than calling the</span></div>
<div class="line"><span class="lineno"> 1031</span>    <span class="comment"># scoring function</span></div>
<div class="line"><span class="lineno"> 1032</span>    average_precision_scorer = make_scorer(</div>
<div class="line"><span class="lineno"> 1033</span>        average_precision_score, needs_threshold=<span class="keyword">True</span>, pos_label=pos_label</div>
<div class="line"><span class="lineno"> 1034</span>    )</div>
<div class="line"><span class="lineno"> 1035</span>    ap_scorer = average_precision_scorer(clf, X_test, y_test)</div>
<div class="line"><span class="lineno"> 1036</span> </div>
<div class="line"><span class="lineno"> 1037</span>    <span class="keyword">assert</span> ap_scorer == pytest.approx(ap_proba)</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>    <span class="comment"># The above scorer call is using `clf.decision_function`. We will force</span></div>
<div class="line"><span class="lineno"> 1040</span>    <span class="comment"># it to use `clf.predict_proba`.</span></div>
<div class="line"><span class="lineno"> 1041</span>    clf_without_predict_proba = deepcopy(clf)</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>    <span class="keyword">def </span>_predict_proba(self, X):</div>
<div class="line"><span class="lineno"> 1044</span>        <span class="keywordflow">raise</span> NotImplementedError</div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>    clf_without_predict_proba.predict_proba = partial(</div>
<div class="line"><span class="lineno"> 1047</span>        _predict_proba, clf_without_predict_proba</div>
<div class="line"><span class="lineno"> 1048</span>    )</div>
<div class="line"><span class="lineno"> 1049</span>    <span class="comment"># sanity check</span></div>
<div class="line"><span class="lineno"> 1050</span>    <span class="keyword">with</span> pytest.raises(NotImplementedError):</div>
<div class="line"><span class="lineno"> 1051</span>        clf_without_predict_proba.predict_proba(X_test)</div>
<div class="line"><span class="lineno"> 1052</span> </div>
<div class="line"><span class="lineno"> 1053</span>    ap_scorer = average_precision_scorer(clf_without_predict_proba, X_test, y_test)</div>
<div class="line"><span class="lineno"> 1054</span>    <span class="keyword">assert</span> ap_scorer == pytest.approx(ap_proba)</div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a21305a2dfbf53e385789d19f2372c0af" name="a21305a2dfbf53e385789d19f2372c0af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21305a2dfbf53e385789d19f2372c0af">&#9670;&#160;</a></span>test_brier_score_loss_pos_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_brier_score_loss_pos_label </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>string_labeled_classification_problem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1057</span><span class="keyword">def </span>test_brier_score_loss_pos_label(string_labeled_classification_problem):</div>
<div class="line"><span class="lineno"> 1058</span>    <span class="comment"># check that _ProbaScorer leads to the right score when `pos_label` is</span></div>
<div class="line"><span class="lineno"> 1059</span>    <span class="comment"># provided. Currently only the `brier_score_loss` is defined to be such</span></div>
<div class="line"><span class="lineno"> 1060</span>    <span class="comment"># a scorer.</span></div>
<div class="line"><span class="lineno"> 1061</span>    clf, X_test, y_test, _, y_pred_proba, _ = string_labeled_classification_problem</div>
<div class="line"><span class="lineno"> 1062</span> </div>
<div class="line"><span class="lineno"> 1063</span>    pos_label = <span class="stringliteral">&quot;cancer&quot;</span></div>
<div class="line"><span class="lineno"> 1064</span>    <span class="keyword">assert</span> clf.classes_[0] == pos_label</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>    <span class="comment"># brier score loss is symmetric</span></div>
<div class="line"><span class="lineno"> 1067</span>    brier_pos_cancer = brier_score_loss(y_test, y_pred_proba[:, 0], pos_label=<span class="stringliteral">&quot;cancer&quot;</span>)</div>
<div class="line"><span class="lineno"> 1068</span>    brier_pos_not_cancer = brier_score_loss(</div>
<div class="line"><span class="lineno"> 1069</span>        y_test, y_pred_proba[:, 1], pos_label=<span class="stringliteral">&quot;not cancer&quot;</span></div>
<div class="line"><span class="lineno"> 1070</span>    )</div>
<div class="line"><span class="lineno"> 1071</span>    <span class="keyword">assert</span> brier_pos_cancer == pytest.approx(brier_pos_not_cancer)</div>
<div class="line"><span class="lineno"> 1072</span> </div>
<div class="line"><span class="lineno"> 1073</span>    brier_scorer = make_scorer(</div>
<div class="line"><span class="lineno"> 1074</span>        brier_score_loss,</div>
<div class="line"><span class="lineno"> 1075</span>        needs_proba=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1076</span>        pos_label=pos_label,</div>
<div class="line"><span class="lineno"> 1077</span>    )</div>
<div class="line"><span class="lineno"> 1078</span>    <span class="keyword">assert</span> brier_scorer(clf, X_test, y_test) == pytest.approx(brier_pos_cancer)</div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span> </div>
<div class="line"><span class="lineno"> 1081</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1082</span>    <span class="stringliteral">&quot;score_func&quot;</span>, [f1_score, precision_score, recall_score, jaccard_score]</div>
<div class="line"><span class="lineno"> 1083</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="aca5a47a68e6baf1660211c0f4210b405" name="aca5a47a68e6baf1660211c0f4210b405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca5a47a68e6baf1660211c0f4210b405">&#9670;&#160;</a></span>test_check_scoring_and_check_multimetric_scoring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_check_scoring_and_check_multimetric_scoring </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scoring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  289</span><span class="keyword">def </span>test_check_scoring_and_check_multimetric_scoring(scoring):</div>
<div class="line"><span class="lineno">  290</span>    check_scoring_validator_for_single_metric_usecases(check_scoring)</div>
<div class="line"><span class="lineno">  291</span>    <span class="comment"># To make sure the check_scoring is correctly applied to the constituent</span></div>
<div class="line"><span class="lineno">  292</span>    <span class="comment"># scorers</span></div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    estimator = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno">  295</span>    estimator.fit([[1], [2], [3]], [1, 1, 0])</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    scorers = _check_multimetric_scoring(estimator, scoring)</div>
<div class="line"><span class="lineno">  298</span>    <span class="keyword">assert</span> isinstance(scorers, dict)</div>
<div class="line"><span class="lineno">  299</span>    <span class="keyword">assert</span> sorted(scorers.keys()) == sorted(list(scoring))</div>
<div class="line"><span class="lineno">  300</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno">  301</span>        [isinstance(scorer, _PredictScorer) <span class="keywordflow">for</span> scorer <span class="keywordflow">in</span> list(scorers.values())]</div>
<div class="line"><span class="lineno">  302</span>    )</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;acc&quot;</span> <span class="keywordflow">in</span> scoring:</div>
<div class="line"><span class="lineno">  305</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno">  306</span>            scorers[<span class="stringliteral">&quot;acc&quot;</span>](estimator, [[1], [2], [3]], [1, 0, 0]), 2.0 / 3.0</div>
<div class="line"><span class="lineno">  307</span>        )</div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;accuracy&quot;</span> <span class="keywordflow">in</span> scoring:</div>
<div class="line"><span class="lineno">  309</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno">  310</span>            scorers[<span class="stringliteral">&quot;accuracy&quot;</span>](estimator, [[1], [2], [3]], [1, 0, 0]), 2.0 / 3.0</div>
<div class="line"><span class="lineno">  311</span>        )</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;precision&quot;</span> <span class="keywordflow">in</span> scoring:</div>
<div class="line"><span class="lineno">  313</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno">  314</span>            scorers[<span class="stringliteral">&quot;precision&quot;</span>](estimator, [[1], [2], [3]], [1, 0, 0]), 0.5</div>
<div class="line"><span class="lineno">  315</span>        )</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  319</span>    <span class="stringliteral">&quot;scoring, msg&quot;</span>,</div>
<div class="line"><span class="lineno">  320</span>    [</div>
<div class="line"><span class="lineno">  321</span>        (</div>
<div class="line"><span class="lineno">  322</span>            (make_scorer(precision_score), make_scorer(accuracy_score)),</div>
<div class="line"><span class="lineno">  323</span>            <span class="stringliteral">&quot;One or more of the elements were callables&quot;</span>,</div>
<div class="line"><span class="lineno">  324</span>        ),</div>
<div class="line"><span class="lineno">  325</span>        ([5], <span class="stringliteral">&quot;Non-string types were found&quot;</span>),</div>
<div class="line"><span class="lineno">  326</span>        ((make_scorer(precision_score),), <span class="stringliteral">&quot;One or more of the elements were callables&quot;</span>),</div>
<div class="line"><span class="lineno">  327</span>        ((), <span class="stringliteral">&quot;Empty list was given&quot;</span>),</div>
<div class="line"><span class="lineno">  328</span>        ((<span class="stringliteral">&quot;f1&quot;</span>, <span class="stringliteral">&quot;f1&quot;</span>), <span class="stringliteral">&quot;Duplicate elements were found&quot;</span>),</div>
<div class="line"><span class="lineno">  329</span>        ({4: <span class="stringliteral">&quot;accuracy&quot;</span>}, <span class="stringliteral">&quot;Non-string types were found in the keys&quot;</span>),</div>
<div class="line"><span class="lineno">  330</span>        ({}, <span class="stringliteral">&quot;An empty dict was passed&quot;</span>),</div>
<div class="line"><span class="lineno">  331</span>    ],</div>
<div class="line"><span class="lineno">  332</span>    ids=[</div>
<div class="line"><span class="lineno">  333</span>        <span class="stringliteral">&quot;tuple of callables&quot;</span>,</div>
<div class="line"><span class="lineno">  334</span>        <span class="stringliteral">&quot;list of int&quot;</span>,</div>
<div class="line"><span class="lineno">  335</span>        <span class="stringliteral">&quot;tuple of one callable&quot;</span>,</div>
<div class="line"><span class="lineno">  336</span>        <span class="stringliteral">&quot;empty tuple&quot;</span>,</div>
<div class="line"><span class="lineno">  337</span>        <span class="stringliteral">&quot;non-unique str&quot;</span>,</div>
<div class="line"><span class="lineno">  338</span>        <span class="stringliteral">&quot;non-string key dict&quot;</span>,</div>
<div class="line"><span class="lineno">  339</span>        <span class="stringliteral">&quot;empty dict&quot;</span>,</div>
<div class="line"><span class="lineno">  340</span>    ],</div>
<div class="line"><span class="lineno">  341</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="add6ec2684da7b0ebc8951aca9921bffd" name="add6ec2684da7b0ebc8951aca9921bffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add6ec2684da7b0ebc8951aca9921bffd">&#9670;&#160;</a></span>test_check_scoring_and_check_multimetric_scoring_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_check_scoring_and_check_multimetric_scoring_errors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scoring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  342</span><span class="keyword">def </span>test_check_scoring_and_check_multimetric_scoring_errors(scoring, msg):</div>
<div class="line"><span class="lineno">  343</span>    <span class="comment"># Make sure it raises errors when scoring parameter is not valid.</span></div>
<div class="line"><span class="lineno">  344</span>    <span class="comment"># More weird corner cases are tested at test_validation.py</span></div>
<div class="line"><span class="lineno">  345</span>    estimator = EstimatorWithFitAndPredict()</div>
<div class="line"><span class="lineno">  346</span>    estimator.fit([[1]], [1])</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  349</span>        _check_multimetric_scoring(estimator, scoring=scoring)</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adb1e18a527c5058fb76ca2459d5bb80a" name="adb1e18a527c5058fb76ca2459d5bb80a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb1e18a527c5058fb76ca2459d5bb80a">&#9670;&#160;</a></span>test_check_scoring_gridsearchcv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_check_scoring_gridsearchcv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  352</span><span class="keyword">def </span>test_check_scoring_gridsearchcv():</div>
<div class="line"><span class="lineno">  353</span>    <span class="comment"># test that check_scoring works on GridSearchCV and pipeline.</span></div>
<div class="line"><span class="lineno">  354</span>    <span class="comment"># slightly redundant non-regression test.</span></div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>    grid = GridSearchCV(LinearSVC(), param_grid={<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]}, cv=3)</div>
<div class="line"><span class="lineno">  357</span>    scorer = check_scoring(grid, scoring=<span class="stringliteral">&quot;f1&quot;</span>)</div>
<div class="line"><span class="lineno">  358</span>    <span class="keyword">assert</span> isinstance(scorer, _PredictScorer)</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    pipe = make_pipeline(LinearSVC())</div>
<div class="line"><span class="lineno">  361</span>    scorer = check_scoring(pipe, scoring=<span class="stringliteral">&quot;f1&quot;</span>)</div>
<div class="line"><span class="lineno">  362</span>    <span class="keyword">assert</span> isinstance(scorer, _PredictScorer)</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    <span class="comment"># check that cross_val_score definitely calls the scorer</span></div>
<div class="line"><span class="lineno">  365</span>    <span class="comment"># and doesn&#39;t make any assumptions about the estimator apart from having a</span></div>
<div class="line"><span class="lineno">  366</span>    <span class="comment"># fit.</span></div>
<div class="line"><span class="lineno">  367</span>    scores = cross_val_score(</div>
<div class="line"><span class="lineno">  368</span>        EstimatorWithFit(), [[1], [2], [3]], [1, 0, 1], scoring=DummyScorer(), cv=3</div>
<div class="line"><span class="lineno">  369</span>    )</div>
<div class="line"><span class="lineno">  370</span>    assert_array_equal(scores, 1)</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aba55c16703299366fcc928cafc92f4b0" name="aba55c16703299366fcc928cafc92f4b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba55c16703299366fcc928cafc92f4b0">&#9670;&#160;</a></span>test_classification_binary_scores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_classification_binary_scores </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scorer_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>metric</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  403</span><span class="keyword">def </span>test_classification_binary_scores(scorer_name, metric):</div>
<div class="line"><span class="lineno">  404</span>    <span class="comment"># check consistency between score and scorer for scores supporting</span></div>
<div class="line"><span class="lineno">  405</span>    <span class="comment"># binary classification.</span></div>
<div class="line"><span class="lineno">  406</span>    X, y = make_blobs(random_state=0, centers=2)</div>
<div class="line"><span class="lineno">  407</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  408</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno">  409</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>    score = get_scorer(scorer_name)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  412</span>    expected_score = metric(y_test, clf.predict(X_test))</div>
<div class="line"><span class="lineno">  413</span>    assert_almost_equal(score, expected_score)</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  417</span>    <span class="stringliteral">&quot;scorer_name, metric&quot;</span>,</div>
<div class="line"><span class="lineno">  418</span>    [</div>
<div class="line"><span class="lineno">  419</span>        (<span class="stringliteral">&quot;accuracy&quot;</span>, accuracy_score),</div>
<div class="line"><span class="lineno">  420</span>        (<span class="stringliteral">&quot;balanced_accuracy&quot;</span>, balanced_accuracy_score),</div>
<div class="line"><span class="lineno">  421</span>        (<span class="stringliteral">&quot;f1_weighted&quot;</span>, partial(f1_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  422</span>        (<span class="stringliteral">&quot;f1_macro&quot;</span>, partial(f1_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  423</span>        (<span class="stringliteral">&quot;f1_micro&quot;</span>, partial(f1_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  424</span>        (<span class="stringliteral">&quot;precision_weighted&quot;</span>, partial(precision_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  425</span>        (<span class="stringliteral">&quot;precision_macro&quot;</span>, partial(precision_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  426</span>        (<span class="stringliteral">&quot;precision_micro&quot;</span>, partial(precision_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  427</span>        (<span class="stringliteral">&quot;recall_weighted&quot;</span>, partial(recall_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  428</span>        (<span class="stringliteral">&quot;recall_macro&quot;</span>, partial(recall_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  429</span>        (<span class="stringliteral">&quot;recall_micro&quot;</span>, partial(recall_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  430</span>        (<span class="stringliteral">&quot;jaccard_weighted&quot;</span>, partial(jaccard_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  431</span>        (<span class="stringliteral">&quot;jaccard_macro&quot;</span>, partial(jaccard_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  432</span>        (<span class="stringliteral">&quot;jaccard_micro&quot;</span>, partial(jaccard_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  433</span>    ],</div>
<div class="line"><span class="lineno">  434</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="af0d41fe3f938d5f4322e2a6147f2677f" name="af0d41fe3f938d5f4322e2a6147f2677f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d41fe3f938d5f4322e2a6147f2677f">&#9670;&#160;</a></span>test_classification_multiclass_scores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_classification_multiclass_scores </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scorer_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>metric</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  435</span><span class="keyword">def </span>test_classification_multiclass_scores(scorer_name, metric):</div>
<div class="line"><span class="lineno">  436</span>    <span class="comment"># check consistency between score and scorer for scores supporting</span></div>
<div class="line"><span class="lineno">  437</span>    <span class="comment"># multiclass classification.</span></div>
<div class="line"><span class="lineno">  438</span>    X, y = make_classification(</div>
<div class="line"><span class="lineno">  439</span>        n_classes=3, n_informative=3, n_samples=30, random_state=0</div>
<div class="line"><span class="lineno">  440</span>    )</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>    <span class="comment"># use `stratify` = y to ensure train and test sets capture all classes</span></div>
<div class="line"><span class="lineno">  443</span>    X_train, X_test, y_train, y_test = train_test_split(</div>
<div class="line"><span class="lineno">  444</span>        X, y, random_state=0, stratify=y</div>
<div class="line"><span class="lineno">  445</span>    )</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>    clf = DecisionTreeClassifier(random_state=0)</div>
<div class="line"><span class="lineno">  448</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  449</span>    score = get_scorer(scorer_name)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  450</span>    expected_score = metric(y_test, clf.predict(X_test))</div>
<div class="line"><span class="lineno">  451</span>    <span class="keyword">assert</span> score == pytest.approx(expected_score)</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a85ce909c29144b04409e13352074008d" name="a85ce909c29144b04409e13352074008d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85ce909c29144b04409e13352074008d">&#9670;&#160;</a></span>test_classification_scorer_sample_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_classification_scorer_sample_weight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  604</span><span class="keyword">def </span>test_classification_scorer_sample_weight():</div>
<div class="line"><span class="lineno">  605</span>    <span class="comment"># Test that classification scorers support sample_weight or raise sensible</span></div>
<div class="line"><span class="lineno">  606</span>    <span class="comment"># errors</span></div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>    <span class="comment"># Unlike the metrics invariance test, in the scorer case it&#39;s harder</span></div>
<div class="line"><span class="lineno">  609</span>    <span class="comment"># to ensure that, on the classifier output, weighted and unweighted</span></div>
<div class="line"><span class="lineno">  610</span>    <span class="comment"># scores really should be unequal.</span></div>
<div class="line"><span class="lineno">  611</span>    X, y = make_classification(random_state=0)</div>
<div class="line"><span class="lineno">  612</span>    _, y_ml = make_multilabel_classification(n_samples=X.shape[0], random_state=0)</div>
<div class="line"><span class="lineno">  613</span>    split = train_test_split(X, y, y_ml, random_state=0)</div>
<div class="line"><span class="lineno">  614</span>    X_train, X_test, y_train, y_test, y_ml_train, y_ml_test = split</div>
<div class="line"><span class="lineno">  615</span> </div>
<div class="line"><span class="lineno">  616</span>    sample_weight = np.ones_like(y_test)</div>
<div class="line"><span class="lineno">  617</span>    sample_weight[:10] = 0</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>    <span class="comment"># get sensible estimators for each metric</span></div>
<div class="line"><span class="lineno">  620</span>    estimator = _make_estimators(X_train, y_train, y_ml_train)</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> get_scorer_names():</div>
<div class="line"><span class="lineno">  623</span>        scorer = get_scorer(name)</div>
<div class="line"><span class="lineno">  624</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> REGRESSION_SCORERS:</div>
<div class="line"><span class="lineno">  625</span>            <span class="comment"># skip the regression scores</span></div>
<div class="line"><span class="lineno">  626</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  627</span>        <span class="keywordflow">if</span> name == <span class="stringliteral">&quot;top_k_accuracy&quot;</span>:</div>
<div class="line"><span class="lineno">  628</span>            <span class="comment"># in the binary case k &gt; 1 will always lead to a perfect score</span></div>
<div class="line"><span class="lineno">  629</span>            scorer._kwargs = {<span class="stringliteral">&quot;k&quot;</span>: 1}</div>
<div class="line"><span class="lineno">  630</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> MULTILABEL_ONLY_SCORERS:</div>
<div class="line"><span class="lineno">  631</span>            target = y_ml_test</div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  633</span>            target = y_test</div>
<div class="line"><span class="lineno">  634</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  635</span>            weighted = scorer(</div>
<div class="line"><span class="lineno">  636</span>                estimator[name], X_test, target, sample_weight=sample_weight</div>
<div class="line"><span class="lineno">  637</span>            )</div>
<div class="line"><span class="lineno">  638</span>            ignored = scorer(estimator[name], X_test[10:], target[10:])</div>
<div class="line"><span class="lineno">  639</span>            unweighted = scorer(estimator[name], X_test, target)</div>
<div class="line"><span class="lineno">  640</span>            <span class="keyword">assert</span> weighted != unweighted, (</div>
<div class="line"><span class="lineno">  641</span>                f<span class="stringliteral">&quot;scorer {name} behaves identically when called with &quot;</span></div>
<div class="line"><span class="lineno">  642</span>                f<span class="stringliteral">&quot;sample weights: {weighted} vs {unweighted}&quot;</span></div>
<div class="line"><span class="lineno">  643</span>            )</div>
<div class="line"><span class="lineno">  644</span>            assert_almost_equal(</div>
<div class="line"><span class="lineno">  645</span>                weighted,</div>
<div class="line"><span class="lineno">  646</span>                ignored,</div>
<div class="line"><span class="lineno">  647</span>                err_msg=(</div>
<div class="line"><span class="lineno">  648</span>                    f<span class="stringliteral">&quot;scorer {name} behaves differently &quot;</span></div>
<div class="line"><span class="lineno">  649</span>                    <span class="stringliteral">&quot;when ignoring samples and setting &quot;</span></div>
<div class="line"><span class="lineno">  650</span>                    f<span class="stringliteral">&quot;sample_weight to 0: {weighted} vs {ignored}&quot;</span></div>
<div class="line"><span class="lineno">  651</span>                ),</div>
<div class="line"><span class="lineno">  652</span>            )</div>
<div class="line"><span class="lineno">  653</span> </div>
<div class="line"><span class="lineno">  654</span>        <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  655</span>            <span class="keyword">assert</span> <span class="stringliteral">&quot;sample_weight&quot;</span> <span class="keywordflow">in</span> str(e), (</div>
<div class="line"><span class="lineno">  656</span>                f<span class="stringliteral">&quot;scorer {name} raises unhelpful exception when called &quot;</span></div>
<div class="line"><span class="lineno">  657</span>                f<span class="stringliteral">&quot;with sample weights: {str(e)}&quot;</span></div>
<div class="line"><span class="lineno">  658</span>            )</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ad436f2fda3b9845764dbc0152ba88b" name="a5ad436f2fda3b9845764dbc0152ba88b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad436f2fda3b9845764dbc0152ba88b">&#9670;&#160;</a></span>test_custom_scorer_pickling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_custom_scorer_pickling </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  454</span><span class="keyword">def </span>test_custom_scorer_pickling():</div>
<div class="line"><span class="lineno">  455</span>    <span class="comment"># test that custom scorer can be pickled</span></div>
<div class="line"><span class="lineno">  456</span>    X, y = make_blobs(random_state=0, centers=2)</div>
<div class="line"><span class="lineno">  457</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  458</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno">  459</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>    scorer = make_scorer(fbeta_score, beta=2)</div>
<div class="line"><span class="lineno">  462</span>    score1 = scorer(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  463</span>    unpickled_scorer = pickle.loads(pickle.dumps(scorer))</div>
<div class="line"><span class="lineno">  464</span>    score2 = unpickled_scorer(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  465</span>    <span class="keyword">assert</span> score1 == pytest.approx(score2)</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>    <span class="comment"># smoke test the repr:</span></div>
<div class="line"><span class="lineno">  468</span>    repr(fbeta_score)</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaab7384db9dcf02d99a1d54da43dec71" name="aaab7384db9dcf02d99a1d54da43dec71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaab7384db9dcf02d99a1d54da43dec71">&#9670;&#160;</a></span>test_get_scorer_return_copy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_get_scorer_return_copy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1127</span><span class="keyword">def </span>test_get_scorer_return_copy():</div>
<div class="line"><span class="lineno"> 1128</span>    <span class="comment"># test that get_scorer returns a copy</span></div>
<div class="line"><span class="lineno"> 1129</span>    <span class="keyword">assert</span> get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>) <span class="keywordflow">is</span> <span class="keywordflow">not</span> get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)</div>
<div class="line"><span class="lineno"> 1130</span> </div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span><span class="comment"># TODO(1.3) Remove</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="acbbe1285e42d36be0daea8f37b00606d" name="acbbe1285e42d36be0daea8f37b00606d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbe1285e42d36be0daea8f37b00606d">&#9670;&#160;</a></span>test_make_scorer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_make_scorer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  373</span><span class="keyword">def </span>test_make_scorer():</div>
<div class="line"><span class="lineno">  374</span>    <span class="comment"># Sanity check on the make_scorer factory function.</span></div>
<div class="line"><span class="lineno">  375</span>    f = <span class="keyword">lambda</span> *args: 0</div>
<div class="line"><span class="lineno">  376</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  377</span>        make_scorer(f, needs_threshold=<span class="keyword">True</span>, needs_proba=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  381</span>    <span class="stringliteral">&quot;scorer_name, metric&quot;</span>,</div>
<div class="line"><span class="lineno">  382</span>    [</div>
<div class="line"><span class="lineno">  383</span>        (<span class="stringliteral">&quot;f1&quot;</span>, f1_score),</div>
<div class="line"><span class="lineno">  384</span>        (<span class="stringliteral">&quot;f1_weighted&quot;</span>, partial(f1_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  385</span>        (<span class="stringliteral">&quot;f1_macro&quot;</span>, partial(f1_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  386</span>        (<span class="stringliteral">&quot;f1_micro&quot;</span>, partial(f1_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  387</span>        (<span class="stringliteral">&quot;precision&quot;</span>, precision_score),</div>
<div class="line"><span class="lineno">  388</span>        (<span class="stringliteral">&quot;precision_weighted&quot;</span>, partial(precision_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  389</span>        (<span class="stringliteral">&quot;precision_macro&quot;</span>, partial(precision_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  390</span>        (<span class="stringliteral">&quot;precision_micro&quot;</span>, partial(precision_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  391</span>        (<span class="stringliteral">&quot;recall&quot;</span>, recall_score),</div>
<div class="line"><span class="lineno">  392</span>        (<span class="stringliteral">&quot;recall_weighted&quot;</span>, partial(recall_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  393</span>        (<span class="stringliteral">&quot;recall_macro&quot;</span>, partial(recall_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  394</span>        (<span class="stringliteral">&quot;recall_micro&quot;</span>, partial(recall_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  395</span>        (<span class="stringliteral">&quot;jaccard&quot;</span>, jaccard_score),</div>
<div class="line"><span class="lineno">  396</span>        (<span class="stringliteral">&quot;jaccard_weighted&quot;</span>, partial(jaccard_score, average=<span class="stringliteral">&quot;weighted&quot;</span>)),</div>
<div class="line"><span class="lineno">  397</span>        (<span class="stringliteral">&quot;jaccard_macro&quot;</span>, partial(jaccard_score, average=<span class="stringliteral">&quot;macro&quot;</span>)),</div>
<div class="line"><span class="lineno">  398</span>        (<span class="stringliteral">&quot;jaccard_micro&quot;</span>, partial(jaccard_score, average=<span class="stringliteral">&quot;micro&quot;</span>)),</div>
<div class="line"><span class="lineno">  399</span>        (<span class="stringliteral">&quot;top_k_accuracy&quot;</span>, top_k_accuracy_score),</div>
<div class="line"><span class="lineno">  400</span>        (<span class="stringliteral">&quot;matthews_corrcoef&quot;</span>, matthews_corrcoef),</div>
<div class="line"><span class="lineno">  401</span>    ],</div>
<div class="line"><span class="lineno">  402</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e56dc6c5bdbea0b6a0ddccacc198aec" name="a1e56dc6c5bdbea0b6a0ddccacc198aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e56dc6c5bdbea0b6a0ddccacc198aec">&#9670;&#160;</a></span>test_multiclass_roc_no_proba_scorer_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_multiclass_roc_no_proba_scorer_errors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scorer_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  925</span><span class="keyword">def </span>test_multiclass_roc_no_proba_scorer_errors(scorer_name):</div>
<div class="line"><span class="lineno">  926</span>    <span class="comment"># Perceptron has no predict_proba</span></div>
<div class="line"><span class="lineno">  927</span>    scorer = get_scorer(scorer_name)</div>
<div class="line"><span class="lineno">  928</span>    X, y = make_classification(</div>
<div class="line"><span class="lineno">  929</span>        n_classes=3, n_informative=3, n_samples=20, random_state=0</div>
<div class="line"><span class="lineno">  930</span>    )</div>
<div class="line"><span class="lineno">  931</span>    lr = Perceptron().fit(X, y)</div>
<div class="line"><span class="lineno">  932</span>    msg = <span class="stringliteral">&quot;&#39;Perceptron&#39; object has no attribute &#39;predict_proba&#39;&quot;</span></div>
<div class="line"><span class="lineno">  933</span>    <span class="keyword">with</span> pytest.raises(AttributeError, match=msg):</div>
<div class="line"><span class="lineno">  934</span>        scorer(lr, X, y)</div>
<div class="line"><span class="lineno">  935</span> </div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span><span class="preprocessor">@pytest.fixture</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d883fbb289efaf7890be66f1b19afc6" name="a8d883fbb289efaf7890be66f1b19afc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d883fbb289efaf7890be66f1b19afc6">&#9670;&#160;</a></span>test_multiclass_roc_proba_scorer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_multiclass_roc_proba_scorer </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scorer_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>metric</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  891</span><span class="keyword">def </span>test_multiclass_roc_proba_scorer(scorer_name, metric):</div>
<div class="line"><span class="lineno">  892</span>    scorer = get_scorer(scorer_name)</div>
<div class="line"><span class="lineno">  893</span>    X, y = make_classification(</div>
<div class="line"><span class="lineno">  894</span>        n_classes=3, n_informative=3, n_samples=20, random_state=0</div>
<div class="line"><span class="lineno">  895</span>    )</div>
<div class="line"><span class="lineno">  896</span>    lr = LogisticRegression(multi_class=<span class="stringliteral">&quot;multinomial&quot;</span>).fit(X, y)</div>
<div class="line"><span class="lineno">  897</span>    y_proba = lr.predict_proba(X)</div>
<div class="line"><span class="lineno">  898</span>    expected_score = metric(y, y_proba)</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>    <span class="keyword">assert</span> scorer(lr, X, y) == pytest.approx(expected_score)</div>
<div class="line"><span class="lineno">  901</span> </div>
<div class="line"><span class="lineno">  902</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb29547dd362b8e24778b52fd5be4f07" name="aeb29547dd362b8e24778b52fd5be4f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb29547dd362b8e24778b52fd5be4f07">&#9670;&#160;</a></span>test_multiclass_roc_proba_scorer_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_multiclass_roc_proba_scorer_label </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  903</span><span class="keyword">def </span>test_multiclass_roc_proba_scorer_label():</div>
<div class="line"><span class="lineno">  904</span>    scorer = make_scorer(</div>
<div class="line"><span class="lineno">  905</span>        roc_auc_score, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>, labels=[0, 1, 2], needs_proba=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  906</span>    )</div>
<div class="line"><span class="lineno">  907</span>    X, y = make_classification(</div>
<div class="line"><span class="lineno">  908</span>        n_classes=3, n_informative=3, n_samples=20, random_state=0</div>
<div class="line"><span class="lineno">  909</span>    )</div>
<div class="line"><span class="lineno">  910</span>    lr = LogisticRegression(multi_class=<span class="stringliteral">&quot;multinomial&quot;</span>).fit(X, y)</div>
<div class="line"><span class="lineno">  911</span>    y_proba = lr.predict_proba(X)</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>    y_binary = y == 0</div>
<div class="line"><span class="lineno">  914</span>    expected_score = roc_auc_score(</div>
<div class="line"><span class="lineno">  915</span>        y_binary, y_proba, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>, labels=[0, 1, 2]</div>
<div class="line"><span class="lineno">  916</span>    )</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>    <span class="keyword">assert</span> scorer(lr, X, y_binary) == pytest.approx(expected_score)</div>
<div class="line"><span class="lineno">  919</span> </div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  922</span>    <span class="stringliteral">&quot;scorer_name&quot;</span>,</div>
<div class="line"><span class="lineno">  923</span>    [<span class="stringliteral">&quot;roc_auc_ovr&quot;</span>, <span class="stringliteral">&quot;roc_auc_ovo&quot;</span>, <span class="stringliteral">&quot;roc_auc_ovr_weighted&quot;</span>, <span class="stringliteral">&quot;roc_auc_ovo_weighted&quot;</span>],</div>
<div class="line"><span class="lineno">  924</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a690cab9b8584fb43cdb5d34b88152ee4" name="a690cab9b8584fb43cdb5d34b88152ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a690cab9b8584fb43cdb5d34b88152ee4">&#9670;&#160;</a></span>test_multimetric_scorer_calls_method_once()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_multimetric_scorer_calls_method_once </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scorers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_predict_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_predict_proba_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_decision_func_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  769</span>):</div>
<div class="line"><span class="lineno">  770</span>    X, y = np.array([[1], [1], [0], [0], [0]]), np.array([0, 1, 1, 1, 0])</div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span>    mock_est = Mock()</div>
<div class="line"><span class="lineno">  773</span>    fit_func = Mock(return_value=mock_est)</div>
<div class="line"><span class="lineno">  774</span>    predict_func = Mock(return_value=y)</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>    pos_proba = np.random.rand(X.shape[0])</div>
<div class="line"><span class="lineno">  777</span>    proba = np.c_[1 - pos_proba, pos_proba]</div>
<div class="line"><span class="lineno">  778</span>    predict_proba_func = Mock(return_value=proba)</div>
<div class="line"><span class="lineno">  779</span>    decision_function_func = Mock(return_value=pos_proba)</div>
<div class="line"><span class="lineno">  780</span> </div>
<div class="line"><span class="lineno">  781</span>    mock_est.fit = fit_func</div>
<div class="line"><span class="lineno">  782</span>    mock_est.predict = predict_func</div>
<div class="line"><span class="lineno">  783</span>    mock_est.predict_proba = predict_proba_func</div>
<div class="line"><span class="lineno">  784</span>    mock_est.decision_function = decision_function_func</div>
<div class="line"><span class="lineno">  785</span>    <span class="comment"># add the classes that would be found during fit</span></div>
<div class="line"><span class="lineno">  786</span>    mock_est.classes_ = np.array([0, 1])</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>    scorer_dict = _check_multimetric_scoring(LogisticRegression(), scorers)</div>
<div class="line"><span class="lineno">  789</span>    multi_scorer = _MultimetricScorer(**scorer_dict)</div>
<div class="line"><span class="lineno">  790</span>    results = multi_scorer(mock_est, X, y)</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>    <span class="keyword">assert</span> set(scorers) == set(results)  <span class="comment"># compare dict keys</span></div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>    <span class="keyword">assert</span> predict_func.call_count == expected_predict_count</div>
<div class="line"><span class="lineno">  795</span>    <span class="keyword">assert</span> predict_proba_func.call_count == expected_predict_proba_count</div>
<div class="line"><span class="lineno">  796</span>    <span class="keyword">assert</span> decision_function_func.call_count == expected_decision_func_count</div>
<div class="line"><span class="lineno">  797</span> </div>
<div class="line"><span class="lineno">  798</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afd1f3910e8f98b333dbbfd5e9f2d44de" name="afd1f3910e8f98b333dbbfd5e9f2d44de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd1f3910e8f98b333dbbfd5e9f2d44de">&#9670;&#160;</a></span>test_multimetric_scorer_calls_method_once_classifier_no_decision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_multimetric_scorer_calls_method_once_classifier_no_decision </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  799</span><span class="keyword">def </span>test_multimetric_scorer_calls_method_once_classifier_no_decision():</div>
<div class="line"><span class="lineno">  800</span>    predict_proba_call_cnt = 0</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>    <span class="keyword">class </span>MockKNeighborsClassifier(KNeighborsClassifier):</div>
<div class="line"><span class="lineno">  803</span>        <span class="keyword">def </span>predict_proba(self, X):</div>
<div class="line"><span class="lineno">  804</span>            nonlocal predict_proba_call_cnt</div>
<div class="line"><span class="lineno">  805</span>            predict_proba_call_cnt += 1</div>
<div class="line"><span class="lineno">  806</span>            <span class="keywordflow">return</span> super().predict_proba(X)</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span>    X, y = np.array([[1], [1], [0], [0], [0]]), np.array([0, 1, 1, 1, 0])</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    <span class="comment"># no decision function</span></div>
<div class="line"><span class="lineno">  811</span>    clf = MockKNeighborsClassifier(n_neighbors=1)</div>
<div class="line"><span class="lineno">  812</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span>    scorers = [<span class="stringliteral">&quot;roc_auc&quot;</span>, <span class="stringliteral">&quot;neg_log_loss&quot;</span>]</div>
<div class="line"><span class="lineno">  815</span>    scorer_dict = _check_multimetric_scoring(clf, scorers)</div>
<div class="line"><span class="lineno">  816</span>    scorer = _MultimetricScorer(**scorer_dict)</div>
<div class="line"><span class="lineno">  817</span>    scorer(clf, X, y)</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>    <span class="keyword">assert</span> predict_proba_call_cnt == 1</div>
<div class="line"><span class="lineno">  820</span> </div>
<div class="line"><span class="lineno">  821</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1da844a4040efe7744f3d9db536b77b" name="ab1da844a4040efe7744f3d9db536b77b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1da844a4040efe7744f3d9db536b77b">&#9670;&#160;</a></span>test_multimetric_scorer_calls_method_once_regressor_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_multimetric_scorer_calls_method_once_regressor_threshold </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  822</span><span class="keyword">def </span>test_multimetric_scorer_calls_method_once_regressor_threshold():</div>
<div class="line"><span class="lineno">  823</span>    predict_called_cnt = 0</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>    <span class="keyword">class </span>MockDecisionTreeRegressor(DecisionTreeRegressor):</div>
<div class="line"><span class="lineno">  826</span>        <span class="keyword">def </span>predict(self, X):</div>
<div class="line"><span class="lineno">  827</span>            nonlocal predict_called_cnt</div>
<div class="line"><span class="lineno">  828</span>            predict_called_cnt += 1</div>
<div class="line"><span class="lineno">  829</span>            <span class="keywordflow">return</span> super().predict(X)</div>
<div class="line"><span class="lineno">  830</span> </div>
<div class="line"><span class="lineno">  831</span>    X, y = np.array([[1], [1], [0], [0], [0]]), np.array([0, 1, 1, 1, 0])</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>    <span class="comment"># no decision function</span></div>
<div class="line"><span class="lineno">  834</span>    clf = MockDecisionTreeRegressor()</div>
<div class="line"><span class="lineno">  835</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>    scorers = {<span class="stringliteral">&quot;neg_mse&quot;</span>: <span class="stringliteral">&quot;neg_mean_squared_error&quot;</span>, <span class="stringliteral">&quot;r2&quot;</span>: <span class="stringliteral">&quot;roc_auc&quot;</span>}</div>
<div class="line"><span class="lineno">  838</span>    scorer_dict = _check_multimetric_scoring(clf, scorers)</div>
<div class="line"><span class="lineno">  839</span>    scorer = _MultimetricScorer(**scorer_dict)</div>
<div class="line"><span class="lineno">  840</span>    scorer(clf, X, y)</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span>    <span class="keyword">assert</span> predict_called_cnt == 1</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa256805c2d7317f213eef317cdf1ffa0" name="aa256805c2d7317f213eef317cdf1ffa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa256805c2d7317f213eef317cdf1ffa0">&#9670;&#160;</a></span>test_multimetric_scorer_sanity_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_multimetric_scorer_sanity_check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  845</span><span class="keyword">def </span>test_multimetric_scorer_sanity_check():</div>
<div class="line"><span class="lineno">  846</span>    <span class="comment"># scoring dictionary returned is the same as calling each scorer separately</span></div>
<div class="line"><span class="lineno">  847</span>    scorers = {</div>
<div class="line"><span class="lineno">  848</span>        <span class="stringliteral">&quot;a1&quot;</span>: <span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno">  849</span>        <span class="stringliteral">&quot;a2&quot;</span>: <span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno">  850</span>        <span class="stringliteral">&quot;ll1&quot;</span>: <span class="stringliteral">&quot;neg_log_loss&quot;</span>,</div>
<div class="line"><span class="lineno">  851</span>        <span class="stringliteral">&quot;ll2&quot;</span>: <span class="stringliteral">&quot;neg_log_loss&quot;</span>,</div>
<div class="line"><span class="lineno">  852</span>        <span class="stringliteral">&quot;ra1&quot;</span>: <span class="stringliteral">&quot;roc_auc&quot;</span>,</div>
<div class="line"><span class="lineno">  853</span>        <span class="stringliteral">&quot;ra2&quot;</span>: <span class="stringliteral">&quot;roc_auc&quot;</span>,</div>
<div class="line"><span class="lineno">  854</span>    }</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>    X, y = make_classification(random_state=0)</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>    clf = DecisionTreeClassifier()</div>
<div class="line"><span class="lineno">  859</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>    scorer_dict = _check_multimetric_scoring(clf, scorers)</div>
<div class="line"><span class="lineno">  862</span>    multi_scorer = _MultimetricScorer(**scorer_dict)</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>    result = multi_scorer(clf, X, y)</div>
<div class="line"><span class="lineno">  865</span> </div>
<div class="line"><span class="lineno">  866</span>    separate_scores = {</div>
<div class="line"><span class="lineno">  867</span>        name: get_scorer(name)(clf, X, y)</div>
<div class="line"><span class="lineno">  868</span>        <span class="keywordflow">for</span> name <span class="keywordflow">in</span> [<span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;neg_log_loss&quot;</span>, <span class="stringliteral">&quot;roc_auc&quot;</span>]</div>
<div class="line"><span class="lineno">  869</span>    }</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>    <span class="keywordflow">for</span> key, value <span class="keywordflow">in</span> result.items():</div>
<div class="line"><span class="lineno">  872</span>        score_name = scorers[key]</div>
<div class="line"><span class="lineno">  873</span>        assert_allclose(value, separate_scores[score_name])</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span> </div>
<div class="line"><span class="lineno">  876</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  877</span>    <span class="stringliteral">&quot;scorer_name, metric&quot;</span>,</div>
<div class="line"><span class="lineno">  878</span>    [</div>
<div class="line"><span class="lineno">  879</span>        (<span class="stringliteral">&quot;roc_auc_ovr&quot;</span>, partial(roc_auc_score, multi_class=<span class="stringliteral">&quot;ovr&quot;</span>)),</div>
<div class="line"><span class="lineno">  880</span>        (<span class="stringliteral">&quot;roc_auc_ovo&quot;</span>, partial(roc_auc_score, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>)),</div>
<div class="line"><span class="lineno">  881</span>        (</div>
<div class="line"><span class="lineno">  882</span>            <span class="stringliteral">&quot;roc_auc_ovr_weighted&quot;</span>,</div>
<div class="line"><span class="lineno">  883</span>            partial(roc_auc_score, multi_class=<span class="stringliteral">&quot;ovr&quot;</span>, average=<span class="stringliteral">&quot;weighted&quot;</span>),</div>
<div class="line"><span class="lineno">  884</span>        ),</div>
<div class="line"><span class="lineno">  885</span>        (</div>
<div class="line"><span class="lineno">  886</span>            <span class="stringliteral">&quot;roc_auc_ovo_weighted&quot;</span>,</div>
<div class="line"><span class="lineno">  887</span>            partial(roc_auc_score, multi_class=<span class="stringliteral">&quot;ovo&quot;</span>, average=<span class="stringliteral">&quot;weighted&quot;</span>),</div>
<div class="line"><span class="lineno">  888</span>        ),</div>
<div class="line"><span class="lineno">  889</span>    ],</div>
<div class="line"><span class="lineno">  890</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="affc143c379e258ce85c9c09bac968c24" name="affc143c379e258ce85c9c09bac968c24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc143c379e258ce85c9c09bac968c24">&#9670;&#160;</a></span>test_non_symmetric_metric_pos_label()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_non_symmetric_metric_pos_label </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>score_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>string_labeled_classification_problem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1086</span>):</div>
<div class="line"><span class="lineno"> 1087</span>    <span class="comment"># check that _PredictScorer leads to the right score when `pos_label` is</span></div>
<div class="line"><span class="lineno"> 1088</span>    <span class="comment"># provided. We check for all possible metric supported.</span></div>
<div class="line"><span class="lineno"> 1089</span>    <span class="comment"># Note: At some point we may end up having &quot;scorer tags&quot;.</span></div>
<div class="line"><span class="lineno"> 1090</span>    clf, X_test, y_test, y_pred, _, _ = string_labeled_classification_problem</div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>    pos_label = <span class="stringliteral">&quot;cancer&quot;</span></div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keyword">assert</span> clf.classes_[0] == pos_label</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>    score_pos_cancer = score_func(y_test, y_pred, pos_label=<span class="stringliteral">&quot;cancer&quot;</span>)</div>
<div class="line"><span class="lineno"> 1096</span>    score_pos_not_cancer = score_func(y_test, y_pred, pos_label=<span class="stringliteral">&quot;not cancer&quot;</span>)</div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>    <span class="keyword">assert</span> score_pos_cancer != pytest.approx(score_pos_not_cancer)</div>
<div class="line"><span class="lineno"> 1099</span> </div>
<div class="line"><span class="lineno"> 1100</span>    scorer = make_scorer(score_func, pos_label=pos_label)</div>
<div class="line"><span class="lineno"> 1101</span>    <span class="keyword">assert</span> scorer(clf, X_test, y_test) == pytest.approx(score_pos_cancer)</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span> </div>
<div class="line"><span class="lineno"> 1104</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1105</span>    <span class="stringliteral">&quot;scorer&quot;</span>,</div>
<div class="line"><span class="lineno"> 1106</span>    [</div>
<div class="line"><span class="lineno"> 1107</span>        make_scorer(average_precision_score, needs_threshold=<span class="keyword">True</span>, pos_label=<span class="stringliteral">&quot;xxx&quot;</span>),</div>
<div class="line"><span class="lineno"> 1108</span>        make_scorer(brier_score_loss, needs_proba=<span class="keyword">True</span>, pos_label=<span class="stringliteral">&quot;xxx&quot;</span>),</div>
<div class="line"><span class="lineno"> 1109</span>        make_scorer(f1_score, pos_label=<span class="stringliteral">&quot;xxx&quot;</span>),</div>
<div class="line"><span class="lineno"> 1110</span>    ],</div>
<div class="line"><span class="lineno"> 1111</span>    ids=[<span class="stringliteral">&quot;ThresholdScorer&quot;</span>, <span class="stringliteral">&quot;ProbaScorer&quot;</span>, <span class="stringliteral">&quot;PredictScorer&quot;</span>],</div>
<div class="line"><span class="lineno"> 1112</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a622682dac05fc1700e55364d644e8c06" name="a622682dac05fc1700e55364d644e8c06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a622682dac05fc1700e55364d644e8c06">&#9670;&#160;</a></span>test_raises_on_score_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_raises_on_score_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  589</span><span class="keyword">def </span>test_raises_on_score_list():</div>
<div class="line"><span class="lineno">  590</span>    <span class="comment"># Test that when a list of scores is returned, we raise proper errors.</span></div>
<div class="line"><span class="lineno">  591</span>    X, y = make_blobs(random_state=0)</div>
<div class="line"><span class="lineno">  592</span>    f1_scorer_no_average = make_scorer(f1_score, average=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  593</span>    clf = DecisionTreeClassifier()</div>
<div class="line"><span class="lineno">  594</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  595</span>        cross_val_score(clf, X, y, scoring=f1_scorer_no_average)</div>
<div class="line"><span class="lineno">  596</span>    grid_search = GridSearchCV(</div>
<div class="line"><span class="lineno">  597</span>        clf, scoring=f1_scorer_no_average, param_grid={<span class="stringliteral">&quot;max_depth&quot;</span>: [1, 2]}</div>
<div class="line"><span class="lineno">  598</span>    )</div>
<div class="line"><span class="lineno">  599</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  600</span>        grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span> </div>
<div class="line"><span class="lineno">  603</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7b351624950476268708b6ca858eeba" name="ab7b351624950476268708b6ca858eeba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b351624950476268708b6ca858eeba">&#9670;&#160;</a></span>test_regression_scorer_sample_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_regression_scorer_sample_weight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  662</span><span class="keyword">def </span>test_regression_scorer_sample_weight():</div>
<div class="line"><span class="lineno">  663</span>    <span class="comment"># Test that regression scorers support sample_weight or raise sensible</span></div>
<div class="line"><span class="lineno">  664</span>    <span class="comment"># errors</span></div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span>    <span class="comment"># Odd number of test samples req for neg_median_absolute_error</span></div>
<div class="line"><span class="lineno">  667</span>    X, y = make_regression(n_samples=101, n_features=20, random_state=0)</div>
<div class="line"><span class="lineno">  668</span>    y = _require_positive_y(y)</div>
<div class="line"><span class="lineno">  669</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>    sample_weight = np.ones_like(y_test)</div>
<div class="line"><span class="lineno">  672</span>    <span class="comment"># Odd number req for neg_median_absolute_error</span></div>
<div class="line"><span class="lineno">  673</span>    sample_weight[:11] = 0</div>
<div class="line"><span class="lineno">  674</span> </div>
<div class="line"><span class="lineno">  675</span>    reg = DecisionTreeRegressor(random_state=0)</div>
<div class="line"><span class="lineno">  676</span>    reg.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  677</span> </div>
<div class="line"><span class="lineno">  678</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> get_scorer_names():</div>
<div class="line"><span class="lineno">  679</span>        scorer = get_scorer(name)</div>
<div class="line"><span class="lineno">  680</span>        <span class="keywordflow">if</span> name <span class="keywordflow">not</span> <span class="keywordflow">in</span> REGRESSION_SCORERS:</div>
<div class="line"><span class="lineno">  681</span>            <span class="comment"># skip classification scorers</span></div>
<div class="line"><span class="lineno">  682</span>            <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  684</span>            weighted = scorer(reg, X_test, y_test, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno">  685</span>            ignored = scorer(reg, X_test[11:], y_test[11:])</div>
<div class="line"><span class="lineno">  686</span>            unweighted = scorer(reg, X_test, y_test)</div>
<div class="line"><span class="lineno">  687</span>            <span class="keyword">assert</span> weighted != unweighted, (</div>
<div class="line"><span class="lineno">  688</span>                f<span class="stringliteral">&quot;scorer {name} behaves identically when called with &quot;</span></div>
<div class="line"><span class="lineno">  689</span>                f<span class="stringliteral">&quot;sample weights: {weighted} vs {unweighted}&quot;</span></div>
<div class="line"><span class="lineno">  690</span>            )</div>
<div class="line"><span class="lineno">  691</span>            assert_almost_equal(</div>
<div class="line"><span class="lineno">  692</span>                weighted,</div>
<div class="line"><span class="lineno">  693</span>                ignored,</div>
<div class="line"><span class="lineno">  694</span>                err_msg=(</div>
<div class="line"><span class="lineno">  695</span>                    f<span class="stringliteral">&quot;scorer {name} behaves differently &quot;</span></div>
<div class="line"><span class="lineno">  696</span>                    <span class="stringliteral">&quot;when ignoring samples and setting &quot;</span></div>
<div class="line"><span class="lineno">  697</span>                    f<span class="stringliteral">&quot;sample_weight to 0: {weighted} vs {ignored}&quot;</span></div>
<div class="line"><span class="lineno">  698</span>                ),</div>
<div class="line"><span class="lineno">  699</span>            )</div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span>        <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  702</span>            <span class="keyword">assert</span> <span class="stringliteral">&quot;sample_weight&quot;</span> <span class="keywordflow">in</span> str(e), (</div>
<div class="line"><span class="lineno">  703</span>                f<span class="stringliteral">&quot;scorer {name} raises unhelpful exception when called &quot;</span></div>
<div class="line"><span class="lineno">  704</span>                f<span class="stringliteral">&quot;with sample weights: {str(e)}&quot;</span></div>
<div class="line"><span class="lineno">  705</span>            )</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span><span class="preprocessor">@pytest.mark.parametrize(&quot;name&quot;, get_scorer_names()</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="adc5a652303b1e05d4f25f9cf1ee7efdc" name="adc5a652303b1e05d4f25f9cf1ee7efdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc5a652303b1e05d4f25f9cf1ee7efdc">&#9670;&#160;</a></span>test_regression_scorers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_regression_scorers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  471</span><span class="keyword">def </span>test_regression_scorers():</div>
<div class="line"><span class="lineno">  472</span>    <span class="comment"># Test regression scorers.</span></div>
<div class="line"><span class="lineno">  473</span>    diabetes = load_diabetes()</div>
<div class="line"><span class="lineno">  474</span>    X, y = diabetes.data, diabetes.target</div>
<div class="line"><span class="lineno">  475</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  476</span>    clf = Ridge()</div>
<div class="line"><span class="lineno">  477</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  478</span>    score1 = get_scorer(<span class="stringliteral">&quot;r2&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  479</span>    score2 = r2_score(y_test, clf.predict(X_test))</div>
<div class="line"><span class="lineno">  480</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac71066389aeae01b8b5206cf3aca606f" name="ac71066389aeae01b8b5206cf3aca606f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac71066389aeae01b8b5206cf3aca606f">&#9670;&#160;</a></span>test_scorer_memmap_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_scorer_memmap_input </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  709</span><span class="keyword">def </span>test_scorer_memmap_input(name):</div>
<div class="line"><span class="lineno">  710</span>    <span class="comment"># Non-regression test for #6147: some score functions would</span></div>
<div class="line"><span class="lineno">  711</span>    <span class="comment"># return singleton memmap when computed on memmap data instead of scalar</span></div>
<div class="line"><span class="lineno">  712</span>    <span class="comment"># float values.</span></div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>    <span class="keywordflow">if</span> name <span class="keywordflow">in</span> REQUIRE_POSITIVE_Y_SCORERS:</div>
<div class="line"><span class="lineno">  715</span>        y_mm_1 = _require_positive_y(y_mm)</div>
<div class="line"><span class="lineno">  716</span>        y_ml_mm_1 = _require_positive_y(y_ml_mm)</div>
<div class="line"><span class="lineno">  717</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  718</span>        y_mm_1, y_ml_mm_1 = y_mm, y_ml_mm</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span>    <span class="comment"># UndefinedMetricWarning for P / R scores</span></div>
<div class="line"><span class="lineno">  721</span>    <span class="keyword">with</span> ignore_warnings():</div>
<div class="line"><span class="lineno">  722</span>        scorer, estimator = get_scorer(name), ESTIMATORS[name]</div>
<div class="line"><span class="lineno">  723</span>        <span class="keywordflow">if</span> name <span class="keywordflow">in</span> MULTILABEL_ONLY_SCORERS:</div>
<div class="line"><span class="lineno">  724</span>            score = scorer(estimator, X_mm, y_ml_mm_1)</div>
<div class="line"><span class="lineno">  725</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  726</span>            score = scorer(estimator, X_mm, y_mm_1)</div>
<div class="line"><span class="lineno">  727</span>        <span class="keyword">assert</span> isinstance(score, numbers.Number), name</div>
<div class="line"><span class="lineno">  728</span> </div>
<div class="line"><span class="lineno">  729</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0975dbd8a73d73013fe3f29fbc38534b" name="a0975dbd8a73d73013fe3f29fbc38534b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0975dbd8a73d73013fe3f29fbc38534b">&#9670;&#160;</a></span>test_scorer_no_op_multiclass_select_proba()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_scorer_no_op_multiclass_select_proba </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1138</span><span class="keyword">def </span>test_scorer_no_op_multiclass_select_proba():</div>
<div class="line"><span class="lineno"> 1139</span>    <span class="comment"># check that calling a ProbaScorer on a multiclass problem do not raise</span></div>
<div class="line"><span class="lineno"> 1140</span>    <span class="comment"># even if `y_true` would be binary during the scoring.</span></div>
<div class="line"><span class="lineno"> 1141</span>    <span class="comment"># `_select_proba_binary` should not be called in this case.</span></div>
<div class="line"><span class="lineno"> 1142</span>    X, y = make_classification(</div>
<div class="line"><span class="lineno"> 1143</span>        n_classes=3, n_informative=3, n_samples=20, random_state=0</div>
<div class="line"><span class="lineno"> 1144</span>    )</div>
<div class="line"><span class="lineno"> 1145</span>    lr = LogisticRegression().fit(X, y)</div>
<div class="line"><span class="lineno"> 1146</span> </div>
<div class="line"><span class="lineno"> 1147</span>    mask_last_class = y == lr.classes_[-1]</div>
<div class="line"><span class="lineno"> 1148</span>    X_test, y_test = X[~mask_last_class], y[~mask_last_class]</div>
<div class="line"><span class="lineno"> 1149</span>    assert_array_equal(np.unique(y_test), lr.classes_[:-1])</div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span>    scorer = make_scorer(</div>
<div class="line"><span class="lineno"> 1152</span>        roc_auc_score,</div>
<div class="line"><span class="lineno"> 1153</span>        needs_proba=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1154</span>        multi_class=<span class="stringliteral">&quot;ovo&quot;</span>,</div>
<div class="line"><span class="lineno"> 1155</span>        labels=lr.classes_,</div>
<div class="line"><span class="lineno"> 1156</span>    )</div>
<div class="line"><span class="lineno"> 1157</span>    scorer(lr, X_test, y_test)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0746c383149dab3b34f59b3e7aa23a96" name="a0746c383149dab3b34f59b3e7aa23a96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0746c383149dab3b34f59b3e7aa23a96">&#9670;&#160;</a></span>test_scorer_select_proba_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_scorer_select_proba_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scorer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1113</span><span class="keyword">def </span>test_scorer_select_proba_error(scorer):</div>
<div class="line"><span class="lineno"> 1114</span>    <span class="comment"># check that we raise the proper error when passing an unknown</span></div>
<div class="line"><span class="lineno"> 1115</span>    <span class="comment"># pos_label</span></div>
<div class="line"><span class="lineno"> 1116</span>    X, y = make_classification(</div>
<div class="line"><span class="lineno"> 1117</span>        n_classes=2, n_informative=3, n_samples=20, random_state=0</div>
<div class="line"><span class="lineno"> 1118</span>    )</div>
<div class="line"><span class="lineno"> 1119</span>    lr = LogisticRegression().fit(X, y)</div>
<div class="line"><span class="lineno"> 1120</span>    <span class="keyword">assert</span> scorer._kwargs[<span class="stringliteral">&quot;pos_label&quot;</span>] <span class="keywordflow">not</span> <span class="keywordflow">in</span> np.unique(y).tolist()</div>
<div class="line"><span class="lineno"> 1121</span> </div>
<div class="line"><span class="lineno"> 1122</span>    err_msg = <span class="stringliteral">&quot;is not a valid label&quot;</span></div>
<div class="line"><span class="lineno"> 1123</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1124</span>        scorer(lr, X, y)</div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a28d62527b7627df6a6cf05ddd51ae0" name="a1a28d62527b7627df6a6cf05ddd51ae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a28d62527b7627df6a6cf05ddd51ae0">&#9670;&#160;</a></span>test_SCORERS_deprecated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_SCORERS_deprecated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1133</span><span class="keyword">def </span>test_SCORERS_deprecated():</div>
<div class="line"><span class="lineno"> 1134</span>    <span class="keyword">with</span> pytest.warns(FutureWarning, match=<span class="stringliteral">&quot;is deprecated and will be removed in v1.3&quot;</span>):</div>
<div class="line"><span class="lineno"> 1135</span>        SCORERS[<span class="stringliteral">&quot;roc_auc&quot;</span>]</div>
<div class="line"><span class="lineno"> 1136</span> </div>
<div class="line"><span class="lineno"> 1137</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a663606108a9b218ad3327ac2ac12c359" name="a663606108a9b218ad3327ac2ac12c359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a663606108a9b218ad3327ac2ac12c359">&#9670;&#160;</a></span>test_scoring_is_not_metric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_scoring_is_not_metric </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  730</span><span class="keyword">def </span>test_scoring_is_not_metric():</div>
<div class="line"><span class="lineno">  731</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;make_scorer&quot;</span>):</div>
<div class="line"><span class="lineno">  732</span>        check_scoring(LogisticRegression(), scoring=f1_score)</div>
<div class="line"><span class="lineno">  733</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;make_scorer&quot;</span>):</div>
<div class="line"><span class="lineno">  734</span>        check_scoring(LogisticRegression(), scoring=roc_auc_score)</div>
<div class="line"><span class="lineno">  735</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;make_scorer&quot;</span>):</div>
<div class="line"><span class="lineno">  736</span>        check_scoring(Ridge(), scoring=r2_score)</div>
<div class="line"><span class="lineno">  737</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;make_scorer&quot;</span>):</div>
<div class="line"><span class="lineno">  738</span>        check_scoring(KMeans(), scoring=cluster_module.adjusted_rand_score)</div>
<div class="line"><span class="lineno">  739</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;make_scorer&quot;</span>):</div>
<div class="line"><span class="lineno">  740</span>        check_scoring(KMeans(), scoring=cluster_module.rand_score)</div>
<div class="line"><span class="lineno">  741</span> </div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  744</span>    <span class="stringliteral">&quot;scorers,expected_predict_count,&quot;</span></div>
<div class="line"><span class="lineno">  745</span>    <span class="stringliteral">&quot;expected_predict_proba_count,expected_decision_func_count&quot;</span>,</div>
<div class="line"><span class="lineno">  746</span>    [</div>
<div class="line"><span class="lineno">  747</span>        (</div>
<div class="line"><span class="lineno">  748</span>            {</div>
<div class="line"><span class="lineno">  749</span>                <span class="stringliteral">&quot;a1&quot;</span>: <span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno">  750</span>                <span class="stringliteral">&quot;a2&quot;</span>: <span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno">  751</span>                <span class="stringliteral">&quot;ll1&quot;</span>: <span class="stringliteral">&quot;neg_log_loss&quot;</span>,</div>
<div class="line"><span class="lineno">  752</span>                <span class="stringliteral">&quot;ll2&quot;</span>: <span class="stringliteral">&quot;neg_log_loss&quot;</span>,</div>
<div class="line"><span class="lineno">  753</span>                <span class="stringliteral">&quot;ra1&quot;</span>: <span class="stringliteral">&quot;roc_auc&quot;</span>,</div>
<div class="line"><span class="lineno">  754</span>                <span class="stringliteral">&quot;ra2&quot;</span>: <span class="stringliteral">&quot;roc_auc&quot;</span>,</div>
<div class="line"><span class="lineno">  755</span>            },</div>
<div class="line"><span class="lineno">  756</span>            1,</div>
<div class="line"><span class="lineno">  757</span>            1,</div>
<div class="line"><span class="lineno">  758</span>            1,</div>
<div class="line"><span class="lineno">  759</span>        ),</div>
<div class="line"><span class="lineno">  760</span>        ([<span class="stringliteral">&quot;roc_auc&quot;</span>, <span class="stringliteral">&quot;accuracy&quot;</span>], 1, 0, 1),</div>
<div class="line"><span class="lineno">  761</span>        ([<span class="stringliteral">&quot;neg_log_loss&quot;</span>, <span class="stringliteral">&quot;accuracy&quot;</span>], 1, 1, 0),</div>
<div class="line"><span class="lineno">  762</span>    ],</div>
<div class="line"><span class="lineno">  763</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f484f4944b5dd2ff00c19a0cb300086" name="a7f484f4944b5dd2ff00c19a0cb300086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f484f4944b5dd2ff00c19a0cb300086">&#9670;&#160;</a></span>test_supervised_cluster_scorers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_supervised_cluster_scorers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  576</span><span class="keyword">def </span>test_supervised_cluster_scorers():</div>
<div class="line"><span class="lineno">  577</span>    <span class="comment"># Test clustering scorers against gold standard labeling.</span></div>
<div class="line"><span class="lineno">  578</span>    X, y = make_blobs(random_state=0, centers=2)</div>
<div class="line"><span class="lineno">  579</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  580</span>    km = KMeans(n_clusters=3, n_init=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  581</span>    km.fit(X_train)</div>
<div class="line"><span class="lineno">  582</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> CLUSTER_SCORERS:</div>
<div class="line"><span class="lineno">  583</span>        score1 = get_scorer(name)(km, X_test, y_test)</div>
<div class="line"><span class="lineno">  584</span>        score2 = getattr(cluster_module, name)(y_test, km.predict(X_test))</div>
<div class="line"><span class="lineno">  585</span>        assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  586</span> </div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a526026d2c8930507223e9c6da8f5e35b" name="a526026d2c8930507223e9c6da8f5e35b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526026d2c8930507223e9c6da8f5e35b">&#9670;&#160;</a></span>test_thresholded_scorers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_thresholded_scorers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  483</span><span class="keyword">def </span>test_thresholded_scorers():</div>
<div class="line"><span class="lineno">  484</span>    <span class="comment"># Test scorers that take thresholds.</span></div>
<div class="line"><span class="lineno">  485</span>    X, y = make_blobs(random_state=0, centers=2)</div>
<div class="line"><span class="lineno">  486</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  487</span>    clf = LogisticRegression(random_state=0)</div>
<div class="line"><span class="lineno">  488</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  489</span>    score1 = get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  490</span>    score2 = roc_auc_score(y_test, clf.decision_function(X_test))</div>
<div class="line"><span class="lineno">  491</span>    score3 = roc_auc_score(y_test, clf.predict_proba(X_test)[:, 1])</div>
<div class="line"><span class="lineno">  492</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  493</span>    assert_almost_equal(score1, score3)</div>
<div class="line"><span class="lineno">  494</span> </div>
<div class="line"><span class="lineno">  495</span>    logscore = get_scorer(<span class="stringliteral">&quot;neg_log_loss&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  496</span>    logloss = log_loss(y_test, clf.predict_proba(X_test))</div>
<div class="line"><span class="lineno">  497</span>    assert_almost_equal(-logscore, logloss)</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    <span class="comment"># same for an estimator without decision_function</span></div>
<div class="line"><span class="lineno">  500</span>    clf = DecisionTreeClassifier()</div>
<div class="line"><span class="lineno">  501</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  502</span>    score1 = get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  503</span>    score2 = roc_auc_score(y_test, clf.predict_proba(X_test)[:, 1])</div>
<div class="line"><span class="lineno">  504</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>    <span class="comment"># test with a regressor (no decision_function)</span></div>
<div class="line"><span class="lineno">  507</span>    reg = DecisionTreeRegressor()</div>
<div class="line"><span class="lineno">  508</span>    reg.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  509</span>    score1 = get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(reg, X_test, y_test)</div>
<div class="line"><span class="lineno">  510</span>    score2 = roc_auc_score(y_test, reg.predict(X_test))</div>
<div class="line"><span class="lineno">  511</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    <span class="comment"># Test that an exception is raised on more than two classes</span></div>
<div class="line"><span class="lineno">  514</span>    X, y = make_blobs(random_state=0, centers=3)</div>
<div class="line"><span class="lineno">  515</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  516</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  517</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;multiclass format is not supported&quot;</span>):</div>
<div class="line"><span class="lineno">  518</span>        get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>    <span class="comment"># test error is raised with a single class present in model</span></div>
<div class="line"><span class="lineno">  521</span>    <span class="comment"># (predict_proba shape is not suitable for binary auc)</span></div>
<div class="line"><span class="lineno">  522</span>    X, y = make_blobs(random_state=0, centers=2)</div>
<div class="line"><span class="lineno">  523</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  524</span>    clf = DecisionTreeClassifier()</div>
<div class="line"><span class="lineno">  525</span>    clf.fit(X_train, np.zeros_like(y_train))</div>
<div class="line"><span class="lineno">  526</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;need classifier with two classes&quot;</span>):</div>
<div class="line"><span class="lineno">  527</span>        get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  528</span> </div>
<div class="line"><span class="lineno">  529</span>    <span class="comment"># for proba scorers</span></div>
<div class="line"><span class="lineno">  530</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;need classifier with two classes&quot;</span>):</div>
<div class="line"><span class="lineno">  531</span>        get_scorer(<span class="stringliteral">&quot;neg_log_loss&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a9bb4f6e36c117b9c59d0ea8040dba0" name="a0a9bb4f6e36c117b9c59d0ea8040dba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a9bb4f6e36c117b9c59d0ea8040dba0">&#9670;&#160;</a></span>test_thresholded_scorers_multilabel_indicator_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.test_thresholded_scorers_multilabel_indicator_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  534</span><span class="keyword">def </span>test_thresholded_scorers_multilabel_indicator_data():</div>
<div class="line"><span class="lineno">  535</span>    <span class="comment"># Test that the scorer work with multilabel-indicator format</span></div>
<div class="line"><span class="lineno">  536</span>    <span class="comment"># for multilabel and multi-output multi-class classifier</span></div>
<div class="line"><span class="lineno">  537</span>    X, y = make_multilabel_classification(allow_unlabeled=<span class="keyword">False</span>, random_state=0)</div>
<div class="line"><span class="lineno">  538</span>    X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=0)</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>    <span class="comment"># Multi-output multi-class predict_proba</span></div>
<div class="line"><span class="lineno">  541</span>    clf = DecisionTreeClassifier()</div>
<div class="line"><span class="lineno">  542</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  543</span>    y_proba = clf.predict_proba(X_test)</div>
<div class="line"><span class="lineno">  544</span>    score1 = get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  545</span>    score2 = roc_auc_score(y_test, np.vstack([p[:, -1] <span class="keywordflow">for</span> p <span class="keywordflow">in</span> y_proba]).T)</div>
<div class="line"><span class="lineno">  546</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>    <span class="comment"># Multi-output multi-class decision_function</span></div>
<div class="line"><span class="lineno">  549</span>    <span class="comment"># TODO Is there any yet?</span></div>
<div class="line"><span class="lineno">  550</span>    clf = DecisionTreeClassifier()</div>
<div class="line"><span class="lineno">  551</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  552</span>    clf._predict_proba = clf.predict_proba</div>
<div class="line"><span class="lineno">  553</span>    clf.predict_proba = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  554</span>    clf.decision_function = <span class="keyword">lambda</span> X: [p[:, 1] <span class="keywordflow">for</span> p <span class="keywordflow">in</span> clf._predict_proba(X)]</div>
<div class="line"><span class="lineno">  555</span> </div>
<div class="line"><span class="lineno">  556</span>    y_proba = clf.decision_function(X_test)</div>
<div class="line"><span class="lineno">  557</span>    score1 = get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  558</span>    score2 = roc_auc_score(y_test, np.vstack([p <span class="keywordflow">for</span> p <span class="keywordflow">in</span> y_proba]).T)</div>
<div class="line"><span class="lineno">  559</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>    <span class="comment"># Multilabel predict_proba</span></div>
<div class="line"><span class="lineno">  562</span>    clf = OneVsRestClassifier(DecisionTreeClassifier())</div>
<div class="line"><span class="lineno">  563</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  564</span>    score1 = get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  565</span>    score2 = roc_auc_score(y_test, clf.predict_proba(X_test))</div>
<div class="line"><span class="lineno">  566</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span>    <span class="comment"># Multilabel decision function</span></div>
<div class="line"><span class="lineno">  569</span>    clf = OneVsRestClassifier(LinearSVC(random_state=0))</div>
<div class="line"><span class="lineno">  570</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  571</span>    score1 = get_scorer(<span class="stringliteral">&quot;roc_auc&quot;</span>)(clf, X_test, y_test)</div>
<div class="line"><span class="lineno">  572</span>    score2 = roc_auc_score(y_test, clf.decision_function(X_test))</div>
<div class="line"><span class="lineno">  573</span>    assert_almost_equal(score1, score2)</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a47cd49629f3ad3281151a67142701a0e" name="a47cd49629f3ad3281151a67142701a0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47cd49629f3ad3281151a67142701a0e">&#9670;&#160;</a></span>CLF_SCORERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list sklearn.metrics.tests.test_score_objects.CLF_SCORERS</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a206bdfec791c69b5ebff6e27457536f3" name="a206bdfec791c69b5ebff6e27457536f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a206bdfec791c69b5ebff6e27457536f3">&#9670;&#160;</a></span>CLUSTER_SCORERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list sklearn.metrics.tests.test_score_objects.CLUSTER_SCORERS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  [</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;adjusted_rand_score&quot;</span>,</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&quot;rand_score&quot;</span>,</div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&quot;homogeneity_score&quot;</span>,</div>
<div class="line"><span class="lineno">    5</span>    <span class="stringliteral">&quot;completeness_score&quot;</span>,</div>
<div class="line"><span class="lineno">    6</span>    <span class="stringliteral">&quot;v_measure_score&quot;</span>,</div>
<div class="line"><span class="lineno">    7</span>    <span class="stringliteral">&quot;mutual_info_score&quot;</span>,</div>
<div class="line"><span class="lineno">    8</span>    <span class="stringliteral">&quot;adjusted_mutual_info_score&quot;</span>,</div>
<div class="line"><span class="lineno">    9</span>    <span class="stringliteral">&quot;normalized_mutual_info_score&quot;</span>,</div>
<div class="line"><span class="lineno">   10</span>    <span class="stringliteral">&quot;fowlkes_mallows_score&quot;</span>,</div>
<div class="line"><span class="lineno">   11</span>]</div>
</div><!-- fragment -->
</div>
</div>
<a id="af5a8c1ac02504e5edd9ccd274053bb7d" name="af5a8c1ac02504e5edd9ccd274053bb7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a8c1ac02504e5edd9ccd274053bb7d">&#9670;&#160;</a></span>ESTIMATORS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.ESTIMATORS = None</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad91d3170487b1dc78145a33d3f01a587" name="ad91d3170487b1dc78145a33d3f01a587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91d3170487b1dc78145a33d3f01a587">&#9670;&#160;</a></span>MULTILABEL_ONLY_SCORERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list sklearn.metrics.tests.test_score_objects.MULTILABEL_ONLY_SCORERS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  [</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;precision_samples&quot;</span>,</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&quot;recall_samples&quot;</span>,</div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&quot;f1_samples&quot;</span>,</div>
<div class="line"><span class="lineno">    5</span>    <span class="stringliteral">&quot;jaccard_samples&quot;</span>,</div>
<div class="line"><span class="lineno">    6</span>]</div>
</div><!-- fragment -->
</div>
</div>
<a id="a36d70a03faf2b30067d7810bf16e4faf" name="a36d70a03faf2b30067d7810bf16e4faf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d70a03faf2b30067d7810bf16e4faf">&#9670;&#160;</a></span>REGRESSION_SCORERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list sklearn.metrics.tests.test_score_objects.REGRESSION_SCORERS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  [</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;explained_variance&quot;</span>,</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&quot;r2&quot;</span>,</div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&quot;neg_mean_absolute_error&quot;</span>,</div>
<div class="line"><span class="lineno">    5</span>    <span class="stringliteral">&quot;neg_mean_squared_error&quot;</span>,</div>
<div class="line"><span class="lineno">    6</span>    <span class="stringliteral">&quot;neg_mean_absolute_percentage_error&quot;</span>,</div>
<div class="line"><span class="lineno">    7</span>    <span class="stringliteral">&quot;neg_mean_squared_log_error&quot;</span>,</div>
<div class="line"><span class="lineno">    8</span>    <span class="stringliteral">&quot;neg_median_absolute_error&quot;</span>,</div>
<div class="line"><span class="lineno">    9</span>    <span class="stringliteral">&quot;neg_root_mean_squared_error&quot;</span>,</div>
<div class="line"><span class="lineno">   10</span>    <span class="stringliteral">&quot;mean_absolute_error&quot;</span>,</div>
<div class="line"><span class="lineno">   11</span>    <span class="stringliteral">&quot;mean_absolute_percentage_error&quot;</span>,</div>
<div class="line"><span class="lineno">   12</span>    <span class="stringliteral">&quot;mean_squared_error&quot;</span>,</div>
<div class="line"><span class="lineno">   13</span>    <span class="stringliteral">&quot;median_absolute_error&quot;</span>,</div>
<div class="line"><span class="lineno">   14</span>    <span class="stringliteral">&quot;max_error&quot;</span>,</div>
<div class="line"><span class="lineno">   15</span>    <span class="stringliteral">&quot;neg_mean_poisson_deviance&quot;</span>,</div>
<div class="line"><span class="lineno">   16</span>    <span class="stringliteral">&quot;neg_mean_gamma_deviance&quot;</span>,</div>
<div class="line"><span class="lineno">   17</span>]</div>
</div><!-- fragment -->
</div>
</div>
<a id="af4c2b35f868da438493e749d90d75dc6" name="af4c2b35f868da438493e749d90d75dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4c2b35f868da438493e749d90d75dc6">&#9670;&#160;</a></span>REQUIRE_POSITIVE_Y_SCORERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list sklearn.metrics.tests.test_score_objects.REQUIRE_POSITIVE_Y_SCORERS = [&quot;neg_mean_poisson_deviance&quot;, &quot;neg_mean_gamma_deviance&quot;]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a758b02f7b271a76fba5f316afc577ab0" name="a758b02f7b271a76fba5f316afc577ab0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a758b02f7b271a76fba5f316afc577ab0">&#9670;&#160;</a></span>TEMP_FOLDER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.TEMP_FOLDER = None</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2a2bea148966e902cf6f21de3f69aaf5" name="a2a2bea148966e902cf6f21de3f69aaf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a2bea148966e902cf6f21de3f69aaf5">&#9670;&#160;</a></span>X_mm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.X_mm</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aacbf8d6f2c5d8f859f4ee5d47c6c14b7" name="aacbf8d6f2c5d8f859f4ee5d47c6c14b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacbf8d6f2c5d8f859f4ee5d47c6c14b7">&#9670;&#160;</a></span>y_ml_mm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.y_ml_mm</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aabf2c336089f83848c39bd6ea793efa6" name="aabf2c336089f83848c39bd6ea793efa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf2c336089f83848c39bd6ea793efa6">&#9670;&#160;</a></span>y_mm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.metrics.tests.test_score_objects.y_mm</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
