<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.model_selection.tests.test_search Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1model__selection.html">model_selection</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html">test_search</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sklearn.model_selection.tests.test_search Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1model__selection_1_1tests_1_1test__search_1_1_broken_classifier.html">BrokenClassifier</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1model__selection_1_1tests_1_1test__search_1_1_failing_classifier.html">FailingClassifier</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1model__selection_1_1tests_1_1test__search_1_1_linear_s_v_c_no_score.html">LinearSVCNoScore</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1model__selection_1_1tests_1_1test__search_1_1_mock_classifier.html">MockClassifier</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abbad5de208acbd2f64cbdc6a10e8a0a8" id="r_abbad5de208acbd2f64cbdc6a10e8a0a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#abbad5de208acbd2f64cbdc6a10e8a0a8">assert_grid_iter_equals_getitem</a> (grid)</td></tr>
<tr class="separator:abbad5de208acbd2f64cbdc6a10e8a0a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805ad21e59ac8a6356ce7939b8f6c719" id="r_a805ad21e59ac8a6356ce7939b8f6c719"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a805ad21e59ac8a6356ce7939b8f6c719">test_validate_parameter_input</a> (klass, input, error_type, error_message)</td></tr>
<tr class="separator:a805ad21e59ac8a6356ce7939b8f6c719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec874924d6d0270c04d0f27f5a3dbb80" id="r_aec874924d6d0270c04d0f27f5a3dbb80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aec874924d6d0270c04d0f27f5a3dbb80">test_parameter_grid</a> ()</td></tr>
<tr class="separator:aec874924d6d0270c04d0f27f5a3dbb80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76656ea2605227491f35c809b2822954" id="r_a76656ea2605227491f35c809b2822954"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a76656ea2605227491f35c809b2822954">test_grid_search</a> ()</td></tr>
<tr class="separator:a76656ea2605227491f35c809b2822954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affa2b82bb6a5c030461399506c8d667d" id="r_affa2b82bb6a5c030461399506c8d667d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#affa2b82bb6a5c030461399506c8d667d">test_grid_search_pipeline_steps</a> ()</td></tr>
<tr class="separator:affa2b82bb6a5c030461399506c8d667d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7091ae5b1b16552fdefee7716009925e" id="r_a7091ae5b1b16552fdefee7716009925e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a7091ae5b1b16552fdefee7716009925e">test_SearchCV_with_fit_params</a> (SearchCV)</td></tr>
<tr class="separator:a7091ae5b1b16552fdefee7716009925e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417d949b695a171f22c2318f4abec26e" id="r_a417d949b695a171f22c2318f4abec26e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a417d949b695a171f22c2318f4abec26e">test_grid_search_no_score</a> ()</td></tr>
<tr class="separator:a417d949b695a171f22c2318f4abec26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c1822cfb1cfef00f6a6c3665bd1491" id="r_a64c1822cfb1cfef00f6a6c3665bd1491"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a64c1822cfb1cfef00f6a6c3665bd1491">test_grid_search_score_method</a> ()</td></tr>
<tr class="separator:a64c1822cfb1cfef00f6a6c3665bd1491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97e58dc53e0a1c7833bf8f58c1660e7e" id="r_a97e58dc53e0a1c7833bf8f58c1660e7e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a97e58dc53e0a1c7833bf8f58c1660e7e">test_grid_search_groups</a> ()</td></tr>
<tr class="separator:a97e58dc53e0a1c7833bf8f58c1660e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a73c2f274ac67f635b36797d5c4f31e" id="r_a1a73c2f274ac67f635b36797d5c4f31e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a1a73c2f274ac67f635b36797d5c4f31e">test_classes__property</a> ()</td></tr>
<tr class="separator:a1a73c2f274ac67f635b36797d5c4f31e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6344e91245550e7d02cc58fc6401977b" id="r_a6344e91245550e7d02cc58fc6401977b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a6344e91245550e7d02cc58fc6401977b">test_trivial_cv_results_attr</a> ()</td></tr>
<tr class="separator:a6344e91245550e7d02cc58fc6401977b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace43060eefefc4a1dba2c6a0dfdb2386" id="r_ace43060eefefc4a1dba2c6a0dfdb2386"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ace43060eefefc4a1dba2c6a0dfdb2386">test_no_refit</a> ()</td></tr>
<tr class="separator:ace43060eefefc4a1dba2c6a0dfdb2386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a786548d9c5e9ae1b240238b6f225d1b5" id="r_a786548d9c5e9ae1b240238b6f225d1b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a786548d9c5e9ae1b240238b6f225d1b5">test_grid_search_error</a> ()</td></tr>
<tr class="separator:a786548d9c5e9ae1b240238b6f225d1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a197fee29136bf8f6d11a6e03974e3dd7" id="r_a197fee29136bf8f6d11a6e03974e3dd7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a197fee29136bf8f6d11a6e03974e3dd7">test_grid_search_one_grid_point</a> ()</td></tr>
<tr class="separator:a197fee29136bf8f6d11a6e03974e3dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22892af246ca43c6f20f713f886b38b" id="r_ac22892af246ca43c6f20f713f886b38b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ac22892af246ca43c6f20f713f886b38b">test_grid_search_when_param_grid_includes_range</a> ()</td></tr>
<tr class="separator:ac22892af246ca43c6f20f713f886b38b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02da2bf6806cc2ce5bc5293ad6ceb0b8" id="r_a02da2bf6806cc2ce5bc5293ad6ceb0b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a02da2bf6806cc2ce5bc5293ad6ceb0b8">test_grid_search_bad_param_grid</a> ()</td></tr>
<tr class="separator:a02da2bf6806cc2ce5bc5293ad6ceb0b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec34611638a315fa3989aeb84d225e6" id="r_aaec34611638a315fa3989aeb84d225e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aaec34611638a315fa3989aeb84d225e6">test_grid_search_sparse</a> ()</td></tr>
<tr class="separator:aaec34611638a315fa3989aeb84d225e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb90032c8dc6870e068fbc569bf14c4" id="r_a7cb90032c8dc6870e068fbc569bf14c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a7cb90032c8dc6870e068fbc569bf14c4">test_grid_search_sparse_scoring</a> ()</td></tr>
<tr class="separator:a7cb90032c8dc6870e068fbc569bf14c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbc946ec1523ca1d78ab8d5bf9dfdf3" id="r_a6dbc946ec1523ca1d78ab8d5bf9dfdf3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a6dbc946ec1523ca1d78ab8d5bf9dfdf3">test_grid_search_precomputed_kernel</a> ()</td></tr>
<tr class="separator:a6dbc946ec1523ca1d78ab8d5bf9dfdf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24e5bb9ad77c795218214fb8fd2209d5" id="r_a24e5bb9ad77c795218214fb8fd2209d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a24e5bb9ad77c795218214fb8fd2209d5">test_grid_search_precomputed_kernel_error_nonsquare</a> ()</td></tr>
<tr class="separator:a24e5bb9ad77c795218214fb8fd2209d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06ac70ab5e0d186f288ab2f51a555dec" id="r_a06ac70ab5e0d186f288ab2f51a555dec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a06ac70ab5e0d186f288ab2f51a555dec">test_refit</a> ()</td></tr>
<tr class="separator:a06ac70ab5e0d186f288ab2f51a555dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a706d92bda9a746983387a08bdb11c0a2" id="r_a706d92bda9a746983387a08bdb11c0a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a706d92bda9a746983387a08bdb11c0a2">test_refit_callable</a> ()</td></tr>
<tr class="separator:a706d92bda9a746983387a08bdb11c0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97e88f1409c3feac0bb7eba7f3d51cf3" id="r_a97e88f1409c3feac0bb7eba7f3d51cf3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a97e88f1409c3feac0bb7eba7f3d51cf3">test_refit_callable_invalid_type</a> ()</td></tr>
<tr class="separator:a97e88f1409c3feac0bb7eba7f3d51cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a810c940f3e7f07d599e0573aa49ec37f" id="r_a810c940f3e7f07d599e0573aa49ec37f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a810c940f3e7f07d599e0573aa49ec37f">test_refit_callable_out_bound</a> (out_bound_value, search_cv)</td></tr>
<tr class="separator:a810c940f3e7f07d599e0573aa49ec37f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf0bb38c41d8d867acb457aeecc669d0" id="r_adf0bb38c41d8d867acb457aeecc669d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#adf0bb38c41d8d867acb457aeecc669d0">test_refit_callable_multi_metric</a> ()</td></tr>
<tr class="separator:adf0bb38c41d8d867acb457aeecc669d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af26112317c24a5efdedb179431a392de" id="r_af26112317c24a5efdedb179431a392de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#af26112317c24a5efdedb179431a392de">test_gridsearch_nd</a> ()</td></tr>
<tr class="separator:af26112317c24a5efdedb179431a392de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec7b1d88a5faca787bea96eda28c4fa" id="r_a4ec7b1d88a5faca787bea96eda28c4fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a4ec7b1d88a5faca787bea96eda28c4fa">test_X_as_list</a> ()</td></tr>
<tr class="separator:a4ec7b1d88a5faca787bea96eda28c4fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adee86e7d50edf0923c98e5deca8593c6" id="r_adee86e7d50edf0923c98e5deca8593c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#adee86e7d50edf0923c98e5deca8593c6">test_y_as_list</a> ()</td></tr>
<tr class="separator:adee86e7d50edf0923c98e5deca8593c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b211b69721614c4fab7eeca5b48daf7" id="r_a4b211b69721614c4fab7eeca5b48daf7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a4b211b69721614c4fab7eeca5b48daf7">test_pandas_input</a> ()</td></tr>
<tr class="separator:a4b211b69721614c4fab7eeca5b48daf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabb5fee4bd75e109d2bcf097d0962689" id="r_aabb5fee4bd75e109d2bcf097d0962689"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aabb5fee4bd75e109d2bcf097d0962689">test_unsupervised_grid_search</a> ()</td></tr>
<tr class="separator:aabb5fee4bd75e109d2bcf097d0962689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12ebcfd60018b5238b55c8aaaee04db8" id="r_a12ebcfd60018b5238b55c8aaaee04db8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a12ebcfd60018b5238b55c8aaaee04db8">test_gridsearch_no_predict</a> ()</td></tr>
<tr class="separator:a12ebcfd60018b5238b55c8aaaee04db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e70ff1723a0235c187da99508d6a1c" id="r_a23e70ff1723a0235c187da99508d6a1c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a23e70ff1723a0235c187da99508d6a1c">test_param_sampler</a> ()</td></tr>
<tr class="separator:a23e70ff1723a0235c187da99508d6a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8b52be6ace25ee3d8917f8d567cadb" id="r_a2f8b52be6ace25ee3d8917f8d567cadb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a2f8b52be6ace25ee3d8917f8d567cadb">check_cv_results_array_types</a> (search, param_keys, score_keys)</td></tr>
<tr class="separator:a2f8b52be6ace25ee3d8917f8d567cadb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f118317e41cdb9490318fba04da2598" id="r_a1f118317e41cdb9490318fba04da2598"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a1f118317e41cdb9490318fba04da2598">check_cv_results_keys</a> (cv_results, param_keys, score_keys, n_cand)</td></tr>
<tr class="separator:a1f118317e41cdb9490318fba04da2598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b04ef784f5e6ddbf8b3a9081a9b6a2e" id="r_a3b04ef784f5e6ddbf8b3a9081a9b6a2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a3b04ef784f5e6ddbf8b3a9081a9b6a2e">test_grid_search_cv_results</a> ()</td></tr>
<tr class="separator:a3b04ef784f5e6ddbf8b3a9081a9b6a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dc043b452cdc097dd907cdd86c83b18" id="r_a1dc043b452cdc097dd907cdd86c83b18"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a1dc043b452cdc097dd907cdd86c83b18">test_random_search_cv_results</a> ()</td></tr>
<tr class="separator:a1dc043b452cdc097dd907cdd86c83b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa701ac1e384d46ba8f88164edb5292cf" id="r_aa701ac1e384d46ba8f88164edb5292cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aa701ac1e384d46ba8f88164edb5292cf">test_search_default_iid</a> (SearchCV, specialized_params)</td></tr>
<tr class="separator:aa701ac1e384d46ba8f88164edb5292cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4793f758150a5dbe40e4f8892d970b0" id="r_ac4793f758150a5dbe40e4f8892d970b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ac4793f758150a5dbe40e4f8892d970b0">test_grid_search_cv_results_multimetric</a> ()</td></tr>
<tr class="separator:ac4793f758150a5dbe40e4f8892d970b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89253672adb11ae7b7ccfe437ccbe843" id="r_a89253672adb11ae7b7ccfe437ccbe843"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a89253672adb11ae7b7ccfe437ccbe843">test_random_search_cv_results_multimetric</a> ()</td></tr>
<tr class="separator:a89253672adb11ae7b7ccfe437ccbe843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac942b883fb431211deaccd158e94f16c" id="r_ac942b883fb431211deaccd158e94f16c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ac942b883fb431211deaccd158e94f16c">compare_cv_results_multimetric_with_single</a> (search_multi, search_acc, search_rec)</td></tr>
<tr class="separator:ac942b883fb431211deaccd158e94f16c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab02a936ad264d95468094c63386d0dbe" id="r_ab02a936ad264d95468094c63386d0dbe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ab02a936ad264d95468094c63386d0dbe">compare_refit_methods_when_refit_with_acc</a> (search_multi, search_acc, refit)</td></tr>
<tr class="separator:ab02a936ad264d95468094c63386d0dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a191d85fd4a7117418964487565fadb51" id="r_a191d85fd4a7117418964487565fadb51"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a191d85fd4a7117418964487565fadb51">test_search_cv_score_samples_error</a> (search_cv)</td></tr>
<tr class="separator:a191d85fd4a7117418964487565fadb51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9688b7bd83fd10da8b5ff08bb4cce3e2" id="r_a9688b7bd83fd10da8b5ff08bb4cce3e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a9688b7bd83fd10da8b5ff08bb4cce3e2">test_search_cv_score_samples_method</a> (search_cv)</td></tr>
<tr class="separator:a9688b7bd83fd10da8b5ff08bb4cce3e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a640c0955f560cb708cbddca5ef9bf9" id="r_a2a640c0955f560cb708cbddca5ef9bf9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a2a640c0955f560cb708cbddca5ef9bf9">test_search_cv_results_rank_tie_breaking</a> ()</td></tr>
<tr class="separator:a2a640c0955f560cb708cbddca5ef9bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d1a2a6632a094f3d1ee68da74aebb65" id="r_a4d1a2a6632a094f3d1ee68da74aebb65"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a4d1a2a6632a094f3d1ee68da74aebb65">test_search_cv_results_none_param</a> ()</td></tr>
<tr class="separator:a4d1a2a6632a094f3d1ee68da74aebb65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf64b932a625d15489cfd33f8ec69e96" id="r_aaf64b932a625d15489cfd33f8ec69e96"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aaf64b932a625d15489cfd33f8ec69e96">test_search_cv_timing</a> ()</td></tr>
<tr class="separator:aaf64b932a625d15489cfd33f8ec69e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7df6ca9f0ec2d105e91f42958c4552" id="r_afe7df6ca9f0ec2d105e91f42958c4552"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#afe7df6ca9f0ec2d105e91f42958c4552">test_grid_search_correct_score_results</a> ()</td></tr>
<tr class="separator:afe7df6ca9f0ec2d105e91f42958c4552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa85d13ba2c96522423b0b996bf5af57d" id="r_aa85d13ba2c96522423b0b996bf5af57d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aa85d13ba2c96522423b0b996bf5af57d">test_pickle</a> ()</td></tr>
<tr class="separator:aa85d13ba2c96522423b0b996bf5af57d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f250058a14e40b593d1231e9c3f6560" id="r_a2f250058a14e40b593d1231e9c3f6560"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a2f250058a14e40b593d1231e9c3f6560">test_grid_search_with_multioutput_data</a> ()</td></tr>
<tr class="separator:a2f250058a14e40b593d1231e9c3f6560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a929c25bd64a2e318b9df24e3a326dcdb" id="r_a929c25bd64a2e318b9df24e3a326dcdb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a929c25bd64a2e318b9df24e3a326dcdb">test_predict_proba_disabled</a> ()</td></tr>
<tr class="separator:a929c25bd64a2e318b9df24e3a326dcdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7b45d03db160d708646b3a2798134b" id="r_a9f7b45d03db160d708646b3a2798134b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a9f7b45d03db160d708646b3a2798134b">test_grid_search_allows_nans</a> ()</td></tr>
<tr class="separator:a9f7b45d03db160d708646b3a2798134b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf2f277ce090ea3c6aa562532940eeb3" id="r_aaf2f277ce090ea3c6aa562532940eeb3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aaf2f277ce090ea3c6aa562532940eeb3">test_grid_search_failing_classifier</a> ()</td></tr>
<tr class="separator:aaf2f277ce090ea3c6aa562532940eeb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac30a3ea96141f761936fef58cb4c10e" id="r_aac30a3ea96141f761936fef58cb4c10e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#aac30a3ea96141f761936fef58cb4c10e">test_grid_search_classifier_all_fits_fail</a> ()</td></tr>
<tr class="separator:aac30a3ea96141f761936fef58cb4c10e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102f51ecb468884add8fe82656b525f1" id="r_a102f51ecb468884add8fe82656b525f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a102f51ecb468884add8fe82656b525f1">test_grid_search_failing_classifier_raise</a> ()</td></tr>
<tr class="separator:a102f51ecb468884add8fe82656b525f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10be7fd1b90a6f1156e89d0669c62be7" id="r_a10be7fd1b90a6f1156e89d0669c62be7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a10be7fd1b90a6f1156e89d0669c62be7">test_parameters_sampler_replacement</a> ()</td></tr>
<tr class="separator:a10be7fd1b90a6f1156e89d0669c62be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c6a9eef3c87bc25265e6756f007c4b" id="r_af5c6a9eef3c87bc25265e6756f007c4b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#af5c6a9eef3c87bc25265e6756f007c4b">test_stochastic_gradient_loss_param</a> ()</td></tr>
<tr class="separator:af5c6a9eef3c87bc25265e6756f007c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f02a0629bfc4dbebcc640d6624286a5" id="r_a0f02a0629bfc4dbebcc640d6624286a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a0f02a0629bfc4dbebcc640d6624286a5">test_search_train_scores_set_to_false</a> ()</td></tr>
<tr class="separator:a0f02a0629bfc4dbebcc640d6624286a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92af600bc16cb575a70635040f28b775" id="r_a92af600bc16cb575a70635040f28b775"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a92af600bc16cb575a70635040f28b775">test_grid_search_cv_splits_consistency</a> ()</td></tr>
<tr class="separator:a92af600bc16cb575a70635040f28b775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a875437f614b256484ac8863973000ec8" id="r_a875437f614b256484ac8863973000ec8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a875437f614b256484ac8863973000ec8">test_transform_inverse_transform_round_trip</a> ()</td></tr>
<tr class="separator:a875437f614b256484ac8863973000ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f2b8ddbfa4af9a350f59ee0a9024438" id="r_a3f2b8ddbfa4af9a350f59ee0a9024438"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a3f2b8ddbfa4af9a350f59ee0a9024438">test_custom_run_search</a> ()</td></tr>
<tr class="separator:a3f2b8ddbfa4af9a350f59ee0a9024438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1750682f1b3b8b2f620b8ce57c43c6e" id="r_ae1750682f1b3b8b2f620b8ce57c43c6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ae1750682f1b3b8b2f620b8ce57c43c6e">test__custom_fit_no_run_search</a> ()</td></tr>
<tr class="separator:ae1750682f1b3b8b2f620b8ce57c43c6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9dc650b9fecd6d519ffeec76cdd3c31" id="r_ae9dc650b9fecd6d519ffeec76cdd3c31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ae9dc650b9fecd6d519ffeec76cdd3c31">test_empty_cv_iterator_error</a> ()</td></tr>
<tr class="separator:ae9dc650b9fecd6d519ffeec76cdd3c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7b908919a09cebe68d054a5af61d1f" id="r_a9e7b908919a09cebe68d054a5af61d1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a9e7b908919a09cebe68d054a5af61d1f">test_random_search_bad_cv</a> ()</td></tr>
<tr class="separator:a9e7b908919a09cebe68d054a5af61d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2a8911b5a52ad8e08cebbc598e73dcf" id="r_ab2a8911b5a52ad8e08cebbc598e73dcf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ab2a8911b5a52ad8e08cebbc598e73dcf">test_searchcv_raise_warning_with_non_finite_score</a> (SearchCV, specialized_params, return_train_score)</td></tr>
<tr class="separator:ab2a8911b5a52ad8e08cebbc598e73dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac591c9be208ceb5c213b718d9cb17675" id="r_ac591c9be208ceb5c213b718d9cb17675"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#ac591c9be208ceb5c213b718d9cb17675">test_callable_multimetric_confusion_matrix</a> ()</td></tr>
<tr class="separator:ac591c9be208ceb5c213b718d9cb17675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b73fcc40ac03adc1cb84f1042ba5cb2" id="r_a2b73fcc40ac03adc1cb84f1042ba5cb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a2b73fcc40ac03adc1cb84f1042ba5cb2">test_callable_multimetric_same_as_list_of_strings</a> ()</td></tr>
<tr class="separator:a2b73fcc40ac03adc1cb84f1042ba5cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d5411b0b80e216b5d80e12e74e7da8" id="r_a69d5411b0b80e216b5d80e12e74e7da8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a69d5411b0b80e216b5d80e12e74e7da8">test_callable_single_metric_same_as_single_string</a> ()</td></tr>
<tr class="separator:a69d5411b0b80e216b5d80e12e74e7da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8694d5ea60e9ca0956f5243d0081914" id="r_af8694d5ea60e9ca0956f5243d0081914"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#af8694d5ea60e9ca0956f5243d0081914">test_callable_multimetric_error_on_invalid_key</a> ()</td></tr>
<tr class="separator:af8694d5ea60e9ca0956f5243d0081914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7776c3a5b2dcb41176d79bbd55e84f05" id="r_a7776c3a5b2dcb41176d79bbd55e84f05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a7776c3a5b2dcb41176d79bbd55e84f05">test_callable_multimetric_error_failing_clf</a> ()</td></tr>
<tr class="separator:a7776c3a5b2dcb41176d79bbd55e84f05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927b351abf295ec6c076b7ea3b128759" id="r_a927b351abf295ec6c076b7ea3b128759"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a927b351abf295ec6c076b7ea3b128759">test_callable_multimetric_clf_all_fits_fail</a> ()</td></tr>
<tr class="separator:a927b351abf295ec6c076b7ea3b128759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8a3074c102f42b448343e08686182c" id="r_a4d8a3074c102f42b448343e08686182c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a4d8a3074c102f42b448343e08686182c">test_n_features_in</a> ()</td></tr>
<tr class="separator:a4d8a3074c102f42b448343e08686182c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1890500ee712b71316b658234abc520d" id="r_a1890500ee712b71316b658234abc520d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a1890500ee712b71316b658234abc520d">test_search_cv_pairwise_property_delegated_to_base_estimator</a> (<a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a205d1806eb5796108989906d945332a0">pairwise</a>)</td></tr>
<tr class="separator:a1890500ee712b71316b658234abc520d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d04b0c84dab252df6f2b05a35edc7c1" id="r_a6d04b0c84dab252df6f2b05a35edc7c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a6d04b0c84dab252df6f2b05a35edc7c1">test_search_cv__pairwise_property_delegated_to_base_estimator</a> ()</td></tr>
<tr class="separator:a6d04b0c84dab252df6f2b05a35edc7c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30153c8ad00e1464da407d38015de3e2" id="r_a30153c8ad00e1464da407d38015de3e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a30153c8ad00e1464da407d38015de3e2">test_search_cv_pairwise_property_equivalence_of_precomputed</a> ()</td></tr>
<tr class="separator:a30153c8ad00e1464da407d38015de3e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd2bacc2fa31b3a3993ae6d43e5682a8" id="r_afd2bacc2fa31b3a3993ae6d43e5682a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#afd2bacc2fa31b3a3993ae6d43e5682a8">test_scalar_fit_param</a> (SearchCV, param_search)</td></tr>
<tr class="separator:afd2bacc2fa31b3a3993ae6d43e5682a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a810f493fd97bfe731973fd00fc93c2f7" id="r_a810f493fd97bfe731973fd00fc93c2f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a810f493fd97bfe731973fd00fc93c2f7">test_scalar_fit_param_compat</a> (SearchCV, param_search)</td></tr>
<tr class="separator:a810f493fd97bfe731973fd00fc93c2f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab223ad2555435b887e67506f778b7c" id="r_a3ab223ad2555435b887e67506f778b7c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a3ab223ad2555435b887e67506f778b7c">test_search_cv_using_minimal_compatible_estimator</a> (SearchCV, Predictor)</td></tr>
<tr class="separator:a3ab223ad2555435b887e67506f778b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4231e60d007e07eaea9ca41fd1ffdc13" id="r_a4231e60d007e07eaea9ca41fd1ffdc13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a4231e60d007e07eaea9ca41fd1ffdc13">test_search_cv_verbose_3</a> (capsys, return_train_score)</td></tr>
<tr class="separator:a4231e60d007e07eaea9ca41fd1ffdc13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a14b0289dc8172ff45dbe5a25eacf3232" id="r_a14b0289dc8172ff45dbe5a25eacf3232"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a14b0289dc8172ff45dbe5a25eacf3232">X</a> = np.array([[-1, -1], [-2, -1], [1, 1], [2, 1]])</td></tr>
<tr class="separator:a14b0289dc8172ff45dbe5a25eacf3232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c7e28ade4a24abe1b7b7ea51bbdd4f7" id="r_a5c7e28ade4a24abe1b7b7ea51bbdd4f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a5c7e28ade4a24abe1b7b7ea51bbdd4f7">y</a> = np.array([1, 1, 2, 2])</td></tr>
<tr class="separator:a5c7e28ade4a24abe1b7b7ea51bbdd4f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ea3e5687791a0bdf2250d7b3e9d774" id="r_a23ea3e5687791a0bdf2250d7b3e9d774"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a23ea3e5687791a0bdf2250d7b3e9d774">n_counts</a></td></tr>
<tr class="separator:a23ea3e5687791a0bdf2250d7b3e9d774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205d1806eb5796108989906d945332a0" id="r_a205d1806eb5796108989906d945332a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a205d1806eb5796108989906d945332a0">pairwise</a></td></tr>
<tr class="separator:a205d1806eb5796108989906d945332a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25670012db7a02119760c0f3b273ab51" id="r_a25670012db7a02119760c0f3b273ab51"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a25670012db7a02119760c0f3b273ab51">a</a></td></tr>
<tr class="separator:a25670012db7a02119760c0f3b273ab51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320495a2a974ada59d33c24f38f53150" id="r_a320495a2a974ada59d33c24f38f53150"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1model__selection_1_1tests_1_1test__search.html#a320495a2a974ada59d33c24f38f53150">r_</a></td></tr>
<tr class="separator:a320495a2a974ada59d33c24f38f53150"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Test the search module</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="abbad5de208acbd2f64cbdc6a10e8a0a8" name="abbad5de208acbd2f64cbdc6a10e8a0a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbad5de208acbd2f64cbdc6a10e8a0a8">&#9670;&#160;</a></span>assert_grid_iter_equals_getitem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.assert_grid_iter_equals_getitem </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>grid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  128</span><span class="keyword">def </span>assert_grid_iter_equals_getitem(grid):</div>
<div class="line"><span class="lineno">  129</span>    <span class="keyword">assert</span> list(grid) == [grid[i] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(grid))]</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span><span class="preprocessor">@pytest.mark.parametrize(&quot;klass&quot;, [ParameterGrid, partial(ParameterSampler, n_iter=10)</span>])</div>
<div class="line"><span class="lineno">  133</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  134</span>    <span class="stringliteral">&quot;input, error_type, error_message&quot;</span>,</div>
<div class="line"><span class="lineno">  135</span>    [</div>
<div class="line"><span class="lineno">  136</span>        (0, TypeError, <span class="stringliteral">r&quot;Parameter .* a dict or a list, got: 0 of type int&quot;</span>),</div>
<div class="line"><span class="lineno">  137</span>        ([{<span class="stringliteral">&quot;foo&quot;</span>: [0]}, 0], TypeError, <span class="stringliteral">r&quot;Parameter .* is not a dict \&zwj;(0\&zwj;)&quot;</span>),</div>
<div class="line"><span class="lineno">  138</span>        (</div>
<div class="line"><span class="lineno">  139</span>            {<span class="stringliteral">&quot;foo&quot;</span>: 0},</div>
<div class="line"><span class="lineno">  140</span>            TypeError,</div>
<div class="line"><span class="lineno">  141</span>            <span class="stringliteral">r&quot;Parameter (grid|distribution) for parameter &#39;foo&#39; (is not|needs to be) &quot;</span></div>
<div class="line"><span class="lineno">  142</span>            <span class="stringliteral">r&quot;(a list or a numpy array|iterable or a distribution).*&quot;</span>,</div>
<div class="line"><span class="lineno">  143</span>        ),</div>
<div class="line"><span class="lineno">  144</span>    ],</div>
<div class="line"><span class="lineno">  145</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f8b52be6ace25ee3d8917f8d567cadb" name="a2f8b52be6ace25ee3d8917f8d567cadb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f8b52be6ace25ee3d8917f8d567cadb">&#9670;&#160;</a></span>check_cv_results_array_types()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.check_cv_results_array_types </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>param_keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>score_keys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  886</span><span class="keyword">def </span>check_cv_results_array_types(search, param_keys, score_keys):</div>
<div class="line"><span class="lineno">  887</span>    <span class="comment"># Check if the search `cv_results`&#39;s array are of correct types</span></div>
<div class="line"><span class="lineno">  888</span>    cv_results = search.cv_results_</div>
<div class="line"><span class="lineno">  889</span>    <span class="keyword">assert</span> all(isinstance(cv_results[param], np.ma.MaskedArray) <span class="keywordflow">for</span> param <span class="keywordflow">in</span> param_keys)</div>
<div class="line"><span class="lineno">  890</span>    <span class="keyword">assert</span> all(cv_results[key].dtype == object <span class="keywordflow">for</span> key <span class="keywordflow">in</span> param_keys)</div>
<div class="line"><span class="lineno">  891</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> any(isinstance(cv_results[key], np.ma.MaskedArray) <span class="keywordflow">for</span> key <span class="keywordflow">in</span> score_keys)</div>
<div class="line"><span class="lineno">  892</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno">  893</span>        cv_results[key].dtype == np.float64</div>
<div class="line"><span class="lineno">  894</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> score_keys</div>
<div class="line"><span class="lineno">  895</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> key.startswith(<span class="stringliteral">&quot;rank&quot;</span>)</div>
<div class="line"><span class="lineno">  896</span>    )</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>    scorer_keys = search.scorer_.keys() <span class="keywordflow">if</span> search.multimetric_ <span class="keywordflow">else</span> [<span class="stringliteral">&quot;score&quot;</span>]</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> scorer_keys:</div>
<div class="line"><span class="lineno">  901</span>        <span class="keyword">assert</span> cv_results[<span class="stringliteral">&quot;rank_test_%s&quot;</span> % key].dtype == np.int32</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f118317e41cdb9490318fba04da2598" name="a1f118317e41cdb9490318fba04da2598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f118317e41cdb9490318fba04da2598">&#9670;&#160;</a></span>check_cv_results_keys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.check_cv_results_keys </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cv_results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>param_keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>score_keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_cand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  904</span><span class="keyword">def </span>check_cv_results_keys(cv_results, param_keys, score_keys, n_cand):</div>
<div class="line"><span class="lineno">  905</span>    <span class="comment"># Test the search.cv_results_ contains all the required results</span></div>
<div class="line"><span class="lineno">  906</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">  907</span>        sorted(cv_results.keys()), sorted(param_keys + score_keys + (<span class="stringliteral">&quot;params&quot;</span>,))</div>
<div class="line"><span class="lineno">  908</span>    )</div>
<div class="line"><span class="lineno">  909</span>    <span class="keyword">assert</span> all(cv_results[key].shape == (n_cand,) <span class="keywordflow">for</span> key <span class="keywordflow">in</span> param_keys + score_keys)</div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac942b883fb431211deaccd158e94f16c" name="ac942b883fb431211deaccd158e94f16c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac942b883fb431211deaccd158e94f16c">&#9670;&#160;</a></span>compare_cv_results_multimetric_with_single()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.compare_cv_results_multimetric_with_single </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_multi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_acc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_rec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compare multi-metric cv_results with the ensemble of multiple
single metric cv_results from single metric grid/random search</pre> <div class="fragment"><div class="line"><span class="lineno"> 1189</span><span class="keyword">def </span>compare_cv_results_multimetric_with_single(search_multi, search_acc, search_rec):</div>
<div class="line"><span class="lineno"> 1190</span>    <span class="stringliteral">&quot;&quot;&quot;Compare multi-metric cv_results with the ensemble of multiple</span></div>
<div class="line"><span class="lineno"> 1191</span><span class="stringliteral">    single metric cv_results from single metric grid/random search&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1192</span> </div>
<div class="line"><span class="lineno"> 1193</span>    <span class="keyword">assert</span> search_multi.multimetric_</div>
<div class="line"><span class="lineno"> 1194</span>    assert_array_equal(sorted(search_multi.scorer_), (<span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;recall&quot;</span>))</div>
<div class="line"><span class="lineno"> 1195</span> </div>
<div class="line"><span class="lineno"> 1196</span>    cv_results_multi = search_multi.cv_results_</div>
<div class="line"><span class="lineno"> 1197</span>    cv_results_acc_rec = {</div>
<div class="line"><span class="lineno"> 1198</span>        re.sub(<span class="stringliteral">&quot;_score$&quot;</span>, <span class="stringliteral">&quot;_accuracy&quot;</span>, k): v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> search_acc.cv_results_.items()</div>
<div class="line"><span class="lineno"> 1199</span>    }</div>
<div class="line"><span class="lineno"> 1200</span>    cv_results_acc_rec.update(</div>
<div class="line"><span class="lineno"> 1201</span>        {re.sub(<span class="stringliteral">&quot;_score$&quot;</span>, <span class="stringliteral">&quot;_recall&quot;</span>, k): v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> search_rec.cv_results_.items()}</div>
<div class="line"><span class="lineno"> 1202</span>    )</div>
<div class="line"><span class="lineno"> 1203</span> </div>
<div class="line"><span class="lineno"> 1204</span>    <span class="comment"># Check if score and timing are reasonable, also checks if the keys</span></div>
<div class="line"><span class="lineno"> 1205</span>    <span class="comment"># are present</span></div>
<div class="line"><span class="lineno"> 1206</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno"> 1207</span>        (</div>
<div class="line"><span class="lineno"> 1208</span>            np.all(cv_results_multi[k] &lt;= 1)</div>
<div class="line"><span class="lineno"> 1209</span>            <span class="keywordflow">for</span> k <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno"> 1210</span>                <span class="stringliteral">&quot;mean_score_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1211</span>                <span class="stringliteral">&quot;std_score_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1212</span>                <span class="stringliteral">&quot;mean_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1213</span>                <span class="stringliteral">&quot;std_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1214</span>            )</div>
<div class="line"><span class="lineno"> 1215</span>        )</div>
<div class="line"><span class="lineno"> 1216</span>    )</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>    <span class="comment"># Compare the keys, other than time keys, among multi-metric and</span></div>
<div class="line"><span class="lineno"> 1219</span>    <span class="comment"># single metric grid search results. np.testing.assert_equal performs a</span></div>
<div class="line"><span class="lineno"> 1220</span>    <span class="comment"># deep nested comparison of the two cv_results dicts</span></div>
<div class="line"><span class="lineno"> 1221</span>    np.testing.assert_equal(</div>
<div class="line"><span class="lineno"> 1222</span>        {k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> cv_results_multi.items() <span class="keywordflow">if</span> <span class="keywordflow">not</span> k.endswith(<span class="stringliteral">&quot;_time&quot;</span>)},</div>
<div class="line"><span class="lineno"> 1223</span>        {k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> cv_results_acc_rec.items() <span class="keywordflow">if</span> <span class="keywordflow">not</span> k.endswith(<span class="stringliteral">&quot;_time&quot;</span>)},</div>
<div class="line"><span class="lineno"> 1224</span>    )</div>
<div class="line"><span class="lineno"> 1225</span> </div>
<div class="line"><span class="lineno"> 1226</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab02a936ad264d95468094c63386d0dbe" name="ab02a936ad264d95468094c63386d0dbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab02a936ad264d95468094c63386d0dbe">&#9670;&#160;</a></span>compare_refit_methods_when_refit_with_acc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.compare_refit_methods_when_refit_with_acc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_multi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_acc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>refit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compare refit multi-metric search methods with single metric methods</pre> <div class="fragment"><div class="line"><span class="lineno"> 1227</span><span class="keyword">def </span>compare_refit_methods_when_refit_with_acc(search_multi, search_acc, refit):</div>
<div class="line"><span class="lineno"> 1228</span>    <span class="stringliteral">&quot;&quot;&quot;Compare refit multi-metric search methods with single metric methods&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1229</span>    <span class="keyword">assert</span> search_acc.refit == refit</div>
<div class="line"><span class="lineno"> 1230</span>    <span class="keywordflow">if</span> refit:</div>
<div class="line"><span class="lineno"> 1231</span>        <span class="keyword">assert</span> search_multi.refit == <span class="stringliteral">&quot;accuracy&quot;</span></div>
<div class="line"><span class="lineno"> 1232</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1233</span>        <span class="keyword">assert</span> <span class="keywordflow">not</span> search_multi.refit</div>
<div class="line"><span class="lineno"> 1234</span>        <span class="keywordflow">return</span>  <span class="comment"># search cannot predict/score without refit</span></div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>    X, y = make_blobs(n_samples=100, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 1237</span>    <span class="keywordflow">for</span> method <span class="keywordflow">in</span> (<span class="stringliteral">&quot;predict&quot;</span>, <span class="stringliteral">&quot;predict_proba&quot;</span>, <span class="stringliteral">&quot;predict_log_proba&quot;</span>):</div>
<div class="line"><span class="lineno"> 1238</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1239</span>            getattr(search_multi, method)(X), getattr(search_acc, method)(X)</div>
<div class="line"><span class="lineno"> 1240</span>        )</div>
<div class="line"><span class="lineno"> 1241</span>    assert_almost_equal(search_multi.score(X, y), search_acc.score(X, y))</div>
<div class="line"><span class="lineno"> 1242</span>    <span class="keywordflow">for</span> key <span class="keywordflow">in</span> (<span class="stringliteral">&quot;best_index_&quot;</span>, <span class="stringliteral">&quot;best_score_&quot;</span>, <span class="stringliteral">&quot;best_params_&quot;</span>):</div>
<div class="line"><span class="lineno"> 1243</span>        <span class="keyword">assert</span> getattr(search_multi, key) == getattr(search_acc, key)</div>
<div class="line"><span class="lineno"> 1244</span> </div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1247</span>    <span class="stringliteral">&quot;search_cv&quot;</span>,</div>
<div class="line"><span class="lineno"> 1248</span>    [</div>
<div class="line"><span class="lineno"> 1249</span>        RandomizedSearchCV(</div>
<div class="line"><span class="lineno"> 1250</span>            estimator=DecisionTreeClassifier(),</div>
<div class="line"><span class="lineno"> 1251</span>            param_distributions={<span class="stringliteral">&quot;max_depth&quot;</span>: [5, 10]},</div>
<div class="line"><span class="lineno"> 1252</span>        ),</div>
<div class="line"><span class="lineno"> 1253</span>        GridSearchCV(</div>
<div class="line"><span class="lineno"> 1254</span>            estimator=DecisionTreeClassifier(), param_grid={<span class="stringliteral">&quot;max_depth&quot;</span>: [5, 10]}</div>
<div class="line"><span class="lineno"> 1255</span>        ),</div>
<div class="line"><span class="lineno"> 1256</span>    ],</div>
<div class="line"><span class="lineno"> 1257</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1750682f1b3b8b2f620b8ce57c43c6e" name="ae1750682f1b3b8b2f620b8ce57c43c6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1750682f1b3b8b2f620b8ce57c43c6e">&#9670;&#160;</a></span>test__custom_fit_no_run_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test__custom_fit_no_run_search </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1910</span><span class="keyword">def </span>test__custom_fit_no_run_search():</div>
<div class="line"><span class="lineno"> 1911</span>    <span class="keyword">class </span>NoRunSearchSearchCV(BaseSearchCV):</div>
<div class="line"><span class="lineno"> 1912</span>        <span class="keyword">def </span>__init__(self, estimator, **kwargs):</div>
<div class="line"><span class="lineno"> 1913</span>            super().__init__(estimator, **kwargs)</div>
<div class="line"><span class="lineno"> 1914</span> </div>
<div class="line"><span class="lineno"> 1915</span>        <span class="keyword">def </span>fit(self, X, y=None, groups=None, **fit_params):</div>
<div class="line"><span class="lineno"> 1916</span>            <span class="keywordflow">return</span> self</div>
<div class="line"><span class="lineno"> 1917</span> </div>
<div class="line"><span class="lineno"> 1918</span>    <span class="comment"># this should not raise any exceptions</span></div>
<div class="line"><span class="lineno"> 1919</span>    NoRunSearchSearchCV(SVC()).fit(X, y)</div>
<div class="line"><span class="lineno"> 1920</span> </div>
<div class="line"><span class="lineno"> 1921</span>    <span class="keyword">class </span>BadSearchCV(BaseSearchCV):</div>
<div class="line"><span class="lineno"> 1922</span>        <span class="keyword">def </span>__init__(self, estimator, **kwargs):</div>
<div class="line"><span class="lineno"> 1923</span>            super().__init__(estimator, **kwargs)</div>
<div class="line"><span class="lineno"> 1924</span> </div>
<div class="line"><span class="lineno"> 1925</span>    <span class="keyword">with</span> pytest.raises(NotImplementedError, match=<span class="stringliteral">&quot;_run_search not implemented.&quot;</span>):</div>
<div class="line"><span class="lineno"> 1926</span>        <span class="comment"># this should raise a NotImplementedError</span></div>
<div class="line"><span class="lineno"> 1927</span>        BadSearchCV(SVC()).fit(X, y)</div>
<div class="line"><span class="lineno"> 1928</span> </div>
<div class="line"><span class="lineno"> 1929</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a927b351abf295ec6c076b7ea3b128759" name="a927b351abf295ec6c076b7ea3b128759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927b351abf295ec6c076b7ea3b128759">&#9670;&#160;</a></span>test_callable_multimetric_clf_all_fits_fail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_callable_multimetric_clf_all_fits_fail </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2162</span><span class="keyword">def </span>test_callable_multimetric_clf_all_fits_fail():</div>
<div class="line"><span class="lineno"> 2163</span>    <span class="comment"># Warns and raises when all estimator fails to fit.</span></div>
<div class="line"><span class="lineno"> 2164</span>    <span class="keyword">def </span>custom_scorer(est, X, y):</div>
<div class="line"><span class="lineno"> 2165</span>        <span class="keywordflow">return</span> {<span class="stringliteral">&quot;acc&quot;</span>: 1}</div>
<div class="line"><span class="lineno"> 2166</span> </div>
<div class="line"><span class="lineno"> 2167</span>    X, y = make_classification(n_samples=20, n_features=10, random_state=0)</div>
<div class="line"><span class="lineno"> 2168</span> </div>
<div class="line"><span class="lineno"> 2169</span>    clf = FailingClassifier()</div>
<div class="line"><span class="lineno"> 2170</span> </div>
<div class="line"><span class="lineno"> 2171</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 2172</span>        clf,</div>
<div class="line"><span class="lineno"> 2173</span>        [{<span class="stringliteral">&quot;parameter&quot;</span>: [FailingClassifier.FAILING_PARAMETER] * 3}],</div>
<div class="line"><span class="lineno"> 2174</span>        scoring=custom_scorer,</div>
<div class="line"><span class="lineno"> 2175</span>        refit=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 2176</span>        error_score=0.1,</div>
<div class="line"><span class="lineno"> 2177</span>    )</div>
<div class="line"><span class="lineno"> 2178</span> </div>
<div class="line"><span class="lineno"> 2179</span>    individual_fit_error_message = <span class="stringliteral">&quot;ValueError: Failing classifier failed as required&quot;</span></div>
<div class="line"><span class="lineno"> 2180</span>    error_message = re.compile(</div>
<div class="line"><span class="lineno"> 2181</span>        <span class="stringliteral">&quot;All the 15 fits failed.+your model is misconfigured.+&quot;</span></div>
<div class="line"><span class="lineno"> 2182</span>        f<span class="stringliteral">&quot;{individual_fit_error_message}&quot;</span>,</div>
<div class="line"><span class="lineno"> 2183</span>        flags=re.DOTALL,</div>
<div class="line"><span class="lineno"> 2184</span>    )</div>
<div class="line"><span class="lineno"> 2185</span> </div>
<div class="line"><span class="lineno"> 2186</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=error_message):</div>
<div class="line"><span class="lineno"> 2187</span>        gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 2188</span> </div>
<div class="line"><span class="lineno"> 2189</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac591c9be208ceb5c213b718d9cb17675" name="ac591c9be208ceb5c213b718d9cb17675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac591c9be208ceb5c213b718d9cb17675">&#9670;&#160;</a></span>test_callable_multimetric_confusion_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_callable_multimetric_confusion_matrix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2036</span><span class="keyword">def </span>test_callable_multimetric_confusion_matrix():</div>
<div class="line"><span class="lineno"> 2037</span>    <span class="comment"># Test callable with many metrics inserts the correct names and metrics</span></div>
<div class="line"><span class="lineno"> 2038</span>    <span class="comment"># into the search cv object</span></div>
<div class="line"><span class="lineno"> 2039</span>    <span class="keyword">def </span>custom_scorer(clf, X, y):</div>
<div class="line"><span class="lineno"> 2040</span>        y_pred = clf.predict(X)</div>
<div class="line"><span class="lineno"> 2041</span>        cm = confusion_matrix(y, y_pred)</div>
<div class="line"><span class="lineno"> 2042</span>        <span class="keywordflow">return</span> {<span class="stringliteral">&quot;tn&quot;</span>: cm[0, 0], <span class="stringliteral">&quot;fp&quot;</span>: cm[0, 1], <span class="stringliteral">&quot;fn&quot;</span>: cm[1, 0], <span class="stringliteral">&quot;tp&quot;</span>: cm[1, 1]}</div>
<div class="line"><span class="lineno"> 2043</span> </div>
<div class="line"><span class="lineno"> 2044</span>    X, y = make_classification(n_samples=40, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 2045</span>    est = LinearSVC(random_state=42)</div>
<div class="line"><span class="lineno"> 2046</span>    search = GridSearchCV(est, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]}, scoring=custom_scorer, refit=<span class="stringliteral">&quot;fp&quot;</span>)</div>
<div class="line"><span class="lineno"> 2047</span> </div>
<div class="line"><span class="lineno"> 2048</span>    search.fit(X, y)</div>
<div class="line"><span class="lineno"> 2049</span> </div>
<div class="line"><span class="lineno"> 2050</span>    score_names = [<span class="stringliteral">&quot;tn&quot;</span>, <span class="stringliteral">&quot;fp&quot;</span>, <span class="stringliteral">&quot;fn&quot;</span>, <span class="stringliteral">&quot;tp&quot;</span>]</div>
<div class="line"><span class="lineno"> 2051</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> score_names:</div>
<div class="line"><span class="lineno"> 2052</span>        <span class="keyword">assert</span> <span class="stringliteral">&quot;mean_test_{}&quot;</span>.format(name) <span class="keywordflow">in</span> search.cv_results_</div>
<div class="line"><span class="lineno"> 2053</span> </div>
<div class="line"><span class="lineno"> 2054</span>    y_pred = search.predict(X)</div>
<div class="line"><span class="lineno"> 2055</span>    cm = confusion_matrix(y, y_pred)</div>
<div class="line"><span class="lineno"> 2056</span>    <span class="keyword">assert</span> search.score(X, y) == pytest.approx(cm[0, 1])</div>
<div class="line"><span class="lineno"> 2057</span> </div>
<div class="line"><span class="lineno"> 2058</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7776c3a5b2dcb41176d79bbd55e84f05" name="a7776c3a5b2dcb41176d79bbd55e84f05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7776c3a5b2dcb41176d79bbd55e84f05">&#9670;&#160;</a></span>test_callable_multimetric_error_failing_clf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_callable_multimetric_error_failing_clf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2134</span><span class="keyword">def </span>test_callable_multimetric_error_failing_clf():</div>
<div class="line"><span class="lineno"> 2135</span>    <span class="comment"># Warns when there is an estimator the fails to fit with a float</span></div>
<div class="line"><span class="lineno"> 2136</span>    <span class="comment"># error_score</span></div>
<div class="line"><span class="lineno"> 2137</span>    <span class="keyword">def </span>custom_scorer(est, X, y):</div>
<div class="line"><span class="lineno"> 2138</span>        <span class="keywordflow">return</span> {<span class="stringliteral">&quot;acc&quot;</span>: 1}</div>
<div class="line"><span class="lineno"> 2139</span> </div>
<div class="line"><span class="lineno"> 2140</span>    X, y = make_classification(n_samples=20, n_features=10, random_state=0)</div>
<div class="line"><span class="lineno"> 2141</span> </div>
<div class="line"><span class="lineno"> 2142</span>    clf = FailingClassifier()</div>
<div class="line"><span class="lineno"> 2143</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 2144</span>        clf,</div>
<div class="line"><span class="lineno"> 2145</span>        [{<span class="stringliteral">&quot;parameter&quot;</span>: [0, 1, 2]}],</div>
<div class="line"><span class="lineno"> 2146</span>        scoring=custom_scorer,</div>
<div class="line"><span class="lineno"> 2147</span>        refit=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 2148</span>        error_score=0.1,</div>
<div class="line"><span class="lineno"> 2149</span>    )</div>
<div class="line"><span class="lineno"> 2150</span> </div>
<div class="line"><span class="lineno"> 2151</span>    warning_message = re.compile(</div>
<div class="line"><span class="lineno"> 2152</span>        <span class="stringliteral">&quot;5 fits failed.+total of 15.+The score on these&quot;</span></div>
<div class="line"><span class="lineno"> 2153</span>        <span class="stringliteral">r&quot; train-test partitions for these parameters will be set to 0\.1&quot;</span>,</div>
<div class="line"><span class="lineno"> 2154</span>        flags=re.DOTALL,</div>
<div class="line"><span class="lineno"> 2155</span>    )</div>
<div class="line"><span class="lineno"> 2156</span>    <span class="keyword">with</span> pytest.warns(FitFailedWarning, match=warning_message):</div>
<div class="line"><span class="lineno"> 2157</span>        gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 2158</span> </div>
<div class="line"><span class="lineno"> 2159</span>    assert_allclose(gs.cv_results_[<span class="stringliteral">&quot;mean_test_acc&quot;</span>], [1, 1, 0.1])</div>
<div class="line"><span class="lineno"> 2160</span> </div>
<div class="line"><span class="lineno"> 2161</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af8694d5ea60e9ca0956f5243d0081914" name="af8694d5ea60e9ca0956f5243d0081914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8694d5ea60e9ca0956f5243d0081914">&#9670;&#160;</a></span>test_callable_multimetric_error_on_invalid_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_callable_multimetric_error_on_invalid_key </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2113</span><span class="keyword">def </span>test_callable_multimetric_error_on_invalid_key():</div>
<div class="line"><span class="lineno"> 2114</span>    <span class="comment"># Raises when the callable scorer does not return a dict with `refit` key.</span></div>
<div class="line"><span class="lineno"> 2115</span>    <span class="keyword">def </span>bad_scorer(est, X, y):</div>
<div class="line"><span class="lineno"> 2116</span>        <span class="keywordflow">return</span> {<span class="stringliteral">&quot;bad_name&quot;</span>: 1}</div>
<div class="line"><span class="lineno"> 2117</span> </div>
<div class="line"><span class="lineno"> 2118</span>    X, y = make_classification(n_samples=40, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 2119</span>    clf = GridSearchCV(</div>
<div class="line"><span class="lineno"> 2120</span>        LinearSVC(random_state=42),</div>
<div class="line"><span class="lineno"> 2121</span>        {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]},</div>
<div class="line"><span class="lineno"> 2122</span>        scoring=bad_scorer,</div>
<div class="line"><span class="lineno"> 2123</span>        refit=<span class="stringliteral">&quot;good_name&quot;</span>,</div>
<div class="line"><span class="lineno"> 2124</span>    )</div>
<div class="line"><span class="lineno"> 2125</span> </div>
<div class="line"><span class="lineno"> 2126</span>    msg = (</div>
<div class="line"><span class="lineno"> 2127</span>        <span class="stringliteral">&quot;For multi-metric scoring, the parameter refit must be set to a &quot;</span></div>
<div class="line"><span class="lineno"> 2128</span>        <span class="stringliteral">&quot;scorer key or a callable to refit&quot;</span></div>
<div class="line"><span class="lineno"> 2129</span>    )</div>
<div class="line"><span class="lineno"> 2130</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 2131</span>        clf.fit(X, y)</div>
<div class="line"><span class="lineno"> 2132</span> </div>
<div class="line"><span class="lineno"> 2133</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b73fcc40ac03adc1cb84f1042ba5cb2" name="a2b73fcc40ac03adc1cb84f1042ba5cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b73fcc40ac03adc1cb84f1042ba5cb2">&#9670;&#160;</a></span>test_callable_multimetric_same_as_list_of_strings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_callable_multimetric_same_as_list_of_strings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2059</span><span class="keyword">def </span>test_callable_multimetric_same_as_list_of_strings():</div>
<div class="line"><span class="lineno"> 2060</span>    <span class="comment"># Test callable multimetric is the same as a list of strings</span></div>
<div class="line"><span class="lineno"> 2061</span>    <span class="keyword">def </span>custom_scorer(est, X, y):</div>
<div class="line"><span class="lineno"> 2062</span>        y_pred = est.predict(X)</div>
<div class="line"><span class="lineno"> 2063</span>        <span class="keywordflow">return</span> {</div>
<div class="line"><span class="lineno"> 2064</span>            <span class="stringliteral">&quot;recall&quot;</span>: recall_score(y, y_pred),</div>
<div class="line"><span class="lineno"> 2065</span>            <span class="stringliteral">&quot;accuracy&quot;</span>: accuracy_score(y, y_pred),</div>
<div class="line"><span class="lineno"> 2066</span>        }</div>
<div class="line"><span class="lineno"> 2067</span> </div>
<div class="line"><span class="lineno"> 2068</span>    X, y = make_classification(n_samples=40, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 2069</span>    est = LinearSVC(random_state=42)</div>
<div class="line"><span class="lineno"> 2070</span>    search_callable = GridSearchCV(</div>
<div class="line"><span class="lineno"> 2071</span>        est, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]}, scoring=custom_scorer, refit=<span class="stringliteral">&quot;recall&quot;</span></div>
<div class="line"><span class="lineno"> 2072</span>    )</div>
<div class="line"><span class="lineno"> 2073</span>    search_str = GridSearchCV(</div>
<div class="line"><span class="lineno"> 2074</span>        est, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]}, scoring=[<span class="stringliteral">&quot;recall&quot;</span>, <span class="stringliteral">&quot;accuracy&quot;</span>], refit=<span class="stringliteral">&quot;recall&quot;</span></div>
<div class="line"><span class="lineno"> 2075</span>    )</div>
<div class="line"><span class="lineno"> 2076</span> </div>
<div class="line"><span class="lineno"> 2077</span>    search_callable.fit(X, y)</div>
<div class="line"><span class="lineno"> 2078</span>    search_str.fit(X, y)</div>
<div class="line"><span class="lineno"> 2079</span> </div>
<div class="line"><span class="lineno"> 2080</span>    <span class="keyword">assert</span> search_callable.best_score_ == pytest.approx(search_str.best_score_)</div>
<div class="line"><span class="lineno"> 2081</span>    <span class="keyword">assert</span> search_callable.best_index_ == search_str.best_index_</div>
<div class="line"><span class="lineno"> 2082</span>    <span class="keyword">assert</span> search_callable.score(X, y) == pytest.approx(search_str.score(X, y))</div>
<div class="line"><span class="lineno"> 2083</span> </div>
<div class="line"><span class="lineno"> 2084</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a69d5411b0b80e216b5d80e12e74e7da8" name="a69d5411b0b80e216b5d80e12e74e7da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69d5411b0b80e216b5d80e12e74e7da8">&#9670;&#160;</a></span>test_callable_single_metric_same_as_single_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_callable_single_metric_same_as_single_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2085</span><span class="keyword">def </span>test_callable_single_metric_same_as_single_string():</div>
<div class="line"><span class="lineno"> 2086</span>    <span class="comment"># Tests callable scorer is the same as scoring with a single string</span></div>
<div class="line"><span class="lineno"> 2087</span>    <span class="keyword">def </span>custom_scorer(est, X, y):</div>
<div class="line"><span class="lineno"> 2088</span>        y_pred = est.predict(X)</div>
<div class="line"><span class="lineno"> 2089</span>        <span class="keywordflow">return</span> recall_score(y, y_pred)</div>
<div class="line"><span class="lineno"> 2090</span> </div>
<div class="line"><span class="lineno"> 2091</span>    X, y = make_classification(n_samples=40, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 2092</span>    est = LinearSVC(random_state=42)</div>
<div class="line"><span class="lineno"> 2093</span>    search_callable = GridSearchCV(</div>
<div class="line"><span class="lineno"> 2094</span>        est, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]}, scoring=custom_scorer, refit=<span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 2095</span>    )</div>
<div class="line"><span class="lineno"> 2096</span>    search_str = GridSearchCV(est, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]}, scoring=<span class="stringliteral">&quot;recall&quot;</span>, refit=<span class="stringliteral">&quot;recall&quot;</span>)</div>
<div class="line"><span class="lineno"> 2097</span>    search_list_str = GridSearchCV(</div>
<div class="line"><span class="lineno"> 2098</span>        est, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]}, scoring=[<span class="stringliteral">&quot;recall&quot;</span>], refit=<span class="stringliteral">&quot;recall&quot;</span></div>
<div class="line"><span class="lineno"> 2099</span>    )</div>
<div class="line"><span class="lineno"> 2100</span>    search_callable.fit(X, y)</div>
<div class="line"><span class="lineno"> 2101</span>    search_str.fit(X, y)</div>
<div class="line"><span class="lineno"> 2102</span>    search_list_str.fit(X, y)</div>
<div class="line"><span class="lineno"> 2103</span> </div>
<div class="line"><span class="lineno"> 2104</span>    <span class="keyword">assert</span> search_callable.best_score_ == pytest.approx(search_str.best_score_)</div>
<div class="line"><span class="lineno"> 2105</span>    <span class="keyword">assert</span> search_callable.best_index_ == search_str.best_index_</div>
<div class="line"><span class="lineno"> 2106</span>    <span class="keyword">assert</span> search_callable.score(X, y) == pytest.approx(search_str.score(X, y))</div>
<div class="line"><span class="lineno"> 2107</span> </div>
<div class="line"><span class="lineno"> 2108</span>    <span class="keyword">assert</span> search_list_str.best_score_ == pytest.approx(search_str.best_score_)</div>
<div class="line"><span class="lineno"> 2109</span>    <span class="keyword">assert</span> search_list_str.best_index_ == search_str.best_index_</div>
<div class="line"><span class="lineno"> 2110</span>    <span class="keyword">assert</span> search_list_str.score(X, y) == pytest.approx(search_str.score(X, y))</div>
<div class="line"><span class="lineno"> 2111</span> </div>
<div class="line"><span class="lineno"> 2112</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a73c2f274ac67f635b36797d5c4f31e" name="a1a73c2f274ac67f635b36797d5c4f31e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a73c2f274ac67f635b36797d5c4f31e">&#9670;&#160;</a></span>test_classes__property()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_classes__property </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  334</span><span class="keyword">def </span>test_classes__property():</div>
<div class="line"><span class="lineno">  335</span>    <span class="comment"># Test that classes_ property matches best_estimator_.classes_</span></div>
<div class="line"><span class="lineno">  336</span>    X = np.arange(100).reshape(10, 10)</div>
<div class="line"><span class="lineno">  337</span>    y = np.array([0] * 5 + [1] * 5)</div>
<div class="line"><span class="lineno">  338</span>    Cs = [0.1, 1, 10]</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    grid_search = GridSearchCV(LinearSVC(random_state=0), {<span class="stringliteral">&quot;C&quot;</span>: Cs})</div>
<div class="line"><span class="lineno">  341</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  342</span>    assert_array_equal(grid_search.best_estimator_.classes_, grid_search.classes_)</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>    <span class="comment"># Test that regressors do not have a classes_ attribute</span></div>
<div class="line"><span class="lineno">  345</span>    grid_search = GridSearchCV(Ridge(), {<span class="stringliteral">&quot;alpha&quot;</span>: [1.0, 2.0]})</div>
<div class="line"><span class="lineno">  346</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  347</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(grid_search, <span class="stringliteral">&quot;classes_&quot;</span>)</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>    <span class="comment"># Test that the grid searcher has no classes_ attribute before it&#39;s fit</span></div>
<div class="line"><span class="lineno">  350</span>    grid_search = GridSearchCV(LinearSVC(random_state=0), {<span class="stringliteral">&quot;C&quot;</span>: Cs})</div>
<div class="line"><span class="lineno">  351</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(grid_search, <span class="stringliteral">&quot;classes_&quot;</span>)</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    <span class="comment"># Test that the grid searcher has no classes_ attribute without a refit</span></div>
<div class="line"><span class="lineno">  354</span>    grid_search = GridSearchCV(LinearSVC(random_state=0), {<span class="stringliteral">&quot;C&quot;</span>: Cs}, refit=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  355</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  356</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(grid_search, <span class="stringliteral">&quot;classes_&quot;</span>)</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f2b8ddbfa4af9a350f59ee0a9024438" name="a3f2b8ddbfa4af9a350f59ee0a9024438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f2b8ddbfa4af9a350f59ee0a9024438">&#9670;&#160;</a></span>test_custom_run_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_custom_run_search </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1859</span><span class="keyword">def </span>test_custom_run_search():</div>
<div class="line"><span class="lineno"> 1860</span>    <span class="keyword">def </span>check_results(results, gscv):</div>
<div class="line"><span class="lineno"> 1861</span>        exp_results = gscv.cv_results_</div>
<div class="line"><span class="lineno"> 1862</span>        <span class="keyword">assert</span> sorted(results.keys()) == sorted(exp_results)</div>
<div class="line"><span class="lineno"> 1863</span>        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> results:</div>
<div class="line"><span class="lineno"> 1864</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> k.endswith(<span class="stringliteral">&quot;_time&quot;</span>):</div>
<div class="line"><span class="lineno"> 1865</span>                <span class="comment"># XXX: results[&#39;params&#39;] is a list :|</span></div>
<div class="line"><span class="lineno"> 1866</span>                results[k] = np.asanyarray(results[k])</div>
<div class="line"><span class="lineno"> 1867</span>                <span class="keywordflow">if</span> results[k].dtype.kind == <span class="stringliteral">&quot;O&quot;</span>:</div>
<div class="line"><span class="lineno"> 1868</span>                    assert_array_equal(</div>
<div class="line"><span class="lineno"> 1869</span>                        exp_results[k], results[k], err_msg=<span class="stringliteral">&quot;Checking &quot;</span> + k</div>
<div class="line"><span class="lineno"> 1870</span>                    )</div>
<div class="line"><span class="lineno"> 1871</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1872</span>                    assert_allclose(exp_results[k], results[k], err_msg=<span class="stringliteral">&quot;Checking &quot;</span> + k)</div>
<div class="line"><span class="lineno"> 1873</span> </div>
<div class="line"><span class="lineno"> 1874</span>    <span class="keyword">def </span>fit_grid(param_grid):</div>
<div class="line"><span class="lineno"> 1875</span>        <span class="keywordflow">return</span> GridSearchCV(clf, param_grid, return_train_score=<span class="keyword">True</span>).fit(X, y)</div>
<div class="line"><span class="lineno"> 1876</span> </div>
<div class="line"><span class="lineno"> 1877</span>    <span class="keyword">class </span>CustomSearchCV(BaseSearchCV):</div>
<div class="line"><span class="lineno"> 1878</span>        <span class="keyword">def </span>__init__(self, estimator, **kwargs):</div>
<div class="line"><span class="lineno"> 1879</span>            super().__init__(estimator, **kwargs)</div>
<div class="line"><span class="lineno"> 1880</span> </div>
<div class="line"><span class="lineno"> 1881</span>        <span class="keyword">def </span>_run_search(self, evaluate):</div>
<div class="line"><span class="lineno"> 1882</span>            results = evaluate([{<span class="stringliteral">&quot;max_depth&quot;</span>: 1}, {<span class="stringliteral">&quot;max_depth&quot;</span>: 2}])</div>
<div class="line"><span class="lineno"> 1883</span>            check_results(results, fit_grid({<span class="stringliteral">&quot;max_depth&quot;</span>: [1, 2]}))</div>
<div class="line"><span class="lineno"> 1884</span>            results = evaluate([{<span class="stringliteral">&quot;min_samples_split&quot;</span>: 5}, {<span class="stringliteral">&quot;min_samples_split&quot;</span>: 10}])</div>
<div class="line"><span class="lineno"> 1885</span>            check_results(</div>
<div class="line"><span class="lineno"> 1886</span>                results,</div>
<div class="line"><span class="lineno"> 1887</span>                fit_grid([{<span class="stringliteral">&quot;max_depth&quot;</span>: [1, 2]}, {<span class="stringliteral">&quot;min_samples_split&quot;</span>: [5, 10]}]),</div>
<div class="line"><span class="lineno"> 1888</span>            )</div>
<div class="line"><span class="lineno"> 1889</span> </div>
<div class="line"><span class="lineno"> 1890</span>    <span class="comment"># Using regressor to make sure each score differs</span></div>
<div class="line"><span class="lineno"> 1891</span>    clf = DecisionTreeRegressor(random_state=0)</div>
<div class="line"><span class="lineno"> 1892</span>    X, y = make_classification(n_samples=100, n_informative=4, random_state=0)</div>
<div class="line"><span class="lineno"> 1893</span>    mycv = CustomSearchCV(clf, return_train_score=<span class="keyword">True</span>).fit(X, y)</div>
<div class="line"><span class="lineno"> 1894</span>    gscv = fit_grid([{<span class="stringliteral">&quot;max_depth&quot;</span>: [1, 2]}, {<span class="stringliteral">&quot;min_samples_split&quot;</span>: [5, 10]}])</div>
<div class="line"><span class="lineno"> 1895</span> </div>
<div class="line"><span class="lineno"> 1896</span>    results = mycv.cv_results_</div>
<div class="line"><span class="lineno"> 1897</span>    check_results(results, gscv)</div>
<div class="line"><span class="lineno"> 1898</span>    <span class="keywordflow">for</span> attr <span class="keywordflow">in</span> dir(gscv):</div>
<div class="line"><span class="lineno"> 1899</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1900</span>            attr[0].islower()</div>
<div class="line"><span class="lineno"> 1901</span>            <span class="keywordflow">and</span> attr[-1:] == <span class="stringliteral">&quot;_&quot;</span></div>
<div class="line"><span class="lineno"> 1902</span>            <span class="keywordflow">and</span> attr</div>
<div class="line"><span class="lineno"> 1903</span>            <span class="keywordflow">not</span> <span class="keywordflow">in</span> {<span class="stringliteral">&quot;cv_results_&quot;</span>, <span class="stringliteral">&quot;best_estimator_&quot;</span>, <span class="stringliteral">&quot;refit_time_&quot;</span>, <span class="stringliteral">&quot;classes_&quot;</span>}</div>
<div class="line"><span class="lineno"> 1904</span>        ):</div>
<div class="line"><span class="lineno"> 1905</span>            <span class="keyword">assert</span> getattr(gscv, attr) == getattr(mycv, attr), (</div>
<div class="line"><span class="lineno"> 1906</span>                <span class="stringliteral">&quot;Attribute %s not equal&quot;</span> % attr</div>
<div class="line"><span class="lineno"> 1907</span>            )</div>
<div class="line"><span class="lineno"> 1908</span> </div>
<div class="line"><span class="lineno"> 1909</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9dc650b9fecd6d519ffeec76cdd3c31" name="ae9dc650b9fecd6d519ffeec76cdd3c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9dc650b9fecd6d519ffeec76cdd3c31">&#9670;&#160;</a></span>test_empty_cv_iterator_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_empty_cv_iterator_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1930</span><span class="keyword">def </span>test_empty_cv_iterator_error():</div>
<div class="line"><span class="lineno"> 1931</span>    <span class="comment"># Use global X, y</span></div>
<div class="line"><span class="lineno"> 1932</span> </div>
<div class="line"><span class="lineno"> 1933</span>    <span class="comment"># create cv</span></div>
<div class="line"><span class="lineno"> 1934</span>    cv = KFold(n_splits=3).split(X)</div>
<div class="line"><span class="lineno"> 1935</span> </div>
<div class="line"><span class="lineno"> 1936</span>    <span class="comment"># pop all of it, this should cause the expected ValueError</span></div>
<div class="line"><span class="lineno"> 1937</span>    [u <span class="keywordflow">for</span> u <span class="keywordflow">in</span> cv]</div>
<div class="line"><span class="lineno"> 1938</span>    <span class="comment"># cv is empty now</span></div>
<div class="line"><span class="lineno"> 1939</span> </div>
<div class="line"><span class="lineno"> 1940</span>    train_size = 100</div>
<div class="line"><span class="lineno"> 1941</span>    ridge = RandomizedSearchCV(Ridge(), {<span class="stringliteral">&quot;alpha&quot;</span>: [1e-3, 1e-2, 1e-1]}, cv=cv, n_jobs=4)</div>
<div class="line"><span class="lineno"> 1942</span> </div>
<div class="line"><span class="lineno"> 1943</span>    <span class="comment"># assert that this raises an error</span></div>
<div class="line"><span class="lineno"> 1944</span>    <span class="keyword">with</span> pytest.raises(</div>
<div class="line"><span class="lineno"> 1945</span>        ValueError,</div>
<div class="line"><span class="lineno"> 1946</span>        match=(</div>
<div class="line"><span class="lineno"> 1947</span>            <span class="stringliteral">&quot;No fits were performed. &quot;</span></div>
<div class="line"><span class="lineno"> 1948</span>            <span class="stringliteral">&quot;Was the CV iterator empty\\? &quot;</span></div>
<div class="line"><span class="lineno"> 1949</span>            <span class="stringliteral">&quot;Were there no candidates\\?&quot;</span></div>
<div class="line"><span class="lineno"> 1950</span>        ),</div>
<div class="line"><span class="lineno"> 1951</span>    ):</div>
<div class="line"><span class="lineno"> 1952</span>        ridge.fit(X[:train_size], y[:train_size])</div>
<div class="line"><span class="lineno"> 1953</span> </div>
<div class="line"><span class="lineno"> 1954</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a76656ea2605227491f35c809b2822954" name="a76656ea2605227491f35c809b2822954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76656ea2605227491f35c809b2822954">&#9670;&#160;</a></span>test_grid_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  188</span><span class="keyword">def </span>test_grid_search():</div>
<div class="line"><span class="lineno">  189</span>    <span class="comment"># Test that the best estimator contains the right value for foo_param</span></div>
<div class="line"><span class="lineno">  190</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno">  191</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, cv=3, verbose=3)</div>
<div class="line"><span class="lineno">  192</span>    <span class="comment"># make sure it selects the smallest parameter in case of ties</span></div>
<div class="line"><span class="lineno">  193</span>    old_stdout = sys.stdout</div>
<div class="line"><span class="lineno">  194</span>    sys.stdout = StringIO()</div>
<div class="line"><span class="lineno">  195</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  196</span>    sys.stdout = old_stdout</div>
<div class="line"><span class="lineno">  197</span>    <span class="keyword">assert</span> grid_search.best_estimator_.foo_param == 2</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>    assert_array_equal(grid_search.cv_results_[<span class="stringliteral">&quot;param_foo_param&quot;</span>].data, [1, 2, 3])</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="comment"># Smoke test the score etc:</span></div>
<div class="line"><span class="lineno">  202</span>    grid_search.score(X, y)</div>
<div class="line"><span class="lineno">  203</span>    grid_search.predict_proba(X)</div>
<div class="line"><span class="lineno">  204</span>    grid_search.decision_function(X)</div>
<div class="line"><span class="lineno">  205</span>    grid_search.transform(X)</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    <span class="comment"># Test exception handling on scoring</span></div>
<div class="line"><span class="lineno">  208</span>    grid_search.scoring = <span class="stringliteral">&quot;sklearn&quot;</span></div>
<div class="line"><span class="lineno">  209</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  210</span>        grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f7b45d03db160d708646b3a2798134b" name="a9f7b45d03db160d708646b3a2798134b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f7b45d03db160d708646b3a2798134b">&#9670;&#160;</a></span>test_grid_search_allows_nans()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_allows_nans </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1518</span><span class="keyword">def </span>test_grid_search_allows_nans():</div>
<div class="line"><span class="lineno"> 1519</span>    <span class="comment"># Test GridSearchCV with SimpleImputer</span></div>
<div class="line"><span class="lineno"> 1520</span>    X = np.arange(20, dtype=np.float64).reshape(5, -1)</div>
<div class="line"><span class="lineno"> 1521</span>    X[2, :] = np.nan</div>
<div class="line"><span class="lineno"> 1522</span>    y = [0, 0, 1, 1, 1]</div>
<div class="line"><span class="lineno"> 1523</span>    p = Pipeline(</div>
<div class="line"><span class="lineno"> 1524</span>        [</div>
<div class="line"><span class="lineno"> 1525</span>            (<span class="stringliteral">&quot;imputer&quot;</span>, SimpleImputer(strategy=<span class="stringliteral">&quot;mean&quot;</span>, missing_values=np.nan)),</div>
<div class="line"><span class="lineno"> 1526</span>            (<span class="stringliteral">&quot;classifier&quot;</span>, MockClassifier()),</div>
<div class="line"><span class="lineno"> 1527</span>        ]</div>
<div class="line"><span class="lineno"> 1528</span>    )</div>
<div class="line"><span class="lineno"> 1529</span>    GridSearchCV(p, {<span class="stringliteral">&quot;classifier__foo_param&quot;</span>: [1, 2, 3]}, cv=2).fit(X, y)</div>
<div class="line"><span class="lineno"> 1530</span> </div>
<div class="line"><span class="lineno"> 1531</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a02da2bf6806cc2ce5bc5293ad6ceb0b8" name="a02da2bf6806cc2ce5bc5293ad6ceb0b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02da2bf6806cc2ce5bc5293ad6ceb0b8">&#9670;&#160;</a></span>test_grid_search_bad_param_grid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_bad_param_grid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  443</span><span class="keyword">def </span>test_grid_search_bad_param_grid():</div>
<div class="line"><span class="lineno">  444</span>    X, y = make_classification(n_samples=10, n_features=5, random_state=0)</div>
<div class="line"><span class="lineno">  445</span>    param_dict = {<span class="stringliteral">&quot;C&quot;</span>: 1}</div>
<div class="line"><span class="lineno">  446</span>    clf = SVC(gamma=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  447</span>    error_msg = re.escape(</div>
<div class="line"><span class="lineno">  448</span>        <span class="stringliteral">&quot;Parameter grid for parameter &#39;C&#39; needs to be a list or &quot;</span></div>
<div class="line"><span class="lineno">  449</span>        <span class="stringliteral">&quot;a numpy array, but got 1 (of type int) instead. Single &quot;</span></div>
<div class="line"><span class="lineno">  450</span>        <span class="stringliteral">&quot;values need to be wrapped in a list with one element.&quot;</span></div>
<div class="line"><span class="lineno">  451</span>    )</div>
<div class="line"><span class="lineno">  452</span>    search = GridSearchCV(clf, param_dict)</div>
<div class="line"><span class="lineno">  453</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=error_msg):</div>
<div class="line"><span class="lineno">  454</span>        search.fit(X, y)</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>    param_dict = {<span class="stringliteral">&quot;C&quot;</span>: []}</div>
<div class="line"><span class="lineno">  457</span>    clf = SVC()</div>
<div class="line"><span class="lineno">  458</span>    error_msg = re.escape(</div>
<div class="line"><span class="lineno">  459</span>        <span class="stringliteral">&quot;Parameter grid for parameter &#39;C&#39; need to be a non-empty sequence, got: []&quot;</span></div>
<div class="line"><span class="lineno">  460</span>    )</div>
<div class="line"><span class="lineno">  461</span>    search = GridSearchCV(clf, param_dict)</div>
<div class="line"><span class="lineno">  462</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=error_msg):</div>
<div class="line"><span class="lineno">  463</span>        search.fit(X, y)</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>    param_dict = {<span class="stringliteral">&quot;C&quot;</span>: <span class="stringliteral">&quot;1,2,3&quot;</span>}</div>
<div class="line"><span class="lineno">  466</span>    clf = SVC(gamma=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  467</span>    error_msg = re.escape(</div>
<div class="line"><span class="lineno">  468</span>        <span class="stringliteral">&quot;Parameter grid for parameter &#39;C&#39; needs to be a list or a numpy array, &quot;</span></div>
<div class="line"><span class="lineno">  469</span>        <span class="stringliteral">&quot;but got &#39;1,2,3&#39; (of type str) instead. Single values need to be &quot;</span></div>
<div class="line"><span class="lineno">  470</span>        <span class="stringliteral">&quot;wrapped in a list with one element.&quot;</span></div>
<div class="line"><span class="lineno">  471</span>    )</div>
<div class="line"><span class="lineno">  472</span>    search = GridSearchCV(clf, param_dict)</div>
<div class="line"><span class="lineno">  473</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=error_msg):</div>
<div class="line"><span class="lineno">  474</span>        search.fit(X, y)</div>
<div class="line"><span class="lineno">  475</span> </div>
<div class="line"><span class="lineno">  476</span>    param_dict = {<span class="stringliteral">&quot;C&quot;</span>: np.ones((3, 2))}</div>
<div class="line"><span class="lineno">  477</span>    clf = SVC()</div>
<div class="line"><span class="lineno">  478</span>    search = GridSearchCV(clf, param_dict)</div>
<div class="line"><span class="lineno">  479</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  480</span>        search.fit(X, y)</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aac30a3ea96141f761936fef58cb4c10e" name="aac30a3ea96141f761936fef58cb4c10e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac30a3ea96141f761936fef58cb4c10e">&#9670;&#160;</a></span>test_grid_search_classifier_all_fits_fail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_classifier_all_fits_fail </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1632</span><span class="keyword">def </span>test_grid_search_classifier_all_fits_fail():</div>
<div class="line"><span class="lineno"> 1633</span>    X, y = make_classification(n_samples=20, n_features=10, random_state=0)</div>
<div class="line"><span class="lineno"> 1634</span> </div>
<div class="line"><span class="lineno"> 1635</span>    clf = FailingClassifier()</div>
<div class="line"><span class="lineno"> 1636</span> </div>
<div class="line"><span class="lineno"> 1637</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1638</span>        clf,</div>
<div class="line"><span class="lineno"> 1639</span>        [{<span class="stringliteral">&quot;parameter&quot;</span>: [FailingClassifier.FAILING_PARAMETER] * 3}],</div>
<div class="line"><span class="lineno"> 1640</span>        error_score=0.0,</div>
<div class="line"><span class="lineno"> 1641</span>    )</div>
<div class="line"><span class="lineno"> 1642</span> </div>
<div class="line"><span class="lineno"> 1643</span>    warning_message = re.compile(</div>
<div class="line"><span class="lineno"> 1644</span>        <span class="stringliteral">&quot;All the 15 fits failed.+&quot;</span></div>
<div class="line"><span class="lineno"> 1645</span>        <span class="stringliteral">&quot;15 fits failed with the following error.+ValueError.+Failing classifier failed&quot;</span></div>
<div class="line"><span class="lineno"> 1646</span>        <span class="stringliteral">&quot; as required&quot;</span>,</div>
<div class="line"><span class="lineno"> 1647</span>        flags=re.DOTALL,</div>
<div class="line"><span class="lineno"> 1648</span>    )</div>
<div class="line"><span class="lineno"> 1649</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=warning_message):</div>
<div class="line"><span class="lineno"> 1650</span>        gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 1651</span> </div>
<div class="line"><span class="lineno"> 1652</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afe7df6ca9f0ec2d105e91f42958c4552" name="afe7df6ca9f0ec2d105e91f42958c4552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe7df6ca9f0ec2d105e91f42958c4552">&#9670;&#160;</a></span>test_grid_search_correct_score_results()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_correct_score_results </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1408</span><span class="keyword">def </span>test_grid_search_correct_score_results():</div>
<div class="line"><span class="lineno"> 1409</span>    <span class="comment"># test that correct scores are used</span></div>
<div class="line"><span class="lineno"> 1410</span>    n_splits = 3</div>
<div class="line"><span class="lineno"> 1411</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno"> 1412</span>    X, y = make_blobs(random_state=0, centers=2)</div>
<div class="line"><span class="lineno"> 1413</span>    Cs = [0.1, 1, 10]</div>
<div class="line"><span class="lineno"> 1414</span>    <span class="keywordflow">for</span> score <span class="keywordflow">in</span> [<span class="stringliteral">&quot;f1&quot;</span>, <span class="stringliteral">&quot;roc_auc&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1415</span>        grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: Cs}, scoring=score, cv=n_splits)</div>
<div class="line"><span class="lineno"> 1416</span>        cv_results = grid_search.fit(X, y).cv_results_</div>
<div class="line"><span class="lineno"> 1417</span> </div>
<div class="line"><span class="lineno"> 1418</span>        <span class="comment"># Test scorer names</span></div>
<div class="line"><span class="lineno"> 1419</span>        result_keys = list(cv_results.keys())</div>
<div class="line"><span class="lineno"> 1420</span>        expected_keys = (<span class="stringliteral">&quot;mean_test_score&quot;</span>, <span class="stringliteral">&quot;rank_test_score&quot;</span>) + tuple(</div>
<div class="line"><span class="lineno"> 1421</span>            <span class="stringliteral">&quot;split%d_test_score&quot;</span> % cv_i <span class="keywordflow">for</span> cv_i <span class="keywordflow">in</span> range(n_splits)</div>
<div class="line"><span class="lineno"> 1422</span>        )</div>
<div class="line"><span class="lineno"> 1423</span>        <span class="keyword">assert</span> all(np.in1d(expected_keys, result_keys))</div>
<div class="line"><span class="lineno"> 1424</span> </div>
<div class="line"><span class="lineno"> 1425</span>        cv = StratifiedKFold(n_splits=n_splits)</div>
<div class="line"><span class="lineno"> 1426</span>        n_splits = grid_search.n_splits_</div>
<div class="line"><span class="lineno"> 1427</span>        <span class="keywordflow">for</span> candidate_i, C <span class="keywordflow">in</span> enumerate(Cs):</div>
<div class="line"><span class="lineno"> 1428</span>            clf.set_params(C=C)</div>
<div class="line"><span class="lineno"> 1429</span>            cv_scores = np.array(</div>
<div class="line"><span class="lineno"> 1430</span>                [</div>
<div class="line"><span class="lineno"> 1431</span>                    grid_search.cv_results_[<span class="stringliteral">&quot;split%d_test_score&quot;</span> % s][candidate_i]</div>
<div class="line"><span class="lineno"> 1432</span>                    <span class="keywordflow">for</span> s <span class="keywordflow">in</span> range(n_splits)</div>
<div class="line"><span class="lineno"> 1433</span>                ]</div>
<div class="line"><span class="lineno"> 1434</span>            )</div>
<div class="line"><span class="lineno"> 1435</span>            <span class="keywordflow">for</span> i, (train, test) <span class="keywordflow">in</span> enumerate(cv.split(X, y)):</div>
<div class="line"><span class="lineno"> 1436</span>                clf.fit(X[train], y[train])</div>
<div class="line"><span class="lineno"> 1437</span>                <span class="keywordflow">if</span> score == <span class="stringliteral">&quot;f1&quot;</span>:</div>
<div class="line"><span class="lineno"> 1438</span>                    correct_score = f1_score(y[test], clf.predict(X[test]))</div>
<div class="line"><span class="lineno"> 1439</span>                <span class="keywordflow">elif</span> score == <span class="stringliteral">&quot;roc_auc&quot;</span>:</div>
<div class="line"><span class="lineno"> 1440</span>                    dec = clf.decision_function(X[test])</div>
<div class="line"><span class="lineno"> 1441</span>                    correct_score = roc_auc_score(y[test], dec)</div>
<div class="line"><span class="lineno"> 1442</span>                assert_almost_equal(correct_score, cv_scores[i])</div>
<div class="line"><span class="lineno"> 1443</span> </div>
<div class="line"><span class="lineno"> 1444</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b04ef784f5e6ddbf8b3a9081a9b6a2e" name="a3b04ef784f5e6ddbf8b3a9081a9b6a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b04ef784f5e6ddbf8b3a9081a9b6a2e">&#9670;&#160;</a></span>test_grid_search_cv_results()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_cv_results </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  912</span><span class="keyword">def </span>test_grid_search_cv_results():</div>
<div class="line"><span class="lineno">  913</span>    X, y = make_classification(n_samples=50, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>    n_splits = 3</div>
<div class="line"><span class="lineno">  916</span>    n_grid_points = 6</div>
<div class="line"><span class="lineno">  917</span>    params = [</div>
<div class="line"><span class="lineno">  918</span>        dict(</div>
<div class="line"><span class="lineno">  919</span>            kernel=[</div>
<div class="line"><span class="lineno">  920</span>                <span class="stringliteral">&quot;rbf&quot;</span>,</div>
<div class="line"><span class="lineno">  921</span>            ],</div>
<div class="line"><span class="lineno">  922</span>            C=[1, 10],</div>
<div class="line"><span class="lineno">  923</span>            gamma=[0.1, 1],</div>
<div class="line"><span class="lineno">  924</span>        ),</div>
<div class="line"><span class="lineno">  925</span>        dict(</div>
<div class="line"><span class="lineno">  926</span>            kernel=[</div>
<div class="line"><span class="lineno">  927</span>                <span class="stringliteral">&quot;poly&quot;</span>,</div>
<div class="line"><span class="lineno">  928</span>            ],</div>
<div class="line"><span class="lineno">  929</span>            degree=[1, 2],</div>
<div class="line"><span class="lineno">  930</span>        ),</div>
<div class="line"><span class="lineno">  931</span>    ]</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>    param_keys = (<span class="stringliteral">&quot;param_C&quot;</span>, <span class="stringliteral">&quot;param_degree&quot;</span>, <span class="stringliteral">&quot;param_gamma&quot;</span>, <span class="stringliteral">&quot;param_kernel&quot;</span>)</div>
<div class="line"><span class="lineno">  934</span>    score_keys = (</div>
<div class="line"><span class="lineno">  935</span>        <span class="stringliteral">&quot;mean_test_score&quot;</span>,</div>
<div class="line"><span class="lineno">  936</span>        <span class="stringliteral">&quot;mean_train_score&quot;</span>,</div>
<div class="line"><span class="lineno">  937</span>        <span class="stringliteral">&quot;rank_test_score&quot;</span>,</div>
<div class="line"><span class="lineno">  938</span>        <span class="stringliteral">&quot;split0_test_score&quot;</span>,</div>
<div class="line"><span class="lineno">  939</span>        <span class="stringliteral">&quot;split1_test_score&quot;</span>,</div>
<div class="line"><span class="lineno">  940</span>        <span class="stringliteral">&quot;split2_test_score&quot;</span>,</div>
<div class="line"><span class="lineno">  941</span>        <span class="stringliteral">&quot;split0_train_score&quot;</span>,</div>
<div class="line"><span class="lineno">  942</span>        <span class="stringliteral">&quot;split1_train_score&quot;</span>,</div>
<div class="line"><span class="lineno">  943</span>        <span class="stringliteral">&quot;split2_train_score&quot;</span>,</div>
<div class="line"><span class="lineno">  944</span>        <span class="stringliteral">&quot;std_test_score&quot;</span>,</div>
<div class="line"><span class="lineno">  945</span>        <span class="stringliteral">&quot;std_train_score&quot;</span>,</div>
<div class="line"><span class="lineno">  946</span>        <span class="stringliteral">&quot;mean_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno">  947</span>        <span class="stringliteral">&quot;std_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno">  948</span>        <span class="stringliteral">&quot;mean_score_time&quot;</span>,</div>
<div class="line"><span class="lineno">  949</span>        <span class="stringliteral">&quot;std_score_time&quot;</span>,</div>
<div class="line"><span class="lineno">  950</span>    )</div>
<div class="line"><span class="lineno">  951</span>    n_candidates = n_grid_points</div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>    search = GridSearchCV(</div>
<div class="line"><span class="lineno">  954</span>        SVC(), cv=n_splits, param_grid=params, return_train_score=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  955</span>    )</div>
<div class="line"><span class="lineno">  956</span>    search.fit(X, y)</div>
<div class="line"><span class="lineno">  957</span>    cv_results = search.cv_results_</div>
<div class="line"><span class="lineno">  958</span>    <span class="comment"># Check if score and timing are reasonable</span></div>
<div class="line"><span class="lineno">  959</span>    <span class="keyword">assert</span> all(cv_results[<span class="stringliteral">&quot;rank_test_score&quot;</span>] &gt;= 1)</div>
<div class="line"><span class="lineno">  960</span>    <span class="keyword">assert</span> (all(cv_results[k] &gt;= 0) <span class="keywordflow">for</span> k <span class="keywordflow">in</span> score_keys <span class="keywordflow">if</span> k != <span class="stringliteral">&quot;rank_test_score&quot;</span>)</div>
<div class="line"><span class="lineno">  961</span>    <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno">  962</span>        all(cv_results[k] &lt;= 1)</div>
<div class="line"><span class="lineno">  963</span>        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> score_keys</div>
<div class="line"><span class="lineno">  964</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;time&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> k <span class="keywordflow">and</span> k != <span class="stringliteral">&quot;rank_test_score&quot;</span></div>
<div class="line"><span class="lineno">  965</span>    )</div>
<div class="line"><span class="lineno">  966</span>    <span class="comment"># Check cv_results structure</span></div>
<div class="line"><span class="lineno">  967</span>    check_cv_results_array_types(search, param_keys, score_keys)</div>
<div class="line"><span class="lineno">  968</span>    check_cv_results_keys(cv_results, param_keys, score_keys, n_candidates)</div>
<div class="line"><span class="lineno">  969</span>    <span class="comment"># Check masking</span></div>
<div class="line"><span class="lineno">  970</span>    cv_results = search.cv_results_</div>
<div class="line"><span class="lineno">  971</span>    n_candidates = len(search.cv_results_[<span class="stringliteral">&quot;params&quot;</span>])</div>
<div class="line"><span class="lineno">  972</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno">  973</span>        (</div>
<div class="line"><span class="lineno">  974</span>            cv_results[<span class="stringliteral">&quot;param_C&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno">  975</span>            <span class="keywordflow">and</span> cv_results[<span class="stringliteral">&quot;param_gamma&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno">  976</span>            <span class="keywordflow">and</span> <span class="keywordflow">not</span> cv_results[<span class="stringliteral">&quot;param_degree&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno">  977</span>        )</div>
<div class="line"><span class="lineno">  978</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_candidates)</div>
<div class="line"><span class="lineno">  979</span>        <span class="keywordflow">if</span> cv_results[<span class="stringliteral">&quot;param_kernel&quot;</span>][i] == <span class="stringliteral">&quot;linear&quot;</span></div>
<div class="line"><span class="lineno">  980</span>    )</div>
<div class="line"><span class="lineno">  981</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno">  982</span>        (</div>
<div class="line"><span class="lineno">  983</span>            <span class="keywordflow">not</span> cv_results[<span class="stringliteral">&quot;param_C&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno">  984</span>            <span class="keywordflow">and</span> <span class="keywordflow">not</span> cv_results[<span class="stringliteral">&quot;param_gamma&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno">  985</span>            <span class="keywordflow">and</span> cv_results[<span class="stringliteral">&quot;param_degree&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno">  986</span>        )</div>
<div class="line"><span class="lineno">  987</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_candidates)</div>
<div class="line"><span class="lineno">  988</span>        <span class="keywordflow">if</span> cv_results[<span class="stringliteral">&quot;param_kernel&quot;</span>][i] == <span class="stringliteral">&quot;rbf&quot;</span></div>
<div class="line"><span class="lineno">  989</span>    )</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4793f758150a5dbe40e4f8892d970b0" name="ac4793f758150a5dbe40e4f8892d970b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4793f758150a5dbe40e4f8892d970b0">&#9670;&#160;</a></span>test_grid_search_cv_results_multimetric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_cv_results_multimetric </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1118</span><span class="keyword">def </span>test_grid_search_cv_results_multimetric():</div>
<div class="line"><span class="lineno"> 1119</span>    X, y = make_classification(n_samples=50, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 1120</span> </div>
<div class="line"><span class="lineno"> 1121</span>    n_splits = 3</div>
<div class="line"><span class="lineno"> 1122</span>    params = [</div>
<div class="line"><span class="lineno"> 1123</span>        dict(</div>
<div class="line"><span class="lineno"> 1124</span>            kernel=[</div>
<div class="line"><span class="lineno"> 1125</span>                <span class="stringliteral">&quot;rbf&quot;</span>,</div>
<div class="line"><span class="lineno"> 1126</span>            ],</div>
<div class="line"><span class="lineno"> 1127</span>            C=[1, 10],</div>
<div class="line"><span class="lineno"> 1128</span>            gamma=[0.1, 1],</div>
<div class="line"><span class="lineno"> 1129</span>        ),</div>
<div class="line"><span class="lineno"> 1130</span>        dict(</div>
<div class="line"><span class="lineno"> 1131</span>            kernel=[</div>
<div class="line"><span class="lineno"> 1132</span>                <span class="stringliteral">&quot;poly&quot;</span>,</div>
<div class="line"><span class="lineno"> 1133</span>            ],</div>
<div class="line"><span class="lineno"> 1134</span>            degree=[1, 2],</div>
<div class="line"><span class="lineno"> 1135</span>        ),</div>
<div class="line"><span class="lineno"> 1136</span>    ]</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>    grid_searches = []</div>
<div class="line"><span class="lineno"> 1139</span>    <span class="keywordflow">for</span> scoring <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno"> 1140</span>        {<span class="stringliteral">&quot;accuracy&quot;</span>: make_scorer(accuracy_score), <span class="stringliteral">&quot;recall&quot;</span>: make_scorer(recall_score)},</div>
<div class="line"><span class="lineno"> 1141</span>        <span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno"> 1142</span>        <span class="stringliteral">&quot;recall&quot;</span>,</div>
<div class="line"><span class="lineno"> 1143</span>    ):</div>
<div class="line"><span class="lineno"> 1144</span>        grid_search = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1145</span>            SVC(), cv=n_splits, param_grid=params, scoring=scoring, refit=<span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1146</span>        )</div>
<div class="line"><span class="lineno"> 1147</span>        grid_search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1148</span>        grid_searches.append(grid_search)</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>    compare_cv_results_multimetric_with_single(*grid_searches)</div>
<div class="line"><span class="lineno"> 1151</span> </div>
<div class="line"><span class="lineno"> 1152</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a92af600bc16cb575a70635040f28b775" name="a92af600bc16cb575a70635040f28b775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92af600bc16cb575a70635040f28b775">&#9670;&#160;</a></span>test_grid_search_cv_splits_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_cv_splits_consistency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1755</span><span class="keyword">def </span>test_grid_search_cv_splits_consistency():</div>
<div class="line"><span class="lineno"> 1756</span>    <span class="comment"># Check if a one time iterable is accepted as a cv parameter.</span></div>
<div class="line"><span class="lineno"> 1757</span>    n_samples = 100</div>
<div class="line"><span class="lineno"> 1758</span>    n_splits = 5</div>
<div class="line"><span class="lineno"> 1759</span>    X, y = make_classification(n_samples=n_samples, random_state=0)</div>
<div class="line"><span class="lineno"> 1760</span> </div>
<div class="line"><span class="lineno"> 1761</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1762</span>        LinearSVC(random_state=0),</div>
<div class="line"><span class="lineno"> 1763</span>        param_grid={<span class="stringliteral">&quot;C&quot;</span>: [0.1, 0.2, 0.3]},</div>
<div class="line"><span class="lineno"> 1764</span>        cv=OneTimeSplitter(n_splits=n_splits, n_samples=n_samples),</div>
<div class="line"><span class="lineno"> 1765</span>        return_train_score=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1766</span>    )</div>
<div class="line"><span class="lineno"> 1767</span>    gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 1768</span> </div>
<div class="line"><span class="lineno"> 1769</span>    gs2 = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1770</span>        LinearSVC(random_state=0),</div>
<div class="line"><span class="lineno"> 1771</span>        param_grid={<span class="stringliteral">&quot;C&quot;</span>: [0.1, 0.2, 0.3]},</div>
<div class="line"><span class="lineno"> 1772</span>        cv=KFold(n_splits=n_splits),</div>
<div class="line"><span class="lineno"> 1773</span>        return_train_score=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1774</span>    )</div>
<div class="line"><span class="lineno"> 1775</span>    gs2.fit(X, y)</div>
<div class="line"><span class="lineno"> 1776</span> </div>
<div class="line"><span class="lineno"> 1777</span>    <span class="comment"># Give generator as a cv parameter</span></div>
<div class="line"><span class="lineno"> 1778</span>    <span class="keyword">assert</span> isinstance(</div>
<div class="line"><span class="lineno"> 1779</span>        KFold(n_splits=n_splits, shuffle=<span class="keyword">True</span>, random_state=0).split(X, y),</div>
<div class="line"><span class="lineno"> 1780</span>        GeneratorType,</div>
<div class="line"><span class="lineno"> 1781</span>    )</div>
<div class="line"><span class="lineno"> 1782</span>    gs3 = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1783</span>        LinearSVC(random_state=0),</div>
<div class="line"><span class="lineno"> 1784</span>        param_grid={<span class="stringliteral">&quot;C&quot;</span>: [0.1, 0.2, 0.3]},</div>
<div class="line"><span class="lineno"> 1785</span>        cv=KFold(n_splits=n_splits, shuffle=<span class="keyword">True</span>, random_state=0).split(X, y),</div>
<div class="line"><span class="lineno"> 1786</span>        return_train_score=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1787</span>    )</div>
<div class="line"><span class="lineno"> 1788</span>    gs3.fit(X, y)</div>
<div class="line"><span class="lineno"> 1789</span> </div>
<div class="line"><span class="lineno"> 1790</span>    gs4 = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1791</span>        LinearSVC(random_state=0),</div>
<div class="line"><span class="lineno"> 1792</span>        param_grid={<span class="stringliteral">&quot;C&quot;</span>: [0.1, 0.2, 0.3]},</div>
<div class="line"><span class="lineno"> 1793</span>        cv=KFold(n_splits=n_splits, shuffle=<span class="keyword">True</span>, random_state=0),</div>
<div class="line"><span class="lineno"> 1794</span>        return_train_score=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1795</span>    )</div>
<div class="line"><span class="lineno"> 1796</span>    gs4.fit(X, y)</div>
<div class="line"><span class="lineno"> 1797</span> </div>
<div class="line"><span class="lineno"> 1798</span>    <span class="keyword">def </span>_pop_time_keys(cv_results):</div>
<div class="line"><span class="lineno"> 1799</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno"> 1800</span>            <span class="stringliteral">&quot;mean_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1801</span>            <span class="stringliteral">&quot;std_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1802</span>            <span class="stringliteral">&quot;mean_score_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1803</span>            <span class="stringliteral">&quot;std_score_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1804</span>        ):</div>
<div class="line"><span class="lineno"> 1805</span>            cv_results.pop(key)</div>
<div class="line"><span class="lineno"> 1806</span>        <span class="keywordflow">return</span> cv_results</div>
<div class="line"><span class="lineno"> 1807</span> </div>
<div class="line"><span class="lineno"> 1808</span>    <span class="comment"># Check if generators are supported as cv and</span></div>
<div class="line"><span class="lineno"> 1809</span>    <span class="comment"># that the splits are consistent</span></div>
<div class="line"><span class="lineno"> 1810</span>    np.testing.assert_equal(</div>
<div class="line"><span class="lineno"> 1811</span>        _pop_time_keys(gs3.cv_results_), _pop_time_keys(gs4.cv_results_)</div>
<div class="line"><span class="lineno"> 1812</span>    )</div>
<div class="line"><span class="lineno"> 1813</span> </div>
<div class="line"><span class="lineno"> 1814</span>    <span class="comment"># OneTimeSplitter is a non-re-entrant cv where split can be called only</span></div>
<div class="line"><span class="lineno"> 1815</span>    <span class="comment"># once if ``cv.split`` is called once per param setting in GridSearchCV.fit</span></div>
<div class="line"><span class="lineno"> 1816</span>    <span class="comment"># the 2nd and 3rd parameter will not be evaluated as no train/test indices</span></div>
<div class="line"><span class="lineno"> 1817</span>    <span class="comment"># will be generated for the 2nd and subsequent cv.split calls.</span></div>
<div class="line"><span class="lineno"> 1818</span>    <span class="comment"># This is a check to make sure cv.split is not called once per param</span></div>
<div class="line"><span class="lineno"> 1819</span>    <span class="comment"># setting.</span></div>
<div class="line"><span class="lineno"> 1820</span>    np.testing.assert_equal(</div>
<div class="line"><span class="lineno"> 1821</span>        {k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> gs.cv_results_.items() <span class="keywordflow">if</span> <span class="keywordflow">not</span> k.endswith(<span class="stringliteral">&quot;_time&quot;</span>)},</div>
<div class="line"><span class="lineno"> 1822</span>        {k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> gs2.cv_results_.items() <span class="keywordflow">if</span> <span class="keywordflow">not</span> k.endswith(<span class="stringliteral">&quot;_time&quot;</span>)},</div>
<div class="line"><span class="lineno"> 1823</span>    )</div>
<div class="line"><span class="lineno"> 1824</span> </div>
<div class="line"><span class="lineno"> 1825</span>    <span class="comment"># Check consistency of folds across the parameters</span></div>
<div class="line"><span class="lineno"> 1826</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1827</span>        LinearSVC(random_state=0),</div>
<div class="line"><span class="lineno"> 1828</span>        param_grid={<span class="stringliteral">&quot;C&quot;</span>: [0.1, 0.1, 0.2, 0.2]},</div>
<div class="line"><span class="lineno"> 1829</span>        cv=KFold(n_splits=n_splits, shuffle=<span class="keyword">True</span>),</div>
<div class="line"><span class="lineno"> 1830</span>        return_train_score=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1831</span>    )</div>
<div class="line"><span class="lineno"> 1832</span>    gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 1833</span> </div>
<div class="line"><span class="lineno"> 1834</span>    <span class="comment"># As the first two param settings (C=0.1) and the next two param</span></div>
<div class="line"><span class="lineno"> 1835</span>    <span class="comment"># settings (C=0.2) are same, the test and train scores must also be</span></div>
<div class="line"><span class="lineno"> 1836</span>    <span class="comment"># same as long as the same train/test indices are generated for all</span></div>
<div class="line"><span class="lineno"> 1837</span>    <span class="comment"># the cv splits, for both param setting</span></div>
<div class="line"><span class="lineno"> 1838</span>    <span class="keywordflow">for</span> score_type <span class="keywordflow">in</span> (<span class="stringliteral">&quot;train&quot;</span>, <span class="stringliteral">&quot;test&quot;</span>):</div>
<div class="line"><span class="lineno"> 1839</span>        per_param_scores = {}</div>
<div class="line"><span class="lineno"> 1840</span>        <span class="keywordflow">for</span> param_i <span class="keywordflow">in</span> range(4):</div>
<div class="line"><span class="lineno"> 1841</span>            per_param_scores[param_i] = [</div>
<div class="line"><span class="lineno"> 1842</span>                gs.cv_results_[<span class="stringliteral">&quot;split%d_%s_score&quot;</span> % (s, score_type)][param_i]</div>
<div class="line"><span class="lineno"> 1843</span>                <span class="keywordflow">for</span> s <span class="keywordflow">in</span> range(5)</div>
<div class="line"><span class="lineno"> 1844</span>            ]</div>
<div class="line"><span class="lineno"> 1845</span> </div>
<div class="line"><span class="lineno"> 1846</span>        assert_array_almost_equal(per_param_scores[0], per_param_scores[1])</div>
<div class="line"><span class="lineno"> 1847</span>        assert_array_almost_equal(per_param_scores[2], per_param_scores[3])</div>
<div class="line"><span class="lineno"> 1848</span> </div>
<div class="line"><span class="lineno"> 1849</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a786548d9c5e9ae1b240238b6f225d1b5" name="a786548d9c5e9ae1b240238b6f225d1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a786548d9c5e9ae1b240238b6f225d1b5">&#9670;&#160;</a></span>test_grid_search_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  410</span><span class="keyword">def </span>test_grid_search_error():</div>
<div class="line"><span class="lineno">  411</span>    <span class="comment"># Test that grid search will capture errors on data with different length</span></div>
<div class="line"><span class="lineno">  412</span>    X_, y_ = make_classification(n_samples=200, n_features=100, random_state=0)</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>    clf = LinearSVC()</div>
<div class="line"><span class="lineno">  415</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]})</div>
<div class="line"><span class="lineno">  416</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  417</span>        cv.fit(X_[:180], y_)</div>
<div class="line"><span class="lineno">  418</span> </div>
<div class="line"><span class="lineno">  419</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf2f277ce090ea3c6aa562532940eeb3" name="aaf2f277ce090ea3c6aa562532940eeb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf2f277ce090ea3c6aa562532940eeb3">&#9670;&#160;</a></span>test_grid_search_failing_classifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_failing_classifier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1551</span><span class="keyword">def </span>test_grid_search_failing_classifier():</div>
<div class="line"><span class="lineno"> 1552</span>    <span class="comment"># GridSearchCV with on_error != &#39;raise&#39;</span></div>
<div class="line"><span class="lineno"> 1553</span>    <span class="comment"># Ensures that a warning is raised and score reset where appropriate.</span></div>
<div class="line"><span class="lineno"> 1554</span> </div>
<div class="line"><span class="lineno"> 1555</span>    X, y = make_classification(n_samples=20, n_features=10, random_state=0)</div>
<div class="line"><span class="lineno"> 1556</span> </div>
<div class="line"><span class="lineno"> 1557</span>    clf = FailingClassifier()</div>
<div class="line"><span class="lineno"> 1558</span> </div>
<div class="line"><span class="lineno"> 1559</span>    <span class="comment"># refit=False because we only want to check that errors caused by fits</span></div>
<div class="line"><span class="lineno"> 1560</span>    <span class="comment"># to individual folds will be caught and warnings raised instead. If</span></div>
<div class="line"><span class="lineno"> 1561</span>    <span class="comment"># refit was done, then an exception would be raised on refit and not</span></div>
<div class="line"><span class="lineno"> 1562</span>    <span class="comment"># caught by grid_search (expected behavior), and this would cause an</span></div>
<div class="line"><span class="lineno"> 1563</span>    <span class="comment"># error in this test.</span></div>
<div class="line"><span class="lineno"> 1564</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1565</span>        clf,</div>
<div class="line"><span class="lineno"> 1566</span>        [{<span class="stringliteral">&quot;parameter&quot;</span>: [0, 1, 2]}],</div>
<div class="line"><span class="lineno"> 1567</span>        scoring=<span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno"> 1568</span>        refit=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1569</span>        error_score=0.0,</div>
<div class="line"><span class="lineno"> 1570</span>    )</div>
<div class="line"><span class="lineno"> 1571</span> </div>
<div class="line"><span class="lineno"> 1572</span>    warning_message = re.compile(</div>
<div class="line"><span class="lineno"> 1573</span>        <span class="stringliteral">&quot;5 fits failed.+total of 15.+The score on these&quot;</span></div>
<div class="line"><span class="lineno"> 1574</span>        <span class="stringliteral">r&quot; train-test partitions for these parameters will be set to 0\.0.+&quot;</span></div>
<div class="line"><span class="lineno"> 1575</span>        <span class="stringliteral">&quot;5 fits failed with the following error.+ValueError.+Failing classifier failed&quot;</span></div>
<div class="line"><span class="lineno"> 1576</span>        <span class="stringliteral">&quot; as required&quot;</span>,</div>
<div class="line"><span class="lineno"> 1577</span>        flags=re.DOTALL,</div>
<div class="line"><span class="lineno"> 1578</span>    )</div>
<div class="line"><span class="lineno"> 1579</span>    <span class="keyword">with</span> pytest.warns(FitFailedWarning, match=warning_message):</div>
<div class="line"><span class="lineno"> 1580</span>        gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 1581</span>    n_candidates = len(gs.cv_results_[<span class="stringliteral">&quot;params&quot;</span>])</div>
<div class="line"><span class="lineno"> 1582</span> </div>
<div class="line"><span class="lineno"> 1583</span>    <span class="comment"># Ensure that grid scores were set to zero as required for those fits</span></div>
<div class="line"><span class="lineno"> 1584</span>    <span class="comment"># that are expected to fail.</span></div>
<div class="line"><span class="lineno"> 1585</span>    <span class="keyword">def </span>get_cand_scores(i):</div>
<div class="line"><span class="lineno"> 1586</span>        <span class="keywordflow">return</span> np.array(</div>
<div class="line"><span class="lineno"> 1587</span>            [gs.cv_results_[<span class="stringliteral">&quot;split%d_test_score&quot;</span> % s][i] <span class="keywordflow">for</span> s <span class="keywordflow">in</span> range(gs.n_splits_)]</div>
<div class="line"><span class="lineno"> 1588</span>        )</div>
<div class="line"><span class="lineno"> 1589</span> </div>
<div class="line"><span class="lineno"> 1590</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno"> 1591</span>        (</div>
<div class="line"><span class="lineno"> 1592</span>            np.all(get_cand_scores(cand_i) == 0.0)</div>
<div class="line"><span class="lineno"> 1593</span>            <span class="keywordflow">for</span> cand_i <span class="keywordflow">in</span> range(n_candidates)</div>
<div class="line"><span class="lineno"> 1594</span>            <span class="keywordflow">if</span> gs.cv_results_[<span class="stringliteral">&quot;param_parameter&quot;</span>][cand_i]</div>
<div class="line"><span class="lineno"> 1595</span>            == FailingClassifier.FAILING_PARAMETER</div>
<div class="line"><span class="lineno"> 1596</span>        )</div>
<div class="line"><span class="lineno"> 1597</span>    )</div>
<div class="line"><span class="lineno"> 1598</span> </div>
<div class="line"><span class="lineno"> 1599</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1600</span>        clf,</div>
<div class="line"><span class="lineno"> 1601</span>        [{<span class="stringliteral">&quot;parameter&quot;</span>: [0, 1, 2]}],</div>
<div class="line"><span class="lineno"> 1602</span>        scoring=<span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno"> 1603</span>        refit=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1604</span>        error_score=float(<span class="stringliteral">&quot;nan&quot;</span>),</div>
<div class="line"><span class="lineno"> 1605</span>    )</div>
<div class="line"><span class="lineno"> 1606</span>    warning_message = re.compile(</div>
<div class="line"><span class="lineno"> 1607</span>        <span class="stringliteral">&quot;5 fits failed.+total of 15.+The score on these&quot;</span></div>
<div class="line"><span class="lineno"> 1608</span>        <span class="stringliteral">r&quot; train-test partitions for these parameters will be set to nan.+&quot;</span></div>
<div class="line"><span class="lineno"> 1609</span>        <span class="stringliteral">&quot;5 fits failed with the following error.+ValueError.+Failing classifier failed&quot;</span></div>
<div class="line"><span class="lineno"> 1610</span>        <span class="stringliteral">&quot; as required&quot;</span>,</div>
<div class="line"><span class="lineno"> 1611</span>        flags=re.DOTALL,</div>
<div class="line"><span class="lineno"> 1612</span>    )</div>
<div class="line"><span class="lineno"> 1613</span>    <span class="keyword">with</span> pytest.warns(FitFailedWarning, match=warning_message):</div>
<div class="line"><span class="lineno"> 1614</span>        gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 1615</span>    n_candidates = len(gs.cv_results_[<span class="stringliteral">&quot;params&quot;</span>])</div>
<div class="line"><span class="lineno"> 1616</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno"> 1617</span>        np.all(np.isnan(get_cand_scores(cand_i)))</div>
<div class="line"><span class="lineno"> 1618</span>        <span class="keywordflow">for</span> cand_i <span class="keywordflow">in</span> range(n_candidates)</div>
<div class="line"><span class="lineno"> 1619</span>        <span class="keywordflow">if</span> gs.cv_results_[<span class="stringliteral">&quot;param_parameter&quot;</span>][cand_i]</div>
<div class="line"><span class="lineno"> 1620</span>        == FailingClassifier.FAILING_PARAMETER</div>
<div class="line"><span class="lineno"> 1621</span>    )</div>
<div class="line"><span class="lineno"> 1622</span> </div>
<div class="line"><span class="lineno"> 1623</span>    ranks = gs.cv_results_[<span class="stringliteral">&quot;rank_test_score&quot;</span>]</div>
<div class="line"><span class="lineno"> 1624</span> </div>
<div class="line"><span class="lineno"> 1625</span>    <span class="comment"># Check that succeeded estimators have lower ranks</span></div>
<div class="line"><span class="lineno"> 1626</span>    <span class="keyword">assert</span> ranks[0] &lt;= 2 <span class="keywordflow">and</span> ranks[1] &lt;= 2</div>
<div class="line"><span class="lineno"> 1627</span>    <span class="comment"># Check that failed estimator has the highest rank</span></div>
<div class="line"><span class="lineno"> 1628</span>    <span class="keyword">assert</span> ranks[clf.FAILING_PARAMETER] == 3</div>
<div class="line"><span class="lineno"> 1629</span>    <span class="keyword">assert</span> gs.best_index_ != clf.FAILING_PARAMETER</div>
<div class="line"><span class="lineno"> 1630</span> </div>
<div class="line"><span class="lineno"> 1631</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a102f51ecb468884add8fe82656b525f1" name="a102f51ecb468884add8fe82656b525f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102f51ecb468884add8fe82656b525f1">&#9670;&#160;</a></span>test_grid_search_failing_classifier_raise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_failing_classifier_raise </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1653</span><span class="keyword">def </span>test_grid_search_failing_classifier_raise():</div>
<div class="line"><span class="lineno"> 1654</span>    <span class="comment"># GridSearchCV with on_error == &#39;raise&#39; raises the error</span></div>
<div class="line"><span class="lineno"> 1655</span> </div>
<div class="line"><span class="lineno"> 1656</span>    X, y = make_classification(n_samples=20, n_features=10, random_state=0)</div>
<div class="line"><span class="lineno"> 1657</span> </div>
<div class="line"><span class="lineno"> 1658</span>    clf = FailingClassifier()</div>
<div class="line"><span class="lineno"> 1659</span> </div>
<div class="line"><span class="lineno"> 1660</span>    <span class="comment"># refit=False because we want to test the behaviour of the grid search part</span></div>
<div class="line"><span class="lineno"> 1661</span>    gs = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1662</span>        clf,</div>
<div class="line"><span class="lineno"> 1663</span>        [{<span class="stringliteral">&quot;parameter&quot;</span>: [0, 1, 2]}],</div>
<div class="line"><span class="lineno"> 1664</span>        scoring=<span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno"> 1665</span>        refit=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1666</span>        error_score=<span class="stringliteral">&quot;raise&quot;</span>,</div>
<div class="line"><span class="lineno"> 1667</span>    )</div>
<div class="line"><span class="lineno"> 1668</span> </div>
<div class="line"><span class="lineno"> 1669</span>    <span class="comment"># FailingClassifier issues a ValueError so this is what we look for.</span></div>
<div class="line"><span class="lineno"> 1670</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 1671</span>        gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 1672</span> </div>
<div class="line"><span class="lineno"> 1673</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a97e58dc53e0a1c7833bf8f58c1660e7e" name="a97e58dc53e0a1c7833bf8f58c1660e7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97e58dc53e0a1c7833bf8f58c1660e7e">&#9670;&#160;</a></span>test_grid_search_groups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_groups </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  303</span><span class="keyword">def </span>test_grid_search_groups():</div>
<div class="line"><span class="lineno">  304</span>    <span class="comment"># Check if ValueError (when groups is None) propagates to GridSearchCV</span></div>
<div class="line"><span class="lineno">  305</span>    <span class="comment"># And also check if groups is correctly passed to the cv object</span></div>
<div class="line"><span class="lineno">  306</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    X, y = make_classification(n_samples=15, n_classes=2, random_state=0)</div>
<div class="line"><span class="lineno">  309</span>    groups = rng.randint(0, 3, 15)</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno">  312</span>    grid = {<span class="stringliteral">&quot;C&quot;</span>: [1]}</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>    group_cvs = [</div>
<div class="line"><span class="lineno">  315</span>        LeaveOneGroupOut(),</div>
<div class="line"><span class="lineno">  316</span>        LeavePGroupsOut(2),</div>
<div class="line"><span class="lineno">  317</span>        GroupKFold(n_splits=3),</div>
<div class="line"><span class="lineno">  318</span>        GroupShuffleSplit(),</div>
<div class="line"><span class="lineno">  319</span>    ]</div>
<div class="line"><span class="lineno">  320</span>    error_msg = <span class="stringliteral">&quot;The &#39;groups&#39; parameter should not be None.&quot;</span></div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">for</span> cv <span class="keywordflow">in</span> group_cvs:</div>
<div class="line"><span class="lineno">  322</span>        gs = GridSearchCV(clf, grid, cv=cv)</div>
<div class="line"><span class="lineno">  323</span>        <span class="keyword">with</span> pytest.raises(ValueError, match=error_msg):</div>
<div class="line"><span class="lineno">  324</span>            gs.fit(X, y)</div>
<div class="line"><span class="lineno">  325</span>        gs.fit(X, y, groups=groups)</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    non_group_cvs = [StratifiedKFold(), StratifiedShuffleSplit()]</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">for</span> cv <span class="keywordflow">in</span> non_group_cvs:</div>
<div class="line"><span class="lineno">  329</span>        gs = GridSearchCV(clf, grid, cv=cv)</div>
<div class="line"><span class="lineno">  330</span>        <span class="comment"># Should not raise an error</span></div>
<div class="line"><span class="lineno">  331</span>        gs.fit(X, y)</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a417d949b695a171f22c2318f4abec26e" name="a417d949b695a171f22c2318f4abec26e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a417d949b695a171f22c2318f4abec26e">&#9670;&#160;</a></span>test_grid_search_no_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_no_score </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  251</span><span class="keyword">def </span>test_grid_search_no_score():</div>
<div class="line"><span class="lineno">  252</span>    <span class="comment"># Test grid-search on classifier that has no score function.</span></div>
<div class="line"><span class="lineno">  253</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno">  254</span>    X, y = make_blobs(random_state=0, centers=2)</div>
<div class="line"><span class="lineno">  255</span>    Cs = [0.1, 1, 10]</div>
<div class="line"><span class="lineno">  256</span>    clf_no_score = LinearSVCNoScore(random_state=0)</div>
<div class="line"><span class="lineno">  257</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: Cs}, scoring=<span class="stringliteral">&quot;accuracy&quot;</span>)</div>
<div class="line"><span class="lineno">  258</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    grid_search_no_score = GridSearchCV(clf_no_score, {<span class="stringliteral">&quot;C&quot;</span>: Cs}, scoring=<span class="stringliteral">&quot;accuracy&quot;</span>)</div>
<div class="line"><span class="lineno">  261</span>    <span class="comment"># smoketest grid search</span></div>
<div class="line"><span class="lineno">  262</span>    grid_search_no_score.fit(X, y)</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>    <span class="comment"># check that best params are equal</span></div>
<div class="line"><span class="lineno">  265</span>    <span class="keyword">assert</span> grid_search_no_score.best_params_ == grid_search.best_params_</div>
<div class="line"><span class="lineno">  266</span>    <span class="comment"># check that we can call score and that it gives the correct result</span></div>
<div class="line"><span class="lineno">  267</span>    <span class="keyword">assert</span> grid_search.score(X, y) == grid_search_no_score.score(X, y)</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>    <span class="comment"># giving no scoring function raises an error</span></div>
<div class="line"><span class="lineno">  270</span>    grid_search_no_score = GridSearchCV(clf_no_score, {<span class="stringliteral">&quot;C&quot;</span>: Cs})</div>
<div class="line"><span class="lineno">  271</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=<span class="stringliteral">&quot;no scoring&quot;</span>):</div>
<div class="line"><span class="lineno">  272</span>        grid_search_no_score.fit([[1]])</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a197fee29136bf8f6d11a6e03974e3dd7" name="a197fee29136bf8f6d11a6e03974e3dd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a197fee29136bf8f6d11a6e03974e3dd7">&#9670;&#160;</a></span>test_grid_search_one_grid_point()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_one_grid_point </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  420</span><span class="keyword">def </span>test_grid_search_one_grid_point():</div>
<div class="line"><span class="lineno">  421</span>    X_, y_ = make_classification(n_samples=200, n_features=100, random_state=0)</div>
<div class="line"><span class="lineno">  422</span>    param_dict = {<span class="stringliteral">&quot;C&quot;</span>: [1.0], <span class="stringliteral">&quot;kernel&quot;</span>: [<span class="stringliteral">&quot;rbf&quot;</span>], <span class="stringliteral">&quot;gamma&quot;</span>: [0.1]}</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>    clf = SVC(gamma=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  425</span>    cv = GridSearchCV(clf, param_dict)</div>
<div class="line"><span class="lineno">  426</span>    cv.fit(X_, y_)</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>    clf = SVC(C=1.0, kernel=<span class="stringliteral">&quot;rbf&quot;</span>, gamma=0.1)</div>
<div class="line"><span class="lineno">  429</span>    clf.fit(X_, y_)</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>    assert_array_equal(clf.dual_coef_, cv.best_estimator_.dual_coef_)</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="affa2b82bb6a5c030461399506c8d667d" name="affa2b82bb6a5c030461399506c8d667d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affa2b82bb6a5c030461399506c8d667d">&#9670;&#160;</a></span>test_grid_search_pipeline_steps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_pipeline_steps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  213</span><span class="keyword">def </span>test_grid_search_pipeline_steps():</div>
<div class="line"><span class="lineno">  214</span>    <span class="comment"># check that parameters that are estimators are cloned before fitting</span></div>
<div class="line"><span class="lineno">  215</span>    pipe = Pipeline([(<span class="stringliteral">&quot;regressor&quot;</span>, LinearRegression())])</div>
<div class="line"><span class="lineno">  216</span>    param_grid = {<span class="stringliteral">&quot;regressor&quot;</span>: [LinearRegression(), Ridge()]}</div>
<div class="line"><span class="lineno">  217</span>    grid_search = GridSearchCV(pipe, param_grid, cv=2)</div>
<div class="line"><span class="lineno">  218</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  219</span>    regressor_results = grid_search.cv_results_[<span class="stringliteral">&quot;param_regressor&quot;</span>]</div>
<div class="line"><span class="lineno">  220</span>    <span class="keyword">assert</span> isinstance(regressor_results[0], LinearRegression)</div>
<div class="line"><span class="lineno">  221</span>    <span class="keyword">assert</span> isinstance(regressor_results[1], Ridge)</div>
<div class="line"><span class="lineno">  222</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(regressor_results[0], <span class="stringliteral">&quot;coef_&quot;</span>)</div>
<div class="line"><span class="lineno">  223</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(regressor_results[1], <span class="stringliteral">&quot;coef_&quot;</span>)</div>
<div class="line"><span class="lineno">  224</span>    <span class="keyword">assert</span> regressor_results[0] <span class="keywordflow">is</span> <span class="keywordflow">not</span> grid_search.best_estimator_</div>
<div class="line"><span class="lineno">  225</span>    <span class="keyword">assert</span> regressor_results[1] <span class="keywordflow">is</span> <span class="keywordflow">not</span> grid_search.best_estimator_</div>
<div class="line"><span class="lineno">  226</span>    <span class="comment"># check that we didn&#39;t modify the parameter grid that was passed</span></div>
<div class="line"><span class="lineno">  227</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(param_grid[<span class="stringliteral">&quot;regressor&quot;</span>][0], <span class="stringliteral">&quot;coef_&quot;</span>)</div>
<div class="line"><span class="lineno">  228</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(param_grid[<span class="stringliteral">&quot;regressor&quot;</span>][1], <span class="stringliteral">&quot;coef_&quot;</span>)</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span><span class="preprocessor">@pytest.mark.parametrize(&quot;SearchCV&quot;, [GridSearchCV, RandomizedSearchCV])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6dbc946ec1523ca1d78ab8d5bf9dfdf3" name="a6dbc946ec1523ca1d78ab8d5bf9dfdf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dbc946ec1523ca1d78ab8d5bf9dfdf3">&#9670;&#160;</a></span>test_grid_search_precomputed_kernel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_precomputed_kernel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  540</span><span class="keyword">def </span>test_grid_search_precomputed_kernel():</div>
<div class="line"><span class="lineno">  541</span>    <span class="comment"># Test that grid search works when the input features are given in the</span></div>
<div class="line"><span class="lineno">  542</span>    <span class="comment"># form of a precomputed kernel matrix</span></div>
<div class="line"><span class="lineno">  543</span>    X_, y_ = make_classification(n_samples=200, n_features=100, random_state=0)</div>
<div class="line"><span class="lineno">  544</span> </div>
<div class="line"><span class="lineno">  545</span>    <span class="comment"># compute the training kernel matrix corresponding to the linear kernel</span></div>
<div class="line"><span class="lineno">  546</span>    K_train = np.dot(X_[:180], X_[:180].T)</div>
<div class="line"><span class="lineno">  547</span>    y_train = y_[:180]</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>    clf = SVC(kernel=<span class="stringliteral">&quot;precomputed&quot;</span>)</div>
<div class="line"><span class="lineno">  550</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]})</div>
<div class="line"><span class="lineno">  551</span>    cv.fit(K_train, y_train)</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>    <span class="keyword">assert</span> cv.best_score_ &gt;= 0</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>    <span class="comment"># compute the test kernel matrix</span></div>
<div class="line"><span class="lineno">  556</span>    K_test = np.dot(X_[180:], X_[:180].T)</div>
<div class="line"><span class="lineno">  557</span>    y_test = y_[180:]</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>    y_pred = cv.predict(K_test)</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span>    <span class="keyword">assert</span> np.mean(y_pred == y_test) &gt;= 0</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>    <span class="comment"># test error is raised when the precomputed kernel is not array-like</span></div>
<div class="line"><span class="lineno">  564</span>    <span class="comment"># or sparse</span></div>
<div class="line"><span class="lineno">  565</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  566</span>        cv.fit(K_train.tolist(), y_train)</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a24e5bb9ad77c795218214fb8fd2209d5" name="a24e5bb9ad77c795218214fb8fd2209d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24e5bb9ad77c795218214fb8fd2209d5">&#9670;&#160;</a></span>test_grid_search_precomputed_kernel_error_nonsquare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_precomputed_kernel_error_nonsquare </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  569</span><span class="keyword">def </span>test_grid_search_precomputed_kernel_error_nonsquare():</div>
<div class="line"><span class="lineno">  570</span>    <span class="comment"># Test that grid search returns an error with a non-square precomputed</span></div>
<div class="line"><span class="lineno">  571</span>    <span class="comment"># training kernel matrix</span></div>
<div class="line"><span class="lineno">  572</span>    K_train = np.zeros((10, 20))</div>
<div class="line"><span class="lineno">  573</span>    y_train = np.ones((10,))</div>
<div class="line"><span class="lineno">  574</span>    clf = SVC(kernel=<span class="stringliteral">&quot;precomputed&quot;</span>)</div>
<div class="line"><span class="lineno">  575</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]})</div>
<div class="line"><span class="lineno">  576</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">  577</span>        cv.fit(K_train, y_train)</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a64c1822cfb1cfef00f6a6c3665bd1491" name="a64c1822cfb1cfef00f6a6c3665bd1491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c1822cfb1cfef00f6a6c3665bd1491">&#9670;&#160;</a></span>test_grid_search_score_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_score_method </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  275</span><span class="keyword">def </span>test_grid_search_score_method():</div>
<div class="line"><span class="lineno">  276</span>    X, y = make_classification(n_samples=100, n_classes=2, flip_y=0.2, random_state=0)</div>
<div class="line"><span class="lineno">  277</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno">  278</span>    grid = {<span class="stringliteral">&quot;C&quot;</span>: [0.1]}</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>    search_no_scoring = GridSearchCV(clf, grid, scoring=<span class="keywordtype">None</span>).fit(X, y)</div>
<div class="line"><span class="lineno">  281</span>    search_accuracy = GridSearchCV(clf, grid, scoring=<span class="stringliteral">&quot;accuracy&quot;</span>).fit(X, y)</div>
<div class="line"><span class="lineno">  282</span>    search_no_score_method_auc = GridSearchCV(</div>
<div class="line"><span class="lineno">  283</span>        LinearSVCNoScore(), grid, scoring=<span class="stringliteral">&quot;roc_auc&quot;</span></div>
<div class="line"><span class="lineno">  284</span>    ).fit(X, y)</div>
<div class="line"><span class="lineno">  285</span>    search_auc = GridSearchCV(clf, grid, scoring=<span class="stringliteral">&quot;roc_auc&quot;</span>).fit(X, y)</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>    <span class="comment"># Check warning only occurs in situation where behavior changed:</span></div>
<div class="line"><span class="lineno">  288</span>    <span class="comment"># estimator requires score method to compete with scoring parameter</span></div>
<div class="line"><span class="lineno">  289</span>    score_no_scoring = search_no_scoring.score(X, y)</div>
<div class="line"><span class="lineno">  290</span>    score_accuracy = search_accuracy.score(X, y)</div>
<div class="line"><span class="lineno">  291</span>    score_no_score_auc = search_no_score_method_auc.score(X, y)</div>
<div class="line"><span class="lineno">  292</span>    score_auc = search_auc.score(X, y)</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    <span class="comment"># ensure the test is sane</span></div>
<div class="line"><span class="lineno">  295</span>    <span class="keyword">assert</span> score_auc &lt; 1.0</div>
<div class="line"><span class="lineno">  296</span>    <span class="keyword">assert</span> score_accuracy &lt; 1.0</div>
<div class="line"><span class="lineno">  297</span>    <span class="keyword">assert</span> score_auc != score_accuracy</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>    assert_almost_equal(score_accuracy, score_no_scoring)</div>
<div class="line"><span class="lineno">  300</span>    assert_almost_equal(score_auc, score_no_score_auc)</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaec34611638a315fa3989aeb84d225e6" name="aaec34611638a315fa3989aeb84d225e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec34611638a315fa3989aeb84d225e6">&#9670;&#160;</a></span>test_grid_search_sparse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_sparse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  483</span><span class="keyword">def </span>test_grid_search_sparse():</div>
<div class="line"><span class="lineno">  484</span>    <span class="comment"># Test that grid search works with both dense and sparse matrices</span></div>
<div class="line"><span class="lineno">  485</span>    X_, y_ = make_classification(n_samples=200, n_features=100, random_state=0)</div>
<div class="line"><span class="lineno">  486</span> </div>
<div class="line"><span class="lineno">  487</span>    clf = LinearSVC()</div>
<div class="line"><span class="lineno">  488</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]})</div>
<div class="line"><span class="lineno">  489</span>    cv.fit(X_[:180], y_[:180])</div>
<div class="line"><span class="lineno">  490</span>    y_pred = cv.predict(X_[180:])</div>
<div class="line"><span class="lineno">  491</span>    C = cv.best_estimator_.C</div>
<div class="line"><span class="lineno">  492</span> </div>
<div class="line"><span class="lineno">  493</span>    X_ = sp.csr_matrix(X_)</div>
<div class="line"><span class="lineno">  494</span>    clf = LinearSVC()</div>
<div class="line"><span class="lineno">  495</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]})</div>
<div class="line"><span class="lineno">  496</span>    cv.fit(X_[:180].tocoo(), y_[:180])</div>
<div class="line"><span class="lineno">  497</span>    y_pred2 = cv.predict(X_[180:])</div>
<div class="line"><span class="lineno">  498</span>    C2 = cv.best_estimator_.C</div>
<div class="line"><span class="lineno">  499</span> </div>
<div class="line"><span class="lineno">  500</span>    <span class="keyword">assert</span> np.mean(y_pred == y_pred2) &gt;= 0.9</div>
<div class="line"><span class="lineno">  501</span>    <span class="keyword">assert</span> C == C2</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7cb90032c8dc6870e068fbc569bf14c4" name="a7cb90032c8dc6870e068fbc569bf14c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb90032c8dc6870e068fbc569bf14c4">&#9670;&#160;</a></span>test_grid_search_sparse_scoring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_sparse_scoring </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  504</span><span class="keyword">def </span>test_grid_search_sparse_scoring():</div>
<div class="line"><span class="lineno">  505</span>    X_, y_ = make_classification(n_samples=200, n_features=100, random_state=0)</div>
<div class="line"><span class="lineno">  506</span> </div>
<div class="line"><span class="lineno">  507</span>    clf = LinearSVC()</div>
<div class="line"><span class="lineno">  508</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]}, scoring=<span class="stringliteral">&quot;f1&quot;</span>)</div>
<div class="line"><span class="lineno">  509</span>    cv.fit(X_[:180], y_[:180])</div>
<div class="line"><span class="lineno">  510</span>    y_pred = cv.predict(X_[180:])</div>
<div class="line"><span class="lineno">  511</span>    C = cv.best_estimator_.C</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    X_ = sp.csr_matrix(X_)</div>
<div class="line"><span class="lineno">  514</span>    clf = LinearSVC()</div>
<div class="line"><span class="lineno">  515</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]}, scoring=<span class="stringliteral">&quot;f1&quot;</span>)</div>
<div class="line"><span class="lineno">  516</span>    cv.fit(X_[:180], y_[:180])</div>
<div class="line"><span class="lineno">  517</span>    y_pred2 = cv.predict(X_[180:])</div>
<div class="line"><span class="lineno">  518</span>    C2 = cv.best_estimator_.C</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>    assert_array_equal(y_pred, y_pred2)</div>
<div class="line"><span class="lineno">  521</span>    <span class="keyword">assert</span> C == C2</div>
<div class="line"><span class="lineno">  522</span>    <span class="comment"># Smoke test the score</span></div>
<div class="line"><span class="lineno">  523</span>    <span class="comment"># np.testing.assert_allclose(f1_score(cv.predict(X_[:180]), y[:180]),</span></div>
<div class="line"><span class="lineno">  524</span>    <span class="comment">#                            cv.score(X_[:180], y[:180]))</span></div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>    <span class="comment"># test loss where greater is worse</span></div>
<div class="line"><span class="lineno">  527</span>    <span class="keyword">def </span>f1_loss(y_true_, y_pred_):</div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordflow">return</span> -f1_score(y_true_, y_pred_)</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    F1Loss = make_scorer(f1_loss, greater_is_better=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  531</span>    cv = GridSearchCV(clf, {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1.0]}, scoring=F1Loss)</div>
<div class="line"><span class="lineno">  532</span>    cv.fit(X_[:180], y_[:180])</div>
<div class="line"><span class="lineno">  533</span>    y_pred3 = cv.predict(X_[180:])</div>
<div class="line"><span class="lineno">  534</span>    C3 = cv.best_estimator_.C</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>    <span class="keyword">assert</span> C == C3</div>
<div class="line"><span class="lineno">  537</span>    assert_array_equal(y_pred, y_pred3)</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac22892af246ca43c6f20f713f886b38b" name="ac22892af246ca43c6f20f713f886b38b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac22892af246ca43c6f20f713f886b38b">&#9670;&#160;</a></span>test_grid_search_when_param_grid_includes_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_when_param_grid_includes_range </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  434</span><span class="keyword">def </span>test_grid_search_when_param_grid_includes_range():</div>
<div class="line"><span class="lineno">  435</span>    <span class="comment"># Test that the best estimator contains the right value for foo_param</span></div>
<div class="line"><span class="lineno">  436</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno">  437</span>    grid_search = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  438</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: range(1, 4)}, cv=3)</div>
<div class="line"><span class="lineno">  439</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  440</span>    <span class="keyword">assert</span> grid_search.best_estimator_.foo_param == 2</div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f250058a14e40b593d1231e9c3f6560" name="a2f250058a14e40b593d1231e9c3f6560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f250058a14e40b593d1231e9c3f6560">&#9670;&#160;</a></span>test_grid_search_with_multioutput_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_grid_search_with_multioutput_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1463</span><span class="keyword">def </span>test_grid_search_with_multioutput_data():</div>
<div class="line"><span class="lineno"> 1464</span>    <span class="comment"># Test search with multi-output estimator</span></div>
<div class="line"><span class="lineno"> 1465</span> </div>
<div class="line"><span class="lineno"> 1466</span>    X, y = make_multilabel_classification(return_indicator=<span class="keyword">True</span>, random_state=0)</div>
<div class="line"><span class="lineno"> 1467</span> </div>
<div class="line"><span class="lineno"> 1468</span>    est_parameters = {<span class="stringliteral">&quot;max_depth&quot;</span>: [1, 2, 3, 4]}</div>
<div class="line"><span class="lineno"> 1469</span>    cv = KFold()</div>
<div class="line"><span class="lineno"> 1470</span> </div>
<div class="line"><span class="lineno"> 1471</span>    estimators = [</div>
<div class="line"><span class="lineno"> 1472</span>        DecisionTreeRegressor(random_state=0),</div>
<div class="line"><span class="lineno"> 1473</span>        DecisionTreeClassifier(random_state=0),</div>
<div class="line"><span class="lineno"> 1474</span>    ]</div>
<div class="line"><span class="lineno"> 1475</span> </div>
<div class="line"><span class="lineno"> 1476</span>    <span class="comment"># Test with grid search cv</span></div>
<div class="line"><span class="lineno"> 1477</span>    <span class="keywordflow">for</span> est <span class="keywordflow">in</span> estimators:</div>
<div class="line"><span class="lineno"> 1478</span>        grid_search = GridSearchCV(est, est_parameters, cv=cv)</div>
<div class="line"><span class="lineno"> 1479</span>        grid_search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1480</span>        res_params = grid_search.cv_results_[<span class="stringliteral">&quot;params&quot;</span>]</div>
<div class="line"><span class="lineno"> 1481</span>        <span class="keywordflow">for</span> cand_i <span class="keywordflow">in</span> range(len(res_params)):</div>
<div class="line"><span class="lineno"> 1482</span>            est.set_params(**res_params[cand_i])</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>            <span class="keywordflow">for</span> i, (train, test) <span class="keywordflow">in</span> enumerate(cv.split(X, y)):</div>
<div class="line"><span class="lineno"> 1485</span>                est.fit(X[train], y[train])</div>
<div class="line"><span class="lineno"> 1486</span>                correct_score = est.score(X[test], y[test])</div>
<div class="line"><span class="lineno"> 1487</span>                assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1488</span>                    correct_score,</div>
<div class="line"><span class="lineno"> 1489</span>                    grid_search.cv_results_[<span class="stringliteral">&quot;split%d_test_score&quot;</span> % i][cand_i],</div>
<div class="line"><span class="lineno"> 1490</span>                )</div>
<div class="line"><span class="lineno"> 1491</span> </div>
<div class="line"><span class="lineno"> 1492</span>    <span class="comment"># Test with a randomized search</span></div>
<div class="line"><span class="lineno"> 1493</span>    <span class="keywordflow">for</span> est <span class="keywordflow">in</span> estimators:</div>
<div class="line"><span class="lineno"> 1494</span>        random_search = RandomizedSearchCV(est, est_parameters, cv=cv, n_iter=3)</div>
<div class="line"><span class="lineno"> 1495</span>        random_search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1496</span>        res_params = random_search.cv_results_[<span class="stringliteral">&quot;params&quot;</span>]</div>
<div class="line"><span class="lineno"> 1497</span>        <span class="keywordflow">for</span> cand_i <span class="keywordflow">in</span> range(len(res_params)):</div>
<div class="line"><span class="lineno"> 1498</span>            est.set_params(**res_params[cand_i])</div>
<div class="line"><span class="lineno"> 1499</span> </div>
<div class="line"><span class="lineno"> 1500</span>            <span class="keywordflow">for</span> i, (train, test) <span class="keywordflow">in</span> enumerate(cv.split(X, y)):</div>
<div class="line"><span class="lineno"> 1501</span>                est.fit(X[train], y[train])</div>
<div class="line"><span class="lineno"> 1502</span>                correct_score = est.score(X[test], y[test])</div>
<div class="line"><span class="lineno"> 1503</span>                assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1504</span>                    correct_score,</div>
<div class="line"><span class="lineno"> 1505</span>                    random_search.cv_results_[<span class="stringliteral">&quot;split%d_test_score&quot;</span> % i][cand_i],</div>
<div class="line"><span class="lineno"> 1506</span>                )</div>
<div class="line"><span class="lineno"> 1507</span> </div>
<div class="line"><span class="lineno"> 1508</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af26112317c24a5efdedb179431a392de" name="af26112317c24a5efdedb179431a392de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af26112317c24a5efdedb179431a392de">&#9670;&#160;</a></span>test_gridsearch_nd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_gridsearch_nd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  732</span><span class="keyword">def </span>test_gridsearch_nd():</div>
<div class="line"><span class="lineno">  733</span>    <span class="comment"># Pass X as list in GridSearchCV</span></div>
<div class="line"><span class="lineno">  734</span>    X_4d = np.arange(10 * 5 * 3 * 2).reshape(10, 5, 3, 2)</div>
<div class="line"><span class="lineno">  735</span>    y_3d = np.arange(10 * 7 * 11).reshape(10, 7, 11)</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>    <span class="keyword">def </span>check_X(x):</div>
<div class="line"><span class="lineno">  738</span>        <span class="keywordflow">return</span> x.shape[1:] == (5, 3, 2)</div>
<div class="line"><span class="lineno">  739</span> </div>
<div class="line"><span class="lineno">  740</span>    <span class="keyword">def </span>check_y(x):</div>
<div class="line"><span class="lineno">  741</span>        <span class="keywordflow">return</span> x.shape[1:] == (7, 11)</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>    clf = CheckingClassifier(</div>
<div class="line"><span class="lineno">  744</span>        check_X=check_X,</div>
<div class="line"><span class="lineno">  745</span>        check_y=check_y,</div>
<div class="line"><span class="lineno">  746</span>        methods_to_check=[<span class="stringliteral">&quot;fit&quot;</span>],</div>
<div class="line"><span class="lineno">  747</span>    )</div>
<div class="line"><span class="lineno">  748</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]})</div>
<div class="line"><span class="lineno">  749</span>    grid_search.fit(X_4d, y_3d).score(X, y)</div>
<div class="line"><span class="lineno">  750</span>    <span class="keyword">assert</span> hasattr(grid_search, <span class="stringliteral">&quot;cv_results_&quot;</span>)</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a12ebcfd60018b5238b55c8aaaee04db8" name="a12ebcfd60018b5238b55c8aaaee04db8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12ebcfd60018b5238b55c8aaaee04db8">&#9670;&#160;</a></span>test_gridsearch_no_predict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_gridsearch_no_predict </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  843</span><span class="keyword">def </span>test_gridsearch_no_predict():</div>
<div class="line"><span class="lineno">  844</span>    <span class="comment"># test grid-search with an estimator without predict.</span></div>
<div class="line"><span class="lineno">  845</span>    <span class="comment"># slight duplication of a test from KDE</span></div>
<div class="line"><span class="lineno">  846</span>    <span class="keyword">def </span>custom_scoring(estimator, X):</div>
<div class="line"><span class="lineno">  847</span>        <span class="keywordflow">return</span> 42 <span class="keywordflow">if</span> estimator.bandwidth == 0.1 <span class="keywordflow">else</span> 0</div>
<div class="line"><span class="lineno">  848</span> </div>
<div class="line"><span class="lineno">  849</span>    X, _ = make_blobs(cluster_std=0.1, random_state=1, centers=[[0, 1], [1, 0], [0, 0]])</div>
<div class="line"><span class="lineno">  850</span>    search = GridSearchCV(</div>
<div class="line"><span class="lineno">  851</span>        KernelDensity(),</div>
<div class="line"><span class="lineno">  852</span>        param_grid=dict(bandwidth=[0.01, 0.1, 1]),</div>
<div class="line"><span class="lineno">  853</span>        scoring=custom_scoring,</div>
<div class="line"><span class="lineno">  854</span>    )</div>
<div class="line"><span class="lineno">  855</span>    search.fit(X)</div>
<div class="line"><span class="lineno">  856</span>    <span class="keyword">assert</span> search.best_params_[<span class="stringliteral">&quot;bandwidth&quot;</span>] == 0.1</div>
<div class="line"><span class="lineno">  857</span>    <span class="keyword">assert</span> search.best_score_ == 42</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d8a3074c102f42b448343e08686182c" name="a4d8a3074c102f42b448343e08686182c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d8a3074c102f42b448343e08686182c">&#9670;&#160;</a></span>test_n_features_in()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_n_features_in </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2190</span><span class="keyword">def </span>test_n_features_in():</div>
<div class="line"><span class="lineno"> 2191</span>    <span class="comment"># make sure grid search and random search delegate n_features_in to the</span></div>
<div class="line"><span class="lineno"> 2192</span>    <span class="comment"># best estimator</span></div>
<div class="line"><span class="lineno"> 2193</span>    n_features = 4</div>
<div class="line"><span class="lineno"> 2194</span>    X, y = make_classification(n_features=n_features)</div>
<div class="line"><span class="lineno"> 2195</span>    gbdt = HistGradientBoostingClassifier()</div>
<div class="line"><span class="lineno"> 2196</span>    param_grid = {<span class="stringliteral">&quot;max_iter&quot;</span>: [3, 4]}</div>
<div class="line"><span class="lineno"> 2197</span>    gs = GridSearchCV(gbdt, param_grid)</div>
<div class="line"><span class="lineno"> 2198</span>    rs = RandomizedSearchCV(gbdt, param_grid, n_iter=1)</div>
<div class="line"><span class="lineno"> 2199</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(gs, <span class="stringliteral">&quot;n_features_in_&quot;</span>)</div>
<div class="line"><span class="lineno"> 2200</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(rs, <span class="stringliteral">&quot;n_features_in_&quot;</span>)</div>
<div class="line"><span class="lineno"> 2201</span>    gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 2202</span>    rs.fit(X, y)</div>
<div class="line"><span class="lineno"> 2203</span>    <span class="keyword">assert</span> gs.n_features_in_ == n_features</div>
<div class="line"><span class="lineno"> 2204</span>    <span class="keyword">assert</span> rs.n_features_in_ == n_features</div>
<div class="line"><span class="lineno"> 2205</span> </div>
<div class="line"><span class="lineno"> 2206</span> </div>
<div class="line"><span class="lineno"> 2207</span><span class="preprocessor">@pytest.mark.parametrize(&quot;pairwise&quot;, [True, False])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace43060eefefc4a1dba2c6a0dfdb2386" name="ace43060eefefc4a1dba2c6a0dfdb2386"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace43060eefefc4a1dba2c6a0dfdb2386">&#9670;&#160;</a></span>test_no_refit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_no_refit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  371</span><span class="keyword">def </span>test_no_refit():</div>
<div class="line"><span class="lineno">  372</span>    <span class="comment"># Test that GSCV can be used for model selection alone without refitting</span></div>
<div class="line"><span class="lineno">  373</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno">  374</span>    <span class="keywordflow">for</span> scoring <span class="keywordflow">in</span> [<span class="keywordtype">None</span>, [<span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;precision&quot;</span>]]:</div>
<div class="line"><span class="lineno">  375</span>        grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, refit=<span class="keyword">False</span>, cv=3)</div>
<div class="line"><span class="lineno">  376</span>        grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  377</span>        <span class="keyword">assert</span> (</div>
<div class="line"><span class="lineno">  378</span>            <span class="keywordflow">not</span> hasattr(grid_search, <span class="stringliteral">&quot;best_estimator_&quot;</span>)</div>
<div class="line"><span class="lineno">  379</span>            <span class="keywordflow">and</span> hasattr(grid_search, <span class="stringliteral">&quot;best_index_&quot;</span>)</div>
<div class="line"><span class="lineno">  380</span>            <span class="keywordflow">and</span> hasattr(grid_search, <span class="stringliteral">&quot;best_params_&quot;</span>)</div>
<div class="line"><span class="lineno">  381</span>        )</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>        <span class="comment"># Make sure the functions predict/transform etc raise meaningful</span></div>
<div class="line"><span class="lineno">  384</span>        <span class="comment"># error messages</span></div>
<div class="line"><span class="lineno">  385</span>        <span class="keywordflow">for</span> fn_name <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno">  386</span>            <span class="stringliteral">&quot;predict&quot;</span>,</div>
<div class="line"><span class="lineno">  387</span>            <span class="stringliteral">&quot;predict_proba&quot;</span>,</div>
<div class="line"><span class="lineno">  388</span>            <span class="stringliteral">&quot;predict_log_proba&quot;</span>,</div>
<div class="line"><span class="lineno">  389</span>            <span class="stringliteral">&quot;transform&quot;</span>,</div>
<div class="line"><span class="lineno">  390</span>            <span class="stringliteral">&quot;inverse_transform&quot;</span>,</div>
<div class="line"><span class="lineno">  391</span>        ):</div>
<div class="line"><span class="lineno">  392</span>            error_msg = (</div>
<div class="line"><span class="lineno">  393</span>                f<span class="stringliteral">&quot;`refit=False`. {fn_name} is available only after &quot;</span></div>
<div class="line"><span class="lineno">  394</span>                <span class="stringliteral">&quot;refitting on the best parameters&quot;</span></div>
<div class="line"><span class="lineno">  395</span>            )</div>
<div class="line"><span class="lineno">  396</span>            <span class="keyword">with</span> pytest.raises(AttributeError, match=error_msg):</div>
<div class="line"><span class="lineno">  397</span>                getattr(grid_search, fn_name)(X)</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="comment"># Test that an invalid refit param raises appropriate error messages</span></div>
<div class="line"><span class="lineno">  400</span>    error_msg = (</div>
<div class="line"><span class="lineno">  401</span>        <span class="stringliteral">&quot;For multi-metric scoring, the parameter refit must be set to a scorer key&quot;</span></div>
<div class="line"><span class="lineno">  402</span>    )</div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordflow">for</span> refit <span class="keywordflow">in</span> [<span class="stringliteral">&quot;&quot;</span>, 5, <span class="keyword">True</span>, <span class="stringliteral">&quot;recall&quot;</span>, <span class="stringliteral">&quot;accuracy&quot;</span>]:</div>
<div class="line"><span class="lineno">  404</span>        <span class="keyword">with</span> pytest.raises(ValueError, match=error_msg):</div>
<div class="line"><span class="lineno">  405</span>            GridSearchCV(</div>
<div class="line"><span class="lineno">  406</span>                clf, {}, refit=refit, scoring={<span class="stringliteral">&quot;acc&quot;</span>: <span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;prec&quot;</span>: <span class="stringliteral">&quot;precision&quot;</span>}</div>
<div class="line"><span class="lineno">  407</span>            ).fit(X, y)</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b211b69721614c4fab7eeca5b48daf7" name="a4b211b69721614c4fab7eeca5b48daf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b211b69721614c4fab7eeca5b48daf7">&#9670;&#160;</a></span>test_pandas_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_pandas_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  784</span><span class="keyword">def </span>test_pandas_input():</div>
<div class="line"><span class="lineno">  785</span>    <span class="comment"># check cross_val_score doesn&#39;t destroy pandas dataframe</span></div>
<div class="line"><span class="lineno">  786</span>    types = [(MockDataFrame, MockDataFrame)]</div>
<div class="line"><span class="lineno">  787</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  788</span>        <span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>        types.append((DataFrame, Series))</div>
<div class="line"><span class="lineno">  791</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno">  792</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>    X = np.arange(100).reshape(10, 10)</div>
<div class="line"><span class="lineno">  795</span>    y = np.array([0] * 5 + [1] * 5)</div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>    <span class="keywordflow">for</span> InputFeatureType, TargetType <span class="keywordflow">in</span> types:</div>
<div class="line"><span class="lineno">  798</span>        <span class="comment"># X dataframe, y series</span></div>
<div class="line"><span class="lineno">  799</span>        X_df, y_ser = InputFeatureType(X), TargetType(y)</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>        <span class="keyword">def </span>check_df(x):</div>
<div class="line"><span class="lineno">  802</span>            <span class="keywordflow">return</span> isinstance(x, InputFeatureType)</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>        <span class="keyword">def </span>check_series(x):</div>
<div class="line"><span class="lineno">  805</span>            <span class="keywordflow">return</span> isinstance(x, TargetType)</div>
<div class="line"><span class="lineno">  806</span> </div>
<div class="line"><span class="lineno">  807</span>        clf = CheckingClassifier(check_X=check_df, check_y=check_series)</div>
<div class="line"><span class="lineno">  808</span> </div>
<div class="line"><span class="lineno">  809</span>        grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]})</div>
<div class="line"><span class="lineno">  810</span>        grid_search.fit(X_df, y_ser).score(X_df, y_ser)</div>
<div class="line"><span class="lineno">  811</span>        grid_search.predict(X_df)</div>
<div class="line"><span class="lineno">  812</span>        <span class="keyword">assert</span> hasattr(grid_search, <span class="stringliteral">&quot;cv_results_&quot;</span>)</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a23e70ff1723a0235c187da99508d6a1c" name="a23e70ff1723a0235c187da99508d6a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e70ff1723a0235c187da99508d6a1c">&#9670;&#160;</a></span>test_param_sampler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_param_sampler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  860</span><span class="keyword">def </span>test_param_sampler():</div>
<div class="line"><span class="lineno">  861</span>    <span class="comment"># test basic properties of param sampler</span></div>
<div class="line"><span class="lineno">  862</span>    param_distributions = {<span class="stringliteral">&quot;kernel&quot;</span>: [<span class="stringliteral">&quot;rbf&quot;</span>, <span class="stringliteral">&quot;linear&quot;</span>], <span class="stringliteral">&quot;C&quot;</span>: uniform(0, 1)}</div>
<div class="line"><span class="lineno">  863</span>    sampler = ParameterSampler(</div>
<div class="line"><span class="lineno">  864</span>        param_distributions=param_distributions, n_iter=10, random_state=0</div>
<div class="line"><span class="lineno">  865</span>    )</div>
<div class="line"><span class="lineno">  866</span>    samples = [x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> sampler]</div>
<div class="line"><span class="lineno">  867</span>    <span class="keyword">assert</span> len(samples) == 10</div>
<div class="line"><span class="lineno">  868</span>    <span class="keywordflow">for</span> sample <span class="keywordflow">in</span> samples:</div>
<div class="line"><span class="lineno">  869</span>        <span class="keyword">assert</span> sample[<span class="stringliteral">&quot;kernel&quot;</span>] <span class="keywordflow">in</span> [<span class="stringliteral">&quot;rbf&quot;</span>, <span class="stringliteral">&quot;linear&quot;</span>]</div>
<div class="line"><span class="lineno">  870</span>        <span class="keyword">assert</span> 0 &lt;= sample[<span class="stringliteral">&quot;C&quot;</span>] &lt;= 1</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>    <span class="comment"># test that repeated calls yield identical parameters</span></div>
<div class="line"><span class="lineno">  873</span>    param_distributions = {<span class="stringliteral">&quot;C&quot;</span>: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]}</div>
<div class="line"><span class="lineno">  874</span>    sampler = ParameterSampler(</div>
<div class="line"><span class="lineno">  875</span>        param_distributions=param_distributions, n_iter=3, random_state=0</div>
<div class="line"><span class="lineno">  876</span>    )</div>
<div class="line"><span class="lineno">  877</span>    <span class="keyword">assert</span> [x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> sampler] == [x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> sampler]</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>    param_distributions = {<span class="stringliteral">&quot;C&quot;</span>: uniform(0, 1)}</div>
<div class="line"><span class="lineno">  880</span>    sampler = ParameterSampler(</div>
<div class="line"><span class="lineno">  881</span>        param_distributions=param_distributions, n_iter=10, random_state=0</div>
<div class="line"><span class="lineno">  882</span>    )</div>
<div class="line"><span class="lineno">  883</span>    <span class="keyword">assert</span> [x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> sampler] == [x <span class="keywordflow">for</span> x <span class="keywordflow">in</span> sampler]</div>
<div class="line"><span class="lineno">  884</span> </div>
<div class="line"><span class="lineno">  885</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aec874924d6d0270c04d0f27f5a3dbb80" name="aec874924d6d0270c04d0f27f5a3dbb80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec874924d6d0270c04d0f27f5a3dbb80">&#9670;&#160;</a></span>test_parameter_grid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_parameter_grid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  151</span><span class="keyword">def </span>test_parameter_grid():</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    <span class="comment"># Test basic properties of ParameterGrid.</span></div>
<div class="line"><span class="lineno">  154</span>    params1 = {<span class="stringliteral">&quot;foo&quot;</span>: [1, 2, 3]}</div>
<div class="line"><span class="lineno">  155</span>    grid1 = ParameterGrid(params1)</div>
<div class="line"><span class="lineno">  156</span>    <span class="keyword">assert</span> isinstance(grid1, Iterable)</div>
<div class="line"><span class="lineno">  157</span>    <span class="keyword">assert</span> isinstance(grid1, Sized)</div>
<div class="line"><span class="lineno">  158</span>    <span class="keyword">assert</span> len(grid1) == 3</div>
<div class="line"><span class="lineno">  159</span>    assert_grid_iter_equals_getitem(grid1)</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>    params2 = {<span class="stringliteral">&quot;foo&quot;</span>: [4, 2], <span class="stringliteral">&quot;bar&quot;</span>: [<span class="stringliteral">&quot;ham&quot;</span>, <span class="stringliteral">&quot;spam&quot;</span>, <span class="stringliteral">&quot;eggs&quot;</span>]}</div>
<div class="line"><span class="lineno">  162</span>    grid2 = ParameterGrid(params2)</div>
<div class="line"><span class="lineno">  163</span>    <span class="keyword">assert</span> len(grid2) == 6</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>    <span class="comment"># loop to assert we can iterate over the grid multiple times</span></div>
<div class="line"><span class="lineno">  166</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2):</div>
<div class="line"><span class="lineno">  167</span>        <span class="comment"># tuple + chain transforms {&quot;a&quot;: 1, &quot;b&quot;: 2} to (&quot;a&quot;, 1, &quot;b&quot;, 2)</span></div>
<div class="line"><span class="lineno">  168</span>        points = set(tuple(chain(*(sorted(p.items())))) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> grid2)</div>
<div class="line"><span class="lineno">  169</span>        <span class="keyword">assert</span> points == set(</div>
<div class="line"><span class="lineno">  170</span>            (<span class="stringliteral">&quot;bar&quot;</span>, x, <span class="stringliteral">&quot;foo&quot;</span>, y) <span class="keywordflow">for</span> x, y <span class="keywordflow">in</span> product(params2[<span class="stringliteral">&quot;bar&quot;</span>], params2[<span class="stringliteral">&quot;foo&quot;</span>])</div>
<div class="line"><span class="lineno">  171</span>        )</div>
<div class="line"><span class="lineno">  172</span>    assert_grid_iter_equals_getitem(grid2)</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    <span class="comment"># Special case: empty grid (useful to get default estimator settings)</span></div>
<div class="line"><span class="lineno">  175</span>    empty = ParameterGrid({})</div>
<div class="line"><span class="lineno">  176</span>    <span class="keyword">assert</span> len(empty) == 1</div>
<div class="line"><span class="lineno">  177</span>    <span class="keyword">assert</span> list(empty) == [{}]</div>
<div class="line"><span class="lineno">  178</span>    assert_grid_iter_equals_getitem(empty)</div>
<div class="line"><span class="lineno">  179</span>    <span class="keyword">with</span> pytest.raises(IndexError):</div>
<div class="line"><span class="lineno">  180</span>        empty[1]</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    has_empty = ParameterGrid([{<span class="stringliteral">&quot;C&quot;</span>: [1, 10]}, {}, {<span class="stringliteral">&quot;C&quot;</span>: [0.5]}])</div>
<div class="line"><span class="lineno">  183</span>    <span class="keyword">assert</span> len(has_empty) == 4</div>
<div class="line"><span class="lineno">  184</span>    <span class="keyword">assert</span> list(has_empty) == [{<span class="stringliteral">&quot;C&quot;</span>: 1}, {<span class="stringliteral">&quot;C&quot;</span>: 10}, {}, {<span class="stringliteral">&quot;C&quot;</span>: 0.5}]</div>
<div class="line"><span class="lineno">  185</span>    assert_grid_iter_equals_getitem(has_empty)</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a10be7fd1b90a6f1156e89d0669c62be7" name="a10be7fd1b90a6f1156e89d0669c62be7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10be7fd1b90a6f1156e89d0669c62be7">&#9670;&#160;</a></span>test_parameters_sampler_replacement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_parameters_sampler_replacement </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1674</span><span class="keyword">def </span>test_parameters_sampler_replacement():</div>
<div class="line"><span class="lineno"> 1675</span>    <span class="comment"># raise warning if n_iter is bigger than total parameter space</span></div>
<div class="line"><span class="lineno"> 1676</span>    params = [</div>
<div class="line"><span class="lineno"> 1677</span>        {<span class="stringliteral">&quot;first&quot;</span>: [0, 1], <span class="stringliteral">&quot;second&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]},</div>
<div class="line"><span class="lineno"> 1678</span>        {<span class="stringliteral">&quot;third&quot;</span>: [<span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;values&quot;</span>]},</div>
<div class="line"><span class="lineno"> 1679</span>    ]</div>
<div class="line"><span class="lineno"> 1680</span>    sampler = ParameterSampler(params, n_iter=9)</div>
<div class="line"><span class="lineno"> 1681</span>    n_iter = 9</div>
<div class="line"><span class="lineno"> 1682</span>    grid_size = 8</div>
<div class="line"><span class="lineno"> 1683</span>    expected_warning = (</div>
<div class="line"><span class="lineno"> 1684</span>        <span class="stringliteral">&quot;The total space of parameters %d is smaller &quot;</span></div>
<div class="line"><span class="lineno"> 1685</span>        <span class="stringliteral">&quot;than n_iter=%d. Running %d iterations. For &quot;</span></div>
<div class="line"><span class="lineno"> 1686</span>        <span class="stringliteral">&quot;exhaustive searches, use GridSearchCV.&quot;</span> % (grid_size, n_iter, grid_size)</div>
<div class="line"><span class="lineno"> 1687</span>    )</div>
<div class="line"><span class="lineno"> 1688</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=expected_warning):</div>
<div class="line"><span class="lineno"> 1689</span>        list(sampler)</div>
<div class="line"><span class="lineno"> 1690</span> </div>
<div class="line"><span class="lineno"> 1691</span>    <span class="comment"># degenerates to GridSearchCV if n_iter the same as grid_size</span></div>
<div class="line"><span class="lineno"> 1692</span>    sampler = ParameterSampler(params, n_iter=8)</div>
<div class="line"><span class="lineno"> 1693</span>    samples = list(sampler)</div>
<div class="line"><span class="lineno"> 1694</span>    <span class="keyword">assert</span> len(samples) == 8</div>
<div class="line"><span class="lineno"> 1695</span>    <span class="keywordflow">for</span> values <span class="keywordflow">in</span> ParameterGrid(params):</div>
<div class="line"><span class="lineno"> 1696</span>        <span class="keyword">assert</span> values <span class="keywordflow">in</span> samples</div>
<div class="line"><span class="lineno"> 1697</span>    <span class="keyword">assert</span> len(ParameterSampler(params, n_iter=1000)) == 8</div>
<div class="line"><span class="lineno"> 1698</span> </div>
<div class="line"><span class="lineno"> 1699</span>    <span class="comment"># test sampling without replacement in a large grid</span></div>
<div class="line"><span class="lineno"> 1700</span>    params = {<span class="stringliteral">&quot;a&quot;</span>: range(10), <span class="stringliteral">&quot;b&quot;</span>: range(10), <span class="stringliteral">&quot;c&quot;</span>: range(10)}</div>
<div class="line"><span class="lineno"> 1701</span>    sampler = ParameterSampler(params, n_iter=99, random_state=42)</div>
<div class="line"><span class="lineno"> 1702</span>    samples = list(sampler)</div>
<div class="line"><span class="lineno"> 1703</span>    <span class="keyword">assert</span> len(samples) == 99</div>
<div class="line"><span class="lineno"> 1704</span>    hashable_samples = [<span class="stringliteral">&quot;a%db%dc%d&quot;</span> % (p[<span class="stringliteral">&quot;a&quot;</span>], p[<span class="stringliteral">&quot;b&quot;</span>], p[<span class="stringliteral">&quot;c&quot;</span>]) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> samples]</div>
<div class="line"><span class="lineno"> 1705</span>    <span class="keyword">assert</span> len(set(hashable_samples)) == 99</div>
<div class="line"><span class="lineno"> 1706</span> </div>
<div class="line"><span class="lineno"> 1707</span>    <span class="comment"># doesn&#39;t go into infinite loops</span></div>
<div class="line"><span class="lineno"> 1708</span>    params_distribution = {<span class="stringliteral">&quot;first&quot;</span>: bernoulli(0.5), <span class="stringliteral">&quot;second&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]}</div>
<div class="line"><span class="lineno"> 1709</span>    sampler = ParameterSampler(params_distribution, n_iter=7)</div>
<div class="line"><span class="lineno"> 1710</span>    samples = list(sampler)</div>
<div class="line"><span class="lineno"> 1711</span>    <span class="keyword">assert</span> len(samples) == 7</div>
<div class="line"><span class="lineno"> 1712</span> </div>
<div class="line"><span class="lineno"> 1713</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa85d13ba2c96522423b0b996bf5af57d" name="aa85d13ba2c96522423b0b996bf5af57d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa85d13ba2c96522423b0b996bf5af57d">&#9670;&#160;</a></span>test_pickle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_pickle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1445</span><span class="keyword">def </span>test_pickle():</div>
<div class="line"><span class="lineno"> 1446</span>    <span class="comment"># Test that a fit search can be pickled</span></div>
<div class="line"><span class="lineno"> 1447</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno"> 1448</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, refit=<span class="keyword">True</span>, cv=3)</div>
<div class="line"><span class="lineno"> 1449</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1450</span>    grid_search_pickled = pickle.loads(pickle.dumps(grid_search))</div>
<div class="line"><span class="lineno"> 1451</span>    assert_array_almost_equal(grid_search.predict(X), grid_search_pickled.predict(X))</div>
<div class="line"><span class="lineno"> 1452</span> </div>
<div class="line"><span class="lineno"> 1453</span>    random_search = RandomizedSearchCV(</div>
<div class="line"><span class="lineno"> 1454</span>        clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, refit=<span class="keyword">True</span>, n_iter=3, cv=3</div>
<div class="line"><span class="lineno"> 1455</span>    )</div>
<div class="line"><span class="lineno"> 1456</span>    random_search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1457</span>    random_search_pickled = pickle.loads(pickle.dumps(random_search))</div>
<div class="line"><span class="lineno"> 1458</span>    assert_array_almost_equal(</div>
<div class="line"><span class="lineno"> 1459</span>        random_search.predict(X), random_search_pickled.predict(X)</div>
<div class="line"><span class="lineno"> 1460</span>    )</div>
<div class="line"><span class="lineno"> 1461</span> </div>
<div class="line"><span class="lineno"> 1462</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a929c25bd64a2e318b9df24e3a326dcdb" name="a929c25bd64a2e318b9df24e3a326dcdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a929c25bd64a2e318b9df24e3a326dcdb">&#9670;&#160;</a></span>test_predict_proba_disabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_predict_proba_disabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1509</span><span class="keyword">def </span>test_predict_proba_disabled():</div>
<div class="line"><span class="lineno"> 1510</span>    <span class="comment"># Test predict_proba when disabled on estimator.</span></div>
<div class="line"><span class="lineno"> 1511</span>    X = np.arange(20).reshape(5, -1)</div>
<div class="line"><span class="lineno"> 1512</span>    y = [0, 0, 1, 1, 1]</div>
<div class="line"><span class="lineno"> 1513</span>    clf = SVC(probability=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1514</span>    gs = GridSearchCV(clf, {}, cv=2).fit(X, y)</div>
<div class="line"><span class="lineno"> 1515</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(gs, <span class="stringliteral">&quot;predict_proba&quot;</span>)</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e7b908919a09cebe68d054a5af61d1f" name="a9e7b908919a09cebe68d054a5af61d1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e7b908919a09cebe68d054a5af61d1f">&#9670;&#160;</a></span>test_random_search_bad_cv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_random_search_bad_cv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1955</span><span class="keyword">def </span>test_random_search_bad_cv():</div>
<div class="line"><span class="lineno"> 1956</span>    <span class="comment"># Use global X, y</span></div>
<div class="line"><span class="lineno"> 1957</span> </div>
<div class="line"><span class="lineno"> 1958</span>    <span class="keyword">class </span>BrokenKFold(KFold):</div>
<div class="line"><span class="lineno"> 1959</span>        <span class="keyword">def </span>get_n_splits(self, *args, **kw):</div>
<div class="line"><span class="lineno"> 1960</span>            <span class="keywordflow">return</span> 1</div>
<div class="line"><span class="lineno"> 1961</span> </div>
<div class="line"><span class="lineno"> 1962</span>    <span class="comment"># create bad cv</span></div>
<div class="line"><span class="lineno"> 1963</span>    cv = BrokenKFold(n_splits=3)</div>
<div class="line"><span class="lineno"> 1964</span> </div>
<div class="line"><span class="lineno"> 1965</span>    train_size = 100</div>
<div class="line"><span class="lineno"> 1966</span>    ridge = RandomizedSearchCV(Ridge(), {<span class="stringliteral">&quot;alpha&quot;</span>: [1e-3, 1e-2, 1e-1]}, cv=cv, n_jobs=4)</div>
<div class="line"><span class="lineno"> 1967</span> </div>
<div class="line"><span class="lineno"> 1968</span>    <span class="comment"># assert that this raises an error</span></div>
<div class="line"><span class="lineno"> 1969</span>    <span class="keyword">with</span> pytest.raises(</div>
<div class="line"><span class="lineno"> 1970</span>        ValueError,</div>
<div class="line"><span class="lineno"> 1971</span>        match=(</div>
<div class="line"><span class="lineno"> 1972</span>            <span class="stringliteral">&quot;cv.split and cv.get_n_splits returned &quot;</span></div>
<div class="line"><span class="lineno"> 1973</span>            <span class="stringliteral">&quot;inconsistent results. Expected \\d+ &quot;</span></div>
<div class="line"><span class="lineno"> 1974</span>            <span class="stringliteral">&quot;splits, got \\d+&quot;</span></div>
<div class="line"><span class="lineno"> 1975</span>        ),</div>
<div class="line"><span class="lineno"> 1976</span>    ):</div>
<div class="line"><span class="lineno"> 1977</span>        ridge.fit(X[:train_size], y[:train_size])</div>
<div class="line"><span class="lineno"> 1978</span> </div>
<div class="line"><span class="lineno"> 1979</span> </div>
<div class="line"><span class="lineno"> 1980</span><span class="preprocessor">@pytest.mark.parametrize(&quot;return_train_score&quot;, [False, True])</span></div>
<div class="line"><span class="lineno"> 1981</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1982</span>    <span class="stringliteral">&quot;SearchCV, specialized_params&quot;</span>,</div>
<div class="line"><span class="lineno"> 1983</span>    [</div>
<div class="line"><span class="lineno"> 1984</span>        (GridSearchCV, {<span class="stringliteral">&quot;param_grid&quot;</span>: {<span class="stringliteral">&quot;max_depth&quot;</span>: [2, 3, 5, 8]}}),</div>
<div class="line"><span class="lineno"> 1985</span>        (</div>
<div class="line"><span class="lineno"> 1986</span>            RandomizedSearchCV,</div>
<div class="line"><span class="lineno"> 1987</span>            {<span class="stringliteral">&quot;param_distributions&quot;</span>: {<span class="stringliteral">&quot;max_depth&quot;</span>: [2, 3, 5, 8]}, <span class="stringliteral">&quot;n_iter&quot;</span>: 4},</div>
<div class="line"><span class="lineno"> 1988</span>        ),</div>
<div class="line"><span class="lineno"> 1989</span>    ],</div>
<div class="line"><span class="lineno"> 1990</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1dc043b452cdc097dd907cdd86c83b18" name="a1dc043b452cdc097dd907cdd86c83b18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dc043b452cdc097dd907cdd86c83b18">&#9670;&#160;</a></span>test_random_search_cv_results()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_random_search_cv_results </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  992</span><span class="keyword">def </span>test_random_search_cv_results():</div>
<div class="line"><span class="lineno">  993</span>    X, y = make_classification(n_samples=50, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno">  994</span> </div>
<div class="line"><span class="lineno">  995</span>    n_splits = 3</div>
<div class="line"><span class="lineno">  996</span>    n_search_iter = 30</div>
<div class="line"><span class="lineno">  997</span> </div>
<div class="line"><span class="lineno">  998</span>    params = [</div>
<div class="line"><span class="lineno">  999</span>        {<span class="stringliteral">&quot;kernel&quot;</span>: [<span class="stringliteral">&quot;rbf&quot;</span>], <span class="stringliteral">&quot;C&quot;</span>: expon(scale=10), <span class="stringliteral">&quot;gamma&quot;</span>: expon(scale=0.1)},</div>
<div class="line"><span class="lineno"> 1000</span>        {<span class="stringliteral">&quot;kernel&quot;</span>: [<span class="stringliteral">&quot;poly&quot;</span>], <span class="stringliteral">&quot;degree&quot;</span>: [2, 3]},</div>
<div class="line"><span class="lineno"> 1001</span>    ]</div>
<div class="line"><span class="lineno"> 1002</span>    param_keys = (<span class="stringliteral">&quot;param_C&quot;</span>, <span class="stringliteral">&quot;param_degree&quot;</span>, <span class="stringliteral">&quot;param_gamma&quot;</span>, <span class="stringliteral">&quot;param_kernel&quot;</span>)</div>
<div class="line"><span class="lineno"> 1003</span>    score_keys = (</div>
<div class="line"><span class="lineno"> 1004</span>        <span class="stringliteral">&quot;mean_test_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1005</span>        <span class="stringliteral">&quot;mean_train_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1006</span>        <span class="stringliteral">&quot;rank_test_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1007</span>        <span class="stringliteral">&quot;split0_test_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1008</span>        <span class="stringliteral">&quot;split1_test_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1009</span>        <span class="stringliteral">&quot;split2_test_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1010</span>        <span class="stringliteral">&quot;split0_train_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1011</span>        <span class="stringliteral">&quot;split1_train_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1012</span>        <span class="stringliteral">&quot;split2_train_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1013</span>        <span class="stringliteral">&quot;std_test_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1014</span>        <span class="stringliteral">&quot;std_train_score&quot;</span>,</div>
<div class="line"><span class="lineno"> 1015</span>        <span class="stringliteral">&quot;mean_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1016</span>        <span class="stringliteral">&quot;std_fit_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1017</span>        <span class="stringliteral">&quot;mean_score_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1018</span>        <span class="stringliteral">&quot;std_score_time&quot;</span>,</div>
<div class="line"><span class="lineno"> 1019</span>    )</div>
<div class="line"><span class="lineno"> 1020</span>    n_cand = n_search_iter</div>
<div class="line"><span class="lineno"> 1021</span> </div>
<div class="line"><span class="lineno"> 1022</span>    search = RandomizedSearchCV(</div>
<div class="line"><span class="lineno"> 1023</span>        SVC(),</div>
<div class="line"><span class="lineno"> 1024</span>        n_iter=n_search_iter,</div>
<div class="line"><span class="lineno"> 1025</span>        cv=n_splits,</div>
<div class="line"><span class="lineno"> 1026</span>        param_distributions=params,</div>
<div class="line"><span class="lineno"> 1027</span>        return_train_score=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno"> 1028</span>    )</div>
<div class="line"><span class="lineno"> 1029</span>    search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1030</span>    cv_results = search.cv_results_</div>
<div class="line"><span class="lineno"> 1031</span>    <span class="comment"># Check results structure</span></div>
<div class="line"><span class="lineno"> 1032</span>    check_cv_results_array_types(search, param_keys, score_keys)</div>
<div class="line"><span class="lineno"> 1033</span>    check_cv_results_keys(cv_results, param_keys, score_keys, n_cand)</div>
<div class="line"><span class="lineno"> 1034</span>    n_candidates = len(search.cv_results_[<span class="stringliteral">&quot;params&quot;</span>])</div>
<div class="line"><span class="lineno"> 1035</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno"> 1036</span>        (</div>
<div class="line"><span class="lineno"> 1037</span>            cv_results[<span class="stringliteral">&quot;param_C&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno"> 1038</span>            <span class="keywordflow">and</span> cv_results[<span class="stringliteral">&quot;param_gamma&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno"> 1039</span>            <span class="keywordflow">and</span> <span class="keywordflow">not</span> cv_results[<span class="stringliteral">&quot;param_degree&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno"> 1040</span>        )</div>
<div class="line"><span class="lineno"> 1041</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_candidates)</div>
<div class="line"><span class="lineno"> 1042</span>        <span class="keywordflow">if</span> cv_results[<span class="stringliteral">&quot;param_kernel&quot;</span>][i] == <span class="stringliteral">&quot;linear&quot;</span></div>
<div class="line"><span class="lineno"> 1043</span>    )</div>
<div class="line"><span class="lineno"> 1044</span>    <span class="keyword">assert</span> all(</div>
<div class="line"><span class="lineno"> 1045</span>        (</div>
<div class="line"><span class="lineno"> 1046</span>            <span class="keywordflow">not</span> cv_results[<span class="stringliteral">&quot;param_C&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno"> 1047</span>            <span class="keywordflow">and</span> <span class="keywordflow">not</span> cv_results[<span class="stringliteral">&quot;param_gamma&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno"> 1048</span>            <span class="keywordflow">and</span> cv_results[<span class="stringliteral">&quot;param_degree&quot;</span>].mask[i]</div>
<div class="line"><span class="lineno"> 1049</span>        )</div>
<div class="line"><span class="lineno"> 1050</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_candidates)</div>
<div class="line"><span class="lineno"> 1051</span>        <span class="keywordflow">if</span> cv_results[<span class="stringliteral">&quot;param_kernel&quot;</span>][i] == <span class="stringliteral">&quot;rbf&quot;</span></div>
<div class="line"><span class="lineno"> 1052</span>    )</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span> </div>
<div class="line"><span class="lineno"> 1055</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1056</span>    <span class="stringliteral">&quot;SearchCV, specialized_params&quot;</span>,</div>
<div class="line"><span class="lineno"> 1057</span>    [</div>
<div class="line"><span class="lineno"> 1058</span>        (GridSearchCV, {<span class="stringliteral">&quot;param_grid&quot;</span>: {<span class="stringliteral">&quot;C&quot;</span>: [1, 10]}}),</div>
<div class="line"><span class="lineno"> 1059</span>        (RandomizedSearchCV, {<span class="stringliteral">&quot;param_distributions&quot;</span>: {<span class="stringliteral">&quot;C&quot;</span>: [1, 10]}, <span class="stringliteral">&quot;n_iter&quot;</span>: 2}),</div>
<div class="line"><span class="lineno"> 1060</span>    ],</div>
<div class="line"><span class="lineno"> 1061</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a89253672adb11ae7b7ccfe437ccbe843" name="a89253672adb11ae7b7ccfe437ccbe843"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89253672adb11ae7b7ccfe437ccbe843">&#9670;&#160;</a></span>test_random_search_cv_results_multimetric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_random_search_cv_results_multimetric </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1153</span><span class="keyword">def </span>test_random_search_cv_results_multimetric():</div>
<div class="line"><span class="lineno"> 1154</span>    X, y = make_classification(n_samples=50, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 1155</span> </div>
<div class="line"><span class="lineno"> 1156</span>    n_splits = 3</div>
<div class="line"><span class="lineno"> 1157</span>    n_search_iter = 30</div>
<div class="line"><span class="lineno"> 1158</span> </div>
<div class="line"><span class="lineno"> 1159</span>    <span class="comment"># Scipy 0.12&#39;s stats dists do not accept seed, hence we use param grid</span></div>
<div class="line"><span class="lineno"> 1160</span>    params = dict(C=np.logspace(-4, 1, 3), gamma=np.logspace(-5, 0, 3, base=0.1))</div>
<div class="line"><span class="lineno"> 1161</span>    <span class="keywordflow">for</span> refit <span class="keywordflow">in</span> (<span class="keyword">True</span>, <span class="keyword">False</span>):</div>
<div class="line"><span class="lineno"> 1162</span>        random_searches = []</div>
<div class="line"><span class="lineno"> 1163</span>        <span class="keywordflow">for</span> scoring <span class="keywordflow">in</span> ((<span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;recall&quot;</span>), <span class="stringliteral">&quot;accuracy&quot;</span>, <span class="stringliteral">&quot;recall&quot;</span>):</div>
<div class="line"><span class="lineno"> 1164</span>            <span class="comment"># If True, for multi-metric pass refit=&#39;accuracy&#39;</span></div>
<div class="line"><span class="lineno"> 1165</span>            <span class="keywordflow">if</span> refit:</div>
<div class="line"><span class="lineno"> 1166</span>                probability = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1167</span>                refit = <span class="stringliteral">&quot;accuracy&quot;</span> <span class="keywordflow">if</span> isinstance(scoring, tuple) <span class="keywordflow">else</span> refit</div>
<div class="line"><span class="lineno"> 1168</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1169</span>                probability = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1170</span>            clf = SVC(probability=probability, random_state=42)</div>
<div class="line"><span class="lineno"> 1171</span>            random_search = RandomizedSearchCV(</div>
<div class="line"><span class="lineno"> 1172</span>                clf,</div>
<div class="line"><span class="lineno"> 1173</span>                n_iter=n_search_iter,</div>
<div class="line"><span class="lineno"> 1174</span>                cv=n_splits,</div>
<div class="line"><span class="lineno"> 1175</span>                param_distributions=params,</div>
<div class="line"><span class="lineno"> 1176</span>                scoring=scoring,</div>
<div class="line"><span class="lineno"> 1177</span>                refit=refit,</div>
<div class="line"><span class="lineno"> 1178</span>                random_state=0,</div>
<div class="line"><span class="lineno"> 1179</span>            )</div>
<div class="line"><span class="lineno"> 1180</span>            random_search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1181</span>            random_searches.append(random_search)</div>
<div class="line"><span class="lineno"> 1182</span> </div>
<div class="line"><span class="lineno"> 1183</span>        compare_cv_results_multimetric_with_single(*random_searches)</div>
<div class="line"><span class="lineno"> 1184</span>        compare_refit_methods_when_refit_with_acc(</div>
<div class="line"><span class="lineno"> 1185</span>            random_searches[0], random_searches[1], refit</div>
<div class="line"><span class="lineno"> 1186</span>        )</div>
<div class="line"><span class="lineno"> 1187</span> </div>
<div class="line"><span class="lineno"> 1188</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a06ac70ab5e0d186f288ab2f51a555dec" name="a06ac70ab5e0d186f288ab2f51a555dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ac70ab5e0d186f288ab2f51a555dec">&#9670;&#160;</a></span>test_refit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_refit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  595</span><span class="keyword">def </span>test_refit():</div>
<div class="line"><span class="lineno">  596</span>    <span class="comment"># Regression test for bug in refitting</span></div>
<div class="line"><span class="lineno">  597</span>    <span class="comment"># Simulates re-fitting a broken estimator; this used to break with</span></div>
<div class="line"><span class="lineno">  598</span>    <span class="comment"># sparse SVMs.</span></div>
<div class="line"><span class="lineno">  599</span>    X = np.arange(100).reshape(10, 10)</div>
<div class="line"><span class="lineno">  600</span>    y = np.array([0] * 5 + [1] * 5)</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>    clf = GridSearchCV(</div>
<div class="line"><span class="lineno">  603</span>        BrokenClassifier(), [{<span class="stringliteral">&quot;parameter&quot;</span>: [0, 1]}], scoring=<span class="stringliteral">&quot;precision&quot;</span>, refit=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  604</span>    )</div>
<div class="line"><span class="lineno">  605</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno">  606</span> </div>
<div class="line"><span class="lineno">  607</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a706d92bda9a746983387a08bdb11c0a2" name="a706d92bda9a746983387a08bdb11c0a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a706d92bda9a746983387a08bdb11c0a2">&#9670;&#160;</a></span>test_refit_callable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_refit_callable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test refit=callable, which adds flexibility in identifying the
"best" estimator.
</pre> <div class="fragment"><div class="line"><span class="lineno">  608</span><span class="keyword">def </span>test_refit_callable():</div>
<div class="line"><span class="lineno">  609</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  610</span><span class="stringliteral">    Test refit=callable, which adds flexibility in identifying the</span></div>
<div class="line"><span class="lineno">  611</span><span class="stringliteral">    &quot;best&quot; estimator.</span></div>
<div class="line"><span class="lineno">  612</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  613</span> </div>
<div class="line"><span class="lineno">  614</span>    <span class="keyword">def </span>refit_callable(cv_results):</div>
<div class="line"><span class="lineno">  615</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  616</span><span class="stringliteral">        A dummy function tests `refit=callable` interface.</span></div>
<div class="line"><span class="lineno">  617</span><span class="stringliteral">        Return the index of a model that has the least</span></div>
<div class="line"><span class="lineno">  618</span><span class="stringliteral">        `mean_test_score`.</span></div>
<div class="line"><span class="lineno">  619</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  620</span>        <span class="comment"># Fit a dummy clf with `refit=True` to get a list of keys in</span></div>
<div class="line"><span class="lineno">  621</span>        <span class="comment"># clf.cv_results_.</span></div>
<div class="line"><span class="lineno">  622</span>        X, y = make_classification(n_samples=100, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno">  623</span>        clf = GridSearchCV(</div>
<div class="line"><span class="lineno">  624</span>            LinearSVC(random_state=42),</div>
<div class="line"><span class="lineno">  625</span>            {<span class="stringliteral">&quot;C&quot;</span>: [0.01, 0.1, 1]},</div>
<div class="line"><span class="lineno">  626</span>            scoring=<span class="stringliteral">&quot;precision&quot;</span>,</div>
<div class="line"><span class="lineno">  627</span>            refit=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  628</span>        )</div>
<div class="line"><span class="lineno">  629</span>        clf.fit(X, y)</div>
<div class="line"><span class="lineno">  630</span>        <span class="comment"># Ensure that `best_index_ != 0` for this dummy clf</span></div>
<div class="line"><span class="lineno">  631</span>        <span class="keyword">assert</span> clf.best_index_ != 0</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>        <span class="comment"># Assert every key matches those in `cv_results`</span></div>
<div class="line"><span class="lineno">  634</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> clf.cv_results_.keys():</div>
<div class="line"><span class="lineno">  635</span>            <span class="keyword">assert</span> key <span class="keywordflow">in</span> cv_results</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>        <span class="keywordflow">return</span> cv_results[<span class="stringliteral">&quot;mean_test_score&quot;</span>].argmin()</div>
<div class="line"><span class="lineno">  638</span> </div>
<div class="line"><span class="lineno">  639</span>    X, y = make_classification(n_samples=100, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno">  640</span>    clf = GridSearchCV(</div>
<div class="line"><span class="lineno">  641</span>        LinearSVC(random_state=42),</div>
<div class="line"><span class="lineno">  642</span>        {<span class="stringliteral">&quot;C&quot;</span>: [0.01, 0.1, 1]},</div>
<div class="line"><span class="lineno">  643</span>        scoring=<span class="stringliteral">&quot;precision&quot;</span>,</div>
<div class="line"><span class="lineno">  644</span>        refit=refit_callable,</div>
<div class="line"><span class="lineno">  645</span>    )</div>
<div class="line"><span class="lineno">  646</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>    <span class="keyword">assert</span> clf.best_index_ == 0</div>
<div class="line"><span class="lineno">  649</span>    <span class="comment"># Ensure `best_score_` is disabled when using `refit=callable`</span></div>
<div class="line"><span class="lineno">  650</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(clf, <span class="stringliteral">&quot;best_score_&quot;</span>)</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a97e88f1409c3feac0bb7eba7f3d51cf3" name="a97e88f1409c3feac0bb7eba7f3d51cf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97e88f1409c3feac0bb7eba7f3d51cf3">&#9670;&#160;</a></span>test_refit_callable_invalid_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_refit_callable_invalid_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test implementation catches the errors when 'best_index_' returns an
invalid result.
</pre> <div class="fragment"><div class="line"><span class="lineno">  653</span><span class="keyword">def </span>test_refit_callable_invalid_type():</div>
<div class="line"><span class="lineno">  654</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  655</span><span class="stringliteral">    Test implementation catches the errors when &#39;best_index_&#39; returns an</span></div>
<div class="line"><span class="lineno">  656</span><span class="stringliteral">    invalid result.</span></div>
<div class="line"><span class="lineno">  657</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  658</span> </div>
<div class="line"><span class="lineno">  659</span>    <span class="keyword">def </span>refit_callable_invalid_type(cv_results):</div>
<div class="line"><span class="lineno">  660</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  661</span><span class="stringliteral">        A dummy function tests when returned &#39;best_index_&#39; is not integer.</span></div>
<div class="line"><span class="lineno">  662</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  663</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  664</span> </div>
<div class="line"><span class="lineno">  665</span>    X, y = make_classification(n_samples=100, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span>    clf = GridSearchCV(</div>
<div class="line"><span class="lineno">  668</span>        LinearSVC(random_state=42),</div>
<div class="line"><span class="lineno">  669</span>        {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]},</div>
<div class="line"><span class="lineno">  670</span>        scoring=<span class="stringliteral">&quot;precision&quot;</span>,</div>
<div class="line"><span class="lineno">  671</span>        refit=refit_callable_invalid_type,</div>
<div class="line"><span class="lineno">  672</span>    )</div>
<div class="line"><span class="lineno">  673</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=<span class="stringliteral">&quot;best_index_ returned is not an integer&quot;</span>):</div>
<div class="line"><span class="lineno">  674</span>        clf.fit(X, y)</div>
<div class="line"><span class="lineno">  675</span> </div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span><span class="preprocessor">@pytest.mark.parametrize(&quot;out_bound_value&quot;, [-1, 2])</span></div>
<div class="line"><span class="lineno">  678</span><span class="preprocessor">@pytest.mark.parametrize(&quot;search_cv&quot;, [RandomizedSearchCV, GridSearchCV])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf0bb38c41d8d867acb457aeecc669d0" name="adf0bb38c41d8d867acb457aeecc669d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf0bb38c41d8d867acb457aeecc669d0">&#9670;&#160;</a></span>test_refit_callable_multi_metric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_refit_callable_multi_metric </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test refit=callable in multiple metric evaluation setting
</pre> <div class="fragment"><div class="line"><span class="lineno">  703</span><span class="keyword">def </span>test_refit_callable_multi_metric():</div>
<div class="line"><span class="lineno">  704</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  705</span><span class="stringliteral">    Test refit=callable in multiple metric evaluation setting</span></div>
<div class="line"><span class="lineno">  706</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span>    <span class="keyword">def </span>refit_callable(cv_results):</div>
<div class="line"><span class="lineno">  709</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  710</span><span class="stringliteral">        A dummy function tests `refit=callable` interface.</span></div>
<div class="line"><span class="lineno">  711</span><span class="stringliteral">        Return the index of a model that has the least</span></div>
<div class="line"><span class="lineno">  712</span><span class="stringliteral">        `mean_test_prec`.</span></div>
<div class="line"><span class="lineno">  713</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  714</span>        <span class="keyword">assert</span> <span class="stringliteral">&quot;mean_test_prec&quot;</span> <span class="keywordflow">in</span> cv_results</div>
<div class="line"><span class="lineno">  715</span>        <span class="keywordflow">return</span> cv_results[<span class="stringliteral">&quot;mean_test_prec&quot;</span>].argmin()</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>    X, y = make_classification(n_samples=100, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno">  718</span>    scoring = {<span class="stringliteral">&quot;Accuracy&quot;</span>: make_scorer(accuracy_score), <span class="stringliteral">&quot;prec&quot;</span>: <span class="stringliteral">&quot;precision&quot;</span>}</div>
<div class="line"><span class="lineno">  719</span>    clf = GridSearchCV(</div>
<div class="line"><span class="lineno">  720</span>        LinearSVC(random_state=42),</div>
<div class="line"><span class="lineno">  721</span>        {<span class="stringliteral">&quot;C&quot;</span>: [0.01, 0.1, 1]},</div>
<div class="line"><span class="lineno">  722</span>        scoring=scoring,</div>
<div class="line"><span class="lineno">  723</span>        refit=refit_callable,</div>
<div class="line"><span class="lineno">  724</span>    )</div>
<div class="line"><span class="lineno">  725</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>    <span class="keyword">assert</span> clf.best_index_ == 0</div>
<div class="line"><span class="lineno">  728</span>    <span class="comment"># Ensure `best_score_` is disabled when using `refit=callable`</span></div>
<div class="line"><span class="lineno">  729</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(clf, <span class="stringliteral">&quot;best_score_&quot;</span>)</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a810c940f3e7f07d599e0573aa49ec37f" name="a810c940f3e7f07d599e0573aa49ec37f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a810c940f3e7f07d599e0573aa49ec37f">&#9670;&#160;</a></span>test_refit_callable_out_bound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_refit_callable_out_bound </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>out_bound_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_cv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test implementation catches the errors when 'best_index_' returns an
out of bound result.
</pre> <div class="fragment"><div class="line"><span class="lineno">  679</span><span class="keyword">def </span>test_refit_callable_out_bound(out_bound_value, search_cv):</div>
<div class="line"><span class="lineno">  680</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  681</span><span class="stringliteral">    Test implementation catches the errors when &#39;best_index_&#39; returns an</span></div>
<div class="line"><span class="lineno">  682</span><span class="stringliteral">    out of bound result.</span></div>
<div class="line"><span class="lineno">  683</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span>    <span class="keyword">def </span>refit_callable_out_bound(cv_results):</div>
<div class="line"><span class="lineno">  686</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  687</span><span class="stringliteral">        A dummy function tests when returned &#39;best_index_&#39; is out of bounds.</span></div>
<div class="line"><span class="lineno">  688</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  689</span>        <span class="keywordflow">return</span> out_bound_value</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>    X, y = make_classification(n_samples=100, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>    clf = search_cv(</div>
<div class="line"><span class="lineno">  694</span>        LinearSVC(random_state=42),</div>
<div class="line"><span class="lineno">  695</span>        {<span class="stringliteral">&quot;C&quot;</span>: [0.1, 1]},</div>
<div class="line"><span class="lineno">  696</span>        scoring=<span class="stringliteral">&quot;precision&quot;</span>,</div>
<div class="line"><span class="lineno">  697</span>        refit=refit_callable_out_bound,</div>
<div class="line"><span class="lineno">  698</span>    )</div>
<div class="line"><span class="lineno">  699</span>    <span class="keyword">with</span> pytest.raises(IndexError, match=<span class="stringliteral">&quot;best_index_ index out of range&quot;</span>):</div>
<div class="line"><span class="lineno">  700</span>        clf.fit(X, y)</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afd2bacc2fa31b3a3993ae6d43e5682a8" name="afd2bacc2fa31b3a3993ae6d43e5682a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2bacc2fa31b3a3993ae6d43e5682a8">&#9670;&#160;</a></span>test_scalar_fit_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_scalar_fit_param </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>SearchCV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>param_search</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2286</span><span class="keyword">def </span>test_scalar_fit_param(SearchCV, param_search):</div>
<div class="line"><span class="lineno"> 2287</span>    <span class="comment"># unofficially sanctioned tolerance for scalar values in fit_params</span></div>
<div class="line"><span class="lineno"> 2288</span>    <span class="comment"># non-regression test for:</span></div>
<div class="line"><span class="lineno"> 2289</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/15805</span></div>
<div class="line"><span class="lineno"> 2290</span>    <span class="keyword">class </span>TestEstimator(ClassifierMixin, BaseEstimator):</div>
<div class="line"><span class="lineno"> 2291</span>        <span class="keyword">def </span>__init__(self, a=None):</div>
<div class="line"><span class="lineno"> 2292</span>            self.a = a</div>
<div class="line"><span class="lineno"> 2293</span> </div>
<div class="line"><span class="lineno"> 2294</span>        <span class="keyword">def </span>fit(self, X, y, r=None):</div>
<div class="line"><span class="lineno"> 2295</span>            self.r_ = r</div>
<div class="line"><span class="lineno"> 2296</span> </div>
<div class="line"><span class="lineno"> 2297</span>        <span class="keyword">def </span>predict(self, X):</div>
<div class="line"><span class="lineno"> 2298</span>            <span class="keywordflow">return</span> np.zeros(shape=(len(X)))</div>
<div class="line"><span class="lineno"> 2299</span> </div>
<div class="line"><span class="lineno"> 2300</span>    model = SearchCV(TestEstimator(), param_search)</div>
<div class="line"><span class="lineno"> 2301</span>    X, y = make_classification(random_state=42)</div>
<div class="line"><span class="lineno"> 2302</span>    model.fit(X, y, r=42)</div>
<div class="line"><span class="lineno"> 2303</span>    <span class="keyword">assert</span> model.best_estimator_.r_ == 42</div>
<div class="line"><span class="lineno"> 2304</span> </div>
<div class="line"><span class="lineno"> 2305</span> </div>
<div class="line"><span class="lineno"> 2306</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 2307</span>    <span class="stringliteral">&quot;SearchCV, param_search&quot;</span>,</div>
<div class="line"><span class="lineno"> 2308</span>    [</div>
<div class="line"><span class="lineno"> 2309</span>        (GridSearchCV, {<span class="stringliteral">&quot;alpha&quot;</span>: [0.1, 0.01]}),</div>
<div class="line"><span class="lineno"> 2310</span>        (RandomizedSearchCV, {<span class="stringliteral">&quot;alpha&quot;</span>: uniform(0.01, 0.1)}),</div>
<div class="line"><span class="lineno"> 2311</span>    ],</div>
<div class="line"><span class="lineno"> 2312</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a810f493fd97bfe731973fd00fc93c2f7" name="a810f493fd97bfe731973fd00fc93c2f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a810f493fd97bfe731973fd00fc93c2f7">&#9670;&#160;</a></span>test_scalar_fit_param_compat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_scalar_fit_param_compat </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>SearchCV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>param_search</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2313</span><span class="keyword">def </span>test_scalar_fit_param_compat(SearchCV, param_search):</div>
<div class="line"><span class="lineno"> 2314</span>    <span class="comment"># check support for scalar values in fit_params, for instance in LightGBM</span></div>
<div class="line"><span class="lineno"> 2315</span>    <span class="comment"># that do not exactly respect the scikit-learn API contract but that we do</span></div>
<div class="line"><span class="lineno"> 2316</span>    <span class="comment"># not want to break without an explicit deprecation cycle and API</span></div>
<div class="line"><span class="lineno"> 2317</span>    <span class="comment"># recommendations for implementing early stopping with a user provided</span></div>
<div class="line"><span class="lineno"> 2318</span>    <span class="comment"># validation set. non-regression test for:</span></div>
<div class="line"><span class="lineno"> 2319</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/15805</span></div>
<div class="line"><span class="lineno"> 2320</span>    X_train, X_valid, y_train, y_valid = train_test_split(</div>
<div class="line"><span class="lineno"> 2321</span>        *make_classification(random_state=42), random_state=42</div>
<div class="line"><span class="lineno"> 2322</span>    )</div>
<div class="line"><span class="lineno"> 2323</span> </div>
<div class="line"><span class="lineno"> 2324</span>    <span class="keyword">class </span>_FitParamClassifier(SGDClassifier):</div>
<div class="line"><span class="lineno"> 2325</span>        <span class="keyword">def </span>fit(</div>
<div class="line"><span class="lineno"> 2326</span>            self,</div>
<div class="line"><span class="lineno"> 2327</span>            X,</div>
<div class="line"><span class="lineno"> 2328</span>            y,</div>
<div class="line"><span class="lineno"> 2329</span>            sample_weight=None,</div>
<div class="line"><span class="lineno"> 2330</span>            tuple_of_arrays=None,</div>
<div class="line"><span class="lineno"> 2331</span>            scalar_param=None,</div>
<div class="line"><span class="lineno"> 2332</span>            callable_param=None,</div>
<div class="line"><span class="lineno"> 2333</span>        ):</div>
<div class="line"><span class="lineno"> 2334</span>            super().fit(X, y, sample_weight=sample_weight)</div>
<div class="line"><span class="lineno"> 2335</span>            <span class="keyword">assert</span> scalar_param &gt; 0</div>
<div class="line"><span class="lineno"> 2336</span>            <span class="keyword">assert</span> callable(callable_param)</div>
<div class="line"><span class="lineno"> 2337</span> </div>
<div class="line"><span class="lineno"> 2338</span>            <span class="comment"># The tuple of arrays should be preserved as tuple.</span></div>
<div class="line"><span class="lineno"> 2339</span>            <span class="keyword">assert</span> isinstance(tuple_of_arrays, tuple)</div>
<div class="line"><span class="lineno"> 2340</span>            <span class="keyword">assert</span> tuple_of_arrays[0].ndim == 2</div>
<div class="line"><span class="lineno"> 2341</span>            <span class="keyword">assert</span> tuple_of_arrays[1].ndim == 1</div>
<div class="line"><span class="lineno"> 2342</span>            <span class="keywordflow">return</span> self</div>
<div class="line"><span class="lineno"> 2343</span> </div>
<div class="line"><span class="lineno"> 2344</span>    <span class="keyword">def </span>_fit_param_callable():</div>
<div class="line"><span class="lineno"> 2345</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 2346</span> </div>
<div class="line"><span class="lineno"> 2347</span>    model = SearchCV(_FitParamClassifier(), param_search)</div>
<div class="line"><span class="lineno"> 2348</span> </div>
<div class="line"><span class="lineno"> 2349</span>    <span class="comment"># NOTE: `fit_params` should be data dependent (e.g. `sample_weight`) which</span></div>
<div class="line"><span class="lineno"> 2350</span>    <span class="comment"># is not the case for the following parameters. But this abuse is common in</span></div>
<div class="line"><span class="lineno"> 2351</span>    <span class="comment"># popular third-party libraries and we should tolerate this behavior for</span></div>
<div class="line"><span class="lineno"> 2352</span>    <span class="comment"># now and be careful not to break support for those without following</span></div>
<div class="line"><span class="lineno"> 2353</span>    <span class="comment"># proper deprecation cycle.</span></div>
<div class="line"><span class="lineno"> 2354</span>    fit_params = {</div>
<div class="line"><span class="lineno"> 2355</span>        <span class="stringliteral">&quot;tuple_of_arrays&quot;</span>: (X_valid, y_valid),</div>
<div class="line"><span class="lineno"> 2356</span>        <span class="stringliteral">&quot;callable_param&quot;</span>: _fit_param_callable,</div>
<div class="line"><span class="lineno"> 2357</span>        <span class="stringliteral">&quot;scalar_param&quot;</span>: 42,</div>
<div class="line"><span class="lineno"> 2358</span>    }</div>
<div class="line"><span class="lineno"> 2359</span>    model.fit(X_train, y_train, **fit_params)</div>
<div class="line"><span class="lineno"> 2360</span> </div>
<div class="line"><span class="lineno"> 2361</span> </div>
<div class="line"><span class="lineno"> 2362</span><span class="comment"># FIXME: Replace this test with a full `check_estimator` once we have API only</span></div>
<div class="line"><span class="lineno"> 2363</span><span class="comment"># checks.</span></div>
<div class="line"><span class="lineno"> 2364</span><span class="preprocessor">@pytest.mark.filterwarnings(&quot;ignore:The total space of parameters 4 is&quot;)</span></div>
<div class="line"><span class="lineno"> 2365</span><span class="preprocessor">@pytest.mark.parametrize(&quot;SearchCV&quot;, [GridSearchCV, RandomizedSearchCV])</span></div>
<div class="line"><span class="lineno"> 2366</span><span class="preprocessor">@pytest.mark.parametrize(&quot;Predictor&quot;, [MinimalRegressor, MinimalClassifier])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d04b0c84dab252df6f2b05a35edc7c1" name="a6d04b0c84dab252df6f2b05a35edc7c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d04b0c84dab252df6f2b05a35edc7c1">&#9670;&#160;</a></span>test_search_cv__pairwise_property_delegated_to_base_estimator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv__pairwise_property_delegated_to_base_estimator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test implementation of BaseSearchCV has the pairwise property
which matches the pairwise tag of its estimator.
This test make sure pairwise tag is delegated to the base estimator.

Non-regression test for issue #13920.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 2227</span><span class="keyword">def </span>test_search_cv__pairwise_property_delegated_to_base_estimator():</div>
<div class="line"><span class="lineno"> 2228</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2229</span><span class="stringliteral">    Test implementation of BaseSearchCV has the pairwise property</span></div>
<div class="line"><span class="lineno"> 2230</span><span class="stringliteral">    which matches the pairwise tag of its estimator.</span></div>
<div class="line"><span class="lineno"> 2231</span><span class="stringliteral">    This test make sure pairwise tag is delegated to the base estimator.</span></div>
<div class="line"><span class="lineno"> 2232</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2233</span><span class="stringliteral">    Non-regression test for issue #13920.</span></div>
<div class="line"><span class="lineno"> 2234</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2235</span> </div>
<div class="line"><span class="lineno"> 2236</span>    <span class="keyword">class </span>EstimatorPairwise(BaseEstimator):</div>
<div class="line"><span class="lineno"> 2237</span>        <span class="keyword">def </span>__init__(self, pairwise=True):</div>
<div class="line"><span class="lineno"> 2238</span>            self.pairwise = pairwise</div>
<div class="line"><span class="lineno"> 2239</span> </div>
<div class="line"><span class="lineno"> 2240</span>        <span class="keyword">def </span>_more_tags(self):</div>
<div class="line"><span class="lineno"> 2241</span>            <span class="keywordflow">return</span> {<span class="stringliteral">&quot;pairwise&quot;</span>: self.pairwise}</div>
<div class="line"><span class="lineno"> 2242</span> </div>
<div class="line"><span class="lineno"> 2243</span>    est = EstimatorPairwise()</div>
<div class="line"><span class="lineno"> 2244</span>    attr_message = <span class="stringliteral">&quot;BaseSearchCV _pairwise property must match estimator&quot;</span></div>
<div class="line"><span class="lineno"> 2245</span> </div>
<div class="line"><span class="lineno"> 2246</span>    <span class="keywordflow">for</span> _pairwise_setting <span class="keywordflow">in</span> [<span class="keyword">True</span>, <span class="keyword">False</span>]:</div>
<div class="line"><span class="lineno"> 2247</span>        est.set_params(pairwise=_pairwise_setting)</div>
<div class="line"><span class="lineno"> 2248</span>        cv = GridSearchCV(est, {<span class="stringliteral">&quot;n_neighbors&quot;</span>: [10]})</div>
<div class="line"><span class="lineno"> 2249</span>        <span class="keyword">assert</span> _pairwise_setting == cv._get_tags()[<span class="stringliteral">&quot;pairwise&quot;</span>], attr_message</div>
<div class="line"><span class="lineno"> 2250</span> </div>
<div class="line"><span class="lineno"> 2251</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1890500ee712b71316b658234abc520d" name="a1890500ee712b71316b658234abc520d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1890500ee712b71316b658234abc520d">&#9670;&#160;</a></span>test_search_cv_pairwise_property_delegated_to_base_estimator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_pairwise_property_delegated_to_base_estimator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pairwise</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test implementation of BaseSearchCV has the pairwise tag
which matches the pairwise tag of its estimator.
This test make sure pairwise tag is delegated to the base estimator.

Non-regression test for issue #13920.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 2208</span><span class="keyword">def </span>test_search_cv_pairwise_property_delegated_to_base_estimator(pairwise):</div>
<div class="line"><span class="lineno"> 2209</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2210</span><span class="stringliteral">    Test implementation of BaseSearchCV has the pairwise tag</span></div>
<div class="line"><span class="lineno"> 2211</span><span class="stringliteral">    which matches the pairwise tag of its estimator.</span></div>
<div class="line"><span class="lineno"> 2212</span><span class="stringliteral">    This test make sure pairwise tag is delegated to the base estimator.</span></div>
<div class="line"><span class="lineno"> 2213</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2214</span><span class="stringliteral">    Non-regression test for issue #13920.</span></div>
<div class="line"><span class="lineno"> 2215</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2216</span> </div>
<div class="line"><span class="lineno"> 2217</span>    <span class="keyword">class </span>TestEstimator(BaseEstimator):</div>
<div class="line"><span class="lineno"> 2218</span>        <span class="keyword">def </span>_more_tags(self):</div>
<div class="line"><span class="lineno"> 2219</span>            <span class="keywordflow">return</span> {<span class="stringliteral">&quot;pairwise&quot;</span>: pairwise}</div>
<div class="line"><span class="lineno"> 2220</span> </div>
<div class="line"><span class="lineno"> 2221</span>    est = TestEstimator()</div>
<div class="line"><span class="lineno"> 2222</span>    attr_message = <span class="stringliteral">&quot;BaseSearchCV pairwise tag must match estimator&quot;</span></div>
<div class="line"><span class="lineno"> 2223</span>    cv = GridSearchCV(est, {<span class="stringliteral">&quot;n_neighbors&quot;</span>: [10]})</div>
<div class="line"><span class="lineno"> 2224</span>    <span class="keyword">assert</span> pairwise == cv._get_tags()[<span class="stringliteral">&quot;pairwise&quot;</span>], attr_message</div>
<div class="line"><span class="lineno"> 2225</span> </div>
<div class="line"><span class="lineno"> 2226</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a30153c8ad00e1464da407d38015de3e2" name="a30153c8ad00e1464da407d38015de3e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30153c8ad00e1464da407d38015de3e2">&#9670;&#160;</a></span>test_search_cv_pairwise_property_equivalence_of_precomputed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_pairwise_property_equivalence_of_precomputed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test implementation of BaseSearchCV has the pairwise tag
which matches the pairwise tag of its estimator.
This test ensures the equivalence of 'precomputed'.

Non-regression test for issue #13920.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 2252</span><span class="keyword">def </span>test_search_cv_pairwise_property_equivalence_of_precomputed():</div>
<div class="line"><span class="lineno"> 2253</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2254</span><span class="stringliteral">    Test implementation of BaseSearchCV has the pairwise tag</span></div>
<div class="line"><span class="lineno"> 2255</span><span class="stringliteral">    which matches the pairwise tag of its estimator.</span></div>
<div class="line"><span class="lineno"> 2256</span><span class="stringliteral">    This test ensures the equivalence of &#39;precomputed&#39;.</span></div>
<div class="line"><span class="lineno"> 2257</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 2258</span><span class="stringliteral">    Non-regression test for issue #13920.</span></div>
<div class="line"><span class="lineno"> 2259</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2260</span>    n_samples = 50</div>
<div class="line"><span class="lineno"> 2261</span>    n_splits = 2</div>
<div class="line"><span class="lineno"> 2262</span>    X, y = make_classification(n_samples=n_samples, random_state=0)</div>
<div class="line"><span class="lineno"> 2263</span>    grid_params = {<span class="stringliteral">&quot;n_neighbors&quot;</span>: [10]}</div>
<div class="line"><span class="lineno"> 2264</span> </div>
<div class="line"><span class="lineno"> 2265</span>    <span class="comment"># defaults to euclidean metric (minkowski p = 2)</span></div>
<div class="line"><span class="lineno"> 2266</span>    clf = KNeighborsClassifier()</div>
<div class="line"><span class="lineno"> 2267</span>    cv = GridSearchCV(clf, grid_params, cv=n_splits)</div>
<div class="line"><span class="lineno"> 2268</span>    cv.fit(X, y)</div>
<div class="line"><span class="lineno"> 2269</span>    preds_original = cv.predict(X)</div>
<div class="line"><span class="lineno"> 2270</span> </div>
<div class="line"><span class="lineno"> 2271</span>    <span class="comment"># precompute euclidean metric to validate pairwise is working</span></div>
<div class="line"><span class="lineno"> 2272</span>    X_precomputed = euclidean_distances(X)</div>
<div class="line"><span class="lineno"> 2273</span>    clf = KNeighborsClassifier(metric=<span class="stringliteral">&quot;precomputed&quot;</span>)</div>
<div class="line"><span class="lineno"> 2274</span>    cv = GridSearchCV(clf, grid_params, cv=n_splits)</div>
<div class="line"><span class="lineno"> 2275</span>    cv.fit(X_precomputed, y)</div>
<div class="line"><span class="lineno"> 2276</span>    preds_precomputed = cv.predict(X_precomputed)</div>
<div class="line"><span class="lineno"> 2277</span> </div>
<div class="line"><span class="lineno"> 2278</span>    attr_message = <span class="stringliteral">&quot;GridSearchCV not identical with precomputed metric&quot;</span></div>
<div class="line"><span class="lineno"> 2279</span>    <span class="keyword">assert</span> (preds_original == preds_precomputed).all(), attr_message</div>
<div class="line"><span class="lineno"> 2280</span> </div>
<div class="line"><span class="lineno"> 2281</span> </div>
<div class="line"><span class="lineno"> 2282</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 2283</span>    <span class="stringliteral">&quot;SearchCV, param_search&quot;</span>,</div>
<div class="line"><span class="lineno"> 2284</span>    [(GridSearchCV, {<span class="stringliteral">&quot;a&quot;</span>: [0.1, 0.01]}), (RandomizedSearchCV, {<span class="stringliteral">&quot;a&quot;</span>: uniform(1, 3)})],</div>
<div class="line"><span class="lineno"> 2285</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d1a2a6632a094f3d1ee68da74aebb65" name="a4d1a2a6632a094f3d1ee68da74aebb65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d1a2a6632a094f3d1ee68da74aebb65">&#9670;&#160;</a></span>test_search_cv_results_none_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_results_none_param </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1352</span><span class="keyword">def </span>test_search_cv_results_none_param():</div>
<div class="line"><span class="lineno"> 1353</span>    X, y = [[1], [2], [3], [4], [5]], [0, 0, 0, 0, 1]</div>
<div class="line"><span class="lineno"> 1354</span>    estimators = (DecisionTreeRegressor(), DecisionTreeClassifier())</div>
<div class="line"><span class="lineno"> 1355</span>    est_parameters = {<span class="stringliteral">&quot;random_state&quot;</span>: [0, <span class="keywordtype">None</span>]}</div>
<div class="line"><span class="lineno"> 1356</span>    cv = KFold()</div>
<div class="line"><span class="lineno"> 1357</span> </div>
<div class="line"><span class="lineno"> 1358</span>    <span class="keywordflow">for</span> est <span class="keywordflow">in</span> estimators:</div>
<div class="line"><span class="lineno"> 1359</span>        grid_search = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1360</span>            est,</div>
<div class="line"><span class="lineno"> 1361</span>            est_parameters,</div>
<div class="line"><span class="lineno"> 1362</span>            cv=cv,</div>
<div class="line"><span class="lineno"> 1363</span>        ).fit(X, y)</div>
<div class="line"><span class="lineno"> 1364</span>        assert_array_equal(grid_search.cv_results_[<span class="stringliteral">&quot;param_random_state&quot;</span>], [0, <span class="keywordtype">None</span>])</div>
<div class="line"><span class="lineno"> 1365</span> </div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span><span class="preprocessor">@ignore_warnings()</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a640c0955f560cb708cbddca5ef9bf9" name="a2a640c0955f560cb708cbddca5ef9bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a640c0955f560cb708cbddca5ef9bf9">&#9670;&#160;</a></span>test_search_cv_results_rank_tie_breaking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_results_rank_tie_breaking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1318</span><span class="keyword">def </span>test_search_cv_results_rank_tie_breaking():</div>
<div class="line"><span class="lineno"> 1319</span>    X, y = make_blobs(n_samples=50, random_state=42)</div>
<div class="line"><span class="lineno"> 1320</span> </div>
<div class="line"><span class="lineno"> 1321</span>    <span class="comment"># The two C values are close enough to give similar models</span></div>
<div class="line"><span class="lineno"> 1322</span>    <span class="comment"># which would result in a tie of their mean cv-scores</span></div>
<div class="line"><span class="lineno"> 1323</span>    param_grid = {<span class="stringliteral">&quot;C&quot;</span>: [1, 1.001, 0.001]}</div>
<div class="line"><span class="lineno"> 1324</span> </div>
<div class="line"><span class="lineno"> 1325</span>    grid_search = GridSearchCV(SVC(), param_grid=param_grid, return_train_score=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1326</span>    random_search = RandomizedSearchCV(</div>
<div class="line"><span class="lineno"> 1327</span>        SVC(), n_iter=3, param_distributions=param_grid, return_train_score=<span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1328</span>    )</div>
<div class="line"><span class="lineno"> 1329</span> </div>
<div class="line"><span class="lineno"> 1330</span>    <span class="keywordflow">for</span> search <span class="keywordflow">in</span> (grid_search, random_search):</div>
<div class="line"><span class="lineno"> 1331</span>        search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1332</span>        cv_results = search.cv_results_</div>
<div class="line"><span class="lineno"> 1333</span>        <span class="comment"># Check tie breaking strategy -</span></div>
<div class="line"><span class="lineno"> 1334</span>        <span class="comment"># Check that there is a tie in the mean scores between</span></div>
<div class="line"><span class="lineno"> 1335</span>        <span class="comment"># candidates 1 and 2 alone</span></div>
<div class="line"><span class="lineno"> 1336</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1337</span>            cv_results[<span class="stringliteral">&quot;mean_test_score&quot;</span>][0], cv_results[<span class="stringliteral">&quot;mean_test_score&quot;</span>][1]</div>
<div class="line"><span class="lineno"> 1338</span>        )</div>
<div class="line"><span class="lineno"> 1339</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno"> 1340</span>            cv_results[<span class="stringliteral">&quot;mean_train_score&quot;</span>][0], cv_results[<span class="stringliteral">&quot;mean_train_score&quot;</span>][1]</div>
<div class="line"><span class="lineno"> 1341</span>        )</div>
<div class="line"><span class="lineno"> 1342</span>        <span class="keyword">assert</span> <span class="keywordflow">not</span> np.allclose(</div>
<div class="line"><span class="lineno"> 1343</span>            cv_results[<span class="stringliteral">&quot;mean_test_score&quot;</span>][1], cv_results[<span class="stringliteral">&quot;mean_test_score&quot;</span>][2]</div>
<div class="line"><span class="lineno"> 1344</span>        )</div>
<div class="line"><span class="lineno"> 1345</span>        <span class="keyword">assert</span> <span class="keywordflow">not</span> np.allclose(</div>
<div class="line"><span class="lineno"> 1346</span>            cv_results[<span class="stringliteral">&quot;mean_train_score&quot;</span>][1], cv_results[<span class="stringliteral">&quot;mean_train_score&quot;</span>][2]</div>
<div class="line"><span class="lineno"> 1347</span>        )</div>
<div class="line"><span class="lineno"> 1348</span>        <span class="comment"># &#39;min&#39; rank should be assigned to the tied candidates</span></div>
<div class="line"><span class="lineno"> 1349</span>        assert_almost_equal(search.cv_results_[<span class="stringliteral">&quot;rank_test_score&quot;</span>], [1, 1, 3])</div>
<div class="line"><span class="lineno"> 1350</span> </div>
<div class="line"><span class="lineno"> 1351</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a191d85fd4a7117418964487565fadb51" name="a191d85fd4a7117418964487565fadb51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a191d85fd4a7117418964487565fadb51">&#9670;&#160;</a></span>test_search_cv_score_samples_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_score_samples_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_cv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1258</span><span class="keyword">def </span>test_search_cv_score_samples_error(search_cv):</div>
<div class="line"><span class="lineno"> 1259</span>    X, y = make_blobs(n_samples=100, n_features=4, random_state=42)</div>
<div class="line"><span class="lineno"> 1260</span>    search_cv.fit(X, y)</div>
<div class="line"><span class="lineno"> 1261</span> </div>
<div class="line"><span class="lineno"> 1262</span>    <span class="comment"># Make sure to error out when underlying estimator does not implement</span></div>
<div class="line"><span class="lineno"> 1263</span>    <span class="comment"># the method `score_samples`</span></div>
<div class="line"><span class="lineno"> 1264</span>    err_msg = <span class="stringliteral">&quot;&#39;DecisionTreeClassifier&#39; object has no attribute &#39;score_samples&#39;&quot;</span></div>
<div class="line"><span class="lineno"> 1265</span> </div>
<div class="line"><span class="lineno"> 1266</span>    <span class="keyword">with</span> pytest.raises(AttributeError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1267</span>        search_cv.score_samples(X)</div>
<div class="line"><span class="lineno"> 1268</span> </div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1271</span>    <span class="stringliteral">&quot;search_cv&quot;</span>,</div>
<div class="line"><span class="lineno"> 1272</span>    [</div>
<div class="line"><span class="lineno"> 1273</span>        RandomizedSearchCV(</div>
<div class="line"><span class="lineno"> 1274</span>            estimator=LocalOutlierFactor(novelty=<span class="keyword">True</span>),</div>
<div class="line"><span class="lineno"> 1275</span>            param_distributions={<span class="stringliteral">&quot;n_neighbors&quot;</span>: [5, 10]},</div>
<div class="line"><span class="lineno"> 1276</span>            scoring=<span class="stringliteral">&quot;precision&quot;</span>,</div>
<div class="line"><span class="lineno"> 1277</span>        ),</div>
<div class="line"><span class="lineno"> 1278</span>        GridSearchCV(</div>
<div class="line"><span class="lineno"> 1279</span>            estimator=LocalOutlierFactor(novelty=<span class="keyword">True</span>),</div>
<div class="line"><span class="lineno"> 1280</span>            param_grid={<span class="stringliteral">&quot;n_neighbors&quot;</span>: [5, 10]},</div>
<div class="line"><span class="lineno"> 1281</span>            scoring=<span class="stringliteral">&quot;precision&quot;</span>,</div>
<div class="line"><span class="lineno"> 1282</span>        ),</div>
<div class="line"><span class="lineno"> 1283</span>    ],</div>
<div class="line"><span class="lineno"> 1284</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9688b7bd83fd10da8b5ff08bb4cce3e2" name="a9688b7bd83fd10da8b5ff08bb4cce3e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9688b7bd83fd10da8b5ff08bb4cce3e2">&#9670;&#160;</a></span>test_search_cv_score_samples_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_score_samples_method </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>search_cv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1285</span><span class="keyword">def </span>test_search_cv_score_samples_method(search_cv):</div>
<div class="line"><span class="lineno"> 1286</span>    <span class="comment"># Set parameters</span></div>
<div class="line"><span class="lineno"> 1287</span>    rng = np.random.RandomState(42)</div>
<div class="line"><span class="lineno"> 1288</span>    n_samples = 300</div>
<div class="line"><span class="lineno"> 1289</span>    outliers_fraction = 0.15</div>
<div class="line"><span class="lineno"> 1290</span>    n_outliers = int(outliers_fraction * n_samples)</div>
<div class="line"><span class="lineno"> 1291</span>    n_inliers = n_samples - n_outliers</div>
<div class="line"><span class="lineno"> 1292</span> </div>
<div class="line"><span class="lineno"> 1293</span>    <span class="comment"># Create dataset</span></div>
<div class="line"><span class="lineno"> 1294</span>    X = make_blobs(</div>
<div class="line"><span class="lineno"> 1295</span>        n_samples=n_inliers,</div>
<div class="line"><span class="lineno"> 1296</span>        n_features=2,</div>
<div class="line"><span class="lineno"> 1297</span>        centers=[[0, 0], [0, 0]],</div>
<div class="line"><span class="lineno"> 1298</span>        cluster_std=0.5,</div>
<div class="line"><span class="lineno"> 1299</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 1300</span>    )[0]</div>
<div class="line"><span class="lineno"> 1301</span>    <span class="comment"># Add some noisy points</span></div>
<div class="line"><span class="lineno"> 1302</span>    X = np.concatenate([X, rng.uniform(low=-6, high=6, size=(n_outliers, 2))], axis=0)</div>
<div class="line"><span class="lineno"> 1303</span> </div>
<div class="line"><span class="lineno"> 1304</span>    <span class="comment"># Define labels to be able to score the estimator with `search_cv`</span></div>
<div class="line"><span class="lineno"> 1305</span>    y_true = np.array([1] * n_samples)</div>
<div class="line"><span class="lineno"> 1306</span>    y_true[-n_outliers:] = -1</div>
<div class="line"><span class="lineno"> 1307</span> </div>
<div class="line"><span class="lineno"> 1308</span>    <span class="comment"># Fit on data</span></div>
<div class="line"><span class="lineno"> 1309</span>    search_cv.fit(X, y_true)</div>
<div class="line"><span class="lineno"> 1310</span> </div>
<div class="line"><span class="lineno"> 1311</span>    <span class="comment"># Verify that the stand alone estimator yields the same results</span></div>
<div class="line"><span class="lineno"> 1312</span>    <span class="comment"># as the ones obtained with *SearchCV</span></div>
<div class="line"><span class="lineno"> 1313</span>    assert_allclose(</div>
<div class="line"><span class="lineno"> 1314</span>        search_cv.score_samples(X), search_cv.best_estimator_.score_samples(X)</div>
<div class="line"><span class="lineno"> 1315</span>    )</div>
<div class="line"><span class="lineno"> 1316</span> </div>
<div class="line"><span class="lineno"> 1317</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf64b932a625d15489cfd33f8ec69e96" name="aaf64b932a625d15489cfd33f8ec69e96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf64b932a625d15489cfd33f8ec69e96">&#9670;&#160;</a></span>test_search_cv_timing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_timing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1368</span><span class="keyword">def </span>test_search_cv_timing():</div>
<div class="line"><span class="lineno"> 1369</span>    svc = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>    X = [</div>
<div class="line"><span class="lineno"> 1372</span>        [</div>
<div class="line"><span class="lineno"> 1373</span>            1,</div>
<div class="line"><span class="lineno"> 1374</span>        ],</div>
<div class="line"><span class="lineno"> 1375</span>        [</div>
<div class="line"><span class="lineno"> 1376</span>            2,</div>
<div class="line"><span class="lineno"> 1377</span>        ],</div>
<div class="line"><span class="lineno"> 1378</span>        [</div>
<div class="line"><span class="lineno"> 1379</span>            3,</div>
<div class="line"><span class="lineno"> 1380</span>        ],</div>
<div class="line"><span class="lineno"> 1381</span>        [</div>
<div class="line"><span class="lineno"> 1382</span>            4,</div>
<div class="line"><span class="lineno"> 1383</span>        ],</div>
<div class="line"><span class="lineno"> 1384</span>    ]</div>
<div class="line"><span class="lineno"> 1385</span>    y = [0, 1, 1, 0]</div>
<div class="line"><span class="lineno"> 1386</span> </div>
<div class="line"><span class="lineno"> 1387</span>    gs = GridSearchCV(svc, {<span class="stringliteral">&quot;C&quot;</span>: [0, 1]}, cv=2, error_score=0)</div>
<div class="line"><span class="lineno"> 1388</span>    rs = RandomizedSearchCV(svc, {<span class="stringliteral">&quot;C&quot;</span>: [0, 1]}, cv=2, error_score=0, n_iter=2)</div>
<div class="line"><span class="lineno"> 1389</span> </div>
<div class="line"><span class="lineno"> 1390</span>    <span class="keywordflow">for</span> search <span class="keywordflow">in</span> (gs, rs):</div>
<div class="line"><span class="lineno"> 1391</span>        search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1392</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> [<span class="stringliteral">&quot;mean_fit_time&quot;</span>, <span class="stringliteral">&quot;std_fit_time&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1393</span>            <span class="comment"># NOTE The precision of time.time in windows is not high</span></div>
<div class="line"><span class="lineno"> 1394</span>            <span class="comment"># enough for the fit/score times to be non-zero for trivial X and y</span></div>
<div class="line"><span class="lineno"> 1395</span>            <span class="keyword">assert</span> np.all(search.cv_results_[key] &gt;= 0)</div>
<div class="line"><span class="lineno"> 1396</span>            <span class="keyword">assert</span> np.all(search.cv_results_[key] &lt; 1)</div>
<div class="line"><span class="lineno"> 1397</span> </div>
<div class="line"><span class="lineno"> 1398</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> [<span class="stringliteral">&quot;mean_score_time&quot;</span>, <span class="stringliteral">&quot;std_score_time&quot;</span>]:</div>
<div class="line"><span class="lineno"> 1399</span>            <span class="keyword">assert</span> search.cv_results_[key][1] &gt;= 0</div>
<div class="line"><span class="lineno"> 1400</span>            <span class="keyword">assert</span> search.cv_results_[key][0] == 0.0</div>
<div class="line"><span class="lineno"> 1401</span>            <span class="keyword">assert</span> np.all(search.cv_results_[key] &lt; 1)</div>
<div class="line"><span class="lineno"> 1402</span> </div>
<div class="line"><span class="lineno"> 1403</span>        <span class="keyword">assert</span> hasattr(search, <span class="stringliteral">&quot;refit_time_&quot;</span>)</div>
<div class="line"><span class="lineno"> 1404</span>        <span class="keyword">assert</span> isinstance(search.refit_time_, float)</div>
<div class="line"><span class="lineno"> 1405</span>        <span class="keyword">assert</span> search.refit_time_ &gt;= 0</div>
<div class="line"><span class="lineno"> 1406</span> </div>
<div class="line"><span class="lineno"> 1407</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ab223ad2555435b887e67506f778b7c" name="a3ab223ad2555435b887e67506f778b7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab223ad2555435b887e67506f778b7c">&#9670;&#160;</a></span>test_search_cv_using_minimal_compatible_estimator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_using_minimal_compatible_estimator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>SearchCV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Predictor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2367</span><span class="keyword">def </span>test_search_cv_using_minimal_compatible_estimator(SearchCV, Predictor):</div>
<div class="line"><span class="lineno"> 2368</span>    <span class="comment"># Check that third-party library can run tests without inheriting from</span></div>
<div class="line"><span class="lineno"> 2369</span>    <span class="comment"># BaseEstimator.</span></div>
<div class="line"><span class="lineno"> 2370</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno"> 2371</span>    X, y = rng.randn(25, 2), np.array([0] * 5 + [1] * 20)</div>
<div class="line"><span class="lineno"> 2372</span> </div>
<div class="line"><span class="lineno"> 2373</span>    model = Pipeline(</div>
<div class="line"><span class="lineno"> 2374</span>        [(<span class="stringliteral">&quot;transformer&quot;</span>, MinimalTransformer()), (<span class="stringliteral">&quot;predictor&quot;</span>, Predictor())]</div>
<div class="line"><span class="lineno"> 2375</span>    )</div>
<div class="line"><span class="lineno"> 2376</span> </div>
<div class="line"><span class="lineno"> 2377</span>    params = {</div>
<div class="line"><span class="lineno"> 2378</span>        <span class="stringliteral">&quot;transformer__param&quot;</span>: [1, 10],</div>
<div class="line"><span class="lineno"> 2379</span>        <span class="stringliteral">&quot;predictor__parama&quot;</span>: [1, 10],</div>
<div class="line"><span class="lineno"> 2380</span>    }</div>
<div class="line"><span class="lineno"> 2381</span>    search = SearchCV(model, params, error_score=<span class="stringliteral">&quot;raise&quot;</span>)</div>
<div class="line"><span class="lineno"> 2382</span>    search.fit(X, y)</div>
<div class="line"><span class="lineno"> 2383</span> </div>
<div class="line"><span class="lineno"> 2384</span>    <span class="keyword">assert</span> search.best_params_.keys() == params.keys()</div>
<div class="line"><span class="lineno"> 2385</span> </div>
<div class="line"><span class="lineno"> 2386</span>    y_pred = search.predict(X)</div>
<div class="line"><span class="lineno"> 2387</span>    <span class="keywordflow">if</span> is_classifier(search):</div>
<div class="line"><span class="lineno"> 2388</span>        assert_array_equal(y_pred, 1)</div>
<div class="line"><span class="lineno"> 2389</span>        <span class="keyword">assert</span> search.score(X, y) == pytest.approx(accuracy_score(y, y_pred))</div>
<div class="line"><span class="lineno"> 2390</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2391</span>        assert_allclose(y_pred, y.mean())</div>
<div class="line"><span class="lineno"> 2392</span>        <span class="keyword">assert</span> search.score(X, y) == pytest.approx(r2_score(y, y_pred))</div>
<div class="line"><span class="lineno"> 2393</span> </div>
<div class="line"><span class="lineno"> 2394</span> </div>
<div class="line"><span class="lineno"> 2395</span><span class="preprocessor">@pytest.mark.parametrize(&quot;return_train_score&quot;, [True, False])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4231e60d007e07eaea9ca41fd1ffdc13" name="a4231e60d007e07eaea9ca41fd1ffdc13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4231e60d007e07eaea9ca41fd1ffdc13">&#9670;&#160;</a></span>test_search_cv_verbose_3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_cv_verbose_3 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>capsys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>return_train_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that search cv with verbose&gt;2 shows the score for single
metrics. non-regression test for #19658.</pre> <div class="fragment"><div class="line"><span class="lineno"> 2396</span><span class="keyword">def </span>test_search_cv_verbose_3(capsys, return_train_score):</div>
<div class="line"><span class="lineno"> 2397</span>    <span class="stringliteral">&quot;&quot;&quot;Check that search cv with verbose&gt;2 shows the score for single</span></div>
<div class="line"><span class="lineno"> 2398</span><span class="stringliteral">    metrics. non-regression test for #19658.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2399</span>    X, y = make_classification(n_samples=100, n_classes=2, flip_y=0.2, random_state=0)</div>
<div class="line"><span class="lineno"> 2400</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno"> 2401</span>    grid = {<span class="stringliteral">&quot;C&quot;</span>: [0.1]}</div>
<div class="line"><span class="lineno"> 2402</span> </div>
<div class="line"><span class="lineno"> 2403</span>    GridSearchCV(</div>
<div class="line"><span class="lineno"> 2404</span>        clf,</div>
<div class="line"><span class="lineno"> 2405</span>        grid,</div>
<div class="line"><span class="lineno"> 2406</span>        scoring=<span class="stringliteral">&quot;accuracy&quot;</span>,</div>
<div class="line"><span class="lineno"> 2407</span>        verbose=3,</div>
<div class="line"><span class="lineno"> 2408</span>        cv=3,</div>
<div class="line"><span class="lineno"> 2409</span>        return_train_score=return_train_score,</div>
<div class="line"><span class="lineno"> 2410</span>    ).fit(X, y)</div>
<div class="line"><span class="lineno"> 2411</span>    captured = capsys.readouterr().out</div>
<div class="line"><span class="lineno"> 2412</span>    <span class="keywordflow">if</span> return_train_score:</div>
<div class="line"><span class="lineno"> 2413</span>        match = re.findall(<span class="stringliteral">r&quot;score=\&zwj;(train=[\d\.]+, test=[\d.]+\&zwj;)&quot;</span>, captured)</div>
<div class="line"><span class="lineno"> 2414</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 2415</span>        match = re.findall(<span class="stringliteral">r&quot;score=[\d\.]+&quot;</span>, captured)</div>
<div class="line"><span class="lineno"> 2416</span>    <span class="keyword">assert</span> len(match) == 3</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa701ac1e384d46ba8f88164edb5292cf" name="aa701ac1e384d46ba8f88164edb5292cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa701ac1e384d46ba8f88164edb5292cf">&#9670;&#160;</a></span>test_search_default_iid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_default_iid </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>SearchCV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>specialized_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1062</span><span class="keyword">def </span>test_search_default_iid(SearchCV, specialized_params):</div>
<div class="line"><span class="lineno"> 1063</span>    <span class="comment"># Test the IID parameter  TODO: Clearly this test does something else???</span></div>
<div class="line"><span class="lineno"> 1064</span>    <span class="comment"># noise-free simple 2d-data</span></div>
<div class="line"><span class="lineno"> 1065</span>    X, y = make_blobs(</div>
<div class="line"><span class="lineno"> 1066</span>        centers=[[0, 0], [1, 0], [0, 1], [1, 1]],</div>
<div class="line"><span class="lineno"> 1067</span>        random_state=0,</div>
<div class="line"><span class="lineno"> 1068</span>        cluster_std=0.1,</div>
<div class="line"><span class="lineno"> 1069</span>        shuffle=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1070</span>        n_samples=80,</div>
<div class="line"><span class="lineno"> 1071</span>    )</div>
<div class="line"><span class="lineno"> 1072</span>    <span class="comment"># split dataset into two folds that are not iid</span></div>
<div class="line"><span class="lineno"> 1073</span>    <span class="comment"># first one contains data of all 4 blobs, second only from two.</span></div>
<div class="line"><span class="lineno"> 1074</span>    mask = np.ones(X.shape[0], dtype=bool)</div>
<div class="line"><span class="lineno"> 1075</span>    mask[np.where(y == 1)[0][::2]] = 0</div>
<div class="line"><span class="lineno"> 1076</span>    mask[np.where(y == 2)[0][::2]] = 0</div>
<div class="line"><span class="lineno"> 1077</span>    <span class="comment"># this leads to perfect classification on one fold and a score of 1/3 on</span></div>
<div class="line"><span class="lineno"> 1078</span>    <span class="comment"># the other</span></div>
<div class="line"><span class="lineno"> 1079</span>    <span class="comment"># create &quot;cv&quot; for splits</span></div>
<div class="line"><span class="lineno"> 1080</span>    cv = [[mask, ~mask], [~mask, mask]]</div>
<div class="line"><span class="lineno"> 1081</span> </div>
<div class="line"><span class="lineno"> 1082</span>    common_params = {<span class="stringliteral">&quot;estimator&quot;</span>: SVC(), <span class="stringliteral">&quot;cv&quot;</span>: cv, <span class="stringliteral">&quot;return_train_score&quot;</span>: <span class="keyword">True</span>}</div>
<div class="line"><span class="lineno"> 1083</span>    search = SearchCV(**common_params, **specialized_params)</div>
<div class="line"><span class="lineno"> 1084</span>    search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>    test_cv_scores = np.array(</div>
<div class="line"><span class="lineno"> 1087</span>        [</div>
<div class="line"><span class="lineno"> 1088</span>            search.cv_results_[<span class="stringliteral">&quot;split%d_test_score&quot;</span> % s][0]</div>
<div class="line"><span class="lineno"> 1089</span>            <span class="keywordflow">for</span> s <span class="keywordflow">in</span> range(search.n_splits_)</div>
<div class="line"><span class="lineno"> 1090</span>        ]</div>
<div class="line"><span class="lineno"> 1091</span>    )</div>
<div class="line"><span class="lineno"> 1092</span>    test_mean = search.cv_results_[<span class="stringliteral">&quot;mean_test_score&quot;</span>][0]</div>
<div class="line"><span class="lineno"> 1093</span>    test_std = search.cv_results_[<span class="stringliteral">&quot;std_test_score&quot;</span>][0]</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>    train_cv_scores = np.array(</div>
<div class="line"><span class="lineno"> 1096</span>        [</div>
<div class="line"><span class="lineno"> 1097</span>            search.cv_results_[<span class="stringliteral">&quot;split%d_train_score&quot;</span> % s][0]</div>
<div class="line"><span class="lineno"> 1098</span>            <span class="keywordflow">for</span> s <span class="keywordflow">in</span> range(search.n_splits_)</div>
<div class="line"><span class="lineno"> 1099</span>        ]</div>
<div class="line"><span class="lineno"> 1100</span>    )</div>
<div class="line"><span class="lineno"> 1101</span>    train_mean = search.cv_results_[<span class="stringliteral">&quot;mean_train_score&quot;</span>][0]</div>
<div class="line"><span class="lineno"> 1102</span>    train_std = search.cv_results_[<span class="stringliteral">&quot;std_train_score&quot;</span>][0]</div>
<div class="line"><span class="lineno"> 1103</span> </div>
<div class="line"><span class="lineno"> 1104</span>    <span class="keyword">assert</span> search.cv_results_[<span class="stringliteral">&quot;param_C&quot;</span>][0] == 1</div>
<div class="line"><span class="lineno"> 1105</span>    <span class="comment"># scores are the same as above</span></div>
<div class="line"><span class="lineno"> 1106</span>    assert_allclose(test_cv_scores, [1, 1.0 / 3.0])</div>
<div class="line"><span class="lineno"> 1107</span>    assert_allclose(train_cv_scores, [1, 1])</div>
<div class="line"><span class="lineno"> 1108</span>    <span class="comment"># Unweighted mean/std is used</span></div>
<div class="line"><span class="lineno"> 1109</span>    <span class="keyword">assert</span> test_mean == pytest.approx(np.mean(test_cv_scores))</div>
<div class="line"><span class="lineno"> 1110</span>    <span class="keyword">assert</span> test_std == pytest.approx(np.std(test_cv_scores))</div>
<div class="line"><span class="lineno"> 1111</span> </div>
<div class="line"><span class="lineno"> 1112</span>    <span class="comment"># For the train scores, we do not take a weighted mean irrespective of</span></div>
<div class="line"><span class="lineno"> 1113</span>    <span class="comment"># i.i.d. or not</span></div>
<div class="line"><span class="lineno"> 1114</span>    <span class="keyword">assert</span> train_mean == pytest.approx(1)</div>
<div class="line"><span class="lineno"> 1115</span>    <span class="keyword">assert</span> train_std == pytest.approx(0)</div>
<div class="line"><span class="lineno"> 1116</span> </div>
<div class="line"><span class="lineno"> 1117</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f02a0629bfc4dbebcc640d6624286a5" name="a0f02a0629bfc4dbebcc640d6624286a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f02a0629bfc4dbebcc640d6624286a5">&#9670;&#160;</a></span>test_search_train_scores_set_to_false()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_search_train_scores_set_to_false </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1746</span><span class="keyword">def </span>test_search_train_scores_set_to_false():</div>
<div class="line"><span class="lineno"> 1747</span>    X = np.arange(6).reshape(6, -1)</div>
<div class="line"><span class="lineno"> 1748</span>    y = [0, 0, 0, 1, 1, 1]</div>
<div class="line"><span class="lineno"> 1749</span>    clf = LinearSVC(random_state=0)</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>    gs = GridSearchCV(clf, param_grid={<span class="stringliteral">&quot;C&quot;</span>: [0.1, 0.2]}, cv=3)</div>
<div class="line"><span class="lineno"> 1752</span>    gs.fit(X, y)</div>
<div class="line"><span class="lineno"> 1753</span> </div>
<div class="line"><span class="lineno"> 1754</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2a8911b5a52ad8e08cebbc598e73dcf" name="ab2a8911b5a52ad8e08cebbc598e73dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2a8911b5a52ad8e08cebbc598e73dcf">&#9670;&#160;</a></span>test_searchcv_raise_warning_with_non_finite_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_searchcv_raise_warning_with_non_finite_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>SearchCV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>specialized_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>return_train_score</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1993</span>):</div>
<div class="line"><span class="lineno"> 1994</span>    <span class="comment"># Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 1995</span>    <span class="comment"># https://github.com/scikit-learn/scikit-learn/issues/10529</span></div>
<div class="line"><span class="lineno"> 1996</span>    <span class="comment"># Check that we raise a UserWarning when a non-finite score is</span></div>
<div class="line"><span class="lineno"> 1997</span>    <span class="comment"># computed in the SearchCV</span></div>
<div class="line"><span class="lineno"> 1998</span>    X, y = make_classification(n_classes=2, random_state=0)</div>
<div class="line"><span class="lineno"> 1999</span> </div>
<div class="line"><span class="lineno"> 2000</span>    <span class="keyword">class </span>FailingScorer:</div>
<div class="line"><span class="lineno"> 2001</span>        <span class="stringliteral">&quot;&quot;&quot;Scorer that will fail for some split but not all.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 2002</span> </div>
<div class="line"><span class="lineno"> 2003</span>        <span class="keyword">def </span>__init__(self):</div>
<div class="line"><span class="lineno"> 2004</span>            self.n_counts = 0</div>
<div class="line"><span class="lineno"> 2005</span> </div>
<div class="line"><span class="lineno"> 2006</span>        <span class="keyword">def </span>__call__(self, estimator, X, y):</div>
<div class="line"><span class="lineno"> 2007</span>            self.n_counts += 1</div>
<div class="line"><span class="lineno"> 2008</span>            <span class="keywordflow">if</span> self.n_counts % 5 == 0:</div>
<div class="line"><span class="lineno"> 2009</span>                <span class="keywordflow">return</span> np.nan</div>
<div class="line"><span class="lineno"> 2010</span>            <span class="keywordflow">return</span> 1</div>
<div class="line"><span class="lineno"> 2011</span> </div>
<div class="line"><span class="lineno"> 2012</span>    grid = SearchCV(</div>
<div class="line"><span class="lineno"> 2013</span>        DecisionTreeClassifier(),</div>
<div class="line"><span class="lineno"> 2014</span>        scoring=FailingScorer(),</div>
<div class="line"><span class="lineno"> 2015</span>        cv=3,</div>
<div class="line"><span class="lineno"> 2016</span>        return_train_score=return_train_score,</div>
<div class="line"><span class="lineno"> 2017</span>        **specialized_params,</div>
<div class="line"><span class="lineno"> 2018</span>    )</div>
<div class="line"><span class="lineno"> 2019</span> </div>
<div class="line"><span class="lineno"> 2020</span>    <span class="keyword">with</span> pytest.warns(UserWarning) <span class="keyword">as</span> warn_msg:</div>
<div class="line"><span class="lineno"> 2021</span>        grid.fit(X, y)</div>
<div class="line"><span class="lineno"> 2022</span> </div>
<div class="line"><span class="lineno"> 2023</span>    set_with_warning = [<span class="stringliteral">&quot;test&quot;</span>, <span class="stringliteral">&quot;train&quot;</span>] <span class="keywordflow">if</span> return_train_score <span class="keywordflow">else</span> [<span class="stringliteral">&quot;test&quot;</span>]</div>
<div class="line"><span class="lineno"> 2024</span>    <span class="keyword">assert</span> len(warn_msg) == len(set_with_warning)</div>
<div class="line"><span class="lineno"> 2025</span>    <span class="keywordflow">for</span> msg, dataset <span class="keywordflow">in</span> zip(warn_msg, set_with_warning):</div>
<div class="line"><span class="lineno"> 2026</span>        <span class="keyword">assert</span> f<span class="stringliteral">&quot;One or more of the {dataset} scores are non-finite&quot;</span> <span class="keywordflow">in</span> str(msg.message)</div>
<div class="line"><span class="lineno"> 2027</span> </div>
<div class="line"><span class="lineno"> 2028</span>    <span class="comment"># all non-finite scores should be equally ranked last</span></div>
<div class="line"><span class="lineno"> 2029</span>    last_rank = grid.cv_results_[<span class="stringliteral">&quot;rank_test_score&quot;</span>].max()</div>
<div class="line"><span class="lineno"> 2030</span>    non_finite_mask = np.isnan(grid.cv_results_[<span class="stringliteral">&quot;mean_test_score&quot;</span>])</div>
<div class="line"><span class="lineno"> 2031</span>    assert_array_equal(grid.cv_results_[<span class="stringliteral">&quot;rank_test_score&quot;</span>][non_finite_mask], last_rank)</div>
<div class="line"><span class="lineno"> 2032</span>    <span class="comment"># all finite scores should be better ranked than the non-finite scores</span></div>
<div class="line"><span class="lineno"> 2033</span>    <span class="keyword">assert</span> np.all(grid.cv_results_[<span class="stringliteral">&quot;rank_test_score&quot;</span>][~non_finite_mask] &lt; last_rank)</div>
<div class="line"><span class="lineno"> 2034</span> </div>
<div class="line"><span class="lineno"> 2035</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7091ae5b1b16552fdefee7716009925e" name="a7091ae5b1b16552fdefee7716009925e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7091ae5b1b16552fdefee7716009925e">&#9670;&#160;</a></span>test_SearchCV_with_fit_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_SearchCV_with_fit_params </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>SearchCV</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  232</span><span class="keyword">def </span>test_SearchCV_with_fit_params(SearchCV):</div>
<div class="line"><span class="lineno">  233</span>    X = np.arange(100).reshape(10, 10)</div>
<div class="line"><span class="lineno">  234</span>    y = np.array([0] * 5 + [1] * 5)</div>
<div class="line"><span class="lineno">  235</span>    clf = CheckingClassifier(expected_fit_params=[<span class="stringliteral">&quot;spam&quot;</span>, <span class="stringliteral">&quot;eggs&quot;</span>])</div>
<div class="line"><span class="lineno">  236</span>    searcher = SearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, cv=2, error_score=<span class="stringliteral">&quot;raise&quot;</span>)</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    <span class="comment"># The CheckingClassifier generates an assertion error if</span></div>
<div class="line"><span class="lineno">  239</span>    <span class="comment"># a parameter is missing or has length != len(X).</span></div>
<div class="line"><span class="lineno">  240</span>    err_msg = <span class="stringliteral">r&quot;Expected fit parameter\&zwj;(s\&zwj;) \[&#39;eggs&#39;\] not seen.&quot;</span></div>
<div class="line"><span class="lineno">  241</span>    <span class="keyword">with</span> pytest.raises(AssertionError, match=err_msg):</div>
<div class="line"><span class="lineno">  242</span>        searcher.fit(X, y, spam=np.ones(10))</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    err_msg = <span class="stringliteral">&quot;Fit parameter spam has length 1; expected&quot;</span></div>
<div class="line"><span class="lineno">  245</span>    <span class="keyword">with</span> pytest.raises(AssertionError, match=err_msg):</div>
<div class="line"><span class="lineno">  246</span>        searcher.fit(X, y, spam=np.ones(1), eggs=np.zeros(10))</div>
<div class="line"><span class="lineno">  247</span>    searcher.fit(X, y, spam=np.ones(10), eggs=np.zeros(10))</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5c6a9eef3c87bc25265e6756f007c4b" name="af5c6a9eef3c87bc25265e6756f007c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5c6a9eef3c87bc25265e6756f007c4b">&#9670;&#160;</a></span>test_stochastic_gradient_loss_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_stochastic_gradient_loss_param </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1714</span><span class="keyword">def </span>test_stochastic_gradient_loss_param():</div>
<div class="line"><span class="lineno"> 1715</span>    <span class="comment"># Make sure the predict_proba works when loss is specified</span></div>
<div class="line"><span class="lineno"> 1716</span>    <span class="comment"># as one of the parameters in the param_grid.</span></div>
<div class="line"><span class="lineno"> 1717</span>    param_grid = {</div>
<div class="line"><span class="lineno"> 1718</span>        <span class="stringliteral">&quot;loss&quot;</span>: [<span class="stringliteral">&quot;log_loss&quot;</span>],</div>
<div class="line"><span class="lineno"> 1719</span>    }</div>
<div class="line"><span class="lineno"> 1720</span>    X = np.arange(24).reshape(6, -1)</div>
<div class="line"><span class="lineno"> 1721</span>    y = [0, 0, 0, 1, 1, 1]</div>
<div class="line"><span class="lineno"> 1722</span>    clf = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1723</span>        estimator=SGDClassifier(loss=<span class="stringliteral">&quot;hinge&quot;</span>), param_grid=param_grid, cv=3</div>
<div class="line"><span class="lineno"> 1724</span>    )</div>
<div class="line"><span class="lineno"> 1725</span> </div>
<div class="line"><span class="lineno"> 1726</span>    <span class="comment"># When the estimator is not fitted, `predict_proba` is not available as the</span></div>
<div class="line"><span class="lineno"> 1727</span>    <span class="comment"># loss is &#39;hinge&#39;.</span></div>
<div class="line"><span class="lineno"> 1728</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(clf, <span class="stringliteral">&quot;predict_proba&quot;</span>)</div>
<div class="line"><span class="lineno"> 1729</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno"> 1730</span>    clf.predict_proba(X)</div>
<div class="line"><span class="lineno"> 1731</span>    clf.predict_log_proba(X)</div>
<div class="line"><span class="lineno"> 1732</span> </div>
<div class="line"><span class="lineno"> 1733</span>    <span class="comment"># Make sure `predict_proba` is not available when setting loss=[&#39;hinge&#39;]</span></div>
<div class="line"><span class="lineno"> 1734</span>    <span class="comment"># in param_grid</span></div>
<div class="line"><span class="lineno"> 1735</span>    param_grid = {</div>
<div class="line"><span class="lineno"> 1736</span>        <span class="stringliteral">&quot;loss&quot;</span>: [<span class="stringliteral">&quot;hinge&quot;</span>],</div>
<div class="line"><span class="lineno"> 1737</span>    }</div>
<div class="line"><span class="lineno"> 1738</span>    clf = GridSearchCV(</div>
<div class="line"><span class="lineno"> 1739</span>        estimator=SGDClassifier(loss=<span class="stringliteral">&quot;hinge&quot;</span>), param_grid=param_grid, cv=3</div>
<div class="line"><span class="lineno"> 1740</span>    )</div>
<div class="line"><span class="lineno"> 1741</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(clf, <span class="stringliteral">&quot;predict_proba&quot;</span>)</div>
<div class="line"><span class="lineno"> 1742</span>    clf.fit(X, y)</div>
<div class="line"><span class="lineno"> 1743</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> hasattr(clf, <span class="stringliteral">&quot;predict_proba&quot;</span>)</div>
<div class="line"><span class="lineno"> 1744</span> </div>
<div class="line"><span class="lineno"> 1745</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a875437f614b256484ac8863973000ec8" name="a875437f614b256484ac8863973000ec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a875437f614b256484ac8863973000ec8">&#9670;&#160;</a></span>test_transform_inverse_transform_round_trip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_transform_inverse_transform_round_trip </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1850</span><span class="keyword">def </span>test_transform_inverse_transform_round_trip():</div>
<div class="line"><span class="lineno"> 1851</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno"> 1852</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, cv=3, verbose=3)</div>
<div class="line"><span class="lineno"> 1853</span> </div>
<div class="line"><span class="lineno"> 1854</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno"> 1855</span>    X_round_trip = grid_search.inverse_transform(grid_search.transform(X))</div>
<div class="line"><span class="lineno"> 1856</span>    assert_array_equal(X, X_round_trip)</div>
<div class="line"><span class="lineno"> 1857</span> </div>
<div class="line"><span class="lineno"> 1858</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6344e91245550e7d02cc58fc6401977b" name="a6344e91245550e7d02cc58fc6401977b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6344e91245550e7d02cc58fc6401977b">&#9670;&#160;</a></span>test_trivial_cv_results_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_trivial_cv_results_attr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  359</span><span class="keyword">def </span>test_trivial_cv_results_attr():</div>
<div class="line"><span class="lineno">  360</span>    <span class="comment"># Test search over a &quot;grid&quot; with only one point.</span></div>
<div class="line"><span class="lineno">  361</span>    clf = MockClassifier()</div>
<div class="line"><span class="lineno">  362</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1]}, cv=3)</div>
<div class="line"><span class="lineno">  363</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  364</span>    <span class="keyword">assert</span> hasattr(grid_search, <span class="stringliteral">&quot;cv_results_&quot;</span>)</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>    random_search = RandomizedSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [0]}, n_iter=1, cv=3)</div>
<div class="line"><span class="lineno">  367</span>    random_search.fit(X, y)</div>
<div class="line"><span class="lineno">  368</span>    <span class="keyword">assert</span> hasattr(grid_search, <span class="stringliteral">&quot;cv_results_&quot;</span>)</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aabb5fee4bd75e109d2bcf097d0962689" name="aabb5fee4bd75e109d2bcf097d0962689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabb5fee4bd75e109d2bcf097d0962689">&#9670;&#160;</a></span>test_unsupervised_grid_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_unsupervised_grid_search </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  815</span><span class="keyword">def </span>test_unsupervised_grid_search():</div>
<div class="line"><span class="lineno">  816</span>    <span class="comment"># test grid-search with unsupervised estimator</span></div>
<div class="line"><span class="lineno">  817</span>    X, y = make_blobs(n_samples=50, random_state=0)</div>
<div class="line"><span class="lineno">  818</span>    km = KMeans(random_state=0, init=<span class="stringliteral">&quot;random&quot;</span>, n_init=1)</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>    <span class="comment"># Multi-metric evaluation unsupervised</span></div>
<div class="line"><span class="lineno">  821</span>    scoring = [<span class="stringliteral">&quot;adjusted_rand_score&quot;</span>, <span class="stringliteral">&quot;fowlkes_mallows_score&quot;</span>]</div>
<div class="line"><span class="lineno">  822</span>    <span class="keywordflow">for</span> refit <span class="keywordflow">in</span> [<span class="stringliteral">&quot;adjusted_rand_score&quot;</span>, <span class="stringliteral">&quot;fowlkes_mallows_score&quot;</span>]:</div>
<div class="line"><span class="lineno">  823</span>        grid_search = GridSearchCV(</div>
<div class="line"><span class="lineno">  824</span>            km, param_grid=dict(n_clusters=[2, 3, 4]), scoring=scoring, refit=refit</div>
<div class="line"><span class="lineno">  825</span>        )</div>
<div class="line"><span class="lineno">  826</span>        grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  827</span>        <span class="comment"># Both ARI and FMS can find the right number :)</span></div>
<div class="line"><span class="lineno">  828</span>        <span class="keyword">assert</span> grid_search.best_params_[<span class="stringliteral">&quot;n_clusters&quot;</span>] == 3</div>
<div class="line"><span class="lineno">  829</span> </div>
<div class="line"><span class="lineno">  830</span>    <span class="comment"># Single metric evaluation unsupervised</span></div>
<div class="line"><span class="lineno">  831</span>    grid_search = GridSearchCV(</div>
<div class="line"><span class="lineno">  832</span>        km, param_grid=dict(n_clusters=[2, 3, 4]), scoring=<span class="stringliteral">&quot;fowlkes_mallows_score&quot;</span></div>
<div class="line"><span class="lineno">  833</span>    )</div>
<div class="line"><span class="lineno">  834</span>    grid_search.fit(X, y)</div>
<div class="line"><span class="lineno">  835</span>    <span class="keyword">assert</span> grid_search.best_params_[<span class="stringliteral">&quot;n_clusters&quot;</span>] == 3</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>    <span class="comment"># Now without a score, and without y</span></div>
<div class="line"><span class="lineno">  838</span>    grid_search = GridSearchCV(km, param_grid=dict(n_clusters=[2, 3, 4]))</div>
<div class="line"><span class="lineno">  839</span>    grid_search.fit(X)</div>
<div class="line"><span class="lineno">  840</span>    <span class="keyword">assert</span> grid_search.best_params_[<span class="stringliteral">&quot;n_clusters&quot;</span>] == 4</div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a805ad21e59ac8a6356ce7939b8f6c719" name="a805ad21e59ac8a6356ce7939b8f6c719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805ad21e59ac8a6356ce7939b8f6c719">&#9670;&#160;</a></span>test_validate_parameter_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_validate_parameter_input </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>klass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>error_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>error_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  146</span><span class="keyword">def </span>test_validate_parameter_input(klass, input, error_type, error_message):</div>
<div class="line"><span class="lineno">  147</span>    <span class="keyword">with</span> pytest.raises(error_type, match=error_message):</div>
<div class="line"><span class="lineno">  148</span>        klass(input)</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ec7b1d88a5faca787bea96eda28c4fa" name="a4ec7b1d88a5faca787bea96eda28c4fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec7b1d88a5faca787bea96eda28c4fa">&#9670;&#160;</a></span>test_X_as_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_X_as_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  753</span><span class="keyword">def </span>test_X_as_list():</div>
<div class="line"><span class="lineno">  754</span>    <span class="comment"># Pass X as list in GridSearchCV</span></div>
<div class="line"><span class="lineno">  755</span>    X = np.arange(100).reshape(10, 10)</div>
<div class="line"><span class="lineno">  756</span>    y = np.array([0] * 5 + [1] * 5)</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>    clf = CheckingClassifier(</div>
<div class="line"><span class="lineno">  759</span>        check_X=<span class="keyword">lambda</span> x: isinstance(x, list),</div>
<div class="line"><span class="lineno">  760</span>        methods_to_check=[<span class="stringliteral">&quot;fit&quot;</span>],</div>
<div class="line"><span class="lineno">  761</span>    )</div>
<div class="line"><span class="lineno">  762</span>    cv = KFold(n_splits=3)</div>
<div class="line"><span class="lineno">  763</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, cv=cv)</div>
<div class="line"><span class="lineno">  764</span>    grid_search.fit(X.tolist(), y).score(X, y)</div>
<div class="line"><span class="lineno">  765</span>    <span class="keyword">assert</span> hasattr(grid_search, <span class="stringliteral">&quot;cv_results_&quot;</span>)</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adee86e7d50edf0923c98e5deca8593c6" name="adee86e7d50edf0923c98e5deca8593c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adee86e7d50edf0923c98e5deca8593c6">&#9670;&#160;</a></span>test_y_as_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.test_y_as_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  768</span><span class="keyword">def </span>test_y_as_list():</div>
<div class="line"><span class="lineno">  769</span>    <span class="comment"># Pass y as list in GridSearchCV</span></div>
<div class="line"><span class="lineno">  770</span>    X = np.arange(100).reshape(10, 10)</div>
<div class="line"><span class="lineno">  771</span>    y = np.array([0] * 5 + [1] * 5)</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>    clf = CheckingClassifier(</div>
<div class="line"><span class="lineno">  774</span>        check_y=<span class="keyword">lambda</span> x: isinstance(x, list),</div>
<div class="line"><span class="lineno">  775</span>        methods_to_check=[<span class="stringliteral">&quot;fit&quot;</span>],</div>
<div class="line"><span class="lineno">  776</span>    )</div>
<div class="line"><span class="lineno">  777</span>    cv = KFold(n_splits=3)</div>
<div class="line"><span class="lineno">  778</span>    grid_search = GridSearchCV(clf, {<span class="stringliteral">&quot;foo_param&quot;</span>: [1, 2, 3]}, cv=cv)</div>
<div class="line"><span class="lineno">  779</span>    grid_search.fit(X, y.tolist()).score(X, y)</div>
<div class="line"><span class="lineno">  780</span>    <span class="keyword">assert</span> hasattr(grid_search, <span class="stringliteral">&quot;cv_results_&quot;</span>)</div>
<div class="line"><span class="lineno">  781</span> </div>
<div class="line"><span class="lineno">  782</span> </div>
<div class="line"><span class="lineno">  783</span><span class="preprocessor">@ignore_warnings</span></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a25670012db7a02119760c0f3b273ab51" name="a25670012db7a02119760c0f3b273ab51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25670012db7a02119760c0f3b273ab51">&#9670;&#160;</a></span>a</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.a</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a23ea3e5687791a0bdf2250d7b3e9d774" name="a23ea3e5687791a0bdf2250d7b3e9d774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23ea3e5687791a0bdf2250d7b3e9d774">&#9670;&#160;</a></span>n_counts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.n_counts</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a205d1806eb5796108989906d945332a0" name="a205d1806eb5796108989906d945332a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a205d1806eb5796108989906d945332a0">&#9670;&#160;</a></span>pairwise</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.pairwise</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a320495a2a974ada59d33c24f38f53150" name="a320495a2a974ada59d33c24f38f53150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a320495a2a974ada59d33c24f38f53150">&#9670;&#160;</a></span>r_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.r_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a14b0289dc8172ff45dbe5a25eacf3232" name="a14b0289dc8172ff45dbe5a25eacf3232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b0289dc8172ff45dbe5a25eacf3232">&#9670;&#160;</a></span>X</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.X = np.array([[-1, -1], [-2, -1], [1, 1], [2, 1]])</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5c7e28ade4a24abe1b7b7ea51bbdd4f7" name="a5c7e28ade4a24abe1b7b7ea51bbdd4f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c7e28ade4a24abe1b7b7ea51bbdd4f7">&#9670;&#160;</a></span>y</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.model_selection.tests.test_search.y = np.array([1, 1, 2, 2])</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
