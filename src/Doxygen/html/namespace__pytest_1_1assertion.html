<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: _pytest.assertion Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace__pytest.html">_pytest</a></li><li class="navelem"><a class="el" href="namespace__pytest_1_1assertion.html">assertion</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">_pytest.assertion Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespace__pytest_1_1assertion_1_1rewrite" id="r_namespace__pytest_1_1assertion_1_1rewrite"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion_1_1rewrite.html">rewrite</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespace__pytest_1_1assertion_1_1truncate" id="r_namespace__pytest_1_1assertion_1_1truncate"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion_1_1truncate.html">truncate</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespace__pytest_1_1assertion_1_1util" id="r_namespace__pytest_1_1assertion_1_1util"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion_1_1util.html">util</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1assertion_1_1_assertion_state.html">AssertionState</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1assertion_1_1_dummy_rewrite_hook.html">DummyRewriteHook</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aae90e5905a9ca417d929d28e2ff26630" id="r_aae90e5905a9ca417d929d28e2ff26630"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion.html#aae90e5905a9ca417d929d28e2ff26630">pytest_addoption</a> (<a class="el" href="class__pytest_1_1config_1_1argparsing_1_1_parser.html">Parser</a> parser)</td></tr>
<tr class="separator:aae90e5905a9ca417d929d28e2ff26630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c94ac1aaf4b5554690ac4746b3365d" id="r_a91c94ac1aaf4b5554690ac4746b3365d"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion.html#a91c94ac1aaf4b5554690ac4746b3365d">register_assert_rewrite</a> (*str names)</td></tr>
<tr class="separator:a91c94ac1aaf4b5554690ac4746b3365d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd3071b2b322f2a7bb3359f25303ec2" id="r_a7bd3071b2b322f2a7bb3359f25303ec2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class__pytest_1_1assertion_1_1rewrite_1_1_assertion_rewriting_hook.html">rewrite.AssertionRewritingHook</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion.html#a7bd3071b2b322f2a7bb3359f25303ec2">install_importhook</a> (<a class="el" href="class__pytest_1_1config_1_1_config.html">Config</a> config)</td></tr>
<tr class="separator:a7bd3071b2b322f2a7bb3359f25303ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9533f74513f1662dbd07ad42ee14afee" id="r_a9533f74513f1662dbd07ad42ee14afee"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion.html#a9533f74513f1662dbd07ad42ee14afee">pytest_collection</a> (&quot;Session&quot; session)</td></tr>
<tr class="separator:a9533f74513f1662dbd07ad42ee14afee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad35251e3dd7096c2a0f89dd9563ff151" id="r_ad35251e3dd7096c2a0f89dd9563ff151"><td class="memItemLeft" align="right" valign="top">Generator[None, None, None]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion.html#ad35251e3dd7096c2a0f89dd9563ff151">pytest_runtest_protocol</a> (<a class="el" href="class__pytest_1_1nodes_1_1_item.html">Item</a> item)</td></tr>
<tr class="separator:ad35251e3dd7096c2a0f89dd9563ff151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb1999f87e852fce2b66691e379c369" id="r_a8fb1999f87e852fce2b66691e379c369"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion.html#a8fb1999f87e852fce2b66691e379c369">pytest_sessionfinish</a> (&quot;Session&quot; session)</td></tr>
<tr class="separator:a8fb1999f87e852fce2b66691e379c369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc771f8501e3d087a9fabb9f866ff94" id="r_adbc771f8501e3d087a9fabb9f866ff94"><td class="memItemLeft" align="right" valign="top">Optional[List[str]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1assertion.html#adbc771f8501e3d087a9fabb9f866ff94">pytest_assertrepr_compare</a> (<a class="el" href="class__pytest_1_1config_1_1_config.html">Config</a> config, str op, Any left, Any right)</td></tr>
<tr class="separator:adbc771f8501e3d087a9fabb9f866ff94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Support for presenting detailed information in failing assertions.</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a7bd3071b2b322f2a7bb3359f25303ec2" name="a7bd3071b2b322f2a7bb3359f25303ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bd3071b2b322f2a7bb3359f25303ec2">&#9670;&#160;</a></span>install_importhook()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> <a class="el" href="class__pytest_1_1assertion_1_1rewrite_1_1_assertion_rewriting_hook.html">rewrite.AssertionRewritingHook</a> _pytest.assertion.install_importhook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1config_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Try to install the rewrite hook, raise SystemError if it fails.</pre> <div class="fragment"><div class="line"><span class="lineno">   89</span><span class="keyword">def </span>install_importhook(config: Config) -&gt; rewrite.AssertionRewritingHook:</div>
<div class="line"><span class="lineno">   90</span>    <span class="stringliteral">&quot;&quot;&quot;Try to install the rewrite hook, raise SystemError if it fails.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   91</span>    config.stash[assertstate_key] = AssertionState(config, <span class="stringliteral">&quot;rewrite&quot;</span>)</div>
<div class="line"><span class="lineno">   92</span>    config.stash[assertstate_key].hook = hook = rewrite.AssertionRewritingHook(config)</div>
<div class="line"><span class="lineno">   93</span>    sys.meta_path.insert(0, hook)</div>
<div class="line"><span class="lineno">   94</span>    config.stash[assertstate_key].trace(<span class="stringliteral">&quot;installed rewrite import hook&quot;</span>)</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>    <span class="keyword">def </span>undo() -&gt; None:</div>
<div class="line"><span class="lineno">   97</span>        hook = config.stash[assertstate_key].hook</div>
<div class="line"><span class="lineno">   98</span>        <span class="keywordflow">if</span> hook <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> hook <span class="keywordflow">in</span> sys.meta_path:</div>
<div class="line"><span class="lineno">   99</span>            sys.meta_path.remove(hook)</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>    config.add_cleanup(undo)</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">return</span> hook</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aae90e5905a9ca417d929d28e2ff26630" name="aae90e5905a9ca417d929d28e2ff26630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae90e5905a9ca417d929d28e2ff26630">&#9670;&#160;</a></span>pytest_addoption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None _pytest.assertion.pytest_addoption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1config_1_1argparsing_1_1_parser.html">Parser</a>&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   22</span><span class="keyword">def </span>pytest_addoption(parser: Parser) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   23</span>    group = parser.getgroup(<span class="stringliteral">&quot;debugconfig&quot;</span>)</div>
<div class="line"><span class="lineno">   24</span>    group.addoption(</div>
<div class="line"><span class="lineno">   25</span>        <span class="stringliteral">&quot;--assert&quot;</span>,</div>
<div class="line"><span class="lineno">   26</span>        action=<span class="stringliteral">&quot;store&quot;</span>,</div>
<div class="line"><span class="lineno">   27</span>        dest=<span class="stringliteral">&quot;assertmode&quot;</span>,</div>
<div class="line"><span class="lineno">   28</span>        choices=(<span class="stringliteral">&quot;rewrite&quot;</span>, <span class="stringliteral">&quot;plain&quot;</span>),</div>
<div class="line"><span class="lineno">   29</span>        default=<span class="stringliteral">&quot;rewrite&quot;</span>,</div>
<div class="line"><span class="lineno">   30</span>        metavar=<span class="stringliteral">&quot;MODE&quot;</span>,</div>
<div class="line"><span class="lineno">   31</span>        help=(</div>
<div class="line"><span class="lineno">   32</span>            <span class="stringliteral">&quot;Control assertion debugging tools.\n&quot;</span></div>
<div class="line"><span class="lineno">   33</span>            <span class="stringliteral">&quot;&#39;plain&#39; performs no assertion debugging.\n&quot;</span></div>
<div class="line"><span class="lineno">   34</span>            <span class="stringliteral">&quot;&#39;rewrite&#39; (the default) rewrites assert statements in test modules&quot;</span></div>
<div class="line"><span class="lineno">   35</span>            <span class="stringliteral">&quot; on import to provide assert expression information.&quot;</span></div>
<div class="line"><span class="lineno">   36</span>        ),</div>
<div class="line"><span class="lineno">   37</span>    )</div>
<div class="line"><span class="lineno">   38</span>    parser.addini(</div>
<div class="line"><span class="lineno">   39</span>        <span class="stringliteral">&quot;enable_assertion_pass_hook&quot;</span>,</div>
<div class="line"><span class="lineno">   40</span>        type=<span class="stringliteral">&quot;bool&quot;</span>,</div>
<div class="line"><span class="lineno">   41</span>        default=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   42</span>        help=<span class="stringliteral">&quot;Enables the pytest_assertion_pass hook. &quot;</span></div>
<div class="line"><span class="lineno">   43</span>        <span class="stringliteral">&quot;Make sure to delete any previously generated pyc cache files.&quot;</span>,</div>
<div class="line"><span class="lineno">   44</span>    )</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adbc771f8501e3d087a9fabb9f866ff94" name="adbc771f8501e3d087a9fabb9f866ff94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbc771f8501e3d087a9fabb9f866ff94">&#9670;&#160;</a></span>pytest_assertrepr_compare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Optional[List[str]] _pytest.assertion.pytest_assertrepr_compare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1config_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Any&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Any
&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  180</span>) -&gt; Optional[List[str]]:</div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">return</span> util.assertrepr_compare(config=config, op=op, left=left, right=right)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9533f74513f1662dbd07ad42ee14afee" name="a9533f74513f1662dbd07ad42ee14afee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9533f74513f1662dbd07ad42ee14afee">&#9670;&#160;</a></span>pytest_collection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None _pytest.assertion.pytest_collection </td>
          <td>(</td>
          <td class="paramtype">&quot;Session&quot;&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  105</span><span class="keyword">def </span>pytest_collection(session: <span class="stringliteral">&quot;Session&quot;</span>) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  106</span>    <span class="comment"># This hook is only called when test modules are collected</span></div>
<div class="line"><span class="lineno">  107</span>    <span class="comment"># so for example not in the managing process of pytest-xdist</span></div>
<div class="line"><span class="lineno">  108</span>    <span class="comment"># (which does not collect test modules).</span></div>
<div class="line"><span class="lineno">  109</span>    assertstate = session.config.stash.get(assertstate_key, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">if</span> assertstate:</div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">if</span> assertstate.hook <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  112</span>            assertstate.hook.set_session(session)</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span><span class="preprocessor">@hookimpl(tryfirst=True, hookwrapper=True)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad35251e3dd7096c2a0f89dd9563ff151" name="ad35251e3dd7096c2a0f89dd9563ff151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad35251e3dd7096c2a0f89dd9563ff151">&#9670;&#160;</a></span>pytest_runtest_protocol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Generator[None, None, None] _pytest.assertion.pytest_runtest_protocol </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1nodes_1_1_item.html">Item</a>&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Setup the pytest_assertrepr_compare and pytest_assertion_pass hooks.

The rewrite module will use util._reprcompare if it exists to use custom
reporting via the pytest_assertrepr_compare hook.  This sets up this custom
comparison for the test.
</pre> <div class="fragment"><div class="line"><span class="lineno">  116</span><span class="keyword">def </span>pytest_runtest_protocol(item: Item) -&gt; Generator[<span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>]:</div>
<div class="line"><span class="lineno">  117</span>    <span class="stringliteral">&quot;&quot;&quot;Setup the pytest_assertrepr_compare and pytest_assertion_pass hooks.</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">    The rewrite module will use util._reprcompare if it exists to use custom</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">    reporting via the pytest_assertrepr_compare hook.  This sets up this custom</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">    comparison for the test.</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    ihook = item.ihook</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>    <span class="keyword">def </span>callbinrepr(op, left: object, right: object) -&gt; Optional[str]:</div>
<div class="line"><span class="lineno">  127</span>        <span class="stringliteral">&quot;&quot;&quot;Call the pytest_assertrepr_compare hook and prepare the result.</span></div>
<div class="line"><span class="lineno">  128</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">        This uses the first result from the hook and then ensures the</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral">        following:</span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">        * Overly verbose explanations are truncated unless configured otherwise</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">          (eg. if running in verbose mode).</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">        * Embedded newlines are escaped to help util.format_explanation()</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">          later.</span></div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">        * If the rewrite mode is used embedded %-characters are replaced</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">          to protect later % formatting.</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">        The result can be formatted by util.format_explanation() for</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">        pretty printing.</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  141</span>        hook_result = ihook.pytest_assertrepr_compare(</div>
<div class="line"><span class="lineno">  142</span>            config=item.config, op=op, left=left, right=right</div>
<div class="line"><span class="lineno">  143</span>        )</div>
<div class="line"><span class="lineno">  144</span>        <span class="keywordflow">for</span> new_expl <span class="keywordflow">in</span> hook_result:</div>
<div class="line"><span class="lineno">  145</span>            <span class="keywordflow">if</span> new_expl:</div>
<div class="line"><span class="lineno">  146</span>                new_expl = truncate.truncate_if_required(new_expl, item)</div>
<div class="line"><span class="lineno">  147</span>                new_expl = [line.replace(<span class="stringliteral">&quot;\n&quot;</span>, <span class="stringliteral">&quot;\\n&quot;</span>) <span class="keywordflow">for</span> line <span class="keywordflow">in</span> new_expl]</div>
<div class="line"><span class="lineno">  148</span>                res = <span class="stringliteral">&quot;\n~&quot;</span>.join(new_expl)</div>
<div class="line"><span class="lineno">  149</span>                <span class="keywordflow">if</span> item.config.getvalue(<span class="stringliteral">&quot;assertmode&quot;</span>) == <span class="stringliteral">&quot;rewrite&quot;</span>:</div>
<div class="line"><span class="lineno">  150</span>                    res = res.replace(<span class="stringliteral">&quot;%&quot;</span>, <span class="stringliteral">&quot;%%&quot;</span>)</div>
<div class="line"><span class="lineno">  151</span>                <span class="keywordflow">return</span> res</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    saved_assert_hooks = util._reprcompare, util._assertion_pass</div>
<div class="line"><span class="lineno">  155</span>    util._reprcompare = callbinrepr</div>
<div class="line"><span class="lineno">  156</span>    util._config = item.config</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">if</span> ihook.pytest_assertion_pass.get_hookimpls():</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>        <span class="keyword">def </span>call_assertion_pass_hook(lineno: int, orig: str, expl: str) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  161</span>            ihook.pytest_assertion_pass(item=item, lineno=lineno, orig=orig, expl=expl)</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>        util._assertion_pass = call_assertion_pass_hook</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>    <span class="keywordflow">yield</span></div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    util._reprcompare, util._assertion_pass = saved_assert_hooks</div>
<div class="line"><span class="lineno">  168</span>    util._config = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8fb1999f87e852fce2b66691e379c369" name="a8fb1999f87e852fce2b66691e379c369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb1999f87e852fce2b66691e379c369">&#9670;&#160;</a></span>pytest_sessionfinish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None _pytest.assertion.pytest_sessionfinish </td>
          <td>(</td>
          <td class="paramtype">&quot;Session&quot;&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  171</span><span class="keyword">def </span>pytest_sessionfinish(session: <span class="stringliteral">&quot;Session&quot;</span>) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  172</span>    assertstate = session.config.stash.get(assertstate_key, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">if</span> assertstate:</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">if</span> assertstate.hook <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  175</span>            assertstate.hook.set_session(<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a91c94ac1aaf4b5554690ac4746b3365d" name="a91c94ac1aaf4b5554690ac4746b3365d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c94ac1aaf4b5554690ac4746b3365d">&#9670;&#160;</a></span>register_assert_rewrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None _pytest.assertion.register_assert_rewrite </td>
          <td>(</td>
          <td class="paramtype">*str&#160;</td>
          <td class="paramname"><em>names</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Register one or more module names to be rewritten on import.

This function will make sure that this module or all modules inside
the package will get their assert statements rewritten.
Thus you should make sure to call this before the module is
actually imported, usually in your __init__.py if you are a plugin
using a package.

:param names: The module names to register.
</pre> <div class="fragment"><div class="line"><span class="lineno">   47</span><span class="keyword">def </span>register_assert_rewrite(*names: str) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   48</span>    <span class="stringliteral">&quot;&quot;&quot;Register one or more module names to be rewritten on import.</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">    This function will make sure that this module or all modules inside</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">    the package will get their assert statements rewritten.</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    Thus you should make sure to call this before the module is</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    actually imported, usually in your __init__.py if you are a plugin</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    using a package.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    :param names: The module names to register.</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">for</span> name <span class="keywordflow">in</span> names:</div>
<div class="line"><span class="lineno">   59</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(name, str):</div>
<div class="line"><span class="lineno">   60</span>            msg = <span class="stringliteral">&quot;expected module names as *args, got {0} instead&quot;</span>  <span class="comment"># type: ignore[unreachable]</span></div>
<div class="line"><span class="lineno">   61</span>            <span class="keywordflow">raise</span> TypeError(msg.format(repr(names)))</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">for</span> hook <span class="keywordflow">in</span> sys.meta_path:</div>
<div class="line"><span class="lineno">   63</span>        <span class="keywordflow">if</span> isinstance(hook, rewrite.AssertionRewritingHook):</div>
<div class="line"><span class="lineno">   64</span>            importhook = hook</div>
<div class="line"><span class="lineno">   65</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   67</span>        <span class="comment"># TODO(typing): Add a protocol for mark_rewrite() and use it</span></div>
<div class="line"><span class="lineno">   68</span>        <span class="comment"># for importhook and for PytestPluginManager.rewrite_hook.</span></div>
<div class="line"><span class="lineno">   69</span>        importhook = DummyRewriteHook()  <span class="comment"># type: ignore</span></div>
<div class="line"><span class="lineno">   70</span>    importhook.mark_rewrite(*names)</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
