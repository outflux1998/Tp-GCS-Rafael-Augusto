<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: numpy.array_api.tests.test_array_object Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenumpy.html">numpy</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1array__api.html">array_api</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1array__api_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html">test_array_object</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">numpy.array_api.tests.test_array_object Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afc5950bcee3e3a68ed65652078ac786e" id="r_afc5950bcee3e3a68ed65652078ac786e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#afc5950bcee3e3a68ed65652078ac786e">test_validate_index</a> ()</td></tr>
<tr class="separator:afc5950bcee3e3a68ed65652078ac786e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a4a6cd9131efa3e66e97ba7fe93c2f" id="r_af6a4a6cd9131efa3e66e97ba7fe93c2f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#af6a4a6cd9131efa3e66e97ba7fe93c2f">test_operators</a> ()</td></tr>
<tr class="separator:af6a4a6cd9131efa3e66e97ba7fe93c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd34838318911c0408a32e53dc9371c" id="r_aacd34838318911c0408a32e53dc9371c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#aacd34838318911c0408a32e53dc9371c">test_python_scalar_construtors</a> ()</td></tr>
<tr class="separator:aacd34838318911c0408a32e53dc9371c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b4f30b1453786f2ce65c556325948b6" id="r_a7b4f30b1453786f2ce65c556325948b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#a7b4f30b1453786f2ce65c556325948b6">test_device_property</a> ()</td></tr>
<tr class="separator:a7b4f30b1453786f2ce65c556325948b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d3e72fc2b8646d19ac548a93d4ef20" id="r_aa6d3e72fc2b8646d19ac548a93d4ef20"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#aa6d3e72fc2b8646d19ac548a93d4ef20">test_array_properties</a> ()</td></tr>
<tr class="separator:aa6d3e72fc2b8646d19ac548a93d4ef20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad170c66b2e6615d866c37eb28ea1a8c7" id="r_ad170c66b2e6615d866c37eb28ea1a8c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#ad170c66b2e6615d866c37eb28ea1a8c7">test___array__</a> ()</td></tr>
<tr class="separator:ad170c66b2e6615d866c37eb28ea1a8c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab61e6649377442c79d6149aaf09c165" id="r_aab61e6649377442c79d6149aaf09c165"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#aab61e6649377442c79d6149aaf09c165">test_allow_newaxis</a> ()</td></tr>
<tr class="separator:aab61e6649377442c79d6149aaf09c165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0291de086e83b928d2c94985296384bd" id="r_a0291de086e83b928d2c94985296384bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#a0291de086e83b928d2c94985296384bd">test_disallow_flat_indexing_with_newaxis</a> ()</td></tr>
<tr class="separator:a0291de086e83b928d2c94985296384bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc56bc8612ad539136b1d9d3a7c771b" id="r_a3bc56bc8612ad539136b1d9d3a7c771b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#a3bc56bc8612ad539136b1d9d3a7c771b">test_disallow_mask_with_newaxis</a> ()</td></tr>
<tr class="separator:a3bc56bc8612ad539136b1d9d3a7c771b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1462b0560cf39665dcdaeed12255bd04" id="r_a1462b0560cf39665dcdaeed12255bd04"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#a1462b0560cf39665dcdaeed12255bd04">test_error_on_invalid_index</a> (<a class="el" href="namespacenumpy_1_1core_1_1fromnumeric.html#aa22b69964320c5aabb55d909c8780c9f">shape</a>, index)</td></tr>
<tr class="separator:a1462b0560cf39665dcdaeed12255bd04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09dc37e9c14f0fb9a8e160c6c4d7fd0b" id="r_a09dc37e9c14f0fb9a8e160c6c4d7fd0b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#a09dc37e9c14f0fb9a8e160c6c4d7fd0b">test_mask_0d_array_without_errors</a> ()</td></tr>
<tr class="separator:a09dc37e9c14f0fb9a8e160c6c4d7fd0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab924af43e3953d1ccaa7ace90119584c" id="r_ab924af43e3953d1ccaa7ace90119584c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#ab924af43e3953d1ccaa7ace90119584c">test_error_on_invalid_index_with_ellipsis</a> (<a class="el" href="__lapack__subroutines_8h.html#a5325f1842789194c441b272cbf424674">i</a>)</td></tr>
<tr class="separator:ab924af43e3953d1ccaa7ace90119584c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02974566df4618c2c4418414c43cfb87" id="r_a02974566df4618c2c4418414c43cfb87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenumpy_1_1array__api_1_1tests_1_1test__array__object.html#a02974566df4618c2c4418414c43cfb87">test_array_keys_use_private_array</a> ()</td></tr>
<tr class="separator:a02974566df4618c2c4418414c43cfb87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad170c66b2e6615d866c37eb28ea1a8c7" name="ad170c66b2e6615d866c37eb28ea1a8c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad170c66b2e6615d866c37eb28ea1a8c7">&#9670;&#160;</a></span>test___array__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test___array__ </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  316</span><span class="keyword">def </span>test___array__():</div>
<div class="line"><span class="lineno">  317</span>    a = ones((2, 3), dtype=int16)</div>
<div class="line"><span class="lineno">  318</span>    <span class="keyword">assert</span> np.asarray(a) <span class="keywordflow">is</span> a._array</div>
<div class="line"><span class="lineno">  319</span>    b = np.asarray(a, dtype=np.float64)</div>
<div class="line"><span class="lineno">  320</span>    <span class="keyword">assert</span> np.all(np.equal(b, np.ones((2, 3), dtype=np.float64)))</div>
<div class="line"><span class="lineno">  321</span>    <span class="keyword">assert</span> b.dtype == np.float64</div>
<div class="line"><span class="lineno">  322</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aab61e6649377442c79d6149aaf09c165" name="aab61e6649377442c79d6149aaf09c165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab61e6649377442c79d6149aaf09c165">&#9670;&#160;</a></span>test_allow_newaxis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_allow_newaxis </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  323</span><span class="keyword">def </span>test_allow_newaxis():</div>
<div class="line"><span class="lineno">  324</span>    a = ones(5)</div>
<div class="line"><span class="lineno">  325</span>    indexed_a = a[<span class="keywordtype">None</span>, :]</div>
<div class="line"><span class="lineno">  326</span>    <span class="keyword">assert</span> indexed_a.shape == (1, 5)</div>
<div class="line"><span class="lineno">  327</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a02974566df4618c2c4418414c43cfb87" name="a02974566df4618c2c4418414c43cfb87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02974566df4618c2c4418414c43cfb87">&#9670;&#160;</a></span>test_array_keys_use_private_array()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_array_keys_use_private_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Indexing operations convert array keys before indexing the internal array

Fails when array_api array keys are not converted into NumPy-proper arrays
in __getitem__(). This is achieved by passing array_api arrays with 0-sized
dimensions, which NumPy-proper treats erroneously - not sure why!

TODO: Find and use appropriate __setitem__() case.
</pre> <div class="fragment"><div class="line"><span class="lineno">  359</span><span class="keyword">def </span>test_array_keys_use_private_array():</div>
<div class="line"><span class="lineno">  360</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">    Indexing operations convert array keys before indexing the internal array</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">    Fails when array_api array keys are not converted into NumPy-proper arrays</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">    in __getitem__(). This is achieved by passing array_api arrays with 0-sized</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">    dimensions, which NumPy-proper treats erroneously - not sure why!</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">    TODO: Find and use appropriate __setitem__() case.</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  369</span>    a = ones((0, 0), dtype=bool_)</div>
<div class="line"><span class="lineno">  370</span>    <span class="keyword">assert</span> a[a].shape == (0,)</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    a = ones((0,), dtype=bool_)</div>
<div class="line"><span class="lineno">  373</span>    key = ones((0, 0), dtype=bool_)</div>
<div class="line"><span class="lineno">  374</span>    <span class="keyword">with</span> pytest.raises(IndexError):</div>
<div class="line"><span class="lineno">  375</span>        a[key]</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6d3e72fc2b8646d19ac548a93d4ef20" name="aa6d3e72fc2b8646d19ac548a93d4ef20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d3e72fc2b8646d19ac548a93d4ef20">&#9670;&#160;</a></span>test_array_properties()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_array_properties </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  303</span><span class="keyword">def </span>test_array_properties():</div>
<div class="line"><span class="lineno">  304</span>    a = ones((1, 2, 3))</div>
<div class="line"><span class="lineno">  305</span>    b = ones((2, 3))</div>
<div class="line"><span class="lineno">  306</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: a.T)</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    <span class="keyword">assert</span> isinstance(b.T, Array)</div>
<div class="line"><span class="lineno">  309</span>    <span class="keyword">assert</span> b.T.shape == (3, 2)</div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span>    <span class="keyword">assert</span> isinstance(a.mT, Array)</div>
<div class="line"><span class="lineno">  312</span>    <span class="keyword">assert</span> a.mT.shape == (1, 3, 2)</div>
<div class="line"><span class="lineno">  313</span>    <span class="keyword">assert</span> isinstance(b.mT, Array)</div>
<div class="line"><span class="lineno">  314</span>    <span class="keyword">assert</span> b.mT.shape == (3, 2)</div>
<div class="line"><span class="lineno">  315</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b4f30b1453786f2ce65c556325948b6" name="a7b4f30b1453786f2ce65c556325948b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b4f30b1453786f2ce65c556325948b6">&#9670;&#160;</a></span>test_device_property()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_device_property </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  293</span><span class="keyword">def </span>test_device_property():</div>
<div class="line"><span class="lineno">  294</span>    a = ones((3, 4))</div>
<div class="line"><span class="lineno">  295</span>    <span class="keyword">assert</span> a.device == <span class="stringliteral">&#39;cpu&#39;</span></div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    <span class="keyword">assert</span> all(equal(a.to_device(<span class="stringliteral">&#39;cpu&#39;</span>), a))</div>
<div class="line"><span class="lineno">  298</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: a.to_device(<span class="stringliteral">&#39;gpu&#39;</span>))</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    <span class="keyword">assert</span> all(equal(asarray(a, device=<span class="stringliteral">&#39;cpu&#39;</span>), a))</div>
<div class="line"><span class="lineno">  301</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: asarray(a, device=<span class="stringliteral">&#39;gpu&#39;</span>))</div>
<div class="line"><span class="lineno">  302</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0291de086e83b928d2c94985296384bd" name="a0291de086e83b928d2c94985296384bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0291de086e83b928d2c94985296384bd">&#9670;&#160;</a></span>test_disallow_flat_indexing_with_newaxis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_disallow_flat_indexing_with_newaxis </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  328</span><span class="keyword">def </span>test_disallow_flat_indexing_with_newaxis():</div>
<div class="line"><span class="lineno">  329</span>    a = ones((3, 3, 3))</div>
<div class="line"><span class="lineno">  330</span>    <span class="keyword">with</span> pytest.raises(IndexError):</div>
<div class="line"><span class="lineno">  331</span>        a[<span class="keywordtype">None</span>, 0, 0]</div>
<div class="line"><span class="lineno">  332</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bc56bc8612ad539136b1d9d3a7c771b" name="a3bc56bc8612ad539136b1d9d3a7c771b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc56bc8612ad539136b1d9d3a7c771b">&#9670;&#160;</a></span>test_disallow_mask_with_newaxis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_disallow_mask_with_newaxis </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  333</span><span class="keyword">def </span>test_disallow_mask_with_newaxis():</div>
<div class="line"><span class="lineno">  334</span>    a = ones((3, 3, 3))</div>
<div class="line"><span class="lineno">  335</span>    <span class="keyword">with</span> pytest.raises(IndexError):</div>
<div class="line"><span class="lineno">  336</span>        a[<span class="keywordtype">None</span>, asarray(<span class="keyword">True</span>)]</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span><span class="preprocessor">@pytest.mark.parametrize(&quot;shape&quot;, [()</span>, (5,), (3, 3, 3)])</div>
<div class="line"><span class="lineno">  339</span><span class="preprocessor">@pytest.mark.parametrize(&quot;index&quot;, [&quot;string&quot;, False, True])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1462b0560cf39665dcdaeed12255bd04" name="a1462b0560cf39665dcdaeed12255bd04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1462b0560cf39665dcdaeed12255bd04">&#9670;&#160;</a></span>test_error_on_invalid_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_error_on_invalid_index </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  340</span><span class="keyword">def </span>test_error_on_invalid_index(shape, index):</div>
<div class="line"><span class="lineno">  341</span>    a = ones(shape)</div>
<div class="line"><span class="lineno">  342</span>    <span class="keyword">with</span> pytest.raises(IndexError):</div>
<div class="line"><span class="lineno">  343</span>        a[index]</div>
<div class="line"><span class="lineno">  344</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab924af43e3953d1ccaa7ace90119584c" name="ab924af43e3953d1ccaa7ace90119584c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab924af43e3953d1ccaa7ace90119584c">&#9670;&#160;</a></span>test_error_on_invalid_index_with_ellipsis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_error_on_invalid_index_with_ellipsis </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  352</span><span class="keyword">def </span>test_error_on_invalid_index_with_ellipsis(i):</div>
<div class="line"><span class="lineno">  353</span>    a = ones((3, 3, 3))</div>
<div class="line"><span class="lineno">  354</span>    <span class="keyword">with</span> pytest.raises(IndexError):</div>
<div class="line"><span class="lineno">  355</span>        a[..., i]</div>
<div class="line"><span class="lineno">  356</span>    <span class="keyword">with</span> pytest.raises(IndexError):</div>
<div class="line"><span class="lineno">  357</span>        a[i, ...]</div>
<div class="line"><span class="lineno">  358</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a09dc37e9c14f0fb9a8e160c6c4d7fd0b" name="a09dc37e9c14f0fb9a8e160c6c4d7fd0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09dc37e9c14f0fb9a8e160c6c4d7fd0b">&#9670;&#160;</a></span>test_mask_0d_array_without_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_mask_0d_array_without_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  345</span><span class="keyword">def </span>test_mask_0d_array_without_errors():</div>
<div class="line"><span class="lineno">  346</span>    a = ones(())</div>
<div class="line"><span class="lineno">  347</span>    a[asarray(<span class="keyword">True</span>)]</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  350</span>    <span class="stringliteral">&quot;i&quot;</span>, [slice(5), slice(5, 0), asarray(<span class="keyword">True</span>), asarray([0, 1])]</div>
<div class="line"><span class="lineno">  351</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="af6a4a6cd9131efa3e66e97ba7fe93c2f" name="af6a4a6cd9131efa3e66e97ba7fe93c2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6a4a6cd9131efa3e66e97ba7fe93c2f">&#9670;&#160;</a></span>test_operators()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_operators </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   81</span><span class="keyword">def </span>test_operators():</div>
<div class="line"><span class="lineno">   82</span>    <span class="comment"># For every operator, we test that it works for the required type</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="comment"># combinations and raises TypeError otherwise</span></div>
<div class="line"><span class="lineno">   84</span>    binary_op_dtypes = {</div>
<div class="line"><span class="lineno">   85</span>        <span class="stringliteral">&quot;__add__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   86</span>        <span class="stringliteral">&quot;__and__&quot;</span>: <span class="stringliteral">&quot;integer_or_boolean&quot;</span>,</div>
<div class="line"><span class="lineno">   87</span>        <span class="stringliteral">&quot;__eq__&quot;</span>: <span class="stringliteral">&quot;all&quot;</span>,</div>
<div class="line"><span class="lineno">   88</span>        <span class="stringliteral">&quot;__floordiv__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   89</span>        <span class="stringliteral">&quot;__ge__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   90</span>        <span class="stringliteral">&quot;__gt__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   91</span>        <span class="stringliteral">&quot;__le__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   92</span>        <span class="stringliteral">&quot;__lshift__&quot;</span>: <span class="stringliteral">&quot;integer&quot;</span>,</div>
<div class="line"><span class="lineno">   93</span>        <span class="stringliteral">&quot;__lt__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   94</span>        <span class="stringliteral">&quot;__mod__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   95</span>        <span class="stringliteral">&quot;__mul__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   96</span>        <span class="stringliteral">&quot;__ne__&quot;</span>: <span class="stringliteral">&quot;all&quot;</span>,</div>
<div class="line"><span class="lineno">   97</span>        <span class="stringliteral">&quot;__or__&quot;</span>: <span class="stringliteral">&quot;integer_or_boolean&quot;</span>,</div>
<div class="line"><span class="lineno">   98</span>        <span class="stringliteral">&quot;__pow__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">   99</span>        <span class="stringliteral">&quot;__rshift__&quot;</span>: <span class="stringliteral">&quot;integer&quot;</span>,</div>
<div class="line"><span class="lineno">  100</span>        <span class="stringliteral">&quot;__sub__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">  101</span>        <span class="stringliteral">&quot;__truediv__&quot;</span>: <span class="stringliteral">&quot;floating&quot;</span>,</div>
<div class="line"><span class="lineno">  102</span>        <span class="stringliteral">&quot;__xor__&quot;</span>: <span class="stringliteral">&quot;integer_or_boolean&quot;</span>,</div>
<div class="line"><span class="lineno">  103</span>    }</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="comment"># Recompute each time because of in-place ops</span></div>
<div class="line"><span class="lineno">  106</span>    <span class="keyword">def </span>_array_vals():</div>
<div class="line"><span class="lineno">  107</span>        <span class="keywordflow">for</span> d <span class="keywordflow">in</span> _integer_dtypes:</div>
<div class="line"><span class="lineno">  108</span>            <span class="keywordflow">yield</span> asarray(1, dtype=d)</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">for</span> d <span class="keywordflow">in</span> _boolean_dtypes:</div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordflow">yield</span> asarray(<span class="keyword">False</span>, dtype=d)</div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">for</span> d <span class="keywordflow">in</span> _floating_dtypes:</div>
<div class="line"><span class="lineno">  112</span>            <span class="keywordflow">yield</span> asarray(1.0, dtype=d)</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">for</span> op, dtypes <span class="keywordflow">in</span> binary_op_dtypes.items():</div>
<div class="line"><span class="lineno">  115</span>        ops = [op]</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">if</span> op <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&quot;__eq__&quot;</span>, <span class="stringliteral">&quot;__ne__&quot;</span>, <span class="stringliteral">&quot;__le__&quot;</span>, <span class="stringliteral">&quot;__ge__&quot;</span>, <span class="stringliteral">&quot;__lt__&quot;</span>, <span class="stringliteral">&quot;__gt__&quot;</span>]:</div>
<div class="line"><span class="lineno">  117</span>            rop = <span class="stringliteral">&quot;__r&quot;</span> + op[2:]</div>
<div class="line"><span class="lineno">  118</span>            iop = <span class="stringliteral">&quot;__i&quot;</span> + op[2:]</div>
<div class="line"><span class="lineno">  119</span>            ops += [rop, iop]</div>
<div class="line"><span class="lineno">  120</span>        <span class="keywordflow">for</span> s <span class="keywordflow">in</span> [1, 1.0, <span class="keyword">False</span>]:</div>
<div class="line"><span class="lineno">  121</span>            <span class="keywordflow">for</span> _op <span class="keywordflow">in</span> ops:</div>
<div class="line"><span class="lineno">  122</span>                <span class="keywordflow">for</span> a <span class="keywordflow">in</span> _array_vals():</div>
<div class="line"><span class="lineno">  123</span>                    <span class="comment"># Test array op scalar. From the spec, the following combinations</span></div>
<div class="line"><span class="lineno">  124</span>                    <span class="comment"># are supported:</span></div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>                    <span class="comment"># - Python bool for a bool array dtype,</span></div>
<div class="line"><span class="lineno">  127</span>                    <span class="comment"># - a Python int within the bounds of the given dtype for integer array dtypes,</span></div>
<div class="line"><span class="lineno">  128</span>                    <span class="comment"># - a Python int or float for floating-point array dtypes</span></div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>                    <span class="comment"># We do not do bounds checking for int scalars, but rather use the default</span></div>
<div class="line"><span class="lineno">  131</span>                    <span class="comment"># NumPy behavior for casting in that case.</span></div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>                    <span class="keywordflow">if</span> ((dtypes == <span class="stringliteral">&quot;all&quot;</span></div>
<div class="line"><span class="lineno">  134</span>                         <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;numeric&quot;</span> <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _numeric_dtypes</div>
<div class="line"><span class="lineno">  135</span>                         <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;integer&quot;</span> <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _integer_dtypes</div>
<div class="line"><span class="lineno">  136</span>                         <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;integer_or_boolean&quot;</span> <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _integer_or_boolean_dtypes</div>
<div class="line"><span class="lineno">  137</span>                         <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;boolean&quot;</span> <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _boolean_dtypes</div>
<div class="line"><span class="lineno">  138</span>                         <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;floating&quot;</span> <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _floating_dtypes</div>
<div class="line"><span class="lineno">  139</span>                        )</div>
<div class="line"><span class="lineno">  140</span>                        <span class="comment"># bool is a subtype of int, which is why we avoid</span></div>
<div class="line"><span class="lineno">  141</span>                        <span class="comment"># isinstance here.</span></div>
<div class="line"><span class="lineno">  142</span>                        <span class="keywordflow">and</span> (a.dtype <span class="keywordflow">in</span> _boolean_dtypes <span class="keywordflow">and</span> type(s) == bool</div>
<div class="line"><span class="lineno">  143</span>                             <span class="keywordflow">or</span> a.dtype <span class="keywordflow">in</span> _integer_dtypes <span class="keywordflow">and</span> type(s) == int</div>
<div class="line"><span class="lineno">  144</span>                             <span class="keywordflow">or</span> a.dtype <span class="keywordflow">in</span> _floating_dtypes <span class="keywordflow">and</span> type(s) <span class="keywordflow">in</span> [float, int]</div>
<div class="line"><span class="lineno">  145</span>                        )):</div>
<div class="line"><span class="lineno">  146</span>                        <span class="comment"># Only test for no error</span></div>
<div class="line"><span class="lineno">  147</span>                        getattr(a, _op)(s)</div>
<div class="line"><span class="lineno">  148</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  149</span>                        assert_raises(TypeError, <span class="keyword">lambda</span>: getattr(a, _op)(s))</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>                <span class="comment"># Test array op array.</span></div>
<div class="line"><span class="lineno">  152</span>                <span class="keywordflow">for</span> _op <span class="keywordflow">in</span> ops:</div>
<div class="line"><span class="lineno">  153</span>                    <span class="keywordflow">for</span> x <span class="keywordflow">in</span> _array_vals():</div>
<div class="line"><span class="lineno">  154</span>                        <span class="keywordflow">for</span> y <span class="keywordflow">in</span> _array_vals():</div>
<div class="line"><span class="lineno">  155</span>                            <span class="comment"># See the promotion table in NEP 47 or the array</span></div>
<div class="line"><span class="lineno">  156</span>                            <span class="comment"># API spec page on type promotion. Mixed kind</span></div>
<div class="line"><span class="lineno">  157</span>                            <span class="comment"># promotion is not defined.</span></div>
<div class="line"><span class="lineno">  158</span>                            <span class="keywordflow">if</span> (x.dtype == uint64 <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> [int8, int16, int32, int64]</div>
<div class="line"><span class="lineno">  159</span>                                <span class="keywordflow">or</span> y.dtype == uint64 <span class="keywordflow">and</span> x.dtype <span class="keywordflow">in</span> [int8, int16, int32, int64]</div>
<div class="line"><span class="lineno">  160</span>                                <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _integer_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _integer_dtypes</div>
<div class="line"><span class="lineno">  161</span>                                <span class="keywordflow">or</span> y.dtype <span class="keywordflow">in</span> _integer_dtypes <span class="keywordflow">and</span> x.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _integer_dtypes</div>
<div class="line"><span class="lineno">  162</span>                                <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _boolean_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _boolean_dtypes</div>
<div class="line"><span class="lineno">  163</span>                                <span class="keywordflow">or</span> y.dtype <span class="keywordflow">in</span> _boolean_dtypes <span class="keywordflow">and</span> x.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _boolean_dtypes</div>
<div class="line"><span class="lineno">  164</span>                                <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _floating_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _floating_dtypes</div>
<div class="line"><span class="lineno">  165</span>                                <span class="keywordflow">or</span> y.dtype <span class="keywordflow">in</span> _floating_dtypes <span class="keywordflow">and</span> x.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _floating_dtypes</div>
<div class="line"><span class="lineno">  166</span>                                ):</div>
<div class="line"><span class="lineno">  167</span>                                assert_raises(TypeError, <span class="keyword">lambda</span>: getattr(x, _op)(y))</div>
<div class="line"><span class="lineno">  168</span>                            <span class="comment"># Ensure in-place operators only promote to the same dtype as the left operand.</span></div>
<div class="line"><span class="lineno">  169</span>                            <span class="keywordflow">elif</span> (</div>
<div class="line"><span class="lineno">  170</span>                                _op.startswith(<span class="stringliteral">&quot;__i&quot;</span>)</div>
<div class="line"><span class="lineno">  171</span>                                <span class="keywordflow">and</span> result_type(x.dtype, y.dtype) != x.dtype</div>
<div class="line"><span class="lineno">  172</span>                            ):</div>
<div class="line"><span class="lineno">  173</span>                                assert_raises(TypeError, <span class="keyword">lambda</span>: getattr(x, _op)(y))</div>
<div class="line"><span class="lineno">  174</span>                            <span class="comment"># Ensure only those dtypes that are required for every operator are allowed.</span></div>
<div class="line"><span class="lineno">  175</span>                            <span class="keywordflow">elif</span> (dtypes == <span class="stringliteral">&quot;all&quot;</span> <span class="keywordflow">and</span> (x.dtype <span class="keywordflow">in</span> _boolean_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _boolean_dtypes</div>
<div class="line"><span class="lineno">  176</span>                                                      <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _numeric_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _numeric_dtypes)</div>
<div class="line"><span class="lineno">  177</span>                                <span class="keywordflow">or</span> (dtypes == <span class="stringliteral">&quot;numeric&quot;</span> <span class="keywordflow">and</span> x.dtype <span class="keywordflow">in</span> _numeric_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _numeric_dtypes)</div>
<div class="line"><span class="lineno">  178</span>                                <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;integer&quot;</span> <span class="keywordflow">and</span> x.dtype <span class="keywordflow">in</span> _integer_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _numeric_dtypes</div>
<div class="line"><span class="lineno">  179</span>                                <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;integer_or_boolean&quot;</span> <span class="keywordflow">and</span> (x.dtype <span class="keywordflow">in</span> _integer_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _integer_dtypes</div>
<div class="line"><span class="lineno">  180</span>                                                                       <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _boolean_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _boolean_dtypes)</div>
<div class="line"><span class="lineno">  181</span>                                <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;boolean&quot;</span> <span class="keywordflow">and</span> x.dtype <span class="keywordflow">in</span> _boolean_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _boolean_dtypes</div>
<div class="line"><span class="lineno">  182</span>                                <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;floating&quot;</span> <span class="keywordflow">and</span> x.dtype <span class="keywordflow">in</span> _floating_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> _floating_dtypes</div>
<div class="line"><span class="lineno">  183</span>                            ):</div>
<div class="line"><span class="lineno">  184</span>                                getattr(x, _op)(y)</div>
<div class="line"><span class="lineno">  185</span>                            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  186</span>                                assert_raises(TypeError, <span class="keyword">lambda</span>: getattr(x, _op)(y))</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    unary_op_dtypes = {</div>
<div class="line"><span class="lineno">  189</span>        <span class="stringliteral">&quot;__abs__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">  190</span>        <span class="stringliteral">&quot;__invert__&quot;</span>: <span class="stringliteral">&quot;integer_or_boolean&quot;</span>,</div>
<div class="line"><span class="lineno">  191</span>        <span class="stringliteral">&quot;__neg__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">  192</span>        <span class="stringliteral">&quot;__pos__&quot;</span>: <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">  193</span>    }</div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">for</span> op, dtypes <span class="keywordflow">in</span> unary_op_dtypes.items():</div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">for</span> a <span class="keywordflow">in</span> _array_vals():</div>
<div class="line"><span class="lineno">  196</span>            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  197</span>                dtypes == <span class="stringliteral">&quot;numeric&quot;</span></div>
<div class="line"><span class="lineno">  198</span>                <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _numeric_dtypes</div>
<div class="line"><span class="lineno">  199</span>                <span class="keywordflow">or</span> dtypes == <span class="stringliteral">&quot;integer_or_boolean&quot;</span></div>
<div class="line"><span class="lineno">  200</span>                <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _integer_or_boolean_dtypes</div>
<div class="line"><span class="lineno">  201</span>            ):</div>
<div class="line"><span class="lineno">  202</span>                <span class="comment"># Only test for no error</span></div>
<div class="line"><span class="lineno">  203</span>                getattr(a, op)()</div>
<div class="line"><span class="lineno">  204</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  205</span>                assert_raises(TypeError, <span class="keyword">lambda</span>: getattr(a, op)())</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    <span class="comment"># Finally, matmul() must be tested separately, because it works a bit</span></div>
<div class="line"><span class="lineno">  208</span>    <span class="comment"># different from the other operations.</span></div>
<div class="line"><span class="lineno">  209</span>    <span class="keyword">def </span>_matmul_array_vals():</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordflow">for</span> a <span class="keywordflow">in</span> _array_vals():</div>
<div class="line"><span class="lineno">  211</span>            <span class="keywordflow">yield</span> a</div>
<div class="line"><span class="lineno">  212</span>        <span class="keywordflow">for</span> d <span class="keywordflow">in</span> _all_dtypes:</div>
<div class="line"><span class="lineno">  213</span>            <span class="keywordflow">yield</span> ones((3, 4), dtype=d)</div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">yield</span> ones((4, 2), dtype=d)</div>
<div class="line"><span class="lineno">  215</span>            <span class="keywordflow">yield</span> ones((4, 4), dtype=d)</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="comment"># Scalars always error</span></div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">for</span> _op <span class="keywordflow">in</span> [<span class="stringliteral">&quot;__matmul__&quot;</span>, <span class="stringliteral">&quot;__rmatmul__&quot;</span>, <span class="stringliteral">&quot;__imatmul__&quot;</span>]:</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">for</span> s <span class="keywordflow">in</span> [1, 1.0, <span class="keyword">False</span>]:</div>
<div class="line"><span class="lineno">  220</span>            <span class="keywordflow">for</span> a <span class="keywordflow">in</span> _matmul_array_vals():</div>
<div class="line"><span class="lineno">  221</span>                <span class="keywordflow">if</span> (type(s) <span class="keywordflow">in</span> [float, int] <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _floating_dtypes</div>
<div class="line"><span class="lineno">  222</span>                    <span class="keywordflow">or</span> type(s) == int <span class="keywordflow">and</span> a.dtype <span class="keywordflow">in</span> _integer_dtypes):</div>
<div class="line"><span class="lineno">  223</span>                    <span class="comment"># Type promotion is valid, but @ is not allowed on 0-D</span></div>
<div class="line"><span class="lineno">  224</span>                    <span class="comment"># inputs, so the error is a ValueError</span></div>
<div class="line"><span class="lineno">  225</span>                    assert_raises(ValueError, <span class="keyword">lambda</span>: getattr(a, _op)(s))</div>
<div class="line"><span class="lineno">  226</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  227</span>                    assert_raises(TypeError, <span class="keyword">lambda</span>: getattr(a, _op)(s))</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>    <span class="keywordflow">for</span> x <span class="keywordflow">in</span> _matmul_array_vals():</div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">for</span> y <span class="keywordflow">in</span> _matmul_array_vals():</div>
<div class="line"><span class="lineno">  231</span>            <span class="keywordflow">if</span> (x.dtype == uint64 <span class="keywordflow">and</span> y.dtype <span class="keywordflow">in</span> [int8, int16, int32, int64]</div>
<div class="line"><span class="lineno">  232</span>                <span class="keywordflow">or</span> y.dtype == uint64 <span class="keywordflow">and</span> x.dtype <span class="keywordflow">in</span> [int8, int16, int32, int64]</div>
<div class="line"><span class="lineno">  233</span>                <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _integer_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _integer_dtypes</div>
<div class="line"><span class="lineno">  234</span>                <span class="keywordflow">or</span> y.dtype <span class="keywordflow">in</span> _integer_dtypes <span class="keywordflow">and</span> x.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _integer_dtypes</div>
<div class="line"><span class="lineno">  235</span>                <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _floating_dtypes <span class="keywordflow">and</span> y.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _floating_dtypes</div>
<div class="line"><span class="lineno">  236</span>                <span class="keywordflow">or</span> y.dtype <span class="keywordflow">in</span> _floating_dtypes <span class="keywordflow">and</span> x.dtype <span class="keywordflow">not</span> <span class="keywordflow">in</span> _floating_dtypes</div>
<div class="line"><span class="lineno">  237</span>                <span class="keywordflow">or</span> x.dtype <span class="keywordflow">in</span> _boolean_dtypes</div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">or</span> y.dtype <span class="keywordflow">in</span> _boolean_dtypes</div>
<div class="line"><span class="lineno">  239</span>                ):</div>
<div class="line"><span class="lineno">  240</span>                assert_raises(TypeError, <span class="keyword">lambda</span>: x.__matmul__(y))</div>
<div class="line"><span class="lineno">  241</span>                assert_raises(TypeError, <span class="keyword">lambda</span>: y.__rmatmul__(x))</div>
<div class="line"><span class="lineno">  242</span>                assert_raises(TypeError, <span class="keyword">lambda</span>: x.__imatmul__(y))</div>
<div class="line"><span class="lineno">  243</span>            <span class="keywordflow">elif</span> x.shape == () <span class="keywordflow">or</span> y.shape == () <span class="keywordflow">or</span> x.shape[1] != y.shape[0]:</div>
<div class="line"><span class="lineno">  244</span>                assert_raises(ValueError, <span class="keyword">lambda</span>: x.__matmul__(y))</div>
<div class="line"><span class="lineno">  245</span>                assert_raises(ValueError, <span class="keyword">lambda</span>: y.__rmatmul__(x))</div>
<div class="line"><span class="lineno">  246</span>                <span class="keywordflow">if</span> result_type(x.dtype, y.dtype) != x.dtype:</div>
<div class="line"><span class="lineno">  247</span>                    assert_raises(TypeError, <span class="keyword">lambda</span>: x.__imatmul__(y))</div>
<div class="line"><span class="lineno">  248</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  249</span>                    assert_raises(ValueError, <span class="keyword">lambda</span>: x.__imatmul__(y))</div>
<div class="line"><span class="lineno">  250</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  251</span>                x.__matmul__(y)</div>
<div class="line"><span class="lineno">  252</span>                y.__rmatmul__(x)</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">if</span> result_type(x.dtype, y.dtype) != x.dtype:</div>
<div class="line"><span class="lineno">  254</span>                    assert_raises(TypeError, <span class="keyword">lambda</span>: x.__imatmul__(y))</div>
<div class="line"><span class="lineno">  255</span>                <span class="keywordflow">elif</span> y.shape[0] != y.shape[1]:</div>
<div class="line"><span class="lineno">  256</span>                    <span class="comment"># This one fails because x @ y has a different shape from x</span></div>
<div class="line"><span class="lineno">  257</span>                    assert_raises(ValueError, <span class="keyword">lambda</span>: x.__imatmul__(y))</div>
<div class="line"><span class="lineno">  258</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  259</span>                    x.__imatmul__(y)</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aacd34838318911c0408a32e53dc9371c" name="aacd34838318911c0408a32e53dc9371c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacd34838318911c0408a32e53dc9371c">&#9670;&#160;</a></span>test_python_scalar_construtors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_python_scalar_construtors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  262</span><span class="keyword">def </span>test_python_scalar_construtors():</div>
<div class="line"><span class="lineno">  263</span>    b = asarray(<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  264</span>    i = asarray(0)</div>
<div class="line"><span class="lineno">  265</span>    f = asarray(0.0)</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    <span class="keyword">assert</span> bool(b) == <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  268</span>    <span class="keyword">assert</span> int(i) == 0</div>
<div class="line"><span class="lineno">  269</span>    <span class="keyword">assert</span> float(f) == 0.0</div>
<div class="line"><span class="lineno">  270</span>    <span class="keyword">assert</span> operator.index(i) == 0</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <span class="comment"># bool/int/float should only be allowed on 0-D arrays.</span></div>
<div class="line"><span class="lineno">  273</span>    assert_raises(TypeError, <span class="keyword">lambda</span>: bool(asarray([<span class="keyword">False</span>])))</div>
<div class="line"><span class="lineno">  274</span>    assert_raises(TypeError, <span class="keyword">lambda</span>: int(asarray([0])))</div>
<div class="line"><span class="lineno">  275</span>    assert_raises(TypeError, <span class="keyword">lambda</span>: float(asarray([0.0])))</div>
<div class="line"><span class="lineno">  276</span>    assert_raises(TypeError, <span class="keyword">lambda</span>: operator.index(asarray([0])))</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>    <span class="comment"># bool/int/float should only be allowed on arrays of the corresponding</span></div>
<div class="line"><span class="lineno">  279</span>    <span class="comment"># dtype</span></div>
<div class="line"><span class="lineno">  280</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: bool(i))</div>
<div class="line"><span class="lineno">  281</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: bool(f))</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: int(b))</div>
<div class="line"><span class="lineno">  284</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: int(f))</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: float(b))</div>
<div class="line"><span class="lineno">  287</span>    assert_raises(ValueError, <span class="keyword">lambda</span>: float(i))</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>    assert_raises(TypeError, <span class="keyword">lambda</span>: operator.index(b))</div>
<div class="line"><span class="lineno">  290</span>    assert_raises(TypeError, <span class="keyword">lambda</span>: operator.index(f))</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afc5950bcee3e3a68ed65652078ac786e" name="afc5950bcee3e3a68ed65652078ac786e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc5950bcee3e3a68ed65652078ac786e">&#9670;&#160;</a></span>test_validate_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.array_api.tests.test_array_object.test_validate_index </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   25</span><span class="keyword">def </span>test_validate_index():</div>
<div class="line"><span class="lineno">   26</span>    <span class="comment"># The indexing tests in the official array API test suite test that the</span></div>
<div class="line"><span class="lineno">   27</span>    <span class="comment"># array object correctly handles the subset of indices that are required</span></div>
<div class="line"><span class="lineno">   28</span>    <span class="comment"># by the spec. But the NumPy array API implementation specifically</span></div>
<div class="line"><span class="lineno">   29</span>    <span class="comment"># disallows any index not required by the spec, via Array._validate_index.</span></div>
<div class="line"><span class="lineno">   30</span>    <span class="comment"># This test focuses on testing that non-valid indices are correctly</span></div>
<div class="line"><span class="lineno">   31</span>    <span class="comment"># rejected. See</span></div>
<div class="line"><span class="lineno">   32</span>    <span class="comment"># https://data-apis.org/array-api/latest/API_specification/indexing.html</span></div>
<div class="line"><span class="lineno">   33</span>    <span class="comment"># and the docstring of Array._validate_index for the exact indexing</span></div>
<div class="line"><span class="lineno">   34</span>    <span class="comment"># behavior that should be allowed. This does not test indices that are</span></div>
<div class="line"><span class="lineno">   35</span>    <span class="comment"># already invalid in NumPy itself because Array will generally just pass</span></div>
<div class="line"><span class="lineno">   36</span>    <span class="comment"># such indices directly to the underlying np.ndarray.</span></div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>    a = ones((3, 4))</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span>    <span class="comment"># Out of bounds slices are not allowed</span></div>
<div class="line"><span class="lineno">   41</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[:4])</div>
<div class="line"><span class="lineno">   42</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[:-4])</div>
<div class="line"><span class="lineno">   43</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[:3:-1])</div>
<div class="line"><span class="lineno">   44</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[:-5:-1])</div>
<div class="line"><span class="lineno">   45</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[4:])</div>
<div class="line"><span class="lineno">   46</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[-4:])</div>
<div class="line"><span class="lineno">   47</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[4::-1])</div>
<div class="line"><span class="lineno">   48</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[-4::-1])</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,:5])</div>
<div class="line"><span class="lineno">   51</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,:-5])</div>
<div class="line"><span class="lineno">   52</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,:5:-1])</div>
<div class="line"><span class="lineno">   53</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,:-6:-1])</div>
<div class="line"><span class="lineno">   54</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,5:])</div>
<div class="line"><span class="lineno">   55</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,-5:])</div>
<div class="line"><span class="lineno">   56</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,5::-1])</div>
<div class="line"><span class="lineno">   57</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[...,-5::-1])</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    <span class="comment"># Boolean indices cannot be part of a larger tuple index</span></div>
<div class="line"><span class="lineno">   60</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[a[:,0]==1,0])</div>
<div class="line"><span class="lineno">   61</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[a[:,0]==1,...])</div>
<div class="line"><span class="lineno">   62</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[..., a[0]==1])</div>
<div class="line"><span class="lineno">   63</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[[<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno">   64</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[(<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">True</span>),])</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    <span class="comment"># Integer array indices are not allowed (except for 0-D)</span></div>
<div class="line"><span class="lineno">   67</span>    idx = asarray([[0, 1]])</div>
<div class="line"><span class="lineno">   68</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[idx])</div>
<div class="line"><span class="lineno">   69</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[idx,])</div>
<div class="line"><span class="lineno">   70</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[[0, 1]])</div>
<div class="line"><span class="lineno">   71</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[(0, 1), (0, 1)])</div>
<div class="line"><span class="lineno">   72</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[[0, 1]])</div>
<div class="line"><span class="lineno">   73</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[np.array([[0, 1]])])</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>    <span class="comment"># Multiaxis indices must contain exactly as many indices as dimensions</span></div>
<div class="line"><span class="lineno">   76</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[()])</div>
<div class="line"><span class="lineno">   77</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[0,])</div>
<div class="line"><span class="lineno">   78</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[0])</div>
<div class="line"><span class="lineno">   79</span>    assert_raises(IndexError, <span class="keyword">lambda</span>: a[:])</div>
<div class="line"><span class="lineno">   80</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
