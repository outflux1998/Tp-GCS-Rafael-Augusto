<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: scipy.optimize._milp Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacescipy.html">scipy</a></li><li class="navelem"><a class="el" href="namespacescipy_1_1optimize.html">optimize</a></li><li class="navelem"><a class="el" href="namespacescipy_1_1optimize_1_1__milp.html">_milp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">scipy.optimize._milp Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acbfb066026938af05903229d0a3c0dd1" id="r_acbfb066026938af05903229d0a3c0dd1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescipy_1_1optimize_1_1__milp.html#acbfb066026938af05903229d0a3c0dd1">_constraints_to_components</a> (constraints)</td></tr>
<tr class="separator:acbfb066026938af05903229d0a3c0dd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6eef2539115aa1876d81fd5f71b0cbe" id="r_ae6eef2539115aa1876d81fd5f71b0cbe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescipy_1_1optimize_1_1__milp.html#ae6eef2539115aa1876d81fd5f71b0cbe">_milp_iv</a> (c, integrality, bounds, constraints, options)</td></tr>
<tr class="separator:ae6eef2539115aa1876d81fd5f71b0cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bea1cdba09a45e59e5b2cf6238f9b31" id="r_a5bea1cdba09a45e59e5b2cf6238f9b31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescipy_1_1optimize_1_1__milp.html#a5bea1cdba09a45e59e5b2cf6238f9b31">milp</a> (c, *integrality=None, bounds=None, constraints=None, options=None)</td></tr>
<tr class="separator:a5bea1cdba09a45e59e5b2cf6238f9b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="acbfb066026938af05903229d0a3c0dd1" name="acbfb066026938af05903229d0a3c0dd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbfb066026938af05903229d0a3c0dd1">&#9670;&#160;</a></span>_constraints_to_components()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">scipy.optimize._milp._constraints_to_components </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>constraints</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Convert sequence of constraints to a single set of components A, b_l, b_u.

`constraints` could be

1. A LinearConstraint
2. A tuple representing a LinearConstraint
3. An invalid object
4. A sequence of composed entirely of objects of type 1/2
5. A sequence containing at least one object of type 3

We want to accept 1, 2, and 4 and reject 3 and 5.
</pre> <div class="fragment"><div class="line"><span class="lineno">   10</span><span class="keyword">def </span>_constraints_to_components(constraints):</div>
<div class="line"><span class="lineno">   11</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   12</span><span class="stringliteral">    Convert sequence of constraints to a single set of components A, b_l, b_u.</span></div>
<div class="line"><span class="lineno">   13</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   14</span><span class="stringliteral">    `constraints` could be</span></div>
<div class="line"><span class="lineno">   15</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   16</span><span class="stringliteral">    1. A LinearConstraint</span></div>
<div class="line"><span class="lineno">   17</span><span class="stringliteral">    2. A tuple representing a LinearConstraint</span></div>
<div class="line"><span class="lineno">   18</span><span class="stringliteral">    3. An invalid object</span></div>
<div class="line"><span class="lineno">   19</span><span class="stringliteral">    4. A sequence of composed entirely of objects of type 1/2</span></div>
<div class="line"><span class="lineno">   20</span><span class="stringliteral">    5. A sequence containing at least one object of type 3</span></div>
<div class="line"><span class="lineno">   21</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">    We want to accept 1, 2, and 4 and reject 3 and 5.</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   24</span>    message = (<span class="stringliteral">&quot;`constraints` (or each element within `constraints`) must be &quot;</span></div>
<div class="line"><span class="lineno">   25</span>               <span class="stringliteral">&quot;convertible into an instance of &quot;</span></div>
<div class="line"><span class="lineno">   26</span>               <span class="stringliteral">&quot;`scipy.optimize.LinearConstraint`.&quot;</span>)</div>
<div class="line"><span class="lineno">   27</span>    As = []</div>
<div class="line"><span class="lineno">   28</span>    b_ls = []</div>
<div class="line"><span class="lineno">   29</span>    b_us = []</div>
<div class="line"><span class="lineno">   30</span> </div>
<div class="line"><span class="lineno">   31</span>    <span class="comment"># Accept case 1 by standardizing as case 4</span></div>
<div class="line"><span class="lineno">   32</span>    <span class="keywordflow">if</span> isinstance(constraints, LinearConstraint):</div>
<div class="line"><span class="lineno">   33</span>        constraints = [constraints]</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   35</span>        <span class="comment"># Reject case 3</span></div>
<div class="line"><span class="lineno">   36</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   37</span>            <a class="code hl_variable" href="__lapack__subroutines_8h.html#a60590d91febfcb54d88443940cd5f23e">iter</a>(constraints)</div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> exc:</div>
<div class="line"><span class="lineno">   39</span>            <span class="keywordflow">raise</span> ValueError(message) <span class="keyword">from</span> exc</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>        <span class="comment"># Accept case 2 by standardizing as case 4</span></div>
<div class="line"><span class="lineno">   42</span>        <span class="keywordflow">if</span> len(constraints) == 3:</div>
<div class="line"><span class="lineno">   43</span>            <span class="comment"># argument could be a single tuple representing a LinearConstraint</span></div>
<div class="line"><span class="lineno">   44</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   45</span>                constraints = [LinearConstraint(*constraints)]</div>
<div class="line"><span class="lineno">   46</span>            <span class="keywordflow">except</span> (TypeError, ValueError, np.VisibleDeprecationWarning):</div>
<div class="line"><span class="lineno">   47</span>                <span class="comment"># argument was not a tuple representing a LinearConstraint</span></div>
<div class="line"><span class="lineno">   48</span>                <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    <span class="comment"># Address cases 4/5</span></div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">for</span> constraint <span class="keywordflow">in</span> constraints:</div>
<div class="line"><span class="lineno">   52</span>        <span class="comment"># if it&#39;s not a LinearConstraint or something that represents a</span></div>
<div class="line"><span class="lineno">   53</span>        <span class="comment"># LinearConstraint at this point, it&#39;s invalid</span></div>
<div class="line"><span class="lineno">   54</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(constraint, LinearConstraint):</div>
<div class="line"><span class="lineno">   55</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   56</span>                constraint = LinearConstraint(*constraint)</div>
<div class="line"><span class="lineno">   57</span>            <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> exc:</div>
<div class="line"><span class="lineno">   58</span>                <span class="keywordflow">raise</span> ValueError(message) <span class="keyword">from</span> exc</div>
<div class="line"><span class="lineno">   59</span>        As.append(csc_array(constraint.A))</div>
<div class="line"><span class="lineno">   60</span>        b_ls.append(np.atleast_1d(constraint.lb).astype(np.double))</div>
<div class="line"><span class="lineno">   61</span>        b_us.append(np.atleast_1d(constraint.ub).astype(np.double))</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>    <span class="keywordflow">if</span> len(As) &gt; 1:</div>
<div class="line"><span class="lineno">   64</span>        A = vstack(As)</div>
<div class="line"><span class="lineno">   65</span>        b_l = np.concatenate(b_ls)</div>
<div class="line"><span class="lineno">   66</span>        b_u = np.concatenate(b_us)</div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">else</span>:  <span class="comment"># avoid unnecessary copying</span></div>
<div class="line"><span class="lineno">   68</span>        A = As[0]</div>
<div class="line"><span class="lineno">   69</span>        b_l = b_ls[0]</div>
<div class="line"><span class="lineno">   70</span>        b_u = b_us[0]</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordflow">return</span> A, b_l, b_u</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="ttc" id="a__lapack__subroutines_8h_html_a60590d91febfcb54d88443940cd5f23e"><div class="ttname"><a href="__lapack__subroutines_8h.html#a60590d91febfcb54d88443940cd5f23e">iter</a></div><div class="ttdeci">void int double int double double double double int int * iter</div><div class="ttdef"><b>Definition</b> _lapack_subroutines.h:623</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6eef2539115aa1876d81fd5f71b0cbe" name="ae6eef2539115aa1876d81fd5f71b0cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6eef2539115aa1876d81fd5f71b0cbe">&#9670;&#160;</a></span>_milp_iv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">scipy.optimize._milp._milp_iv </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>integrality</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bounds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>constraints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   75</span><span class="keyword">def </span>_milp_iv(c, integrality, bounds, constraints, options):</div>
<div class="line"><span class="lineno">   76</span>    <span class="comment"># objective IV</span></div>
<div class="line"><span class="lineno">   77</span>    c = np.atleast_1d(c).astype(np.double)</div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">if</span> c.ndim != 1 <span class="keywordflow">or</span> c.size == 0 <span class="keywordflow">or</span> <span class="keywordflow">not</span> np.all(np.isfinite(c)):</div>
<div class="line"><span class="lineno">   79</span>        message = (<span class="stringliteral">&quot;`c` must be a one-dimensional array of finite numbers &quot;</span></div>
<div class="line"><span class="lineno">   80</span>                   <span class="stringliteral">&quot;with at least one element.&quot;</span>)</div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">raise</span> ValueError(message)</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment"># integrality IV</span></div>
<div class="line"><span class="lineno">   84</span>    message = (<span class="stringliteral">&quot;`integrality` must contain integers 0-3 and be broadcastable &quot;</span></div>
<div class="line"><span class="lineno">   85</span>               <span class="stringliteral">&quot;to `c.shape`.&quot;</span>)</div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">if</span> integrality <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   87</span>        integrality = 0</div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   89</span>        integrality = np.broadcast_to(integrality, c.shape).astype(np.uint8)</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">except</span> ValueError:</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">raise</span> ValueError(message)</div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">if</span> integrality.min() &lt; 0 <span class="keywordflow">or</span> integrality.max() &gt; 3:</div>
<div class="line"><span class="lineno">   93</span>        <span class="keywordflow">raise</span> ValueError(message)</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="comment"># bounds IV</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">if</span> bounds <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   97</span>        bounds = Bounds(0, np.inf)</div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">elif</span> <span class="keywordflow">not</span> isinstance(bounds, Bounds):</div>
<div class="line"><span class="lineno">   99</span>        message = (<span class="stringliteral">&quot;`bounds` must be convertible into an instance of &quot;</span></div>
<div class="line"><span class="lineno">  100</span>                   <span class="stringliteral">&quot;`scipy.optimize.Bounds`.&quot;</span>)</div>
<div class="line"><span class="lineno">  101</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  102</span>            bounds = Bounds(*bounds)</div>
<div class="line"><span class="lineno">  103</span>        <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> exc:</div>
<div class="line"><span class="lineno">  104</span>            <span class="keywordflow">raise</span> ValueError(message) <span class="keyword">from</span> exc</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  107</span>        lb = np.broadcast_to(bounds.lb, c.shape).astype(np.double)</div>
<div class="line"><span class="lineno">  108</span>        ub = np.broadcast_to(bounds.ub, c.shape).astype(np.double)</div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">except</span> (ValueError, TypeError) <span class="keyword">as</span> exc:</div>
<div class="line"><span class="lineno">  110</span>        message = (<span class="stringliteral">&quot;`bounds.lb` and `bounds.ub` must contain reals and &quot;</span></div>
<div class="line"><span class="lineno">  111</span>                   <span class="stringliteral">&quot;be broadcastable to `c.shape`.&quot;</span>)</div>
<div class="line"><span class="lineno">  112</span>        <span class="keywordflow">raise</span> ValueError(message) <span class="keyword">from</span> exc</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="comment"># constraints IV</span></div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> constraints:</div>
<div class="line"><span class="lineno">  116</span>        constraints = [LinearConstraint(np.empty((0, c.size)),</div>
<div class="line"><span class="lineno">  117</span>                                        np.empty((0,)), np.empty((0,)))]</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  119</span>        A, b_l, b_u = _constraints_to_components(constraints)</div>
<div class="line"><span class="lineno">  120</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> exc:</div>
<div class="line"><span class="lineno">  121</span>        message = (<span class="stringliteral">&quot;`constraints` (or each element within `constraints`) must &quot;</span></div>
<div class="line"><span class="lineno">  122</span>                   <span class="stringliteral">&quot;be convertible into an instance of &quot;</span></div>
<div class="line"><span class="lineno">  123</span>                   <span class="stringliteral">&quot;`scipy.optimize.LinearConstraint`.&quot;</span>)</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">raise</span> ValueError(message) <span class="keyword">from</span> exc</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">if</span> A.shape != (b_l.size, c.size):</div>
<div class="line"><span class="lineno">  127</span>        message = <span class="stringliteral">&quot;The shape of `A` must be (len(b_l), len(c)).&quot;</span></div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">raise</span> ValueError(message)</div>
<div class="line"><span class="lineno">  129</span>    indptr, indices, data = A.indptr, A.indices, A.data.astype(np.double)</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    <span class="comment"># options IV</span></div>
<div class="line"><span class="lineno">  132</span>    options = options <span class="keywordflow">or</span> {}</div>
<div class="line"><span class="lineno">  133</span>    supported_options = {<span class="stringliteral">&#39;disp&#39;</span>, <span class="stringliteral">&#39;presolve&#39;</span>, <span class="stringliteral">&#39;time_limit&#39;</span>, <span class="stringliteral">&#39;node_limit&#39;</span>}</div>
<div class="line"><span class="lineno">  134</span>    unsupported_options = set(options).difference(supported_options)</div>
<div class="line"><span class="lineno">  135</span>    <span class="keywordflow">if</span> unsupported_options:</div>
<div class="line"><span class="lineno">  136</span>        message = (f<span class="stringliteral">&quot;Unrecognized options detected: {unsupported_options}. &quot;</span></div>
<div class="line"><span class="lineno">  137</span>                   <span class="stringliteral">&quot;These will be passed to HiGHS verbatim.&quot;</span>)</div>
<div class="line"><span class="lineno">  138</span>        warnings.warn(message, RuntimeWarning, stacklevel=3)</div>
<div class="line"><span class="lineno">  139</span>    options_iv = {<span class="stringliteral">&#39;log_to_console&#39;</span>: options.pop(<span class="stringliteral">&quot;disp&quot;</span>, <span class="keyword">False</span>),</div>
<div class="line"><span class="lineno">  140</span>                  <span class="stringliteral">&#39;mip_max_nodes&#39;</span>: options.pop(<span class="stringliteral">&quot;node_limit&quot;</span>, <span class="keywordtype">None</span>)}</div>
<div class="line"><span class="lineno">  141</span>    options_iv.update(options)</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">return</span> c, integrality, lb, ub, indptr, indices, data, b_l, b_u, options_iv</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bea1cdba09a45e59e5b2cf6238f9b31" name="a5bea1cdba09a45e59e5b2cf6238f9b31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bea1cdba09a45e59e5b2cf6238f9b31">&#9670;&#160;</a></span>milp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">scipy.optimize._milp.milp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>integrality</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bounds</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>constraints</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>options</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Mixed-integer linear programming

Solves problems of the following form:

.. math::

\min_x \ &amp; c^T x \\
\mbox{such that} \ &amp; b_l \leq A x \leq b_u,\\
&amp; l \leq x \leq u, \\
&amp; x_i \in \mathbb{Z}, i \in X_i

where :math:`x` is a vector of decision variables;
:math:`c`, :math:`b_l`, :math:`b_u`, :math:`l`, and :math:`u` are vectors;
:math:`A` is a matrix, and :math:`X_i` is the set of indices of
decision variables that must be integral. (In this context, a
variable that can assume only integer values is said to be "integral";
it has an "integrality" constraint.)

Alternatively, that's:

minimize::

c @ x

such that::

b_l &lt;= A @ x &lt;= b_u
l &lt;= x &lt;= u
Specified elements of x must be integers

By default, ``l = 0`` and ``u = np.inf`` unless specified with
``bounds``.

Parameters
----------
c : 1D array_like
The coefficients of the linear objective function to be minimized.
`c` is converted to a double precision array before the problem is
solved.
integrality : 1D array_like, optional
Indicates the type of integrality constraint on each decision variable.

``0`` : Continuous variable; no integrality constraint.

``1`` : Integer variable; decision variable must be an integer
within `bounds`.

``2`` : Semi-continuous variable; decision variable must be within
`bounds` or take value ``0``.

``3`` : Semi-integer variable; decision variable must be an integer
within `bounds` or take value ``0``.

By default, all variables are continuous. `integrality` is converted
to an array of integers before the problem is solved.

bounds : scipy.optimize.Bounds, optional
Bounds on the decision variables. Lower and upper bounds are converted
to double precision arrays before the problem is solved. The
``keep_feasible`` parameter of the `Bounds` object is ignored. If
not specified, all decision variables are constrained to be
non-negative.
constraints : sequence of scipy.optimize.LinearConstraint, optional
Linear constraints of the optimization problem. Arguments may be
one of the following:

1. A single `LinearConstraint` object
2. A single tuple that can be converted to a `LinearConstraint` object
as ``LinearConstraint(*constraints)``
3. A sequence composed entirely of objects of type 1. and 2.

Before the problem is solved, all values are converted to double
precision, and the matrices of constraint coefficients are converted to
instances of `scipy.sparse.csc_array`. The ``keep_feasible`` parameter
of `LinearConstraint` objects is ignored.
options : dict, optional
A dictionary of solver options. The following keys are recognized.

disp : bool (default: ``False``)
Set to ``True`` if indicators of optimization status are to be
printed to the console during optimization.
node_limit : int, optional
The maximum number of nodes (linear program relaxations) to solve
before stopping. Default is no maximum number of nodes.
presolve : bool (default: ``True``)
Presolve attempts to identify trivial infeasibilities,
identify trivial unboundedness, and simplify the problem before
sending it to the main solver.
time_limit : float, optional
The maximum number of seconds allotted to solve the problem.
Default is no time limit.

Returns
-------
res : OptimizeResult
An instance of :class:`scipy.optimize.OptimizeResult`. The object
is guaranteed to have the following attributes.

status : int
An integer representing the exit status of the algorithm.

``0`` : Optimal solution found.

``1`` : Iteration or time limit reached.

``2`` : Problem is infeasible.

``3`` : Problem is unbounded.

``4`` : Other; see message for details.

success : bool
``True`` when an optimal solution is found and ``False`` otherwise.

message : str
A string descriptor of the exit status of the algorithm.

The following attributes will also be present, but the values may be
``None``, depending on the solution status.

x : ndarray
The values of the decision variables that minimize the
objective function while satisfying the constraints.
fun : float
The optimal value of the objective function ``c @ x``.
mip_node_count : int
The number of subproblems or "nodes" solved by the MILP solver.
mip_dual_bound : float
The MILP solver's final estimate of the lower bound on the optimal
solution.
mip_gap : float
The difference between the final objective function value and the
final dual bound.

Notes
-----
`milp` is a wrapper of the HiGHS linear optimization software [1]_. The
algorithm is deterministic, and it typically finds the global optimum of
moderately challenging mixed-integer linear programs (when it exists).

References
----------
.. [1] Huangfu, Q., Galabova, I., Feldmeier, M., and Hall, J. A. J.
"HiGHS - high performance software for linear optimization."
Accessed 12/25/2021 at https://www.maths.ed.ac.uk/hall/HiGHS/#guide
.. [2] Huangfu, Q. and Hall, J. A. J. "Parallelizing the dual revised
simplex method." Mathematical Programming Computation, 10 (1),
119-142, 2018. DOI: 10.1007/s12532-017-0130-5

Examples
--------
Consider the problem at
https://en.wikipedia.org/wiki/Integer_programming#Example, which is
expressed as a maximization problem of two variables. Since `milp` requires
that the problem be expressed as a minimization problem, the objective
function coefficients on the decision variables are:

&gt;&gt;&gt; c = -np.array([0, 1])

Note the negative sign: we maximize the original objective function
by minimizing the negative of the objective function.

We collect the coefficients of the constraints into arrays like:

&gt;&gt;&gt; A = np.array([[-1, 1], [3, 2], [2, 3]])
&gt;&gt;&gt; b_u = np.array([1, 12, 12])
&gt;&gt;&gt; b_l = np.full_like(b_u, -np.inf)

Because there is no lower limit on these constraints, we have defined a
variable ``b_l`` full of values representing negative infinity. This may
be unfamiliar to users of `scipy.optimize.linprog`, which only accepts
"less than" (or "upper bound") inequality constraints of the form
``A_ub @ x &lt;= b_u``. By accepting both ``b_l`` and ``b_u`` of constraints
``b_l &lt;= A_ub @ x &lt;= b_u``, `milp` makes it easy to specify "greater than"
inequality constraints, "less than" inequality constraints, and equality
constraints concisely.

These arrays are collected into a single `LinearConstraint` object like:

&gt;&gt;&gt; from scipy.optimize import LinearConstraint
&gt;&gt;&gt; constraints = LinearConstraint(A, b_l, b_u)

The non-negativity bounds on the decision variables are enforced by
default, so we do not need to provide an argument for `bounds`.

Finally, the problem states that both decision variables must be integers:

&gt;&gt;&gt; integrality = np.ones_like(c)

We solve the problem like:

&gt;&gt;&gt; from scipy.optimize import milp
&gt;&gt;&gt; res = milp(c=c, constraints=constraints, integrality=integrality)
&gt;&gt;&gt; res.x
[1.0, 2.0]

Note that had we solved the relaxed problem (without integrality
constraints):

&gt;&gt;&gt; res = milp(c=c, constraints=constraints)  # OR:
&gt;&gt;&gt; # from scipy.optimize import linprog; res = linprog(c, A, b_u)
&gt;&gt;&gt; res.x
[1.8, 2.8]

we would not have obtained the correct solution by rounding to the nearest
integers.</pre> <div class="fragment"><div class="line"><span class="lineno">  146</span><span class="keyword">def </span>milp(c, *, integrality=None, bounds=None, constraints=None, options=None):</div>
<div class="line"><span class="lineno">  147</span>    <span class="stringliteral">r&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">    Mixed-integer linear programming</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">    Solves problems of the following form:</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">    .. math::</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  154</span><span class="stringliteral">        \min_x \ &amp; c^T x \\</span></div>
<div class="line"><span class="lineno">  155</span><span class="stringliteral">        \mbox{such that} \ &amp; b_l \leq A x \leq b_u,\\</span></div>
<div class="line"><span class="lineno">  156</span><span class="stringliteral">        &amp; l \leq x \leq u, \\</span></div>
<div class="line"><span class="lineno">  157</span><span class="stringliteral">        &amp; x_i \in \mathbb{Z}, i \in X_i</span></div>
<div class="line"><span class="lineno">  158</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  159</span><span class="stringliteral">    where :math:`x` is a vector of decision variables;</span></div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">    :math:`c`, :math:`b_l`, :math:`b_u`, :math:`l`, and :math:`u` are vectors;</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral">    :math:`A` is a matrix, and :math:`X_i` is the set of indices of</span></div>
<div class="line"><span class="lineno">  162</span><span class="stringliteral">    decision variables that must be integral. (In this context, a</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">    variable that can assume only integer values is said to be &quot;integral&quot;;</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral">    it has an &quot;integrality&quot; constraint.)</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">    Alternatively, that&#39;s:</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">    minimize::</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">        c @ x</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">    such that::</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">        b_l &lt;= A @ x &lt;= b_u</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">        l &lt;= x &lt;= u</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">        Specified elements of x must be integers</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral">    By default, ``l = 0`` and ``u = np.inf`` unless specified with</span></div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral">    ``bounds``.</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">    c : 1D array_like</span></div>
<div class="line"><span class="lineno">  184</span><span class="stringliteral">        The coefficients of the linear objective function to be minimized.</span></div>
<div class="line"><span class="lineno">  185</span><span class="stringliteral">        `c` is converted to a double precision array before the problem is</span></div>
<div class="line"><span class="lineno">  186</span><span class="stringliteral">        solved.</span></div>
<div class="line"><span class="lineno">  187</span><span class="stringliteral">    integrality : 1D array_like, optional</span></div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">        Indicates the type of integrality constraint on each decision variable.</span></div>
<div class="line"><span class="lineno">  189</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  190</span><span class="stringliteral">        ``0`` : Continuous variable; no integrality constraint.</span></div>
<div class="line"><span class="lineno">  191</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  192</span><span class="stringliteral">        ``1`` : Integer variable; decision variable must be an integer</span></div>
<div class="line"><span class="lineno">  193</span><span class="stringliteral">        within `bounds`.</span></div>
<div class="line"><span class="lineno">  194</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  195</span><span class="stringliteral">        ``2`` : Semi-continuous variable; decision variable must be within</span></div>
<div class="line"><span class="lineno">  196</span><span class="stringliteral">        `bounds` or take value ``0``.</span></div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  198</span><span class="stringliteral">        ``3`` : Semi-integer variable; decision variable must be an integer</span></div>
<div class="line"><span class="lineno">  199</span><span class="stringliteral">        within `bounds` or take value ``0``.</span></div>
<div class="line"><span class="lineno">  200</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  201</span><span class="stringliteral">        By default, all variables are continuous. `integrality` is converted</span></div>
<div class="line"><span class="lineno">  202</span><span class="stringliteral">        to an array of integers before the problem is solved.</span></div>
<div class="line"><span class="lineno">  203</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral">    bounds : scipy.optimize.Bounds, optional</span></div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">        Bounds on the decision variables. Lower and upper bounds are converted</span></div>
<div class="line"><span class="lineno">  206</span><span class="stringliteral">        to double precision arrays before the problem is solved. The</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">        ``keep_feasible`` parameter of the `Bounds` object is ignored. If</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">        not specified, all decision variables are constrained to be</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">        non-negative.</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">    constraints : sequence of scipy.optimize.LinearConstraint, optional</span></div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral">        Linear constraints of the optimization problem. Arguments may be</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">        one of the following:</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">        1. A single `LinearConstraint` object</span></div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral">        2. A single tuple that can be converted to a `LinearConstraint` object</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">           as ``LinearConstraint(*constraints)``</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">        3. A sequence composed entirely of objects of type 1. and 2.</span></div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">        Before the problem is solved, all values are converted to double</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral">        precision, and the matrices of constraint coefficients are converted to</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">        instances of `scipy.sparse.csc_array`. The ``keep_feasible`` parameter</span></div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">        of `LinearConstraint` objects is ignored.</span></div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral">    options : dict, optional</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">        A dictionary of solver options. The following keys are recognized.</span></div>
<div class="line"><span class="lineno">  225</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  226</span><span class="stringliteral">        disp : bool (default: ``False``)</span></div>
<div class="line"><span class="lineno">  227</span><span class="stringliteral">            Set to ``True`` if indicators of optimization status are to be</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral">            printed to the console during optimization.</span></div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral">        node_limit : int, optional</span></div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">            The maximum number of nodes (linear program relaxations) to solve</span></div>
<div class="line"><span class="lineno">  231</span><span class="stringliteral">            before stopping. Default is no maximum number of nodes.</span></div>
<div class="line"><span class="lineno">  232</span><span class="stringliteral">        presolve : bool (default: ``True``)</span></div>
<div class="line"><span class="lineno">  233</span><span class="stringliteral">            Presolve attempts to identify trivial infeasibilities,</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">            identify trivial unboundedness, and simplify the problem before</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">            sending it to the main solver.</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">        time_limit : float, optional</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">            The maximum number of seconds allotted to solve the problem.</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">            Default is no time limit.</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">    res : OptimizeResult</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">        An instance of :class:`scipy.optimize.OptimizeResult`. The object</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">        is guaranteed to have the following attributes.</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">        status : int</span></div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">            An integer representing the exit status of the algorithm.</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">            ``0`` : Optimal solution found.</span></div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">            ``1`` : Iteration or time limit reached.</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">            ``2`` : Problem is infeasible.</span></div>
<div class="line"><span class="lineno">  254</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  255</span><span class="stringliteral">            ``3`` : Problem is unbounded.</span></div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  257</span><span class="stringliteral">            ``4`` : Other; see message for details.</span></div>
<div class="line"><span class="lineno">  258</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  259</span><span class="stringliteral">        success : bool</span></div>
<div class="line"><span class="lineno">  260</span><span class="stringliteral">            ``True`` when an optimal solution is found and ``False`` otherwise.</span></div>
<div class="line"><span class="lineno">  261</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral">        message : str</span></div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">            A string descriptor of the exit status of the algorithm.</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">        The following attributes will also be present, but the values may be</span></div>
<div class="line"><span class="lineno">  266</span><span class="stringliteral">        ``None``, depending on the solution status.</span></div>
<div class="line"><span class="lineno">  267</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  268</span><span class="stringliteral">        x : ndarray</span></div>
<div class="line"><span class="lineno">  269</span><span class="stringliteral">            The values of the decision variables that minimize the</span></div>
<div class="line"><span class="lineno">  270</span><span class="stringliteral">            objective function while satisfying the constraints.</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">        fun : float</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral">            The optimal value of the objective function ``c @ x``.</span></div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">        mip_node_count : int</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral">            The number of subproblems or &quot;nodes&quot; solved by the MILP solver.</span></div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral">        mip_dual_bound : float</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral">            The MILP solver&#39;s final estimate of the lower bound on the optimal</span></div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">            solution.</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">        mip_gap : float</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">            The difference between the final objective function value and the</span></div>
<div class="line"><span class="lineno">  280</span><span class="stringliteral">            final dual bound.</span></div>
<div class="line"><span class="lineno">  281</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  282</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno">  283</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno">  284</span><span class="stringliteral">    `milp` is a wrapper of the HiGHS linear optimization software [1]_. The</span></div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral">    algorithm is deterministic, and it typically finds the global optimum of</span></div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral">    moderately challenging mixed-integer linear programs (when it exists).</span></div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">    References</span></div>
<div class="line"><span class="lineno">  289</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  290</span><span class="stringliteral">    .. [1] Huangfu, Q., Galabova, I., Feldmeier, M., and Hall, J. A. J.</span></div>
<div class="line"><span class="lineno">  291</span><span class="stringliteral">           &quot;HiGHS - high performance software for linear optimization.&quot;</span></div>
<div class="line"><span class="lineno">  292</span><span class="stringliteral">           Accessed 12/25/2021 at https://www.maths.ed.ac.uk/hall/HiGHS/#guide</span></div>
<div class="line"><span class="lineno">  293</span><span class="stringliteral">    .. [2] Huangfu, Q. and Hall, J. A. J. &quot;Parallelizing the dual revised</span></div>
<div class="line"><span class="lineno">  294</span><span class="stringliteral">           simplex method.&quot; Mathematical Programming Computation, 10 (1),</span></div>
<div class="line"><span class="lineno">  295</span><span class="stringliteral">           119-142, 2018. DOI: 10.1007/s12532-017-0130-5</span></div>
<div class="line"><span class="lineno">  296</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  297</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  298</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral">    Consider the problem at</span></div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral">    https://en.wikipedia.org/wiki/Integer_programming#Example, which is</span></div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">    expressed as a maximization problem of two variables. Since `milp` requires</span></div>
<div class="line"><span class="lineno">  302</span><span class="stringliteral">    that the problem be expressed as a minimization problem, the objective</span></div>
<div class="line"><span class="lineno">  303</span><span class="stringliteral">    function coefficients on the decision variables are:</span></div>
<div class="line"><span class="lineno">  304</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  305</span><span class="stringliteral">    &gt;&gt;&gt; c = -np.array([0, 1])</span></div>
<div class="line"><span class="lineno">  306</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  307</span><span class="stringliteral">    Note the negative sign: we maximize the original objective function</span></div>
<div class="line"><span class="lineno">  308</span><span class="stringliteral">    by minimizing the negative of the objective function.</span></div>
<div class="line"><span class="lineno">  309</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  310</span><span class="stringliteral">    We collect the coefficients of the constraints into arrays like:</span></div>
<div class="line"><span class="lineno">  311</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  312</span><span class="stringliteral">    &gt;&gt;&gt; A = np.array([[-1, 1], [3, 2], [2, 3]])</span></div>
<div class="line"><span class="lineno">  313</span><span class="stringliteral">    &gt;&gt;&gt; b_u = np.array([1, 12, 12])</span></div>
<div class="line"><span class="lineno">  314</span><span class="stringliteral">    &gt;&gt;&gt; b_l = np.full_like(b_u, -np.inf)</span></div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral">    Because there is no lower limit on these constraints, we have defined a</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">    variable ``b_l`` full of values representing negative infinity. This may</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">    be unfamiliar to users of `scipy.optimize.linprog`, which only accepts</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">    &quot;less than&quot; (or &quot;upper bound&quot;) inequality constraints of the form</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">    ``A_ub @ x &lt;= b_u``. By accepting both ``b_l`` and ``b_u`` of constraints</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">    ``b_l &lt;= A_ub @ x &lt;= b_u``, `milp` makes it easy to specify &quot;greater than&quot;</span></div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    inequality constraints, &quot;less than&quot; inequality constraints, and equality</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">    constraints concisely.</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">    These arrays are collected into a single `LinearConstraint` object like:</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">    &gt;&gt;&gt; from scipy.optimize import LinearConstraint</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">    &gt;&gt;&gt; constraints = LinearConstraint(A, b_l, b_u)</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral">    The non-negativity bounds on the decision variables are enforced by</span></div>
<div class="line"><span class="lineno">  331</span><span class="stringliteral">    default, so we do not need to provide an argument for `bounds`.</span></div>
<div class="line"><span class="lineno">  332</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  333</span><span class="stringliteral">    Finally, the problem states that both decision variables must be integers:</span></div>
<div class="line"><span class="lineno">  334</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  335</span><span class="stringliteral">    &gt;&gt;&gt; integrality = np.ones_like(c)</span></div>
<div class="line"><span class="lineno">  336</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  337</span><span class="stringliteral">    We solve the problem like:</span></div>
<div class="line"><span class="lineno">  338</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  339</span><span class="stringliteral">    &gt;&gt;&gt; from scipy.optimize import milp</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral">    &gt;&gt;&gt; res = milp(c=c, constraints=constraints, integrality=integrality)</span></div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral">    &gt;&gt;&gt; res.x</span></div>
<div class="line"><span class="lineno">  342</span><span class="stringliteral">    [1.0, 2.0]</span></div>
<div class="line"><span class="lineno">  343</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  344</span><span class="stringliteral">    Note that had we solved the relaxed problem (without integrality</span></div>
<div class="line"><span class="lineno">  345</span><span class="stringliteral">    constraints):</span></div>
<div class="line"><span class="lineno">  346</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  347</span><span class="stringliteral">    &gt;&gt;&gt; res = milp(c=c, constraints=constraints)  # OR:</span></div>
<div class="line"><span class="lineno">  348</span><span class="stringliteral">    &gt;&gt;&gt; # from scipy.optimize import linprog; res = linprog(c, A, b_u)</span></div>
<div class="line"><span class="lineno">  349</span><span class="stringliteral">    &gt;&gt;&gt; res.x</span></div>
<div class="line"><span class="lineno">  350</span><span class="stringliteral">    [1.8, 2.8]</span></div>
<div class="line"><span class="lineno">  351</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  352</span><span class="stringliteral">    we would not have obtained the correct solution by rounding to the nearest</span></div>
<div class="line"><span class="lineno">  353</span><span class="stringliteral">    integers.</span></div>
<div class="line"><span class="lineno">  354</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  356</span>    args_iv = _milp_iv(c, integrality, bounds, constraints, options)</div>
<div class="line"><span class="lineno">  357</span>    c, integrality, lb, ub, indptr, indices, data, b_l, b_u, options = args_iv</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    highs_res = _highs_wrapper(c, indptr, indices, data, b_l, b_u,</div>
<div class="line"><span class="lineno">  360</span>                               lb, ub, integrality, options)</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    res = {}</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    <span class="comment"># Convert to scipy-style status and message</span></div>
<div class="line"><span class="lineno">  365</span>    highs_status = highs_res.get(<span class="stringliteral">&#39;status&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  366</span>    highs_message = highs_res.get(<span class="stringliteral">&#39;message&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  367</span>    status, message = _highs_to_scipy_status_message(highs_status,</div>
<div class="line"><span class="lineno">  368</span>                                                     highs_message)</div>
<div class="line"><span class="lineno">  369</span>    res[<span class="stringliteral">&#39;status&#39;</span>] = status</div>
<div class="line"><span class="lineno">  370</span>    res[<span class="stringliteral">&#39;message&#39;</span>] = message</div>
<div class="line"><span class="lineno">  371</span>    res[<span class="stringliteral">&#39;success&#39;</span>] = (status == 0)</div>
<div class="line"><span class="lineno">  372</span>    x = highs_res.get(<span class="stringliteral">&#39;x&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  373</span>    res[<span class="stringliteral">&#39;x&#39;</span>] = np.array(x) <span class="keywordflow">if</span> x <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">else</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  374</span>    res[<span class="stringliteral">&#39;fun&#39;</span>] = highs_res.get(<span class="stringliteral">&#39;fun&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  375</span>    res[<span class="stringliteral">&#39;mip_node_count&#39;</span>] = highs_res.get(<span class="stringliteral">&#39;mip_node_count&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  376</span>    res[<span class="stringliteral">&#39;mip_dual_bound&#39;</span>] = highs_res.get(<span class="stringliteral">&#39;mip_dual_bound&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  377</span>    res[<span class="stringliteral">&#39;mip_gap&#39;</span>] = highs_res.get(<span class="stringliteral">&#39;mip_gap&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">return</span> OptimizeResult(res)</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
