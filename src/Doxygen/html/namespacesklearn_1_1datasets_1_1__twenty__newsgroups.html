<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.datasets._twenty_newsgroups Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1datasets.html">datasets</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html">_twenty_newsgroups</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sklearn.datasets._twenty_newsgroups Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adc14ff6581b87a1db1d08bd514721748" id="r_adc14ff6581b87a1db1d08bd514721748"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#adc14ff6581b87a1db1d08bd514721748">_download_20newsgroups</a> (target_dir, cache_path)</td></tr>
<tr class="separator:adc14ff6581b87a1db1d08bd514721748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2141f4043095fa01a3f74a138675ae6d" id="r_a2141f4043095fa01a3f74a138675ae6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a2141f4043095fa01a3f74a138675ae6d">strip_newsgroup_header</a> (text)</td></tr>
<tr class="separator:a2141f4043095fa01a3f74a138675ae6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cee450244f3a0e4d94052297295106f" id="r_a4cee450244f3a0e4d94052297295106f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a4cee450244f3a0e4d94052297295106f">strip_newsgroup_quoting</a> (text)</td></tr>
<tr class="separator:a4cee450244f3a0e4d94052297295106f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc8831d2783eff76f2ceb0ad4956503" id="r_adcc8831d2783eff76f2ceb0ad4956503"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#adcc8831d2783eff76f2ceb0ad4956503">strip_newsgroup_footer</a> (text)</td></tr>
<tr class="separator:adcc8831d2783eff76f2ceb0ad4956503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aadf7a62bef16f00087b0cdec3da212" id="r_a9aadf7a62bef16f00087b0cdec3da212"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a9aadf7a62bef16f00087b0cdec3da212">fetch_20newsgroups</a> (*data_home=None, subset=&quot;train&quot;, categories=None, shuffle=True, random_state=42, remove=(), download_if_missing=True, return_X_y=False)</td></tr>
<tr class="separator:a9aadf7a62bef16f00087b0cdec3da212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4d24e5a6155f28969a544a54de4fca" id="r_adf4d24e5a6155f28969a544a54de4fca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#adf4d24e5a6155f28969a544a54de4fca">fetch_20newsgroups_vectorized</a> (*subset=&quot;train&quot;, remove=(), data_home=None, download_if_missing=True, return_X_y=False, normalize=True, as_frame=False)</td></tr>
<tr class="separator:adf4d24e5a6155f28969a544a54de4fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0d245afa4956b60543c5a5287c11024e" id="r_a0d245afa4956b60543c5a5287c11024e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a0d245afa4956b60543c5a5287c11024e">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:a0d245afa4956b60543c5a5287c11024e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7736323a79822adfaca1328e28aa83a1" id="r_a7736323a79822adfaca1328e28aa83a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a7736323a79822adfaca1328e28aa83a1">ARCHIVE</a></td></tr>
<tr class="separator:a7736323a79822adfaca1328e28aa83a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed50ec90dcb2ef140465036fda93d49" id="r_a5ed50ec90dcb2ef140465036fda93d49"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a5ed50ec90dcb2ef140465036fda93d49">CACHE_NAME</a> = &quot;20news-bydate.pkz&quot;</td></tr>
<tr class="separator:a5ed50ec90dcb2ef140465036fda93d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba7077096243db7be2b4aff5f28f149" id="r_a6ba7077096243db7be2b4aff5f28f149"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a6ba7077096243db7be2b4aff5f28f149">TRAIN_FOLDER</a> = &quot;20news-bydate-train&quot;</td></tr>
<tr class="separator:a6ba7077096243db7be2b4aff5f28f149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc6cba6b12f982346c9b39bd1ac0504" id="r_a6cc6cba6b12f982346c9b39bd1ac0504"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a6cc6cba6b12f982346c9b39bd1ac0504">TEST_FOLDER</a> = &quot;20news-bydate-test&quot;</td></tr>
<tr class="separator:a6cc6cba6b12f982346c9b39bd1ac0504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4155f92dc921dbc4afe15d88cc409c8f" id="r_a4155f92dc921dbc4afe15d88cc409c8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1datasets_1_1__twenty__newsgroups.html#a4155f92dc921dbc4afe15d88cc409c8f">_QUOTE_RE</a></td></tr>
<tr class="separator:a4155f92dc921dbc4afe15d88cc409c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Caching loader for the 20 newsgroups text classification dataset.


The description of the dataset is available on the official website at:

    http://people.csail.mit.edu/jrennie/20Newsgroups/

Quoting the introduction:

    The 20 Newsgroups data set is a collection of approximately 20,000
    newsgroup documents, partitioned (nearly) evenly across 20 different
    newsgroups. To the best of my knowledge, it was originally collected
    by Ken Lang, probably for his Newsweeder: Learning to filter netnews
    paper, though he does not explicitly mention this collection. The 20
    newsgroups collection has become a popular data set for experiments
    in text applications of machine learning techniques, such as text
    classification and text clustering.

This dataset loader will download the recommended "by date" variant of the
dataset and which features a point in time split between the train and
test sets. The compressed dataset size is around 14 Mb compressed. Once
uncompressed the train set is 52 MB and the test set is 34 MB.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="adc14ff6581b87a1db1d08bd514721748" name="adc14ff6581b87a1db1d08bd514721748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc14ff6581b87a1db1d08bd514721748">&#9670;&#160;</a></span>_download_20newsgroups()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups._download_20newsgroups </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cache_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Download the 20 newsgroups data and stored it as a zipped pickle.</pre> <div class="fragment"><div class="line"><span class="lineno">   65</span><span class="keyword">def </span>_download_20newsgroups(target_dir, cache_path):</div>
<div class="line"><span class="lineno">   66</span>    <span class="stringliteral">&quot;&quot;&quot;Download the 20 newsgroups data and stored it as a zipped pickle.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   67</span>    train_path = os.path.join(target_dir, TRAIN_FOLDER)</div>
<div class="line"><span class="lineno">   68</span>    test_path = os.path.join(target_dir, TEST_FOLDER)</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.exists(target_dir):</div>
<div class="line"><span class="lineno">   71</span>        os.makedirs(target_dir)</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    logger.info(<span class="stringliteral">&quot;Downloading dataset from %s (14 MB)&quot;</span>, ARCHIVE.url)</div>
<div class="line"><span class="lineno">   74</span>    archive_path = _fetch_remote(ARCHIVE, dirname=target_dir)</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    logger.debug(<span class="stringliteral">&quot;Decompressing %s&quot;</span>, archive_path)</div>
<div class="line"><span class="lineno">   77</span>    tarfile.open(archive_path, <span class="stringliteral">&quot;r:gz&quot;</span>).extractall(path=target_dir)</div>
<div class="line"><span class="lineno">   78</span>    os.remove(archive_path)</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    <span class="comment"># Store a zipped pickle</span></div>
<div class="line"><span class="lineno">   81</span>    cache = dict(</div>
<div class="line"><span class="lineno">   82</span>        train=load_files(train_path, encoding=<span class="stringliteral">&quot;latin1&quot;</span>),</div>
<div class="line"><span class="lineno">   83</span>        test=load_files(test_path, encoding=<span class="stringliteral">&quot;latin1&quot;</span>),</div>
<div class="line"><span class="lineno">   84</span>    )</div>
<div class="line"><span class="lineno">   85</span>    compressed_content = codecs.encode(pickle.dumps(cache), <span class="stringliteral">&quot;zlib_codec&quot;</span>)</div>
<div class="line"><span class="lineno">   86</span>    <span class="keyword">with</span> open(cache_path, <span class="stringliteral">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</div>
<div class="line"><span class="lineno">   87</span>        f.write(compressed_content)</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    shutil.rmtree(target_dir)</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">return</span> cache</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9aadf7a62bef16f00087b0cdec3da212" name="a9aadf7a62bef16f00087b0cdec3da212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aadf7a62bef16f00087b0cdec3da212">&#9670;&#160;</a></span>fetch_20newsgroups()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups.fetch_20newsgroups </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>data_home</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subset</em> = <code>&quot;train&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>categories</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shuffle</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>random_state</em> = <code>42</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remove</em> = <code>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>download_if_missing</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>return_X_y</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Load the filenames and data from the 20 newsgroups dataset \
(classification).

Download it if necessary.

=================   ==========
Classes                     20
Samples total            18846
Dimensionality               1
Features                  text
=================   ==========

Read more in the :ref:`User Guide &lt;20newsgroups_dataset&gt;`.

Parameters
----------
data_home : str, default=None
    Specify a download and cache folder for the datasets. If None,
    all scikit-learn data is stored in '~/scikit_learn_data' subfolders.

subset : {'train', 'test', 'all'}, default='train'
    Select the dataset to load: 'train' for the training set, 'test'
    for the test set, 'all' for both, with shuffled ordering.

categories : array-like, dtype=str, default=None
    If None (default), load all the categories.
    If not None, list of category names to load (other categories
    ignored).

shuffle : bool, default=True
    Whether or not to shuffle the data: might be important for models that
    make the assumption that the samples are independent and identically
    distributed (i.i.d.), such as stochastic gradient descent.

random_state : int, RandomState instance or None, default=None
    Determines random number generation for dataset shuffling. Pass an int
    for reproducible output across multiple function calls.
    See :term:`Glossary &lt;random_state&gt;`.

remove : tuple, default=()
    May contain any subset of ('headers', 'footers', 'quotes'). Each of
    these are kinds of text that will be detected and removed from the
    newsgroup posts, preventing classifiers from overfitting on
    metadata.

    'headers' removes newsgroup headers, 'footers' removes blocks at the
    ends of posts that look like signatures, and 'quotes' removes lines
    that appear to be quoting another post.

    'headers' follows an exact standard; the other filters are not always
    correct.

download_if_missing : bool, default=True
    If False, raise an IOError if the data is not locally available
    instead of trying to download the data from the source site.

return_X_y : bool, default=False
    If True, returns `(data.data, data.target)` instead of a Bunch
    object.

    .. versionadded:: 0.22

Returns
-------
bunch : :class:`~sklearn.utils.Bunch`
    Dictionary-like object, with the following attributes.

    data : list of shape (n_samples,)
        The data list to learn.
    target: ndarray of shape (n_samples,)
        The target labels.
    filenames: list of shape (n_samples,)
        The path to the location of the data.
    DESCR: str
        The full description of the dataset.
    target_names: list of shape (n_classes,)
        The names of target classes.

(data, target) : tuple if `return_X_y=True`
    A tuple of two ndarrays. The first contains a 2D array of shape
    (n_samples, n_classes) with each row representing one sample and each
    column representing the features. The second array of shape
    (n_samples,) contains the target samples.

    .. versionadded:: 0.22
</pre> <div class="fragment"><div class="line"><span class="lineno">  162</span>):</div>
<div class="line"><span class="lineno">  163</span>    <span class="stringliteral">&quot;&quot;&quot;Load the filenames and data from the 20 newsgroups dataset \</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral">(classification).</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">    Download it if necessary.</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">    =================   ==========</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral">    Classes                     20</span></div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">    Samples total            18846</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">    Dimensionality               1</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">    Features                  text</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">    =================   ==========</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">    Read more in the :ref:`User Guide &lt;20newsgroups_dataset&gt;`.</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral">    data_home : str, default=None</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral">        Specify a download and cache folder for the datasets. If None,</span></div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">        all scikit-learn data is stored in &#39;~/scikit_learn_data&#39; subfolders.</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">    subset : {&#39;train&#39;, &#39;test&#39;, &#39;all&#39;}, default=&#39;train&#39;</span></div>
<div class="line"><span class="lineno">  184</span><span class="stringliteral">        Select the dataset to load: &#39;train&#39; for the training set, &#39;test&#39;</span></div>
<div class="line"><span class="lineno">  185</span><span class="stringliteral">        for the test set, &#39;all&#39; for both, with shuffled ordering.</span></div>
<div class="line"><span class="lineno">  186</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  187</span><span class="stringliteral">    categories : array-like, dtype=str, default=None</span></div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">        If None (default), load all the categories.</span></div>
<div class="line"><span class="lineno">  189</span><span class="stringliteral">        If not None, list of category names to load (other categories</span></div>
<div class="line"><span class="lineno">  190</span><span class="stringliteral">        ignored).</span></div>
<div class="line"><span class="lineno">  191</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  192</span><span class="stringliteral">    shuffle : bool, default=True</span></div>
<div class="line"><span class="lineno">  193</span><span class="stringliteral">        Whether or not to shuffle the data: might be important for models that</span></div>
<div class="line"><span class="lineno">  194</span><span class="stringliteral">        make the assumption that the samples are independent and identically</span></div>
<div class="line"><span class="lineno">  195</span><span class="stringliteral">        distributed (i.i.d.), such as stochastic gradient descent.</span></div>
<div class="line"><span class="lineno">  196</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral">    random_state : int, RandomState instance or None, default=None</span></div>
<div class="line"><span class="lineno">  198</span><span class="stringliteral">        Determines random number generation for dataset shuffling. Pass an int</span></div>
<div class="line"><span class="lineno">  199</span><span class="stringliteral">        for reproducible output across multiple function calls.</span></div>
<div class="line"><span class="lineno">  200</span><span class="stringliteral">        See :term:`Glossary &lt;random_state&gt;`.</span></div>
<div class="line"><span class="lineno">  201</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  202</span><span class="stringliteral">    remove : tuple, default=()</span></div>
<div class="line"><span class="lineno">  203</span><span class="stringliteral">        May contain any subset of (&#39;headers&#39;, &#39;footers&#39;, &#39;quotes&#39;). Each of</span></div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral">        these are kinds of text that will be detected and removed from the</span></div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">        newsgroup posts, preventing classifiers from overfitting on</span></div>
<div class="line"><span class="lineno">  206</span><span class="stringliteral">        metadata.</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">        &#39;headers&#39; removes newsgroup headers, &#39;footers&#39; removes blocks at the</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">        ends of posts that look like signatures, and &#39;quotes&#39; removes lines</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">        that appear to be quoting another post.</span></div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">        &#39;headers&#39; follows an exact standard; the other filters are not always</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">        correct.</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral">    download_if_missing : bool, default=True</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">        If False, raise an IOError if the data is not locally available</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">        instead of trying to download the data from the source site.</span></div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">    return_X_y : bool, default=False</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral">        If True, returns `(data.data, data.target)` instead of a Bunch</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">        object.</span></div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral">        .. versionadded:: 0.22</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  225</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  226</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  227</span><span class="stringliteral">    bunch : :class:`~sklearn.utils.Bunch`</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral">        Dictionary-like object, with the following attributes.</span></div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">        data : list of shape (n_samples,)</span></div>
<div class="line"><span class="lineno">  231</span><span class="stringliteral">            The data list to learn.</span></div>
<div class="line"><span class="lineno">  232</span><span class="stringliteral">        target: ndarray of shape (n_samples,)</span></div>
<div class="line"><span class="lineno">  233</span><span class="stringliteral">            The target labels.</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">        filenames: list of shape (n_samples,)</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">            The path to the location of the data.</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">        DESCR: str</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">            The full description of the dataset.</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">        target_names: list of shape (n_classes,)</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">            The names of target classes.</span></div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">    (data, target) : tuple if `return_X_y=True`</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">        A tuple of two ndarrays. The first contains a 2D array of shape</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">        (n_samples, n_classes) with each row representing one sample and each</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">        column representing the features. The second array of shape</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">        (n_samples,) contains the target samples.</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">        .. versionadded:: 0.22</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    data_home = get_data_home(data_home=data_home)</div>
<div class="line"><span class="lineno">  251</span>    cache_path = _pkl_filepath(data_home, CACHE_NAME)</div>
<div class="line"><span class="lineno">  252</span>    twenty_home = os.path.join(data_home, <span class="stringliteral">&quot;20news_home&quot;</span>)</div>
<div class="line"><span class="lineno">  253</span>    cache = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  254</span>    <span class="keywordflow">if</span> os.path.exists(cache_path):</div>
<div class="line"><span class="lineno">  255</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  256</span>            <span class="keyword">with</span> open(cache_path, <span class="stringliteral">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</div>
<div class="line"><span class="lineno">  257</span>                compressed_content = f.read()</div>
<div class="line"><span class="lineno">  258</span>            uncompressed_content = codecs.decode(compressed_content, <span class="stringliteral">&quot;zlib_codec&quot;</span>)</div>
<div class="line"><span class="lineno">  259</span>            cache = pickle.loads(uncompressed_content)</div>
<div class="line"><span class="lineno">  260</span>        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  261</span>            print(80 * <span class="stringliteral">&quot;_&quot;</span>)</div>
<div class="line"><span class="lineno">  262</span>            print(<span class="stringliteral">&quot;Cache loading failed&quot;</span>)</div>
<div class="line"><span class="lineno">  263</span>            print(80 * <span class="stringliteral">&quot;_&quot;</span>)</div>
<div class="line"><span class="lineno">  264</span>            print(e)</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">if</span> cache <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">if</span> download_if_missing:</div>
<div class="line"><span class="lineno">  268</span>            logger.info(<span class="stringliteral">&quot;Downloading 20news dataset. This may take a few minutes.&quot;</span>)</div>
<div class="line"><span class="lineno">  269</span>            cache = _download_20newsgroups(</div>
<div class="line"><span class="lineno">  270</span>                target_dir=twenty_home, cache_path=cache_path</div>
<div class="line"><span class="lineno">  271</span>            )</div>
<div class="line"><span class="lineno">  272</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  273</span>            <span class="keywordflow">raise</span> IOError(<span class="stringliteral">&quot;20Newsgroups dataset not found&quot;</span>)</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">if</span> subset <span class="keywordflow">in</span> (<span class="stringliteral">&quot;train&quot;</span>, <span class="stringliteral">&quot;test&quot;</span>):</div>
<div class="line"><span class="lineno">  276</span>        data = cache[subset]</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">elif</span> subset == <span class="stringliteral">&quot;all&quot;</span>:</div>
<div class="line"><span class="lineno">  278</span>        data_lst = list()</div>
<div class="line"><span class="lineno">  279</span>        target = list()</div>
<div class="line"><span class="lineno">  280</span>        filenames = list()</div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">for</span> subset <span class="keywordflow">in</span> (<span class="stringliteral">&quot;train&quot;</span>, <span class="stringliteral">&quot;test&quot;</span>):</div>
<div class="line"><span class="lineno">  282</span>            data = cache[subset]</div>
<div class="line"><span class="lineno">  283</span>            data_lst.extend(data.data)</div>
<div class="line"><span class="lineno">  284</span>            target.extend(data.target)</div>
<div class="line"><span class="lineno">  285</span>            filenames.extend(data.filenames)</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>        data.data = data_lst</div>
<div class="line"><span class="lineno">  288</span>        data.target = np.array(target)</div>
<div class="line"><span class="lineno">  289</span>        data.filenames = np.array(filenames)</div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  291</span>        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  292</span>            <span class="stringliteral">&quot;subset can only be &#39;train&#39;, &#39;test&#39; or &#39;all&#39;, got &#39;%s&#39;&quot;</span> % subset</div>
<div class="line"><span class="lineno">  293</span>        )</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>    fdescr = load_descr(<span class="stringliteral">&quot;twenty_newsgroups.rst&quot;</span>)</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    data.DESCR = fdescr</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;headers&quot;</span> <span class="keywordflow">in</span> remove:</div>
<div class="line"><span class="lineno">  300</span>        data.data = [strip_newsgroup_header(text) <span class="keywordflow">for</span> text <span class="keywordflow">in</span> data.data]</div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;footers&quot;</span> <span class="keywordflow">in</span> remove:</div>
<div class="line"><span class="lineno">  302</span>        data.data = [strip_newsgroup_footer(text) <span class="keywordflow">for</span> text <span class="keywordflow">in</span> data.data]</div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;quotes&quot;</span> <span class="keywordflow">in</span> remove:</div>
<div class="line"><span class="lineno">  304</span>        data.data = [strip_newsgroup_quoting(text) <span class="keywordflow">for</span> text <span class="keywordflow">in</span> data.data]</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>    <span class="keywordflow">if</span> categories <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  307</span>        labels = [(data.target_names.index(cat), cat) <span class="keywordflow">for</span> cat <span class="keywordflow">in</span> categories]</div>
<div class="line"><span class="lineno">  308</span>        <span class="comment"># Sort the categories to have the ordering of the labels</span></div>
<div class="line"><span class="lineno">  309</span>        labels.sort()</div>
<div class="line"><span class="lineno">  310</span>        labels, categories = zip(*labels)</div>
<div class="line"><span class="lineno">  311</span>        mask = np.in1d(data.target, labels)</div>
<div class="line"><span class="lineno">  312</span>        data.filenames = data.filenames[mask]</div>
<div class="line"><span class="lineno">  313</span>        data.target = data.target[mask]</div>
<div class="line"><span class="lineno">  314</span>        <span class="comment"># searchsorted to have continuous labels</span></div>
<div class="line"><span class="lineno">  315</span>        data.target = np.searchsorted(labels, data.target)</div>
<div class="line"><span class="lineno">  316</span>        data.target_names = list(categories)</div>
<div class="line"><span class="lineno">  317</span>        <span class="comment"># Use an object array to shuffle: avoids memory copy</span></div>
<div class="line"><span class="lineno">  318</span>        data_lst = np.array(data.data, dtype=object)</div>
<div class="line"><span class="lineno">  319</span>        data_lst = data_lst[mask]</div>
<div class="line"><span class="lineno">  320</span>        data.data = data_lst.tolist()</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">if</span> shuffle:</div>
<div class="line"><span class="lineno">  323</span>        random_state = check_random_state(random_state)</div>
<div class="line"><span class="lineno">  324</span>        indices = np.arange(data.target.shape[0])</div>
<div class="line"><span class="lineno">  325</span>        random_state.shuffle(indices)</div>
<div class="line"><span class="lineno">  326</span>        data.filenames = data.filenames[indices]</div>
<div class="line"><span class="lineno">  327</span>        data.target = data.target[indices]</div>
<div class="line"><span class="lineno">  328</span>        <span class="comment"># Use an object array to shuffle: avoids memory copy</span></div>
<div class="line"><span class="lineno">  329</span>        data_lst = np.array(data.data, dtype=object)</div>
<div class="line"><span class="lineno">  330</span>        data_lst = data_lst[indices]</div>
<div class="line"><span class="lineno">  331</span>        data.data = data_lst.tolist()</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">if</span> return_X_y:</div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordflow">return</span> data.data, data.target</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">return</span> data</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adf4d24e5a6155f28969a544a54de4fca" name="adf4d24e5a6155f28969a544a54de4fca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf4d24e5a6155f28969a544a54de4fca">&#9670;&#160;</a></span>fetch_20newsgroups_vectorized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups.fetch_20newsgroups_vectorized </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>subset</em> = <code>&quot;train&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remove</em> = <code>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data_home</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>download_if_missing</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>return_X_y</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_frame</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Load and vectorize the 20 newsgroups dataset (classification).

Download it if necessary.

This is a convenience function; the transformation is done using the
default settings for
:class:`~sklearn.feature_extraction.text.CountVectorizer`. For more
advanced usage (stopword filtering, n-gram extraction, etc.), combine
fetch_20newsgroups with a custom
:class:`~sklearn.feature_extraction.text.CountVectorizer`,
:class:`~sklearn.feature_extraction.text.HashingVectorizer`,
:class:`~sklearn.feature_extraction.text.TfidfTransformer` or
:class:`~sklearn.feature_extraction.text.TfidfVectorizer`.

The resulting counts are normalized using
:func:`sklearn.preprocessing.normalize` unless normalize is set to False.

=================   ==========
Classes                     20
Samples total            18846
Dimensionality          130107
Features                  real
=================   ==========

Read more in the :ref:`User Guide &lt;20newsgroups_dataset&gt;`.

Parameters
----------
subset : {'train', 'test', 'all'}, default='train'
    Select the dataset to load: 'train' for the training set, 'test'
    for the test set, 'all' for both, with shuffled ordering.

remove : tuple, default=()
    May contain any subset of ('headers', 'footers', 'quotes'). Each of
    these are kinds of text that will be detected and removed from the
    newsgroup posts, preventing classifiers from overfitting on
    metadata.

    'headers' removes newsgroup headers, 'footers' removes blocks at the
    ends of posts that look like signatures, and 'quotes' removes lines
    that appear to be quoting another post.

data_home : str, default=None
    Specify an download and cache folder for the datasets. If None,
    all scikit-learn data is stored in '~/scikit_learn_data' subfolders.

download_if_missing : bool, default=True
    If False, raise an IOError if the data is not locally available
    instead of trying to download the data from the source site.

return_X_y : bool, default=False
    If True, returns ``(data.data, data.target)`` instead of a Bunch
    object.

    .. versionadded:: 0.20

normalize : bool, default=True
    If True, normalizes each document's feature vector to unit norm using
    :func:`sklearn.preprocessing.normalize`.

    .. versionadded:: 0.22

as_frame : bool, default=False
    If True, the data is a pandas DataFrame including columns with
    appropriate dtypes (numeric, string, or categorical). The target is
    a pandas DataFrame or Series depending on the number of
    `target_columns`.

    .. versionadded:: 0.24

Returns
-------
bunch : :class:`~sklearn.utils.Bunch`
    Dictionary-like object, with the following attributes.

    data: {sparse matrix, dataframe} of shape (n_samples, n_features)
        The input data matrix. If ``as_frame`` is `True`, ``data`` is
        a pandas DataFrame with sparse columns.
    target: {ndarray, series} of shape (n_samples,)
        The target labels. If ``as_frame`` is `True`, ``target`` is a
        pandas Series.
    target_names: list of shape (n_classes,)
        The names of target classes.
    DESCR: str
        The full description of the dataset.
    frame: dataframe of shape (n_samples, n_features + 1)
        Only present when `as_frame=True`. Pandas DataFrame with ``data``
        and ``target``.

        .. versionadded:: 0.24

(data, target) : tuple if ``return_X_y`` is True
    `data` and `target` would be of the format defined in the `Bunch`
    description above.

    .. versionadded:: 0.20
</pre> <div class="fragment"><div class="line"><span class="lineno">  348</span>):</div>
<div class="line"><span class="lineno">  349</span>    <span class="stringliteral">&quot;&quot;&quot;Load and vectorize the 20 newsgroups dataset (classification).</span></div>
<div class="line"><span class="lineno">  350</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  351</span><span class="stringliteral">    Download it if necessary.</span></div>
<div class="line"><span class="lineno">  352</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  353</span><span class="stringliteral">    This is a convenience function; the transformation is done using the</span></div>
<div class="line"><span class="lineno">  354</span><span class="stringliteral">    default settings for</span></div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral">    :class:`~sklearn.feature_extraction.text.CountVectorizer`. For more</span></div>
<div class="line"><span class="lineno">  356</span><span class="stringliteral">    advanced usage (stopword filtering, n-gram extraction, etc.), combine</span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">    fetch_20newsgroups with a custom</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral">    :class:`~sklearn.feature_extraction.text.CountVectorizer`,</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">    :class:`~sklearn.feature_extraction.text.HashingVectorizer`,</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">    :class:`~sklearn.feature_extraction.text.TfidfTransformer` or</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">    :class:`~sklearn.feature_extraction.text.TfidfVectorizer`.</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">    The resulting counts are normalized using</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">    :func:`sklearn.preprocessing.normalize` unless normalize is set to False.</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">    =================   ==========</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">    Classes                     20</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">    Samples total            18846</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">    Dimensionality          130107</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">    Features                  real</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">    =================   ==========</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">    Read more in the :ref:`User Guide &lt;20newsgroups_dataset&gt;`.</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">    subset : {&#39;train&#39;, &#39;test&#39;, &#39;all&#39;}, default=&#39;train&#39;</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">        Select the dataset to load: &#39;train&#39; for the training set, &#39;test&#39;</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">        for the test set, &#39;all&#39; for both, with shuffled ordering.</span></div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  381</span><span class="stringliteral">    remove : tuple, default=()</span></div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral">        May contain any subset of (&#39;headers&#39;, &#39;footers&#39;, &#39;quotes&#39;). Each of</span></div>
<div class="line"><span class="lineno">  383</span><span class="stringliteral">        these are kinds of text that will be detected and removed from the</span></div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">        newsgroup posts, preventing classifiers from overfitting on</span></div>
<div class="line"><span class="lineno">  385</span><span class="stringliteral">        metadata.</span></div>
<div class="line"><span class="lineno">  386</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  387</span><span class="stringliteral">        &#39;headers&#39; removes newsgroup headers, &#39;footers&#39; removes blocks at the</span></div>
<div class="line"><span class="lineno">  388</span><span class="stringliteral">        ends of posts that look like signatures, and &#39;quotes&#39; removes lines</span></div>
<div class="line"><span class="lineno">  389</span><span class="stringliteral">        that appear to be quoting another post.</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral">    data_home : str, default=None</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">        Specify an download and cache folder for the datasets. If None,</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">        all scikit-learn data is stored in &#39;~/scikit_learn_data&#39; subfolders.</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">    download_if_missing : bool, default=True</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">        If False, raise an IOError if the data is not locally available</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">        instead of trying to download the data from the source site.</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">    return_X_y : bool, default=False</span></div>
<div class="line"><span class="lineno">  400</span><span class="stringliteral">        If True, returns ``(data.data, data.target)`` instead of a Bunch</span></div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral">        object.</span></div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">        .. versionadded:: 0.20</span></div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  405</span><span class="stringliteral">    normalize : bool, default=True</span></div>
<div class="line"><span class="lineno">  406</span><span class="stringliteral">        If True, normalizes each document&#39;s feature vector to unit norm using</span></div>
<div class="line"><span class="lineno">  407</span><span class="stringliteral">        :func:`sklearn.preprocessing.normalize`.</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">        .. versionadded:: 0.22</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">    as_frame : bool, default=False</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral">        If True, the data is a pandas DataFrame including columns with</span></div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral">        appropriate dtypes (numeric, string, or categorical). The target is</span></div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">        a pandas DataFrame or Series depending on the number of</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral">        `target_columns`.</span></div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  417</span><span class="stringliteral">        .. versionadded:: 0.24</span></div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  420</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral">    bunch : :class:`~sklearn.utils.Bunch`</span></div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral">        Dictionary-like object, with the following attributes.</span></div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">        data: {sparse matrix, dataframe} of shape (n_samples, n_features)</span></div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral">            The input data matrix. If ``as_frame`` is `True`, ``data`` is</span></div>
<div class="line"><span class="lineno">  426</span><span class="stringliteral">            a pandas DataFrame with sparse columns.</span></div>
<div class="line"><span class="lineno">  427</span><span class="stringliteral">        target: {ndarray, series} of shape (n_samples,)</span></div>
<div class="line"><span class="lineno">  428</span><span class="stringliteral">            The target labels. If ``as_frame`` is `True`, ``target`` is a</span></div>
<div class="line"><span class="lineno">  429</span><span class="stringliteral">            pandas Series.</span></div>
<div class="line"><span class="lineno">  430</span><span class="stringliteral">        target_names: list of shape (n_classes,)</span></div>
<div class="line"><span class="lineno">  431</span><span class="stringliteral">            The names of target classes.</span></div>
<div class="line"><span class="lineno">  432</span><span class="stringliteral">        DESCR: str</span></div>
<div class="line"><span class="lineno">  433</span><span class="stringliteral">            The full description of the dataset.</span></div>
<div class="line"><span class="lineno">  434</span><span class="stringliteral">        frame: dataframe of shape (n_samples, n_features + 1)</span></div>
<div class="line"><span class="lineno">  435</span><span class="stringliteral">            Only present when `as_frame=True`. Pandas DataFrame with ``data``</span></div>
<div class="line"><span class="lineno">  436</span><span class="stringliteral">            and ``target``.</span></div>
<div class="line"><span class="lineno">  437</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  438</span><span class="stringliteral">            .. versionadded:: 0.24</span></div>
<div class="line"><span class="lineno">  439</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  440</span><span class="stringliteral">    (data, target) : tuple if ``return_X_y`` is True</span></div>
<div class="line"><span class="lineno">  441</span><span class="stringliteral">        `data` and `target` would be of the format defined in the `Bunch`</span></div>
<div class="line"><span class="lineno">  442</span><span class="stringliteral">        description above.</span></div>
<div class="line"><span class="lineno">  443</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  444</span><span class="stringliteral">        .. versionadded:: 0.20</span></div>
<div class="line"><span class="lineno">  445</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  446</span>    data_home = get_data_home(data_home=data_home)</div>
<div class="line"><span class="lineno">  447</span>    filebase = <span class="stringliteral">&quot;20newsgroup_vectorized&quot;</span></div>
<div class="line"><span class="lineno">  448</span>    <span class="keywordflow">if</span> remove:</div>
<div class="line"><span class="lineno">  449</span>        filebase += <span class="stringliteral">&quot;remove-&quot;</span> + <span class="stringliteral">&quot;-&quot;</span>.join(remove)</div>
<div class="line"><span class="lineno">  450</span>    target_file = _pkl_filepath(data_home, filebase + <span class="stringliteral">&quot;.pkl&quot;</span>)</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    <span class="comment"># we shuffle but use a fixed seed for the memoization</span></div>
<div class="line"><span class="lineno">  453</span>    data_train = fetch_20newsgroups(</div>
<div class="line"><span class="lineno">  454</span>        data_home=data_home,</div>
<div class="line"><span class="lineno">  455</span>        subset=<span class="stringliteral">&quot;train&quot;</span>,</div>
<div class="line"><span class="lineno">  456</span>        categories=<span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  457</span>        shuffle=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  458</span>        random_state=12,</div>
<div class="line"><span class="lineno">  459</span>        remove=remove,</div>
<div class="line"><span class="lineno">  460</span>        download_if_missing=download_if_missing,</div>
<div class="line"><span class="lineno">  461</span>    )</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>    data_test = fetch_20newsgroups(</div>
<div class="line"><span class="lineno">  464</span>        data_home=data_home,</div>
<div class="line"><span class="lineno">  465</span>        subset=<span class="stringliteral">&quot;test&quot;</span>,</div>
<div class="line"><span class="lineno">  466</span>        categories=<span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno">  467</span>        shuffle=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  468</span>        random_state=12,</div>
<div class="line"><span class="lineno">  469</span>        remove=remove,</div>
<div class="line"><span class="lineno">  470</span>        download_if_missing=download_if_missing,</div>
<div class="line"><span class="lineno">  471</span>    )</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordflow">if</span> os.path.exists(target_file):</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  475</span>            X_train, X_test, feature_names = joblib.load(target_file)</div>
<div class="line"><span class="lineno">  476</span>        <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  477</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  478</span>                f<span class="stringliteral">&quot;The cached dataset located in {target_file} was fetched &quot;</span></div>
<div class="line"><span class="lineno">  479</span>                <span class="stringliteral">&quot;with an older scikit-learn version and it is not compatible &quot;</span></div>
<div class="line"><span class="lineno">  480</span>                <span class="stringliteral">&quot;with the scikit-learn version imported. You need to &quot;</span></div>
<div class="line"><span class="lineno">  481</span>                f<span class="stringliteral">&quot;manually delete the file: {target_file}.&quot;</span></div>
<div class="line"><span class="lineno">  482</span>            ) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  483</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  484</span>        vectorizer = CountVectorizer(dtype=np.int16)</div>
<div class="line"><span class="lineno">  485</span>        X_train = vectorizer.fit_transform(data_train.data).tocsr()</div>
<div class="line"><span class="lineno">  486</span>        X_test = vectorizer.transform(data_test.data).tocsr()</div>
<div class="line"><span class="lineno">  487</span>        feature_names = vectorizer.get_feature_names_out()</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>        joblib.dump((X_train, X_test, feature_names), target_file, compress=9)</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>    <span class="comment"># the data is stored as int16 for compactness</span></div>
<div class="line"><span class="lineno">  492</span>    <span class="comment"># but normalize needs floats</span></div>
<div class="line"><span class="lineno">  493</span>    <span class="keywordflow">if</span> normalize:</div>
<div class="line"><span class="lineno">  494</span>        X_train = X_train.astype(np.float64)</div>
<div class="line"><span class="lineno">  495</span>        X_test = X_test.astype(np.float64)</div>
<div class="line"><span class="lineno">  496</span>        preprocessing.normalize(X_train, copy=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  497</span>        preprocessing.normalize(X_test, copy=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>    target_names = data_train.target_names</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">if</span> subset == <span class="stringliteral">&quot;train&quot;</span>:</div>
<div class="line"><span class="lineno">  502</span>        data = X_train</div>
<div class="line"><span class="lineno">  503</span>        target = data_train.target</div>
<div class="line"><span class="lineno">  504</span>    <span class="keywordflow">elif</span> subset == <span class="stringliteral">&quot;test&quot;</span>:</div>
<div class="line"><span class="lineno">  505</span>        data = X_test</div>
<div class="line"><span class="lineno">  506</span>        target = data_test.target</div>
<div class="line"><span class="lineno">  507</span>    <span class="keywordflow">elif</span> subset == <span class="stringliteral">&quot;all&quot;</span>:</div>
<div class="line"><span class="lineno">  508</span>        data = sp.vstack((X_train, X_test)).tocsr()</div>
<div class="line"><span class="lineno">  509</span>        target = np.concatenate((data_train.target, data_test.target))</div>
<div class="line"><span class="lineno">  510</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  511</span>        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  512</span>            <span class="stringliteral">&quot;%r is not a valid subset: should be one of [&#39;train&#39;, &#39;test&#39;, &#39;all&#39;]&quot;</span></div>
<div class="line"><span class="lineno">  513</span>            % subset</div>
<div class="line"><span class="lineno">  514</span>        )</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>    fdescr = load_descr(<span class="stringliteral">&quot;twenty_newsgroups.rst&quot;</span>)</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>    frame = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  519</span>    target_name = [<span class="stringliteral">&quot;category_class&quot;</span>]</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">if</span> as_frame:</div>
<div class="line"><span class="lineno">  522</span>        frame, data, target = _convert_data_dataframe(</div>
<div class="line"><span class="lineno">  523</span>            <span class="stringliteral">&quot;fetch_20newsgroups_vectorized&quot;</span>,</div>
<div class="line"><span class="lineno">  524</span>            data,</div>
<div class="line"><span class="lineno">  525</span>            target,</div>
<div class="line"><span class="lineno">  526</span>            feature_names,</div>
<div class="line"><span class="lineno">  527</span>            target_names=target_name,</div>
<div class="line"><span class="lineno">  528</span>            sparse_data=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  529</span>        )</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>    <span class="keywordflow">if</span> return_X_y:</div>
<div class="line"><span class="lineno">  532</span>        <span class="keywordflow">return</span> data, target</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>    <span class="keywordflow">return</span> Bunch(</div>
<div class="line"><span class="lineno">  535</span>        data=data,</div>
<div class="line"><span class="lineno">  536</span>        target=target,</div>
<div class="line"><span class="lineno">  537</span>        frame=frame,</div>
<div class="line"><span class="lineno">  538</span>        target_names=target_names,</div>
<div class="line"><span class="lineno">  539</span>        feature_names=feature_names,</div>
<div class="line"><span class="lineno">  540</span>        DESCR=fdescr,</div>
<div class="line"><span class="lineno">  541</span>    )</div>
</div><!-- fragment -->
</div>
</div>
<a id="adcc8831d2783eff76f2ceb0ad4956503" name="adcc8831d2783eff76f2ceb0ad4956503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc8831d2783eff76f2ceb0ad4956503">&#9670;&#160;</a></span>strip_newsgroup_footer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups.strip_newsgroup_footer </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given text in "news" format, attempt to remove a signature block.

As a rough heuristic, we assume that signatures are set apart by either
a blank line or a line made of hyphens, and that it is the last such line
in the file (disregarding blank lines at the end).

Parameters
----------
text : str
    The text from which to remove the signature block.
</pre> <div class="fragment"><div class="line"><span class="lineno">  127</span><span class="keyword">def </span>strip_newsgroup_footer(text):</div>
<div class="line"><span class="lineno">  128</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">    Given text in &quot;news&quot; format, attempt to remove a signature block.</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">    As a rough heuristic, we assume that signatures are set apart by either</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">    a blank line or a line made of hyphens, and that it is the last such line</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">    in the file (disregarding blank lines at the end).</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">    text : str</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">        The text from which to remove the signature block.</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  140</span>    lines = text.strip().split(<span class="stringliteral">&quot;\n&quot;</span>)</div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">for</span> line_num <span class="keywordflow">in</span> range(len(lines) - 1, -1, -1):</div>
<div class="line"><span class="lineno">  142</span>        line = lines[line_num]</div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">if</span> line.strip().strip(<span class="stringliteral">&quot;-&quot;</span>) == <span class="stringliteral">&quot;&quot;</span>:</div>
<div class="line"><span class="lineno">  144</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>    <span class="keywordflow">if</span> line_num &gt; 0:</div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">return</span> <span class="stringliteral">&quot;\n&quot;</span>.join(lines[:line_num])</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  149</span>        <span class="keywordflow">return</span> text</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2141f4043095fa01a3f74a138675ae6d" name="a2141f4043095fa01a3f74a138675ae6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2141f4043095fa01a3f74a138675ae6d">&#9670;&#160;</a></span>strip_newsgroup_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups.strip_newsgroup_header </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given text in "news" format, strip the headers, by removing everything
before the first blank line.

Parameters
----------
text : str
    The text from which to remove the signature block.
</pre> <div class="fragment"><div class="line"><span class="lineno">   93</span><span class="keyword">def </span>strip_newsgroup_header(text):</div>
<div class="line"><span class="lineno">   94</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">    Given text in &quot;news&quot; format, strip the headers, by removing everything</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral">    before the first blank line.</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">    text : str</span></div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral">        The text from which to remove the signature block.</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  103</span>    _before, _blankline, after = text.partition(<span class="stringliteral">&quot;\n\n&quot;</span>)</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">return</span> after</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cee450244f3a0e4d94052297295106f" name="a4cee450244f3a0e4d94052297295106f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cee450244f3a0e4d94052297295106f">&#9670;&#160;</a></span>strip_newsgroup_quoting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups.strip_newsgroup_quoting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given text in "news" format, strip lines beginning with the quote
characters &gt; or |, plus lines that often introduce a quoted section
(for example, because they contain the string 'writes:'.)

Parameters
----------
text : str
    The text from which to remove the signature block.
</pre> <div class="fragment"><div class="line"><span class="lineno">  112</span><span class="keyword">def </span>strip_newsgroup_quoting(text):</div>
<div class="line"><span class="lineno">  113</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">    Given text in &quot;news&quot; format, strip lines beginning with the quote</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">    characters &gt; or |, plus lines that often introduce a quoted section</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">    (for example, because they contain the string &#39;writes:&#39;.)</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">    text : str</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">        The text from which to remove the signature block.</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  123</span>    good_lines = [line <span class="keywordflow">for</span> line <span class="keywordflow">in</span> text.split(<span class="stringliteral">&quot;\n&quot;</span>) <span class="keywordflow">if</span> <span class="keywordflow">not</span> _QUOTE_RE.search(line)]</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;\n&quot;</span>.join(good_lines)</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4155f92dc921dbc4afe15d88cc409c8f" name="a4155f92dc921dbc4afe15d88cc409c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4155f92dc921dbc4afe15d88cc409c8f">&#9670;&#160;</a></span>_QUOTE_RE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups._QUOTE_RE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  re.compile(</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">r&quot;(writes in|writes:|wrote:|says:|said:&quot;</span> <span class="stringliteral">r&quot;|^In article|^Quoted from|^\||^&gt;)&quot;</span></div>
<div class="line"><span class="lineno">    3</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7736323a79822adfaca1328e28aa83a1" name="a7736323a79822adfaca1328e28aa83a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7736323a79822adfaca1328e28aa83a1">&#9670;&#160;</a></span>ARCHIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups.ARCHIVE</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  RemoteFileMetadata(</div>
<div class="line"><span class="lineno">    2</span>    filename=<span class="stringliteral">&quot;20news-bydate.tar.gz&quot;</span>,</div>
<div class="line"><span class="lineno">    3</span>    url=<span class="stringliteral">&quot;https://ndownloader.figshare.com/files/5975967&quot;</span>,</div>
<div class="line"><span class="lineno">    4</span>    checksum=<span class="stringliteral">&quot;8f1b2514ca22a5ade8fbb9cfa5727df95fa587f4c87b786e15c759fa66d95610&quot;</span>,</div>
<div class="line"><span class="lineno">    5</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ed50ec90dcb2ef140465036fda93d49" name="a5ed50ec90dcb2ef140465036fda93d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ed50ec90dcb2ef140465036fda93d49">&#9670;&#160;</a></span>CACHE_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str sklearn.datasets._twenty_newsgroups.CACHE_NAME = &quot;20news-bydate.pkz&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0d245afa4956b60543c5a5287c11024e" name="a0d245afa4956b60543c5a5287c11024e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d245afa4956b60543c5a5287c11024e">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.datasets._twenty_newsgroups.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6cc6cba6b12f982346c9b39bd1ac0504" name="a6cc6cba6b12f982346c9b39bd1ac0504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc6cba6b12f982346c9b39bd1ac0504">&#9670;&#160;</a></span>TEST_FOLDER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str sklearn.datasets._twenty_newsgroups.TEST_FOLDER = &quot;20news-bydate-test&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6ba7077096243db7be2b4aff5f28f149" name="a6ba7077096243db7be2b4aff5f28f149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba7077096243db7be2b4aff5f28f149">&#9670;&#160;</a></span>TRAIN_FOLDER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str sklearn.datasets._twenty_newsgroups.TRAIN_FOLDER = &quot;20news-bydate-train&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
