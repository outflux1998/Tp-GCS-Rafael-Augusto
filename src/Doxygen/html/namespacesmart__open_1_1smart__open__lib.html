<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: smart_open.smart_open_lib Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesmart__open.html">smart_open</a></li><li class="navelem"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html">smart_open_lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">smart_open.smart_open_lib Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmart__open_1_1smart__open__lib_1_1patch__pathlib.html">patch_pathlib</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a03bdfc7b131cbbfeca2f6eab2a8bc3f7" id="r_a03bdfc7b131cbbfeca2f6eab2a8bc3f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a03bdfc7b131cbbfeca2f6eab2a8bc3f7">_sniff_scheme</a> (uri_as_string)</td></tr>
<tr class="separator:a03bdfc7b131cbbfeca2f6eab2a8bc3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f99e2cd6da3f7a4aaca1b33233c86d1" id="r_a5f99e2cd6da3f7a4aaca1b33233c86d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a5f99e2cd6da3f7a4aaca1b33233c86d1">parse_uri</a> (uri_as_string)</td></tr>
<tr class="separator:a5f99e2cd6da3f7a4aaca1b33233c86d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe9ba3ce9b7f4510b9b519dd6afca35f" id="r_afe9ba3ce9b7f4510b9b519dd6afca35f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#afe9ba3ce9b7f4510b9b519dd6afca35f">open</a> (uri, mode='<a class="el" href="__lapack__subroutines_8h.html#a952912404e837594f7cbfb183beeacd4">r</a>', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None, compression=so_compression.INFER_FROM_EXTENSION, transport_params=None)</td></tr>
<tr class="separator:afe9ba3ce9b7f4510b9b519dd6afca35f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a0a1aeac6ab90ddab0b8d7576c1559" id="r_a78a0a1aeac6ab90ddab0b8d7576c1559"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a78a0a1aeac6ab90ddab0b8d7576c1559">_get_binary_mode</a> (mode_str)</td></tr>
<tr class="separator:a78a0a1aeac6ab90ddab0b8d7576c1559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b534f5c75a23595481e6735d07e4f8" id="r_a56b534f5c75a23595481e6735d07e4f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a56b534f5c75a23595481e6735d07e4f8">_shortcut_open</a> (uri, mode, compression, buffering=-1, encoding=None, errors=None, newline=None)</td></tr>
<tr class="separator:a56b534f5c75a23595481e6735d07e4f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5764252cf6ca80057f2f91aec56e903e" id="r_a5764252cf6ca80057f2f91aec56e903e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a5764252cf6ca80057f2f91aec56e903e">_open_binary_stream</a> (uri, mode, transport_params)</td></tr>
<tr class="separator:a5764252cf6ca80057f2f91aec56e903e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e503b9712a9e87fd0ea6b9e2cc0d8e" id="r_ab6e503b9712a9e87fd0ea6b9e2cc0d8e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#ab6e503b9712a9e87fd0ea6b9e2cc0d8e">_encoding_wrapper</a> (fileobj, mode, encoding=None, errors=None, newline=None)</td></tr>
<tr class="separator:ab6e503b9712a9e87fd0ea6b9e2cc0d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee73ea330534458cb8563775eed94a82" id="r_aee73ea330534458cb8563775eed94a82"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#aee73ea330534458cb8563775eed94a82">_patch_pathlib</a> (<a class="el" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>)</td></tr>
<tr class="separator:aee73ea330534458cb8563775eed94a82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51cc64abd23fb293f623a50b9a6e6503" id="r_a51cc64abd23fb293f623a50b9a6e6503"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a51cc64abd23fb293f623a50b9a6e6503">smart_open</a> (uri, mode='rb', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None, ignore_extension=False, **kwargs)</td></tr>
<tr class="separator:a51cc64abd23fb293f623a50b9a6e6503"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4011d98d0eca1db958a50b22da71ce68" id="r_a4011d98d0eca1db958a50b22da71ce68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a4011d98d0eca1db958a50b22da71ce68">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:a4011d98d0eca1db958a50b22da71ce68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3417b5bc6c3e9e01f5607847028a939" id="r_ae3417b5bc6c3e9e01f5607847028a939"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#ae3417b5bc6c3e9e01f5607847028a939">DEFAULT_ENCODING</a> = locale.getpreferredencoding(do_setlocale=False)</td></tr>
<tr class="separator:ae3417b5bc6c3e9e01f5607847028a939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b95406c2dbd6da5de5e55f5f1aef205" id="r_a9b95406c2dbd6da5de5e55f5f1aef205"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a9b95406c2dbd6da5de5e55f5f1aef205">_parse_uri</a> = <a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a5f99e2cd6da3f7a4aaca1b33233c86d1">parse_uri</a></td></tr>
<tr class="separator:a9b95406c2dbd6da5de5e55f5f1aef205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ac1200bf2c2b015a5e7a068f01327e2" id="r_a5ac1200bf2c2b015a5e7a068f01327e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a5ac1200bf2c2b015a5e7a068f01327e2">_builtin_open</a> = <a class="el" href="namespacesmart__open_1_1smart__open__lib.html#afe9ba3ce9b7f4510b9b519dd6afca35f">open</a></td></tr>
<tr class="separator:a5ac1200bf2c2b015a5e7a068f01327e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Implements the majority of smart_open's top-level API.

The main functions are:

  * ``parse_uri()``
  * ``open()``</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="ab6e503b9712a9e87fd0ea6b9e2cc0d8e" name="ab6e503b9712a9e87fd0ea6b9e2cc0d8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6e503b9712a9e87fd0ea6b9e2cc0d8e">&#9670;&#160;</a></span>_encoding_wrapper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._encoding_wrapper </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fileobj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoding</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>errors</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>newline</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Decode bytes into text, if necessary.

If mode specifies binary access, does nothing, unless the encoding is
specified.  A non-null encoding implies text mode.

:arg fileobj: must quack like a filehandle object.
:arg str mode: is the mode which was originally requested by the user.
:arg str encoding: The text encoding to use.  If mode is binary, overrides mode.
:arg str errors: The method to use when handling encoding/decoding errors.
:returns: a file object
</pre> <div class="fragment"><div class="line"><span class="lineno">  407</span><span class="keyword">def </span>_encoding_wrapper(fileobj, mode, encoding=None, errors=None, newline=None):</div>
<div class="line"><span class="lineno">  408</span>    <span class="stringliteral">&quot;&quot;&quot;Decode bytes into text, if necessary.</span></div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral">    If mode specifies binary access, does nothing, unless the encoding is</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">    specified.  A non-null encoding implies text mode.</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral">    :arg fileobj: must quack like a filehandle object.</span></div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">    :arg str mode: is the mode which was originally requested by the user.</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral">    :arg str encoding: The text encoding to use.  If mode is binary, overrides mode.</span></div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral">    :arg str errors: The method to use when handling encoding/decoding errors.</span></div>
<div class="line"><span class="lineno">  417</span><span class="stringliteral">    :returns: a file object</span></div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  419</span>    logger.debug(<span class="stringliteral">&#39;encoding_wrapper: %r&#39;</span>, locals())</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  422</span>    <span class="comment"># If the mode is binary, but the user specified an encoding, assume they</span></div>
<div class="line"><span class="lineno">  423</span>    <span class="comment"># want text.  If we don&#39;t make this assumption, ignore the encoding and</span></div>
<div class="line"><span class="lineno">  424</span>    <span class="comment"># return bytes, smart_open behavior will diverge from the built-in open:</span></div>
<div class="line"><span class="lineno">  425</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  426</span>    <span class="comment">#   open(filename, encoding=&#39;utf-8&#39;) returns a text stream in Py3</span></div>
<div class="line"><span class="lineno">  427</span>    <span class="comment">#   smart_open(filename, encoding=&#39;utf-8&#39;) would return a byte stream</span></div>
<div class="line"><span class="lineno">  428</span>    <span class="comment">#       without our assumption, because the default mode is rb.</span></div>
<div class="line"><span class="lineno">  429</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  430</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;b&#39;</span> <span class="keywordflow">in</span> mode <span class="keywordflow">and</span> encoding <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">return</span> fileobj</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">if</span> encoding <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  434</span>        encoding = DEFAULT_ENCODING</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>    fileobj = io.TextIOWrapper(</div>
<div class="line"><span class="lineno">  437</span>        fileobj,</div>
<div class="line"><span class="lineno">  438</span>        encoding=encoding,</div>
<div class="line"><span class="lineno">  439</span>        errors=errors,</div>
<div class="line"><span class="lineno">  440</span>        newline=newline,</div>
<div class="line"><span class="lineno">  441</span>        write_through=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  442</span>    )</div>
<div class="line"><span class="lineno">  443</span>    <span class="keywordflow">return</span> fileobj</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a78a0a1aeac6ab90ddab0b8d7576c1559" name="a78a0a1aeac6ab90ddab0b8d7576c1559"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a0a1aeac6ab90ddab0b8d7576c1559">&#9670;&#160;</a></span>_get_binary_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._get_binary_mode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode_str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  254</span><span class="keyword">def </span>_get_binary_mode(mode_str):</div>
<div class="line"><span class="lineno">  255</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  256</span>    <span class="comment"># https://docs.python.org/3/library/functions.html#open</span></div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  258</span>    <span class="comment"># The order of characters in the mode parameter appears to be unspecified.</span></div>
<div class="line"><span class="lineno">  259</span>    <span class="comment"># The implementation follows the examples, just to be safe.</span></div>
<div class="line"><span class="lineno">  260</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  261</span>    mode = list(mode_str)</div>
<div class="line"><span class="lineno">  262</span>    binmode = []</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;t&#39;</span> <span class="keywordflow">in</span> mode <span class="keywordflow">and</span> <span class="stringliteral">&#39;b&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;can&#39;t have text and binary mode at once&quot;</span>)</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    counts = [mode.count(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> <span class="stringliteral">&#39;rwa&#39;</span>]</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordflow">if</span> sum(counts) &gt; 1:</div>
<div class="line"><span class="lineno">  269</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;must have exactly one of create/read/write/append mode&quot;</span>)</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <span class="keyword">def </span>transfer(char):</div>
<div class="line"><span class="lineno">  272</span>        binmode.append(mode.pop(mode.index(char)))</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;a&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  275</span>        transfer(<span class="stringliteral">&#39;a&#39;</span>)</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;w&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  277</span>        transfer(<span class="stringliteral">&#39;w&#39;</span>)</div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;r&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  279</span>        transfer(<span class="stringliteral">&#39;r&#39;</span>)</div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  282</span>            <span class="stringliteral">&quot;Must have exactly one of create/read/write/append &quot;</span></div>
<div class="line"><span class="lineno">  283</span>            <span class="stringliteral">&quot;mode and at most one plus&quot;</span></div>
<div class="line"><span class="lineno">  284</span>        )</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;b&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  287</span>        transfer(<span class="stringliteral">&#39;b&#39;</span>)</div>
<div class="line"><span class="lineno">  288</span>    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;t&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  289</span>        mode.pop(mode.index(<span class="stringliteral">&#39;t&#39;</span>))</div>
<div class="line"><span class="lineno">  290</span>        binmode.append(<span class="stringliteral">&#39;b&#39;</span>)</div>
<div class="line"><span class="lineno">  291</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  292</span>        binmode.append(<span class="stringliteral">&#39;b&#39;</span>)</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;+&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  295</span>        transfer(<span class="stringliteral">&#39;+&#39;</span>)</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  298</span>    <span class="comment"># There shouldn&#39;t be anything left in the mode list at this stage.</span></div>
<div class="line"><span class="lineno">  299</span>    <span class="comment"># If there is, then either we&#39;ve missed something and the implementation</span></div>
<div class="line"><span class="lineno">  300</span>    <span class="comment"># of this function is broken, or the original input mode is invalid.</span></div>
<div class="line"><span class="lineno">  301</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">if</span> mode:</div>
<div class="line"><span class="lineno">  303</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;invalid mode: %r&#39;</span> % mode_str)</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>    <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>.join(binmode)</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5764252cf6ca80057f2f91aec56e903e" name="a5764252cf6ca80057f2f91aec56e903e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5764252cf6ca80057f2f91aec56e903e">&#9670;&#160;</a></span>_open_binary_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._open_binary_stream </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transport_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Open an arbitrary URI in the specified binary mode.

Not all modes are supported for all protocols.

:arg uri: The URI to open.  May be a string, or something else.
:arg str mode: The mode to open with.  Must be rb, wb or ab.
:arg transport_params: Keyword argumens for the transport layer.
:returns: A named file object
:rtype: file-like object with a .name attribute
</pre> <div class="fragment"><div class="line"><span class="lineno">  366</span><span class="keyword">def </span>_open_binary_stream(uri, mode, transport_params):</div>
<div class="line"><span class="lineno">  367</span>    <span class="stringliteral">&quot;&quot;&quot;Open an arbitrary URI in the specified binary mode.</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">    Not all modes are supported for all protocols.</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">    :arg uri: The URI to open.  May be a string, or something else.</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral">    :arg str mode: The mode to open with.  Must be rb, wb or ab.</span></div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">    :arg transport_params: Keyword argumens for the transport layer.</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">    :returns: A named file object</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">    :rtype: file-like object with a .name attribute</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  377</span>    <span class="keywordflow">if</span> mode <span class="keywordflow">not</span> <span class="keywordflow">in</span> (<span class="stringliteral">&#39;rb&#39;</span>, <span class="stringliteral">&#39;rb+&#39;</span>, <span class="stringliteral">&#39;wb&#39;</span>, <span class="stringliteral">&#39;wb+&#39;</span>, <span class="stringliteral">&#39;ab&#39;</span>, <span class="stringliteral">&#39;ab+&#39;</span>):</div>
<div class="line"><span class="lineno">  378</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  379</span>        <span class="comment"># This should really be a ValueError, but for the sake of compatibility</span></div>
<div class="line"><span class="lineno">  380</span>        <span class="comment"># with older versions, which raise NotImplementedError, we do the same.</span></div>
<div class="line"><span class="lineno">  381</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  382</span>        <span class="keywordflow">raise</span> NotImplementedError(<span class="stringliteral">&#39;unsupported mode: %r&#39;</span> % mode)</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>    <span class="keywordflow">if</span> isinstance(uri, int):</div>
<div class="line"><span class="lineno">  385</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  386</span>        <span class="comment"># We&#39;re working with a file descriptor.  If we open it, its name is</span></div>
<div class="line"><span class="lineno">  387</span>        <span class="comment"># just the integer value, which isn&#39;t helpful.  Unfortunately, there&#39;s</span></div>
<div class="line"><span class="lineno">  388</span>        <span class="comment"># no easy cross-platform way to go from a file descriptor to the filename,</span></div>
<div class="line"><span class="lineno">  389</span>        <span class="comment"># so we just give up here.  The user will have to handle their own</span></div>
<div class="line"><span class="lineno">  390</span>        <span class="comment"># compression, etc. explicitly.</span></div>
<div class="line"><span class="lineno">  391</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  392</span>        fobj = _builtin_open(uri, mode, closefd=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  393</span>        <span class="keywordflow">return</span> fobj</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(uri, str):</div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&quot;don&#39;t know how to handle uri %s&quot;</span> % repr(uri))</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>    scheme = _sniff_scheme(uri)</div>
<div class="line"><span class="lineno">  399</span>    submodule = transport.get_transport(scheme)</div>
<div class="line"><span class="lineno">  400</span>    fobj = submodule.open_uri(uri, mode, transport_params)</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(fobj, <span class="stringliteral">&#39;name&#39;</span>):</div>
<div class="line"><span class="lineno">  402</span>        fobj.name = uri</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">return</span> fobj</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aee73ea330534458cb8563775eed94a82" name="aee73ea330534458cb8563775eed94a82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee73ea330534458cb8563775eed94a82">&#9670;&#160;</a></span>_patch_pathlib()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._patch_pathlib </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Replace `Path.open` with `func`</pre> <div class="fragment"><div class="line"><span class="lineno">  459</span><span class="keyword">def </span>_patch_pathlib(func):</div>
<div class="line"><span class="lineno">  460</span>    <span class="stringliteral">&quot;&quot;&quot;Replace `Path.open` with `func`&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  461</span>    old_impl = pathlib.Path.open</div>
<div class="line"><span class="lineno">  462</span>    pathlib.Path.open = func</div>
<div class="line"><span class="lineno">  463</span>    <span class="keywordflow">return</span> old_impl</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a56b534f5c75a23595481e6735d07e4f8" name="a56b534f5c75a23595481e6735d07e4f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b534f5c75a23595481e6735d07e4f8">&#9670;&#160;</a></span>_shortcut_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._shortcut_open </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>compression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>buffering</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoding</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>errors</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>newline</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Try to open the URI using the standard library io.open function.

This can be much faster than the alternative of opening in binary mode and
then decoding.

This is only possible under the following conditions:

    1. Opening a local file; and
    2. Compression is disabled

If it is not possible to use the built-in open for the specified URI, returns None.

:param str uri: A string indicating what to open.
:param str mode: The mode to pass to the open function.
:param str compression: The compression type selected.
:returns: The opened file
:rtype: file
</pre> <div class="fragment"><div class="line"><span class="lineno">  316</span>        ):</div>
<div class="line"><span class="lineno">  317</span>    <span class="stringliteral">&quot;&quot;&quot;Try to open the URI using the standard library io.open function.</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">    This can be much faster than the alternative of opening in binary mode and</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">    then decoding.</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    This is only possible under the following conditions:</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral">        1. Opening a local file; and</span></div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">        2. Compression is disabled</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">    If it is not possible to use the built-in open for the specified URI, returns None.</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">    :param str uri: A string indicating what to open.</span></div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral">    :param str mode: The mode to pass to the open function.</span></div>
<div class="line"><span class="lineno">  331</span><span class="stringliteral">    :param str compression: The compression type selected.</span></div>
<div class="line"><span class="lineno">  332</span><span class="stringliteral">    :returns: The opened file</span></div>
<div class="line"><span class="lineno">  333</span><span class="stringliteral">    :rtype: file</span></div>
<div class="line"><span class="lineno">  334</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(uri, str):</div>
<div class="line"><span class="lineno">  336</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    scheme = _sniff_scheme(uri)</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">if</span> scheme <span class="keywordflow">not</span> <span class="keywordflow">in</span> (transport.NO_SCHEME, so_file.SCHEME):</div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    local_path = so_file.extract_local_path(uri)</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">if</span> compression == so_compression.INFER_FROM_EXTENSION:</div>
<div class="line"><span class="lineno">  344</span>        _, extension = P.splitext(local_path)</div>
<div class="line"><span class="lineno">  345</span>        <span class="keywordflow">if</span> extension <span class="keywordflow">in</span> so_compression.get_supported_extensions():</div>
<div class="line"><span class="lineno">  346</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  347</span>    <span class="keywordflow">elif</span> compression != so_compression.NO_COMPRESSION:</div>
<div class="line"><span class="lineno">  348</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    open_kwargs = {}</div>
<div class="line"><span class="lineno">  351</span>    <span class="keywordflow">if</span> encoding <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  352</span>        open_kwargs[<span class="stringliteral">&#39;encoding&#39;</span>] = encoding</div>
<div class="line"><span class="lineno">  353</span>        mode = mode.replace(<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">if</span> newline <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  355</span>        open_kwargs[<span class="stringliteral">&#39;newline&#39;</span>] = newline</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  358</span>    <span class="comment"># binary mode of the builtin/stdlib open function doesn&#39;t take an errors argument</span></div>
<div class="line"><span class="lineno">  359</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">if</span> errors <span class="keywordflow">and</span> <span class="stringliteral">&#39;b&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  361</span>        open_kwargs[<span class="stringliteral">&#39;errors&#39;</span>] = errors</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">return</span> _builtin_open(local_path, mode, buffering=buffering, **open_kwargs)</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a03bdfc7b131cbbfeca2f6eab2a8bc3f7" name="a03bdfc7b131cbbfeca2f6eab2a8bc3f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03bdfc7b131cbbfeca2f6eab2a8bc3f7">&#9670;&#160;</a></span>_sniff_scheme()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._sniff_scheme </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri_as_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns the scheme of the URL only, as a string.</pre> <div class="fragment"><div class="line"><span class="lineno">   50</span><span class="keyword">def </span>_sniff_scheme(uri_as_string):</div>
<div class="line"><span class="lineno">   51</span>    <span class="stringliteral">&quot;&quot;&quot;Returns the scheme of the URL only, as a string.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   52</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   53</span>    <span class="comment"># urlsplit doesn&#39;t work on Windows -- it parses the drive as the scheme...</span></div>
<div class="line"><span class="lineno">   54</span>    <span class="comment"># no protocol given =&gt; assume a local file</span></div>
<div class="line"><span class="lineno">   55</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">if</span> os.name == <span class="stringliteral">&#39;nt&#39;</span> <span class="keywordflow">and</span> <span class="stringliteral">&#39;://&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> uri_as_string:</div>
<div class="line"><span class="lineno">   57</span>        uri_as_string = <span class="stringliteral">&#39;file://&#39;</span> + uri_as_string</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">return</span> urllib.parse.urlsplit(uri_as_string).scheme</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afe9ba3ce9b7f4510b9b519dd6afca35f" name="afe9ba3ce9b7f4510b9b519dd6afca35f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe9ba3ce9b7f4510b9b519dd6afca35f">&#9670;&#160;</a></span>open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib.open </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em> = <code>'<a class="el" href="__lapack__subroutines_8h.html#a952912404e837594f7cbfb183beeacd4">r</a>'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>buffering</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoding</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>errors</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>newline</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>closefd</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opener</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>compression</em> = <code>so_compression.INFER_FROM_EXTENSION</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transport_params</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Open the URI object, returning a file-like object.

The URI is usually a string in a variety of formats.
For a full list of examples, see the :func:`parse_uri` function.

The URI may also be one of:

- an instance of the pathlib.Path class
- a stream (anything that implements io.IOBase-like functionality)

Parameters
----------
uri: str or object
    The object to open.
mode: str, optional
    Mimicks built-in open parameter of the same name.
buffering: int, optional
    Mimicks built-in open parameter of the same name.
encoding: str, optional
    Mimicks built-in open parameter of the same name.
errors: str, optional
    Mimicks built-in open parameter of the same name.
newline: str, optional
    Mimicks built-in open parameter of the same name.
closefd: boolean, optional
    Mimicks built-in open parameter of the same name.  Ignored.
opener: object, optional
    Mimicks built-in open parameter of the same name.  Ignored.
compression: str, optional (see smart_open.compression.get_supported_compression_types)
    Explicitly specify the compression/decompression behavior.
transport_params: dict, optional
    Additional parameters for the transport layer (see notes below).

Returns
-------
A file-like object.

Notes
-----
smart_open has several implementations for its transport layer (e.g. S3, HTTP).
Each transport layer has a different set of keyword arguments for overriding
default behavior.  If you specify a keyword argument that is *not* supported
by the transport layer being used, smart_open will ignore that argument and
log a warning message.

smart_open/doctools.py magic goes here

See Also
--------
- `Standard library reference &lt;https://docs.python.org/3.7/library/functions.html#open&gt;`__
- `smart_open README.rst
  &lt;https://github.com/RaRe-Technologies/smart_open/blob/master/README.rst&gt;`__</pre> <div class="fragment"><div class="line"><span class="lineno">  111</span>        ):</div>
<div class="line"><span class="lineno">  112</span>    <span class="stringliteral">r&quot;&quot;&quot;Open the URI object, returning a file-like object.</span></div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">    The URI is usually a string in a variety of formats.</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">    For a full list of examples, see the :func:`parse_uri` function.</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">    The URI may also be one of:</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">    - an instance of the pathlib.Path class</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">    - a stream (anything that implements io.IOBase-like functionality)</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral">    uri: str or object</span></div>
<div class="line"><span class="lineno">  125</span><span class="stringliteral">        The object to open.</span></div>
<div class="line"><span class="lineno">  126</span><span class="stringliteral">    mode: str, optional</span></div>
<div class="line"><span class="lineno">  127</span><span class="stringliteral">        Mimicks built-in open parameter of the same name.</span></div>
<div class="line"><span class="lineno">  128</span><span class="stringliteral">    buffering: int, optional</span></div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">        Mimicks built-in open parameter of the same name.</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral">    encoding: str, optional</span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">        Mimicks built-in open parameter of the same name.</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">    errors: str, optional</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">        Mimicks built-in open parameter of the same name.</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">    newline: str, optional</span></div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">        Mimicks built-in open parameter of the same name.</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">    closefd: boolean, optional</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">        Mimicks built-in open parameter of the same name.  Ignored.</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">    opener: object, optional</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">        Mimicks built-in open parameter of the same name.  Ignored.</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">    compression: str, optional (see smart_open.compression.get_supported_compression_types)</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">        Explicitly specify the compression/decompression behavior.</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral">    transport_params: dict, optional</span></div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">        Additional parameters for the transport layer (see notes below).</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral">    A file-like object.</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">    smart_open has several implementations for its transport layer (e.g. S3, HTTP).</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">    Each transport layer has a different set of keyword arguments for overriding</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral">    default behavior.  If you specify a keyword argument that is *not* supported</span></div>
<div class="line"><span class="lineno">  154</span><span class="stringliteral">    by the transport layer being used, smart_open will ignore that argument and</span></div>
<div class="line"><span class="lineno">  155</span><span class="stringliteral">    log a warning message.</span></div>
<div class="line"><span class="lineno">  156</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  157</span><span class="stringliteral">    smart_open/doctools.py magic goes here</span></div>
<div class="line"><span class="lineno">  158</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  159</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral">    - `Standard library reference &lt;https://docs.python.org/3.7/library/functions.html#open&gt;`__</span></div>
<div class="line"><span class="lineno">  162</span><span class="stringliteral">    - `smart_open README.rst</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">      &lt;https://github.com/RaRe-Technologies/smart_open/blob/master/README.rst&gt;`__</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  166</span>    logger.debug(<span class="stringliteral">&#39;%r&#39;</span>, locals())</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(mode, str):</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&#39;mode should be a string&#39;</span>)</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">if</span> compression <span class="keywordflow">not</span> <span class="keywordflow">in</span> so_compression.get_supported_compression_types():</div>
<div class="line"><span class="lineno">  172</span>        <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&#39;invalid compression type: {compression}&#39;</span>)</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordflow">if</span> transport_params <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  175</span>        transport_params = {}</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    fobj = _shortcut_open(</div>
<div class="line"><span class="lineno">  178</span>        uri,</div>
<div class="line"><span class="lineno">  179</span>        mode,</div>
<div class="line"><span class="lineno">  180</span>        compression=compression,</div>
<div class="line"><span class="lineno">  181</span>        buffering=buffering,</div>
<div class="line"><span class="lineno">  182</span>        encoding=encoding,</div>
<div class="line"><span class="lineno">  183</span>        errors=errors,</div>
<div class="line"><span class="lineno">  184</span>        newline=newline,</div>
<div class="line"><span class="lineno">  185</span>    )</div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">if</span> fobj <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">return</span> fobj</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  190</span>    <span class="comment"># This is a work-around for the problem described in Issue #144.</span></div>
<div class="line"><span class="lineno">  191</span>    <span class="comment"># If the user has explicitly specified an encoding, then assume they want</span></div>
<div class="line"><span class="lineno">  192</span>    <span class="comment"># us to open the destination in text mode, instead of the default binary.</span></div>
<div class="line"><span class="lineno">  193</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  194</span>    <span class="comment"># If we change the default mode to be text, and match the normal behavior</span></div>
<div class="line"><span class="lineno">  195</span>    <span class="comment"># of Py2 and 3, then the above assumption will be unnecessary.</span></div>
<div class="line"><span class="lineno">  196</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">if</span> encoding <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <span class="stringliteral">&#39;b&#39;</span> <span class="keywordflow">in</span> mode:</div>
<div class="line"><span class="lineno">  198</span>        mode = mode.replace(<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">if</span> isinstance(uri, pathlib.Path):</div>
<div class="line"><span class="lineno">  201</span>        uri = str(uri)</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    explicit_encoding = encoding</div>
<div class="line"><span class="lineno">  204</span>    encoding = explicit_encoding <span class="keywordflow">if</span> explicit_encoding <span class="keywordflow">else</span> DEFAULT_ENCODING</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  207</span>    <span class="comment"># This is how we get from the filename to the end result.  Decompression is</span></div>
<div class="line"><span class="lineno">  208</span>    <span class="comment"># optional, but it always accepts bytes and returns bytes.</span></div>
<div class="line"><span class="lineno">  209</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  210</span>    <span class="comment"># Decoding is also optional, accepts bytes and returns text.  The diagram</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="comment"># below is for reading, for writing, the flow is from right to left, but</span></div>
<div class="line"><span class="lineno">  212</span>    <span class="comment"># the code is identical.</span></div>
<div class="line"><span class="lineno">  213</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  214</span>    <span class="comment">#           open as binary         decompress?          decode?</span></div>
<div class="line"><span class="lineno">  215</span>    <span class="comment"># filename ---------------&gt; bytes -------------&gt; bytes ---------&gt; text</span></div>
<div class="line"><span class="lineno">  216</span>    <span class="comment">#                          binary             decompressed       decode</span></div>
<div class="line"><span class="lineno">  217</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  220</span>        binary_mode = _get_binary_mode(mode)</div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> ve:</div>
<div class="line"><span class="lineno">  222</span>        <span class="keywordflow">raise</span> NotImplementedError(ve.args[0])</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    binary = _open_binary_stream(uri, binary_mode, transport_params)</div>
<div class="line"><span class="lineno">  225</span>    decompressed = so_compression.compression_wrapper(binary, binary_mode, compression)</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;b&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> mode <span class="keywordflow">or</span> explicit_encoding <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  228</span>        decoded = _encoding_wrapper(</div>
<div class="line"><span class="lineno">  229</span>            decompressed,</div>
<div class="line"><span class="lineno">  230</span>            mode,</div>
<div class="line"><span class="lineno">  231</span>            encoding=encoding,</div>
<div class="line"><span class="lineno">  232</span>            errors=errors,</div>
<div class="line"><span class="lineno">  233</span>            newline=newline,</div>
<div class="line"><span class="lineno">  234</span>        )</div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  236</span>        decoded = decompressed</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  239</span>    <span class="comment"># There are some useful methods in the binary readers, e.g. to_boto3, that get</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="comment"># hidden by the multiple layers of wrapping we just performed.  Promote</span></div>
<div class="line"><span class="lineno">  241</span>    <span class="comment"># them so they are visible to the user.</span></div>
<div class="line"><span class="lineno">  242</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">if</span> decoded != binary:</div>
<div class="line"><span class="lineno">  244</span>        promoted_attrs = [<span class="stringliteral">&#39;to_boto3&#39;</span>]</div>
<div class="line"><span class="lineno">  245</span>        <span class="keywordflow">for</span> attr <span class="keywordflow">in</span> promoted_attrs:</div>
<div class="line"><span class="lineno">  246</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  247</span>                setattr(decoded, attr, getattr(binary, attr))</div>
<div class="line"><span class="lineno">  248</span>            <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><span class="lineno">  249</span>                <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">return</span> decoded</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f99e2cd6da3f7a4aaca1b33233c86d1" name="a5f99e2cd6da3f7a4aaca1b33233c86d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f99e2cd6da3f7a4aaca1b33233c86d1">&#9670;&#160;</a></span>parse_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib.parse_uri </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri_as_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse the given URI from a string.

Parameters
----------
uri_as_string: str
    The URI to parse.

Returns
-------
collections.namedtuple
    The parsed URI.

Notes
-----
smart_open/doctools.py magic goes here
</pre> <div class="fragment"><div class="line"><span class="lineno">   62</span><span class="keyword">def </span>parse_uri(uri_as_string):</div>
<div class="line"><span class="lineno">   63</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">    Parse the given URI from a string.</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   66</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    uri_as_string: str</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">        The URI to parse.</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral">    collections.namedtuple</span></div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral">        The parsed URI.</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    smart_open/doctools.py magic goes here</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   80</span>    scheme = _sniff_scheme(uri_as_string)</div>
<div class="line"><span class="lineno">   81</span>    submodule = transport.get_transport(scheme)</div>
<div class="line"><span class="lineno">   82</span>    as_dict = submodule.parse_uri(uri_as_string)</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   85</span>    <span class="comment"># The conversion to a namedtuple is just to keep the old tests happy while</span></div>
<div class="line"><span class="lineno">   86</span>    <span class="comment"># I&#39;m still refactoring.</span></div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   88</span>    Uri = collections.namedtuple(<span class="stringliteral">&#39;Uri&#39;</span>, sorted(as_dict.keys()))</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> Uri(**as_dict)</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span><span class="comment">#</span></div>
<div class="line"><span class="lineno">   93</span><span class="comment"># To keep old unit tests happy while I&#39;m refactoring.</span></div>
<div class="line"><span class="lineno">   94</span><span class="comment">#</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51cc64abd23fb293f623a50b9a6e6503" name="a51cc64abd23fb293f623a50b9a6e6503"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51cc64abd23fb293f623a50b9a6e6503">&#9670;&#160;</a></span>smart_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib.smart_open </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em> = <code>'rb'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>buffering</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoding</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>errors</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>newline</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>closefd</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opener</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ignore_extension</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  477</span>    ):</div>
<div class="line"><span class="lineno">  478</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  479</span>    <span class="comment"># This is a thin wrapper of smart_open.open.  It&#39;s here for backward</span></div>
<div class="line"><span class="lineno">  480</span>    <span class="comment"># compatibility.  It works exactly like smart_open.open when the passed</span></div>
<div class="line"><span class="lineno">  481</span>    <span class="comment"># parameters are identical.  Otherwise, it raises a DeprecationWarning.</span></div>
<div class="line"><span class="lineno">  482</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  483</span>    <span class="comment"># For completeness, the main differences of the old smart_open function:</span></div>
<div class="line"><span class="lineno">  484</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  485</span>    <span class="comment"># 1. Default mode was read binary (mode=&#39;rb&#39;)</span></div>
<div class="line"><span class="lineno">  486</span>    <span class="comment"># 2. compression parameter was called ignore_extension</span></div>
<div class="line"><span class="lineno">  487</span>    <span class="comment"># 3. Transport parameters were passed directly as kwargs</span></div>
<div class="line"><span class="lineno">  488</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  489</span>    url = <span class="stringliteral">&#39;https://github.com/RaRe-Technologies/smart_open/blob/develop/MIGRATING_FROM_OLDER_VERSIONS.rst&#39;</span></div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">if</span> kwargs:</div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">raise</span> DeprecationWarning(</div>
<div class="line"><span class="lineno">  492</span>            <span class="stringliteral">&#39;The following keyword parameters are not supported: %r. &#39;</span></div>
<div class="line"><span class="lineno">  493</span>            <span class="stringliteral">&#39;See  %s for more information.&#39;</span> % (sorted(kwargs), url)</div>
<div class="line"><span class="lineno">  494</span>        )</div>
<div class="line"><span class="lineno">  495</span>    message = <span class="stringliteral">&#39;This function is deprecated.  See %s for more information&#39;</span> % url</div>
<div class="line"><span class="lineno">  496</span>    warnings.warn(message, category=DeprecationWarning)</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>    <span class="keywordflow">if</span> ignore_extension:</div>
<div class="line"><span class="lineno">  499</span>        compression = so_compression.NO_COMPRESSION</div>
<div class="line"><span class="lineno">  500</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  501</span>        compression = so_compression.INFER_FROM_EXTENSION</div>
<div class="line"><span class="lineno">  502</span>    del kwargs, url, message, ignore_extension</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">return</span> open(**locals())</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span><span class="comment">#</span></div>
<div class="line"><span class="lineno">  507</span><span class="comment"># Prevent failures with doctools from messing up the entire library.  We don&#39;t</span></div>
<div class="line"><span class="lineno">  508</span><span class="comment"># expect such failures, but contributed modules (e.g. new transport mechanisms)</span></div>
<div class="line"><span class="lineno">  509</span><span class="comment"># may not be as polished.</span></div>
<div class="line"><span class="lineno">  510</span><span class="comment">#</span></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5ac1200bf2c2b015a5e7a068f01327e2" name="a5ac1200bf2c2b015a5e7a068f01327e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ac1200bf2c2b015a5e7a068f01327e2">&#9670;&#160;</a></span>_builtin_open</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._builtin_open = <a class="el" href="namespacesmart__open_1_1smart__open__lib.html#afe9ba3ce9b7f4510b9b519dd6afca35f">open</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9b95406c2dbd6da5de5e55f5f1aef205" name="a9b95406c2dbd6da5de5e55f5f1aef205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b95406c2dbd6da5de5e55f5f1aef205">&#9670;&#160;</a></span>_parse_uri</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib._parse_uri = <a class="el" href="namespacesmart__open_1_1smart__open__lib.html#a5f99e2cd6da3f7a4aaca1b33233c86d1">parse_uri</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae3417b5bc6c3e9e01f5607847028a939" name="ae3417b5bc6c3e9e01f5607847028a939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3417b5bc6c3e9e01f5607847028a939">&#9670;&#160;</a></span>DEFAULT_ENCODING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib.DEFAULT_ENCODING = locale.getpreferredencoding(do_setlocale=False)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4011d98d0eca1db958a50b22da71ce68" name="a4011d98d0eca1db958a50b22da71ce68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4011d98d0eca1db958a50b22da71ce68">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">smart_open.smart_open_lib.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
