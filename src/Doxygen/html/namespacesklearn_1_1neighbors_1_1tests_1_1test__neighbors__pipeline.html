<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.neighbors.tests.test_neighbors_pipeline Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1neighbors.html">neighbors</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html">test_neighbors_pipeline</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sklearn.neighbors.tests.test_neighbors_pipeline Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b9da1eab7e4c25798c2e81375df17ee" id="r_a6b9da1eab7e4c25798c2e81375df17ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#a6b9da1eab7e4c25798c2e81375df17ee">test_spectral_clustering</a> ()</td></tr>
<tr class="separator:a6b9da1eab7e4c25798c2e81375df17ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d93140456b62215ee7a9faa3cb05ea" id="r_a43d93140456b62215ee7a9faa3cb05ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#a43d93140456b62215ee7a9faa3cb05ea">test_spectral_embedding</a> ()</td></tr>
<tr class="separator:a43d93140456b62215ee7a9faa3cb05ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25252ead4d8097da7b8307525576b11b" id="r_a25252ead4d8097da7b8307525576b11b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#a25252ead4d8097da7b8307525576b11b">test_dbscan</a> ()</td></tr>
<tr class="separator:a25252ead4d8097da7b8307525576b11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b58a464cadf64203335ce0a8a93f45b" id="r_a8b58a464cadf64203335ce0a8a93f45b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#a8b58a464cadf64203335ce0a8a93f45b">test_isomap</a> ()</td></tr>
<tr class="separator:a8b58a464cadf64203335ce0a8a93f45b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa056b2c5e796b60c378ad3c7a3edd0d2" id="r_aa056b2c5e796b60c378ad3c7a3edd0d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#aa056b2c5e796b60c378ad3c7a3edd0d2">test_tsne</a> ()</td></tr>
<tr class="separator:aa056b2c5e796b60c378ad3c7a3edd0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dadca4cf7c1273246c9574f3842ccff" id="r_a8dadca4cf7c1273246c9574f3842ccff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#a8dadca4cf7c1273246c9574f3842ccff">test_lof_novelty_false</a> ()</td></tr>
<tr class="separator:a8dadca4cf7c1273246c9574f3842ccff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ee709c99211b0f8e9926bb1fdbefe1" id="r_a32ee709c99211b0f8e9926bb1fdbefe1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#a32ee709c99211b0f8e9926bb1fdbefe1">test_lof_novelty_true</a> ()</td></tr>
<tr class="separator:a32ee709c99211b0f8e9926bb1fdbefe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a400a7bb54c7e1b365ed32a5726ec61f4" id="r_a400a7bb54c7e1b365ed32a5726ec61f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1neighbors_1_1tests_1_1test__neighbors__pipeline.html#a400a7bb54c7e1b365ed32a5726ec61f4">test_kneighbors_regressor</a> ()</td></tr>
<tr class="separator:a400a7bb54c7e1b365ed32a5726ec61f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This is testing the equivalence between some estimators with internal nearest
neighbors computations, and the corresponding pipeline versions with
KNeighborsTransformer or RadiusNeighborsTransformer to precompute the
neighbors.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a25252ead4d8097da7b8307525576b11b" name="a25252ead4d8097da7b8307525576b11b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25252ead4d8097da7b8307525576b11b">&#9670;&#160;</a></span>test_dbscan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_dbscan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   80</span><span class="keyword">def </span>test_dbscan():</div>
<div class="line"><span class="lineno">   81</span>    <span class="comment"># Test chaining RadiusNeighborsTransformer and DBSCAN</span></div>
<div class="line"><span class="lineno">   82</span>    radius = 0.3</div>
<div class="line"><span class="lineno">   83</span>    n_clusters = 3</div>
<div class="line"><span class="lineno">   84</span>    X = generate_clustered_data(n_clusters=n_clusters)</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">   87</span>    est_chain = make_pipeline(</div>
<div class="line"><span class="lineno">   88</span>        RadiusNeighborsTransformer(radius=radius, mode=<span class="stringliteral">&quot;distance&quot;</span>),</div>
<div class="line"><span class="lineno">   89</span>        DBSCAN(metric=<span class="stringliteral">&quot;precomputed&quot;</span>, eps=radius),</div>
<div class="line"><span class="lineno">   90</span>    )</div>
<div class="line"><span class="lineno">   91</span>    est_compact = DBSCAN(eps=radius)</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    labels_chain = est_chain.fit_predict(X)</div>
<div class="line"><span class="lineno">   94</span>    labels_compact = est_compact.fit_predict(X)</div>
<div class="line"><span class="lineno">   95</span>    assert_array_almost_equal(labels_chain, labels_compact)</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b58a464cadf64203335ce0a8a93f45b" name="a8b58a464cadf64203335ce0a8a93f45b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b58a464cadf64203335ce0a8a93f45b">&#9670;&#160;</a></span>test_isomap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_isomap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   98</span><span class="keyword">def </span>test_isomap():</div>
<div class="line"><span class="lineno">   99</span>    <span class="comment"># Test chaining KNeighborsTransformer and Isomap with</span></div>
<div class="line"><span class="lineno">  100</span>    <span class="comment"># neighbors_algorithm=&#39;precomputed&#39;</span></div>
<div class="line"><span class="lineno">  101</span>    algorithm = <span class="stringliteral">&quot;auto&quot;</span></div>
<div class="line"><span class="lineno">  102</span>    n_neighbors = 10</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>    X, _ = make_blobs(random_state=0)</div>
<div class="line"><span class="lineno">  105</span>    X2, _ = make_blobs(random_state=1)</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">  108</span>    est_chain = make_pipeline(</div>
<div class="line"><span class="lineno">  109</span>        KNeighborsTransformer(</div>
<div class="line"><span class="lineno">  110</span>            n_neighbors=n_neighbors, algorithm=algorithm, mode=<span class="stringliteral">&quot;distance&quot;</span></div>
<div class="line"><span class="lineno">  111</span>        ),</div>
<div class="line"><span class="lineno">  112</span>        Isomap(n_neighbors=n_neighbors, metric=<span class="stringliteral">&quot;precomputed&quot;</span>),</div>
<div class="line"><span class="lineno">  113</span>    )</div>
<div class="line"><span class="lineno">  114</span>    est_compact = Isomap(n_neighbors=n_neighbors, neighbors_algorithm=algorithm)</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    Xt_chain = est_chain.fit_transform(X)</div>
<div class="line"><span class="lineno">  117</span>    Xt_compact = est_compact.fit_transform(X)</div>
<div class="line"><span class="lineno">  118</span>    assert_array_almost_equal(Xt_chain, Xt_compact)</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    Xt_chain = est_chain.transform(X2)</div>
<div class="line"><span class="lineno">  121</span>    Xt_compact = est_compact.transform(X2)</div>
<div class="line"><span class="lineno">  122</span>    assert_array_almost_equal(Xt_chain, Xt_compact)</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a400a7bb54c7e1b365ed32a5726ec61f4" name="a400a7bb54c7e1b365ed32a5726ec61f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a400a7bb54c7e1b365ed32a5726ec61f4">&#9670;&#160;</a></span>test_kneighbors_regressor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_kneighbors_regressor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  217</span><span class="keyword">def </span>test_kneighbors_regressor():</div>
<div class="line"><span class="lineno">  218</span>    <span class="comment"># Test chaining KNeighborsTransformer and classifiers/regressors</span></div>
<div class="line"><span class="lineno">  219</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  220</span>    X = 2 * rng.rand(40, 5) - 1</div>
<div class="line"><span class="lineno">  221</span>    X2 = 2 * rng.rand(40, 5) - 1</div>
<div class="line"><span class="lineno">  222</span>    y = rng.rand(40, 1)</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    n_neighbors = 12</div>
<div class="line"><span class="lineno">  225</span>    radius = 1.5</div>
<div class="line"><span class="lineno">  226</span>    <span class="comment"># We precompute more neighbors than necessary, to have equivalence between</span></div>
<div class="line"><span class="lineno">  227</span>    <span class="comment"># k-neighbors estimator after radius-neighbors transformer, and vice-versa.</span></div>
<div class="line"><span class="lineno">  228</span>    factor = 2</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>    k_trans = KNeighborsTransformer(n_neighbors=n_neighbors, mode=<span class="stringliteral">&quot;distance&quot;</span>)</div>
<div class="line"><span class="lineno">  231</span>    k_trans_factor = KNeighborsTransformer(</div>
<div class="line"><span class="lineno">  232</span>        n_neighbors=int(n_neighbors * factor), mode=<span class="stringliteral">&quot;distance&quot;</span></div>
<div class="line"><span class="lineno">  233</span>    )</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    r_trans = RadiusNeighborsTransformer(radius=radius, mode=<span class="stringliteral">&quot;distance&quot;</span>)</div>
<div class="line"><span class="lineno">  236</span>    r_trans_factor = RadiusNeighborsTransformer(</div>
<div class="line"><span class="lineno">  237</span>        radius=int(radius * factor), mode=<span class="stringliteral">&quot;distance&quot;</span></div>
<div class="line"><span class="lineno">  238</span>    )</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    k_reg = KNeighborsRegressor(n_neighbors=n_neighbors)</div>
<div class="line"><span class="lineno">  241</span>    r_reg = RadiusNeighborsRegressor(radius=radius)</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    test_list = [</div>
<div class="line"><span class="lineno">  244</span>        (k_trans, k_reg),</div>
<div class="line"><span class="lineno">  245</span>        (k_trans_factor, r_reg),</div>
<div class="line"><span class="lineno">  246</span>        (r_trans, r_reg),</div>
<div class="line"><span class="lineno">  247</span>        (r_trans_factor, k_reg),</div>
<div class="line"><span class="lineno">  248</span>    ]</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordflow">for</span> trans, reg <span class="keywordflow">in</span> test_list:</div>
<div class="line"><span class="lineno">  251</span>        <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">  252</span>        reg_compact = clone(reg)</div>
<div class="line"><span class="lineno">  253</span>        reg_precomp = clone(reg)</div>
<div class="line"><span class="lineno">  254</span>        reg_precomp.set_params(metric=<span class="stringliteral">&quot;precomputed&quot;</span>)</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>        reg_chain = make_pipeline(clone(trans), reg_precomp)</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>        y_pred_chain = reg_chain.fit(X, y).predict(X2)</div>
<div class="line"><span class="lineno">  259</span>        y_pred_compact = reg_compact.fit(X, y).predict(X2)</div>
<div class="line"><span class="lineno">  260</span>        assert_array_almost_equal(y_pred_chain, y_pred_compact)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8dadca4cf7c1273246c9574f3842ccff" name="a8dadca4cf7c1273246c9574f3842ccff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dadca4cf7c1273246c9574f3842ccff">&#9670;&#160;</a></span>test_lof_novelty_false()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_lof_novelty_false </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  164</span><span class="keyword">def </span>test_lof_novelty_false():</div>
<div class="line"><span class="lineno">  165</span>    <span class="comment"># Test chaining KNeighborsTransformer and LocalOutlierFactor</span></div>
<div class="line"><span class="lineno">  166</span>    n_neighbors = 4</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  169</span>    X = rng.randn(40, 2)</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">  172</span>    est_chain = make_pipeline(</div>
<div class="line"><span class="lineno">  173</span>        KNeighborsTransformer(n_neighbors=n_neighbors, mode=<span class="stringliteral">&quot;distance&quot;</span>),</div>
<div class="line"><span class="lineno">  174</span>        LocalOutlierFactor(</div>
<div class="line"><span class="lineno">  175</span>            metric=<span class="stringliteral">&quot;precomputed&quot;</span>,</div>
<div class="line"><span class="lineno">  176</span>            n_neighbors=n_neighbors,</div>
<div class="line"><span class="lineno">  177</span>            novelty=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  178</span>            contamination=<span class="stringliteral">&quot;auto&quot;</span>,</div>
<div class="line"><span class="lineno">  179</span>        ),</div>
<div class="line"><span class="lineno">  180</span>    )</div>
<div class="line"><span class="lineno">  181</span>    est_compact = LocalOutlierFactor(</div>
<div class="line"><span class="lineno">  182</span>        n_neighbors=n_neighbors, novelty=<span class="keyword">False</span>, contamination=<span class="stringliteral">&quot;auto&quot;</span></div>
<div class="line"><span class="lineno">  183</span>    )</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    pred_chain = est_chain.fit_predict(X)</div>
<div class="line"><span class="lineno">  186</span>    pred_compact = est_compact.fit_predict(X)</div>
<div class="line"><span class="lineno">  187</span>    assert_array_almost_equal(pred_chain, pred_compact)</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a32ee709c99211b0f8e9926bb1fdbefe1" name="a32ee709c99211b0f8e9926bb1fdbefe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ee709c99211b0f8e9926bb1fdbefe1">&#9670;&#160;</a></span>test_lof_novelty_true()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_lof_novelty_true </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  190</span><span class="keyword">def </span>test_lof_novelty_true():</div>
<div class="line"><span class="lineno">  191</span>    <span class="comment"># Test chaining KNeighborsTransformer and LocalOutlierFactor</span></div>
<div class="line"><span class="lineno">  192</span>    n_neighbors = 4</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  195</span>    X1 = rng.randn(40, 2)</div>
<div class="line"><span class="lineno">  196</span>    X2 = rng.randn(40, 2)</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span>    <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">  199</span>    est_chain = make_pipeline(</div>
<div class="line"><span class="lineno">  200</span>        KNeighborsTransformer(n_neighbors=n_neighbors, mode=<span class="stringliteral">&quot;distance&quot;</span>),</div>
<div class="line"><span class="lineno">  201</span>        LocalOutlierFactor(</div>
<div class="line"><span class="lineno">  202</span>            metric=<span class="stringliteral">&quot;precomputed&quot;</span>,</div>
<div class="line"><span class="lineno">  203</span>            n_neighbors=n_neighbors,</div>
<div class="line"><span class="lineno">  204</span>            novelty=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  205</span>            contamination=<span class="stringliteral">&quot;auto&quot;</span>,</div>
<div class="line"><span class="lineno">  206</span>        ),</div>
<div class="line"><span class="lineno">  207</span>    )</div>
<div class="line"><span class="lineno">  208</span>    est_compact = LocalOutlierFactor(</div>
<div class="line"><span class="lineno">  209</span>        n_neighbors=n_neighbors, novelty=<span class="keyword">True</span>, contamination=<span class="stringliteral">&quot;auto&quot;</span></div>
<div class="line"><span class="lineno">  210</span>    )</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    pred_chain = est_chain.fit(X1).predict(X2)</div>
<div class="line"><span class="lineno">  213</span>    pred_compact = est_compact.fit(X1).predict(X2)</div>
<div class="line"><span class="lineno">  214</span>    assert_array_almost_equal(pred_chain, pred_compact)</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b9da1eab7e4c25798c2e81375df17ee" name="a6b9da1eab7e4c25798c2e81375df17ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b9da1eab7e4c25798c2e81375df17ee">&#9670;&#160;</a></span>test_spectral_clustering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_spectral_clustering </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   29</span><span class="keyword">def </span>test_spectral_clustering():</div>
<div class="line"><span class="lineno">   30</span>    <span class="comment"># Test chaining KNeighborsTransformer and SpectralClustering</span></div>
<div class="line"><span class="lineno">   31</span>    n_neighbors = 5</div>
<div class="line"><span class="lineno">   32</span>    X, _ = make_blobs(random_state=0)</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span>    <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">   35</span>    est_chain = make_pipeline(</div>
<div class="line"><span class="lineno">   36</span>        KNeighborsTransformer(n_neighbors=n_neighbors, mode=<span class="stringliteral">&quot;connectivity&quot;</span>),</div>
<div class="line"><span class="lineno">   37</span>        SpectralClustering(</div>
<div class="line"><span class="lineno">   38</span>            n_neighbors=n_neighbors, affinity=<span class="stringliteral">&quot;precomputed&quot;</span>, random_state=42</div>
<div class="line"><span class="lineno">   39</span>        ),</div>
<div class="line"><span class="lineno">   40</span>    )</div>
<div class="line"><span class="lineno">   41</span>    est_compact = SpectralClustering(</div>
<div class="line"><span class="lineno">   42</span>        n_neighbors=n_neighbors, affinity=<span class="stringliteral">&quot;nearest_neighbors&quot;</span>, random_state=42</div>
<div class="line"><span class="lineno">   43</span>    )</div>
<div class="line"><span class="lineno">   44</span>    labels_compact = est_compact.fit_predict(X)</div>
<div class="line"><span class="lineno">   45</span>    labels_chain = est_chain.fit_predict(X)</div>
<div class="line"><span class="lineno">   46</span>    assert_array_almost_equal(labels_chain, labels_compact)</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a43d93140456b62215ee7a9faa3cb05ea" name="a43d93140456b62215ee7a9faa3cb05ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d93140456b62215ee7a9faa3cb05ea">&#9670;&#160;</a></span>test_spectral_embedding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_spectral_embedding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   49</span><span class="keyword">def </span>test_spectral_embedding():</div>
<div class="line"><span class="lineno">   50</span>    <span class="comment"># Test chaining KNeighborsTransformer and SpectralEmbedding</span></div>
<div class="line"><span class="lineno">   51</span>    n_neighbors = 5</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    n_samples = 1000</div>
<div class="line"><span class="lineno">   54</span>    centers = np.array(</div>
<div class="line"><span class="lineno">   55</span>        [</div>
<div class="line"><span class="lineno">   56</span>            [0.0, 5.0, 0.0, 0.0, 0.0],</div>
<div class="line"><span class="lineno">   57</span>            [0.0, 0.0, 4.0, 0.0, 0.0],</div>
<div class="line"><span class="lineno">   58</span>            [1.0, 0.0, 0.0, 5.0, 1.0],</div>
<div class="line"><span class="lineno">   59</span>        ]</div>
<div class="line"><span class="lineno">   60</span>    )</div>
<div class="line"><span class="lineno">   61</span>    S, true_labels = make_blobs(</div>
<div class="line"><span class="lineno">   62</span>        n_samples=n_samples, centers=centers, cluster_std=1.0, random_state=42</div>
<div class="line"><span class="lineno">   63</span>    )</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>    <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">   66</span>    est_chain = make_pipeline(</div>
<div class="line"><span class="lineno">   67</span>        KNeighborsTransformer(n_neighbors=n_neighbors, mode=<span class="stringliteral">&quot;connectivity&quot;</span>),</div>
<div class="line"><span class="lineno">   68</span>        SpectralEmbedding(</div>
<div class="line"><span class="lineno">   69</span>            n_neighbors=n_neighbors, affinity=<span class="stringliteral">&quot;precomputed&quot;</span>, random_state=42</div>
<div class="line"><span class="lineno">   70</span>        ),</div>
<div class="line"><span class="lineno">   71</span>    )</div>
<div class="line"><span class="lineno">   72</span>    est_compact = SpectralEmbedding(</div>
<div class="line"><span class="lineno">   73</span>        n_neighbors=n_neighbors, affinity=<span class="stringliteral">&quot;nearest_neighbors&quot;</span>, random_state=42</div>
<div class="line"><span class="lineno">   74</span>    )</div>
<div class="line"><span class="lineno">   75</span>    St_compact = est_compact.fit_transform(S)</div>
<div class="line"><span class="lineno">   76</span>    St_chain = est_chain.fit_transform(S)</div>
<div class="line"><span class="lineno">   77</span>    assert_array_almost_equal(St_chain, St_compact)</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa056b2c5e796b60c378ad3c7a3edd0d2" name="aa056b2c5e796b60c378ad3c7a3edd0d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa056b2c5e796b60c378ad3c7a3edd0d2">&#9670;&#160;</a></span>test_tsne()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.neighbors.tests.test_neighbors_pipeline.test_tsne </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  125</span><span class="keyword">def </span>test_tsne():</div>
<div class="line"><span class="lineno">  126</span>    <span class="comment"># Test chaining KNeighborsTransformer and TSNE</span></div>
<div class="line"><span class="lineno">  127</span>    n_iter = 250</div>
<div class="line"><span class="lineno">  128</span>    perplexity = 5</div>
<div class="line"><span class="lineno">  129</span>    n_neighbors = int(3.0 * perplexity + 1)</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  132</span>    X = rng.randn(20, 2)</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    <span class="keywordflow">for</span> metric <span class="keywordflow">in</span> [<span class="stringliteral">&quot;minkowski&quot;</span>, <span class="stringliteral">&quot;sqeuclidean&quot;</span>]:</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>        <span class="comment"># compare the chained version and the compact version</span></div>
<div class="line"><span class="lineno">  137</span>        est_chain = make_pipeline(</div>
<div class="line"><span class="lineno">  138</span>            KNeighborsTransformer(</div>
<div class="line"><span class="lineno">  139</span>                n_neighbors=n_neighbors, mode=<span class="stringliteral">&quot;distance&quot;</span>, metric=metric</div>
<div class="line"><span class="lineno">  140</span>            ),</div>
<div class="line"><span class="lineno">  141</span>            TSNE(</div>
<div class="line"><span class="lineno">  142</span>                init=<span class="stringliteral">&quot;random&quot;</span>,</div>
<div class="line"><span class="lineno">  143</span>                metric=<span class="stringliteral">&quot;precomputed&quot;</span>,</div>
<div class="line"><span class="lineno">  144</span>                perplexity=perplexity,</div>
<div class="line"><span class="lineno">  145</span>                method=<span class="stringliteral">&quot;barnes_hut&quot;</span>,</div>
<div class="line"><span class="lineno">  146</span>                random_state=42,</div>
<div class="line"><span class="lineno">  147</span>                n_iter=n_iter,</div>
<div class="line"><span class="lineno">  148</span>            ),</div>
<div class="line"><span class="lineno">  149</span>        )</div>
<div class="line"><span class="lineno">  150</span>        est_compact = TSNE(</div>
<div class="line"><span class="lineno">  151</span>            init=<span class="stringliteral">&quot;random&quot;</span>,</div>
<div class="line"><span class="lineno">  152</span>            metric=metric,</div>
<div class="line"><span class="lineno">  153</span>            perplexity=perplexity,</div>
<div class="line"><span class="lineno">  154</span>            n_iter=n_iter,</div>
<div class="line"><span class="lineno">  155</span>            method=<span class="stringliteral">&quot;barnes_hut&quot;</span>,</div>
<div class="line"><span class="lineno">  156</span>            random_state=42,</div>
<div class="line"><span class="lineno">  157</span>        )</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>        Xt_chain = est_chain.fit_transform(X)</div>
<div class="line"><span class="lineno">  160</span>        Xt_compact = est_compact.fit_transform(X)</div>
<div class="line"><span class="lineno">  161</span>        assert_array_almost_equal(Xt_chain, Xt_compact)</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
