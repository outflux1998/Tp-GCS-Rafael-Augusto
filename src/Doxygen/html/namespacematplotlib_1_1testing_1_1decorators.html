<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: matplotlib.testing.decorators Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacematplotlib.html">matplotlib</a></li><li class="navelem"><a class="el" href="namespacematplotlib_1_1testing.html">testing</a></li><li class="navelem"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html">decorators</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">matplotlib.testing.decorators Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1testing_1_1decorators_1_1___image_comparison_base.html">_ImageComparisonBase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1testing_1_1decorators_1_1_cleanup_test_case.html">CleanupTestCase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a49f631af6fdcdd5b17d0d6249ea1f47f" id="r_a49f631af6fdcdd5b17d0d6249ea1f47f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#a49f631af6fdcdd5b17d0d6249ea1f47f">_cleanup_cm</a> ()</td></tr>
<tr class="separator:a49f631af6fdcdd5b17d0d6249ea1f47f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7f34c9183db4e74383c20f9ff3cbf79" id="r_ab7f34c9183db4e74383c20f9ff3cbf79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#ab7f34c9183db4e74383c20f9ff3cbf79">cleanup</a> (style=None)</td></tr>
<tr class="separator:ab7f34c9183db4e74383c20f9ff3cbf79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab378e6362917b7d428e9461ca1d570a" id="r_aab378e6362917b7d428e9461ca1d570a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#aab378e6362917b7d428e9461ca1d570a">check_freetype_version</a> (ver)</td></tr>
<tr class="separator:aab378e6362917b7d428e9461ca1d570a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87223e89c9ebcdfbffa7f922dde8c98b" id="r_a87223e89c9ebcdfbffa7f922dde8c98b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#a87223e89c9ebcdfbffa7f922dde8c98b">_check_freetype_version</a> (ver)</td></tr>
<tr class="separator:a87223e89c9ebcdfbffa7f922dde8c98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9845a3c769a9bef04480c826782fe893" id="r_a9845a3c769a9bef04480c826782fe893"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#a9845a3c769a9bef04480c826782fe893">_checked_on_freetype_version</a> (required_freetype_version)</td></tr>
<tr class="separator:a9845a3c769a9bef04480c826782fe893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb05070afea33c5a0ccff735427a6398" id="r_adb05070afea33c5a0ccff735427a6398"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#adb05070afea33c5a0ccff735427a6398">remove_ticks_and_titles</a> (figure)</td></tr>
<tr class="separator:adb05070afea33c5a0ccff735427a6398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579d87c3ea469acef9451bfb9364ba3a" id="r_a579d87c3ea469acef9451bfb9364ba3a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#a579d87c3ea469acef9451bfb9364ba3a">_collect_new_figures</a> ()</td></tr>
<tr class="separator:a579d87c3ea469acef9451bfb9364ba3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad419da95a8cb766fc170e25897360259" id="r_ad419da95a8cb766fc170e25897360259"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#ad419da95a8cb766fc170e25897360259">_raise_on_image_difference</a> (expected, actual, <a class="el" href="__lapack__subroutines_8h.html#a0357339a1a1f7b51953875ca01447445">tol</a>)</td></tr>
<tr class="separator:ad419da95a8cb766fc170e25897360259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43986c0a36d94b204a22bdd2848e6462" id="r_a43986c0a36d94b204a22bdd2848e6462"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#a43986c0a36d94b204a22bdd2848e6462">_pytest_image_comparison</a> (baseline_images, extensions, <a class="el" href="__lapack__subroutines_8h.html#a0357339a1a1f7b51953875ca01447445">tol</a>, freetype_version, remove_text, savefig_kwargs, style)</td></tr>
<tr class="separator:a43986c0a36d94b204a22bdd2848e6462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd3d1fb006595d40e992bb264898ba4" id="r_a2cd3d1fb006595d40e992bb264898ba4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#a2cd3d1fb006595d40e992bb264898ba4">image_comparison</a> (baseline_images, extensions=None, <a class="el" href="__lapack__subroutines_8h.html#a0357339a1a1f7b51953875ca01447445">tol</a>=0, freetype_version=None, remove_text=False, savefig_kwarg=None, style=(&quot;classic&quot;, &quot;_classic_test_patch&quot;))</td></tr>
<tr class="separator:a2cd3d1fb006595d40e992bb264898ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc14b6b295b0ec06fe23cc0b737aac4d" id="r_acc14b6b295b0ec06fe23cc0b737aac4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#acc14b6b295b0ec06fe23cc0b737aac4d">check_figures_equal</a> (*extensions=(&quot;png&quot;, &quot;pdf&quot;, &quot;svg&quot;), <a class="el" href="__lapack__subroutines_8h.html#a0357339a1a1f7b51953875ca01447445">tol</a>=0)</td></tr>
<tr class="separator:acc14b6b295b0ec06fe23cc0b737aac4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f5f7d37e9cb45415b2879d0817865e3" id="r_a2f5f7d37e9cb45415b2879d0817865e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacematplotlib_1_1testing_1_1decorators.html#a2f5f7d37e9cb45415b2879d0817865e3">_image_directories</a> (<a class="el" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>)</td></tr>
<tr class="separator:a2f5f7d37e9cb45415b2879d0817865e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a87223e89c9ebcdfbffa7f922dde8c98b" name="a87223e89c9ebcdfbffa7f922dde8c98b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87223e89c9ebcdfbffa7f922dde8c98b">&#9670;&#160;</a></span>_check_freetype_version()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators._check_freetype_version </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   97</span><span class="keyword">def </span>_check_freetype_version(ver):</div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">if</span> ver <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   99</span>        <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">if</span> isinstance(ver, str):</div>
<div class="line"><span class="lineno">  102</span>        ver = (ver, ver)</div>
<div class="line"><span class="lineno">  103</span>    ver = [parse_version(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> ver]</div>
<div class="line"><span class="lineno">  104</span>    found = parse_version(ft2font.__freetype_version__)</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">return</span> ver[0] &lt;= found &lt;= ver[1]</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9845a3c769a9bef04480c826782fe893" name="a9845a3c769a9bef04480c826782fe893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9845a3c769a9bef04480c826782fe893">&#9670;&#160;</a></span>_checked_on_freetype_version()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators._checked_on_freetype_version </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>required_freetype_version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  109</span><span class="keyword">def </span>_checked_on_freetype_version(required_freetype_version):</div>
<div class="line"><span class="lineno">  110</span>    <span class="keyword">import</span> pytest</div>
<div class="line"><span class="lineno">  111</span>    <span class="keywordflow">return</span> pytest.mark.xfail(</div>
<div class="line"><span class="lineno">  112</span>        <span class="keywordflow">not</span> _check_freetype_version(required_freetype_version),</div>
<div class="line"><span class="lineno">  113</span>        reason=f<span class="stringliteral">&quot;Mismatched version of freetype. &quot;</span></div>
<div class="line"><span class="lineno">  114</span>               f<span class="stringliteral">&quot;Test requires &#39;{required_freetype_version}&#39;, &quot;</span></div>
<div class="line"><span class="lineno">  115</span>               f<span class="stringliteral">&quot;you have &#39;{ft2font.__freetype_version__}&#39;&quot;</span>,</div>
<div class="line"><span class="lineno">  116</span>        raises=ImageComparisonFailure, strict=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a49f631af6fdcdd5b17d0d6249ea1f47f" name="a49f631af6fdcdd5b17d0d6249ea1f47f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49f631af6fdcdd5b17d0d6249ea1f47f">&#9670;&#160;</a></span>_cleanup_cm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators._cleanup_cm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   24</span><span class="keyword">def </span>_cleanup_cm():</div>
<div class="line"><span class="lineno">   25</span>    orig_units_registry = matplotlib.units.registry.copy()</div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   27</span>        <span class="keyword">with</span> warnings.catch_warnings(), <a class="code hl_function" href="namespacematplotlib.html#a8ee53795ff23f3f8ae6ce894a727003c">matplotlib.rc_context</a>():</div>
<div class="line"><span class="lineno">   28</span>            <span class="keywordflow">yield</span></div>
<div class="line"><span class="lineno">   29</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno">   30</span>        matplotlib.units.registry.clear()</div>
<div class="line"><span class="lineno">   31</span>        matplotlib.units.registry.update(orig_units_registry)</div>
<div class="line"><span class="lineno">   32</span>        plt.close(<span class="stringliteral">&quot;all&quot;</span>)</div>
<div class="line"><span class="lineno">   33</span> </div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span><span class="preprocessor">@_api.deprecated</span>(<span class="stringliteral">&quot;3.6&quot;</span>, alternative=<span class="stringliteral">&quot;a vendored copy of the existing code, &quot;</span></div>
<div class="line"><span class="lineno">   36</span>                 <span class="stringliteral">&quot;including the private function _cleanup_cm&quot;</span>)</div>
<div class="ttc" id="anamespacematplotlib_html_a8ee53795ff23f3f8ae6ce894a727003c"><div class="ttname"><a href="namespacematplotlib.html#a8ee53795ff23f3f8ae6ce894a727003c">matplotlib.rc_context</a></div><div class="ttdeci">rc_context(rc=None, fname=None)</div><div class="ttdef"><b>Definition</b> __init__.py:1059</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a579d87c3ea469acef9451bfb9364ba3a" name="a579d87c3ea469acef9451bfb9364ba3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a579d87c3ea469acef9451bfb9364ba3a">&#9670;&#160;</a></span>_collect_new_figures()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators._collect_new_figures </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">After::

    with _collect_new_figures() as figs:
        some_code()

the list *figs* contains the figures that have been created during the
execution of ``some_code``, sorted by figure number.
</pre> <div class="fragment"><div class="line"><span class="lineno">  141</span><span class="keyword">def </span>_collect_new_figures():</div>
<div class="line"><span class="lineno">  142</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">    After::</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">        with _collect_new_figures() as figs:</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">            some_code()</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">    the list *figs* contains the figures that have been created during the</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">    execution of ``some_code``, sorted by figure number.</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  151</span>    managers = _pylab_helpers.Gcf.figs</div>
<div class="line"><span class="lineno">  152</span>    preexisting = [manager <span class="keywordflow">for</span> manager <span class="keywordflow">in</span> managers.values()]</div>
<div class="line"><span class="lineno">  153</span>    new_figs = []</div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">yield</span> new_figs</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno">  157</span>        new_managers = sorted([manager <span class="keywordflow">for</span> manager <span class="keywordflow">in</span> managers.values()</div>
<div class="line"><span class="lineno">  158</span>                               <span class="keywordflow">if</span> manager <span class="keywordflow">not</span> <span class="keywordflow">in</span> preexisting],</div>
<div class="line"><span class="lineno">  159</span>                              key=<span class="keyword">lambda</span> manager: manager.num)</div>
<div class="line"><span class="lineno">  160</span>        new_figs[:] = [manager.canvas.figure <span class="keywordflow">for</span> manager <span class="keywordflow">in</span> new_managers]</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f5f7d37e9cb45415b2879d0817865e3" name="a2f5f7d37e9cb45415b2879d0817865e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f5f7d37e9cb45415b2879d0817865e3">&#9670;&#160;</a></span>_image_directories()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators._image_directories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Compute the baseline and result image directories for testing *func*.

For test module ``foo.bar.test_baz``, the baseline directory is at
``foo/bar/baseline_images/test_baz`` and the result directory at
``$(pwd)/result_images/test_baz``.  The result directory is created if it
doesn't exist.
</pre> <div class="fragment"><div class="line"><span class="lineno">  507</span><span class="keyword">def </span>_image_directories(func):</div>
<div class="line"><span class="lineno">  508</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  509</span><span class="stringliteral">    Compute the baseline and result image directories for testing *func*.</span></div>
<div class="line"><span class="lineno">  510</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  511</span><span class="stringliteral">    For test module ``foo.bar.test_baz``, the baseline directory is at</span></div>
<div class="line"><span class="lineno">  512</span><span class="stringliteral">    ``foo/bar/baseline_images/test_baz`` and the result directory at</span></div>
<div class="line"><span class="lineno">  513</span><span class="stringliteral">    ``$(pwd)/result_images/test_baz``.  The result directory is created if it</span></div>
<div class="line"><span class="lineno">  514</span><span class="stringliteral">    doesn&#39;t exist.</span></div>
<div class="line"><span class="lineno">  515</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  516</span>    module_path = Path(inspect.getfile(func))</div>
<div class="line"><span class="lineno">  517</span>    baseline_dir = module_path.parent / <span class="stringliteral">&quot;baseline_images&quot;</span> / module_path.stem</div>
<div class="line"><span class="lineno">  518</span>    result_dir = Path().resolve() / <span class="stringliteral">&quot;result_images&quot;</span> / module_path.stem</div>
<div class="line"><span class="lineno">  519</span>    result_dir.mkdir(parents=<span class="keyword">True</span>, exist_ok=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  520</span>    <span class="keywordflow">return</span> baseline_dir, result_dir</div>
</div><!-- fragment -->
</div>
</div>
<a id="a43986c0a36d94b204a22bdd2848e6462" name="a43986c0a36d94b204a22bdd2848e6462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43986c0a36d94b204a22bdd2848e6462">&#9670;&#160;</a></span>_pytest_image_comparison()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators._pytest_image_comparison </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>baseline_images</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>extensions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>freetype_version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remove_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>savefig_kwargs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>style</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Decorate function with image comparison for pytest.

This function creates a decorator that wraps a figure-generating function
with image comparison code.
</pre> <div class="fragment"><div class="line"><span class="lineno">  240</span>                             style):</div>
<div class="line"><span class="lineno">  241</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">    Decorate function with image comparison for pytest.</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">    This function creates a decorator that wraps a figure-generating function</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">    with image comparison code.</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  247</span>    <span class="keyword">import</span> pytest</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>    KEYWORD_ONLY = inspect.Parameter.KEYWORD_ONLY</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="keyword">def </span>decorator(func):</div>
<div class="line"><span class="lineno">  252</span>        old_sig = inspect.signature(func)</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>        <span class="preprocessor">@functools.wraps(func)</span></div>
<div class="line"><span class="lineno">  255</span>        <span class="preprocessor">@pytest.mark.parametrize(&#39;extension&#39;, extensions)</span></div>
<div class="line"><span class="lineno">  256</span>        <span class="preprocessor">@matplotlib.style.context(style)</span></div>
<div class="line"><span class="lineno">  257</span>        <span class="preprocessor">@_checked_on_freetype_version(freetype_version)</span></div>
<div class="line"><span class="lineno">  258</span>        <span class="preprocessor">@functools.wraps(func)</span></div>
<div class="line"><span class="lineno">  259</span>        <span class="keyword">def </span>wrapper(*args, extension, request, **kwargs):</div>
<div class="line"><span class="lineno">  260</span>            __tracebackhide__ = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  261</span>            <span class="keywordflow">if</span> <span class="stringliteral">&#39;extension&#39;</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  262</span>                kwargs[<span class="stringliteral">&#39;extension&#39;</span>] = extension</div>
<div class="line"><span class="lineno">  263</span>            <span class="keywordflow">if</span> <span class="stringliteral">&#39;request&#39;</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  264</span>                kwargs[<span class="stringliteral">&#39;request&#39;</span>] = request</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>            <span class="keywordflow">if</span> extension <span class="keywordflow">not</span> <span class="keywordflow">in</span> comparable_formats():</div>
<div class="line"><span class="lineno">  267</span>                pytest.skip(f<span class="stringliteral">&quot;Cannot compare {extension} files on this system&quot;</span>)</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>            img = _ImageComparisonBase(func, tol=tol, remove_text=remove_text,</div>
<div class="line"><span class="lineno">  270</span>                                       savefig_kwargs=savefig_kwargs)</div>
<div class="line"><span class="lineno">  271</span>            <a class="code hl_function" href="namespacematplotlib_1_1testing.html#abed00bc849a3aeea460546e3d933b6c9">matplotlib.testing.set_font_settings_for_testing</a>()</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>            <span class="keyword">with</span> _collect_new_figures() <span class="keyword">as</span> figs:</div>
<div class="line"><span class="lineno">  274</span>                <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(*args, **kwargs)</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>            <span class="comment"># If the test is parametrized in any way other than applied via</span></div>
<div class="line"><span class="lineno">  277</span>            <span class="comment"># this decorator, then we need to use a lock to prevent two</span></div>
<div class="line"><span class="lineno">  278</span>            <span class="comment"># processes from touching the same output file.</span></div>
<div class="line"><span class="lineno">  279</span>            needs_lock = any(</div>
<div class="line"><span class="lineno">  280</span>                marker.args[0] != <span class="stringliteral">&#39;extension&#39;</span></div>
<div class="line"><span class="lineno">  281</span>                <span class="keywordflow">for</span> marker <span class="keywordflow">in</span> request.node.iter_markers(<span class="stringliteral">&#39;parametrize&#39;</span>))</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">if</span> baseline_images <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  284</span>                our_baseline_images = baseline_images</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  286</span>                <span class="comment"># Allow baseline image list to be produced on the fly based on</span></div>
<div class="line"><span class="lineno">  287</span>                <span class="comment"># current parametrization.</span></div>
<div class="line"><span class="lineno">  288</span>                our_baseline_images = request.getfixturevalue(</div>
<div class="line"><span class="lineno">  289</span>                    <span class="stringliteral">&#39;baseline_images&#39;</span>)</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>            <span class="keyword">assert</span> len(figs) == len(our_baseline_images), (</div>
<div class="line"><span class="lineno">  292</span>                <span class="stringliteral">&quot;Test generated {} images but there are {} baseline images&quot;</span></div>
<div class="line"><span class="lineno">  293</span>                .format(len(figs), len(our_baseline_images)))</div>
<div class="line"><span class="lineno">  294</span>            <span class="keywordflow">for</span> fig, baseline <span class="keywordflow">in</span> zip(figs, our_baseline_images):</div>
<div class="line"><span class="lineno">  295</span>                img.compare(fig, baseline, extension, _lock=needs_lock)</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>        parameters = list(old_sig.parameters.values())</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;extension&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  299</span>            parameters += [inspect.Parameter(<span class="stringliteral">&#39;extension&#39;</span>, KEYWORD_ONLY)]</div>
<div class="line"><span class="lineno">  300</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;request&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  301</span>            parameters += [inspect.Parameter(<span class="stringliteral">&quot;request&quot;</span>, KEYWORD_ONLY)]</div>
<div class="line"><span class="lineno">  302</span>        new_sig = old_sig.replace(parameters=parameters)</div>
<div class="line"><span class="lineno">  303</span>        wrapper.__signature__ = new_sig</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>        <span class="comment"># Reach a bit into pytest internals to hoist the marks from our wrapped</span></div>
<div class="line"><span class="lineno">  306</span>        <span class="comment"># function.</span></div>
<div class="line"><span class="lineno">  307</span>        new_marks = getattr(func, <span class="stringliteral">&#39;pytestmark&#39;</span>, []) + wrapper.pytestmark</div>
<div class="line"><span class="lineno">  308</span>        wrapper.pytestmark = new_marks</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">return</span> wrapper</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">return</span> decorator</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="ttc" id="acallback_2foo_8f_html_a565fe2cc583df102f120752b0011c330"><div class="ttname"><a href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a></div><div class="ttdeci">subroutine func(a)</div><div class="ttdef"><b>Definition</b> foo.f:9</div></div>
<div class="ttc" id="anamespacematplotlib_1_1testing_html_abed00bc849a3aeea460546e3d933b6c9"><div class="ttname"><a href="namespacematplotlib_1_1testing.html#abed00bc849a3aeea460546e3d933b6c9">matplotlib.testing.set_font_settings_for_testing</a></div><div class="ttdeci">set_font_settings_for_testing()</div><div class="ttdef"><b>Definition</b> __init__.py:18</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad419da95a8cb766fc170e25897360259" name="ad419da95a8cb766fc170e25897360259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad419da95a8cb766fc170e25897360259">&#9670;&#160;</a></span>_raise_on_image_difference()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators._raise_on_image_difference </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>actual</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  163</span><span class="keyword">def </span>_raise_on_image_difference(expected, actual, tol):</div>
<div class="line"><span class="lineno">  164</span>    __tracebackhide__ = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    err = compare_images(expected, actual, tol, in_decorator=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">if</span> err:</div>
<div class="line"><span class="lineno">  168</span>        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> [<span class="stringliteral">&quot;actual&quot;</span>, <span class="stringliteral">&quot;expected&quot;</span>, <span class="stringliteral">&quot;diff&quot;</span>]:</div>
<div class="line"><span class="lineno">  169</span>            err[key] = os.path.relpath(err[key])</div>
<div class="line"><span class="lineno">  170</span>        <span class="keywordflow">raise</span> ImageComparisonFailure(</div>
<div class="line"><span class="lineno">  171</span>            (<span class="stringliteral">&#39;images not close (RMS %(rms).3f):&#39;</span></div>
<div class="line"><span class="lineno">  172</span>                <span class="stringliteral">&#39;\n\t%(actual)s\n\t%(expected)s\n\t%(diff)s&#39;</span>) % err)</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="acc14b6b295b0ec06fe23cc0b737aac4d" name="acc14b6b295b0ec06fe23cc0b737aac4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc14b6b295b0ec06fe23cc0b737aac4d">&#9670;&#160;</a></span>check_figures_equal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators.check_figures_equal </td>
          <td>(</td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>extensions</em> = <code>(&quot;png&quot;,&#160;&quot;pdf&quot;,&#160;&quot;svg&quot;)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tol</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decorator for test cases that generate and compare two figures.

The decorated function must take two keyword arguments, *fig_test*
and *fig_ref*, and draw the test and reference images on them.
After the function returns, the figures are saved and compared.

This decorator should be preferred over `image_comparison` when possible in
order to keep the size of the test suite from ballooning.

Parameters
----------
extensions : list, default: ["png", "pdf", "svg"]
    The extensions to test.
tol : float
    The RMS threshold above which the test is considered failed.

Raises
------
RuntimeError
    If any new figures are created (and not subsequently closed) inside
    the test function.

Examples
--------
Check that calling `.Axes.plot` with a single argument plots it against
``[0, 1, 2, ...]``::

    @check_figures_equal()
    def test_plot(fig_test, fig_ref):
        fig_test.subplots().plot([1, 3, 5])
        fig_ref.subplots().plot([0, 1, 2], [1, 3, 5])</pre> <div class="fragment"><div class="line"><span class="lineno">  405</span><span class="keyword">def </span>check_figures_equal(*, extensions=(<span class="stringliteral">&quot;png&quot;</span>, <span class="stringliteral">&quot;pdf&quot;</span>, <span class="stringliteral">&quot;svg&quot;</span>), tol=0):</div>
<div class="line"><span class="lineno">  406</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  407</span><span class="stringliteral">    Decorator for test cases that generate and compare two figures.</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">    The decorated function must take two keyword arguments, *fig_test*</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral">    and *fig_ref*, and draw the test and reference images on them.</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">    After the function returns, the figures are saved and compared.</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral">    This decorator should be preferred over `image_comparison` when possible in</span></div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">    order to keep the size of the test suite from ballooning.</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  417</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral">    extensions : list, default: [&quot;png&quot;, &quot;pdf&quot;, &quot;svg&quot;]</span></div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">        The extensions to test.</span></div>
<div class="line"><span class="lineno">  420</span><span class="stringliteral">    tol : float</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral">        The RMS threshold above which the test is considered failed.</span></div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral">    RuntimeError</span></div>
<div class="line"><span class="lineno">  426</span><span class="stringliteral">        If any new figures are created (and not subsequently closed) inside</span></div>
<div class="line"><span class="lineno">  427</span><span class="stringliteral">        the test function.</span></div>
<div class="line"><span class="lineno">  428</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  429</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  430</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  431</span><span class="stringliteral">    Check that calling `.Axes.plot` with a single argument plots it against</span></div>
<div class="line"><span class="lineno">  432</span><span class="stringliteral">    ``[0, 1, 2, ...]``::</span></div>
<div class="line"><span class="lineno">  433</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  434</span><span class="stringliteral">        @check_figures_equal()</span></div>
<div class="line"><span class="lineno">  435</span><span class="stringliteral">        def test_plot(fig_test, fig_ref):</span></div>
<div class="line"><span class="lineno">  436</span><span class="stringliteral">            fig_test.subplots().plot([1, 3, 5])</span></div>
<div class="line"><span class="lineno">  437</span><span class="stringliteral">            fig_ref.subplots().plot([0, 1, 2], [1, 3, 5])</span></div>
<div class="line"><span class="lineno">  438</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  439</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  440</span>    ALLOWED_CHARS = set(string.digits + string.ascii_letters + <span class="stringliteral">&#39;_-[]()&#39;</span>)</div>
<div class="line"><span class="lineno">  441</span>    KEYWORD_ONLY = inspect.Parameter.KEYWORD_ONLY</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>    <span class="keyword">def </span>decorator(func):</div>
<div class="line"><span class="lineno">  444</span>        <span class="keyword">import</span> pytest</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>        _, result_dir = _image_directories(func)</div>
<div class="line"><span class="lineno">  447</span>        old_sig = inspect.signature(func)</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> {<span class="stringliteral">&quot;fig_test&quot;</span>, <span class="stringliteral">&quot;fig_ref&quot;</span>}.issubset(old_sig.parameters):</div>
<div class="line"><span class="lineno">  450</span>            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The decorated function must have at least the &quot;</span></div>
<div class="line"><span class="lineno">  451</span>                             <span class="stringliteral">&quot;parameters &#39;fig_ref&#39; and &#39;fig_test&#39;, but your &quot;</span></div>
<div class="line"><span class="lineno">  452</span>                             f<span class="stringliteral">&quot;function has the signature {old_sig}&quot;</span>)</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>        <span class="preprocessor">@pytest.mark.parametrize(&quot;ext&quot;, extensions)</span></div>
<div class="line"><span class="lineno">  455</span>        <span class="keyword">def </span>wrapper(*args, ext, request, **kwargs):</div>
<div class="line"><span class="lineno">  456</span>            <span class="keywordflow">if</span> <span class="stringliteral">&#39;ext&#39;</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  457</span>                kwargs[<span class="stringliteral">&#39;ext&#39;</span>] = ext</div>
<div class="line"><span class="lineno">  458</span>            <span class="keywordflow">if</span> <span class="stringliteral">&#39;request&#39;</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  459</span>                kwargs[<span class="stringliteral">&#39;request&#39;</span>] = request</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>            file_name = <span class="stringliteral">&quot;&quot;</span>.join(c <span class="keywordflow">for</span> c <span class="keywordflow">in</span> request.node.name</div>
<div class="line"><span class="lineno">  462</span>                                <span class="keywordflow">if</span> c <span class="keywordflow">in</span> ALLOWED_CHARS)</div>
<div class="line"><span class="lineno">  463</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  464</span>                fig_test = plt.figure(<span class="stringliteral">&quot;test&quot;</span>)</div>
<div class="line"><span class="lineno">  465</span>                fig_ref = plt.figure(<span class="stringliteral">&quot;reference&quot;</span>)</div>
<div class="line"><span class="lineno">  466</span>                <span class="keyword">with</span> _collect_new_figures() <span class="keyword">as</span> figs:</div>
<div class="line"><span class="lineno">  467</span>                    <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(*args, fig_test=fig_test, fig_ref=fig_ref, **kwargs)</div>
<div class="line"><span class="lineno">  468</span>                <span class="keywordflow">if</span> figs:</div>
<div class="line"><span class="lineno">  469</span>                    <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&#39;Number of open figures changed during &#39;</span></div>
<div class="line"><span class="lineno">  470</span>                                       <span class="stringliteral">&#39;test. Make sure you are plotting to &#39;</span></div>
<div class="line"><span class="lineno">  471</span>                                       <span class="stringliteral">&#39;fig_test or fig_ref, or if this is &#39;</span></div>
<div class="line"><span class="lineno">  472</span>                                       <span class="stringliteral">&#39;deliberate explicitly close the &#39;</span></div>
<div class="line"><span class="lineno">  473</span>                                       <span class="stringliteral">&#39;new figure(s) inside the test.&#39;</span>)</div>
<div class="line"><span class="lineno">  474</span>                test_image_path = result_dir / (file_name + <span class="stringliteral">&quot;.&quot;</span> + ext)</div>
<div class="line"><span class="lineno">  475</span>                ref_image_path = result_dir / (file_name + <span class="stringliteral">&quot;-expected.&quot;</span> + ext)</div>
<div class="line"><span class="lineno">  476</span>                fig_test.savefig(test_image_path)</div>
<div class="line"><span class="lineno">  477</span>                fig_ref.savefig(ref_image_path)</div>
<div class="line"><span class="lineno">  478</span>                _raise_on_image_difference(</div>
<div class="line"><span class="lineno">  479</span>                    ref_image_path, test_image_path, tol=tol</div>
<div class="line"><span class="lineno">  480</span>                )</div>
<div class="line"><span class="lineno">  481</span>            <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno">  482</span>                plt.close(fig_test)</div>
<div class="line"><span class="lineno">  483</span>                plt.close(fig_ref)</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>        parameters = [</div>
<div class="line"><span class="lineno">  486</span>            param</div>
<div class="line"><span class="lineno">  487</span>            <span class="keywordflow">for</span> param <span class="keywordflow">in</span> old_sig.parameters.values()</div>
<div class="line"><span class="lineno">  488</span>            <span class="keywordflow">if</span> param.name <span class="keywordflow">not</span> <span class="keywordflow">in</span> {<span class="stringliteral">&quot;fig_test&quot;</span>, <span class="stringliteral">&quot;fig_ref&quot;</span>}</div>
<div class="line"><span class="lineno">  489</span>        ]</div>
<div class="line"><span class="lineno">  490</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;ext&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  491</span>            parameters += [inspect.Parameter(<span class="stringliteral">&quot;ext&quot;</span>, KEYWORD_ONLY)]</div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">if</span> <span class="stringliteral">&#39;request&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> old_sig.parameters:</div>
<div class="line"><span class="lineno">  493</span>            parameters += [inspect.Parameter(<span class="stringliteral">&quot;request&quot;</span>, KEYWORD_ONLY)]</div>
<div class="line"><span class="lineno">  494</span>        new_sig = old_sig.replace(parameters=parameters)</div>
<div class="line"><span class="lineno">  495</span>        wrapper.__signature__ = new_sig</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>        <span class="comment"># reach a bit into pytest internals to hoist the marks from</span></div>
<div class="line"><span class="lineno">  498</span>        <span class="comment"># our wrapped function</span></div>
<div class="line"><span class="lineno">  499</span>        new_marks = getattr(func, <span class="stringliteral">&quot;pytestmark&quot;</span>, []) + wrapper.pytestmark</div>
<div class="line"><span class="lineno">  500</span>        wrapper.pytestmark = new_marks</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>        <span class="keywordflow">return</span> wrapper</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>    <span class="keywordflow">return</span> decorator</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aab378e6362917b7d428e9461ca1d570a" name="aab378e6362917b7d428e9461ca1d570a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab378e6362917b7d428e9461ca1d570a">&#9670;&#160;</a></span>check_freetype_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators.check_freetype_version </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   93</span><span class="keyword">def </span>check_freetype_version(ver):</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">return</span> _check_freetype_version(ver)</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7f34c9183db4e74383c20f9ff3cbf79" name="ab7f34c9183db4e74383c20f9ff3cbf79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7f34c9183db4e74383c20f9ff3cbf79">&#9670;&#160;</a></span>cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators.cleanup </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>style</em> = <code>None</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A decorator to ensure that any global state is reset before
running a test.

Parameters
----------
style : str, dict, or list, optional
    The style(s) to apply.  Defaults to ``["classic",
    "_classic_test_patch"]``.
</pre> <div class="fragment"><div class="line"><span class="lineno">   50</span><span class="keyword">def </span>cleanup(style=None):</div>
<div class="line"><span class="lineno">   51</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    A decorator to ensure that any global state is reset before</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    running a test.</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    style : str, dict, or list, optional</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">        The style(s) to apply.  Defaults to ``[&quot;classic&quot;,</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">        &quot;_classic_test_patch&quot;]``.</span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>    <span class="comment"># If cleanup is used without arguments, *style* will be a callable, and we</span></div>
<div class="line"><span class="lineno">   63</span>    <span class="comment"># pass it directly to the wrapper generator.  If cleanup if called with an</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="comment"># argument, it is a string naming a style, and the function will be passed</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="comment"># as an argument to what we return.  This is a confusing, but somewhat</span></div>
<div class="line"><span class="lineno">   66</span>    <span class="comment"># standard, pattern for writing a decorator with optional arguments.</span></div>
<div class="line"><span class="lineno">   67</span> </div>
<div class="line"><span class="lineno">   68</span>    <span class="keyword">def </span>make_cleanup(func):</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">if</span> inspect.isgeneratorfunction(func):</div>
<div class="line"><span class="lineno">   70</span>            <span class="preprocessor">@functools.wraps(func)</span></div>
<div class="line"><span class="lineno">   71</span>            <span class="keyword">def </span>wrapped_callable(*args, **kwargs):</div>
<div class="line"><span class="lineno">   72</span>                <span class="keyword">with</span> _cleanup_cm(), matplotlib.style.context(style):</div>
<div class="line"><span class="lineno">   73</span>                    <span class="keywordflow">yield</span> <span class="keyword">from</span> <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(*args, **kwargs)</div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   75</span>            <span class="preprocessor">@functools.wraps(func)</span></div>
<div class="line"><span class="lineno">   76</span>            <span class="keyword">def </span>wrapped_callable(*args, **kwargs):</div>
<div class="line"><span class="lineno">   77</span>                <span class="keyword">with</span> _cleanup_cm(), matplotlib.style.context(style):</div>
<div class="line"><span class="lineno">   78</span>                    <a class="code hl_function" href="callback_2foo_8f.html#a565fe2cc583df102f120752b0011c330">func</a>(*args, **kwargs)</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>        <span class="keywordflow">return</span> wrapped_callable</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">if</span> callable(style):</div>
<div class="line"><span class="lineno">   83</span>        result = make_cleanup(style)</div>
<div class="line"><span class="lineno">   84</span>        <span class="comment"># Default of mpl_test_settings fixture and image_comparison too.</span></div>
<div class="line"><span class="lineno">   85</span>        style = [<span class="stringliteral">&quot;classic&quot;</span>, <span class="stringliteral">&quot;_classic_test_patch&quot;</span>]</div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordflow">return</span> result</div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">return</span> make_cleanup</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span><span class="preprocessor">@_api.deprecated</span>(<span class="stringliteral">&quot;3.6&quot;</span>, alternative=<span class="stringliteral">&quot;a vendored copy of the existing code &quot;</span></div>
<div class="line"><span class="lineno">   92</span>                 <span class="stringliteral">&quot;of _check_freetype_version&quot;</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cd3d1fb006595d40e992bb264898ba4" name="a2cd3d1fb006595d40e992bb264898ba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cd3d1fb006595d40e992bb264898ba4">&#9670;&#160;</a></span>image_comparison()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators.image_comparison </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>baseline_images</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>extensions</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tol</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>freetype_version</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remove_text</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>savefig_kwarg</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>style</em> = <code>(&quot;classic&quot;,&#160;&quot;_classic_test_patch&quot;)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compare images generated by the test with those specified in
*baseline_images*, which must correspond, else an `ImageComparisonFailure`
exception will be raised.

Parameters
----------
baseline_images : list or None
    A list of strings specifying the names of the images generated by
    calls to `.Figure.savefig`.

    If *None*, the test function must use the ``baseline_images`` fixture,
    either as a parameter or with `pytest.mark.usefixtures`. This value is
    only allowed when using pytest.

extensions : None or list of str
    The list of extensions to test, e.g. ``['png', 'pdf']``.

    If *None*, defaults to all supported extensions: png, pdf, and svg.

    When testing a single extension, it can be directly included in the
    names passed to *baseline_images*.  In that case, *extensions* must not
    be set.

    In order to keep the size of the test suite from ballooning, we only
    include the ``svg`` or ``pdf`` outputs if the test is explicitly
    exercising a feature dependent on that backend (see also the
    `check_figures_equal` decorator for that purpose).

tol : float, default: 0
    The RMS threshold above which the test is considered failed.

    Due to expected small differences in floating-point calculations, on
    32-bit systems an additional 0.06 is added to this threshold.

freetype_version : str or tuple
    The expected freetype version or range of versions for this test to
    pass.

remove_text : bool
    Remove the title and tick text from the figure before comparison.  This
    is useful to make the baseline images independent of variations in text
    rendering between different versions of FreeType.

    This does not remove other, more deliberate, text, such as legends and
    annotations.

savefig_kwarg : dict
    Optional arguments that are passed to the savefig method.

style : str, dict, or list
    The optional style(s) to apply to the image test. The test itself
    can also apply additional styles if desired. Defaults to ``["classic",
    "_classic_test_patch"]``.
</pre> <div class="fragment"><div class="line"><span class="lineno">  319</span>                     style=(<span class="stringliteral">&quot;classic&quot;</span>, <span class="stringliteral">&quot;_classic_test_patch&quot;</span>)):</div>
<div class="line"><span class="lineno">  320</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">    Compare images generated by the test with those specified in</span></div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    *baseline_images*, which must correspond, else an `ImageComparisonFailure`</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">    exception will be raised.</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">    baseline_images : list or None</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">        A list of strings specifying the names of the images generated by</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">        calls to `.Figure.savefig`.</span></div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  331</span><span class="stringliteral">        If *None*, the test function must use the ``baseline_images`` fixture,</span></div>
<div class="line"><span class="lineno">  332</span><span class="stringliteral">        either as a parameter or with `pytest.mark.usefixtures`. This value is</span></div>
<div class="line"><span class="lineno">  333</span><span class="stringliteral">        only allowed when using pytest.</span></div>
<div class="line"><span class="lineno">  334</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  335</span><span class="stringliteral">    extensions : None or list of str</span></div>
<div class="line"><span class="lineno">  336</span><span class="stringliteral">        The list of extensions to test, e.g. ``[&#39;png&#39;, &#39;pdf&#39;]``.</span></div>
<div class="line"><span class="lineno">  337</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  338</span><span class="stringliteral">        If *None*, defaults to all supported extensions: png, pdf, and svg.</span></div>
<div class="line"><span class="lineno">  339</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral">        When testing a single extension, it can be directly included in the</span></div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral">        names passed to *baseline_images*.  In that case, *extensions* must not</span></div>
<div class="line"><span class="lineno">  342</span><span class="stringliteral">        be set.</span></div>
<div class="line"><span class="lineno">  343</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  344</span><span class="stringliteral">        In order to keep the size of the test suite from ballooning, we only</span></div>
<div class="line"><span class="lineno">  345</span><span class="stringliteral">        include the ``svg`` or ``pdf`` outputs if the test is explicitly</span></div>
<div class="line"><span class="lineno">  346</span><span class="stringliteral">        exercising a feature dependent on that backend (see also the</span></div>
<div class="line"><span class="lineno">  347</span><span class="stringliteral">        `check_figures_equal` decorator for that purpose).</span></div>
<div class="line"><span class="lineno">  348</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  349</span><span class="stringliteral">    tol : float, default: 0</span></div>
<div class="line"><span class="lineno">  350</span><span class="stringliteral">        The RMS threshold above which the test is considered failed.</span></div>
<div class="line"><span class="lineno">  351</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  352</span><span class="stringliteral">        Due to expected small differences in floating-point calculations, on</span></div>
<div class="line"><span class="lineno">  353</span><span class="stringliteral">        32-bit systems an additional 0.06 is added to this threshold.</span></div>
<div class="line"><span class="lineno">  354</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral">    freetype_version : str or tuple</span></div>
<div class="line"><span class="lineno">  356</span><span class="stringliteral">        The expected freetype version or range of versions for this test to</span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">        pass.</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">    remove_text : bool</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">        Remove the title and tick text from the figure before comparison.  This</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">        is useful to make the baseline images independent of variations in text</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">        rendering between different versions of FreeType.</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">        This does not remove other, more deliberate, text, such as legends and</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">        annotations.</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">    savefig_kwarg : dict</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">        Optional arguments that are passed to the savefig method.</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">    style : str, dict, or list</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">        The optional style(s) to apply to the image test. The test itself</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral">        can also apply additional styles if desired. Defaults to ``[&quot;classic&quot;,</span></div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">        &quot;_classic_test_patch&quot;]``.</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">if</span> baseline_images <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  377</span>        <span class="comment"># List of non-empty filename extensions.</span></div>
<div class="line"><span class="lineno">  378</span>        baseline_exts = [*filter(<span class="keywordtype">None</span>, {Path(baseline).suffix[1:]</div>
<div class="line"><span class="lineno">  379</span>                                        <span class="keywordflow">for</span> baseline <span class="keywordflow">in</span> baseline_images})]</div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">if</span> baseline_exts:</div>
<div class="line"><span class="lineno">  381</span>            <span class="keywordflow">if</span> extensions <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  382</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  383</span>                    <span class="stringliteral">&quot;When including extensions directly in &#39;baseline_images&#39;, &quot;</span></div>
<div class="line"><span class="lineno">  384</span>                    <span class="stringliteral">&quot;&#39;extensions&#39; cannot be set as well&quot;</span>)</div>
<div class="line"><span class="lineno">  385</span>            <span class="keywordflow">if</span> len(baseline_exts) &gt; 1:</div>
<div class="line"><span class="lineno">  386</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  387</span>                    <span class="stringliteral">&quot;When including extensions directly in &#39;baseline_images&#39;, &quot;</span></div>
<div class="line"><span class="lineno">  388</span>                    <span class="stringliteral">&quot;all baselines must share the same suffix&quot;</span>)</div>
<div class="line"><span class="lineno">  389</span>            extensions = baseline_exts</div>
<div class="line"><span class="lineno">  390</span>            baseline_images = [  <span class="comment"># Chop suffix out from baseline_images.</span></div>
<div class="line"><span class="lineno">  391</span>                Path(baseline).stem <span class="keywordflow">for</span> baseline <span class="keywordflow">in</span> baseline_images]</div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">if</span> extensions <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  393</span>        <span class="comment"># Default extensions to test, if not set via baseline_images.</span></div>
<div class="line"><span class="lineno">  394</span>        extensions = [<span class="stringliteral">&#39;png&#39;</span>, <span class="stringliteral">&#39;pdf&#39;</span>, <span class="stringliteral">&#39;svg&#39;</span>]</div>
<div class="line"><span class="lineno">  395</span>    <span class="keywordflow">if</span> savefig_kwarg <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  396</span>        savefig_kwarg = dict()  <span class="comment"># default no kwargs to savefig</span></div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordflow">if</span> sys.maxsize &lt;= 2**32:</div>
<div class="line"><span class="lineno">  398</span>        tol += 0.06</div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordflow">return</span> _pytest_image_comparison(</div>
<div class="line"><span class="lineno">  400</span>        baseline_images=baseline_images, extensions=extensions, tol=tol,</div>
<div class="line"><span class="lineno">  401</span>        freetype_version=freetype_version, remove_text=remove_text,</div>
<div class="line"><span class="lineno">  402</span>        savefig_kwargs=savefig_kwarg, style=style)</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adb05070afea33c5a0ccff735427a6398" name="adb05070afea33c5a0ccff735427a6398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb05070afea33c5a0ccff735427a6398">&#9670;&#160;</a></span>remove_ticks_and_titles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.testing.decorators.remove_ticks_and_titles </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>figure</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  119</span><span class="keyword">def </span>remove_ticks_and_titles(figure):</div>
<div class="line"><span class="lineno">  120</span>    figure.suptitle(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  121</span>    null_formatter = ticker.NullFormatter()</div>
<div class="line"><span class="lineno">  122</span>    <span class="keyword">def </span>remove_ticks(ax):</div>
<div class="line"><span class="lineno">  123</span>        <span class="stringliteral">&quot;&quot;&quot;Remove ticks in *ax* and all its child Axes.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  124</span>        ax.set_title(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  125</span>        ax.xaxis.set_major_formatter(null_formatter)</div>
<div class="line"><span class="lineno">  126</span>        ax.xaxis.set_minor_formatter(null_formatter)</div>
<div class="line"><span class="lineno">  127</span>        ax.yaxis.set_major_formatter(null_formatter)</div>
<div class="line"><span class="lineno">  128</span>        ax.yaxis.set_minor_formatter(null_formatter)</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  130</span>            ax.zaxis.set_major_formatter(null_formatter)</div>
<div class="line"><span class="lineno">  131</span>            ax.zaxis.set_minor_formatter(null_formatter)</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><span class="lineno">  133</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  134</span>        <span class="keywordflow">for</span> child <span class="keywordflow">in</span> ax.child_axes:</div>
<div class="line"><span class="lineno">  135</span>            remove_ticks(child)</div>
<div class="line"><span class="lineno">  136</span>    <span class="keywordflow">for</span> ax <span class="keywordflow">in</span> figure.get_axes():</div>
<div class="line"><span class="lineno">  137</span>        remove_ticks(ax)</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span><span class="preprocessor">@contextlib.contextmanager</span></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
