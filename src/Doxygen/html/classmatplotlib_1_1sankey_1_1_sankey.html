<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: matplotlib.sankey.Sankey Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacematplotlib.html">matplotlib</a></li><li class="navelem"><a class="el" href="namespacematplotlib_1_1sankey.html">sankey</a></li><li class="navelem"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html">Sankey</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classmatplotlib_1_1sankey_1_1_sankey-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">matplotlib.sankey.Sankey Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aec8eb6cf407ce0245e9d978788f52a51" id="r_aec8eb6cf407ce0245e9d978788f52a51"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#aec8eb6cf407ce0245e9d978788f52a51">__init__</a> (self, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#af65ce4aa30db6f202bab576b9e00371d">ax</a>=None, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ad64f7253858e72fe031d0695219f343e">scale</a>=1.0, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#aee04e3cc09339db7c145307e47f41f0c">unit</a>='', <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ab979bfec5e6e2aba5cc5838895d359bb">format</a>='%G', <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#aa1c1ab0bc8eb146c8a10e3ad8772d515">gap</a>=0.25, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a934e06a3529a1e439fa475f99a1f313e">radius</a>=0.1, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a9c51cb448b29baf758080fe073a38558">shoulder</a>=0.03, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ac292e7aafeff7a2fc449bcd1ea93d3b7">offset</a>=0.15, head_angle=100, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a4ebac29b6132b67aa72c312971feec58">margin</a>=0.4, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ad1f395cfb14ba7b70e7f5c5daab9f333">tolerance</a>=1e-6, **kwargs)</td></tr>
<tr class="separator:aec8eb6cf407ce0245e9d978788f52a51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97e2b6d6932d38bacc2ec705a5e84c26" id="r_a97e2b6d6932d38bacc2ec705a5e84c26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a97e2b6d6932d38bacc2ec705a5e84c26">add</a> (self, patchlabel='', flows=None, orientations=None, labels='', trunklength=1.0, pathlengths=0.25, prior=None, connect=(0, 0), rotation=0, **kwargs)</td></tr>
<tr class="separator:a97e2b6d6932d38bacc2ec705a5e84c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae0de0f9223379d26c2fe6401559ff7" id="r_acae0de0f9223379d26c2fe6401559ff7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#acae0de0f9223379d26c2fe6401559ff7">finish</a> (self)</td></tr>
<tr class="separator:acae0de0f9223379d26c2fe6401559ff7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a608277c3689602e9b049d12d85ecb79b" id="r_a608277c3689602e9b049d12d85ecb79b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a608277c3689602e9b049d12d85ecb79b">diagrams</a></td></tr>
<tr class="separator:a608277c3689602e9b049d12d85ecb79b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af65ce4aa30db6f202bab576b9e00371d" id="r_af65ce4aa30db6f202bab576b9e00371d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#af65ce4aa30db6f202bab576b9e00371d">ax</a></td></tr>
<tr class="separator:af65ce4aa30db6f202bab576b9e00371d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee04e3cc09339db7c145307e47f41f0c" id="r_aee04e3cc09339db7c145307e47f41f0c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#aee04e3cc09339db7c145307e47f41f0c">unit</a></td></tr>
<tr class="separator:aee04e3cc09339db7c145307e47f41f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab979bfec5e6e2aba5cc5838895d359bb" id="r_ab979bfec5e6e2aba5cc5838895d359bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ab979bfec5e6e2aba5cc5838895d359bb">format</a></td></tr>
<tr class="separator:ab979bfec5e6e2aba5cc5838895d359bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad64f7253858e72fe031d0695219f343e" id="r_ad64f7253858e72fe031d0695219f343e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ad64f7253858e72fe031d0695219f343e">scale</a></td></tr>
<tr class="separator:ad64f7253858e72fe031d0695219f343e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c1ab0bc8eb146c8a10e3ad8772d515" id="r_aa1c1ab0bc8eb146c8a10e3ad8772d515"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#aa1c1ab0bc8eb146c8a10e3ad8772d515">gap</a></td></tr>
<tr class="separator:aa1c1ab0bc8eb146c8a10e3ad8772d515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934e06a3529a1e439fa475f99a1f313e" id="r_a934e06a3529a1e439fa475f99a1f313e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a934e06a3529a1e439fa475f99a1f313e">radius</a></td></tr>
<tr class="separator:a934e06a3529a1e439fa475f99a1f313e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c51cb448b29baf758080fe073a38558" id="r_a9c51cb448b29baf758080fe073a38558"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a9c51cb448b29baf758080fe073a38558">shoulder</a></td></tr>
<tr class="separator:a9c51cb448b29baf758080fe073a38558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac292e7aafeff7a2fc449bcd1ea93d3b7" id="r_ac292e7aafeff7a2fc449bcd1ea93d3b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ac292e7aafeff7a2fc449bcd1ea93d3b7">offset</a></td></tr>
<tr class="separator:ac292e7aafeff7a2fc449bcd1ea93d3b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ebac29b6132b67aa72c312971feec58" id="r_a4ebac29b6132b67aa72c312971feec58"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a4ebac29b6132b67aa72c312971feec58">margin</a></td></tr>
<tr class="separator:a4ebac29b6132b67aa72c312971feec58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9178b93aeeabdfab7d2ff85cabd08fc8" id="r_a9178b93aeeabdfab7d2ff85cabd08fc8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a9178b93aeeabdfab7d2ff85cabd08fc8">pitch</a></td></tr>
<tr class="separator:a9178b93aeeabdfab7d2ff85cabd08fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f395cfb14ba7b70e7f5c5daab9f333" id="r_ad1f395cfb14ba7b70e7f5c5daab9f333"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ad1f395cfb14ba7b70e7f5c5daab9f333">tolerance</a></td></tr>
<tr class="separator:ad1f395cfb14ba7b70e7f5c5daab9f333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0a4d5ab19975292db62bea2593bcc6" id="r_acf0a4d5ab19975292db62bea2593bcc6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#acf0a4d5ab19975292db62bea2593bcc6">extent</a></td></tr>
<tr class="separator:acf0a4d5ab19975292db62bea2593bcc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a52d3fc9981b9c7afa1f5be095fe64ac2" id="r_a52d3fc9981b9c7afa1f5be095fe64ac2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a52d3fc9981b9c7afa1f5be095fe64ac2">_arc</a> (self, quadrant=0, cw=True, <a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a934e06a3529a1e439fa475f99a1f313e">radius</a>=1, center=(0, 0))</td></tr>
<tr class="separator:a52d3fc9981b9c7afa1f5be095fe64ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad553feaae981099cac3b0abbb302e642" id="r_ad553feaae981099cac3b0abbb302e642"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ad553feaae981099cac3b0abbb302e642">_add_input</a> (self, path, angle, flow, length)</td></tr>
<tr class="separator:ad553feaae981099cac3b0abbb302e642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7bd6e21587a3d9cb8f915e6843ea4cb" id="r_ab7bd6e21587a3d9cb8f915e6843ea4cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#ab7bd6e21587a3d9cb8f915e6843ea4cb">_add_output</a> (self, path, angle, flow, length)</td></tr>
<tr class="separator:ab7bd6e21587a3d9cb8f915e6843ea4cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26acaf3f3495972a778c23b0aae0151a" id="r_a26acaf3f3495972a778c23b0aae0151a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmatplotlib_1_1sankey_1_1_sankey.html#a26acaf3f3495972a778c23b0aae0151a">_revert</a> (self, path, first_action=<a class="el" href="classmatplotlib_1_1path_1_1_path.html#af32d8730490de4520b4ef5d4b4a85a96">Path.LINETO</a>)</td></tr>
<tr class="separator:a26acaf3f3495972a778c23b0aae0151a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Sankey diagram.

  Sankey diagrams are a specific type of flow diagram, in which
  the width of the arrows is shown proportionally to the flow
  quantity.  They are typically used to visualize energy or
  material or cost transfers between processes.
  `Wikipedia (6/1/2011) &lt;https://en.wikipedia.org/wiki/Sankey_diagram&gt;`_</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aec8eb6cf407ce0245e9d978788f52a51" name="aec8eb6cf407ce0245e9d978788f52a51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec8eb6cf407ce0245e9d978788f52a51">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ax</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scale</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>unit</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>format</em> = <code>'%G'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gap</em> = <code>0.25</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>radius</em> = <code>0.1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shoulder</em> = <code>0.03</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>offset</em> = <code>0.15</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>head_angle</em> = <code>100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>margin</em> = <code>0.4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tolerance</em> = <code>1e-6</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create a new Sankey instance.

The optional arguments listed below are applied to all subdiagrams so
that there is consistent alignment and formatting.

In order to draw a complex Sankey diagram, create an instance of
:class:`Sankey` by calling it without any kwargs::

    sankey = Sankey()

Then add simple Sankey sub-diagrams::

    sankey.add() # 1
    sankey.add() # 2
    #...
    sankey.add() # n

Finally, create the full diagram::

    sankey.finish()

Or, instead, simply daisy-chain those calls::

    Sankey().add().add...  .add().finish()

Other Parameters
----------------
ax : `~.axes.Axes`
    Axes onto which the data should be plotted.  If *ax* isn't
    provided, new Axes will be created.
scale : float
    Scaling factor for the flows.  *scale* sizes the width of the paths
    in order to maintain proper layout.  The same scale is applied to
    all subdiagrams.  The value should be chosen such that the product
    of the scale and the sum of the inputs is approximately 1.0 (and
    the product of the scale and the sum of the outputs is
    approximately -1.0).
unit : str
    The physical unit associated with the flow quantities.  If *unit*
    is None, then none of the quantities are labeled.
format : str or callable
    A Python number formatting string or callable used to label the
    flows with their quantities (i.e., a number times a unit, where the
    unit is given). If a format string is given, the label will be
    ``format % quantity``. If a callable is given, it will be called
    with ``quantity`` as an argument.
gap : float
    Space between paths that break in/break away to/from the top or
    bottom.
radius : float
    Inner radius of the vertical paths.
shoulder : float
    Size of the shoulders of output arrows.
offset : float
    Text offset (from the dip or tip of the arrow).
head_angle : float
    Angle, in degrees, of the arrow heads (and negative of the angle of
    the tails).
margin : float
    Minimum space between Sankey outlines and the edge of the plot
    area.
tolerance : float
    Acceptable maximum of the magnitude of the sum of flows.  The
    magnitude of the sum of connected flows cannot be greater than
    *tolerance*.
**kwargs
    Any additional keyword arguments will be passed to :meth:`add`,
    which will create the first subdiagram.

See Also
--------
Sankey.add
Sankey.finish

Examples
--------
.. plot:: gallery/specialty_plots/sankey_basics.py
</pre> <div class="fragment"><div class="line"><span class="lineno">   44</span>                 margin=0.4, tolerance=1e-6, **kwargs):</div>
<div class="line"><span class="lineno">   45</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral">        Create a new Sankey instance.</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">        The optional arguments listed below are applied to all subdiagrams so</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">        that there is consistent alignment and formatting.</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">        In order to draw a complex Sankey diagram, create an instance of</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">        :class:`Sankey` by calling it without any kwargs::</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">            sankey = Sankey()</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">        Then add simple Sankey sub-diagrams::</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">            sankey.add() # 1</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">            sankey.add() # 2</span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">            #...</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">            sankey.add() # n</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">        Finally, create the full diagram::</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">            sankey.finish()</span></div>
<div class="line"><span class="lineno">   66</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">        Or, instead, simply daisy-chain those calls::</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">            Sankey().add().add...  .add().finish()</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral">        Other Parameters</span></div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral">        ----------------</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral">        ax : `~.axes.Axes`</span></div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral">            Axes onto which the data should be plotted.  If *ax* isn&#39;t</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">            provided, new Axes will be created.</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">        scale : float</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">            Scaling factor for the flows.  *scale* sizes the width of the paths</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">            in order to maintain proper layout.  The same scale is applied to</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">            all subdiagrams.  The value should be chosen such that the product</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">            of the scale and the sum of the inputs is approximately 1.0 (and</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">            the product of the scale and the sum of the outputs is</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">            approximately -1.0).</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">        unit : str</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">            The physical unit associated with the flow quantities.  If *unit*</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">            is None, then none of the quantities are labeled.</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">        format : str or callable</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">            A Python number formatting string or callable used to label the</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">            flows with their quantities (i.e., a number times a unit, where the</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">            unit is given). If a format string is given, the label will be</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">            ``format % quantity``. If a callable is given, it will be called</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">            with ``quantity`` as an argument.</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">        gap : float</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral">            Space between paths that break in/break away to/from the top or</span></div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">            bottom.</span></div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">        radius : float</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral">            Inner radius of the vertical paths.</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral">        shoulder : float</span></div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">            Size of the shoulders of output arrows.</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">        offset : float</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">            Text offset (from the dip or tip of the arrow).</span></div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral">        head_angle : float</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">            Angle, in degrees, of the arrow heads (and negative of the angle of</span></div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">            the tails).</span></div>
<div class="line"><span class="lineno">  104</span><span class="stringliteral">        margin : float</span></div>
<div class="line"><span class="lineno">  105</span><span class="stringliteral">            Minimum space between Sankey outlines and the edge of the plot</span></div>
<div class="line"><span class="lineno">  106</span><span class="stringliteral">            area.</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral">        tolerance : float</span></div>
<div class="line"><span class="lineno">  108</span><span class="stringliteral">            Acceptable maximum of the magnitude of the sum of flows.  The</span></div>
<div class="line"><span class="lineno">  109</span><span class="stringliteral">            magnitude of the sum of connected flows cannot be greater than</span></div>
<div class="line"><span class="lineno">  110</span><span class="stringliteral">            *tolerance*.</span></div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">        **kwargs</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral">            Any additional keyword arguments will be passed to :meth:`add`,</span></div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">            which will create the first subdiagram.</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">        See Also</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">        --------</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">        Sankey.add</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral">        Sankey.finish</span></div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">        Examples</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">        --------</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">        .. plot:: gallery/specialty_plots/sankey_basics.py</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  124</span>        <span class="comment"># Check the arguments.</span></div>
<div class="line"><span class="lineno">  125</span>        <span class="keywordflow">if</span> gap &lt; 0:</div>
<div class="line"><span class="lineno">  126</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  127</span>                <span class="stringliteral">&quot;&#39;gap&#39; is negative, which is not allowed because it would &quot;</span></div>
<div class="line"><span class="lineno">  128</span>                <span class="stringliteral">&quot;cause the paths to overlap&quot;</span>)</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">if</span> radius &gt; gap:</div>
<div class="line"><span class="lineno">  130</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  131</span>                <span class="stringliteral">&quot;&#39;radius&#39; is greater than &#39;gap&#39;, which is not allowed because &quot;</span></div>
<div class="line"><span class="lineno">  132</span>                <span class="stringliteral">&quot;it would cause the paths to overlap&quot;</span>)</div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">if</span> head_angle &lt; 0:</div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  135</span>                <span class="stringliteral">&quot;&#39;head_angle&#39; is negative, which is not allowed because it &quot;</span></div>
<div class="line"><span class="lineno">  136</span>                <span class="stringliteral">&quot;would cause inputs to look like outputs and vice versa&quot;</span>)</div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">if</span> tolerance &lt; 0:</div>
<div class="line"><span class="lineno">  138</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  139</span>                <span class="stringliteral">&quot;&#39;tolerance&#39; is negative, but it must be a magnitude&quot;</span>)</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>        <span class="comment"># Create axes if necessary.</span></div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">if</span> ax <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  143</span>            <span class="keyword">import</span> <a class="code hl_namespace" href="namespacematplotlib_1_1pyplot.html">matplotlib.pyplot</a> <span class="keyword">as</span> plt</div>
<div class="line"><span class="lineno">  144</span>            fig = plt.figure()</div>
<div class="line"><span class="lineno">  145</span>            ax = fig.add_subplot(1, 1, 1, xticks=[], yticks=[])</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>        self.diagrams = []</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>        <span class="comment"># Store the inputs.</span></div>
<div class="line"><span class="lineno">  150</span>        self.ax = ax</div>
<div class="line"><span class="lineno">  151</span>        self.unit = unit</div>
<div class="line"><span class="lineno">  152</span>        self.format = format</div>
<div class="line"><span class="lineno">  153</span>        self.scale = scale</div>
<div class="line"><span class="lineno">  154</span>        self.gap = gap</div>
<div class="line"><span class="lineno">  155</span>        self.radius = radius</div>
<div class="line"><span class="lineno">  156</span>        self.shoulder = shoulder</div>
<div class="line"><span class="lineno">  157</span>        self.offset = offset</div>
<div class="line"><span class="lineno">  158</span>        self.margin = margin</div>
<div class="line"><span class="lineno">  159</span>        self.pitch = np.tan(np.pi * (1 - head_angle / 180.0) / 2.0)</div>
<div class="line"><span class="lineno">  160</span>        self.tolerance = tolerance</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>        <span class="comment"># Initialize the vertices of tight box around the diagram(s).</span></div>
<div class="line"><span class="lineno">  163</span>        self.extent = np.array((np.inf, -np.inf, np.inf, -np.inf))</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>        <span class="comment"># If there are any kwargs, create the first subdiagram.</span></div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">if</span> len(kwargs):</div>
<div class="line"><span class="lineno">  167</span>            self.add(**kwargs)</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="ttc" id="anamespacematplotlib_1_1pyplot_html"><div class="ttname"><a href="namespacematplotlib_1_1pyplot.html">matplotlib.pyplot</a></div><div class="ttdef"><b>Definition</b> pyplot.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad553feaae981099cac3b0abbb302e642" name="ad553feaae981099cac3b0abbb302e642"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad553feaae981099cac3b0abbb302e642">&#9670;&#160;</a></span>_add_input()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey._add_input </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Add an input to a path and return its tip and label locations.
</pre> <div class="fragment"><div class="line"><span class="lineno">  226</span>    <span class="keyword">def </span>_add_input(self, path, angle, flow, length):</div>
<div class="line"><span class="lineno">  227</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral">        Add an input to a path and return its tip and label locations.</span></div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">if</span> angle <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  231</span>            <span class="keywordflow">return</span> [0, 0], [0, 0]</div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  233</span>            x, y = path[-1][1]  <span class="comment"># Use the last point as a reference.</span></div>
<div class="line"><span class="lineno">  234</span>            dipdepth = (flow / 2) * self.pitch</div>
<div class="line"><span class="lineno">  235</span>            <span class="keywordflow">if</span> angle == RIGHT:</div>
<div class="line"><span class="lineno">  236</span>                x -= length</div>
<div class="line"><span class="lineno">  237</span>                dip = [x + dipdepth, y + flow / 2.0]</div>
<div class="line"><span class="lineno">  238</span>                path.extend([(Path.LINETO, [x, y]),</div>
<div class="line"><span class="lineno">  239</span>                             (Path.LINETO, dip),</div>
<div class="line"><span class="lineno">  240</span>                             (Path.LINETO, [x, y + flow]),</div>
<div class="line"><span class="lineno">  241</span>                             (Path.LINETO, [x + self.gap, y + flow])])</div>
<div class="line"><span class="lineno">  242</span>                label_location = [dip[0] - self.offset, dip[1]]</div>
<div class="line"><span class="lineno">  243</span>            <span class="keywordflow">else</span>:  <span class="comment"># Vertical</span></div>
<div class="line"><span class="lineno">  244</span>                x -= self.gap</div>
<div class="line"><span class="lineno">  245</span>                <span class="keywordflow">if</span> angle == UP:</div>
<div class="line"><span class="lineno">  246</span>                    sign = 1</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  248</span>                    sign = -1</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span>                dip = [x - flow / 2, y - sign * (length - dipdepth)]</div>
<div class="line"><span class="lineno">  251</span>                <span class="keywordflow">if</span> angle == DOWN:</div>
<div class="line"><span class="lineno">  252</span>                    quadrant = 2</div>
<div class="line"><span class="lineno">  253</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  254</span>                    quadrant = 1</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>                <span class="comment"># Inner arc isn&#39;t needed if inner radius is zero</span></div>
<div class="line"><span class="lineno">  257</span>                <span class="keywordflow">if</span> self.radius:</div>
<div class="line"><span class="lineno">  258</span>                    path.extend(self._arc(quadrant=quadrant,</div>
<div class="line"><span class="lineno">  259</span>                                          cw=angle == UP,</div>
<div class="line"><span class="lineno">  260</span>                                          radius=self.radius,</div>
<div class="line"><span class="lineno">  261</span>                                          center=(x + self.radius,</div>
<div class="line"><span class="lineno">  262</span>                                                  y - sign * self.radius)))</div>
<div class="line"><span class="lineno">  263</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  264</span>                    path.append((Path.LINETO, [x, y]))</div>
<div class="line"><span class="lineno">  265</span>                path.extend([(Path.LINETO, [x, y - sign * length]),</div>
<div class="line"><span class="lineno">  266</span>                             (Path.LINETO, dip),</div>
<div class="line"><span class="lineno">  267</span>                             (Path.LINETO, [x - flow, y - sign * length])])</div>
<div class="line"><span class="lineno">  268</span>                path.extend(self._arc(quadrant=quadrant,</div>
<div class="line"><span class="lineno">  269</span>                                      cw=angle == DOWN,</div>
<div class="line"><span class="lineno">  270</span>                                      radius=flow + self.radius,</div>
<div class="line"><span class="lineno">  271</span>                                      center=(x + self.radius,</div>
<div class="line"><span class="lineno">  272</span>                                              y - sign * self.radius)))</div>
<div class="line"><span class="lineno">  273</span>                path.append((Path.LINETO, [x - flow, y + sign * flow]))</div>
<div class="line"><span class="lineno">  274</span>                label_location = [dip[0], dip[1] - sign * self.offset]</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>            <span class="keywordflow">return</span> dip, label_location</div>
<div class="line"><span class="lineno">  277</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7bd6e21587a3d9cb8f915e6843ea4cb" name="ab7bd6e21587a3d9cb8f915e6843ea4cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7bd6e21587a3d9cb8f915e6843ea4cb">&#9670;&#160;</a></span>_add_output()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey._add_output </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Append an output to a path and return its tip and label locations.

.. note:: *flow* is negative for an output.
</pre> <div class="fragment"><div class="line"><span class="lineno">  278</span>    <span class="keyword">def </span>_add_output(self, path, angle, flow, length):</div>
<div class="line"><span class="lineno">  279</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  280</span><span class="stringliteral">        Append an output to a path and return its tip and label locations.</span></div>
<div class="line"><span class="lineno">  281</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  282</span><span class="stringliteral">        .. note:: *flow* is negative for an output.</span></div>
<div class="line"><span class="lineno">  283</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">if</span> angle <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">return</span> [0, 0], [0, 0]</div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  287</span>            x, y = path[-1][1]  <span class="comment"># Use the last point as a reference.</span></div>
<div class="line"><span class="lineno">  288</span>            tipheight = (self.shoulder - flow / 2) * self.pitch</div>
<div class="line"><span class="lineno">  289</span>            <span class="keywordflow">if</span> angle == RIGHT:</div>
<div class="line"><span class="lineno">  290</span>                x += length</div>
<div class="line"><span class="lineno">  291</span>                tip = [x + tipheight, y + flow / 2.0]</div>
<div class="line"><span class="lineno">  292</span>                path.extend([(Path.LINETO, [x, y]),</div>
<div class="line"><span class="lineno">  293</span>                             (Path.LINETO, [x, y + self.shoulder]),</div>
<div class="line"><span class="lineno">  294</span>                             (Path.LINETO, tip),</div>
<div class="line"><span class="lineno">  295</span>                             (Path.LINETO, [x, y - self.shoulder + flow]),</div>
<div class="line"><span class="lineno">  296</span>                             (Path.LINETO, [x, y + flow]),</div>
<div class="line"><span class="lineno">  297</span>                             (Path.LINETO, [x - self.gap, y + flow])])</div>
<div class="line"><span class="lineno">  298</span>                label_location = [tip[0] + self.offset, tip[1]]</div>
<div class="line"><span class="lineno">  299</span>            <span class="keywordflow">else</span>:  <span class="comment"># Vertical</span></div>
<div class="line"><span class="lineno">  300</span>                x += self.gap</div>
<div class="line"><span class="lineno">  301</span>                <span class="keywordflow">if</span> angle == UP:</div>
<div class="line"><span class="lineno">  302</span>                    sign, quadrant = 1, 3</div>
<div class="line"><span class="lineno">  303</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  304</span>                    sign, quadrant = -1, 0</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>                tip = [x - flow / 2.0, y + sign * (length + tipheight)]</div>
<div class="line"><span class="lineno">  307</span>                <span class="comment"># Inner arc isn&#39;t needed if inner radius is zero</span></div>
<div class="line"><span class="lineno">  308</span>                <span class="keywordflow">if</span> self.radius:</div>
<div class="line"><span class="lineno">  309</span>                    path.extend(self._arc(quadrant=quadrant,</div>
<div class="line"><span class="lineno">  310</span>                                          cw=angle == UP,</div>
<div class="line"><span class="lineno">  311</span>                                          radius=self.radius,</div>
<div class="line"><span class="lineno">  312</span>                                          center=(x - self.radius,</div>
<div class="line"><span class="lineno">  313</span>                                                  y + sign * self.radius)))</div>
<div class="line"><span class="lineno">  314</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  315</span>                    path.append((Path.LINETO, [x, y]))</div>
<div class="line"><span class="lineno">  316</span>                path.extend([(Path.LINETO, [x, y + sign * length]),</div>
<div class="line"><span class="lineno">  317</span>                             (Path.LINETO, [x - self.shoulder,</div>
<div class="line"><span class="lineno">  318</span>                                            y + sign * length]),</div>
<div class="line"><span class="lineno">  319</span>                             (Path.LINETO, tip),</div>
<div class="line"><span class="lineno">  320</span>                             (Path.LINETO, [x + self.shoulder - flow,</div>
<div class="line"><span class="lineno">  321</span>                                            y + sign * length]),</div>
<div class="line"><span class="lineno">  322</span>                             (Path.LINETO, [x - flow, y + sign * length])])</div>
<div class="line"><span class="lineno">  323</span>                path.extend(self._arc(quadrant=quadrant,</div>
<div class="line"><span class="lineno">  324</span>                                      cw=angle == DOWN,</div>
<div class="line"><span class="lineno">  325</span>                                      radius=self.radius - flow,</div>
<div class="line"><span class="lineno">  326</span>                                      center=(x - self.radius,</div>
<div class="line"><span class="lineno">  327</span>                                              y + sign * self.radius)))</div>
<div class="line"><span class="lineno">  328</span>                path.append((Path.LINETO, [x - flow, y + sign * flow]))</div>
<div class="line"><span class="lineno">  329</span>                label_location = [tip[0], tip[1] + sign * self.offset]</div>
<div class="line"><span class="lineno">  330</span>            <span class="keywordflow">return</span> tip, label_location</div>
<div class="line"><span class="lineno">  331</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a52d3fc9981b9c7afa1f5be095fe64ac2" name="a52d3fc9981b9c7afa1f5be095fe64ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52d3fc9981b9c7afa1f5be095fe64ac2">&#9670;&#160;</a></span>_arc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey._arc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>quadrant</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cw</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>radius</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>center</em> = <code>(0,&#160;0)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Return the codes and vertices for a rotated, scaled, and translated
90 degree arc.

Other Parameters
----------------
quadrant : {0, 1, 2, 3}, default: 0
    Uses 0-based indexing (0, 1, 2, or 3).
cw : bool, default: True
    If True, the arc vertices are produced clockwise; counter-clockwise
    otherwise.
radius : float, default: 1
    The radius of the arc.
center : (float, float), default: (0, 0)
    (x, y) tuple of the arc's center.
</pre> <div class="fragment"><div class="line"><span class="lineno">  169</span>    <span class="keyword">def </span>_arc(self, quadrant=0, cw=True, radius=1, center=(0, 0)):</div>
<div class="line"><span class="lineno">  170</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral">        Return the codes and vertices for a rotated, scaled, and translated</span></div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">        90 degree arc.</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">        Other Parameters</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">        ----------------</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">        quadrant : {0, 1, 2, 3}, default: 0</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">            Uses 0-based indexing (0, 1, 2, or 3).</span></div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral">        cw : bool, default: True</span></div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral">            If True, the arc vertices are produced clockwise; counter-clockwise</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral">            otherwise.</span></div>
<div class="line"><span class="lineno">  181</span><span class="stringliteral">        radius : float, default: 1</span></div>
<div class="line"><span class="lineno">  182</span><span class="stringliteral">            The radius of the arc.</span></div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">        center : (float, float), default: (0, 0)</span></div>
<div class="line"><span class="lineno">  184</span><span class="stringliteral">            (x, y) tuple of the arc&#39;s center.</span></div>
<div class="line"><span class="lineno">  185</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  186</span>        <span class="comment"># Note:  It would be possible to use matplotlib&#39;s transforms to rotate,</span></div>
<div class="line"><span class="lineno">  187</span>        <span class="comment"># scale, and translate the arc, but since the angles are discrete,</span></div>
<div class="line"><span class="lineno">  188</span>        <span class="comment"># it&#39;s just as easy and maybe more efficient to do it here.</span></div>
<div class="line"><span class="lineno">  189</span>        ARC_CODES = [Path.LINETO,</div>
<div class="line"><span class="lineno">  190</span>                     Path.CURVE4,</div>
<div class="line"><span class="lineno">  191</span>                     Path.CURVE4,</div>
<div class="line"><span class="lineno">  192</span>                     Path.CURVE4,</div>
<div class="line"><span class="lineno">  193</span>                     Path.CURVE4,</div>
<div class="line"><span class="lineno">  194</span>                     Path.CURVE4,</div>
<div class="line"><span class="lineno">  195</span>                     Path.CURVE4]</div>
<div class="line"><span class="lineno">  196</span>        <span class="comment"># Vertices of a cubic Bezier curve approximating a 90 deg arc</span></div>
<div class="line"><span class="lineno">  197</span>        <span class="comment"># These can be determined by Path.arc(0, 90).</span></div>
<div class="line"><span class="lineno">  198</span>        ARC_VERTICES = np.array([[1.00000000e+00, 0.00000000e+00],</div>
<div class="line"><span class="lineno">  199</span>                                 [1.00000000e+00, 2.65114773e-01],</div>
<div class="line"><span class="lineno">  200</span>                                 [8.94571235e-01, 5.19642327e-01],</div>
<div class="line"><span class="lineno">  201</span>                                 [7.07106781e-01, 7.07106781e-01],</div>
<div class="line"><span class="lineno">  202</span>                                 [5.19642327e-01, 8.94571235e-01],</div>
<div class="line"><span class="lineno">  203</span>                                 [2.65114773e-01, 1.00000000e+00],</div>
<div class="line"><span class="lineno">  204</span>                                 <span class="comment"># Insignificant</span></div>
<div class="line"><span class="lineno">  205</span>                                 <span class="comment"># [6.12303177e-17, 1.00000000e+00]])</span></div>
<div class="line"><span class="lineno">  206</span>                                 [0.00000000e+00, 1.00000000e+00]])</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> quadrant <span class="keywordflow">in</span> (0, 2):</div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">if</span> cw:</div>
<div class="line"><span class="lineno">  209</span>                vertices = ARC_VERTICES</div>
<div class="line"><span class="lineno">  210</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  211</span>                vertices = ARC_VERTICES[:, ::-1]  <span class="comment"># Swap x and y.</span></div>
<div class="line"><span class="lineno">  212</span>        <span class="keywordflow">else</span>:  <span class="comment"># 1, 3</span></div>
<div class="line"><span class="lineno">  213</span>            <span class="comment"># Negate x.</span></div>
<div class="line"><span class="lineno">  214</span>            <span class="keywordflow">if</span> cw:</div>
<div class="line"><span class="lineno">  215</span>                <span class="comment"># Swap x and y.</span></div>
<div class="line"><span class="lineno">  216</span>                vertices = np.column_stack((-ARC_VERTICES[:, 1],</div>
<div class="line"><span class="lineno">  217</span>                                             ARC_VERTICES[:, 0]))</div>
<div class="line"><span class="lineno">  218</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  219</span>                vertices = np.column_stack((-ARC_VERTICES[:, 0],</div>
<div class="line"><span class="lineno">  220</span>                                             ARC_VERTICES[:, 1]))</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span> quadrant &gt; 1:</div>
<div class="line"><span class="lineno">  222</span>            radius = -radius  <span class="comment"># Rotate 180 deg.</span></div>
<div class="line"><span class="lineno">  223</span>        <span class="keywordflow">return</span> list(zip(ARC_CODES, radius * vertices +</div>
<div class="line"><span class="lineno">  224</span>                        np.tile(center, (ARC_VERTICES.shape[0], 1))))</div>
<div class="line"><span class="lineno">  225</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a26acaf3f3495972a778c23b0aae0151a" name="a26acaf3f3495972a778c23b0aae0151a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26acaf3f3495972a778c23b0aae0151a">&#9670;&#160;</a></span>_revert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey._revert </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>first_action</em> = <code><a class="el" href="classmatplotlib_1_1path_1_1_path.html#af32d8730490de4520b4ef5d4b4a85a96">Path.LINETO</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">A path is not simply reversible by path[::-1] since the code
specifies an action to take from the **previous** point.
</pre> <div class="fragment"><div class="line"><span class="lineno">  332</span>    <span class="keyword">def </span>_revert(self, path, first_action=Path.LINETO):</div>
<div class="line"><span class="lineno">  333</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  334</span><span class="stringliteral">        A path is not simply reversible by path[::-1] since the code</span></div>
<div class="line"><span class="lineno">  335</span><span class="stringliteral">        specifies an action to take from the **previous** point.</span></div>
<div class="line"><span class="lineno">  336</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  337</span>        reverse_path = []</div>
<div class="line"><span class="lineno">  338</span>        next_code = first_action</div>
<div class="line"><span class="lineno">  339</span>        <span class="keywordflow">for</span> code, position <span class="keywordflow">in</span> path[::-1]:</div>
<div class="line"><span class="lineno">  340</span>            reverse_path.append((next_code, position))</div>
<div class="line"><span class="lineno">  341</span>            next_code = code</div>
<div class="line"><span class="lineno">  342</span>        <span class="keywordflow">return</span> reverse_path</div>
<div class="line"><span class="lineno">  343</span>        <span class="comment"># This might be more efficient, but it fails because &#39;tuple&#39; object</span></div>
<div class="line"><span class="lineno">  344</span>        <span class="comment"># doesn&#39;t support item assignment:</span></div>
<div class="line"><span class="lineno">  345</span>        <span class="comment"># path[1] = path[1][-1:0:-1]</span></div>
<div class="line"><span class="lineno">  346</span>        <span class="comment"># path[1][0] = first_action</span></div>
<div class="line"><span class="lineno">  347</span>        <span class="comment"># path[2] = path[2][::-1]</span></div>
<div class="line"><span class="lineno">  348</span>        <span class="comment"># return path</span></div>
<div class="line"><span class="lineno">  349</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a97e2b6d6932d38bacc2ec705a5e84c26" name="a97e2b6d6932d38bacc2ec705a5e84c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97e2b6d6932d38bacc2ec705a5e84c26">&#9670;&#160;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.add </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>patchlabel</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flows</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>orientations</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>labels</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>trunklength</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pathlengths</em> = <code>0.25</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prior</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>connect</em> = <code>(0,&#160;0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rotation</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add a simple Sankey diagram with flows at the same hierarchical level.

Parameters
----------
patchlabel : str
    Label to be placed at the center of the diagram.
    Note that *label* (not *patchlabel*) can be passed as keyword
    argument to create an entry in the legend.

flows : list of float
    Array of flow values.  By convention, inputs are positive and
    outputs are negative.

    Flows are placed along the top of the diagram from the inside out
    in order of their index within *flows*.  They are placed along the
    sides of the diagram from the top down and along the bottom from
    the outside in.

    If the sum of the inputs and outputs is
    nonzero, the discrepancy will appear as a cubic Bezier curve along
    the top and bottom edges of the trunk.

orientations : list of {-1, 0, 1}
    List of orientations of the flows (or a single orientation to be
    used for all flows).  Valid values are 0 (inputs from
    the left, outputs to the right), 1 (from and to the top) or -1
    (from and to the bottom).

labels : list of (str or None)
    List of labels for the flows (or a single label to be used for all
    flows).  Each label may be *None* (no label), or a labeling string.
    If an entry is a (possibly empty) string, then the quantity for the
    corresponding flow will be shown below the string.  However, if
    the *unit* of the main diagram is None, then quantities are never
    shown, regardless of the value of this argument.

trunklength : float
    Length between the bases of the input and output groups (in
    data-space units).

pathlengths : list of float
    List of lengths of the vertical arrows before break-in or after
    break-away.  If a single value is given, then it will be applied to
    the first (inside) paths on the top and bottom, and the length of
    all other arrows will be justified accordingly.  The *pathlengths*
    are not applied to the horizontal inputs and outputs.

prior : int
    Index of the prior diagram to which this diagram should be
    connected.

connect : (int, int)
    A (prior, this) tuple indexing the flow of the prior diagram and
    the flow of this diagram which should be connected.  If this is the
    first diagram or *prior* is *None*, *connect* will be ignored.

rotation : float
    Angle of rotation of the diagram in degrees.  The interpretation of
    the *orientations* argument will be rotated accordingly (e.g., if
    *rotation* == 90, an *orientations* entry of 1 means to/from the
    left).  *rotation* is ignored if this diagram is connected to an
    existing one (using *prior* and *connect*).

Returns
-------
Sankey
    The current `.Sankey` instance.

Other Parameters
----------------
**kwargs
   Additional keyword arguments set `matplotlib.patches.PathPatch`
   properties, listed below.  For example, one may want to use
   ``fill=False`` or ``label="A legend entry"``.

%(Patch:kwdoc)s

See Also
--------
Sankey.finish
</pre> <div class="fragment"><div class="line"><span class="lineno">  353</span>            rotation=0, **kwargs):</div>
<div class="line"><span class="lineno">  354</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral">        Add a simple Sankey diagram with flows at the same hierarchical level.</span></div>
<div class="line"><span class="lineno">  356</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral">        ----------</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">        patchlabel : str</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">            Label to be placed at the center of the diagram.</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">            Note that *label* (not *patchlabel*) can be passed as keyword</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">            argument to create an entry in the legend.</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">        flows : list of float</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">            Array of flow values.  By convention, inputs are positive and</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">            outputs are negative.</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">            Flows are placed along the top of the diagram from the inside out</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">            in order of their index within *flows*.  They are placed along the</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">            sides of the diagram from the top down and along the bottom from</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">            the outside in.</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">            If the sum of the inputs and outputs is</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">            nonzero, the discrepancy will appear as a cubic Bezier curve along</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">            the top and bottom edges of the trunk.</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">        orientations : list of {-1, 0, 1}</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">            List of orientations of the flows (or a single orientation to be</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral">            used for all flows).  Valid values are 0 (inputs from</span></div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral">            the left, outputs to the right), 1 (from and to the top) or -1</span></div>
<div class="line"><span class="lineno">  381</span><span class="stringliteral">            (from and to the bottom).</span></div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  383</span><span class="stringliteral">        labels : list of (str or None)</span></div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">            List of labels for the flows (or a single label to be used for all</span></div>
<div class="line"><span class="lineno">  385</span><span class="stringliteral">            flows).  Each label may be *None* (no label), or a labeling string.</span></div>
<div class="line"><span class="lineno">  386</span><span class="stringliteral">            If an entry is a (possibly empty) string, then the quantity for the</span></div>
<div class="line"><span class="lineno">  387</span><span class="stringliteral">            corresponding flow will be shown below the string.  However, if</span></div>
<div class="line"><span class="lineno">  388</span><span class="stringliteral">            the *unit* of the main diagram is None, then quantities are never</span></div>
<div class="line"><span class="lineno">  389</span><span class="stringliteral">            shown, regardless of the value of this argument.</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral">        trunklength : float</span></div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">            Length between the bases of the input and output groups (in</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">            data-space units).</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">        pathlengths : list of float</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">            List of lengths of the vertical arrows before break-in or after</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">            break-away.  If a single value is given, then it will be applied to</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral">            the first (inside) paths on the top and bottom, and the length of</span></div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">            all other arrows will be justified accordingly.  The *pathlengths*</span></div>
<div class="line"><span class="lineno">  400</span><span class="stringliteral">            are not applied to the horizontal inputs and outputs.</span></div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral">        prior : int</span></div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral">            Index of the prior diagram to which this diagram should be</span></div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral">            connected.</span></div>
<div class="line"><span class="lineno">  405</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  406</span><span class="stringliteral">        connect : (int, int)</span></div>
<div class="line"><span class="lineno">  407</span><span class="stringliteral">            A (prior, this) tuple indexing the flow of the prior diagram and</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral">            the flow of this diagram which should be connected.  If this is the</span></div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">            first diagram or *prior* is *None*, *connect* will be ignored.</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">        rotation : float</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral">            Angle of rotation of the diagram in degrees.  The interpretation of</span></div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral">            the *orientations* argument will be rotated accordingly (e.g., if</span></div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">            *rotation* == 90, an *orientations* entry of 1 means to/from the</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral">            left).  *rotation* is ignored if this diagram is connected to an</span></div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral">            existing one (using *prior* and *connect*).</span></div>
<div class="line"><span class="lineno">  417</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral">        Returns</span></div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">        -------</span></div>
<div class="line"><span class="lineno">  420</span><span class="stringliteral">        Sankey</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral">            The current `.Sankey` instance.</span></div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral">        Other Parameters</span></div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">        ----------------</span></div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral">        **kwargs</span></div>
<div class="line"><span class="lineno">  426</span><span class="stringliteral">           Additional keyword arguments set `matplotlib.patches.PathPatch`</span></div>
<div class="line"><span class="lineno">  427</span><span class="stringliteral">           properties, listed below.  For example, one may want to use</span></div>
<div class="line"><span class="lineno">  428</span><span class="stringliteral">           ``fill=False`` or ``label=&quot;A legend entry&quot;``.</span></div>
<div class="line"><span class="lineno">  429</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  430</span><span class="stringliteral">        %(Patch:kwdoc)s</span></div>
<div class="line"><span class="lineno">  431</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  432</span><span class="stringliteral">        See Also</span></div>
<div class="line"><span class="lineno">  433</span><span class="stringliteral">        --------</span></div>
<div class="line"><span class="lineno">  434</span><span class="stringliteral">        Sankey.finish</span></div>
<div class="line"><span class="lineno">  435</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  436</span>        <span class="comment"># Check and preprocess the arguments.</span></div>
<div class="line"><span class="lineno">  437</span>        <span class="keywordflow">if</span> flows <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  438</span>            flows = np.array([1.0, -1.0])</div>
<div class="line"><span class="lineno">  439</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  440</span>            flows = np.array(flows)</div>
<div class="line"><span class="lineno">  441</span>        n = flows.shape[0]  <span class="comment"># Number of flows</span></div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">if</span> rotation <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  443</span>            rotation = 0</div>
<div class="line"><span class="lineno">  444</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  445</span>            <span class="comment"># In the code below, angles are expressed in deg/90.</span></div>
<div class="line"><span class="lineno">  446</span>            rotation /= 90.0</div>
<div class="line"><span class="lineno">  447</span>        <span class="keywordflow">if</span> orientations <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  448</span>            orientations = 0</div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  450</span>            orientations = np.broadcast_to(orientations, n)</div>
<div class="line"><span class="lineno">  451</span>        <span class="keywordflow">except</span> ValueError:</div>
<div class="line"><span class="lineno">  452</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  453</span>                f<span class="stringliteral">&quot;The shapes of &#39;flows&#39; {np.shape(flows)} and &#39;orientations&#39; &quot;</span></div>
<div class="line"><span class="lineno">  454</span>                f<span class="stringliteral">&quot;{np.shape(orientations)} are incompatible&quot;</span></div>
<div class="line"><span class="lineno">  455</span>            ) <span class="keyword">from</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  457</span>            labels = np.broadcast_to(labels, n)</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordflow">except</span> ValueError:</div>
<div class="line"><span class="lineno">  459</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  460</span>                f<span class="stringliteral">&quot;The shapes of &#39;flows&#39; {np.shape(flows)} and &#39;labels&#39; &quot;</span></div>
<div class="line"><span class="lineno">  461</span>                f<span class="stringliteral">&quot;{np.shape(labels)} are incompatible&quot;</span></div>
<div class="line"><span class="lineno">  462</span>            ) <span class="keyword">from</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">if</span> trunklength &lt; 0:</div>
<div class="line"><span class="lineno">  464</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  465</span>                <span class="stringliteral">&quot;&#39;trunklength&#39; is negative, which is not allowed because it &quot;</span></div>
<div class="line"><span class="lineno">  466</span>                <span class="stringliteral">&quot;would cause poor layout&quot;</span>)</div>
<div class="line"><span class="lineno">  467</span>        <span class="keywordflow">if</span> abs(np.sum(flows)) &gt; self.tolerance:</div>
<div class="line"><span class="lineno">  468</span>            _log.info(<span class="stringliteral">&quot;The sum of the flows is nonzero (%f; patchlabel=%r); &quot;</span></div>
<div class="line"><span class="lineno">  469</span>                      <span class="stringliteral">&quot;is the system not at steady state?&quot;</span>,</div>
<div class="line"><span class="lineno">  470</span>                      np.sum(flows), patchlabel)</div>
<div class="line"><span class="lineno">  471</span>        scaled_flows = self.scale * flows</div>
<div class="line"><span class="lineno">  472</span>        gain = sum(max(flow, 0) <span class="keywordflow">for</span> flow <span class="keywordflow">in</span> scaled_flows)</div>
<div class="line"><span class="lineno">  473</span>        loss = sum(min(flow, 0) <span class="keywordflow">for</span> flow <span class="keywordflow">in</span> scaled_flows)</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordflow">if</span> prior <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  475</span>            <span class="keywordflow">if</span> prior &lt; 0:</div>
<div class="line"><span class="lineno">  476</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;The index of the prior diagram is negative&quot;</span>)</div>
<div class="line"><span class="lineno">  477</span>            <span class="keywordflow">if</span> min(connect) &lt; 0:</div>
<div class="line"><span class="lineno">  478</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  479</span>                    <span class="stringliteral">&quot;At least one of the connection indices is negative&quot;</span>)</div>
<div class="line"><span class="lineno">  480</span>            <span class="keywordflow">if</span> prior &gt;= len(self.diagrams):</div>
<div class="line"><span class="lineno">  481</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  482</span>                    f<span class="stringliteral">&quot;The index of the prior diagram is {prior}, but there &quot;</span></div>
<div class="line"><span class="lineno">  483</span>                    f<span class="stringliteral">&quot;are only {len(self.diagrams)} other diagrams&quot;</span>)</div>
<div class="line"><span class="lineno">  484</span>            <span class="keywordflow">if</span> connect[0] &gt;= len(self.diagrams[prior].flows):</div>
<div class="line"><span class="lineno">  485</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  486</span>                    <span class="stringliteral">&quot;The connection index to the source diagram is {}, but &quot;</span></div>
<div class="line"><span class="lineno">  487</span>                    <span class="stringliteral">&quot;that diagram has only {} flows&quot;</span>.format(</div>
<div class="line"><span class="lineno">  488</span>                        connect[0], len(self.diagrams[prior].flows)))</div>
<div class="line"><span class="lineno">  489</span>            <span class="keywordflow">if</span> connect[1] &gt;= n:</div>
<div class="line"><span class="lineno">  490</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  491</span>                    f<span class="stringliteral">&quot;The connection index to this diagram is {connect[1]}, &quot;</span></div>
<div class="line"><span class="lineno">  492</span>                    f<span class="stringliteral">&quot;but this diagram has only {n} flows&quot;</span>)</div>
<div class="line"><span class="lineno">  493</span>            <span class="keywordflow">if</span> self.diagrams[prior].angles[connect[0]] <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  494</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  495</span>                    f<span class="stringliteral">&quot;The connection cannot be made, which may occur if the &quot;</span></div>
<div class="line"><span class="lineno">  496</span>                    f<span class="stringliteral">&quot;magnitude of flow {connect[0]} of diagram {prior} is &quot;</span></div>
<div class="line"><span class="lineno">  497</span>                    f<span class="stringliteral">&quot;less than the specified tolerance&quot;</span>)</div>
<div class="line"><span class="lineno">  498</span>            flow_error = (self.diagrams[prior].flows[connect[0]] +</div>
<div class="line"><span class="lineno">  499</span>                          flows[connect[1]])</div>
<div class="line"><span class="lineno">  500</span>            <span class="keywordflow">if</span> abs(flow_error) &gt;= self.tolerance:</div>
<div class="line"><span class="lineno">  501</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  502</span>                    f<span class="stringliteral">&quot;The scaled sum of the connected flows is {flow_error}, &quot;</span></div>
<div class="line"><span class="lineno">  503</span>                    f<span class="stringliteral">&quot;which is not within the tolerance ({self.tolerance})&quot;</span>)</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>        <span class="comment"># Determine if the flows are inputs.</span></div>
<div class="line"><span class="lineno">  506</span>        are_inputs = [<span class="keywordtype">None</span>] * n</div>
<div class="line"><span class="lineno">  507</span>        <span class="keywordflow">for</span> i, flow <span class="keywordflow">in</span> enumerate(flows):</div>
<div class="line"><span class="lineno">  508</span>            <span class="keywordflow">if</span> flow &gt;= self.tolerance:</div>
<div class="line"><span class="lineno">  509</span>                are_inputs[i] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  510</span>            <span class="keywordflow">elif</span> flow &lt;= -self.tolerance:</div>
<div class="line"><span class="lineno">  511</span>                are_inputs[i] = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  512</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  513</span>                _log.info(</div>
<div class="line"><span class="lineno">  514</span>                    <span class="stringliteral">&quot;The magnitude of flow %d (%f) is below the tolerance &quot;</span></div>
<div class="line"><span class="lineno">  515</span>                    <span class="stringliteral">&quot;(%f).\nIt will not be shown, and it cannot be used in a &quot;</span></div>
<div class="line"><span class="lineno">  516</span>                    <span class="stringliteral">&quot;connection.&quot;</span>, i, flow, self.tolerance)</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>        <span class="comment"># Determine the angles of the arrows (before rotation).</span></div>
<div class="line"><span class="lineno">  519</span>        angles = [<span class="keywordtype">None</span>] * n</div>
<div class="line"><span class="lineno">  520</span>        <span class="keywordflow">for</span> i, (orient, is_input) <span class="keywordflow">in</span> enumerate(zip(orientations, are_inputs)):</div>
<div class="line"><span class="lineno">  521</span>            <span class="keywordflow">if</span> orient == 1:</div>
<div class="line"><span class="lineno">  522</span>                <span class="keywordflow">if</span> is_input:</div>
<div class="line"><span class="lineno">  523</span>                    angles[i] = DOWN</div>
<div class="line"><span class="lineno">  524</span>                <span class="keywordflow">elif</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  525</span>                    <span class="comment"># Be specific since is_input can be None.</span></div>
<div class="line"><span class="lineno">  526</span>                    angles[i] = UP</div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordflow">elif</span> orient == 0:</div>
<div class="line"><span class="lineno">  528</span>                <span class="keywordflow">if</span> is_input <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  529</span>                    angles[i] = RIGHT</div>
<div class="line"><span class="lineno">  530</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  531</span>                <span class="keywordflow">if</span> orient != -1:</div>
<div class="line"><span class="lineno">  532</span>                    <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  533</span>                        f<span class="stringliteral">&quot;The value of orientations[{i}] is {orient}, &quot;</span></div>
<div class="line"><span class="lineno">  534</span>                        f<span class="stringliteral">&quot;but it must be -1, 0, or 1&quot;</span>)</div>
<div class="line"><span class="lineno">  535</span>                <span class="keywordflow">if</span> is_input:</div>
<div class="line"><span class="lineno">  536</span>                    angles[i] = UP</div>
<div class="line"><span class="lineno">  537</span>                <span class="keywordflow">elif</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  538</span>                    angles[i] = DOWN</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>        <span class="comment"># Justify the lengths of the paths.</span></div>
<div class="line"><span class="lineno">  541</span>        <span class="keywordflow">if</span> np.iterable(pathlengths):</div>
<div class="line"><span class="lineno">  542</span>            <span class="keywordflow">if</span> len(pathlengths) != n:</div>
<div class="line"><span class="lineno">  543</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  544</span>                    f<span class="stringliteral">&quot;The lengths of &#39;flows&#39; ({n}) and &#39;pathlengths&#39; &quot;</span></div>
<div class="line"><span class="lineno">  545</span>                    f<span class="stringliteral">&quot;({len(pathlengths)}) are incompatible&quot;</span>)</div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">else</span>:  <span class="comment"># Make pathlengths into a list.</span></div>
<div class="line"><span class="lineno">  547</span>            urlength = pathlengths</div>
<div class="line"><span class="lineno">  548</span>            ullength = pathlengths</div>
<div class="line"><span class="lineno">  549</span>            lrlength = pathlengths</div>
<div class="line"><span class="lineno">  550</span>            lllength = pathlengths</div>
<div class="line"><span class="lineno">  551</span>            d = dict(RIGHT=pathlengths)</div>
<div class="line"><span class="lineno">  552</span>            pathlengths = [d.get(angle, 0) <span class="keywordflow">for</span> angle <span class="keywordflow">in</span> angles]</div>
<div class="line"><span class="lineno">  553</span>            <span class="comment"># Determine the lengths of the top-side arrows</span></div>
<div class="line"><span class="lineno">  554</span>            <span class="comment"># from the middle outwards.</span></div>
<div class="line"><span class="lineno">  555</span>            <span class="keywordflow">for</span> i, (angle, is_input, flow) <span class="keywordflow">in</span> enumerate(zip(angles, are_inputs,</div>
<div class="line"><span class="lineno">  556</span>                                                            scaled_flows)):</div>
<div class="line"><span class="lineno">  557</span>                <span class="keywordflow">if</span> angle == DOWN <span class="keywordflow">and</span> is_input:</div>
<div class="line"><span class="lineno">  558</span>                    pathlengths[i] = ullength</div>
<div class="line"><span class="lineno">  559</span>                    ullength += flow</div>
<div class="line"><span class="lineno">  560</span>                <span class="keywordflow">elif</span> angle == UP <span class="keywordflow">and</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  561</span>                    pathlengths[i] = urlength</div>
<div class="line"><span class="lineno">  562</span>                    urlength -= flow  <span class="comment"># Flow is negative for outputs.</span></div>
<div class="line"><span class="lineno">  563</span>            <span class="comment"># Determine the lengths of the bottom-side arrows</span></div>
<div class="line"><span class="lineno">  564</span>            <span class="comment"># from the middle outwards.</span></div>
<div class="line"><span class="lineno">  565</span>            <span class="keywordflow">for</span> i, (angle, is_input, flow) <span class="keywordflow">in</span> enumerate(reversed(list(zip(</div>
<div class="line"><span class="lineno">  566</span>                  angles, are_inputs, scaled_flows)))):</div>
<div class="line"><span class="lineno">  567</span>                <span class="keywordflow">if</span> angle == UP <span class="keywordflow">and</span> is_input:</div>
<div class="line"><span class="lineno">  568</span>                    pathlengths[n - i - 1] = lllength</div>
<div class="line"><span class="lineno">  569</span>                    lllength += flow</div>
<div class="line"><span class="lineno">  570</span>                <span class="keywordflow">elif</span> angle == DOWN <span class="keywordflow">and</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  571</span>                    pathlengths[n - i - 1] = lrlength</div>
<div class="line"><span class="lineno">  572</span>                    lrlength -= flow</div>
<div class="line"><span class="lineno">  573</span>            <span class="comment"># Determine the lengths of the left-side arrows</span></div>
<div class="line"><span class="lineno">  574</span>            <span class="comment"># from the bottom upwards.</span></div>
<div class="line"><span class="lineno">  575</span>            has_left_input = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  576</span>            <span class="keywordflow">for</span> i, (angle, is_input, spec) <span class="keywordflow">in</span> enumerate(reversed(list(zip(</div>
<div class="line"><span class="lineno">  577</span>                  angles, are_inputs, zip(scaled_flows, pathlengths))))):</div>
<div class="line"><span class="lineno">  578</span>                <span class="keywordflow">if</span> angle == RIGHT:</div>
<div class="line"><span class="lineno">  579</span>                    <span class="keywordflow">if</span> is_input:</div>
<div class="line"><span class="lineno">  580</span>                        <span class="keywordflow">if</span> has_left_input:</div>
<div class="line"><span class="lineno">  581</span>                            pathlengths[n - i - 1] = 0</div>
<div class="line"><span class="lineno">  582</span>                        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  583</span>                            has_left_input = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  584</span>            <span class="comment"># Determine the lengths of the right-side arrows</span></div>
<div class="line"><span class="lineno">  585</span>            <span class="comment"># from the top downwards.</span></div>
<div class="line"><span class="lineno">  586</span>            has_right_output = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  587</span>            <span class="keywordflow">for</span> i, (angle, is_input, spec) <span class="keywordflow">in</span> enumerate(zip(</div>
<div class="line"><span class="lineno">  588</span>                  angles, are_inputs, list(zip(scaled_flows, pathlengths)))):</div>
<div class="line"><span class="lineno">  589</span>                <span class="keywordflow">if</span> angle == RIGHT:</div>
<div class="line"><span class="lineno">  590</span>                    <span class="keywordflow">if</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  591</span>                        <span class="keywordflow">if</span> has_right_output:</div>
<div class="line"><span class="lineno">  592</span>                            pathlengths[i] = 0</div>
<div class="line"><span class="lineno">  593</span>                        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  594</span>                            has_right_output = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  595</span> </div>
<div class="line"><span class="lineno">  596</span>        <span class="comment"># Begin the subpaths, and smooth the transition if the sum of the flows</span></div>
<div class="line"><span class="lineno">  597</span>        <span class="comment"># is nonzero.</span></div>
<div class="line"><span class="lineno">  598</span>        urpath = [(Path.MOVETO, [(self.gap - trunklength / 2.0),  <span class="comment"># Upper right</span></div>
<div class="line"><span class="lineno">  599</span>                                 gain / 2.0]),</div>
<div class="line"><span class="lineno">  600</span>                  (Path.LINETO, [(self.gap - trunklength / 2.0) / 2.0,</div>
<div class="line"><span class="lineno">  601</span>                                 gain / 2.0]),</div>
<div class="line"><span class="lineno">  602</span>                  (Path.CURVE4, [(self.gap - trunklength / 2.0) / 8.0,</div>
<div class="line"><span class="lineno">  603</span>                                 gain / 2.0]),</div>
<div class="line"><span class="lineno">  604</span>                  (Path.CURVE4, [(trunklength / 2.0 - self.gap) / 8.0,</div>
<div class="line"><span class="lineno">  605</span>                                 -loss / 2.0]),</div>
<div class="line"><span class="lineno">  606</span>                  (Path.LINETO, [(trunklength / 2.0 - self.gap) / 2.0,</div>
<div class="line"><span class="lineno">  607</span>                                 -loss / 2.0]),</div>
<div class="line"><span class="lineno">  608</span>                  (Path.LINETO, [(trunklength / 2.0 - self.gap),</div>
<div class="line"><span class="lineno">  609</span>                                 -loss / 2.0])]</div>
<div class="line"><span class="lineno">  610</span>        llpath = [(Path.LINETO, [(trunklength / 2.0 - self.gap),  <span class="comment"># Lower left</span></div>
<div class="line"><span class="lineno">  611</span>                                 loss / 2.0]),</div>
<div class="line"><span class="lineno">  612</span>                  (Path.LINETO, [(trunklength / 2.0 - self.gap) / 2.0,</div>
<div class="line"><span class="lineno">  613</span>                                 loss / 2.0]),</div>
<div class="line"><span class="lineno">  614</span>                  (Path.CURVE4, [(trunklength / 2.0 - self.gap) / 8.0,</div>
<div class="line"><span class="lineno">  615</span>                                 loss / 2.0]),</div>
<div class="line"><span class="lineno">  616</span>                  (Path.CURVE4, [(self.gap - trunklength / 2.0) / 8.0,</div>
<div class="line"><span class="lineno">  617</span>                                 -gain / 2.0]),</div>
<div class="line"><span class="lineno">  618</span>                  (Path.LINETO, [(self.gap - trunklength / 2.0) / 2.0,</div>
<div class="line"><span class="lineno">  619</span>                                 -gain / 2.0]),</div>
<div class="line"><span class="lineno">  620</span>                  (Path.LINETO, [(self.gap - trunklength / 2.0),</div>
<div class="line"><span class="lineno">  621</span>                                 -gain / 2.0])]</div>
<div class="line"><span class="lineno">  622</span>        lrpath = [(Path.LINETO, [(trunklength / 2.0 - self.gap),  <span class="comment"># Lower right</span></div>
<div class="line"><span class="lineno">  623</span>                                 loss / 2.0])]</div>
<div class="line"><span class="lineno">  624</span>        ulpath = [(Path.LINETO, [self.gap - trunklength / 2.0,  <span class="comment"># Upper left</span></div>
<div class="line"><span class="lineno">  625</span>                                 gain / 2.0])]</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>        <span class="comment"># Add the subpaths and assign the locations of the tips and labels.</span></div>
<div class="line"><span class="lineno">  628</span>        tips = np.zeros((n, 2))</div>
<div class="line"><span class="lineno">  629</span>        label_locations = np.zeros((n, 2))</div>
<div class="line"><span class="lineno">  630</span>        <span class="comment"># Add the top-side inputs and outputs from the middle outwards.</span></div>
<div class="line"><span class="lineno">  631</span>        <span class="keywordflow">for</span> i, (angle, is_input, spec) <span class="keywordflow">in</span> enumerate(zip(</div>
<div class="line"><span class="lineno">  632</span>              angles, are_inputs, list(zip(scaled_flows, pathlengths)))):</div>
<div class="line"><span class="lineno">  633</span>            <span class="keywordflow">if</span> angle == DOWN <span class="keywordflow">and</span> is_input:</div>
<div class="line"><span class="lineno">  634</span>                tips[i, :], label_locations[i, :] = self._add_input(</div>
<div class="line"><span class="lineno">  635</span>                    ulpath, angle, *spec)</div>
<div class="line"><span class="lineno">  636</span>            <span class="keywordflow">elif</span> angle == UP <span class="keywordflow">and</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  637</span>                tips[i, :], label_locations[i, :] = self._add_output(</div>
<div class="line"><span class="lineno">  638</span>                    urpath, angle, *spec)</div>
<div class="line"><span class="lineno">  639</span>        <span class="comment"># Add the bottom-side inputs and outputs from the middle outwards.</span></div>
<div class="line"><span class="lineno">  640</span>        <span class="keywordflow">for</span> i, (angle, is_input, spec) <span class="keywordflow">in</span> enumerate(reversed(list(zip(</div>
<div class="line"><span class="lineno">  641</span>              angles, are_inputs, list(zip(scaled_flows, pathlengths)))))):</div>
<div class="line"><span class="lineno">  642</span>            <span class="keywordflow">if</span> angle == UP <span class="keywordflow">and</span> is_input:</div>
<div class="line"><span class="lineno">  643</span>                tip, label_location = self._add_input(llpath, angle, *spec)</div>
<div class="line"><span class="lineno">  644</span>                tips[n - i - 1, :] = tip</div>
<div class="line"><span class="lineno">  645</span>                label_locations[n - i - 1, :] = label_location</div>
<div class="line"><span class="lineno">  646</span>            <span class="keywordflow">elif</span> angle == DOWN <span class="keywordflow">and</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  647</span>                tip, label_location = self._add_output(lrpath, angle, *spec)</div>
<div class="line"><span class="lineno">  648</span>                tips[n - i - 1, :] = tip</div>
<div class="line"><span class="lineno">  649</span>                label_locations[n - i - 1, :] = label_location</div>
<div class="line"><span class="lineno">  650</span>        <span class="comment"># Add the left-side inputs from the bottom upwards.</span></div>
<div class="line"><span class="lineno">  651</span>        has_left_input = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  652</span>        <span class="keywordflow">for</span> i, (angle, is_input, spec) <span class="keywordflow">in</span> enumerate(reversed(list(zip(</div>
<div class="line"><span class="lineno">  653</span>              angles, are_inputs, list(zip(scaled_flows, pathlengths)))))):</div>
<div class="line"><span class="lineno">  654</span>            <span class="keywordflow">if</span> angle == RIGHT <span class="keywordflow">and</span> is_input:</div>
<div class="line"><span class="lineno">  655</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> has_left_input:</div>
<div class="line"><span class="lineno">  656</span>                    <span class="comment"># Make sure the lower path extends</span></div>
<div class="line"><span class="lineno">  657</span>                    <span class="comment"># at least as far as the upper one.</span></div>
<div class="line"><span class="lineno">  658</span>                    <span class="keywordflow">if</span> llpath[-1][1][0] &gt; ulpath[-1][1][0]:</div>
<div class="line"><span class="lineno">  659</span>                        llpath.append((Path.LINETO, [ulpath[-1][1][0],</div>
<div class="line"><span class="lineno">  660</span>                                                     llpath[-1][1][1]]))</div>
<div class="line"><span class="lineno">  661</span>                    has_left_input = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  662</span>                tip, label_location = self._add_input(llpath, angle, *spec)</div>
<div class="line"><span class="lineno">  663</span>                tips[n - i - 1, :] = tip</div>
<div class="line"><span class="lineno">  664</span>                label_locations[n - i - 1, :] = label_location</div>
<div class="line"><span class="lineno">  665</span>        <span class="comment"># Add the right-side outputs from the top downwards.</span></div>
<div class="line"><span class="lineno">  666</span>        has_right_output = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  667</span>        <span class="keywordflow">for</span> i, (angle, is_input, spec) <span class="keywordflow">in</span> enumerate(zip(</div>
<div class="line"><span class="lineno">  668</span>              angles, are_inputs, list(zip(scaled_flows, pathlengths)))):</div>
<div class="line"><span class="lineno">  669</span>            <span class="keywordflow">if</span> angle == RIGHT <span class="keywordflow">and</span> is_input <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  670</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> has_right_output:</div>
<div class="line"><span class="lineno">  671</span>                    <span class="comment"># Make sure the upper path extends</span></div>
<div class="line"><span class="lineno">  672</span>                    <span class="comment"># at least as far as the lower one.</span></div>
<div class="line"><span class="lineno">  673</span>                    <span class="keywordflow">if</span> urpath[-1][1][0] &lt; lrpath[-1][1][0]:</div>
<div class="line"><span class="lineno">  674</span>                        urpath.append((Path.LINETO, [lrpath[-1][1][0],</div>
<div class="line"><span class="lineno">  675</span>                                                     urpath[-1][1][1]]))</div>
<div class="line"><span class="lineno">  676</span>                    has_right_output = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  677</span>                tips[i, :], label_locations[i, :] = self._add_output(</div>
<div class="line"><span class="lineno">  678</span>                    urpath, angle, *spec)</div>
<div class="line"><span class="lineno">  679</span>        <span class="comment"># Trim any hanging vertices.</span></div>
<div class="line"><span class="lineno">  680</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> has_left_input:</div>
<div class="line"><span class="lineno">  681</span>            ulpath.pop()</div>
<div class="line"><span class="lineno">  682</span>            llpath.pop()</div>
<div class="line"><span class="lineno">  683</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> has_right_output:</div>
<div class="line"><span class="lineno">  684</span>            lrpath.pop()</div>
<div class="line"><span class="lineno">  685</span>            urpath.pop()</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>        <span class="comment"># Concatenate the subpaths in the correct order (clockwise from top).</span></div>
<div class="line"><span class="lineno">  688</span>        path = (urpath + self._revert(lrpath) + llpath + self._revert(ulpath) +</div>
<div class="line"><span class="lineno">  689</span>                [(Path.CLOSEPOLY, urpath[0][1])])</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>        <span class="comment"># Create a patch with the Sankey outline.</span></div>
<div class="line"><span class="lineno">  692</span>        codes, vertices = zip(*path)</div>
<div class="line"><span class="lineno">  693</span>        vertices = np.array(vertices)</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>        <span class="keyword">def </span>_get_angle(a, r):</div>
<div class="line"><span class="lineno">  696</span>            <span class="keywordflow">if</span> a <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  697</span>                <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  698</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  699</span>                <span class="keywordflow">return</span> a + r</div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span>        <span class="keywordflow">if</span> prior <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  702</span>            <span class="keywordflow">if</span> rotation != 0:  <span class="comment"># By default, none of this is needed.</span></div>
<div class="line"><span class="lineno">  703</span>                angles = [_get_angle(angle, rotation) <span class="keywordflow">for</span> angle <span class="keywordflow">in</span> angles]</div>
<div class="line"><span class="lineno">  704</span>                rotate = Affine2D().rotate_deg(rotation * 90).transform_affine</div>
<div class="line"><span class="lineno">  705</span>                tips = rotate(tips)</div>
<div class="line"><span class="lineno">  706</span>                label_locations = rotate(label_locations)</div>
<div class="line"><span class="lineno">  707</span>                vertices = rotate(vertices)</div>
<div class="line"><span class="lineno">  708</span>            text = self.ax.text(0, 0, s=patchlabel, ha=<span class="stringliteral">&#39;center&#39;</span>, va=<span class="stringliteral">&#39;center&#39;</span>)</div>
<div class="line"><span class="lineno">  709</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  710</span>            rotation = (self.diagrams[prior].angles[connect[0]] -</div>
<div class="line"><span class="lineno">  711</span>                        angles[connect[1]])</div>
<div class="line"><span class="lineno">  712</span>            angles = [_get_angle(angle, rotation) <span class="keywordflow">for</span> angle <span class="keywordflow">in</span> angles]</div>
<div class="line"><span class="lineno">  713</span>            rotate = Affine2D().rotate_deg(rotation * 90).transform_affine</div>
<div class="line"><span class="lineno">  714</span>            tips = rotate(tips)</div>
<div class="line"><span class="lineno">  715</span>            offset = self.diagrams[prior].tips[connect[0]] - tips[connect[1]]</div>
<div class="line"><span class="lineno">  716</span>            translate = Affine2D().translate(*offset).transform_affine</div>
<div class="line"><span class="lineno">  717</span>            tips = translate(tips)</div>
<div class="line"><span class="lineno">  718</span>            label_locations = translate(rotate(label_locations))</div>
<div class="line"><span class="lineno">  719</span>            vertices = translate(rotate(vertices))</div>
<div class="line"><span class="lineno">  720</span>            kwds = dict(s=patchlabel, ha=<span class="stringliteral">&#39;center&#39;</span>, va=<span class="stringliteral">&#39;center&#39;</span>)</div>
<div class="line"><span class="lineno">  721</span>            text = self.ax.text(*offset, **kwds)</div>
<div class="line"><span class="lineno">  722</span>        <span class="keywordflow">if</span> mpl.rcParams[<span class="stringliteral">&#39;_internal.classic_mode&#39;</span>]:</div>
<div class="line"><span class="lineno">  723</span>            fc = kwargs.pop(<span class="stringliteral">&#39;fc&#39;</span>, kwargs.pop(<span class="stringliteral">&#39;facecolor&#39;</span>, <span class="stringliteral">&#39;#bfd1d4&#39;</span>))</div>
<div class="line"><span class="lineno">  724</span>            lw = kwargs.pop(<span class="stringliteral">&#39;lw&#39;</span>, kwargs.pop(<span class="stringliteral">&#39;linewidth&#39;</span>, 0.5))</div>
<div class="line"><span class="lineno">  725</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  726</span>            fc = kwargs.pop(<span class="stringliteral">&#39;fc&#39;</span>, kwargs.pop(<span class="stringliteral">&#39;facecolor&#39;</span>, <span class="keywordtype">None</span>))</div>
<div class="line"><span class="lineno">  727</span>            lw = kwargs.pop(<span class="stringliteral">&#39;lw&#39;</span>, kwargs.pop(<span class="stringliteral">&#39;linewidth&#39;</span>, <span class="keywordtype">None</span>))</div>
<div class="line"><span class="lineno">  728</span>        <span class="keywordflow">if</span> fc <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  729</span>            fc = next(self.ax._get_patches_for_fill.prop_cycler)[<span class="stringliteral">&#39;color&#39;</span>]</div>
<div class="line"><span class="lineno">  730</span>        patch = PathPatch(Path(vertices, codes), fc=fc, lw=lw, **kwargs)</div>
<div class="line"><span class="lineno">  731</span>        self.ax.add_patch(patch)</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span>        <span class="comment"># Add the path labels.</span></div>
<div class="line"><span class="lineno">  734</span>        texts = []</div>
<div class="line"><span class="lineno">  735</span>        <span class="keywordflow">for</span> number, angle, label, location <span class="keywordflow">in</span> zip(flows, angles, labels,</div>
<div class="line"><span class="lineno">  736</span>                                                  label_locations):</div>
<div class="line"><span class="lineno">  737</span>            <span class="keywordflow">if</span> label <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> angle <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  738</span>                label = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><span class="lineno">  739</span>            <span class="keywordflow">elif</span> self.unit <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  740</span>                <span class="keywordflow">if</span> isinstance(self.format, str):</div>
<div class="line"><span class="lineno">  741</span>                    quantity = self.format % abs(number) + self.unit</div>
<div class="line"><span class="lineno">  742</span>                <span class="keywordflow">elif</span> callable(self.format):</div>
<div class="line"><span class="lineno">  743</span>                    quantity = self.format(number)</div>
<div class="line"><span class="lineno">  744</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  745</span>                    <span class="keywordflow">raise</span> TypeError(</div>
<div class="line"><span class="lineno">  746</span>                        <span class="stringliteral">&#39;format must be callable or a format string&#39;</span>)</div>
<div class="line"><span class="lineno">  747</span>                <span class="keywordflow">if</span> label != <span class="stringliteral">&#39;&#39;</span>:</div>
<div class="line"><span class="lineno">  748</span>                    label += <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno">  749</span>                label += quantity</div>
<div class="line"><span class="lineno">  750</span>            texts.append(self.ax.text(x=location[0], y=location[1],</div>
<div class="line"><span class="lineno">  751</span>                                      s=label,</div>
<div class="line"><span class="lineno">  752</span>                                      ha=<span class="stringliteral">&#39;center&#39;</span>, va=<span class="stringliteral">&#39;center&#39;</span>))</div>
<div class="line"><span class="lineno">  753</span>        <span class="comment"># Text objects are placed even they are empty (as long as the magnitude</span></div>
<div class="line"><span class="lineno">  754</span>        <span class="comment"># of the corresponding flow is larger than the tolerance) in case the</span></div>
<div class="line"><span class="lineno">  755</span>        <span class="comment"># user wants to provide labels later.</span></div>
<div class="line"><span class="lineno">  756</span> </div>
<div class="line"><span class="lineno">  757</span>        <span class="comment"># Expand the size of the diagram if necessary.</span></div>
<div class="line"><span class="lineno">  758</span>        self.extent = (min(np.min(vertices[:, 0]),</div>
<div class="line"><span class="lineno">  759</span>                           np.min(label_locations[:, 0]),</div>
<div class="line"><span class="lineno">  760</span>                           self.extent[0]),</div>
<div class="line"><span class="lineno">  761</span>                       max(np.max(vertices[:, 0]),</div>
<div class="line"><span class="lineno">  762</span>                           np.max(label_locations[:, 0]),</div>
<div class="line"><span class="lineno">  763</span>                           self.extent[1]),</div>
<div class="line"><span class="lineno">  764</span>                       min(np.min(vertices[:, 1]),</div>
<div class="line"><span class="lineno">  765</span>                           np.min(label_locations[:, 1]),</div>
<div class="line"><span class="lineno">  766</span>                           self.extent[2]),</div>
<div class="line"><span class="lineno">  767</span>                       max(np.max(vertices[:, 1]),</div>
<div class="line"><span class="lineno">  768</span>                           np.max(label_locations[:, 1]),</div>
<div class="line"><span class="lineno">  769</span>                           self.extent[3]))</div>
<div class="line"><span class="lineno">  770</span>        <span class="comment"># Include both vertices _and_ label locations in the extents; there are</span></div>
<div class="line"><span class="lineno">  771</span>        <span class="comment"># where either could determine the margins (e.g., arrow shoulders).</span></div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>        <span class="comment"># Add this diagram as a subdiagram.</span></div>
<div class="line"><span class="lineno">  774</span>        self.diagrams.append(</div>
<div class="line"><span class="lineno">  775</span>            SimpleNamespace(patch=patch, flows=flows, angles=angles, tips=tips,</div>
<div class="line"><span class="lineno">  776</span>                            text=text, texts=texts))</div>
<div class="line"><span class="lineno">  777</span> </div>
<div class="line"><span class="lineno">  778</span>        <span class="comment"># Allow a daisy-chained call structure (see docstring for the class).</span></div>
<div class="line"><span class="lineno">  779</span>        <span class="keywordflow">return</span> self</div>
<div class="line"><span class="lineno">  780</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="acae0de0f9223379d26c2fe6401559ff7" name="acae0de0f9223379d26c2fe6401559ff7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae0de0f9223379d26c2fe6401559ff7">&#9670;&#160;</a></span>finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.finish </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Adjust the axes and return a list of information about the Sankey
subdiagram(s).

Return value is a list of subdiagrams represented with the following
fields:

  ===============   ===================================================
  Field             Description
  ===============   ===================================================
  *patch*           Sankey outline (an instance of
                    :class:`~matplotlib.patches.PathPatch`)
  *flows*           values of the flows (positive for input, negative
                    for output)
  *angles*          list of angles of the arrows [deg/90]
                    For example, if the diagram has not been rotated,
                    an input to the top side will have an angle of 3
                    (DOWN), and an output from the top side will have
                    an angle of 1 (UP).  If a flow has been skipped
                    (because its magnitude is less than *tolerance*),
                    then its angle will be *None*.
  *tips*            array in which each row is an [x, y] pair
                    indicating the positions of the tips (or "dips") of
                    the flow paths
                    If the magnitude of a flow is less the *tolerance*
                    for the instance of :class:`Sankey`, the flow is
                    skipped and its tip will be at the center of the
                    diagram.
  *text*            :class:`~matplotlib.text.Text` instance for the
                    label of the diagram
  *texts*           list of :class:`~matplotlib.text.Text` instances
                    for the labels of flows
  ===============   ===================================================

See Also
--------
Sankey.add
</pre> <div class="fragment"><div class="line"><span class="lineno">  781</span>    <span class="keyword">def </span>finish(self):</div>
<div class="line"><span class="lineno">  782</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  783</span><span class="stringliteral">        Adjust the axes and return a list of information about the Sankey</span></div>
<div class="line"><span class="lineno">  784</span><span class="stringliteral">        subdiagram(s).</span></div>
<div class="line"><span class="lineno">  785</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  786</span><span class="stringliteral">        Return value is a list of subdiagrams represented with the following</span></div>
<div class="line"><span class="lineno">  787</span><span class="stringliteral">        fields:</span></div>
<div class="line"><span class="lineno">  788</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  789</span><span class="stringliteral">          ===============   ===================================================</span></div>
<div class="line"><span class="lineno">  790</span><span class="stringliteral">          Field             Description</span></div>
<div class="line"><span class="lineno">  791</span><span class="stringliteral">          ===============   ===================================================</span></div>
<div class="line"><span class="lineno">  792</span><span class="stringliteral">          *patch*           Sankey outline (an instance of</span></div>
<div class="line"><span class="lineno">  793</span><span class="stringliteral">                            :class:`~matplotlib.patches.PathPatch`)</span></div>
<div class="line"><span class="lineno">  794</span><span class="stringliteral">          *flows*           values of the flows (positive for input, negative</span></div>
<div class="line"><span class="lineno">  795</span><span class="stringliteral">                            for output)</span></div>
<div class="line"><span class="lineno">  796</span><span class="stringliteral">          *angles*          list of angles of the arrows [deg/90]</span></div>
<div class="line"><span class="lineno">  797</span><span class="stringliteral">                            For example, if the diagram has not been rotated,</span></div>
<div class="line"><span class="lineno">  798</span><span class="stringliteral">                            an input to the top side will have an angle of 3</span></div>
<div class="line"><span class="lineno">  799</span><span class="stringliteral">                            (DOWN), and an output from the top side will have</span></div>
<div class="line"><span class="lineno">  800</span><span class="stringliteral">                            an angle of 1 (UP).  If a flow has been skipped</span></div>
<div class="line"><span class="lineno">  801</span><span class="stringliteral">                            (because its magnitude is less than *tolerance*),</span></div>
<div class="line"><span class="lineno">  802</span><span class="stringliteral">                            then its angle will be *None*.</span></div>
<div class="line"><span class="lineno">  803</span><span class="stringliteral">          *tips*            array in which each row is an [x, y] pair</span></div>
<div class="line"><span class="lineno">  804</span><span class="stringliteral">                            indicating the positions of the tips (or &quot;dips&quot;) of</span></div>
<div class="line"><span class="lineno">  805</span><span class="stringliteral">                            the flow paths</span></div>
<div class="line"><span class="lineno">  806</span><span class="stringliteral">                            If the magnitude of a flow is less the *tolerance*</span></div>
<div class="line"><span class="lineno">  807</span><span class="stringliteral">                            for the instance of :class:`Sankey`, the flow is</span></div>
<div class="line"><span class="lineno">  808</span><span class="stringliteral">                            skipped and its tip will be at the center of the</span></div>
<div class="line"><span class="lineno">  809</span><span class="stringliteral">                            diagram.</span></div>
<div class="line"><span class="lineno">  810</span><span class="stringliteral">          *text*            :class:`~matplotlib.text.Text` instance for the</span></div>
<div class="line"><span class="lineno">  811</span><span class="stringliteral">                            label of the diagram</span></div>
<div class="line"><span class="lineno">  812</span><span class="stringliteral">          *texts*           list of :class:`~matplotlib.text.Text` instances</span></div>
<div class="line"><span class="lineno">  813</span><span class="stringliteral">                            for the labels of flows</span></div>
<div class="line"><span class="lineno">  814</span><span class="stringliteral">          ===============   ===================================================</span></div>
<div class="line"><span class="lineno">  815</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  816</span><span class="stringliteral">        See Also</span></div>
<div class="line"><span class="lineno">  817</span><span class="stringliteral">        --------</span></div>
<div class="line"><span class="lineno">  818</span><span class="stringliteral">        Sankey.add</span></div>
<div class="line"><span class="lineno">  819</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  820</span>        self.ax.axis([self.extent[0] - self.margin,</div>
<div class="line"><span class="lineno">  821</span>                      self.extent[1] + self.margin,</div>
<div class="line"><span class="lineno">  822</span>                      self.extent[2] - self.margin,</div>
<div class="line"><span class="lineno">  823</span>                      self.extent[3] + self.margin])</div>
<div class="line"><span class="lineno">  824</span>        self.ax.set_aspect(<span class="stringliteral">&#39;equal&#39;</span>, adjustable=<span class="stringliteral">&#39;datalim&#39;</span>)</div>
<div class="line"><span class="lineno">  825</span>        <span class="keywordflow">return</span> self.diagrams</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af65ce4aa30db6f202bab576b9e00371d" name="af65ce4aa30db6f202bab576b9e00371d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af65ce4aa30db6f202bab576b9e00371d">&#9670;&#160;</a></span>ax</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.ax</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a608277c3689602e9b049d12d85ecb79b" name="a608277c3689602e9b049d12d85ecb79b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608277c3689602e9b049d12d85ecb79b">&#9670;&#160;</a></span>diagrams</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.diagrams</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acf0a4d5ab19975292db62bea2593bcc6" name="acf0a4d5ab19975292db62bea2593bcc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf0a4d5ab19975292db62bea2593bcc6">&#9670;&#160;</a></span>extent</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.extent</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab979bfec5e6e2aba5cc5838895d359bb" name="ab979bfec5e6e2aba5cc5838895d359bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab979bfec5e6e2aba5cc5838895d359bb">&#9670;&#160;</a></span>format</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.format</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1c1ab0bc8eb146c8a10e3ad8772d515" name="aa1c1ab0bc8eb146c8a10e3ad8772d515"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1c1ab0bc8eb146c8a10e3ad8772d515">&#9670;&#160;</a></span>gap</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.gap</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4ebac29b6132b67aa72c312971feec58" name="a4ebac29b6132b67aa72c312971feec58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ebac29b6132b67aa72c312971feec58">&#9670;&#160;</a></span>margin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.margin</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac292e7aafeff7a2fc449bcd1ea93d3b7" name="ac292e7aafeff7a2fc449bcd1ea93d3b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac292e7aafeff7a2fc449bcd1ea93d3b7">&#9670;&#160;</a></span>offset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.offset</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9178b93aeeabdfab7d2ff85cabd08fc8" name="a9178b93aeeabdfab7d2ff85cabd08fc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9178b93aeeabdfab7d2ff85cabd08fc8">&#9670;&#160;</a></span>pitch</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.pitch</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a934e06a3529a1e439fa475f99a1f313e" name="a934e06a3529a1e439fa475f99a1f313e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a934e06a3529a1e439fa475f99a1f313e">&#9670;&#160;</a></span>radius</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.radius</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad64f7253858e72fe031d0695219f343e" name="ad64f7253858e72fe031d0695219f343e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad64f7253858e72fe031d0695219f343e">&#9670;&#160;</a></span>scale</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.scale</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9c51cb448b29baf758080fe073a38558" name="a9c51cb448b29baf758080fe073a38558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c51cb448b29baf758080fe073a38558">&#9670;&#160;</a></span>shoulder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.shoulder</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad1f395cfb14ba7b70e7f5c5daab9f333" name="ad1f395cfb14ba7b70e7f5c5daab9f333"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f395cfb14ba7b70e7f5c5daab9f333">&#9670;&#160;</a></span>tolerance</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.tolerance</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aee04e3cc09339db7c145307e47f41f0c" name="aee04e3cc09339db7c145307e47f41f0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee04e3cc09339db7c145307e47f41f0c">&#9670;&#160;</a></span>unit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">matplotlib.sankey.Sankey.unit</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/rafael/Documents/GitHub/PUC-GCES-PY/Tp-GCS-Rafael-Augusto/venv/lib/python3.9/site-packages/matplotlib/<a class="el" href="sankey_8py.html">sankey.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
