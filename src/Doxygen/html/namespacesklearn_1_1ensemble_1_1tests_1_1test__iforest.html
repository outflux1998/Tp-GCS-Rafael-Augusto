<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.ensemble.tests.test_iforest Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1ensemble.html">ensemble</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html">test_iforest</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sklearn.ensemble.tests.test_iforest Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a47c96471b5c5f44185e40da26d57b696" id="r_a47c96471b5c5f44185e40da26d57b696"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a47c96471b5c5f44185e40da26d57b696">test_iforest</a> (global_random_seed)</td></tr>
<tr class="separator:a47c96471b5c5f44185e40da26d57b696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a497cfd48661de05fc2da07077987fa5e" id="r_a497cfd48661de05fc2da07077987fa5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a497cfd48661de05fc2da07077987fa5e">test_iforest_sparse</a> (global_random_seed)</td></tr>
<tr class="separator:a497cfd48661de05fc2da07077987fa5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5303cc5849d0de11a05b3721e13b016" id="r_ab5303cc5849d0de11a05b3721e13b016"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#ab5303cc5849d0de11a05b3721e13b016">test_iforest_error</a> ()</td></tr>
<tr class="separator:ab5303cc5849d0de11a05b3721e13b016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2aeb574cb5e9b2f5071576ce4d53531" id="r_ae2aeb574cb5e9b2f5071576ce4d53531"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#ae2aeb574cb5e9b2f5071576ce4d53531">test_recalculate_max_depth</a> ()</td></tr>
<tr class="separator:ae2aeb574cb5e9b2f5071576ce4d53531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a994d9ad8f1fb4f22271d7b9efe2d19" id="r_a7a994d9ad8f1fb4f22271d7b9efe2d19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a7a994d9ad8f1fb4f22271d7b9efe2d19">test_max_samples_attribute</a> ()</td></tr>
<tr class="separator:a7a994d9ad8f1fb4f22271d7b9efe2d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab75cba24ea037d145c9b4c81c6910dda" id="r_ab75cba24ea037d145c9b4c81c6910dda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#ab75cba24ea037d145c9b4c81c6910dda">test_iforest_parallel_regression</a> (global_random_seed)</td></tr>
<tr class="separator:ab75cba24ea037d145c9b4c81c6910dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56945852c8469a7c920458904e78d67e" id="r_a56945852c8469a7c920458904e78d67e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a56945852c8469a7c920458904e78d67e">test_iforest_performance</a> (global_random_seed)</td></tr>
<tr class="separator:a56945852c8469a7c920458904e78d67e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23f52f7fbd1165f2d57bd6d77f51644" id="r_ae23f52f7fbd1165f2d57bd6d77f51644"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#ae23f52f7fbd1165f2d57bd6d77f51644">test_iforest_works</a> (contamination, global_random_seed)</td></tr>
<tr class="separator:ae23f52f7fbd1165f2d57bd6d77f51644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ec8a96b95a52901947f83051650ec66" id="r_a0ec8a96b95a52901947f83051650ec66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a0ec8a96b95a52901947f83051650ec66">test_max_samples_consistency</a> ()</td></tr>
<tr class="separator:a0ec8a96b95a52901947f83051650ec66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7990e9e84e76e6270f2e912112e45f80" id="r_a7990e9e84e76e6270f2e912112e45f80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a7990e9e84e76e6270f2e912112e45f80">test_iforest_subsampled_features</a> ()</td></tr>
<tr class="separator:a7990e9e84e76e6270f2e912112e45f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e8cc03d41197877836f9f4facb8f65b" id="r_a7e8cc03d41197877836f9f4facb8f65b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a7e8cc03d41197877836f9f4facb8f65b">test_iforest_average_path_length</a> ()</td></tr>
<tr class="separator:a7e8cc03d41197877836f9f4facb8f65b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199d88cbb08ef93249a9ab118442e071" id="r_a199d88cbb08ef93249a9ab118442e071"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a199d88cbb08ef93249a9ab118442e071">test_score_samples</a> ()</td></tr>
<tr class="separator:a199d88cbb08ef93249a9ab118442e071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a621c09eb0b8cd57882eaa3ddddcf5d43" id="r_a621c09eb0b8cd57882eaa3ddddcf5d43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a621c09eb0b8cd57882eaa3ddddcf5d43">test_iforest_warm_start</a> ()</td></tr>
<tr class="separator:a621c09eb0b8cd57882eaa3ddddcf5d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b2be7e6bdab534ca199f51f7c8ae85" id="r_a27b2be7e6bdab534ca199f51f7c8ae85"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a27b2be7e6bdab534ca199f51f7c8ae85">test_iforest_chunks_works1</a> (mocked_get_chunk, contamination, n_predict_calls, global_random_seed)</td></tr>
<tr class="separator:a27b2be7e6bdab534ca199f51f7c8ae85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae097a841dc20b0a9f9b703c2ef537d52" id="r_ae097a841dc20b0a9f9b703c2ef537d52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#ae097a841dc20b0a9f9b703c2ef537d52">test_iforest_chunks_works2</a> (mocked_get_chunk, contamination, n_predict_calls, global_random_seed)</td></tr>
<tr class="separator:ae097a841dc20b0a9f9b703c2ef537d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ec4719ec1f13f81eb07fa9c8a79fbd7" id="r_a7ec4719ec1f13f81eb07fa9c8a79fbd7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a7ec4719ec1f13f81eb07fa9c8a79fbd7">test_iforest_with_uniform_data</a> ()</td></tr>
<tr class="separator:a7ec4719ec1f13f81eb07fa9c8a79fbd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b82830d985408c3a26cab681f34f32e" id="r_a6b82830d985408c3a26cab681f34f32e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a6b82830d985408c3a26cab681f34f32e">test_iforest_with_n_jobs_does_not_segfault</a> ()</td></tr>
<tr class="separator:a6b82830d985408c3a26cab681f34f32e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac180574c6729a3a1be8d8b96472b8f4b" id="r_ac180574c6729a3a1be8d8b96472b8f4b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#ac180574c6729a3a1be8d8b96472b8f4b">test_base_estimator_property_deprecated</a> ()</td></tr>
<tr class="separator:ac180574c6729a3a1be8d8b96472b8f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a19a56d127a10c6811f1cd6f9bdb9fc8d" id="r_a19a56d127a10c6811f1cd6f9bdb9fc8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a19a56d127a10c6811f1cd6f9bdb9fc8d">iris</a> = load_iris()</td></tr>
<tr class="separator:a19a56d127a10c6811f1cd6f9bdb9fc8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77af44161865a00df043fb37c5f6909f" id="r_a77af44161865a00df043fb37c5f6909f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1ensemble_1_1tests_1_1test__iforest.html#a77af44161865a00df043fb37c5f6909f">diabetes</a> = load_diabetes()</td></tr>
<tr class="separator:a77af44161865a00df043fb37c5f6909f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Testing for Isolation Forest algorithm (sklearn.ensemble.iforest).
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="ac180574c6729a3a1be8d8b96472b8f4b" name="ac180574c6729a3a1be8d8b96472b8f4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac180574c6729a3a1be8d8b96472b8f4b">&#9670;&#160;</a></span>test_base_estimator_property_deprecated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_base_estimator_property_deprecated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  330</span><span class="keyword">def </span>test_base_estimator_property_deprecated():</div>
<div class="line"><span class="lineno">  331</span>    X = np.array([[1, 2], [3, 4]])</div>
<div class="line"><span class="lineno">  332</span>    y = np.array([1, 0])</div>
<div class="line"><span class="lineno">  333</span>    model = IsolationForest()</div>
<div class="line"><span class="lineno">  334</span>    model.fit(X, y)</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>    warn_msg = (</div>
<div class="line"><span class="lineno">  337</span>        <span class="stringliteral">&quot;Attribute `base_estimator_` was deprecated in version 1.2 and &quot;</span></div>
<div class="line"><span class="lineno">  338</span>        <span class="stringliteral">&quot;will be removed in 1.4. Use `estimator_` instead.&quot;</span></div>
<div class="line"><span class="lineno">  339</span>    )</div>
<div class="line"><span class="lineno">  340</span>    <span class="keyword">with</span> pytest.warns(FutureWarning, match=warn_msg):</div>
<div class="line"><span class="lineno">  341</span>        model.base_estimator_</div>
</div><!-- fragment -->
</div>
</div>
<a id="a47c96471b5c5f44185e40da26d57b696" name="a47c96471b5c5f44185e40da26d57b696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c96471b5c5f44185e40da26d57b696">&#9670;&#160;</a></span>test_iforest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check Isolation Forest for various parameter settings.</pre> <div class="fragment"><div class="line"><span class="lineno">   36</span><span class="keyword">def </span>test_iforest(global_random_seed):</div>
<div class="line"><span class="lineno">   37</span>    <span class="stringliteral">&quot;&quot;&quot;Check Isolation Forest for various parameter settings.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   38</span>    X_train = np.array([[0, 1], [1, 2]])</div>
<div class="line"><span class="lineno">   39</span>    X_test = np.array([[2, 1], [1, 1]])</div>
<div class="line"><span class="lineno">   40</span> </div>
<div class="line"><span class="lineno">   41</span>    grid = ParameterGrid(</div>
<div class="line"><span class="lineno">   42</span>        {<span class="stringliteral">&quot;n_estimators&quot;</span>: [3], <span class="stringliteral">&quot;max_samples&quot;</span>: [0.5, 1.0, 3], <span class="stringliteral">&quot;bootstrap&quot;</span>: [<span class="keyword">True</span>, <span class="keyword">False</span>]}</div>
<div class="line"><span class="lineno">   43</span>    )</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>    <span class="keyword">with</span> ignore_warnings():</div>
<div class="line"><span class="lineno">   46</span>        <span class="keywordflow">for</span> params <span class="keywordflow">in</span> grid:</div>
<div class="line"><span class="lineno">   47</span>            IsolationForest(random_state=global_random_seed, **params).fit(</div>
<div class="line"><span class="lineno">   48</span>                X_train</div>
<div class="line"><span class="lineno">   49</span>            ).predict(X_test)</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e8cc03d41197877836f9f4facb8f65b" name="a7e8cc03d41197877836f9f4facb8f65b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e8cc03d41197877836f9f4facb8f65b">&#9670;&#160;</a></span>test_iforest_average_path_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_average_path_length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  200</span><span class="keyword">def </span>test_iforest_average_path_length():</div>
<div class="line"><span class="lineno">  201</span>    <span class="comment"># It tests non-regression for #8549 which used the wrong formula</span></div>
<div class="line"><span class="lineno">  202</span>    <span class="comment"># for average path length, strictly for the integer case</span></div>
<div class="line"><span class="lineno">  203</span>    <span class="comment"># Updated to check average path length when input is &lt;= 2 (issue #11839)</span></div>
<div class="line"><span class="lineno">  204</span>    result_one = 2.0 * (np.log(4.0) + np.euler_gamma) - 2.0 * 4.0 / 5.0</div>
<div class="line"><span class="lineno">  205</span>    result_two = 2.0 * (np.log(998.0) + np.euler_gamma) - 2.0 * 998.0 / 999.0</div>
<div class="line"><span class="lineno">  206</span>    assert_allclose(_average_path_length([0]), [0.0])</div>
<div class="line"><span class="lineno">  207</span>    assert_allclose(_average_path_length([1]), [0.0])</div>
<div class="line"><span class="lineno">  208</span>    assert_allclose(_average_path_length([2]), [1.0])</div>
<div class="line"><span class="lineno">  209</span>    assert_allclose(_average_path_length([5]), [result_one])</div>
<div class="line"><span class="lineno">  210</span>    assert_allclose(_average_path_length([999]), [result_two])</div>
<div class="line"><span class="lineno">  211</span>    assert_allclose(</div>
<div class="line"><span class="lineno">  212</span>        _average_path_length(np.array([1, 2, 5, 999])),</div>
<div class="line"><span class="lineno">  213</span>        [0.0, 1.0, result_one, result_two],</div>
<div class="line"><span class="lineno">  214</span>    )</div>
<div class="line"><span class="lineno">  215</span>    <span class="comment"># _average_path_length is increasing</span></div>
<div class="line"><span class="lineno">  216</span>    avg_path_length = _average_path_length(np.arange(5))</div>
<div class="line"><span class="lineno">  217</span>    assert_array_equal(avg_path_length, np.sort(avg_path_length))</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a27b2be7e6bdab534ca199f51f7c8ae85" name="a27b2be7e6bdab534ca199f51f7c8ae85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27b2be7e6bdab534ca199f51f7c8ae85">&#9670;&#160;</a></span>test_iforest_chunks_works1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_chunks_works1 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mocked_get_chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>contamination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_predict_calls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  267</span>):</div>
<div class="line"><span class="lineno">  268</span>    test_iforest_works(contamination, global_random_seed)</div>
<div class="line"><span class="lineno">  269</span>    <span class="keyword">assert</span> mocked_get_chunk.call_count == n_predict_calls</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span><span class="comment"># idem with chunk_size = 10 rows</span></div>
<div class="line"><span class="lineno">  273</span><span class="preprocessor">@patch</span>(</div>
<div class="line"><span class="lineno">  274</span>    <span class="stringliteral">&quot;sklearn.ensemble._iforest.get_chunk_n_rows&quot;</span>,</div>
<div class="line"><span class="lineno">  275</span>    side_effect=Mock(**{<span class="stringliteral">&quot;return_value&quot;</span>: 10}),</div>
<div class="line"><span class="lineno">  276</span>)</div>
<div class="line"><span class="lineno">  277</span><span class="preprocessor">@pytest.mark.parametrize(&quot;contamination, n_predict_calls&quot;, [(0.25, 3)</span>, (<span class="stringliteral">&quot;auto&quot;</span>, 2)])</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae097a841dc20b0a9f9b703c2ef537d52" name="ae097a841dc20b0a9f9b703c2ef537d52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae097a841dc20b0a9f9b703c2ef537d52">&#9670;&#160;</a></span>test_iforest_chunks_works2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_chunks_works2 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mocked_get_chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>contamination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_predict_calls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  280</span>):</div>
<div class="line"><span class="lineno">  281</span>    test_iforest_works(contamination, global_random_seed)</div>
<div class="line"><span class="lineno">  282</span>    <span class="keyword">assert</span> mocked_get_chunk.call_count == n_predict_calls</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5303cc5849d0de11a05b3721e13b016" name="ab5303cc5849d0de11a05b3721e13b016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5303cc5849d0de11a05b3721e13b016">&#9670;&#160;</a></span>test_iforest_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that it gives proper exception on deficient input.</pre> <div class="fragment"><div class="line"><span class="lineno">   78</span><span class="keyword">def </span>test_iforest_error():</div>
<div class="line"><span class="lineno">   79</span>    <span class="stringliteral">&quot;&quot;&quot;Test that it gives proper exception on deficient input.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   80</span>    X = iris.data</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="comment"># The dataset has less than 256 samples, explicitly setting</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="comment"># max_samples &gt; n_samples should result in a warning. If not set</span></div>
<div class="line"><span class="lineno">   84</span>    <span class="comment"># explicitly there should be no warning</span></div>
<div class="line"><span class="lineno">   85</span>    warn_msg = <span class="stringliteral">&quot;max_samples will be set to n_samples for estimation&quot;</span></div>
<div class="line"><span class="lineno">   86</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=warn_msg):</div>
<div class="line"><span class="lineno">   87</span>        IsolationForest(max_samples=1000).fit(X)</div>
<div class="line"><span class="lineno">   88</span>    <span class="keyword">with</span> warnings.catch_warnings():</div>
<div class="line"><span class="lineno">   89</span>        warnings.simplefilter(<span class="stringliteral">&quot;error&quot;</span>, UserWarning)</div>
<div class="line"><span class="lineno">   90</span>        IsolationForest(max_samples=<span class="stringliteral">&quot;auto&quot;</span>).fit(X)</div>
<div class="line"><span class="lineno">   91</span>    <span class="keyword">with</span> warnings.catch_warnings():</div>
<div class="line"><span class="lineno">   92</span>        warnings.simplefilter(<span class="stringliteral">&quot;error&quot;</span>, UserWarning)</div>
<div class="line"><span class="lineno">   93</span>        IsolationForest(max_samples=np.int64(2)).fit(X)</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    <span class="comment"># test X_test n_features match X_train one:</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno">   97</span>        IsolationForest().fit(X).predict(X[:, 1:])</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab75cba24ea037d145c9b4c81c6910dda" name="ab75cba24ea037d145c9b4c81c6910dda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab75cba24ea037d145c9b4c81c6910dda">&#9670;&#160;</a></span>test_iforest_parallel_regression()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_parallel_regression </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check parallel regression.</pre> <div class="fragment"><div class="line"><span class="lineno">  123</span><span class="keyword">def </span>test_iforest_parallel_regression(global_random_seed):</div>
<div class="line"><span class="lineno">  124</span>    <span class="stringliteral">&quot;&quot;&quot;Check parallel regression.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  125</span>    rng = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>    X_train, X_test = train_test_split(diabetes.data, random_state=rng)</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>    ensemble = IsolationForest(n_jobs=3, random_state=global_random_seed).fit(X_train)</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    ensemble.set_params(n_jobs=1)</div>
<div class="line"><span class="lineno">  132</span>    y1 = ensemble.predict(X_test)</div>
<div class="line"><span class="lineno">  133</span>    ensemble.set_params(n_jobs=2)</div>
<div class="line"><span class="lineno">  134</span>    y2 = ensemble.predict(X_test)</div>
<div class="line"><span class="lineno">  135</span>    assert_array_almost_equal(y1, y2)</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    ensemble = IsolationForest(n_jobs=1, random_state=global_random_seed).fit(X_train)</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    y3 = ensemble.predict(X_test)</div>
<div class="line"><span class="lineno">  140</span>    assert_array_almost_equal(y1, y3)</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a56945852c8469a7c920458904e78d67e" name="a56945852c8469a7c920458904e78d67e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56945852c8469a7c920458904e78d67e">&#9670;&#160;</a></span>test_iforest_performance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_performance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test Isolation Forest performs well</pre> <div class="fragment"><div class="line"><span class="lineno">  143</span><span class="keyword">def </span>test_iforest_performance(global_random_seed):</div>
<div class="line"><span class="lineno">  144</span>    <span class="stringliteral">&quot;&quot;&quot;Test Isolation Forest performs well&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>    <span class="comment"># Generate train/test data</span></div>
<div class="line"><span class="lineno">  147</span>    rng = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">  148</span>    X = 0.3 * rng.randn(600, 2)</div>
<div class="line"><span class="lineno">  149</span>    X = rng.permutation(np.vstack((X + 2, X - 2)))</div>
<div class="line"><span class="lineno">  150</span>    X_train = X[:1000]</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    <span class="comment"># Generate some abnormal novel observations</span></div>
<div class="line"><span class="lineno">  153</span>    X_outliers = rng.uniform(low=-1, high=1, size=(200, 2))</div>
<div class="line"><span class="lineno">  154</span>    X_test = np.vstack((X[1000:], X_outliers))</div>
<div class="line"><span class="lineno">  155</span>    y_test = np.array([0] * 200 + [1] * 200)</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    <span class="comment"># fit the model</span></div>
<div class="line"><span class="lineno">  158</span>    clf = IsolationForest(max_samples=100, random_state=rng).fit(X_train)</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    <span class="comment"># predict scores (the lower, the more normal)</span></div>
<div class="line"><span class="lineno">  161</span>    y_pred = -clf.decision_function(X_test)</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="comment"># check that there is at most 6 errors (false positive or false negative)</span></div>
<div class="line"><span class="lineno">  164</span>    <span class="keyword">assert</span> roc_auc_score(y_test, y_pred) &gt; 0.98</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span><span class="preprocessor">@pytest.mark.parametrize(&quot;contamination&quot;, [0.25, &quot;auto&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a497cfd48661de05fc2da07077987fa5e" name="a497cfd48661de05fc2da07077987fa5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a497cfd48661de05fc2da07077987fa5e">&#9670;&#160;</a></span>test_iforest_sparse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_sparse </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check IForest for various parameter settings on sparse input.</pre> <div class="fragment"><div class="line"><span class="lineno">   52</span><span class="keyword">def </span>test_iforest_sparse(global_random_seed):</div>
<div class="line"><span class="lineno">   53</span>    <span class="stringliteral">&quot;&quot;&quot;Check IForest for various parameter settings on sparse input.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   54</span>    rng = check_random_state(global_random_seed)</div>
<div class="line"><span class="lineno">   55</span>    X_train, X_test = train_test_split(diabetes.data[:50], random_state=rng)</div>
<div class="line"><span class="lineno">   56</span>    grid = ParameterGrid({<span class="stringliteral">&quot;max_samples&quot;</span>: [0.5, 1.0], <span class="stringliteral">&quot;bootstrap&quot;</span>: [<span class="keyword">True</span>, <span class="keyword">False</span>]})</div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">for</span> sparse_format <span class="keywordflow">in</span> [csc_matrix, csr_matrix]:</div>
<div class="line"><span class="lineno">   59</span>        X_train_sparse = sparse_format(X_train)</div>
<div class="line"><span class="lineno">   60</span>        X_test_sparse = sparse_format(X_test)</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">for</span> params <span class="keywordflow">in</span> grid:</div>
<div class="line"><span class="lineno">   63</span>            <span class="comment"># Trained on sparse format</span></div>
<div class="line"><span class="lineno">   64</span>            sparse_classifier = IsolationForest(</div>
<div class="line"><span class="lineno">   65</span>                n_estimators=10, random_state=global_random_seed, **params</div>
<div class="line"><span class="lineno">   66</span>            ).fit(X_train_sparse)</div>
<div class="line"><span class="lineno">   67</span>            sparse_results = sparse_classifier.predict(X_test_sparse)</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>            <span class="comment"># Trained on dense format</span></div>
<div class="line"><span class="lineno">   70</span>            dense_classifier = IsolationForest(</div>
<div class="line"><span class="lineno">   71</span>                n_estimators=10, random_state=global_random_seed, **params</div>
<div class="line"><span class="lineno">   72</span>            ).fit(X_train)</div>
<div class="line"><span class="lineno">   73</span>            dense_results = dense_classifier.predict(X_test)</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span>            assert_array_equal(sparse_results, dense_results)</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7990e9e84e76e6270f2e912112e45f80" name="a7990e9e84e76e6270f2e912112e45f80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7990e9e84e76e6270f2e912112e45f80">&#9670;&#160;</a></span>test_iforest_subsampled_features()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_subsampled_features </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  189</span><span class="keyword">def </span>test_iforest_subsampled_features():</div>
<div class="line"><span class="lineno">  190</span>    <span class="comment"># It tests non-regression for #5732 which failed at predict.</span></div>
<div class="line"><span class="lineno">  191</span>    rng = check_random_state(0)</div>
<div class="line"><span class="lineno">  192</span>    X_train, X_test, y_train, y_test = train_test_split(</div>
<div class="line"><span class="lineno">  193</span>        diabetes.data[:50], diabetes.target[:50], random_state=rng</div>
<div class="line"><span class="lineno">  194</span>    )</div>
<div class="line"><span class="lineno">  195</span>    clf = IsolationForest(max_features=0.8)</div>
<div class="line"><span class="lineno">  196</span>    clf.fit(X_train, y_train)</div>
<div class="line"><span class="lineno">  197</span>    clf.predict(X_test)</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a621c09eb0b8cd57882eaa3ddddcf5d43" name="a621c09eb0b8cd57882eaa3ddddcf5d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a621c09eb0b8cd57882eaa3ddddcf5d43">&#9670;&#160;</a></span>test_iforest_warm_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_warm_start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test iterative addition of iTrees to an iForest</pre> <div class="fragment"><div class="line"><span class="lineno">  237</span><span class="keyword">def </span>test_iforest_warm_start():</div>
<div class="line"><span class="lineno">  238</span>    <span class="stringliteral">&quot;&quot;&quot;Test iterative addition of iTrees to an iForest&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    rng = check_random_state(0)</div>
<div class="line"><span class="lineno">  241</span>    X = rng.randn(20, 2)</div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>    <span class="comment"># fit first 10 trees</span></div>
<div class="line"><span class="lineno">  244</span>    clf = IsolationForest(</div>
<div class="line"><span class="lineno">  245</span>        n_estimators=10, max_samples=20, random_state=rng, warm_start=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">  246</span>    )</div>
<div class="line"><span class="lineno">  247</span>    clf.fit(X)</div>
<div class="line"><span class="lineno">  248</span>    <span class="comment"># remember the 1st tree</span></div>
<div class="line"><span class="lineno">  249</span>    tree_1 = clf.estimators_[0]</div>
<div class="line"><span class="lineno">  250</span>    <span class="comment"># fit another 10 trees</span></div>
<div class="line"><span class="lineno">  251</span>    clf.set_params(n_estimators=20)</div>
<div class="line"><span class="lineno">  252</span>    clf.fit(X)</div>
<div class="line"><span class="lineno">  253</span>    <span class="comment"># expecting 20 fitted trees and no overwritten trees</span></div>
<div class="line"><span class="lineno">  254</span>    <span class="keyword">assert</span> len(clf.estimators_) == 20</div>
<div class="line"><span class="lineno">  255</span>    <span class="keyword">assert</span> clf.estimators_[0] <span class="keywordflow">is</span> tree_1</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span><span class="comment"># mock get_chunk_n_rows to actually test more than one chunk (here one</span></div>
<div class="line"><span class="lineno">  259</span><span class="comment"># chunk has 3 rows):</span></div>
<div class="line"><span class="lineno">  260</span><span class="preprocessor">@patch</span>(</div>
<div class="line"><span class="lineno">  261</span>    <span class="stringliteral">&quot;sklearn.ensemble._iforest.get_chunk_n_rows&quot;</span>,</div>
<div class="line"><span class="lineno">  262</span>    side_effect=Mock(**{<span class="stringliteral">&quot;return_value&quot;</span>: 3}),</div>
<div class="line"><span class="lineno">  263</span>)</div>
<div class="line"><span class="lineno">  264</span><span class="preprocessor">@pytest.mark.parametrize(&quot;contamination, n_predict_calls&quot;, [(0.25, 3)</span>, (<span class="stringliteral">&quot;auto&quot;</span>, 2)])</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b82830d985408c3a26cab681f34f32e" name="a6b82830d985408c3a26cab681f34f32e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b82830d985408c3a26cab681f34f32e">&#9670;&#160;</a></span>test_iforest_with_n_jobs_does_not_segfault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_with_n_jobs_does_not_segfault </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that Isolation Forest does not segfault with n_jobs=2

Non-regression test for #23252
</pre> <div class="fragment"><div class="line"><span class="lineno">  319</span><span class="keyword">def </span>test_iforest_with_n_jobs_does_not_segfault():</div>
<div class="line"><span class="lineno">  320</span>    <span class="stringliteral">&quot;&quot;&quot;Check that Isolation Forest does not segfault with n_jobs=2</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    Non-regression test for #23252</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  324</span>    X, _ = make_classification(n_samples=85_000, n_features=100, random_state=0)</div>
<div class="line"><span class="lineno">  325</span>    X = csc_matrix(X)</div>
<div class="line"><span class="lineno">  326</span>    IsolationForest(n_estimators=10, max_samples=256, n_jobs=2).fit(X)</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span><span class="comment"># TODO(1.4): remove in 1.4</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7ec4719ec1f13f81eb07fa9c8a79fbd7" name="a7ec4719ec1f13f81eb07fa9c8a79fbd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ec4719ec1f13f81eb07fa9c8a79fbd7">&#9670;&#160;</a></span>test_iforest_with_uniform_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_with_uniform_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test whether iforest predicts inliers when using uniform data</pre> <div class="fragment"><div class="line"><span class="lineno">  285</span><span class="keyword">def </span>test_iforest_with_uniform_data():</div>
<div class="line"><span class="lineno">  286</span>    <span class="stringliteral">&quot;&quot;&quot;Test whether iforest predicts inliers when using uniform data&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>    <span class="comment"># 2-d array of all 1s</span></div>
<div class="line"><span class="lineno">  289</span>    X = np.ones((100, 10))</div>
<div class="line"><span class="lineno">  290</span>    iforest = IsolationForest()</div>
<div class="line"><span class="lineno">  291</span>    iforest.fit(X)</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>    <span class="keyword">assert</span> all(iforest.predict(X) == 1)</div>
<div class="line"><span class="lineno">  296</span>    <span class="keyword">assert</span> all(iforest.predict(rng.randn(100, 10)) == 1)</div>
<div class="line"><span class="lineno">  297</span>    <span class="keyword">assert</span> all(iforest.predict(X + 1) == 1)</div>
<div class="line"><span class="lineno">  298</span>    <span class="keyword">assert</span> all(iforest.predict(X - 1) == 1)</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span>    <span class="comment"># 2-d array where columns contain the same value across rows</span></div>
<div class="line"><span class="lineno">  301</span>    X = np.repeat(rng.randn(1, 10), 100, 0)</div>
<div class="line"><span class="lineno">  302</span>    iforest = IsolationForest()</div>
<div class="line"><span class="lineno">  303</span>    iforest.fit(X)</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>    <span class="keyword">assert</span> all(iforest.predict(X) == 1)</div>
<div class="line"><span class="lineno">  306</span>    <span class="keyword">assert</span> all(iforest.predict(rng.randn(100, 10)) == 1)</div>
<div class="line"><span class="lineno">  307</span>    <span class="keyword">assert</span> all(iforest.predict(np.ones((100, 10))) == 1)</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>    <span class="comment"># Single row</span></div>
<div class="line"><span class="lineno">  310</span>    X = rng.randn(1, 10)</div>
<div class="line"><span class="lineno">  311</span>    iforest = IsolationForest()</div>
<div class="line"><span class="lineno">  312</span>    iforest.fit(X)</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>    <span class="keyword">assert</span> all(iforest.predict(X) == 1)</div>
<div class="line"><span class="lineno">  315</span>    <span class="keyword">assert</span> all(iforest.predict(rng.randn(100, 10)) == 1)</div>
<div class="line"><span class="lineno">  316</span>    <span class="keyword">assert</span> all(iforest.predict(np.ones((100, 10))) == 1)</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae23f52f7fbd1165f2d57bd6d77f51644" name="ae23f52f7fbd1165f2d57bd6d77f51644"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae23f52f7fbd1165f2d57bd6d77f51644">&#9670;&#160;</a></span>test_iforest_works()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_iforest_works </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>contamination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  168</span><span class="keyword">def </span>test_iforest_works(contamination, global_random_seed):</div>
<div class="line"><span class="lineno">  169</span>    <span class="comment"># toy sample (the last two samples are outliers)</span></div>
<div class="line"><span class="lineno">  170</span>    X = [[-2, -1], [-1, -1], [-1, -2], [1, 1], [1, 2], [2, 1], [7, 4], [-5, 9]]</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>    <span class="comment"># Test IsolationForest</span></div>
<div class="line"><span class="lineno">  173</span>    clf = IsolationForest(random_state=global_random_seed, contamination=contamination)</div>
<div class="line"><span class="lineno">  174</span>    clf.fit(X)</div>
<div class="line"><span class="lineno">  175</span>    decision_func = -clf.decision_function(X)</div>
<div class="line"><span class="lineno">  176</span>    pred = clf.predict(X)</div>
<div class="line"><span class="lineno">  177</span>    <span class="comment"># assert detect outliers:</span></div>
<div class="line"><span class="lineno">  178</span>    <span class="keyword">assert</span> np.min(decision_func[-2:]) &gt; np.max(decision_func[:-2])</div>
<div class="line"><span class="lineno">  179</span>    assert_array_equal(pred, 6 * [1] + 2 * [-1])</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a994d9ad8f1fb4f22271d7b9efe2d19" name="a7a994d9ad8f1fb4f22271d7b9efe2d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a994d9ad8f1fb4f22271d7b9efe2d19">&#9670;&#160;</a></span>test_max_samples_attribute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_max_samples_attribute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  108</span><span class="keyword">def </span>test_max_samples_attribute():</div>
<div class="line"><span class="lineno">  109</span>    X = iris.data</div>
<div class="line"><span class="lineno">  110</span>    clf = IsolationForest().fit(X)</div>
<div class="line"><span class="lineno">  111</span>    <span class="keyword">assert</span> clf.max_samples_ == X.shape[0]</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>    clf = IsolationForest(max_samples=500)</div>
<div class="line"><span class="lineno">  114</span>    warn_msg = <span class="stringliteral">&quot;max_samples will be set to n_samples for estimation&quot;</span></div>
<div class="line"><span class="lineno">  115</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=warn_msg):</div>
<div class="line"><span class="lineno">  116</span>        clf.fit(X)</div>
<div class="line"><span class="lineno">  117</span>    <span class="keyword">assert</span> clf.max_samples_ == X.shape[0]</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>    clf = IsolationForest(max_samples=0.4).fit(X)</div>
<div class="line"><span class="lineno">  120</span>    <span class="keyword">assert</span> clf.max_samples_ == 0.4 * X.shape[0]</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ec8a96b95a52901947f83051650ec66" name="a0ec8a96b95a52901947f83051650ec66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ec8a96b95a52901947f83051650ec66">&#9670;&#160;</a></span>test_max_samples_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_max_samples_consistency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  182</span><span class="keyword">def </span>test_max_samples_consistency():</div>
<div class="line"><span class="lineno">  183</span>    <span class="comment"># Make sure validated max_samples in iforest and BaseBagging are identical</span></div>
<div class="line"><span class="lineno">  184</span>    X = iris.data</div>
<div class="line"><span class="lineno">  185</span>    clf = IsolationForest().fit(X)</div>
<div class="line"><span class="lineno">  186</span>    <span class="keyword">assert</span> clf.max_samples_ == clf._max_samples</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2aeb574cb5e9b2f5071576ce4d53531" name="ae2aeb574cb5e9b2f5071576ce4d53531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2aeb574cb5e9b2f5071576ce4d53531">&#9670;&#160;</a></span>test_recalculate_max_depth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_recalculate_max_depth </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check max_depth recalculation when max_samples is reset to n_samples</pre> <div class="fragment"><div class="line"><span class="lineno">  100</span><span class="keyword">def </span>test_recalculate_max_depth():</div>
<div class="line"><span class="lineno">  101</span>    <span class="stringliteral">&quot;&quot;&quot;Check max_depth recalculation when max_samples is reset to n_samples&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  102</span>    X = iris.data</div>
<div class="line"><span class="lineno">  103</span>    clf = IsolationForest().fit(X)</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">for</span> est <span class="keywordflow">in</span> clf.estimators_:</div>
<div class="line"><span class="lineno">  105</span>        <span class="keyword">assert</span> est.max_depth == int(np.ceil(np.log2(X.shape[0])))</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a199d88cbb08ef93249a9ab118442e071" name="a199d88cbb08ef93249a9ab118442e071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a199d88cbb08ef93249a9ab118442e071">&#9670;&#160;</a></span>test_score_samples()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.test_score_samples </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  220</span><span class="keyword">def </span>test_score_samples():</div>
<div class="line"><span class="lineno">  221</span>    X_train = [[1, 1], [1, 2], [2, 1]]</div>
<div class="line"><span class="lineno">  222</span>    clf1 = IsolationForest(contamination=0.1).fit(X_train)</div>
<div class="line"><span class="lineno">  223</span>    clf2 = IsolationForest().fit(X_train)</div>
<div class="line"><span class="lineno">  224</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">  225</span>        clf1.score_samples([[2.0, 2.0]]),</div>
<div class="line"><span class="lineno">  226</span>        clf1.decision_function([[2.0, 2.0]]) + clf1.offset_,</div>
<div class="line"><span class="lineno">  227</span>    )</div>
<div class="line"><span class="lineno">  228</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">  229</span>        clf2.score_samples([[2.0, 2.0]]),</div>
<div class="line"><span class="lineno">  230</span>        clf2.decision_function([[2.0, 2.0]]) + clf2.offset_,</div>
<div class="line"><span class="lineno">  231</span>    )</div>
<div class="line"><span class="lineno">  232</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">  233</span>        clf1.score_samples([[2.0, 2.0]]), clf2.score_samples([[2.0, 2.0]])</div>
<div class="line"><span class="lineno">  234</span>    )</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a77af44161865a00df043fb37c5f6909f" name="a77af44161865a00df043fb37c5f6909f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77af44161865a00df043fb37c5f6909f">&#9670;&#160;</a></span>diabetes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.diabetes = load_diabetes()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a19a56d127a10c6811f1cd6f9bdb9fc8d" name="a19a56d127a10c6811f1cd6f9bdb9fc8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19a56d127a10c6811f1cd6f9bdb9fc8d">&#9670;&#160;</a></span>iris</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.ensemble.tests.test_iforest.iris = load_iris()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
