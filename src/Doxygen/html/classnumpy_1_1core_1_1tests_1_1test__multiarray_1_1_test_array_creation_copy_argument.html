<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenumpy.html">numpy</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core.html">core</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core_1_1tests_1_1test__multiarray.html">test_multiarray</a></li><li class="navelem"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html">TestArrayCreationCopyArgument</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument_1_1_raise_on_bool.html">RaiseOnBool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8f95508522a70f2706a375c366e66f2e" id="r_a8f95508522a70f2706a375c366e66f2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a8f95508522a70f2706a375c366e66f2e">test_scalars</a> (self)</td></tr>
<tr class="separator:a8f95508522a70f2706a375c366e66f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b46dd174ff412e1b972dd9ebd6194e7" id="r_a8b46dd174ff412e1b972dd9ebd6194e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a8b46dd174ff412e1b972dd9ebd6194e7">test_compatible_cast</a> (self)</td></tr>
<tr class="separator:a8b46dd174ff412e1b972dd9ebd6194e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e41d50bc38462a81ed89ff73fed895" id="r_a35e41d50bc38462a81ed89ff73fed895"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a35e41d50bc38462a81ed89ff73fed895">test_buffer_interface</a> (self)</td></tr>
<tr class="separator:a35e41d50bc38462a81ed89ff73fed895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61248939d98b2271f1b5148650883566" id="r_a61248939d98b2271f1b5148650883566"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a61248939d98b2271f1b5148650883566">test_array_interfaces</a> (self)</td></tr>
<tr class="separator:a61248939d98b2271f1b5148650883566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67969663f0b66552344917d31d70360a" id="r_a67969663f0b66552344917d31d70360a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a67969663f0b66552344917d31d70360a">test___array__</a> (self)</td></tr>
<tr class="separator:a67969663f0b66552344917d31d70360a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bdbcc8ff618f8a4149c73423db05ee5" id="r_a8bdbcc8ff618f8a4149c73423db05ee5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a8bdbcc8ff618f8a4149c73423db05ee5">test_order_mismatch</a> (self, arr, order1, order2)</td></tr>
<tr class="separator:a8bdbcc8ff618f8a4149c73423db05ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27055d1225dacb475842db2a01a58f56" id="r_a27055d1225dacb475842db2a01a58f56"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a27055d1225dacb475842db2a01a58f56">test_striding_not_ok</a> (self)</td></tr>
<tr class="separator:a27055d1225dacb475842db2a01a58f56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a0576fa2d20538bc0b2e9e701e4a246e0" id="r_a0576fa2d20538bc0b2e9e701e4a246e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a0576fa2d20538bc0b2e9e701e4a246e0">true_vals</a></td></tr>
<tr class="separator:a0576fa2d20538bc0b2e9e701e4a246e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121d65ef0f7f0470cb6bc7f4c007967e" id="r_a121d65ef0f7f0470cb6bc7f4c007967e"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_array_creation_copy_argument.html#a121d65ef0f7f0470cb6bc7f4c007967e">false_vals</a> = [False, np._CopyMode.IF_NEEDED, np.False_]</td></tr>
<tr class="separator:a121d65ef0f7f0470cb6bc7f4c007967e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a67969663f0b66552344917d31d70360a" name="a67969663f0b66552344917d31d70360a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67969663f0b66552344917d31d70360a">&#9670;&#160;</a></span>test___array__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.test___array__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 8289</span>    <span class="keyword">def </span>test___array__(self):</div>
<div class="line"><span class="lineno"> 8290</span>        base_arr = np.arange(10)</div>
<div class="line"><span class="lineno"> 8291</span> </div>
<div class="line"><span class="lineno"> 8292</span>        <span class="keyword">class </span>ArrayLike:</div>
<div class="line"><span class="lineno"> 8293</span>            <span class="keyword">def </span>__array__(self):</div>
<div class="line"><span class="lineno"> 8294</span>                <span class="comment"># __array__ should return a copy, numpy cannot know this</span></div>
<div class="line"><span class="lineno"> 8295</span>                <span class="comment"># however.</span></div>
<div class="line"><span class="lineno"> 8296</span>                <span class="keywordflow">return</span> base_arr</div>
<div class="line"><span class="lineno"> 8297</span> </div>
<div class="line"><span class="lineno"> 8298</span>        arr = ArrayLike()</div>
<div class="line"><span class="lineno"> 8299</span> </div>
<div class="line"><span class="lineno"> 8300</span>        <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.true_vals:</div>
<div class="line"><span class="lineno"> 8301</span>            res = np.array(arr, copy=copy)</div>
<div class="line"><span class="lineno"> 8302</span>            assert_array_equal(res, base_arr)</div>
<div class="line"><span class="lineno"> 8303</span>            <span class="comment"># An additional copy is currently forced by numpy in this case,</span></div>
<div class="line"><span class="lineno"> 8304</span>            <span class="comment"># you could argue, numpy does not trust the ArrayLike. This</span></div>
<div class="line"><span class="lineno"> 8305</span>            <span class="comment"># may be open for change:</span></div>
<div class="line"><span class="lineno"> 8306</span>            <span class="keyword">assert</span> res <span class="keywordflow">is</span> <span class="keywordflow">not</span> base_arr</div>
<div class="line"><span class="lineno"> 8307</span> </div>
<div class="line"><span class="lineno"> 8308</span>        <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.false_vals:</div>
<div class="line"><span class="lineno"> 8309</span>            res = np.array(arr, copy=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 8310</span>            assert_array_equal(res, base_arr)</div>
<div class="line"><span class="lineno"> 8311</span>            <span class="keyword">assert</span> res <span class="keywordflow">is</span> base_arr  <span class="comment"># numpy trusts the ArrayLike</span></div>
<div class="line"><span class="lineno"> 8312</span> </div>
<div class="line"><span class="lineno"> 8313</span>        <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 8314</span>            np.array(arr, copy=np._CopyMode.NEVER)</div>
<div class="line"><span class="lineno"> 8315</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a61248939d98b2271f1b5148650883566" name="a61248939d98b2271f1b5148650883566"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61248939d98b2271f1b5148650883566">&#9670;&#160;</a></span>test_array_interfaces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.test_array_interfaces </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 8274</span>    <span class="keyword">def </span>test_array_interfaces(self):</div>
<div class="line"><span class="lineno"> 8275</span>        <span class="comment"># Array interface gives direct memory access (much like a memoryview)</span></div>
<div class="line"><span class="lineno"> 8276</span>        base_arr = np.arange(10)</div>
<div class="line"><span class="lineno"> 8277</span> </div>
<div class="line"><span class="lineno"> 8278</span>        <span class="keyword">class </span>ArrayLike:</div>
<div class="line"><span class="lineno"> 8279</span>            __array_interface__ = base_arr.__array_interface__</div>
<div class="line"><span class="lineno"> 8280</span> </div>
<div class="line"><span class="lineno"> 8281</span>        arr = ArrayLike()</div>
<div class="line"><span class="lineno"> 8282</span> </div>
<div class="line"><span class="lineno"> 8283</span>        <span class="keywordflow">for</span> copy, val <span class="keywordflow">in</span> [(<span class="keyword">True</span>, <span class="keywordtype">None</span>), (np._CopyMode.ALWAYS, <span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno"> 8284</span>                          (<span class="keyword">False</span>, arr), (np._CopyMode.IF_NEEDED, arr),</div>
<div class="line"><span class="lineno"> 8285</span>                          (np._CopyMode.NEVER, arr)]:</div>
<div class="line"><span class="lineno"> 8286</span>            res = np.array(arr, copy=copy)</div>
<div class="line"><span class="lineno"> 8287</span>            <span class="keyword">assert</span> res.base <span class="keywordflow">is</span> val</div>
<div class="line"><span class="lineno"> 8288</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a35e41d50bc38462a81ed89ff73fed895" name="a35e41d50bc38462a81ed89ff73fed895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35e41d50bc38462a81ed89ff73fed895">&#9670;&#160;</a></span>test_buffer_interface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.test_buffer_interface </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 8257</span>    <span class="keyword">def </span>test_buffer_interface(self):</div>
<div class="line"><span class="lineno"> 8258</span> </div>
<div class="line"><span class="lineno"> 8259</span>        <span class="comment"># Buffer interface gives direct memory access (no copy)</span></div>
<div class="line"><span class="lineno"> 8260</span>        arr = np.arange(10)</div>
<div class="line"><span class="lineno"> 8261</span>        view = memoryview(arr)</div>
<div class="line"><span class="lineno"> 8262</span> </div>
<div class="line"><span class="lineno"> 8263</span>        <span class="comment"># Checking bases is a bit tricky since numpy creates another</span></div>
<div class="line"><span class="lineno"> 8264</span>        <span class="comment"># memoryview, so use may_share_memory.</span></div>
<div class="line"><span class="lineno"> 8265</span>        <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.true_vals:</div>
<div class="line"><span class="lineno"> 8266</span>            res = np.array(view, copy=copy)</div>
<div class="line"><span class="lineno"> 8267</span>            <span class="keyword">assert</span> <span class="keywordflow">not</span> np.may_share_memory(arr, res)</div>
<div class="line"><span class="lineno"> 8268</span>        <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.false_vals:</div>
<div class="line"><span class="lineno"> 8269</span>            res = np.array(view, copy=copy)</div>
<div class="line"><span class="lineno"> 8270</span>            <span class="keyword">assert</span> np.may_share_memory(arr, res)</div>
<div class="line"><span class="lineno"> 8271</span>        res = np.array(view, copy=np._CopyMode.NEVER)</div>
<div class="line"><span class="lineno"> 8272</span>        <span class="keyword">assert</span> np.may_share_memory(arr, res)</div>
<div class="line"><span class="lineno"> 8273</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b46dd174ff412e1b972dd9ebd6194e7" name="a8b46dd174ff412e1b972dd9ebd6194e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b46dd174ff412e1b972dd9ebd6194e7">&#9670;&#160;</a></span>test_compatible_cast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.test_compatible_cast </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 8211</span>    <span class="keyword">def </span>test_compatible_cast(self):</div>
<div class="line"><span class="lineno"> 8212</span> </div>
<div class="line"><span class="lineno"> 8213</span>        <span class="comment"># Some types are compatible even though they are different, no</span></div>
<div class="line"><span class="lineno"> 8214</span>        <span class="comment"># copy is necessary for them. This is mostly true for some integers</span></div>
<div class="line"><span class="lineno"> 8215</span>        <span class="keyword">def </span>int_types(byteswap=False):</div>
<div class="line"><span class="lineno"> 8216</span>            int_types = (np.typecodes[<span class="stringliteral">&quot;Integer&quot;</span>] +</div>
<div class="line"><span class="lineno"> 8217</span>                         np.typecodes[<span class="stringliteral">&quot;UnsignedInteger&quot;</span>])</div>
<div class="line"><span class="lineno"> 8218</span>            <span class="keywordflow">for</span> int_type <span class="keywordflow">in</span> int_types:</div>
<div class="line"><span class="lineno"> 8219</span>                <span class="keywordflow">yield</span> np.dtype(int_type)</div>
<div class="line"><span class="lineno"> 8220</span>                <span class="keywordflow">if</span> byteswap:</div>
<div class="line"><span class="lineno"> 8221</span>                    <span class="keywordflow">yield</span> np.dtype(int_type).newbyteorder()</div>
<div class="line"><span class="lineno"> 8222</span> </div>
<div class="line"><span class="lineno"> 8223</span>        <span class="keywordflow">for</span> int1 <span class="keywordflow">in</span> int_types():</div>
<div class="line"><span class="lineno"> 8224</span>            <span class="keywordflow">for</span> int2 <span class="keywordflow">in</span> int_types(<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno"> 8225</span>                arr = np.arange(10, dtype=int1)</div>
<div class="line"><span class="lineno"> 8226</span> </div>
<div class="line"><span class="lineno"> 8227</span>                <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.true_vals:</div>
<div class="line"><span class="lineno"> 8228</span>                    res = np.array(arr, copy=copy, dtype=int2)</div>
<div class="line"><span class="lineno"> 8229</span>                    <span class="keyword">assert</span> res <span class="keywordflow">is</span> <span class="keywordflow">not</span> arr <span class="keywordflow">and</span> res.flags.owndata</div>
<div class="line"><span class="lineno"> 8230</span>                    assert_array_equal(res, arr)</div>
<div class="line"><span class="lineno"> 8231</span> </div>
<div class="line"><span class="lineno"> 8232</span>                <span class="keywordflow">if</span> int1 == int2:</div>
<div class="line"><span class="lineno"> 8233</span>                    <span class="comment"># Casting is not necessary, base check is sufficient here</span></div>
<div class="line"><span class="lineno"> 8234</span>                    <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.false_vals:</div>
<div class="line"><span class="lineno"> 8235</span>                        res = np.array(arr, copy=copy, dtype=int2)</div>
<div class="line"><span class="lineno"> 8236</span>                        <span class="keyword">assert</span> res <span class="keywordflow">is</span> arr <span class="keywordflow">or</span> res.base <span class="keywordflow">is</span> arr</div>
<div class="line"><span class="lineno"> 8237</span> </div>
<div class="line"><span class="lineno"> 8238</span>                    res = np.array(arr,</div>
<div class="line"><span class="lineno"> 8239</span>                                   copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8240</span>                                   dtype=int2)</div>
<div class="line"><span class="lineno"> 8241</span>                    <span class="keyword">assert</span> res <span class="keywordflow">is</span> arr <span class="keywordflow">or</span> res.base <span class="keywordflow">is</span> arr</div>
<div class="line"><span class="lineno"> 8242</span> </div>
<div class="line"><span class="lineno"> 8243</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 8244</span>                    <span class="comment"># Casting is necessary, assert copy works:</span></div>
<div class="line"><span class="lineno"> 8245</span>                    <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.false_vals:</div>
<div class="line"><span class="lineno"> 8246</span>                        res = np.array(arr, copy=copy, dtype=int2)</div>
<div class="line"><span class="lineno"> 8247</span>                        <span class="keyword">assert</span> res <span class="keywordflow">is</span> <span class="keywordflow">not</span> arr <span class="keywordflow">and</span> res.flags.owndata</div>
<div class="line"><span class="lineno"> 8248</span>                        assert_array_equal(res, arr)</div>
<div class="line"><span class="lineno"> 8249</span> </div>
<div class="line"><span class="lineno"> 8250</span>                    assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8251</span>                                  arr, copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8252</span>                                  dtype=int2)</div>
<div class="line"><span class="lineno"> 8253</span>                    assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8254</span>                                  arr, copy=<span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 8255</span>                                  dtype=int2)</div>
<div class="line"><span class="lineno"> 8256</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8bdbcc8ff618f8a4149c73423db05ee5" name="a8bdbcc8ff618f8a4149c73423db05ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bdbcc8ff618f8a4149c73423db05ee5">&#9670;&#160;</a></span>test_order_mismatch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.test_order_mismatch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>order1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>order2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 8320</span>    <span class="keyword">def </span>test_order_mismatch(self, arr, order1, order2):</div>
<div class="line"><span class="lineno"> 8321</span>        <span class="comment"># The order is the main (python side) reason that can cause</span></div>
<div class="line"><span class="lineno"> 8322</span>        <span class="comment"># a never-copy to fail.</span></div>
<div class="line"><span class="lineno"> 8323</span>        <span class="comment"># Prepare C-order, F-order and non-contiguous arrays:</span></div>
<div class="line"><span class="lineno"> 8324</span>        arr = arr.copy(order1)</div>
<div class="line"><span class="lineno"> 8325</span>        <span class="keywordflow">if</span> order1 == <span class="stringliteral">&quot;C&quot;</span>:</div>
<div class="line"><span class="lineno"> 8326</span>            <span class="keyword">assert</span> arr.flags.c_contiguous</div>
<div class="line"><span class="lineno"> 8327</span>        <span class="keywordflow">elif</span> order1 == <span class="stringliteral">&quot;F&quot;</span>:</div>
<div class="line"><span class="lineno"> 8328</span>            <span class="keyword">assert</span> arr.flags.f_contiguous</div>
<div class="line"><span class="lineno"> 8329</span>        <span class="keywordflow">elif</span> arr.ndim != 0:</div>
<div class="line"><span class="lineno"> 8330</span>            <span class="comment"># Make array non-contiguous</span></div>
<div class="line"><span class="lineno"> 8331</span>            arr = arr[::2, ::2]</div>
<div class="line"><span class="lineno"> 8332</span>            <span class="keyword">assert</span> <span class="keywordflow">not</span> arr.flags.forc</div>
<div class="line"><span class="lineno"> 8333</span> </div>
<div class="line"><span class="lineno"> 8334</span>        <span class="comment"># Whether a copy is necessary depends on the order of arr:</span></div>
<div class="line"><span class="lineno"> 8335</span>        <span class="keywordflow">if</span> order2 == <span class="stringliteral">&quot;C&quot;</span>:</div>
<div class="line"><span class="lineno"> 8336</span>            no_copy_necessary = arr.flags.c_contiguous</div>
<div class="line"><span class="lineno"> 8337</span>        <span class="keywordflow">elif</span> order2 == <span class="stringliteral">&quot;F&quot;</span>:</div>
<div class="line"><span class="lineno"> 8338</span>            no_copy_necessary = arr.flags.f_contiguous</div>
<div class="line"><span class="lineno"> 8339</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 8340</span>            <span class="comment"># Keeporder and Anyorder are OK with non-contiguous output.</span></div>
<div class="line"><span class="lineno"> 8341</span>            <span class="comment"># This is not consistent with the `astype` behaviour which</span></div>
<div class="line"><span class="lineno"> 8342</span>            <span class="comment"># enforces contiguity for &quot;A&quot;. It is probably historic from when</span></div>
<div class="line"><span class="lineno"> 8343</span>            <span class="comment"># &quot;K&quot; did not exist.</span></div>
<div class="line"><span class="lineno"> 8344</span>            no_copy_necessary = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 8345</span> </div>
<div class="line"><span class="lineno"> 8346</span>        <span class="comment"># Test it for both the array and a memoryview</span></div>
<div class="line"><span class="lineno"> 8347</span>        <span class="keywordflow">for</span> view <span class="keywordflow">in</span> [arr, memoryview(arr)]:</div>
<div class="line"><span class="lineno"> 8348</span>            <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.true_vals:</div>
<div class="line"><span class="lineno"> 8349</span>                res = np.array(view, copy=copy, order=order2)</div>
<div class="line"><span class="lineno"> 8350</span>                <span class="keyword">assert</span> res <span class="keywordflow">is</span> <span class="keywordflow">not</span> arr <span class="keywordflow">and</span> res.flags.owndata</div>
<div class="line"><span class="lineno"> 8351</span>                assert_array_equal(arr, res)</div>
<div class="line"><span class="lineno"> 8352</span> </div>
<div class="line"><span class="lineno"> 8353</span>            <span class="keywordflow">if</span> no_copy_necessary:</div>
<div class="line"><span class="lineno"> 8354</span>                <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.false_vals:</div>
<div class="line"><span class="lineno"> 8355</span>                    res = np.array(view, copy=copy, order=order2)</div>
<div class="line"><span class="lineno"> 8356</span>                    <span class="comment"># res.base.obj refers to the memoryview</span></div>
<div class="line"><span class="lineno"> 8357</span>                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> IS_PYPY:</div>
<div class="line"><span class="lineno"> 8358</span>                        <span class="keyword">assert</span> res <span class="keywordflow">is</span> arr <span class="keywordflow">or</span> res.base.obj <span class="keywordflow">is</span> arr</div>
<div class="line"><span class="lineno"> 8359</span> </div>
<div class="line"><span class="lineno"> 8360</span>                res = np.array(view, copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8361</span>                               order=order2)</div>
<div class="line"><span class="lineno"> 8362</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> IS_PYPY:</div>
<div class="line"><span class="lineno"> 8363</span>                    <span class="keyword">assert</span> res <span class="keywordflow">is</span> arr <span class="keywordflow">or</span> res.base.obj <span class="keywordflow">is</span> arr</div>
<div class="line"><span class="lineno"> 8364</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 8365</span>                <span class="keywordflow">for</span> copy <span class="keywordflow">in</span> self.false_vals:</div>
<div class="line"><span class="lineno"> 8366</span>                    res = np.array(arr, copy=copy, order=order2)</div>
<div class="line"><span class="lineno"> 8367</span>                    assert_array_equal(arr, res)</div>
<div class="line"><span class="lineno"> 8368</span>                assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8369</span>                              view, copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8370</span>                              order=order2)</div>
<div class="line"><span class="lineno"> 8371</span>                assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8372</span>                              view, copy=<span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 8373</span>                              order=order2)</div>
<div class="line"><span class="lineno"> 8374</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f95508522a70f2706a375c366e66f2e" name="a8f95508522a70f2706a375c366e66f2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f95508522a70f2706a375c366e66f2e">&#9670;&#160;</a></span>test_scalars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.test_scalars </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 8191</span>    <span class="keyword">def </span>test_scalars(self):</div>
<div class="line"><span class="lineno"> 8192</span>        <span class="comment"># Test both numpy and python scalars</span></div>
<div class="line"><span class="lineno"> 8193</span>        <span class="keywordflow">for</span> dtype <span class="keywordflow">in</span> np.typecodes[<span class="stringliteral">&quot;All&quot;</span>]:</div>
<div class="line"><span class="lineno"> 8194</span>            arr = np.zeros((), dtype=dtype)</div>
<div class="line"><span class="lineno"> 8195</span>            scalar = arr[()]</div>
<div class="line"><span class="lineno"> 8196</span>            pyscalar = arr.item(0)</div>
<div class="line"><span class="lineno"> 8197</span> </div>
<div class="line"><span class="lineno"> 8198</span>            <span class="comment"># Test never-copy raises error:</span></div>
<div class="line"><span class="lineno"> 8199</span>            assert_raises(ValueError, np.array, scalar,</div>
<div class="line"><span class="lineno"> 8200</span>                            copy=np._CopyMode.NEVER)</div>
<div class="line"><span class="lineno"> 8201</span>            assert_raises(ValueError, np.array, pyscalar,</div>
<div class="line"><span class="lineno"> 8202</span>                            copy=np._CopyMode.NEVER)</div>
<div class="line"><span class="lineno"> 8203</span>            assert_raises(ValueError, np.array, pyscalar,</div>
<div class="line"><span class="lineno"> 8204</span>                            copy=self.RaiseOnBool())</div>
<div class="line"><span class="lineno"> 8205</span>            assert_raises(ValueError, _multiarray_tests.npy_ensurenocopy,</div>
<div class="line"><span class="lineno"> 8206</span>                            [1])</div>
<div class="line"><span class="lineno"> 8207</span>            <span class="comment"># Casting with a dtype (to unsigned integers) can be special:</span></div>
<div class="line"><span class="lineno"> 8208</span>            <span class="keyword">with</span> pytest.raises(ValueError):</div>
<div class="line"><span class="lineno"> 8209</span>                np.array(pyscalar, dtype=np.int64, copy=np._CopyMode.NEVER)</div>
<div class="line"><span class="lineno"> 8210</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a27055d1225dacb475842db2a01a58f56" name="a27055d1225dacb475842db2a01a58f56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27055d1225dacb475842db2a01a58f56">&#9670;&#160;</a></span>test_striding_not_ok()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.test_striding_not_ok </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 8375</span>    <span class="keyword">def </span>test_striding_not_ok(self):</div>
<div class="line"><span class="lineno"> 8376</span>        arr = np.array([[1, 2, 4], [3, 4, 5]])</div>
<div class="line"><span class="lineno"> 8377</span>        assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8378</span>                      arr.T, copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8379</span>                      order=<span class="stringliteral">&#39;C&#39;</span>)</div>
<div class="line"><span class="lineno"> 8380</span>        assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8381</span>                      arr.T, copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8382</span>                      order=<span class="stringliteral">&#39;C&#39;</span>, dtype=np.int64)</div>
<div class="line"><span class="lineno"> 8383</span>        assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8384</span>                      arr, copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8385</span>                      order=<span class="stringliteral">&#39;F&#39;</span>)</div>
<div class="line"><span class="lineno"> 8386</span>        assert_raises(ValueError, np.array,</div>
<div class="line"><span class="lineno"> 8387</span>                      arr, copy=np._CopyMode.NEVER,</div>
<div class="line"><span class="lineno"> 8388</span>                      order=<span class="stringliteral">&#39;F&#39;</span>, dtype=np.int64)</div>
<div class="line"><span class="lineno"> 8389</span> </div>
<div class="line"><span class="lineno"> 8390</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a121d65ef0f7f0470cb6bc7f4c007967e" name="a121d65ef0f7f0470cb6bc7f4c007967e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121d65ef0f7f0470cb6bc7f4c007967e">&#9670;&#160;</a></span>false_vals</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">list numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.false_vals = [False, np._CopyMode.IF_NEEDED, np.False_]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0576fa2d20538bc0b2e9e701e4a246e0" name="a0576fa2d20538bc0b2e9e701e4a246e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0576fa2d20538bc0b2e9e701e4a246e0">&#9670;&#160;</a></span>true_vals</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestArrayCreationCopyArgument.true_vals</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/rafael/Documents/GitHub/PUC-GCES-PY/Tp-GCS-Rafael-Augusto/venv/lib/python3.9/site-packages/numpy/core/tests/<a class="el" href="core_2tests_2test__multiarray_8py.html">test_multiarray.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
