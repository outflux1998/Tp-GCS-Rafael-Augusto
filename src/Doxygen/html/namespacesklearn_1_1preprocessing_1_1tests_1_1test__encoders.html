<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.preprocessing.tests.test_encoders Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1preprocessing.html">preprocessing</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html">test_encoders</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sklearn.preprocessing.tests.test_encoders Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab744bb16995f03ffbbee39ee173389af" id="r_ab744bb16995f03ffbbee39ee173389af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ab744bb16995f03ffbbee39ee173389af">test_one_hot_encoder_sparse_dense</a> ()</td></tr>
<tr class="separator:ab744bb16995f03ffbbee39ee173389af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd84470c6903fa74f4154535fdd8bebf" id="r_afd84470c6903fa74f4154535fdd8bebf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#afd84470c6903fa74f4154535fdd8bebf">test_one_hot_encoder_handle_unknown</a> (handle_unknown)</td></tr>
<tr class="separator:afd84470c6903fa74f4154535fdd8bebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1b57ee7d7da72aa2010d095da1001d" id="r_a1c1b57ee7d7da72aa2010d095da1001d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a1c1b57ee7d7da72aa2010d095da1001d">test_one_hot_encoder_not_fitted</a> ()</td></tr>
<tr class="separator:a1c1b57ee7d7da72aa2010d095da1001d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a643dc078ceb13e5f07c9076a38bad70b" id="r_a643dc078ceb13e5f07c9076a38bad70b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a643dc078ceb13e5f07c9076a38bad70b">test_one_hot_encoder_handle_unknown_strings</a> (handle_unknown)</td></tr>
<tr class="separator:a643dc078ceb13e5f07c9076a38bad70b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a865099628f3c16b45964571ef94ae084" id="r_a865099628f3c16b45964571ef94ae084"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a865099628f3c16b45964571ef94ae084">test_one_hot_encoder_dtype</a> (input_dtype, output_dtype)</td></tr>
<tr class="separator:a865099628f3c16b45964571ef94ae084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c2c839192adbb22e72afbb75e03b9b0" id="r_a3c2c839192adbb22e72afbb75e03b9b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a3c2c839192adbb22e72afbb75e03b9b0">test_one_hot_encoder_dtype_pandas</a> (output_dtype)</td></tr>
<tr class="separator:a3c2c839192adbb22e72afbb75e03b9b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a226432ed774f1074318c7231583070f7" id="r_a226432ed774f1074318c7231583070f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a226432ed774f1074318c7231583070f7">test_one_hot_encoder_feature_names</a> ()</td></tr>
<tr class="separator:a226432ed774f1074318c7231583070f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad94b6bcc674e95ae943df9b5eefa534" id="r_aad94b6bcc674e95ae943df9b5eefa534"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aad94b6bcc674e95ae943df9b5eefa534">test_one_hot_encoder_feature_names_unicode</a> ()</td></tr>
<tr class="separator:aad94b6bcc674e95ae943df9b5eefa534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4f3566e0f9ad563f5c61afe619019e4" id="r_ac4f3566e0f9ad563f5c61afe619019e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ac4f3566e0f9ad563f5c61afe619019e4">test_one_hot_encoder_set_params</a> ()</td></tr>
<tr class="separator:ac4f3566e0f9ad563f5c61afe619019e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5458fb9c9bf8dd9837890acf4004f40c" id="r_a5458fb9c9bf8dd9837890acf4004f40c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a5458fb9c9bf8dd9837890acf4004f40c">check_categorical_onehot</a> (X)</td></tr>
<tr class="separator:a5458fb9c9bf8dd9837890acf4004f40c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2effad59280ac69c5dee763cb85c677" id="r_ac2effad59280ac69c5dee763cb85c677"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ac2effad59280ac69c5dee763cb85c677">test_one_hot_encoder</a> (X)</td></tr>
<tr class="separator:ac2effad59280ac69c5dee763cb85c677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1702d169d6cb4dd36cf5c0d22b469a21" id="r_a1702d169d6cb4dd36cf5c0d22b469a21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a1702d169d6cb4dd36cf5c0d22b469a21">test_one_hot_encoder_inverse</a> (handle_unknown, sparse_, drop)</td></tr>
<tr class="separator:a1702d169d6cb4dd36cf5c0d22b469a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cdaf4f93da19fcd4ebbf19ba1da120d" id="r_a2cdaf4f93da19fcd4ebbf19ba1da120d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a2cdaf4f93da19fcd4ebbf19ba1da120d">test_one_hot_encoder_inverse_transform_raise_error_with_unknown</a> (X, X_trans, sparse_)</td></tr>
<tr class="separator:a2cdaf4f93da19fcd4ebbf19ba1da120d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d30cf463dff3537d41e55d7047ac300" id="r_a5d30cf463dff3537d41e55d7047ac300"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a5d30cf463dff3537d41e55d7047ac300">test_one_hot_encoder_inverse_if_binary</a> ()</td></tr>
<tr class="separator:a5d30cf463dff3537d41e55d7047ac300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab92363245e4c8be628a21d3c8554a339" id="r_ab92363245e4c8be628a21d3c8554a339"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ab92363245e4c8be628a21d3c8554a339">test_one_hot_encoder_drop_reset</a> (drop, reset_drop)</td></tr>
<tr class="separator:ab92363245e4c8be628a21d3c8554a339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630bfcf0cf349075c4d2d6dc04194d30" id="r_a630bfcf0cf349075c4d2d6dc04194d30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a630bfcf0cf349075c4d2d6dc04194d30">test_X_is_not_1D</a> (X, method)</td></tr>
<tr class="separator:a630bfcf0cf349075c4d2d6dc04194d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c4951c5a232daa532a26644f307560f" id="r_a9c4951c5a232daa532a26644f307560f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a9c4951c5a232daa532a26644f307560f">test_X_is_not_1D_pandas</a> (method)</td></tr>
<tr class="separator:a9c4951c5a232daa532a26644f307560f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e14a3f8dcac6608b5f1890ceecf173" id="r_ab6e14a3f8dcac6608b5f1890ceecf173"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ab6e14a3f8dcac6608b5f1890ceecf173">test_one_hot_encoder_categories</a> (X, cat_exp, cat_dtype)</td></tr>
<tr class="separator:ab6e14a3f8dcac6608b5f1890ceecf173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24658549984dc37109101f85be77527f" id="r_a24658549984dc37109101f85be77527f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a24658549984dc37109101f85be77527f">test_one_hot_encoder_specified_categories</a> (X, X2, cats, cat_dtype, handle_unknown)</td></tr>
<tr class="separator:a24658549984dc37109101f85be77527f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6687d8600e786ae02e6666e3a66d35cf" id="r_a6687d8600e786ae02e6666e3a66d35cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a6687d8600e786ae02e6666e3a66d35cf">test_one_hot_encoder_unsorted_categories</a> ()</td></tr>
<tr class="separator:a6687d8600e786ae02e6666e3a66d35cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dfb9182a3bf79924d6c306a7677a31c" id="r_a0dfb9182a3bf79924d6c306a7677a31c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a0dfb9182a3bf79924d6c306a7677a31c">test_one_hot_encoder_specified_categories_mixed_columns</a> ()</td></tr>
<tr class="separator:a0dfb9182a3bf79924d6c306a7677a31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace882aba3e027a16182a6afc0651da93" id="r_ace882aba3e027a16182a6afc0651da93"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ace882aba3e027a16182a6afc0651da93">test_one_hot_encoder_pandas</a> ()</td></tr>
<tr class="separator:ace882aba3e027a16182a6afc0651da93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a807f5e3b72e99ef7140d923d184ef57e" id="r_a807f5e3b72e99ef7140d923d184ef57e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a807f5e3b72e99ef7140d923d184ef57e">test_one_hot_encoder_feature_names_drop</a> (drop, expected_names)</td></tr>
<tr class="separator:a807f5e3b72e99ef7140d923d184ef57e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1489e9b7fce32446dcb03da608a09786" id="r_a1489e9b7fce32446dcb03da608a09786"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a1489e9b7fce32446dcb03da608a09786">test_one_hot_encoder_drop_equals_if_binary</a> ()</td></tr>
<tr class="separator:a1489e9b7fce32446dcb03da608a09786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63e971f8055a865b1fd370b4aa342b98" id="r_a63e971f8055a865b1fd370b4aa342b98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a63e971f8055a865b1fd370b4aa342b98">test_ordinal_encoder</a> (X)</td></tr>
<tr class="separator:a63e971f8055a865b1fd370b4aa342b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69870167b6e93b1a570b0c4e20928140" id="r_a69870167b6e93b1a570b0c4e20928140"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a69870167b6e93b1a570b0c4e20928140">test_ordinal_encoder_specified_categories</a> (X, X2, cats, cat_dtype)</td></tr>
<tr class="separator:a69870167b6e93b1a570b0c4e20928140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42bc44ff6944cf087e1e6caced05bc47" id="r_a42bc44ff6944cf087e1e6caced05bc47"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a42bc44ff6944cf087e1e6caced05bc47">test_ordinal_encoder_inverse</a> ()</td></tr>
<tr class="separator:a42bc44ff6944cf087e1e6caced05bc47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75418b427317e8f05db52cfd4d56e53c" id="r_a75418b427317e8f05db52cfd4d56e53c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a75418b427317e8f05db52cfd4d56e53c">test_ordinal_encoder_handle_unknowns_string</a> ()</td></tr>
<tr class="separator:a75418b427317e8f05db52cfd4d56e53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a871cc29fa401168268cf14e6f7f4bd94" id="r_a871cc29fa401168268cf14e6f7f4bd94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a871cc29fa401168268cf14e6f7f4bd94">test_ordinal_encoder_handle_unknowns_numeric</a> (dtype)</td></tr>
<tr class="separator:a871cc29fa401168268cf14e6f7f4bd94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ad92beb7c6c919a2576fca753e96a9" id="r_aa2ad92beb7c6c919a2576fca753e96a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aa2ad92beb7c6c919a2576fca753e96a9">test_ordinal_encoder_handle_unknowns_nan</a> ()</td></tr>
<tr class="separator:aa2ad92beb7c6c919a2576fca753e96a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e705ff92de48fb2911d2c128903302a" id="r_a6e705ff92de48fb2911d2c128903302a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a6e705ff92de48fb2911d2c128903302a">test_ordinal_encoder_handle_unknowns_nan_non_float_dtype</a> ()</td></tr>
<tr class="separator:a6e705ff92de48fb2911d2c128903302a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a213804f91f1382e80b25804f6240a8" id="r_a5a213804f91f1382e80b25804f6240a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a5a213804f91f1382e80b25804f6240a8">test_ordinal_encoder_raise_categories_shape</a> ()</td></tr>
<tr class="separator:a5a213804f91f1382e80b25804f6240a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f7e1ab13cc8d698d132dc9ce605abab" id="r_a3f7e1ab13cc8d698d132dc9ce605abab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a3f7e1ab13cc8d698d132dc9ce605abab">test_encoder_dtypes</a> ()</td></tr>
<tr class="separator:a3f7e1ab13cc8d698d132dc9ce605abab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49d6c5f55d53058e01b918bc265544f4" id="r_a49d6c5f55d53058e01b918bc265544f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a49d6c5f55d53058e01b918bc265544f4">test_encoder_dtypes_pandas</a> ()</td></tr>
<tr class="separator:a49d6c5f55d53058e01b918bc265544f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80e4d2cc2ce8f4ca9c55a3755fb5f4f6" id="r_a80e4d2cc2ce8f4ca9c55a3755fb5f4f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a80e4d2cc2ce8f4ca9c55a3755fb5f4f6">test_one_hot_encoder_warning</a> ()</td></tr>
<tr class="separator:a80e4d2cc2ce8f4ca9c55a3755fb5f4f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa1361f30a79309fdfe8cfc7d3e835ba" id="r_afa1361f30a79309fdfe8cfc7d3e835ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#afa1361f30a79309fdfe8cfc7d3e835ba">test_one_hot_encoder_drop_manual</a> (missing_value)</td></tr>
<tr class="separator:afa1361f30a79309fdfe8cfc7d3e835ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c805c6a4f4cde203070158ab009f257" id="r_a6c805c6a4f4cde203070158ab009f257"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a6c805c6a4f4cde203070158ab009f257">test_invalid_drop_length</a> (drop)</td></tr>
<tr class="separator:a6c805c6a4f4cde203070158ab009f257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39a7e0a4b0274f51c87c32e42265627" id="r_ad39a7e0a4b0274f51c87c32e42265627"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ad39a7e0a4b0274f51c87c32e42265627">test_categories</a> (density, drop)</td></tr>
<tr class="separator:ad39a7e0a4b0274f51c87c32e42265627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9894aabed10a3ca654bbaa10aac3ca7" id="r_ab9894aabed10a3ca654bbaa10aac3ca7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ab9894aabed10a3ca654bbaa10aac3ca7">test_encoders_has_categorical_tags</a> (Encoder)</td></tr>
<tr class="separator:ab9894aabed10a3ca654bbaa10aac3ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82277520967c3d4413e882cc026be82d" id="r_a82277520967c3d4413e882cc026be82d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a82277520967c3d4413e882cc026be82d">test_ohe_infrequent_two_levels</a> (kwargs, categories)</td></tr>
<tr class="separator:a82277520967c3d4413e882cc026be82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09f8572267859693740cb42cdcb91d1e" id="r_a09f8572267859693740cb42cdcb91d1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a09f8572267859693740cb42cdcb91d1e">test_ohe_infrequent_two_levels_drop_frequent</a> (drop)</td></tr>
<tr class="separator:a09f8572267859693740cb42cdcb91d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb38e3b2143f4ce52a29a00fb731e66c" id="r_afb38e3b2143f4ce52a29a00fb731e66c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#afb38e3b2143f4ce52a29a00fb731e66c">test_ohe_infrequent_two_levels_drop_infrequent_errors</a> (drop)</td></tr>
<tr class="separator:afb38e3b2143f4ce52a29a00fb731e66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7179258b8ce9e1c4c86f0f1f62c7d5e5" id="r_a7179258b8ce9e1c4c86f0f1f62c7d5e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a7179258b8ce9e1c4c86f0f1f62c7d5e5">test_ohe_infrequent_three_levels</a> (kwargs)</td></tr>
<tr class="separator:a7179258b8ce9e1c4c86f0f1f62c7d5e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4262fcb58ae9620b8f96469b587261" id="r_a2c4262fcb58ae9620b8f96469b587261"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a2c4262fcb58ae9620b8f96469b587261">test_ohe_infrequent_three_levels_drop_frequent</a> (drop)</td></tr>
<tr class="separator:a2c4262fcb58ae9620b8f96469b587261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7b4e05f7d46ea9c1772606a4fafecb0" id="r_ad7b4e05f7d46ea9c1772606a4fafecb0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ad7b4e05f7d46ea9c1772606a4fafecb0">test_ohe_infrequent_three_levels_drop_infrequent_errors</a> (drop)</td></tr>
<tr class="separator:ad7b4e05f7d46ea9c1772606a4fafecb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdaa9be9617e4117b7e0a86fe57dfdc7" id="r_acdaa9be9617e4117b7e0a86fe57dfdc7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#acdaa9be9617e4117b7e0a86fe57dfdc7">test_ohe_infrequent_handle_unknown_error</a> ()</td></tr>
<tr class="separator:acdaa9be9617e4117b7e0a86fe57dfdc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a4bb8dc473a81904421b14ebacd658d" id="r_a3a4bb8dc473a81904421b14ebacd658d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a3a4bb8dc473a81904421b14ebacd658d">test_ohe_infrequent_two_levels_user_cats_one_frequent</a> (kwargs)</td></tr>
<tr class="separator:a3a4bb8dc473a81904421b14ebacd658d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4031455be9f0fd41bdf5933836274c4" id="r_ae4031455be9f0fd41bdf5933836274c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ae4031455be9f0fd41bdf5933836274c4">test_ohe_infrequent_two_levels_user_cats</a> ()</td></tr>
<tr class="separator:ae4031455be9f0fd41bdf5933836274c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c7aab5801d5787db7768c0333732bc" id="r_ad4c7aab5801d5787db7768c0333732bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ad4c7aab5801d5787db7768c0333732bc">test_ohe_infrequent_three_levels_user_cats</a> ()</td></tr>
<tr class="separator:ad4c7aab5801d5787db7768c0333732bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a8e9cad5e03a63ace179a5a6f47382" id="r_a12a8e9cad5e03a63ace179a5a6f47382"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a12a8e9cad5e03a63ace179a5a6f47382">test_ohe_infrequent_mixed</a> ()</td></tr>
<tr class="separator:a12a8e9cad5e03a63ace179a5a6f47382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8208bf8dd61c675ec2534379a9a0093" id="r_aa8208bf8dd61c675ec2534379a9a0093"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aa8208bf8dd61c675ec2534379a9a0093">test_ohe_infrequent_multiple_categories</a> ()</td></tr>
<tr class="separator:aa8208bf8dd61c675ec2534379a9a0093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1b46867253cfb06d5e7074e241f797" id="r_aaa1b46867253cfb06d5e7074e241f797"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aaa1b46867253cfb06d5e7074e241f797">test_ohe_infrequent_multiple_categories_dtypes</a> ()</td></tr>
<tr class="separator:aaa1b46867253cfb06d5e7074e241f797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639c405418ff2389a97734823ffecb6a" id="r_a639c405418ff2389a97734823ffecb6a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a639c405418ff2389a97734823ffecb6a">test_ohe_infrequent_one_level_errors</a> (kwargs)</td></tr>
<tr class="separator:a639c405418ff2389a97734823ffecb6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9f48f4ed235601b46b3587e41f473f" id="r_acc9f48f4ed235601b46b3587e41f473f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#acc9f48f4ed235601b46b3587e41f473f">test_ohe_infrequent_user_cats_unknown_training_errors</a> (kwargs)</td></tr>
<tr class="separator:acc9f48f4ed235601b46b3587e41f473f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab46efe8949fb32d7ff32c7efc9610600" id="r_ab46efe8949fb32d7ff32c7efc9610600"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ab46efe8949fb32d7ff32c7efc9610600">test_one_hot_encoder_sparse_deprecated</a> ()</td></tr>
<tr class="separator:ab46efe8949fb32d7ff32c7efc9610600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237831acecd4c66325585820ada6c7a8" id="r_a237831acecd4c66325585820ada6c7a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a237831acecd4c66325585820ada6c7a8">test_encoders_string_categories</a> (input_dtype, category_dtype, array_type)</td></tr>
<tr class="separator:a237831acecd4c66325585820ada6c7a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab81500a59d00b4f1c45c6ad1d491ecf4" id="r_ab81500a59d00b4f1c45c6ad1d491ecf4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ab81500a59d00b4f1c45c6ad1d491ecf4">test_ohe_missing_values_get_feature_names</a> (missing_value)</td></tr>
<tr class="separator:ab81500a59d00b4f1c45c6ad1d491ecf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeca4317e9ab66b91a9cabe36721c0d5d" id="r_aeca4317e9ab66b91a9cabe36721c0d5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aeca4317e9ab66b91a9cabe36721c0d5d">test_ohe_missing_value_support_pandas</a> ()</td></tr>
<tr class="separator:aeca4317e9ab66b91a9cabe36721c0d5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa907b98b681b89374823107e251a8628" id="r_aa907b98b681b89374823107e251a8628"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aa907b98b681b89374823107e251a8628">test_ohe_missing_value_support_pandas_categorical</a> (pd_nan_type, handle_unknown)</td></tr>
<tr class="separator:aa907b98b681b89374823107e251a8628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf0e7e8c487ef1100b8bd7d7a660c9d" id="r_adbf0e7e8c487ef1100b8bd7d7a660c9d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#adbf0e7e8c487ef1100b8bd7d7a660c9d">test_ohe_drop_first_handle_unknown_ignore_warns</a> (handle_unknown)</td></tr>
<tr class="separator:adbf0e7e8c487ef1100b8bd7d7a660c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded987f909693e05c5a673ac8e88bbad" id="r_aded987f909693e05c5a673ac8e88bbad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aded987f909693e05c5a673ac8e88bbad">test_ohe_drop_if_binary_handle_unknown_ignore_warns</a> (handle_unknown)</td></tr>
<tr class="separator:aded987f909693e05c5a673ac8e88bbad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a239fc1bb23b4a897f9dd914349408ec0" id="r_a239fc1bb23b4a897f9dd914349408ec0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a239fc1bb23b4a897f9dd914349408ec0">test_ohe_drop_first_explicit_categories</a> (handle_unknown)</td></tr>
<tr class="separator:a239fc1bb23b4a897f9dd914349408ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8d3c0d381761693feff6d00425cc43" id="r_a6c8d3c0d381761693feff6d00425cc43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a6c8d3c0d381761693feff6d00425cc43">test_ordinal_encoder_passthrough_missing_values_float_errors_dtype</a> ()</td></tr>
<tr class="separator:a6c8d3c0d381761693feff6d00425cc43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacca2c158042e9d71fd3ff2611d91383" id="r_aacca2c158042e9d71fd3ff2611d91383"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#aacca2c158042e9d71fd3ff2611d91383">test_ordinal_encoder_passthrough_missing_values_float</a> (encoded_missing_value)</td></tr>
<tr class="separator:aacca2c158042e9d71fd3ff2611d91383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2533589483728fb140d02e483a87f375" id="r_a2533589483728fb140d02e483a87f375"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a2533589483728fb140d02e483a87f375">test_ordinal_encoder_missing_value_support_pandas_categorical</a> (pd_nan_type, encoded_missing_value)</td></tr>
<tr class="separator:a2533589483728fb140d02e483a87f375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa5a4cab512a02dfa2d0895a239d711" id="r_a1aa5a4cab512a02dfa2d0895a239d711"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a1aa5a4cab512a02dfa2d0895a239d711">test_ordinal_encoder_specified_categories_missing_passthrough</a> (X, X2, cats, cat_dtype)</td></tr>
<tr class="separator:a1aa5a4cab512a02dfa2d0895a239d711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56bf79f6b7c7ba8d35c4eacb9e1d8d07" id="r_a56bf79f6b7c7ba8d35c4eacb9e1d8d07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a56bf79f6b7c7ba8d35c4eacb9e1d8d07">test_ordinal_encoder_handle_missing_and_unknown</a> (X, expected_X_trans, X_test)</td></tr>
<tr class="separator:a56bf79f6b7c7ba8d35c4eacb9e1d8d07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd13fa83812b1acec87d2d8a40fe82f1" id="r_afd13fa83812b1acec87d2d8a40fe82f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#afd13fa83812b1acec87d2d8a40fe82f1">test_ordinal_encoder_sparse</a> ()</td></tr>
<tr class="separator:afd13fa83812b1acec87d2d8a40fe82f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a097c57a8d425d25c8d87ee860f9a3ced" id="r_a097c57a8d425d25c8d87ee860f9a3ced"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a097c57a8d425d25c8d87ee860f9a3ced">test_ordinal_encoder_fit_with_unseen_category</a> ()</td></tr>
<tr class="separator:a097c57a8d425d25c8d87ee860f9a3ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae369aaa69b70a05690221a98433dcdf6" id="r_ae369aaa69b70a05690221a98433dcdf6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ae369aaa69b70a05690221a98433dcdf6">test_ordinal_encoder_handle_unknown_string_dtypes</a> (X_train, X_test)</td></tr>
<tr class="separator:ae369aaa69b70a05690221a98433dcdf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12c243e9a15eb220a9da4b02b2d3944" id="r_ae12c243e9a15eb220a9da4b02b2d3944"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ae12c243e9a15eb220a9da4b02b2d3944">test_ordinal_encoder_python_integer</a> ()</td></tr>
<tr class="separator:ae12c243e9a15eb220a9da4b02b2d3944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accba49afc81c47e4b13722e5d9cbab6a" id="r_accba49afc81c47e4b13722e5d9cbab6a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#accba49afc81c47e4b13722e5d9cbab6a">test_ordinal_encoder_features_names_out_pandas</a> ()</td></tr>
<tr class="separator:accba49afc81c47e4b13722e5d9cbab6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac601ed0ed022cc735d2267b3972cf2cb" id="r_ac601ed0ed022cc735d2267b3972cf2cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ac601ed0ed022cc735d2267b3972cf2cb">test_ordinal_encoder_unknown_missing_interaction</a> ()</td></tr>
<tr class="separator:ac601ed0ed022cc735d2267b3972cf2cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4c19f168092d00e91bda7c7b22502c4" id="r_ac4c19f168092d00e91bda7c7b22502c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ac4c19f168092d00e91bda7c7b22502c4">test_ordinal_encoder_encoded_missing_value_error</a> (with_pandas)</td></tr>
<tr class="separator:ac4c19f168092d00e91bda7c7b22502c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0aadefe9f5e91fddac4c77cc78097569" id="r_a0aadefe9f5e91fddac4c77cc78097569"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a0aadefe9f5e91fddac4c77cc78097569">test_ordinal_encoder_unknown_missing_interaction_both_nan</a> (X_train, X_test_trans_expected, X_roundtrip_expected)</td></tr>
<tr class="separator:a0aadefe9f5e91fddac4c77cc78097569"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22c9cefc2da6a360818f782fe145fc79" id="r_a22c9cefc2da6a360818f782fe145fc79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#a22c9cefc2da6a360818f782fe145fc79">test_one_hot_encoder_set_output</a> ()</td></tr>
<tr class="separator:a22c9cefc2da6a360818f782fe145fc79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4779ea7450213f7a2dc844b430098df" id="r_ae4779ea7450213f7a2dc844b430098df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1preprocessing_1_1tests_1_1test__encoders.html#ae4779ea7450213f7a2dc844b430098df">test_ordinal_set_output</a> ()</td></tr>
<tr class="separator:ae4779ea7450213f7a2dc844b430098df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5458fb9c9bf8dd9837890acf4004f40c" name="a5458fb9c9bf8dd9837890acf4004f40c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5458fb9c9bf8dd9837890acf4004f40c">&#9670;&#160;</a></span>check_categorical_onehot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.check_categorical_onehot </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  208</span><span class="keyword">def </span>check_categorical_onehot(X):</div>
<div class="line"><span class="lineno">  209</span>    enc = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  210</span>    Xtr1 = enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    enc = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  213</span>    Xtr2 = enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    assert_allclose(Xtr1.toarray(), Xtr2)</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="keyword">assert</span> sparse.isspmatrix_csr(Xtr1)</div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">return</span> Xtr1.toarray()</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  222</span>    <span class="stringliteral">&quot;X&quot;</span>,</div>
<div class="line"><span class="lineno">  223</span>    [</div>
<div class="line"><span class="lineno">  224</span>        [[<span class="stringliteral">&quot;def&quot;</span>, 1, 55], [<span class="stringliteral">&quot;abc&quot;</span>, 2, 55]],</div>
<div class="line"><span class="lineno">  225</span>        np.array([[10, 1, 55], [5, 2, 55]]),</div>
<div class="line"><span class="lineno">  226</span>        np.array([[<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  227</span>        np.array([[<span class="stringliteral">&quot;b&quot;</span>, 1, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, np.nan, <span class="stringliteral">&quot;cat&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  228</span>        np.array([[<span class="stringliteral">&quot;b&quot;</span>, 1, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, float(<span class="stringliteral">&quot;nan&quot;</span>), <span class="stringliteral">&quot;cat&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  229</span>        np.array([[<span class="keywordtype">None</span>, 1, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, 2, <span class="stringliteral">&quot;cat&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  230</span>        np.array([[<span class="keywordtype">None</span>, 1, <span class="keywordtype">None</span>], [<span class="stringliteral">&quot;a&quot;</span>, np.nan, <span class="keywordtype">None</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  231</span>        np.array([[<span class="keywordtype">None</span>, 1, <span class="keywordtype">None</span>], [<span class="stringliteral">&quot;a&quot;</span>, float(<span class="stringliteral">&quot;nan&quot;</span>), <span class="keywordtype">None</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  232</span>    ],</div>
<div class="line"><span class="lineno">  233</span>    ids=[</div>
<div class="line"><span class="lineno">  234</span>        <span class="stringliteral">&quot;mixed&quot;</span>,</div>
<div class="line"><span class="lineno">  235</span>        <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">  236</span>        <span class="stringliteral">&quot;object&quot;</span>,</div>
<div class="line"><span class="lineno">  237</span>        <span class="stringliteral">&quot;mixed-nan&quot;</span>,</div>
<div class="line"><span class="lineno">  238</span>        <span class="stringliteral">&quot;mixed-float-nan&quot;</span>,</div>
<div class="line"><span class="lineno">  239</span>        <span class="stringliteral">&quot;mixed-None&quot;</span>,</div>
<div class="line"><span class="lineno">  240</span>        <span class="stringliteral">&quot;mixed-None-nan&quot;</span>,</div>
<div class="line"><span class="lineno">  241</span>        <span class="stringliteral">&quot;mixed-None-float-nan&quot;</span>,</div>
<div class="line"><span class="lineno">  242</span>    ],</div>
<div class="line"><span class="lineno">  243</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad39a7e0a4b0274f51c87c32e42265627" name="ad39a7e0a4b0274f51c87c32e42265627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad39a7e0a4b0274f51c87c32e42265627">&#9670;&#160;</a></span>test_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>density</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  834</span><span class="keyword">def </span>test_categories(density, drop):</div>
<div class="line"><span class="lineno">  835</span>    ohe_base = OneHotEncoder(sparse_output=density)</div>
<div class="line"><span class="lineno">  836</span>    ohe_test = OneHotEncoder(sparse_output=density, drop=drop)</div>
<div class="line"><span class="lineno">  837</span>    X = [[<span class="stringliteral">&quot;c&quot;</span>, 1, <span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, 2, <span class="stringliteral">&quot;b&quot;</span>]]</div>
<div class="line"><span class="lineno">  838</span>    ohe_base.fit(X)</div>
<div class="line"><span class="lineno">  839</span>    ohe_test.fit(X)</div>
<div class="line"><span class="lineno">  840</span>    assert_array_equal(ohe_base.categories_, ohe_test.categories_)</div>
<div class="line"><span class="lineno">  841</span>    <span class="keywordflow">if</span> drop == <span class="stringliteral">&quot;first&quot;</span>:</div>
<div class="line"><span class="lineno">  842</span>        assert_array_equal(ohe_test.drop_idx_, 0)</div>
<div class="line"><span class="lineno">  843</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  844</span>        <span class="keywordflow">for</span> drop_cat, drop_idx, cat_list <span class="keywordflow">in</span> zip(</div>
<div class="line"><span class="lineno">  845</span>            drop, ohe_test.drop_idx_, ohe_test.categories_</div>
<div class="line"><span class="lineno">  846</span>        ):</div>
<div class="line"><span class="lineno">  847</span>            <span class="keyword">assert</span> cat_list[int(drop_idx)] == drop_cat</div>
<div class="line"><span class="lineno">  848</span>    <span class="keyword">assert</span> isinstance(ohe_test.drop_idx_, np.ndarray)</div>
<div class="line"><span class="lineno">  849</span>    <span class="keyword">assert</span> ohe_test.drop_idx_.dtype == object</div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span><span class="preprocessor">@pytest.mark.parametrize(&quot;Encoder&quot;, [OneHotEncoder, OrdinalEncoder])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f7e1ab13cc8d698d132dc9ce605abab" name="a3f7e1ab13cc8d698d132dc9ce605abab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f7e1ab13cc8d698d132dc9ce605abab">&#9670;&#160;</a></span>test_encoder_dtypes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_encoder_dtypes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  732</span><span class="keyword">def </span>test_encoder_dtypes():</div>
<div class="line"><span class="lineno">  733</span>    <span class="comment"># check that dtypes are preserved when determining categories</span></div>
<div class="line"><span class="lineno">  734</span>    enc = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  735</span>    exp = np.array([[1.0, 0.0, 1.0, 0.0], [0.0, 1.0, 0.0, 1.0]], dtype=<span class="stringliteral">&quot;float64&quot;</span>)</div>
<div class="line"><span class="lineno">  736</span> </div>
<div class="line"><span class="lineno">  737</span>    <span class="keywordflow">for</span> X <span class="keywordflow">in</span> [</div>
<div class="line"><span class="lineno">  738</span>        np.array([[1, 2], [3, 4]], dtype=<span class="stringliteral">&quot;int64&quot;</span>),</div>
<div class="line"><span class="lineno">  739</span>        np.array([[1, 2], [3, 4]], dtype=<span class="stringliteral">&quot;float64&quot;</span>),</div>
<div class="line"><span class="lineno">  740</span>        np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]]),  <span class="comment"># str dtype</span></div>
<div class="line"><span class="lineno">  741</span>        np.array([[b<span class="stringliteral">&quot;a&quot;</span>, b<span class="stringliteral">&quot;b&quot;</span>], [b<span class="stringliteral">&quot;c&quot;</span>, b<span class="stringliteral">&quot;d&quot;</span>]]),  <span class="comment"># bytes dtype</span></div>
<div class="line"><span class="lineno">  742</span>        np.array([[1, <span class="stringliteral">&quot;a&quot;</span>], [3, <span class="stringliteral">&quot;b&quot;</span>]], dtype=<span class="stringliteral">&quot;object&quot;</span>),</div>
<div class="line"><span class="lineno">  743</span>    ]:</div>
<div class="line"><span class="lineno">  744</span>        enc.fit(X)</div>
<div class="line"><span class="lineno">  745</span>        <span class="keyword">assert</span> all([enc.categories_[i].dtype == X.dtype <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2)])</div>
<div class="line"><span class="lineno">  746</span>        assert_array_equal(enc.transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>    X = [[1, 2], [3, 4]]</div>
<div class="line"><span class="lineno">  749</span>    enc.fit(X)</div>
<div class="line"><span class="lineno">  750</span>    <span class="keyword">assert</span> all([np.issubdtype(enc.categories_[i].dtype, np.integer) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2)])</div>
<div class="line"><span class="lineno">  751</span>    assert_array_equal(enc.transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  752</span> </div>
<div class="line"><span class="lineno">  753</span>    X = [[1, <span class="stringliteral">&quot;a&quot;</span>], [3, <span class="stringliteral">&quot;b&quot;</span>]]</div>
<div class="line"><span class="lineno">  754</span>    enc.fit(X)</div>
<div class="line"><span class="lineno">  755</span>    <span class="keyword">assert</span> all([enc.categories_[i].dtype == <span class="stringliteral">&quot;object&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2)])</div>
<div class="line"><span class="lineno">  756</span>    assert_array_equal(enc.transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a49d6c5f55d53058e01b918bc265544f4" name="a49d6c5f55d53058e01b918bc265544f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49d6c5f55d53058e01b918bc265544f4">&#9670;&#160;</a></span>test_encoder_dtypes_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_encoder_dtypes_pandas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  759</span><span class="keyword">def </span>test_encoder_dtypes_pandas():</div>
<div class="line"><span class="lineno">  760</span>    <span class="comment"># check dtype (similar to test_categorical_encoder_dtypes for dataframes)</span></div>
<div class="line"><span class="lineno">  761</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno">  762</span> </div>
<div class="line"><span class="lineno">  763</span>    enc = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  764</span>    exp = np.array(</div>
<div class="line"><span class="lineno">  765</span>        [[1.0, 0.0, 1.0, 0.0, 1.0, 0.0], [0.0, 1.0, 0.0, 1.0, 0.0, 1.0]],</div>
<div class="line"><span class="lineno">  766</span>        dtype=<span class="stringliteral">&quot;float64&quot;</span>,</div>
<div class="line"><span class="lineno">  767</span>    )</div>
<div class="line"><span class="lineno">  768</span> </div>
<div class="line"><span class="lineno">  769</span>    X = pd.DataFrame({<span class="stringliteral">&quot;A&quot;</span>: [1, 2], <span class="stringliteral">&quot;B&quot;</span>: [3, 4], <span class="stringliteral">&quot;C&quot;</span>: [5, 6]}, dtype=<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  770</span>    enc.fit(X)</div>
<div class="line"><span class="lineno">  771</span>    <span class="keyword">assert</span> all([enc.categories_[i].dtype == <span class="stringliteral">&quot;int64&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2)])</div>
<div class="line"><span class="lineno">  772</span>    assert_array_equal(enc.transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  773</span> </div>
<div class="line"><span class="lineno">  774</span>    X = pd.DataFrame({<span class="stringliteral">&quot;A&quot;</span>: [1, 2], <span class="stringliteral">&quot;B&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], <span class="stringliteral">&quot;C&quot;</span>: [3.0, 4.0]})</div>
<div class="line"><span class="lineno">  775</span>    X_type = [X[<span class="stringliteral">&quot;A&quot;</span>].dtype, X[<span class="stringliteral">&quot;B&quot;</span>].dtype, X[<span class="stringliteral">&quot;C&quot;</span>].dtype]</div>
<div class="line"><span class="lineno">  776</span>    enc.fit(X)</div>
<div class="line"><span class="lineno">  777</span>    <span class="keyword">assert</span> all([enc.categories_[i].dtype == X_type[i] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(3)])</div>
<div class="line"><span class="lineno">  778</span>    assert_array_equal(enc.transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  779</span> </div>
<div class="line"><span class="lineno">  780</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9894aabed10a3ca654bbaa10aac3ca7" name="ab9894aabed10a3ca654bbaa10aac3ca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9894aabed10a3ca654bbaa10aac3ca7">&#9670;&#160;</a></span>test_encoders_has_categorical_tags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_encoders_has_categorical_tags </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Encoder</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  853</span><span class="keyword">def </span>test_encoders_has_categorical_tags(Encoder):</div>
<div class="line"><span class="lineno">  854</span>    <span class="keyword">assert</span> <span class="stringliteral">&quot;categorical&quot;</span> <span class="keywordflow">in</span> Encoder()._get_tags()[<span class="stringliteral">&quot;X_types&quot;</span>]</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span> </div>
<div class="line"><span class="lineno">  857</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  858</span>    <span class="stringliteral">&quot;kwargs&quot;</span>,</div>
<div class="line"><span class="lineno">  859</span>    [</div>
<div class="line"><span class="lineno">  860</span>        {<span class="stringliteral">&quot;max_categories&quot;</span>: 2},</div>
<div class="line"><span class="lineno">  861</span>        {<span class="stringliteral">&quot;min_frequency&quot;</span>: 11},</div>
<div class="line"><span class="lineno">  862</span>        {<span class="stringliteral">&quot;min_frequency&quot;</span>: 0.29},</div>
<div class="line"><span class="lineno">  863</span>        {<span class="stringliteral">&quot;max_categories&quot;</span>: 2, <span class="stringliteral">&quot;min_frequency&quot;</span>: 6},</div>
<div class="line"><span class="lineno">  864</span>        {<span class="stringliteral">&quot;max_categories&quot;</span>: 4, <span class="stringliteral">&quot;min_frequency&quot;</span>: 12},</div>
<div class="line"><span class="lineno">  865</span>    ],</div>
<div class="line"><span class="lineno">  866</span>)</div>
<div class="line"><span class="lineno">  867</span><span class="preprocessor">@pytest.mark.parametrize(&quot;categories&quot;, [&quot;auto&quot;, [[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]]])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a237831acecd4c66325585820ada6c7a8" name="a237831acecd4c66325585820ada6c7a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a237831acecd4c66325585820ada6c7a8">&#9670;&#160;</a></span>test_encoders_string_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_encoders_string_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>category_dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>array_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that encoding work with object, unicode, and byte string dtypes.
Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/15616
https://github.com/scikit-learn/scikit-learn/issues/15726
https://github.com/scikit-learn/scikit-learn/issues/19677
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1352</span><span class="keyword">def </span>test_encoders_string_categories(input_dtype, category_dtype, array_type):</div>
<div class="line"><span class="lineno"> 1353</span>    <span class="stringliteral">&quot;&quot;&quot;Check that encoding work with object, unicode, and byte string dtypes.</span></div>
<div class="line"><span class="lineno"> 1354</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 1355</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/15616</span></div>
<div class="line"><span class="lineno"> 1356</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/15726</span></div>
<div class="line"><span class="lineno"> 1357</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/19677</span></div>
<div class="line"><span class="lineno"> 1358</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1359</span> </div>
<div class="line"><span class="lineno"> 1360</span>    X = np.array([[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>]], dtype=input_dtype)</div>
<div class="line"><span class="lineno"> 1361</span>    categories = [np.array([<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], dtype=category_dtype)]</div>
<div class="line"><span class="lineno"> 1362</span>    ohe = OneHotEncoder(categories=categories, sparse_output=<span class="keyword">False</span>).fit(X)</div>
<div class="line"><span class="lineno"> 1363</span> </div>
<div class="line"><span class="lineno"> 1364</span>    X_test = _convert_container(</div>
<div class="line"><span class="lineno"> 1365</span>        [[<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>]], array_type, dtype=input_dtype</div>
<div class="line"><span class="lineno"> 1366</span>    )</div>
<div class="line"><span class="lineno"> 1367</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1368</span> </div>
<div class="line"><span class="lineno"> 1369</span>    expected = np.array([[0, 1], [0, 1], [1, 0], [0, 1]])</div>
<div class="line"><span class="lineno"> 1370</span>    assert_allclose(X_trans, expected)</div>
<div class="line"><span class="lineno"> 1371</span> </div>
<div class="line"><span class="lineno"> 1372</span>    oe = OrdinalEncoder(categories=categories).fit(X)</div>
<div class="line"><span class="lineno"> 1373</span>    X_trans = oe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1374</span> </div>
<div class="line"><span class="lineno"> 1375</span>    expected = np.array([[1], [1], [0], [1]])</div>
<div class="line"><span class="lineno"> 1376</span>    assert_array_equal(X_trans, expected)</div>
<div class="line"><span class="lineno"> 1377</span> </div>
<div class="line"><span class="lineno"> 1378</span> </div>
<div class="line"><span class="lineno"> 1379</span><span class="preprocessor">@pytest.mark.parametrize(&quot;missing_value&quot;, [np.nan, None])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c805c6a4f4cde203070158ab009f257" name="a6c805c6a4f4cde203070158ab009f257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c805c6a4f4cde203070158ab009f257">&#9670;&#160;</a></span>test_invalid_drop_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_invalid_drop_length </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  825</span><span class="keyword">def </span>test_invalid_drop_length(drop):</div>
<div class="line"><span class="lineno">  826</span>    enc = OneHotEncoder(drop=drop)</div>
<div class="line"><span class="lineno">  827</span>    err_msg = <span class="stringliteral">&quot;`drop` should have length equal to the number&quot;</span></div>
<div class="line"><span class="lineno">  828</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=err_msg):</div>
<div class="line"><span class="lineno">  829</span>        enc.fit([[<span class="stringliteral">&quot;abc&quot;</span>, 2, 55], [<span class="stringliteral">&quot;def&quot;</span>, 1, 55], [<span class="stringliteral">&quot;def&quot;</span>, 3, 59]])</div>
<div class="line"><span class="lineno">  830</span> </div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span><span class="preprocessor">@pytest.mark.parametrize(&quot;density&quot;, [True, False], ids=[&quot;sparse&quot;, &quot;dense&quot;])</span></div>
<div class="line"><span class="lineno">  833</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [&quot;first&quot;, [&quot;a&quot;, 2, &quot;b&quot;]], ids=[&quot;first&quot;, &quot;manual&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a239fc1bb23b4a897f9dd914349408ec0" name="a239fc1bb23b4a897f9dd914349408ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a239fc1bb23b4a897f9dd914349408ec0">&#9670;&#160;</a></span>test_ohe_drop_first_explicit_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_drop_first_explicit_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check drop='first' and handle_unknown='ignore'/'infrequent_if_exist'
during fit with categories passed in.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1519</span><span class="keyword">def </span>test_ohe_drop_first_explicit_categories(handle_unknown):</div>
<div class="line"><span class="lineno"> 1520</span>    <span class="stringliteral">&quot;&quot;&quot;Check drop=&#39;first&#39; and handle_unknown=&#39;ignore&#39;/&#39;infrequent_if_exist&#39;</span></div>
<div class="line"><span class="lineno"> 1521</span><span class="stringliteral">    during fit with categories passed in.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1522</span> </div>
<div class="line"><span class="lineno"> 1523</span>    X = [[<span class="stringliteral">&quot;a&quot;</span>, 0], [<span class="stringliteral">&quot;b&quot;</span>, 2], [<span class="stringliteral">&quot;b&quot;</span>, 1]]</div>
<div class="line"><span class="lineno"> 1524</span> </div>
<div class="line"><span class="lineno"> 1525</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1526</span>        drop=<span class="stringliteral">&quot;first&quot;</span>,</div>
<div class="line"><span class="lineno"> 1527</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1528</span>        handle_unknown=handle_unknown,</div>
<div class="line"><span class="lineno"> 1529</span>        categories=[[<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], [1, 2]],</div>
<div class="line"><span class="lineno"> 1530</span>    )</div>
<div class="line"><span class="lineno"> 1531</span>    ohe.fit(X)</div>
<div class="line"><span class="lineno"> 1532</span> </div>
<div class="line"><span class="lineno"> 1533</span>    X_test = [[<span class="stringliteral">&quot;c&quot;</span>, 1]]</div>
<div class="line"><span class="lineno"> 1534</span>    X_expected = np.array([[0, 0]])</div>
<div class="line"><span class="lineno"> 1535</span> </div>
<div class="line"><span class="lineno"> 1536</span>    warn_msg = (</div>
<div class="line"><span class="lineno"> 1537</span>        <span class="stringliteral">r&quot;Found unknown categories in columns \[0\] during transform. &quot;</span></div>
<div class="line"><span class="lineno"> 1538</span>        <span class="stringliteral">r&quot;These unknown categories will be encoded as all zeros&quot;</span></div>
<div class="line"><span class="lineno"> 1539</span>    )</div>
<div class="line"><span class="lineno"> 1540</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=warn_msg):</div>
<div class="line"><span class="lineno"> 1541</span>        X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1542</span>    assert_allclose(X_trans, X_expected)</div>
<div class="line"><span class="lineno"> 1543</span> </div>
<div class="line"><span class="lineno"> 1544</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="adbf0e7e8c487ef1100b8bd7d7a660c9d" name="adbf0e7e8c487ef1100b8bd7d7a660c9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbf0e7e8c487ef1100b8bd7d7a660c9d">&#9670;&#160;</a></span>test_ohe_drop_first_handle_unknown_ignore_warns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_drop_first_handle_unknown_ignore_warns </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check drop='first' and handle_unknown='ignore'/'infrequent_if_exist'
during transform.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1444</span><span class="keyword">def </span>test_ohe_drop_first_handle_unknown_ignore_warns(handle_unknown):</div>
<div class="line"><span class="lineno"> 1445</span>    <span class="stringliteral">&quot;&quot;&quot;Check drop=&#39;first&#39; and handle_unknown=&#39;ignore&#39;/&#39;infrequent_if_exist&#39;</span></div>
<div class="line"><span class="lineno"> 1446</span><span class="stringliteral">    during transform.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1447</span>    X = [[<span class="stringliteral">&quot;a&quot;</span>, 0], [<span class="stringliteral">&quot;b&quot;</span>, 2], [<span class="stringliteral">&quot;b&quot;</span>, 1]]</div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1450</span>        drop=<span class="stringliteral">&quot;first&quot;</span>, sparse_output=<span class="keyword">False</span>, handle_unknown=handle_unknown</div>
<div class="line"><span class="lineno"> 1451</span>    )</div>
<div class="line"><span class="lineno"> 1452</span>    X_trans = ohe.fit_transform(X)</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>    X_expected = np.array(</div>
<div class="line"><span class="lineno"> 1455</span>        [</div>
<div class="line"><span class="lineno"> 1456</span>            [0, 0, 0],</div>
<div class="line"><span class="lineno"> 1457</span>            [1, 0, 1],</div>
<div class="line"><span class="lineno"> 1458</span>            [1, 1, 0],</div>
<div class="line"><span class="lineno"> 1459</span>        ]</div>
<div class="line"><span class="lineno"> 1460</span>    )</div>
<div class="line"><span class="lineno"> 1461</span>    assert_allclose(X_trans, X_expected)</div>
<div class="line"><span class="lineno"> 1462</span> </div>
<div class="line"><span class="lineno"> 1463</span>    <span class="comment"># Both categories are unknown</span></div>
<div class="line"><span class="lineno"> 1464</span>    X_test = [[<span class="stringliteral">&quot;c&quot;</span>, 3]]</div>
<div class="line"><span class="lineno"> 1465</span>    X_expected = np.array([[0, 0, 0]])</div>
<div class="line"><span class="lineno"> 1466</span> </div>
<div class="line"><span class="lineno"> 1467</span>    warn_msg = (</div>
<div class="line"><span class="lineno"> 1468</span>        <span class="stringliteral">r&quot;Found unknown categories in columns \[0, 1\] during &quot;</span></div>
<div class="line"><span class="lineno"> 1469</span>        <span class="stringliteral">&quot;transform. These unknown categories will be encoded as all &quot;</span></div>
<div class="line"><span class="lineno"> 1470</span>        <span class="stringliteral">&quot;zeros&quot;</span></div>
<div class="line"><span class="lineno"> 1471</span>    )</div>
<div class="line"><span class="lineno"> 1472</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=warn_msg):</div>
<div class="line"><span class="lineno"> 1473</span>        X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1474</span>    assert_allclose(X_trans, X_expected)</div>
<div class="line"><span class="lineno"> 1475</span> </div>
<div class="line"><span class="lineno"> 1476</span>    <span class="comment"># inverse_transform maps to None</span></div>
<div class="line"><span class="lineno"> 1477</span>    X_inv = ohe.inverse_transform(X_expected)</div>
<div class="line"><span class="lineno"> 1478</span>    assert_array_equal(X_inv, np.array([[<span class="stringliteral">&quot;a&quot;</span>, 0]], dtype=object))</div>
<div class="line"><span class="lineno"> 1479</span> </div>
<div class="line"><span class="lineno"> 1480</span> </div>
<div class="line"><span class="lineno"> 1481</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;ignore&quot;, &quot;infrequent_if_exist&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aded987f909693e05c5a673ac8e88bbad" name="aded987f909693e05c5a673ac8e88bbad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aded987f909693e05c5a673ac8e88bbad">&#9670;&#160;</a></span>test_ohe_drop_if_binary_handle_unknown_ignore_warns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_drop_if_binary_handle_unknown_ignore_warns </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check drop='if_binary' and handle_unknown='ignore' during transform.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1482</span><span class="keyword">def </span>test_ohe_drop_if_binary_handle_unknown_ignore_warns(handle_unknown):</div>
<div class="line"><span class="lineno"> 1483</span>    <span class="stringliteral">&quot;&quot;&quot;Check drop=&#39;if_binary&#39; and handle_unknown=&#39;ignore&#39; during transform.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1484</span>    X = [[<span class="stringliteral">&quot;a&quot;</span>, 0], [<span class="stringliteral">&quot;b&quot;</span>, 2], [<span class="stringliteral">&quot;b&quot;</span>, 1]]</div>
<div class="line"><span class="lineno"> 1485</span> </div>
<div class="line"><span class="lineno"> 1486</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1487</span>        drop=<span class="stringliteral">&quot;if_binary&quot;</span>, sparse_output=<span class="keyword">False</span>, handle_unknown=handle_unknown</div>
<div class="line"><span class="lineno"> 1488</span>    )</div>
<div class="line"><span class="lineno"> 1489</span>    X_trans = ohe.fit_transform(X)</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>    X_expected = np.array(</div>
<div class="line"><span class="lineno"> 1492</span>        [</div>
<div class="line"><span class="lineno"> 1493</span>            [0, 1, 0, 0],</div>
<div class="line"><span class="lineno"> 1494</span>            [1, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1495</span>            [1, 0, 1, 0],</div>
<div class="line"><span class="lineno"> 1496</span>        ]</div>
<div class="line"><span class="lineno"> 1497</span>    )</div>
<div class="line"><span class="lineno"> 1498</span>    assert_allclose(X_trans, X_expected)</div>
<div class="line"><span class="lineno"> 1499</span> </div>
<div class="line"><span class="lineno"> 1500</span>    <span class="comment"># Both categories are unknown</span></div>
<div class="line"><span class="lineno"> 1501</span>    X_test = [[<span class="stringliteral">&quot;c&quot;</span>, 3]]</div>
<div class="line"><span class="lineno"> 1502</span>    X_expected = np.array([[0, 0, 0, 0]])</div>
<div class="line"><span class="lineno"> 1503</span> </div>
<div class="line"><span class="lineno"> 1504</span>    warn_msg = (</div>
<div class="line"><span class="lineno"> 1505</span>        <span class="stringliteral">r&quot;Found unknown categories in columns \[0, 1\] during &quot;</span></div>
<div class="line"><span class="lineno"> 1506</span>        <span class="stringliteral">&quot;transform. These unknown categories will be encoded as all &quot;</span></div>
<div class="line"><span class="lineno"> 1507</span>        <span class="stringliteral">&quot;zeros&quot;</span></div>
<div class="line"><span class="lineno"> 1508</span>    )</div>
<div class="line"><span class="lineno"> 1509</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=warn_msg):</div>
<div class="line"><span class="lineno"> 1510</span>        X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1511</span>    assert_allclose(X_trans, X_expected)</div>
<div class="line"><span class="lineno"> 1512</span> </div>
<div class="line"><span class="lineno"> 1513</span>    <span class="comment"># inverse_transform maps to None</span></div>
<div class="line"><span class="lineno"> 1514</span>    X_inv = ohe.inverse_transform(X_expected)</div>
<div class="line"><span class="lineno"> 1515</span>    assert_array_equal(X_inv, np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="keywordtype">None</span>]], dtype=object))</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span> </div>
<div class="line"><span class="lineno"> 1518</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;ignore&quot;, &quot;infrequent_if_exist&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="acdaa9be9617e4117b7e0a86fe57dfdc7" name="acdaa9be9617e4117b7e0a86fe57dfdc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdaa9be9617e4117b7e0a86fe57dfdc7">&#9670;&#160;</a></span>test_ohe_infrequent_handle_unknown_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_handle_unknown_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that different parameters for combining 'a', and 'd' into
the infrequent category works as expected.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1019</span><span class="keyword">def </span>test_ohe_infrequent_handle_unknown_error():</div>
<div class="line"><span class="lineno"> 1020</span>    <span class="stringliteral">&quot;&quot;&quot;Test that different parameters for combining &#39;a&#39;, and &#39;d&#39; into</span></div>
<div class="line"><span class="lineno"> 1021</span><span class="stringliteral">    the infrequent category works as expected.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3]).T</div>
<div class="line"><span class="lineno"> 1024</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1025</span>        handle_unknown=<span class="stringliteral">&quot;error&quot;</span>, sparse_output=<span class="keyword">False</span>, max_categories=3</div>
<div class="line"><span class="lineno"> 1026</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno"> 1027</span>    assert_array_equal(ohe.infrequent_categories_, [[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]])</div>
<div class="line"><span class="lineno"> 1028</span> </div>
<div class="line"><span class="lineno"> 1029</span>    <span class="comment"># all categories are known</span></div>
<div class="line"><span class="lineno"> 1030</span>    X_test = [[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;d&quot;</span>]]</div>
<div class="line"><span class="lineno"> 1031</span>    expected = np.array([[1, 0, 0], [0, 0, 1], [0, 1, 0], [0, 0, 1]])</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1034</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno"> 1035</span> </div>
<div class="line"><span class="lineno"> 1036</span>    <span class="comment"># &#39;bad&#39; is not known and will error</span></div>
<div class="line"><span class="lineno"> 1037</span>    X_test = [[<span class="stringliteral">&quot;bad&quot;</span>]]</div>
<div class="line"><span class="lineno"> 1038</span>    msg = <span class="stringliteral">r&quot;Found unknown categories \[&#39;bad&#39;\] in column 0&quot;</span></div>
<div class="line"><span class="lineno"> 1039</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 1040</span>        ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1041</span> </div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1044</span>    <span class="stringliteral">&quot;kwargs&quot;</span>, [{<span class="stringliteral">&quot;max_categories&quot;</span>: 3, <span class="stringliteral">&quot;min_frequency&quot;</span>: 1}, {<span class="stringliteral">&quot;min_frequency&quot;</span>: 4}]</div>
<div class="line"><span class="lineno"> 1045</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a12a8e9cad5e03a63ace179a5a6f47382" name="a12a8e9cad5e03a63ace179a5a6f47382"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12a8e9cad5e03a63ace179a5a6f47382">&#9670;&#160;</a></span>test_ohe_infrequent_mixed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_mixed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test infrequent categories where feature 0 has infrequent categories,
and feature 1 does not.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1134</span><span class="keyword">def </span>test_ohe_infrequent_mixed():</div>
<div class="line"><span class="lineno"> 1135</span>    <span class="stringliteral">&quot;&quot;&quot;Test infrequent categories where feature 0 has infrequent categories,</span></div>
<div class="line"><span class="lineno"> 1136</span><span class="stringliteral">    and feature 1 does not.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>    <span class="comment"># X[:, 0] 1 and 2 are infrequent</span></div>
<div class="line"><span class="lineno"> 1139</span>    <span class="comment"># X[:, 1] nothing is infrequent</span></div>
<div class="line"><span class="lineno"> 1140</span>    X = np.c_[[0, 1, 3, 3, 3, 3, 2, 0, 3], [0, 0, 0, 0, 1, 1, 1, 1, 1]]</div>
<div class="line"><span class="lineno"> 1141</span> </div>
<div class="line"><span class="lineno"> 1142</span>    ohe = OneHotEncoder(max_categories=3, drop=<span class="stringliteral">&quot;if_binary&quot;</span>, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1143</span>    ohe.fit(X)</div>
<div class="line"><span class="lineno"> 1144</span> </div>
<div class="line"><span class="lineno"> 1145</span>    X_test = [[3, 0], [1, 1]]</div>
<div class="line"><span class="lineno"> 1146</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1147</span> </div>
<div class="line"><span class="lineno"> 1148</span>    <span class="comment"># feature 1 is binary so it drops a category 0</span></div>
<div class="line"><span class="lineno"> 1149</span>    assert_allclose(X_trans, [[0, 1, 0, 0], [0, 0, 1, 1]])</div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8208bf8dd61c675ec2534379a9a0093" name="aa8208bf8dd61c675ec2534379a9a0093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8208bf8dd61c675ec2534379a9a0093">&#9670;&#160;</a></span>test_ohe_infrequent_multiple_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_multiple_categories </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test infrequent categories with feature matrix with 3 features.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1152</span><span class="keyword">def </span>test_ohe_infrequent_multiple_categories():</div>
<div class="line"><span class="lineno"> 1153</span>    <span class="stringliteral">&quot;&quot;&quot;Test infrequent categories with feature matrix with 3 features.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1154</span> </div>
<div class="line"><span class="lineno"> 1155</span>    X = np.c_[</div>
<div class="line"><span class="lineno"> 1156</span>        [0, 1, 3, 3, 3, 3, 2, 0, 3],</div>
<div class="line"><span class="lineno"> 1157</span>        [0, 0, 5, 1, 1, 10, 5, 5, 0],</div>
<div class="line"><span class="lineno"> 1158</span>        [1, 0, 1, 0, 1, 0, 1, 0, 1],</div>
<div class="line"><span class="lineno"> 1159</span>    ]</div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1162</span>        categories=<span class="stringliteral">&quot;auto&quot;</span>, max_categories=3, handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span></div>
<div class="line"><span class="lineno"> 1163</span>    )</div>
<div class="line"><span class="lineno"> 1164</span>    <span class="comment"># X[:, 0] 1 and 2 are infrequent</span></div>
<div class="line"><span class="lineno"> 1165</span>    <span class="comment"># X[:, 1] 1 and 10 are infrequent</span></div>
<div class="line"><span class="lineno"> 1166</span>    <span class="comment"># X[:, 2] nothing is infrequent</span></div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span>    X_trans = ohe.fit_transform(X).toarray()</div>
<div class="line"><span class="lineno"> 1169</span>    assert_array_equal(ohe.infrequent_categories_[0], [1, 2])</div>
<div class="line"><span class="lineno"> 1170</span>    assert_array_equal(ohe.infrequent_categories_[1], [1, 10])</div>
<div class="line"><span class="lineno"> 1171</span>    assert_array_equal(ohe.infrequent_categories_[2], <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1172</span> </div>
<div class="line"><span class="lineno"> 1173</span>    <span class="comment"># &#39;infrequent&#39; is used to denote the infrequent categories</span></div>
<div class="line"><span class="lineno"> 1174</span>    <span class="comment"># For the first column, 1 and 2 have the same frequency. In this case,</span></div>
<div class="line"><span class="lineno"> 1175</span>    <span class="comment"># 1 will be chosen to be the feature name because is smaller lexiconically</span></div>
<div class="line"><span class="lineno"> 1176</span>    feature_names = ohe.get_feature_names_out()</div>
<div class="line"><span class="lineno"> 1177</span>    assert_array_equal(</div>
<div class="line"><span class="lineno"> 1178</span>        [</div>
<div class="line"><span class="lineno"> 1179</span>            <span class="stringliteral">&quot;x0_0&quot;</span>,</div>
<div class="line"><span class="lineno"> 1180</span>            <span class="stringliteral">&quot;x0_3&quot;</span>,</div>
<div class="line"><span class="lineno"> 1181</span>            <span class="stringliteral">&quot;x0_infrequent_sklearn&quot;</span>,</div>
<div class="line"><span class="lineno"> 1182</span>            <span class="stringliteral">&quot;x1_0&quot;</span>,</div>
<div class="line"><span class="lineno"> 1183</span>            <span class="stringliteral">&quot;x1_5&quot;</span>,</div>
<div class="line"><span class="lineno"> 1184</span>            <span class="stringliteral">&quot;x1_infrequent_sklearn&quot;</span>,</div>
<div class="line"><span class="lineno"> 1185</span>            <span class="stringliteral">&quot;x2_0&quot;</span>,</div>
<div class="line"><span class="lineno"> 1186</span>            <span class="stringliteral">&quot;x2_1&quot;</span>,</div>
<div class="line"><span class="lineno"> 1187</span>        ],</div>
<div class="line"><span class="lineno"> 1188</span>        feature_names,</div>
<div class="line"><span class="lineno"> 1189</span>    )</div>
<div class="line"><span class="lineno"> 1190</span> </div>
<div class="line"><span class="lineno"> 1191</span>    expected = [</div>
<div class="line"><span class="lineno"> 1192</span>        [1, 0, 0, 1, 0, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1193</span>        [0, 0, 1, 1, 0, 0, 1, 0],</div>
<div class="line"><span class="lineno"> 1194</span>        [0, 1, 0, 0, 1, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1195</span>        [0, 1, 0, 0, 0, 1, 1, 0],</div>
<div class="line"><span class="lineno"> 1196</span>        [0, 1, 0, 0, 0, 1, 0, 1],</div>
<div class="line"><span class="lineno"> 1197</span>        [0, 1, 0, 0, 0, 1, 1, 0],</div>
<div class="line"><span class="lineno"> 1198</span>        [0, 0, 1, 0, 1, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1199</span>        [1, 0, 0, 0, 1, 0, 1, 0],</div>
<div class="line"><span class="lineno"> 1200</span>        [0, 1, 0, 1, 0, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1201</span>    ]</div>
<div class="line"><span class="lineno"> 1202</span> </div>
<div class="line"><span class="lineno"> 1203</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno"> 1204</span> </div>
<div class="line"><span class="lineno"> 1205</span>    X_test = [[3, 1, 2], [4, 0, 3]]</div>
<div class="line"><span class="lineno"> 1206</span> </div>
<div class="line"><span class="lineno"> 1207</span>    X_test_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1208</span> </div>
<div class="line"><span class="lineno"> 1209</span>    <span class="comment"># X[:, 2] does not have an infrequent category, thus it is encoded as all</span></div>
<div class="line"><span class="lineno"> 1210</span>    <span class="comment"># zeros</span></div>
<div class="line"><span class="lineno"> 1211</span>    expected = [[0, 1, 0, 0, 0, 1, 0, 0], [0, 0, 1, 1, 0, 0, 0, 0]]</div>
<div class="line"><span class="lineno"> 1212</span>    assert_allclose(expected, X_test_trans.toarray())</div>
<div class="line"><span class="lineno"> 1213</span> </div>
<div class="line"><span class="lineno"> 1214</span>    X_inv = ohe.inverse_transform(X_test_trans)</div>
<div class="line"><span class="lineno"> 1215</span>    expected_inv = np.array(</div>
<div class="line"><span class="lineno"> 1216</span>        [[3, <span class="stringliteral">&quot;infrequent_sklearn&quot;</span>, <span class="keywordtype">None</span>], [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>, 0, <span class="keywordtype">None</span>]], dtype=object</div>
<div class="line"><span class="lineno"> 1217</span>    )</div>
<div class="line"><span class="lineno"> 1218</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>    <span class="comment"># error for unknown categories</span></div>
<div class="line"><span class="lineno"> 1221</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1222</span>        categories=<span class="stringliteral">&quot;auto&quot;</span>, max_categories=3, handle_unknown=<span class="stringliteral">&quot;error&quot;</span></div>
<div class="line"><span class="lineno"> 1223</span>    ).fit(X)</div>
<div class="line"><span class="lineno"> 1224</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;Found unknown categories&quot;</span>):</div>
<div class="line"><span class="lineno"> 1225</span>        ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1226</span> </div>
<div class="line"><span class="lineno"> 1227</span>    <span class="comment"># only infrequent or known categories</span></div>
<div class="line"><span class="lineno"> 1228</span>    X_test = [[1, 1, 1], [3, 10, 0]]</div>
<div class="line"><span class="lineno"> 1229</span>    X_test_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1230</span> </div>
<div class="line"><span class="lineno"> 1231</span>    expected = [[0, 0, 1, 0, 0, 1, 0, 1], [0, 1, 0, 0, 0, 1, 1, 0]]</div>
<div class="line"><span class="lineno"> 1232</span>    assert_allclose(expected, X_test_trans.toarray())</div>
<div class="line"><span class="lineno"> 1233</span> </div>
<div class="line"><span class="lineno"> 1234</span>    X_inv = ohe.inverse_transform(X_test_trans)</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>    expected_inv = np.array(</div>
<div class="line"><span class="lineno"> 1237</span>        [[<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>, <span class="stringliteral">&quot;infrequent_sklearn&quot;</span>, 1], [3, <span class="stringliteral">&quot;infrequent_sklearn&quot;</span>, 0]],</div>
<div class="line"><span class="lineno"> 1238</span>        dtype=object,</div>
<div class="line"><span class="lineno"> 1239</span>    )</div>
<div class="line"><span class="lineno"> 1240</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno"> 1241</span> </div>
<div class="line"><span class="lineno"> 1242</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa1b46867253cfb06d5e7074e241f797" name="aaa1b46867253cfb06d5e7074e241f797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1b46867253cfb06d5e7074e241f797">&#9670;&#160;</a></span>test_ohe_infrequent_multiple_categories_dtypes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_multiple_categories_dtypes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test infrequent categories with a pandas dataframe with multiple dtypes.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1243</span><span class="keyword">def </span>test_ohe_infrequent_multiple_categories_dtypes():</div>
<div class="line"><span class="lineno"> 1244</span>    <span class="stringliteral">&quot;&quot;&quot;Test infrequent categories with a pandas dataframe with multiple dtypes.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1247</span>    X = pd.DataFrame(</div>
<div class="line"><span class="lineno"> 1248</span>        {</div>
<div class="line"><span class="lineno"> 1249</span>            <span class="stringliteral">&quot;str&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;f&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;f&quot;</span>, <span class="stringliteral">&quot;f&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno"> 1250</span>            <span class="stringliteral">&quot;int&quot;</span>: [5, 3, 0, 10, 10, 12, 0, 3, 5],</div>
<div class="line"><span class="lineno"> 1251</span>        },</div>
<div class="line"><span class="lineno"> 1252</span>        columns=[<span class="stringliteral">&quot;str&quot;</span>, <span class="stringliteral">&quot;int&quot;</span>],</div>
<div class="line"><span class="lineno"> 1253</span>    )</div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1256</span>        categories=<span class="stringliteral">&quot;auto&quot;</span>, max_categories=3, handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span></div>
<div class="line"><span class="lineno"> 1257</span>    )</div>
<div class="line"><span class="lineno"> 1258</span>    <span class="comment"># X[:, 0] &#39;a&#39;, &#39;b&#39;, &#39;c&#39; have the same frequency. &#39;a&#39; and &#39;b&#39; will be</span></div>
<div class="line"><span class="lineno"> 1259</span>    <span class="comment"># considered infrequent because they are greater</span></div>
<div class="line"><span class="lineno"> 1260</span> </div>
<div class="line"><span class="lineno"> 1261</span>    <span class="comment"># X[:, 1] 0, 3, 5, 10 has frequency 2 and 12 has frequency 1.</span></div>
<div class="line"><span class="lineno"> 1262</span>    <span class="comment"># 0, 3, 12 will be considered infrequent</span></div>
<div class="line"><span class="lineno"> 1263</span> </div>
<div class="line"><span class="lineno"> 1264</span>    X_trans = ohe.fit_transform(X).toarray()</div>
<div class="line"><span class="lineno"> 1265</span>    assert_array_equal(ohe.infrequent_categories_[0], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>])</div>
<div class="line"><span class="lineno"> 1266</span>    assert_array_equal(ohe.infrequent_categories_[1], [0, 3, 12])</div>
<div class="line"><span class="lineno"> 1267</span> </div>
<div class="line"><span class="lineno"> 1268</span>    expected = [</div>
<div class="line"><span class="lineno"> 1269</span>        [0, 0, 1, 1, 0, 0],</div>
<div class="line"><span class="lineno"> 1270</span>        [0, 1, 0, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1271</span>        [1, 0, 0, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1272</span>        [0, 1, 0, 0, 1, 0],</div>
<div class="line"><span class="lineno"> 1273</span>        [0, 1, 0, 0, 1, 0],</div>
<div class="line"><span class="lineno"> 1274</span>        [0, 0, 1, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1275</span>        [1, 0, 0, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1276</span>        [0, 0, 1, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1277</span>        [0, 0, 1, 1, 0, 0],</div>
<div class="line"><span class="lineno"> 1278</span>    ]</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>    X_test = pd.DataFrame({<span class="stringliteral">&quot;str&quot;</span>: [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;f&quot;</span>], <span class="stringliteral">&quot;int&quot;</span>: [14, 12]}, columns=[<span class="stringliteral">&quot;str&quot;</span>, <span class="stringliteral">&quot;int&quot;</span>])</div>
<div class="line"><span class="lineno"> 1283</span> </div>
<div class="line"><span class="lineno"> 1284</span>    expected = [[0, 0, 1, 0, 0, 1], [0, 1, 0, 0, 0, 1]]</div>
<div class="line"><span class="lineno"> 1285</span>    X_test_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1286</span>    assert_allclose(expected, X_test_trans.toarray())</div>
<div class="line"><span class="lineno"> 1287</span> </div>
<div class="line"><span class="lineno"> 1288</span>    X_inv = ohe.inverse_transform(X_test_trans)</div>
<div class="line"><span class="lineno"> 1289</span>    expected_inv = np.array(</div>
<div class="line"><span class="lineno"> 1290</span>        [[<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>, <span class="stringliteral">&quot;infrequent_sklearn&quot;</span>], [<span class="stringliteral">&quot;f&quot;</span>, <span class="stringliteral">&quot;infrequent_sklearn&quot;</span>]],</div>
<div class="line"><span class="lineno"> 1291</span>        dtype=object,</div>
<div class="line"><span class="lineno"> 1292</span>    )</div>
<div class="line"><span class="lineno"> 1293</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span>    <span class="comment"># only infrequent or known categories</span></div>
<div class="line"><span class="lineno"> 1296</span>    X_test = pd.DataFrame({<span class="stringliteral">&quot;str&quot;</span>: [<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], <span class="stringliteral">&quot;int&quot;</span>: [12, 5]}, columns=[<span class="stringliteral">&quot;str&quot;</span>, <span class="stringliteral">&quot;int&quot;</span>])</div>
<div class="line"><span class="lineno"> 1297</span>    X_test_trans = ohe.transform(X_test).toarray()</div>
<div class="line"><span class="lineno"> 1298</span>    expected = [[1, 0, 0, 0, 0, 1], [0, 0, 1, 1, 0, 0]]</div>
<div class="line"><span class="lineno"> 1299</span>    assert_allclose(expected, X_test_trans)</div>
<div class="line"><span class="lineno"> 1300</span> </div>
<div class="line"><span class="lineno"> 1301</span>    X_inv = ohe.inverse_transform(X_test_trans)</div>
<div class="line"><span class="lineno"> 1302</span>    expected_inv = np.array(</div>
<div class="line"><span class="lineno"> 1303</span>        [[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;infrequent_sklearn&quot;</span>], [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>, 5]], dtype=object</div>
<div class="line"><span class="lineno"> 1304</span>    )</div>
<div class="line"><span class="lineno"> 1305</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno"> 1306</span> </div>
<div class="line"><span class="lineno"> 1307</span> </div>
<div class="line"><span class="lineno"> 1308</span><span class="preprocessor">@pytest.mark.parametrize(&quot;kwargs&quot;, [{&quot;min_frequency&quot;: 21, &quot;max_categories&quot;: 1}])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a639c405418ff2389a97734823ffecb6a" name="a639c405418ff2389a97734823ffecb6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a639c405418ff2389a97734823ffecb6a">&#9670;&#160;</a></span>test_ohe_infrequent_one_level_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_one_level_errors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">All user provided categories are infrequent.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1309</span><span class="keyword">def </span>test_ohe_infrequent_one_level_errors(kwargs):</div>
<div class="line"><span class="lineno"> 1310</span>    <span class="stringliteral">&quot;&quot;&quot;All user provided categories are infrequent.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1311</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 2]).T</div>
<div class="line"><span class="lineno"> 1312</span> </div>
<div class="line"><span class="lineno"> 1313</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1314</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>, sparse_output=<span class="keyword">False</span>, **kwargs</div>
<div class="line"><span class="lineno"> 1315</span>    )</div>
<div class="line"><span class="lineno"> 1316</span>    ohe.fit(X_train)</div>
<div class="line"><span class="lineno"> 1317</span> </div>
<div class="line"><span class="lineno"> 1318</span>    X_trans = ohe.transform([[<span class="stringliteral">&quot;a&quot;</span>]])</div>
<div class="line"><span class="lineno"> 1319</span>    assert_allclose(X_trans, [[1]])</div>
<div class="line"><span class="lineno"> 1320</span> </div>
<div class="line"><span class="lineno"> 1321</span> </div>
<div class="line"><span class="lineno"> 1322</span><span class="preprocessor">@pytest.mark.parametrize(&quot;kwargs&quot;, [{&quot;min_frequency&quot;: 2, &quot;max_categories&quot;: 3}])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7179258b8ce9e1c4c86f0f1f62c7d5e5" name="a7179258b8ce9e1c4c86f0f1f62c7d5e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7179258b8ce9e1c4c86f0f1f62c7d5e5">&#9670;&#160;</a></span>test_ohe_infrequent_three_levels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_three_levels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that different parameters for combing 'a', and 'd' into
the infrequent category works as expected.</pre> <div class="fragment"><div class="line"><span class="lineno">  949</span><span class="keyword">def </span>test_ohe_infrequent_three_levels(kwargs):</div>
<div class="line"><span class="lineno">  950</span>    <span class="stringliteral">&quot;&quot;&quot;Test that different parameters for combing &#39;a&#39;, and &#39;d&#39; into</span></div>
<div class="line"><span class="lineno">  951</span><span class="stringliteral">    the infrequent category works as expected.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3]).T</div>
<div class="line"><span class="lineno">  954</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno">  955</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>, sparse_output=<span class="keyword">False</span>, **kwargs</div>
<div class="line"><span class="lineno">  956</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno">  957</span>    assert_array_equal(ohe.infrequent_categories_, [[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]])</div>
<div class="line"><span class="lineno">  958</span> </div>
<div class="line"><span class="lineno">  959</span>    X_test = [[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;d&quot;</span>], [<span class="stringliteral">&quot;e&quot;</span>]]</div>
<div class="line"><span class="lineno">  960</span>    expected = np.array([[1, 0, 0], [0, 0, 1], [0, 1, 0], [0, 0, 1], [0, 0, 1]])</div>
<div class="line"><span class="lineno">  961</span> </div>
<div class="line"><span class="lineno">  962</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno">  963</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno">  964</span> </div>
<div class="line"><span class="lineno">  965</span>    expected_inv = [</div>
<div class="line"><span class="lineno">  966</span>        [<span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno">  967</span>        [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>],</div>
<div class="line"><span class="lineno">  968</span>        [<span class="stringliteral">&quot;c&quot;</span>],</div>
<div class="line"><span class="lineno">  969</span>        [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>],</div>
<div class="line"><span class="lineno">  970</span>        [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>],</div>
<div class="line"><span class="lineno">  971</span>    ]</div>
<div class="line"><span class="lineno">  972</span>    X_inv = ohe.inverse_transform(X_trans)</div>
<div class="line"><span class="lineno">  973</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>    feature_names = ohe.get_feature_names_out()</div>
<div class="line"><span class="lineno">  976</span>    assert_array_equal([<span class="stringliteral">&quot;x0_b&quot;</span>, <span class="stringliteral">&quot;x0_c&quot;</span>, <span class="stringliteral">&quot;x0_infrequent_sklearn&quot;</span>], feature_names)</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span> </div>
<div class="line"><span class="lineno">  979</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [&quot;first&quot;, [&quot;b&quot;]])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c4262fcb58ae9620b8f96469b587261" name="a2c4262fcb58ae9620b8f96469b587261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c4262fcb58ae9620b8f96469b587261">&#9670;&#160;</a></span>test_ohe_infrequent_three_levels_drop_frequent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_three_levels_drop_frequent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test three levels and dropping the frequent category.</pre> <div class="fragment"><div class="line"><span class="lineno">  980</span><span class="keyword">def </span>test_ohe_infrequent_three_levels_drop_frequent(drop):</div>
<div class="line"><span class="lineno">  981</span>    <span class="stringliteral">&quot;&quot;&quot;Test three levels and dropping the frequent category.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3]).T</div>
<div class="line"><span class="lineno">  984</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno">  985</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno">  986</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  987</span>        max_categories=3,</div>
<div class="line"><span class="lineno">  988</span>        drop=drop,</div>
<div class="line"><span class="lineno">  989</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>    X_test = np.array([[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;d&quot;</span>]])</div>
<div class="line"><span class="lineno">  992</span>    assert_allclose([[0, 0], [1, 0], [0, 1]], ohe.transform(X_test))</div>
<div class="line"><span class="lineno">  993</span> </div>
<div class="line"><span class="lineno">  994</span>    <span class="comment"># Check handle_unknown=&quot;ignore&quot;</span></div>
<div class="line"><span class="lineno">  995</span>    ohe.set_params(handle_unknown=<span class="stringliteral">&quot;ignore&quot;</span>).fit(X_train)</div>
<div class="line"><span class="lineno">  996</span>    msg = <span class="stringliteral">&quot;Found unknown categories&quot;</span></div>
<div class="line"><span class="lineno">  997</span>    <span class="keyword">with</span> pytest.warns(UserWarning, match=msg):</div>
<div class="line"><span class="lineno">  998</span>        X_trans = ohe.transform([[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;e&quot;</span>]])</div>
<div class="line"><span class="lineno">  999</span> </div>
<div class="line"><span class="lineno"> 1000</span>    assert_allclose([[0, 0], [0, 0]], X_trans)</div>
<div class="line"><span class="lineno"> 1001</span> </div>
<div class="line"><span class="lineno"> 1002</span> </div>
<div class="line"><span class="lineno"> 1003</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [[&quot;a&quot;], [&quot;d&quot;]])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7b4e05f7d46ea9c1772606a4fafecb0" name="ad7b4e05f7d46ea9c1772606a4fafecb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7b4e05f7d46ea9c1772606a4fafecb0">&#9670;&#160;</a></span>test_ohe_infrequent_three_levels_drop_infrequent_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_three_levels_drop_infrequent_errors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test three levels and dropping the infrequent category.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1004</span><span class="keyword">def </span>test_ohe_infrequent_three_levels_drop_infrequent_errors(drop):</div>
<div class="line"><span class="lineno"> 1005</span>    <span class="stringliteral">&quot;&quot;&quot;Test three levels and dropping the infrequent category.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1006</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3]).T</div>
<div class="line"><span class="lineno"> 1007</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1008</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno"> 1009</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1010</span>        max_categories=3,</div>
<div class="line"><span class="lineno"> 1011</span>        drop=drop,</div>
<div class="line"><span class="lineno"> 1012</span>    )</div>
<div class="line"><span class="lineno"> 1013</span> </div>
<div class="line"><span class="lineno"> 1014</span>    msg = f<span class="stringliteral">&quot;Unable to drop category {drop[0]!r} from feature 0 because it is infrequent&quot;</span></div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 1016</span>        ohe.fit(X_train)</div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4c7aab5801d5787db7768c0333732bc" name="ad4c7aab5801d5787db7768c0333732bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c7aab5801d5787db7768c0333732bc">&#9670;&#160;</a></span>test_ohe_infrequent_three_levels_user_cats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_three_levels_user_cats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that the order of the categories provided by a user is respected.
In this case 'c' is encoded as the first category and 'b' is encoded
as the second one.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1098</span><span class="keyword">def </span>test_ohe_infrequent_three_levels_user_cats():</div>
<div class="line"><span class="lineno"> 1099</span>    <span class="stringliteral">&quot;&quot;&quot;Test that the order of the categories provided by a user is respected.</span></div>
<div class="line"><span class="lineno"> 1100</span><span class="stringliteral">    In this case &#39;c&#39; is encoded as the first category and &#39;b&#39; is encoded</span></div>
<div class="line"><span class="lineno"> 1101</span><span class="stringliteral">    as the second one.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span>    X_train = np.array(</div>
<div class="line"><span class="lineno"> 1104</span>        [[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3], dtype=object</div>
<div class="line"><span class="lineno"> 1105</span>    ).T</div>
<div class="line"><span class="lineno"> 1106</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1107</span>        categories=[[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>]],</div>
<div class="line"><span class="lineno"> 1108</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1109</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno"> 1110</span>        max_categories=3,</div>
<div class="line"><span class="lineno"> 1111</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno"> 1112</span> </div>
<div class="line"><span class="lineno"> 1113</span>    assert_array_equal(ohe.infrequent_categories_, [[<span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>]])</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span>    X_test = [[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;d&quot;</span>], [<span class="stringliteral">&quot;e&quot;</span>]]</div>
<div class="line"><span class="lineno"> 1116</span>    expected = np.array([[0, 1, 0], [0, 0, 1], [1, 0, 0], [0, 0, 1], [0, 0, 1]])</div>
<div class="line"><span class="lineno"> 1117</span> </div>
<div class="line"><span class="lineno"> 1118</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1119</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno"> 1120</span> </div>
<div class="line"><span class="lineno"> 1121</span>    <span class="comment"># &#39;infrequent&#39; is used to denote the infrequent categories for</span></div>
<div class="line"><span class="lineno"> 1122</span>    <span class="comment"># `inverse_transform`</span></div>
<div class="line"><span class="lineno"> 1123</span>    expected_inv = [</div>
<div class="line"><span class="lineno"> 1124</span>        [<span class="stringliteral">&quot;b&quot;</span>],</div>
<div class="line"><span class="lineno"> 1125</span>        [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>],</div>
<div class="line"><span class="lineno"> 1126</span>        [<span class="stringliteral">&quot;c&quot;</span>],</div>
<div class="line"><span class="lineno"> 1127</span>        [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>],</div>
<div class="line"><span class="lineno"> 1128</span>        [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>],</div>
<div class="line"><span class="lineno"> 1129</span>    ]</div>
<div class="line"><span class="lineno"> 1130</span>    X_inv = ohe.inverse_transform(X_trans)</div>
<div class="line"><span class="lineno"> 1131</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a82277520967c3d4413e882cc026be82d" name="a82277520967c3d4413e882cc026be82d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82277520967c3d4413e882cc026be82d">&#9670;&#160;</a></span>test_ohe_infrequent_two_levels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_two_levels </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>categories</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that different parameters for combine 'a', 'c', and 'd' into
the infrequent category works as expected.</pre> <div class="fragment"><div class="line"><span class="lineno">  868</span><span class="keyword">def </span>test_ohe_infrequent_two_levels(kwargs, categories):</div>
<div class="line"><span class="lineno">  869</span>    <span class="stringliteral">&quot;&quot;&quot;Test that different parameters for combine &#39;a&#39;, &#39;c&#39;, and &#39;d&#39; into</span></div>
<div class="line"><span class="lineno">  870</span><span class="stringliteral">    the infrequent category works as expected.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3]).T</div>
<div class="line"><span class="lineno">  873</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno">  874</span>        categories=categories,</div>
<div class="line"><span class="lineno">  875</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno">  876</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  877</span>        **kwargs,</div>
<div class="line"><span class="lineno">  878</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno">  879</span>    assert_array_equal(ohe.infrequent_categories_, [[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]])</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>    X_test = [[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;d&quot;</span>], [<span class="stringliteral">&quot;e&quot;</span>]]</div>
<div class="line"><span class="lineno">  882</span>    expected = np.array([[1, 0], [0, 1], [0, 1], [0, 1], [0, 1]])</div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno">  885</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>    expected_inv = [[col] <span class="keywordflow">for</span> col <span class="keywordflow">in</span> [<span class="stringliteral">&quot;b&quot;</span>] + [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>] * 4]</div>
<div class="line"><span class="lineno">  888</span>    X_inv = ohe.inverse_transform(X_trans)</div>
<div class="line"><span class="lineno">  889</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>    feature_names = ohe.get_feature_names_out()</div>
<div class="line"><span class="lineno">  892</span>    assert_array_equal([<span class="stringliteral">&quot;x0_b&quot;</span>, <span class="stringliteral">&quot;x0_infrequent_sklearn&quot;</span>], feature_names)</div>
<div class="line"><span class="lineno">  893</span> </div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [&quot;if_binary&quot;, &quot;first&quot;, [&quot;b&quot;]])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a09f8572267859693740cb42cdcb91d1e" name="a09f8572267859693740cb42cdcb91d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09f8572267859693740cb42cdcb91d1e">&#9670;&#160;</a></span>test_ohe_infrequent_two_levels_drop_frequent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_two_levels_drop_frequent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test two levels and dropping the frequent category.</pre> <div class="fragment"><div class="line"><span class="lineno">  896</span><span class="keyword">def </span>test_ohe_infrequent_two_levels_drop_frequent(drop):</div>
<div class="line"><span class="lineno">  897</span>    <span class="stringliteral">&quot;&quot;&quot;Test two levels and dropping the frequent category.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  898</span> </div>
<div class="line"><span class="lineno">  899</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3]).T</div>
<div class="line"><span class="lineno">  900</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno">  901</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno">  902</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  903</span>        max_categories=2,</div>
<div class="line"><span class="lineno">  904</span>        drop=drop,</div>
<div class="line"><span class="lineno">  905</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno">  906</span>    assert_array_equal(ohe.drop_idx_, [0])</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>    X_test = np.array([[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>]])</div>
<div class="line"><span class="lineno">  909</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno">  910</span>    assert_allclose([[0], [1]], X_trans)</div>
<div class="line"><span class="lineno">  911</span> </div>
<div class="line"><span class="lineno">  912</span>    feature_names = ohe.get_feature_names_out()</div>
<div class="line"><span class="lineno">  913</span>    assert_array_equal([<span class="stringliteral">&quot;x0_infrequent_sklearn&quot;</span>], feature_names)</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>    X_inverse = ohe.inverse_transform(X_trans)</div>
<div class="line"><span class="lineno">  916</span>    assert_array_equal([[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>]], X_inverse)</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span> </div>
<div class="line"><span class="lineno">  919</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [[&quot;a&quot;], [&quot;d&quot;]])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb38e3b2143f4ce52a29a00fb731e66c" name="afb38e3b2143f4ce52a29a00fb731e66c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb38e3b2143f4ce52a29a00fb731e66c">&#9670;&#160;</a></span>test_ohe_infrequent_two_levels_drop_infrequent_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_two_levels_drop_infrequent_errors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test two levels and dropping any infrequent category removes the
whole infrequent category.</pre> <div class="fragment"><div class="line"><span class="lineno">  920</span><span class="keyword">def </span>test_ohe_infrequent_two_levels_drop_infrequent_errors(drop):</div>
<div class="line"><span class="lineno">  921</span>    <span class="stringliteral">&quot;&quot;&quot;Test two levels and dropping any infrequent category removes the</span></div>
<div class="line"><span class="lineno">  922</span><span class="stringliteral">    whole infrequent category.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  923</span> </div>
<div class="line"><span class="lineno">  924</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3]).T</div>
<div class="line"><span class="lineno">  925</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno">  926</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno">  927</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  928</span>        max_categories=2,</div>
<div class="line"><span class="lineno">  929</span>        drop=drop,</div>
<div class="line"><span class="lineno">  930</span>    )</div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span>    msg = f<span class="stringliteral">&quot;Unable to drop category {drop[0]!r} from feature 0 because it is infrequent&quot;</span></div>
<div class="line"><span class="lineno">  933</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  934</span>        ohe.fit(X_train)</div>
<div class="line"><span class="lineno">  935</span> </div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  938</span>    <span class="stringliteral">&quot;kwargs&quot;</span>,</div>
<div class="line"><span class="lineno">  939</span>    [</div>
<div class="line"><span class="lineno">  940</span>        {<span class="stringliteral">&quot;max_categories&quot;</span>: 3},</div>
<div class="line"><span class="lineno">  941</span>        {<span class="stringliteral">&quot;min_frequency&quot;</span>: 6},</div>
<div class="line"><span class="lineno">  942</span>        {<span class="stringliteral">&quot;min_frequency&quot;</span>: 9},</div>
<div class="line"><span class="lineno">  943</span>        {<span class="stringliteral">&quot;min_frequency&quot;</span>: 0.24},</div>
<div class="line"><span class="lineno">  944</span>        {<span class="stringliteral">&quot;min_frequency&quot;</span>: 0.16},</div>
<div class="line"><span class="lineno">  945</span>        {<span class="stringliteral">&quot;max_categories&quot;</span>: 3, <span class="stringliteral">&quot;min_frequency&quot;</span>: 8},</div>
<div class="line"><span class="lineno">  946</span>        {<span class="stringliteral">&quot;max_categories&quot;</span>: 4, <span class="stringliteral">&quot;min_frequency&quot;</span>: 6},</div>
<div class="line"><span class="lineno">  947</span>    ],</div>
<div class="line"><span class="lineno">  948</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4031455be9f0fd41bdf5933836274c4" name="ae4031455be9f0fd41bdf5933836274c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4031455be9f0fd41bdf5933836274c4">&#9670;&#160;</a></span>test_ohe_infrequent_two_levels_user_cats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_two_levels_user_cats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test that the order of the categories provided by a user is respected.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1071</span><span class="keyword">def </span>test_ohe_infrequent_two_levels_user_cats():</div>
<div class="line"><span class="lineno"> 1072</span>    <span class="stringliteral">&quot;&quot;&quot;Test that the order of the categories provided by a user is respected.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1073</span>    X_train = np.array(</div>
<div class="line"><span class="lineno"> 1074</span>        [[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;b&quot;</span>] * 20 + [<span class="stringliteral">&quot;c&quot;</span>] * 10 + [<span class="stringliteral">&quot;d&quot;</span>] * 3], dtype=object</div>
<div class="line"><span class="lineno"> 1075</span>    ).T</div>
<div class="line"><span class="lineno"> 1076</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1077</span>        categories=[[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]],</div>
<div class="line"><span class="lineno"> 1078</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1079</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno"> 1080</span>        max_categories=2,</div>
<div class="line"><span class="lineno"> 1081</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno"> 1082</span> </div>
<div class="line"><span class="lineno"> 1083</span>    assert_array_equal(ohe.infrequent_categories_, [[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>]])</div>
<div class="line"><span class="lineno"> 1084</span> </div>
<div class="line"><span class="lineno"> 1085</span>    X_test = [[<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;d&quot;</span>], [<span class="stringliteral">&quot;e&quot;</span>]]</div>
<div class="line"><span class="lineno"> 1086</span>    expected = np.array([[1, 0], [0, 1], [0, 1], [0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1087</span> </div>
<div class="line"><span class="lineno"> 1088</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1089</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno"> 1090</span> </div>
<div class="line"><span class="lineno"> 1091</span>    <span class="comment"># &#39;infrequent&#39; is used to denote the infrequent categories for</span></div>
<div class="line"><span class="lineno"> 1092</span>    <span class="comment"># `inverse_transform`</span></div>
<div class="line"><span class="lineno"> 1093</span>    expected_inv = [[col] <span class="keywordflow">for</span> col <span class="keywordflow">in</span> [<span class="stringliteral">&quot;b&quot;</span>] + [<span class="stringliteral">&quot;infrequent_sklearn&quot;</span>] * 4]</div>
<div class="line"><span class="lineno"> 1094</span>    X_inv = ohe.inverse_transform(X_trans)</div>
<div class="line"><span class="lineno"> 1095</span>    assert_array_equal(expected_inv, X_inv)</div>
<div class="line"><span class="lineno"> 1096</span> </div>
<div class="line"><span class="lineno"> 1097</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a4bb8dc473a81904421b14ebacd658d" name="a3a4bb8dc473a81904421b14ebacd658d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a4bb8dc473a81904421b14ebacd658d">&#9670;&#160;</a></span>test_ohe_infrequent_two_levels_user_cats_one_frequent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_two_levels_user_cats_one_frequent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">'a' is the only frequent category, all other categories are infrequent.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1046</span><span class="keyword">def </span>test_ohe_infrequent_two_levels_user_cats_one_frequent(kwargs):</div>
<div class="line"><span class="lineno"> 1047</span>    <span class="stringliteral">&quot;&quot;&quot;&#39;a&#39; is the only frequent category, all other categories are infrequent.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>    X_train = np.array([[<span class="stringliteral">&quot;a&quot;</span>] * 5 + [<span class="stringliteral">&quot;e&quot;</span>] * 30], dtype=object).T</div>
<div class="line"><span class="lineno"> 1050</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1051</span>        categories=[[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]],</div>
<div class="line"><span class="lineno"> 1052</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1053</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno"> 1054</span>        **kwargs,</div>
<div class="line"><span class="lineno"> 1055</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>    X_test = [[<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>], [<span class="stringliteral">&quot;d&quot;</span>], [<span class="stringliteral">&quot;e&quot;</span>]]</div>
<div class="line"><span class="lineno"> 1058</span>    expected = np.array([[1, 0], [0, 1], [0, 1], [0, 1], [0, 1]])</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>    X_trans = ohe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1061</span>    assert_allclose(expected, X_trans)</div>
<div class="line"><span class="lineno"> 1062</span> </div>
<div class="line"><span class="lineno"> 1063</span>    <span class="comment"># &#39;a&#39; is dropped</span></div>
<div class="line"><span class="lineno"> 1064</span>    drops = [<span class="stringliteral">&quot;first&quot;</span>, <span class="stringliteral">&quot;if_binary&quot;</span>, [<span class="stringliteral">&quot;a&quot;</span>]]</div>
<div class="line"><span class="lineno"> 1065</span>    X_test = [[<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>]]</div>
<div class="line"><span class="lineno"> 1066</span>    <span class="keywordflow">for</span> drop <span class="keywordflow">in</span> drops:</div>
<div class="line"><span class="lineno"> 1067</span>        ohe.set_params(drop=drop).fit(X_train)</div>
<div class="line"><span class="lineno"> 1068</span>        assert_allclose([[0], [1]], ohe.transform(X_test))</div>
<div class="line"><span class="lineno"> 1069</span> </div>
<div class="line"><span class="lineno"> 1070</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="acc9f48f4ed235601b46b3587e41f473f" name="acc9f48f4ed235601b46b3587e41f473f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc9f48f4ed235601b46b3587e41f473f">&#9670;&#160;</a></span>test_ohe_infrequent_user_cats_unknown_training_errors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_infrequent_user_cats_unknown_training_errors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kwargs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">All user provided categories are infrequent.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1323</span><span class="keyword">def </span>test_ohe_infrequent_user_cats_unknown_training_errors(kwargs):</div>
<div class="line"><span class="lineno"> 1324</span>    <span class="stringliteral">&quot;&quot;&quot;All user provided categories are infrequent.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1325</span> </div>
<div class="line"><span class="lineno"> 1326</span>    X_train = np.array([[<span class="stringliteral">&quot;e&quot;</span>] * 3], dtype=object).T</div>
<div class="line"><span class="lineno"> 1327</span>    ohe = OneHotEncoder(</div>
<div class="line"><span class="lineno"> 1328</span>        categories=[[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]],</div>
<div class="line"><span class="lineno"> 1329</span>        sparse_output=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno"> 1330</span>        handle_unknown=<span class="stringliteral">&quot;infrequent_if_exist&quot;</span>,</div>
<div class="line"><span class="lineno"> 1331</span>        **kwargs,</div>
<div class="line"><span class="lineno"> 1332</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno"> 1333</span> </div>
<div class="line"><span class="lineno"> 1334</span>    X_trans = ohe.transform([[<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;e&quot;</span>]])</div>
<div class="line"><span class="lineno"> 1335</span>    assert_allclose(X_trans, [[1], [1]])</div>
<div class="line"><span class="lineno"> 1336</span> </div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span><span class="comment"># TODO(1.4): Remove when `sparse` parameter is replaced by `sparse_output`</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeca4317e9ab66b91a9cabe36721c0d5d" name="aeca4317e9ab66b91a9cabe36721c0d5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeca4317e9ab66b91a9cabe36721c0d5d">&#9670;&#160;</a></span>test_ohe_missing_value_support_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_missing_value_support_pandas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1388</span><span class="keyword">def </span>test_ohe_missing_value_support_pandas():</div>
<div class="line"><span class="lineno"> 1389</span>    <span class="comment"># check support for pandas with mixed dtypes and missing values</span></div>
<div class="line"><span class="lineno"> 1390</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1391</span>    df = pd.DataFrame(</div>
<div class="line"><span class="lineno"> 1392</span>        {</div>
<div class="line"><span class="lineno"> 1393</span>            <span class="stringliteral">&quot;col1&quot;</span>: [<span class="stringliteral">&quot;dog&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>, <span class="keywordtype">None</span>, <span class="stringliteral">&quot;cat&quot;</span>],</div>
<div class="line"><span class="lineno"> 1394</span>            <span class="stringliteral">&quot;col2&quot;</span>: np.array([3, 0, 4, np.nan], dtype=float),</div>
<div class="line"><span class="lineno"> 1395</span>        },</div>
<div class="line"><span class="lineno"> 1396</span>        columns=[<span class="stringliteral">&quot;col1&quot;</span>, <span class="stringliteral">&quot;col2&quot;</span>],</div>
<div class="line"><span class="lineno"> 1397</span>    )</div>
<div class="line"><span class="lineno"> 1398</span>    expected_df_trans = np.array(</div>
<div class="line"><span class="lineno"> 1399</span>        [</div>
<div class="line"><span class="lineno"> 1400</span>            [0, 1, 0, 0, 1, 0, 0],</div>
<div class="line"><span class="lineno"> 1401</span>            [1, 0, 0, 1, 0, 0, 0],</div>
<div class="line"><span class="lineno"> 1402</span>            [0, 0, 1, 0, 0, 1, 0],</div>
<div class="line"><span class="lineno"> 1403</span>            [1, 0, 0, 0, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1404</span>        ]</div>
<div class="line"><span class="lineno"> 1405</span>    )</div>
<div class="line"><span class="lineno"> 1406</span> </div>
<div class="line"><span class="lineno"> 1407</span>    Xtr = check_categorical_onehot(df)</div>
<div class="line"><span class="lineno"> 1408</span>    assert_allclose(Xtr, expected_df_trans)</div>
<div class="line"><span class="lineno"> 1409</span> </div>
<div class="line"><span class="lineno"> 1410</span> </div>
<div class="line"><span class="lineno"> 1411</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;infrequent_if_exist&quot;, &quot;ignore&quot;])</span></div>
<div class="line"><span class="lineno"> 1412</span><span class="preprocessor">@pytest.mark.parametrize(&quot;pd_nan_type&quot;, [&quot;pd.NA&quot;, &quot;np.nan&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa907b98b681b89374823107e251a8628" name="aa907b98b681b89374823107e251a8628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa907b98b681b89374823107e251a8628">&#9670;&#160;</a></span>test_ohe_missing_value_support_pandas_categorical()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_missing_value_support_pandas_categorical </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_nan_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1413</span><span class="keyword">def </span>test_ohe_missing_value_support_pandas_categorical(pd_nan_type, handle_unknown):</div>
<div class="line"><span class="lineno"> 1414</span>    <span class="comment"># checks pandas dataframe with categorical features</span></div>
<div class="line"><span class="lineno"> 1415</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1416</span> </div>
<div class="line"><span class="lineno"> 1417</span>    pd_missing_value = pd.NA <span class="keywordflow">if</span> pd_nan_type == <span class="stringliteral">&quot;pd.NA&quot;</span> <span class="keywordflow">else</span> np.nan</div>
<div class="line"><span class="lineno"> 1418</span> </div>
<div class="line"><span class="lineno"> 1419</span>    df = pd.DataFrame(</div>
<div class="line"><span class="lineno"> 1420</span>        {</div>
<div class="line"><span class="lineno"> 1421</span>            <span class="stringliteral">&quot;col1&quot;</span>: pd.Series([<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, pd_missing_value, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], dtype=<span class="stringliteral">&quot;category&quot;</span>),</div>
<div class="line"><span class="lineno"> 1422</span>        }</div>
<div class="line"><span class="lineno"> 1423</span>    )</div>
<div class="line"><span class="lineno"> 1424</span>    expected_df_trans = np.array(</div>
<div class="line"><span class="lineno"> 1425</span>        [</div>
<div class="line"><span class="lineno"> 1426</span>            [0, 0, 1, 0],</div>
<div class="line"><span class="lineno"> 1427</span>            [1, 0, 0, 0],</div>
<div class="line"><span class="lineno"> 1428</span>            [0, 0, 0, 1],</div>
<div class="line"><span class="lineno"> 1429</span>            [0, 1, 0, 0],</div>
<div class="line"><span class="lineno"> 1430</span>            [1, 0, 0, 0],</div>
<div class="line"><span class="lineno"> 1431</span>        ]</div>
<div class="line"><span class="lineno"> 1432</span>    )</div>
<div class="line"><span class="lineno"> 1433</span> </div>
<div class="line"><span class="lineno"> 1434</span>    ohe = OneHotEncoder(sparse_output=<span class="keyword">False</span>, handle_unknown=handle_unknown)</div>
<div class="line"><span class="lineno"> 1435</span>    df_trans = ohe.fit_transform(df)</div>
<div class="line"><span class="lineno"> 1436</span>    assert_allclose(expected_df_trans, df_trans)</div>
<div class="line"><span class="lineno"> 1437</span> </div>
<div class="line"><span class="lineno"> 1438</span>    <span class="keyword">assert</span> len(ohe.categories_) == 1</div>
<div class="line"><span class="lineno"> 1439</span>    assert_array_equal(ohe.categories_[0][:-1], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>])</div>
<div class="line"><span class="lineno"> 1440</span>    <span class="keyword">assert</span> np.isnan(ohe.categories_[0][-1])</div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span> </div>
<div class="line"><span class="lineno"> 1443</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;ignore&quot;, &quot;infrequent_if_exist&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab81500a59d00b4f1c45c6ad1d491ecf4" name="ab81500a59d00b4f1c45c6ad1d491ecf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab81500a59d00b4f1c45c6ad1d491ecf4">&#9670;&#160;</a></span>test_ohe_missing_values_get_feature_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ohe_missing_values_get_feature_names </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>missing_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1380</span><span class="keyword">def </span>test_ohe_missing_values_get_feature_names(missing_value):</div>
<div class="line"><span class="lineno"> 1381</span>    <span class="comment"># encoder with missing values with object dtypes</span></div>
<div class="line"><span class="lineno"> 1382</span>    X = np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, missing_value, <span class="stringliteral">&quot;a&quot;</span>, missing_value]], dtype=object).T</div>
<div class="line"><span class="lineno"> 1383</span>    ohe = OneHotEncoder(sparse_output=<span class="keyword">False</span>, handle_unknown=<span class="stringliteral">&quot;ignore&quot;</span>).fit(X)</div>
<div class="line"><span class="lineno"> 1384</span>    names = ohe.get_feature_names_out()</div>
<div class="line"><span class="lineno"> 1385</span>    assert_array_equal(names, [<span class="stringliteral">&quot;x0_a&quot;</span>, <span class="stringliteral">&quot;x0_b&quot;</span>, f<span class="stringliteral">&quot;x0_{missing_value}&quot;</span>])</div>
<div class="line"><span class="lineno"> 1386</span> </div>
<div class="line"><span class="lineno"> 1387</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2effad59280ac69c5dee763cb85c677" name="ac2effad59280ac69c5dee763cb85c677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2effad59280ac69c5dee763cb85c677">&#9670;&#160;</a></span>test_one_hot_encoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  244</span><span class="keyword">def </span>test_one_hot_encoder(X):</div>
<div class="line"><span class="lineno">  245</span>    Xtr = check_categorical_onehot(np.array(X)[:, [0]])</div>
<div class="line"><span class="lineno">  246</span>    assert_allclose(Xtr, [[0, 1], [1, 0]])</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    Xtr = check_categorical_onehot(np.array(X)[:, [0, 1]])</div>
<div class="line"><span class="lineno">  249</span>    assert_allclose(Xtr, [[0, 1, 1, 0], [1, 0, 0, 1]])</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    Xtr = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>).fit_transform(X)</div>
<div class="line"><span class="lineno">  252</span>    assert_allclose(Xtr.toarray(), [[0, 1, 1, 0, 1], [1, 0, 0, 1, 1]])</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;ignore&quot;, &quot;infrequent_if_exist&quot;])</span></div>
<div class="line"><span class="lineno">  256</span><span class="preprocessor">@pytest.mark.parametrize(&quot;sparse_&quot;, [False, True])</span></div>
<div class="line"><span class="lineno">  257</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [None, &quot;first&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6e14a3f8dcac6608b5f1890ceecf173" name="ab6e14a3f8dcac6608b5f1890ceecf173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6e14a3f8dcac6608b5f1890ceecf173">&#9670;&#160;</a></span>test_one_hot_encoder_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cat_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cat_dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  413</span><span class="keyword">def </span>test_one_hot_encoder_categories(X, cat_exp, cat_dtype):</div>
<div class="line"><span class="lineno">  414</span>    <span class="comment"># order of categories should not depend on order of samples</span></div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordflow">for</span> Xi <span class="keywordflow">in</span> [X, X[::-1]]:</div>
<div class="line"><span class="lineno">  416</span>        enc = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>)</div>
<div class="line"><span class="lineno">  417</span>        enc.fit(Xi)</div>
<div class="line"><span class="lineno">  418</span>        <span class="comment"># assert enc.categories == &#39;auto&#39;</span></div>
<div class="line"><span class="lineno">  419</span>        <span class="keyword">assert</span> isinstance(enc.categories_, list)</div>
<div class="line"><span class="lineno">  420</span>        <span class="keywordflow">for</span> res, exp <span class="keywordflow">in</span> zip(enc.categories_, cat_exp):</div>
<div class="line"><span class="lineno">  421</span>            res_list = res.tolist()</div>
<div class="line"><span class="lineno">  422</span>            <span class="keywordflow">if</span> is_scalar_nan(exp[-1]):</div>
<div class="line"><span class="lineno">  423</span>                <span class="keyword">assert</span> is_scalar_nan(res_list[-1])</div>
<div class="line"><span class="lineno">  424</span>                <span class="keyword">assert</span> res_list[:-1] == exp[:-1]</div>
<div class="line"><span class="lineno">  425</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  426</span>                <span class="keyword">assert</span> res.tolist() == exp</div>
<div class="line"><span class="lineno">  427</span>            <span class="keyword">assert</span> np.issubdtype(res.dtype, cat_dtype)</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;ignore&quot;, &quot;infrequent_if_exist&quot;])</span></div>
<div class="line"><span class="lineno">  431</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  432</span>    <span class="stringliteral">&quot;X, X2, cats, cat_dtype&quot;</span>,</div>
<div class="line"><span class="lineno">  433</span>    [</div>
<div class="line"><span class="lineno">  434</span>        (</div>
<div class="line"><span class="lineno">  435</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  436</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  437</span>            [[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]],</div>
<div class="line"><span class="lineno">  438</span>            np.object_,</div>
<div class="line"><span class="lineno">  439</span>        ),</div>
<div class="line"><span class="lineno">  440</span>        (</div>
<div class="line"><span class="lineno">  441</span>            np.array([[1, 2]], dtype=<span class="stringliteral">&quot;int64&quot;</span>).T,</div>
<div class="line"><span class="lineno">  442</span>            np.array([[1, 4]], dtype=<span class="stringliteral">&quot;int64&quot;</span>).T,</div>
<div class="line"><span class="lineno">  443</span>            [[1, 2, 3]],</div>
<div class="line"><span class="lineno">  444</span>            np.int64,</div>
<div class="line"><span class="lineno">  445</span>        ),</div>
<div class="line"><span class="lineno">  446</span>        (</div>
<div class="line"><span class="lineno">  447</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  448</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  449</span>            [np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>])],</div>
<div class="line"><span class="lineno">  450</span>            np.object_,</div>
<div class="line"><span class="lineno">  451</span>        ),</div>
<div class="line"><span class="lineno">  452</span>        (</div>
<div class="line"><span class="lineno">  453</span>            np.array([[<span class="keywordtype">None</span>, <span class="stringliteral">&quot;a&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  454</span>            np.array([[<span class="keywordtype">None</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  455</span>            [[<span class="keywordtype">None</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>]],</div>
<div class="line"><span class="lineno">  456</span>            object,</div>
<div class="line"><span class="lineno">  457</span>        ),</div>
<div class="line"><span class="lineno">  458</span>        (</div>
<div class="line"><span class="lineno">  459</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  460</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, np.nan]], dtype=object).T,</div>
<div class="line"><span class="lineno">  461</span>            [[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>]],</div>
<div class="line"><span class="lineno">  462</span>            object,</div>
<div class="line"><span class="lineno">  463</span>        ),</div>
<div class="line"><span class="lineno">  464</span>        (</div>
<div class="line"><span class="lineno">  465</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="keywordtype">None</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  466</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, np.nan]], dtype=object).T,</div>
<div class="line"><span class="lineno">  467</span>            [[<span class="stringliteral">&quot;a&quot;</span>, <span class="keywordtype">None</span>, <span class="stringliteral">&quot;z&quot;</span>]],</div>
<div class="line"><span class="lineno">  468</span>            object,</div>
<div class="line"><span class="lineno">  469</span>        ),</div>
<div class="line"><span class="lineno">  470</span>        (</div>
<div class="line"><span class="lineno">  471</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, np.nan]], dtype=object).T,</div>
<div class="line"><span class="lineno">  472</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="keywordtype">None</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  473</span>            [[<span class="stringliteral">&quot;a&quot;</span>, np.nan, <span class="stringliteral">&quot;z&quot;</span>]],</div>
<div class="line"><span class="lineno">  474</span>            object,</div>
<div class="line"><span class="lineno">  475</span>        ),</div>
<div class="line"><span class="lineno">  476</span>    ],</div>
<div class="line"><span class="lineno">  477</span>    ids=[</div>
<div class="line"><span class="lineno">  478</span>        <span class="stringliteral">&quot;object&quot;</span>,</div>
<div class="line"><span class="lineno">  479</span>        <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">  480</span>        <span class="stringliteral">&quot;object-string&quot;</span>,</div>
<div class="line"><span class="lineno">  481</span>        <span class="stringliteral">&quot;object-string-none&quot;</span>,</div>
<div class="line"><span class="lineno">  482</span>        <span class="stringliteral">&quot;object-string-nan&quot;</span>,</div>
<div class="line"><span class="lineno">  483</span>        <span class="stringliteral">&quot;object-None-and-nan&quot;</span>,</div>
<div class="line"><span class="lineno">  484</span>        <span class="stringliteral">&quot;object-nan-and-None&quot;</span>,</div>
<div class="line"><span class="lineno">  485</span>    ],</div>
<div class="line"><span class="lineno">  486</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1489e9b7fce32446dcb03da608a09786" name="a1489e9b7fce32446dcb03da608a09786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1489e9b7fce32446dcb03da608a09786">&#9670;&#160;</a></span>test_one_hot_encoder_drop_equals_if_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_drop_equals_if_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  571</span><span class="keyword">def </span>test_one_hot_encoder_drop_equals_if_binary():</div>
<div class="line"><span class="lineno">  572</span>    <span class="comment"># Canonical case</span></div>
<div class="line"><span class="lineno">  573</span>    X = [[10, <span class="stringliteral">&quot;yes&quot;</span>], [20, <span class="stringliteral">&quot;no&quot;</span>], [30, <span class="stringliteral">&quot;yes&quot;</span>]]</div>
<div class="line"><span class="lineno">  574</span>    expected = np.array(</div>
<div class="line"><span class="lineno">  575</span>        [[1.0, 0.0, 0.0, 1.0], [0.0, 1.0, 0.0, 0.0], [0.0, 0.0, 1.0, 1.0]]</div>
<div class="line"><span class="lineno">  576</span>    )</div>
<div class="line"><span class="lineno">  577</span>    expected_drop_idx = np.array([<span class="keywordtype">None</span>, 0])</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>    ohe = OneHotEncoder(drop=<span class="stringliteral">&quot;if_binary&quot;</span>, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  580</span>    result = ohe.fit_transform(X)</div>
<div class="line"><span class="lineno">  581</span>    assert_array_equal(ohe.drop_idx_, expected_drop_idx)</div>
<div class="line"><span class="lineno">  582</span>    assert_allclose(result, expected)</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>    <span class="comment"># with only one cat, the behaviour is equivalent to drop=None</span></div>
<div class="line"><span class="lineno">  585</span>    X = [[<span class="stringliteral">&quot;true&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;false&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;false&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>]]</div>
<div class="line"><span class="lineno">  586</span>    expected = np.array([[1.0, 1.0], [0.0, 1.0], [0.0, 1.0]])</div>
<div class="line"><span class="lineno">  587</span>    expected_drop_idx = np.array([0, <span class="keywordtype">None</span>])</div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span>    ohe = OneHotEncoder(drop=<span class="stringliteral">&quot;if_binary&quot;</span>, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  590</span>    result = ohe.fit_transform(X)</div>
<div class="line"><span class="lineno">  591</span>    assert_array_equal(ohe.drop_idx_, expected_drop_idx)</div>
<div class="line"><span class="lineno">  592</span>    assert_allclose(result, expected)</div>
<div class="line"><span class="lineno">  593</span> </div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  596</span>    <span class="stringliteral">&quot;X&quot;</span>,</div>
<div class="line"><span class="lineno">  597</span>    [</div>
<div class="line"><span class="lineno">  598</span>        [[<span class="stringliteral">&quot;abc&quot;</span>, 2, 55], [<span class="stringliteral">&quot;def&quot;</span>, 1, 55]],</div>
<div class="line"><span class="lineno">  599</span>        np.array([[10, 2, 55], [20, 1, 55]]),</div>
<div class="line"><span class="lineno">  600</span>        np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  601</span>    ],</div>
<div class="line"><span class="lineno">  602</span>    ids=[<span class="stringliteral">&quot;mixed&quot;</span>, <span class="stringliteral">&quot;numeric&quot;</span>, <span class="stringliteral">&quot;object&quot;</span>],</div>
<div class="line"><span class="lineno">  603</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="afa1361f30a79309fdfe8cfc7d3e835ba" name="afa1361f30a79309fdfe8cfc7d3e835ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa1361f30a79309fdfe8cfc7d3e835ba">&#9670;&#160;</a></span>test_one_hot_encoder_drop_manual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_drop_manual </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>missing_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  788</span><span class="keyword">def </span>test_one_hot_encoder_drop_manual(missing_value):</div>
<div class="line"><span class="lineno">  789</span>    cats_to_drop = [<span class="stringliteral">&quot;def&quot;</span>, 12, 3, 56, missing_value]</div>
<div class="line"><span class="lineno">  790</span>    enc = OneHotEncoder(drop=cats_to_drop)</div>
<div class="line"><span class="lineno">  791</span>    X = [</div>
<div class="line"><span class="lineno">  792</span>        [<span class="stringliteral">&quot;abc&quot;</span>, 12, 2, 55, <span class="stringliteral">&quot;a&quot;</span>],</div>
<div class="line"><span class="lineno">  793</span>        [<span class="stringliteral">&quot;def&quot;</span>, 12, 1, 55, <span class="stringliteral">&quot;a&quot;</span>],</div>
<div class="line"><span class="lineno">  794</span>        [<span class="stringliteral">&quot;def&quot;</span>, 12, 3, 56, missing_value],</div>
<div class="line"><span class="lineno">  795</span>    ]</div>
<div class="line"><span class="lineno">  796</span>    trans = enc.fit_transform(X).toarray()</div>
<div class="line"><span class="lineno">  797</span>    exp = [[1, 0, 1, 1, 1], [0, 1, 0, 1, 1], [0, 0, 0, 0, 0]]</div>
<div class="line"><span class="lineno">  798</span>    assert_array_equal(trans, exp)</div>
<div class="line"><span class="lineno">  799</span>    <span class="keyword">assert</span> enc.drop <span class="keywordflow">is</span> cats_to_drop</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>    dropped_cats = [</div>
<div class="line"><span class="lineno">  802</span>        cat[feature] <span class="keywordflow">for</span> cat, feature <span class="keywordflow">in</span> zip(enc.categories_, enc.drop_idx_)</div>
<div class="line"><span class="lineno">  803</span>    ]</div>
<div class="line"><span class="lineno">  804</span>    X_inv_trans = enc.inverse_transform(trans)</div>
<div class="line"><span class="lineno">  805</span>    X_array = np.array(X, dtype=object)</div>
<div class="line"><span class="lineno">  806</span> </div>
<div class="line"><span class="lineno">  807</span>    <span class="comment"># last value is np.nan</span></div>
<div class="line"><span class="lineno">  808</span>    <span class="keywordflow">if</span> is_scalar_nan(cats_to_drop[-1]):</div>
<div class="line"><span class="lineno">  809</span>        assert_array_equal(dropped_cats[:-1], cats_to_drop[:-1])</div>
<div class="line"><span class="lineno">  810</span>        <span class="keyword">assert</span> is_scalar_nan(dropped_cats[-1])</div>
<div class="line"><span class="lineno">  811</span>        <span class="keyword">assert</span> is_scalar_nan(cats_to_drop[-1])</div>
<div class="line"><span class="lineno">  812</span>        <span class="comment"># do not include the last column which includes missing values</span></div>
<div class="line"><span class="lineno">  813</span>        assert_array_equal(X_array[:, :-1], X_inv_trans[:, :-1])</div>
<div class="line"><span class="lineno">  814</span> </div>
<div class="line"><span class="lineno">  815</span>        <span class="comment"># check last column is the missing value</span></div>
<div class="line"><span class="lineno">  816</span>        assert_array_equal(X_array[-1, :-1], X_inv_trans[-1, :-1])</div>
<div class="line"><span class="lineno">  817</span>        <span class="keyword">assert</span> is_scalar_nan(X_array[-1, -1])</div>
<div class="line"><span class="lineno">  818</span>        <span class="keyword">assert</span> is_scalar_nan(X_inv_trans[-1, -1])</div>
<div class="line"><span class="lineno">  819</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  820</span>        assert_array_equal(dropped_cats, cats_to_drop)</div>
<div class="line"><span class="lineno">  821</span>        assert_array_equal(X_array, X_inv_trans)</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [[&quot;abc&quot;, 3], [&quot;abc&quot;, 3, 41, &quot;a&quot;]])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab92363245e4c8be628a21d3c8554a339" name="ab92363245e4c8be628a21d3c8554a339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab92363245e4c8be628a21d3c8554a339">&#9670;&#160;</a></span>test_one_hot_encoder_drop_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_drop_reset </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>reset_drop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  346</span><span class="keyword">def </span>test_one_hot_encoder_drop_reset(drop, reset_drop):</div>
<div class="line"><span class="lineno">  347</span>    <span class="comment"># check that resetting drop option without refitting does not throw an error</span></div>
<div class="line"><span class="lineno">  348</span>    X = np.array([[<span class="stringliteral">&quot;Male&quot;</span>, 1], [<span class="stringliteral">&quot;Female&quot;</span>, 3], [<span class="stringliteral">&quot;Female&quot;</span>, 2]], dtype=object)</div>
<div class="line"><span class="lineno">  349</span>    ohe = OneHotEncoder(drop=drop, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  350</span>    ohe.fit(X)</div>
<div class="line"><span class="lineno">  351</span>    X_tr = ohe.transform(X)</div>
<div class="line"><span class="lineno">  352</span>    feature_names = ohe.get_feature_names_out()</div>
<div class="line"><span class="lineno">  353</span>    ohe.set_params(drop=reset_drop)</div>
<div class="line"><span class="lineno">  354</span>    assert_array_equal(ohe.inverse_transform(X_tr), X)</div>
<div class="line"><span class="lineno">  355</span>    assert_allclose(ohe.transform(X), X_tr)</div>
<div class="line"><span class="lineno">  356</span>    assert_array_equal(ohe.get_feature_names_out(), feature_names)</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span><span class="preprocessor">@pytest.mark.parametrize(&quot;method&quot;, [&quot;fit&quot;, &quot;fit_transform&quot;])</span></div>
<div class="line"><span class="lineno">  360</span><span class="preprocessor">@pytest.mark.parametrize(&quot;X&quot;, [[1, 2], np.array([3.0, 4.0])</span>])</div>
</div><!-- fragment -->
</div>
</div>
<a id="a865099628f3c16b45964571ef94ae084" name="a865099628f3c16b45964571ef94ae084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a865099628f3c16b45964571ef94ae084">&#9670;&#160;</a></span>test_one_hot_encoder_dtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_dtype </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>input_dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   97</span><span class="keyword">def </span>test_one_hot_encoder_dtype(input_dtype, output_dtype):</div>
<div class="line"><span class="lineno">   98</span>    X = np.asarray([[0, 1]], dtype=input_dtype).T</div>
<div class="line"><span class="lineno">   99</span>    X_expected = np.asarray([[1, 0], [0, 1]], dtype=output_dtype)</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>    oh = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>, dtype=output_dtype)</div>
<div class="line"><span class="lineno">  102</span>    assert_array_equal(oh.fit_transform(X).toarray(), X_expected)</div>
<div class="line"><span class="lineno">  103</span>    assert_array_equal(oh.fit(X).transform(X).toarray(), X_expected)</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    oh = OneHotEncoder(categories=<span class="stringliteral">&quot;auto&quot;</span>, dtype=output_dtype, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  106</span>    assert_array_equal(oh.fit_transform(X), X_expected)</div>
<div class="line"><span class="lineno">  107</span>    assert_array_equal(oh.fit(X).transform(X), X_expected)</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span><span class="preprocessor">@pytest.mark.parametrize(&quot;output_dtype&quot;, [np.int32, np.float32, np.float64])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c2c839192adbb22e72afbb75e03b9b0" name="a3c2c839192adbb22e72afbb75e03b9b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c2c839192adbb22e72afbb75e03b9b0">&#9670;&#160;</a></span>test_one_hot_encoder_dtype_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_dtype_pandas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output_dtype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  111</span><span class="keyword">def </span>test_one_hot_encoder_dtype_pandas(output_dtype):</div>
<div class="line"><span class="lineno">  112</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    X_df = pd.DataFrame({<span class="stringliteral">&quot;A&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], <span class="stringliteral">&quot;B&quot;</span>: [1, 2]})</div>
<div class="line"><span class="lineno">  115</span>    X_expected = np.array([[1, 0, 1, 0], [0, 1, 0, 1]], dtype=output_dtype)</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>    oh = OneHotEncoder(dtype=output_dtype)</div>
<div class="line"><span class="lineno">  118</span>    assert_array_equal(oh.fit_transform(X_df).toarray(), X_expected)</div>
<div class="line"><span class="lineno">  119</span>    assert_array_equal(oh.fit(X_df).transform(X_df).toarray(), X_expected)</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>    oh = OneHotEncoder(dtype=output_dtype, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  122</span>    assert_array_equal(oh.fit_transform(X_df), X_expected)</div>
<div class="line"><span class="lineno">  123</span>    assert_array_equal(oh.fit(X_df).transform(X_df), X_expected)</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a226432ed774f1074318c7231583070f7" name="a226432ed774f1074318c7231583070f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a226432ed774f1074318c7231583070f7">&#9670;&#160;</a></span>test_one_hot_encoder_feature_names()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_feature_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  126</span><span class="keyword">def </span>test_one_hot_encoder_feature_names():</div>
<div class="line"><span class="lineno">  127</span>    enc = OneHotEncoder()</div>
<div class="line"><span class="lineno">  128</span>    X = [</div>
<div class="line"><span class="lineno">  129</span>        [<span class="stringliteral">&quot;Male&quot;</span>, 1, <span class="stringliteral">&quot;girl&quot;</span>, 2, 3],</div>
<div class="line"><span class="lineno">  130</span>        [<span class="stringliteral">&quot;Female&quot;</span>, 41, <span class="stringliteral">&quot;girl&quot;</span>, 1, 10],</div>
<div class="line"><span class="lineno">  131</span>        [<span class="stringliteral">&quot;Male&quot;</span>, 51, <span class="stringliteral">&quot;boy&quot;</span>, 12, 3],</div>
<div class="line"><span class="lineno">  132</span>        [<span class="stringliteral">&quot;Male&quot;</span>, 91, <span class="stringliteral">&quot;girl&quot;</span>, 21, 30],</div>
<div class="line"><span class="lineno">  133</span>    ]</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>    enc.fit(X)</div>
<div class="line"><span class="lineno">  136</span>    feature_names = enc.get_feature_names_out()</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">  139</span>        [</div>
<div class="line"><span class="lineno">  140</span>            <span class="stringliteral">&quot;x0_Female&quot;</span>,</div>
<div class="line"><span class="lineno">  141</span>            <span class="stringliteral">&quot;x0_Male&quot;</span>,</div>
<div class="line"><span class="lineno">  142</span>            <span class="stringliteral">&quot;x1_1&quot;</span>,</div>
<div class="line"><span class="lineno">  143</span>            <span class="stringliteral">&quot;x1_41&quot;</span>,</div>
<div class="line"><span class="lineno">  144</span>            <span class="stringliteral">&quot;x1_51&quot;</span>,</div>
<div class="line"><span class="lineno">  145</span>            <span class="stringliteral">&quot;x1_91&quot;</span>,</div>
<div class="line"><span class="lineno">  146</span>            <span class="stringliteral">&quot;x2_boy&quot;</span>,</div>
<div class="line"><span class="lineno">  147</span>            <span class="stringliteral">&quot;x2_girl&quot;</span>,</div>
<div class="line"><span class="lineno">  148</span>            <span class="stringliteral">&quot;x3_1&quot;</span>,</div>
<div class="line"><span class="lineno">  149</span>            <span class="stringliteral">&quot;x3_2&quot;</span>,</div>
<div class="line"><span class="lineno">  150</span>            <span class="stringliteral">&quot;x3_12&quot;</span>,</div>
<div class="line"><span class="lineno">  151</span>            <span class="stringliteral">&quot;x3_21&quot;</span>,</div>
<div class="line"><span class="lineno">  152</span>            <span class="stringliteral">&quot;x4_3&quot;</span>,</div>
<div class="line"><span class="lineno">  153</span>            <span class="stringliteral">&quot;x4_10&quot;</span>,</div>
<div class="line"><span class="lineno">  154</span>            <span class="stringliteral">&quot;x4_30&quot;</span>,</div>
<div class="line"><span class="lineno">  155</span>        ],</div>
<div class="line"><span class="lineno">  156</span>        feature_names,</div>
<div class="line"><span class="lineno">  157</span>    )</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    feature_names2 = enc.get_feature_names_out([<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>, <span class="stringliteral">&quot;four&quot;</span>, <span class="stringliteral">&quot;five&quot;</span>])</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">  162</span>        [</div>
<div class="line"><span class="lineno">  163</span>            <span class="stringliteral">&quot;one_Female&quot;</span>,</div>
<div class="line"><span class="lineno">  164</span>            <span class="stringliteral">&quot;one_Male&quot;</span>,</div>
<div class="line"><span class="lineno">  165</span>            <span class="stringliteral">&quot;two_1&quot;</span>,</div>
<div class="line"><span class="lineno">  166</span>            <span class="stringliteral">&quot;two_41&quot;</span>,</div>
<div class="line"><span class="lineno">  167</span>            <span class="stringliteral">&quot;two_51&quot;</span>,</div>
<div class="line"><span class="lineno">  168</span>            <span class="stringliteral">&quot;two_91&quot;</span>,</div>
<div class="line"><span class="lineno">  169</span>            <span class="stringliteral">&quot;three_boy&quot;</span>,</div>
<div class="line"><span class="lineno">  170</span>            <span class="stringliteral">&quot;three_girl&quot;</span>,</div>
<div class="line"><span class="lineno">  171</span>            <span class="stringliteral">&quot;four_1&quot;</span>,</div>
<div class="line"><span class="lineno">  172</span>            <span class="stringliteral">&quot;four_2&quot;</span>,</div>
<div class="line"><span class="lineno">  173</span>            <span class="stringliteral">&quot;four_12&quot;</span>,</div>
<div class="line"><span class="lineno">  174</span>            <span class="stringliteral">&quot;four_21&quot;</span>,</div>
<div class="line"><span class="lineno">  175</span>            <span class="stringliteral">&quot;five_3&quot;</span>,</div>
<div class="line"><span class="lineno">  176</span>            <span class="stringliteral">&quot;five_10&quot;</span>,</div>
<div class="line"><span class="lineno">  177</span>            <span class="stringliteral">&quot;five_30&quot;</span>,</div>
<div class="line"><span class="lineno">  178</span>        ],</div>
<div class="line"><span class="lineno">  179</span>        feature_names2,</div>
<div class="line"><span class="lineno">  180</span>    )</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;input_features should have length&quot;</span>):</div>
<div class="line"><span class="lineno">  183</span>        enc.get_feature_names_out([<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>])</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a807f5e3b72e99ef7140d923d184ef57e" name="a807f5e3b72e99ef7140d923d184ef57e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a807f5e3b72e99ef7140d923d184ef57e">&#9670;&#160;</a></span>test_one_hot_encoder_feature_names_drop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_feature_names_drop </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_names</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  562</span><span class="keyword">def </span>test_one_hot_encoder_feature_names_drop(drop, expected_names):</div>
<div class="line"><span class="lineno">  563</span>    X = [[<span class="stringliteral">&quot;c&quot;</span>, 2, <span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>, 2, <span class="stringliteral">&quot;b&quot;</span>]]</div>
<div class="line"><span class="lineno">  564</span> </div>
<div class="line"><span class="lineno">  565</span>    ohe = OneHotEncoder(drop=drop)</div>
<div class="line"><span class="lineno">  566</span>    ohe.fit(X)</div>
<div class="line"><span class="lineno">  567</span>    feature_names = ohe.get_feature_names_out()</div>
<div class="line"><span class="lineno">  568</span>    assert_array_equal(expected_names, feature_names)</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aad94b6bcc674e95ae943df9b5eefa534" name="aad94b6bcc674e95ae943df9b5eefa534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad94b6bcc674e95ae943df9b5eefa534">&#9670;&#160;</a></span>test_one_hot_encoder_feature_names_unicode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_feature_names_unicode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  186</span><span class="keyword">def </span>test_one_hot_encoder_feature_names_unicode():</div>
<div class="line"><span class="lineno">  187</span>    enc = OneHotEncoder()</div>
<div class="line"><span class="lineno">  188</span>    X = np.array([[<span class="stringliteral">&quot;ct1&quot;</span>, <span class="stringliteral">&quot;dat2&quot;</span>]], dtype=object).T</div>
<div class="line"><span class="lineno">  189</span>    enc.fit(X)</div>
<div class="line"><span class="lineno">  190</span>    feature_names = enc.get_feature_names_out()</div>
<div class="line"><span class="lineno">  191</span>    assert_array_equal([<span class="stringliteral">&quot;x0_ct1&quot;</span>, <span class="stringliteral">&quot;x0_dat2&quot;</span>], feature_names)</div>
<div class="line"><span class="lineno">  192</span>    feature_names = enc.get_feature_names_out(input_features=[<span class="stringliteral">&quot;nme&quot;</span>])</div>
<div class="line"><span class="lineno">  193</span>    assert_array_equal([<span class="stringliteral">&quot;nme_ct1&quot;</span>, <span class="stringliteral">&quot;nme_dat2&quot;</span>], feature_names)</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afd84470c6903fa74f4154535fdd8bebf" name="afd84470c6903fa74f4154535fdd8bebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd84470c6903fa74f4154535fdd8bebf">&#9670;&#160;</a></span>test_one_hot_encoder_handle_unknown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_handle_unknown </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   41</span><span class="keyword">def </span>test_one_hot_encoder_handle_unknown(handle_unknown):</div>
<div class="line"><span class="lineno">   42</span>    X = np.array([[0, 2, 1], [1, 0, 3], [1, 0, 2]])</div>
<div class="line"><span class="lineno">   43</span>    X2 = np.array([[4, 1, 1]])</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>    <span class="comment"># Test that one hot encoder raises error for unknown features</span></div>
<div class="line"><span class="lineno">   46</span>    <span class="comment"># present during transform.</span></div>
<div class="line"><span class="lineno">   47</span>    oh = OneHotEncoder(handle_unknown=<span class="stringliteral">&quot;error&quot;</span>)</div>
<div class="line"><span class="lineno">   48</span>    oh.fit(X)</div>
<div class="line"><span class="lineno">   49</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;Found unknown categories&quot;</span>):</div>
<div class="line"><span class="lineno">   50</span>        oh.transform(X2)</div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>    <span class="comment"># Test the ignore option, ignores unknown features (giving all 0&#39;s)</span></div>
<div class="line"><span class="lineno">   53</span>    oh = OneHotEncoder(handle_unknown=handle_unknown)</div>
<div class="line"><span class="lineno">   54</span>    oh.fit(X)</div>
<div class="line"><span class="lineno">   55</span>    X2_passed = X2.copy()</div>
<div class="line"><span class="lineno">   56</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">   57</span>        oh.transform(X2_passed).toarray(),</div>
<div class="line"><span class="lineno">   58</span>        np.array([[0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0]]),</div>
<div class="line"><span class="lineno">   59</span>    )</div>
<div class="line"><span class="lineno">   60</span>    <span class="comment"># ensure transformed data was not modified in place</span></div>
<div class="line"><span class="lineno">   61</span>    assert_allclose(X2, X2_passed)</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a643dc078ceb13e5f07c9076a38bad70b" name="a643dc078ceb13e5f07c9076a38bad70b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a643dc078ceb13e5f07c9076a38bad70b">&#9670;&#160;</a></span>test_one_hot_encoder_handle_unknown_strings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_handle_unknown_strings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   77</span><span class="keyword">def </span>test_one_hot_encoder_handle_unknown_strings(handle_unknown):</div>
<div class="line"><span class="lineno">   78</span>    X = np.array([<span class="stringliteral">&quot;11111111&quot;</span>, <span class="stringliteral">&quot;22&quot;</span>, <span class="stringliteral">&quot;333&quot;</span>, <span class="stringliteral">&quot;4444&quot;</span>]).reshape((-1, 1))</div>
<div class="line"><span class="lineno">   79</span>    X2 = np.array([<span class="stringliteral">&quot;55555&quot;</span>, <span class="stringliteral">&quot;22&quot;</span>]).reshape((-1, 1))</div>
<div class="line"><span class="lineno">   80</span>    <span class="comment"># Non Regression test for the issue #12470</span></div>
<div class="line"><span class="lineno">   81</span>    <span class="comment"># Test the ignore option, when categories are numpy string dtype</span></div>
<div class="line"><span class="lineno">   82</span>    <span class="comment"># particularly when the known category strings are larger</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="comment"># than the unknown category strings</span></div>
<div class="line"><span class="lineno">   84</span>    oh = OneHotEncoder(handle_unknown=handle_unknown)</div>
<div class="line"><span class="lineno">   85</span>    oh.fit(X)</div>
<div class="line"><span class="lineno">   86</span>    X2_passed = X2.copy()</div>
<div class="line"><span class="lineno">   87</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">   88</span>        oh.transform(X2_passed).toarray(),</div>
<div class="line"><span class="lineno">   89</span>        np.array([[0.0, 0.0, 0.0, 0.0], [0.0, 1.0, 0.0, 0.0]]),</div>
<div class="line"><span class="lineno">   90</span>    )</div>
<div class="line"><span class="lineno">   91</span>    <span class="comment"># ensure transformed data was not modified in place</span></div>
<div class="line"><span class="lineno">   92</span>    assert_array_equal(X2, X2_passed)</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span><span class="preprocessor">@pytest.mark.parametrize(&quot;output_dtype&quot;, [np.int32, np.float32, np.float64])</span></div>
<div class="line"><span class="lineno">   96</span><span class="preprocessor">@pytest.mark.parametrize(&quot;input_dtype&quot;, [np.int32, np.float32, np.float64])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1702d169d6cb4dd36cf5c0d22b469a21" name="a1702d169d6cb4dd36cf5c0d22b469a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1702d169d6cb4dd36cf5c0d22b469a21">&#9670;&#160;</a></span>test_one_hot_encoder_inverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_inverse </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sparse_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>drop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  258</span><span class="keyword">def </span>test_one_hot_encoder_inverse(handle_unknown, sparse_, drop):</div>
<div class="line"><span class="lineno">  259</span>    X = [[<span class="stringliteral">&quot;abc&quot;</span>, 2, 55], [<span class="stringliteral">&quot;def&quot;</span>, 1, 55], [<span class="stringliteral">&quot;abc&quot;</span>, 3, 55]]</div>
<div class="line"><span class="lineno">  260</span>    enc = OneHotEncoder(sparse_output=sparse_, drop=drop)</div>
<div class="line"><span class="lineno">  261</span>    X_tr = enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  262</span>    exp = np.array(X, dtype=object)</div>
<div class="line"><span class="lineno">  263</span>    assert_array_equal(enc.inverse_transform(X_tr), exp)</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>    X = [[2, 55], [1, 55], [3, 55]]</div>
<div class="line"><span class="lineno">  266</span>    enc = OneHotEncoder(sparse_output=sparse_, categories=<span class="stringliteral">&quot;auto&quot;</span>, drop=drop)</div>
<div class="line"><span class="lineno">  267</span>    X_tr = enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  268</span>    exp = np.array(X)</div>
<div class="line"><span class="lineno">  269</span>    assert_array_equal(enc.inverse_transform(X_tr), exp)</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>    <span class="keywordflow">if</span> drop <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  272</span>        <span class="comment"># with unknown categories</span></div>
<div class="line"><span class="lineno">  273</span>        <span class="comment"># drop is incompatible with handle_unknown=ignore</span></div>
<div class="line"><span class="lineno">  274</span>        X = [[<span class="stringliteral">&quot;abc&quot;</span>, 2, 55], [<span class="stringliteral">&quot;def&quot;</span>, 1, 55], [<span class="stringliteral">&quot;abc&quot;</span>, 3, 55]]</div>
<div class="line"><span class="lineno">  275</span>        enc = OneHotEncoder(</div>
<div class="line"><span class="lineno">  276</span>            sparse_output=sparse_,</div>
<div class="line"><span class="lineno">  277</span>            handle_unknown=handle_unknown,</div>
<div class="line"><span class="lineno">  278</span>            categories=[[<span class="stringliteral">&quot;abc&quot;</span>, <span class="stringliteral">&quot;def&quot;</span>], [1, 2], [54, 55, 56]],</div>
<div class="line"><span class="lineno">  279</span>        )</div>
<div class="line"><span class="lineno">  280</span>        X_tr = enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  281</span>        exp = np.array(X, dtype=object)</div>
<div class="line"><span class="lineno">  282</span>        exp[2, 1] = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  283</span>        assert_array_equal(enc.inverse_transform(X_tr), exp)</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>        <span class="comment"># with an otherwise numerical output, still object if unknown</span></div>
<div class="line"><span class="lineno">  286</span>        X = [[2, 55], [1, 55], [3, 55]]</div>
<div class="line"><span class="lineno">  287</span>        enc = OneHotEncoder(</div>
<div class="line"><span class="lineno">  288</span>            sparse_output=sparse_,</div>
<div class="line"><span class="lineno">  289</span>            categories=[[1, 2], [54, 56]],</div>
<div class="line"><span class="lineno">  290</span>            handle_unknown=handle_unknown,</div>
<div class="line"><span class="lineno">  291</span>        )</div>
<div class="line"><span class="lineno">  292</span>        X_tr = enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  293</span>        exp = np.array(X, dtype=object)</div>
<div class="line"><span class="lineno">  294</span>        exp[2, 0] = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  295</span>        exp[:, 1] = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  296</span>        assert_array_equal(enc.inverse_transform(X_tr), exp)</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>    <span class="comment"># incorrect shape raises</span></div>
<div class="line"><span class="lineno">  299</span>    X_tr = np.array([[0, 1, 1], [1, 0, 1]])</div>
<div class="line"><span class="lineno">  300</span>    msg = re.escape(<span class="stringliteral">&quot;Shape of the passed X data is not correct&quot;</span>)</div>
<div class="line"><span class="lineno">  301</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  302</span>        enc.inverse_transform(X_tr)</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span><span class="preprocessor">@pytest.mark.parametrize(&quot;sparse_&quot;, [False, True])</span></div>
<div class="line"><span class="lineno">  306</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  307</span>    <span class="stringliteral">&quot;X, X_trans&quot;</span>,</div>
<div class="line"><span class="lineno">  308</span>    [</div>
<div class="line"><span class="lineno">  309</span>        ([[2, 55], [1, 55], [2, 55]], [[0, 1, 1], [0, 0, 0], [0, 1, 1]]),</div>
<div class="line"><span class="lineno">  310</span>        (</div>
<div class="line"><span class="lineno">  311</span>            [[<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;three&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>]],</div>
<div class="line"><span class="lineno">  312</span>            [[0, 0, 0, 0, 0], [0, 0, 0, 0, 1], [0, 1, 0, 0, 0]],</div>
<div class="line"><span class="lineno">  313</span>        ),</div>
<div class="line"><span class="lineno">  314</span>    ],</div>
<div class="line"><span class="lineno">  315</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d30cf463dff3537d41e55d7047ac300" name="a5d30cf463dff3537d41e55d7047ac300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d30cf463dff3537d41e55d7047ac300">&#9670;&#160;</a></span>test_one_hot_encoder_inverse_if_binary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_inverse_if_binary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  337</span><span class="keyword">def </span>test_one_hot_encoder_inverse_if_binary():</div>
<div class="line"><span class="lineno">  338</span>    X = np.array([[<span class="stringliteral">&quot;Male&quot;</span>, 1], [<span class="stringliteral">&quot;Female&quot;</span>, 3], [<span class="stringliteral">&quot;Female&quot;</span>, 2]], dtype=object)</div>
<div class="line"><span class="lineno">  339</span>    ohe = OneHotEncoder(drop=<span class="stringliteral">&quot;if_binary&quot;</span>, sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  340</span>    X_tr = ohe.fit_transform(X)</div>
<div class="line"><span class="lineno">  341</span>    assert_array_equal(ohe.inverse_transform(X_tr), X)</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span><span class="preprocessor">@pytest.mark.parametrize(&quot;drop&quot;, [&quot;if_binary&quot;, &quot;first&quot;, None])</span></div>
<div class="line"><span class="lineno">  345</span><span class="preprocessor">@pytest.mark.parametrize(&quot;reset_drop&quot;, [&quot;if_binary&quot;, &quot;first&quot;, None])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cdaf4f93da19fcd4ebbf19ba1da120d" name="a2cdaf4f93da19fcd4ebbf19ba1da120d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cdaf4f93da19fcd4ebbf19ba1da120d">&#9670;&#160;</a></span>test_one_hot_encoder_inverse_transform_raise_error_with_unknown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_inverse_transform_raise_error_with_unknown </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sparse_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that `inverse_transform` raise an error with unknown samples, no
dropped feature, and `handle_unknow="error`.
Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/14934
</pre> <div class="fragment"><div class="line"><span class="lineno">  318</span>):</div>
<div class="line"><span class="lineno">  319</span>    <span class="stringliteral">&quot;&quot;&quot;Check that `inverse_transform` raise an error with unknown samples, no</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">    dropped feature, and `handle_unknow=&quot;error`.</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/14934</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  324</span>    enc = OneHotEncoder(sparse_output=sparse_).fit(X)</div>
<div class="line"><span class="lineno">  325</span>    msg = (</div>
<div class="line"><span class="lineno">  326</span>        <span class="stringliteral">r&quot;Samples \[(\d )*\d\] can not be inverted when drop=None and &quot;</span></div>
<div class="line"><span class="lineno">  327</span>        <span class="stringliteral">r&quot;handle_unknown=&#39;error&#39; because they contain all zeros&quot;</span></div>
<div class="line"><span class="lineno">  328</span>    )</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>    <span class="keywordflow">if</span> sparse_:</div>
<div class="line"><span class="lineno">  331</span>        <span class="comment"># emulate sparse data transform by a one-hot encoder sparse.</span></div>
<div class="line"><span class="lineno">  332</span>        X_trans = _convert_container(X_trans, <span class="stringliteral">&quot;sparse&quot;</span>)</div>
<div class="line"><span class="lineno">  333</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  334</span>        enc.inverse_transform(X_trans)</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c1b57ee7d7da72aa2010d095da1001d" name="a1c1b57ee7d7da72aa2010d095da1001d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1b57ee7d7da72aa2010d095da1001d">&#9670;&#160;</a></span>test_one_hot_encoder_not_fitted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_not_fitted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   64</span><span class="keyword">def </span>test_one_hot_encoder_not_fitted():</div>
<div class="line"><span class="lineno">   65</span>    X = np.array([[<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>]])</div>
<div class="line"><span class="lineno">   66</span>    enc = OneHotEncoder(categories=[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>])</div>
<div class="line"><span class="lineno">   67</span>    msg = (</div>
<div class="line"><span class="lineno">   68</span>        <span class="stringliteral">&quot;This OneHotEncoder instance is not fitted yet. &quot;</span></div>
<div class="line"><span class="lineno">   69</span>        <span class="stringliteral">&quot;Call &#39;fit&#39; with appropriate arguments before using this &quot;</span></div>
<div class="line"><span class="lineno">   70</span>        <span class="stringliteral">&quot;estimator.&quot;</span></div>
<div class="line"><span class="lineno">   71</span>    )</div>
<div class="line"><span class="lineno">   72</span>    <span class="keyword">with</span> pytest.raises(NotFittedError, match=msg):</div>
<div class="line"><span class="lineno">   73</span>        enc.transform(X)</div>
<div class="line"><span class="lineno">   74</span> </div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;ignore&quot;, &quot;infrequent_if_exist&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace882aba3e027a16182a6afc0651da93" name="ace882aba3e027a16182a6afc0651da93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace882aba3e027a16182a6afc0651da93">&#9670;&#160;</a></span>test_one_hot_encoder_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_pandas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  544</span><span class="keyword">def </span>test_one_hot_encoder_pandas():</div>
<div class="line"><span class="lineno">  545</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>    X_df = pd.DataFrame({<span class="stringliteral">&quot;A&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], <span class="stringliteral">&quot;B&quot;</span>: [1, 2]})</div>
<div class="line"><span class="lineno">  548</span> </div>
<div class="line"><span class="lineno">  549</span>    Xtr = check_categorical_onehot(X_df)</div>
<div class="line"><span class="lineno">  550</span>    assert_allclose(Xtr, [[1, 0, 1, 0], [0, 1, 0, 1]])</div>
<div class="line"><span class="lineno">  551</span> </div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  554</span>    <span class="stringliteral">&quot;drop, expected_names&quot;</span>,</div>
<div class="line"><span class="lineno">  555</span>    [</div>
<div class="line"><span class="lineno">  556</span>        (<span class="stringliteral">&quot;first&quot;</span>, [<span class="stringliteral">&quot;x0_c&quot;</span>, <span class="stringliteral">&quot;x2_b&quot;</span>]),</div>
<div class="line"><span class="lineno">  557</span>        (<span class="stringliteral">&quot;if_binary&quot;</span>, [<span class="stringliteral">&quot;x0_c&quot;</span>, <span class="stringliteral">&quot;x1_2&quot;</span>, <span class="stringliteral">&quot;x2_b&quot;</span>]),</div>
<div class="line"><span class="lineno">  558</span>        ([<span class="stringliteral">&quot;c&quot;</span>, 2, <span class="stringliteral">&quot;b&quot;</span>], [<span class="stringliteral">&quot;x0_b&quot;</span>, <span class="stringliteral">&quot;x2_a&quot;</span>]),</div>
<div class="line"><span class="lineno">  559</span>    ],</div>
<div class="line"><span class="lineno">  560</span>    ids=[<span class="stringliteral">&quot;first&quot;</span>, <span class="stringliteral">&quot;binary&quot;</span>, <span class="stringliteral">&quot;manual&quot;</span>],</div>
<div class="line"><span class="lineno">  561</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a22c9cefc2da6a360818f782fe145fc79" name="a22c9cefc2da6a360818f782fe145fc79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22c9cefc2da6a360818f782fe145fc79">&#9670;&#160;</a></span>test_one_hot_encoder_set_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_set_output </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check OneHotEncoder works with set_output.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1905</span><span class="keyword">def </span>test_one_hot_encoder_set_output():</div>
<div class="line"><span class="lineno"> 1906</span>    <span class="stringliteral">&quot;&quot;&quot;Check OneHotEncoder works with set_output.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1907</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1908</span> </div>
<div class="line"><span class="lineno"> 1909</span>    X_df = pd.DataFrame({<span class="stringliteral">&quot;A&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], <span class="stringliteral">&quot;B&quot;</span>: [1, 2]})</div>
<div class="line"><span class="lineno"> 1910</span>    ohe = OneHotEncoder()</div>
<div class="line"><span class="lineno"> 1911</span> </div>
<div class="line"><span class="lineno"> 1912</span>    ohe.set_output(transform=<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1913</span> </div>
<div class="line"><span class="lineno"> 1914</span>    match = <span class="stringliteral">&quot;Pandas output does not support sparse data&quot;</span></div>
<div class="line"><span class="lineno"> 1915</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=match):</div>
<div class="line"><span class="lineno"> 1916</span>        ohe.fit_transform(X_df)</div>
<div class="line"><span class="lineno"> 1917</span> </div>
<div class="line"><span class="lineno"> 1918</span>    ohe_default = OneHotEncoder(sparse_output=<span class="keyword">False</span>).set_output(transform=<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><span class="lineno"> 1919</span>    ohe_pandas = OneHotEncoder(sparse_output=<span class="keyword">False</span>).set_output(transform=<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1920</span> </div>
<div class="line"><span class="lineno"> 1921</span>    X_default = ohe_default.fit_transform(X_df)</div>
<div class="line"><span class="lineno"> 1922</span>    X_pandas = ohe_pandas.fit_transform(X_df)</div>
<div class="line"><span class="lineno"> 1923</span> </div>
<div class="line"><span class="lineno"> 1924</span>    assert_allclose(X_pandas.to_numpy(), X_default)</div>
<div class="line"><span class="lineno"> 1925</span>    assert_array_equal(ohe_pandas.get_feature_names_out(), X_pandas.columns)</div>
<div class="line"><span class="lineno"> 1926</span> </div>
<div class="line"><span class="lineno"> 1927</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4f3566e0f9ad563f5c61afe619019e4" name="ac4f3566e0f9ad563f5c61afe619019e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f3566e0f9ad563f5c61afe619019e4">&#9670;&#160;</a></span>test_one_hot_encoder_set_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_set_params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  196</span><span class="keyword">def </span>test_one_hot_encoder_set_params():</div>
<div class="line"><span class="lineno">  197</span>    X = np.array([[1, 2]]).T</div>
<div class="line"><span class="lineno">  198</span>    oh = OneHotEncoder()</div>
<div class="line"><span class="lineno">  199</span>    <span class="comment"># set params on not yet fitted object</span></div>
<div class="line"><span class="lineno">  200</span>    oh.set_params(categories=[[0, 1, 2, 3]])</div>
<div class="line"><span class="lineno">  201</span>    <span class="keyword">assert</span> oh.get_params()[<span class="stringliteral">&quot;categories&quot;</span>] == [[0, 1, 2, 3]]</div>
<div class="line"><span class="lineno">  202</span>    <span class="keyword">assert</span> oh.fit_transform(X).toarray().shape == (2, 4)</div>
<div class="line"><span class="lineno">  203</span>    <span class="comment"># set params on already fitted object</span></div>
<div class="line"><span class="lineno">  204</span>    oh.set_params(categories=[[0, 1, 2, 3, 4]])</div>
<div class="line"><span class="lineno">  205</span>    <span class="keyword">assert</span> oh.fit_transform(X).toarray().shape == (2, 5)</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab744bb16995f03ffbbee39ee173389af" name="ab744bb16995f03ffbbee39ee173389af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab744bb16995f03ffbbee39ee173389af">&#9670;&#160;</a></span>test_one_hot_encoder_sparse_dense()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_sparse_dense </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   17</span><span class="keyword">def </span>test_one_hot_encoder_sparse_dense():</div>
<div class="line"><span class="lineno">   18</span>    <span class="comment"># check that sparse and dense will give the same results</span></div>
<div class="line"><span class="lineno">   19</span> </div>
<div class="line"><span class="lineno">   20</span>    X = np.array([[3, 2, 1], [0, 1, 1]])</div>
<div class="line"><span class="lineno">   21</span>    enc_sparse = OneHotEncoder()</div>
<div class="line"><span class="lineno">   22</span>    enc_dense = OneHotEncoder(sparse_output=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>    X_trans_sparse = enc_sparse.fit_transform(X)</div>
<div class="line"><span class="lineno">   25</span>    X_trans_dense = enc_dense.fit_transform(X)</div>
<div class="line"><span class="lineno">   26</span> </div>
<div class="line"><span class="lineno">   27</span>    <span class="keyword">assert</span> X_trans_sparse.shape == (2, 5)</div>
<div class="line"><span class="lineno">   28</span>    <span class="keyword">assert</span> X_trans_dense.shape == (2, 5)</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>    <span class="keyword">assert</span> sparse.issparse(X_trans_sparse)</div>
<div class="line"><span class="lineno">   31</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> sparse.issparse(X_trans_dense)</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>    <span class="comment"># check outcome</span></div>
<div class="line"><span class="lineno">   34</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">   35</span>        X_trans_sparse.toarray(), [[0.0, 1.0, 0.0, 1.0, 1.0], [1.0, 0.0, 1.0, 0.0, 1.0]]</div>
<div class="line"><span class="lineno">   36</span>    )</div>
<div class="line"><span class="lineno">   37</span>    assert_array_equal(X_trans_sparse.toarray(), X_trans_dense)</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span><span class="preprocessor">@pytest.mark.parametrize(&quot;handle_unknown&quot;, [&quot;ignore&quot;, &quot;infrequent_if_exist&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab46efe8949fb32d7ff32c7efc9610600" name="ab46efe8949fb32d7ff32c7efc9610600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab46efe8949fb32d7ff32c7efc9610600">&#9670;&#160;</a></span>test_one_hot_encoder_sparse_deprecated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_sparse_deprecated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1339</span><span class="keyword">def </span>test_one_hot_encoder_sparse_deprecated():</div>
<div class="line"><span class="lineno"> 1340</span>    X = [[<span class="stringliteral">&quot;Male&quot;</span>, 1], [<span class="stringliteral">&quot;Female&quot;</span>, 3], [<span class="stringliteral">&quot;Female&quot;</span>, 2]]</div>
<div class="line"><span class="lineno"> 1341</span> </div>
<div class="line"><span class="lineno"> 1342</span>    msg = <span class="stringliteral">&quot;`sparse` was renamed to `sparse_output`&quot;</span></div>
<div class="line"><span class="lineno"> 1343</span>    <span class="keyword">with</span> pytest.warns(FutureWarning, match=msg):</div>
<div class="line"><span class="lineno"> 1344</span>        OneHotEncoder(sparse=<span class="keyword">False</span>).fit(X)</div>
<div class="line"><span class="lineno"> 1345</span> </div>
<div class="line"><span class="lineno"> 1346</span> </div>
<div class="line"><span class="lineno"> 1347</span><span class="comment"># deliberately omit &#39;OS&#39; as an invalid combo</span></div>
<div class="line"><span class="lineno"> 1348</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1349</span>    <span class="stringliteral">&quot;input_dtype, category_dtype&quot;</span>, [<span class="stringliteral">&quot;OO&quot;</span>, <span class="stringliteral">&quot;OU&quot;</span>, <span class="stringliteral">&quot;UO&quot;</span>, <span class="stringliteral">&quot;UU&quot;</span>, <span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;SO&quot;</span>, <span class="stringliteral">&quot;SU&quot;</span>, <span class="stringliteral">&quot;SS&quot;</span>]</div>
<div class="line"><span class="lineno"> 1350</span>)</div>
<div class="line"><span class="lineno"> 1351</span><span class="preprocessor">@pytest.mark.parametrize(&quot;array_type&quot;, [&quot;list&quot;, &quot;array&quot;, &quot;dataframe&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24658549984dc37109101f85be77527f" name="a24658549984dc37109101f85be77527f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24658549984dc37109101f85be77527f">&#9670;&#160;</a></span>test_one_hot_encoder_specified_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_specified_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cat_dtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>handle_unknown</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  487</span><span class="keyword">def </span>test_one_hot_encoder_specified_categories(X, X2, cats, cat_dtype, handle_unknown):</div>
<div class="line"><span class="lineno">  488</span>    enc = OneHotEncoder(categories=cats)</div>
<div class="line"><span class="lineno">  489</span>    exp = np.array([[1.0, 0.0, 0.0], [0.0, 1.0, 0.0]])</div>
<div class="line"><span class="lineno">  490</span>    assert_array_equal(enc.fit_transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  491</span>    <span class="keyword">assert</span> list(enc.categories[0]) == list(cats[0])</div>
<div class="line"><span class="lineno">  492</span>    <span class="keyword">assert</span> enc.categories_[0].tolist() == list(cats[0])</div>
<div class="line"><span class="lineno">  493</span>    <span class="comment"># manually specified categories should have same dtype as</span></div>
<div class="line"><span class="lineno">  494</span>    <span class="comment"># the data when coerced from lists</span></div>
<div class="line"><span class="lineno">  495</span>    <span class="keyword">assert</span> enc.categories_[0].dtype == cat_dtype</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>    <span class="comment"># when specifying categories manually, unknown categories should already</span></div>
<div class="line"><span class="lineno">  498</span>    <span class="comment"># raise when fitting</span></div>
<div class="line"><span class="lineno">  499</span>    enc = OneHotEncoder(categories=cats)</div>
<div class="line"><span class="lineno">  500</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;Found unknown categories&quot;</span>):</div>
<div class="line"><span class="lineno">  501</span>        enc.fit(X2)</div>
<div class="line"><span class="lineno">  502</span>    enc = OneHotEncoder(categories=cats, handle_unknown=handle_unknown)</div>
<div class="line"><span class="lineno">  503</span>    exp = np.array([[1.0, 0.0, 0.0], [0.0, 0.0, 0.0]])</div>
<div class="line"><span class="lineno">  504</span>    assert_array_equal(enc.fit(X2).transform(X2).toarray(), exp)</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0dfb9182a3bf79924d6c306a7677a31c" name="a0dfb9182a3bf79924d6c306a7677a31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dfb9182a3bf79924d6c306a7677a31c">&#9670;&#160;</a></span>test_one_hot_encoder_specified_categories_mixed_columns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_specified_categories_mixed_columns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  531</span><span class="keyword">def </span>test_one_hot_encoder_specified_categories_mixed_columns():</div>
<div class="line"><span class="lineno">  532</span>    <span class="comment"># multiple columns</span></div>
<div class="line"><span class="lineno">  533</span>    X = np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], [0, 2]], dtype=object).T</div>
<div class="line"><span class="lineno">  534</span>    enc = OneHotEncoder(categories=[[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], [0, 1, 2]])</div>
<div class="line"><span class="lineno">  535</span>    exp = np.array([[1.0, 0.0, 0.0, 1.0, 0.0, 0.0], [0.0, 1.0, 0.0, 0.0, 0.0, 1.0]])</div>
<div class="line"><span class="lineno">  536</span>    assert_array_equal(enc.fit_transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  537</span>    <span class="keyword">assert</span> enc.categories_[0].tolist() == [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]</div>
<div class="line"><span class="lineno">  538</span>    <span class="keyword">assert</span> np.issubdtype(enc.categories_[0].dtype, np.object_)</div>
<div class="line"><span class="lineno">  539</span>    <span class="keyword">assert</span> enc.categories_[1].tolist() == [0, 1, 2]</div>
<div class="line"><span class="lineno">  540</span>    <span class="comment"># integer categories but from object dtype data</span></div>
<div class="line"><span class="lineno">  541</span>    <span class="keyword">assert</span> np.issubdtype(enc.categories_[1].dtype, np.object_)</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6687d8600e786ae02e6666e3a66d35cf" name="a6687d8600e786ae02e6666e3a66d35cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6687d8600e786ae02e6666e3a66d35cf">&#9670;&#160;</a></span>test_one_hot_encoder_unsorted_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_unsorted_categories </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  507</span><span class="keyword">def </span>test_one_hot_encoder_unsorted_categories():</div>
<div class="line"><span class="lineno">  508</span>    X = np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T</div>
<div class="line"><span class="lineno">  509</span> </div>
<div class="line"><span class="lineno">  510</span>    enc = OneHotEncoder(categories=[[<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]])</div>
<div class="line"><span class="lineno">  511</span>    exp = np.array([[0.0, 1.0, 0.0], [1.0, 0.0, 0.0]])</div>
<div class="line"><span class="lineno">  512</span>    assert_array_equal(enc.fit(X).transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  513</span>    assert_array_equal(enc.fit_transform(X).toarray(), exp)</div>
<div class="line"><span class="lineno">  514</span>    <span class="keyword">assert</span> enc.categories_[0].tolist() == [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]</div>
<div class="line"><span class="lineno">  515</span>    <span class="keyword">assert</span> np.issubdtype(enc.categories_[0].dtype, np.object_)</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    <span class="comment"># unsorted passed categories still raise for numerical values</span></div>
<div class="line"><span class="lineno">  518</span>    X = np.array([[1, 2]]).T</div>
<div class="line"><span class="lineno">  519</span>    enc = OneHotEncoder(categories=[[2, 1, 3]])</div>
<div class="line"><span class="lineno">  520</span>    msg = <span class="stringliteral">&quot;Unsorted categories are not supported&quot;</span></div>
<div class="line"><span class="lineno">  521</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  522</span>        enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>    <span class="comment"># np.nan must be the last category in categories[0] to be considered sorted</span></div>
<div class="line"><span class="lineno">  525</span>    X = np.array([[1, 2, np.nan]]).T</div>
<div class="line"><span class="lineno">  526</span>    enc = OneHotEncoder(categories=[[1, np.nan, 2]])</div>
<div class="line"><span class="lineno">  527</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  528</span>        enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a80e4d2cc2ce8f4ca9c55a3755fb5f4f6" name="a80e4d2cc2ce8f4ca9c55a3755fb5f4f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80e4d2cc2ce8f4ca9c55a3755fb5f4f6">&#9670;&#160;</a></span>test_one_hot_encoder_warning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_one_hot_encoder_warning </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  781</span><span class="keyword">def </span>test_one_hot_encoder_warning():</div>
<div class="line"><span class="lineno">  782</span>    enc = OneHotEncoder()</div>
<div class="line"><span class="lineno">  783</span>    X = [[<span class="stringliteral">&quot;Male&quot;</span>, 1], [<span class="stringliteral">&quot;Female&quot;</span>, 3]]</div>
<div class="line"><span class="lineno">  784</span>    np.testing.assert_no_warnings(enc.fit_transform, X)</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span><span class="preprocessor">@pytest.mark.parametrize(&quot;missing_value&quot;, [np.nan, None, float(&quot;nan&quot;)</span>])</div>
</div><!-- fragment -->
</div>
</div>
<a id="a63e971f8055a865b1fd370b4aa342b98" name="a63e971f8055a865b1fd370b4aa342b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63e971f8055a865b1fd370b4aa342b98">&#9670;&#160;</a></span>test_ordinal_encoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  604</span><span class="keyword">def </span>test_ordinal_encoder(X):</div>
<div class="line"><span class="lineno">  605</span>    enc = OrdinalEncoder()</div>
<div class="line"><span class="lineno">  606</span>    exp = np.array([[0, 1, 0], [1, 0, 0]], dtype=<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  607</span>    assert_array_equal(enc.fit_transform(X), exp.astype(<span class="stringliteral">&quot;float64&quot;</span>))</div>
<div class="line"><span class="lineno">  608</span>    enc = OrdinalEncoder(dtype=<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  609</span>    assert_array_equal(enc.fit_transform(X), exp)</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span> </div>
<div class="line"><span class="lineno">  612</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  613</span>    <span class="stringliteral">&quot;X, X2, cats, cat_dtype&quot;</span>,</div>
<div class="line"><span class="lineno">  614</span>    [</div>
<div class="line"><span class="lineno">  615</span>        (</div>
<div class="line"><span class="lineno">  616</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  617</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  618</span>            [[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>]],</div>
<div class="line"><span class="lineno">  619</span>            np.object_,</div>
<div class="line"><span class="lineno">  620</span>        ),</div>
<div class="line"><span class="lineno">  621</span>        (</div>
<div class="line"><span class="lineno">  622</span>            np.array([[1, 2]], dtype=<span class="stringliteral">&quot;int64&quot;</span>).T,</div>
<div class="line"><span class="lineno">  623</span>            np.array([[1, 4]], dtype=<span class="stringliteral">&quot;int64&quot;</span>).T,</div>
<div class="line"><span class="lineno">  624</span>            [[1, 2, 3]],</div>
<div class="line"><span class="lineno">  625</span>            np.int64,</div>
<div class="line"><span class="lineno">  626</span>        ),</div>
<div class="line"><span class="lineno">  627</span>        (</div>
<div class="line"><span class="lineno">  628</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  629</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno">  630</span>            [np.array([<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>])],</div>
<div class="line"><span class="lineno">  631</span>            np.object_,</div>
<div class="line"><span class="lineno">  632</span>        ),</div>
<div class="line"><span class="lineno">  633</span>    ],</div>
<div class="line"><span class="lineno">  634</span>    ids=[<span class="stringliteral">&quot;object&quot;</span>, <span class="stringliteral">&quot;numeric&quot;</span>, <span class="stringliteral">&quot;object-string-cat&quot;</span>],</div>
<div class="line"><span class="lineno">  635</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4c19f168092d00e91bda7c7b22502c4" name="ac4c19f168092d00e91bda7c7b22502c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4c19f168092d00e91bda7c7b22502c4">&#9670;&#160;</a></span>test_ordinal_encoder_encoded_missing_value_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_encoded_missing_value_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>with_pandas</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check OrdinalEncoder errors when encoded_missing_value is used by
an known category.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1828</span><span class="keyword">def </span>test_ordinal_encoder_encoded_missing_value_error(with_pandas):</div>
<div class="line"><span class="lineno"> 1829</span>    <span class="stringliteral">&quot;&quot;&quot;Check OrdinalEncoder errors when encoded_missing_value is used by</span></div>
<div class="line"><span class="lineno"> 1830</span><span class="stringliteral">    an known category.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1831</span>    X = np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;dog&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>, np.nan]], dtype=object)</div>
<div class="line"><span class="lineno"> 1832</span> </div>
<div class="line"><span class="lineno"> 1833</span>    <span class="comment"># The 0-th feature has no missing values so it is not included in the list of</span></div>
<div class="line"><span class="lineno"> 1834</span>    <span class="comment"># features</span></div>
<div class="line"><span class="lineno"> 1835</span>    error_msg = (</div>
<div class="line"><span class="lineno"> 1836</span>        <span class="stringliteral">r&quot;encoded_missing_value \&zwj;(1\&zwj;) is already used to encode a known category &quot;</span></div>
<div class="line"><span class="lineno"> 1837</span>        <span class="stringliteral">r&quot;in features: &quot;</span></div>
<div class="line"><span class="lineno"> 1838</span>    )</div>
<div class="line"><span class="lineno"> 1839</span> </div>
<div class="line"><span class="lineno"> 1840</span>    <span class="keywordflow">if</span> with_pandas:</div>
<div class="line"><span class="lineno"> 1841</span>        pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1842</span>        X = pd.DataFrame(X, columns=[<span class="stringliteral">&quot;letter&quot;</span>, <span class="stringliteral">&quot;pet&quot;</span>])</div>
<div class="line"><span class="lineno"> 1843</span>        error_msg = error_msg + <span class="stringliteral">r&quot;\[&#39;pet&#39;\]&quot;</span></div>
<div class="line"><span class="lineno"> 1844</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1845</span>        error_msg = error_msg + <span class="stringliteral">r&quot;\[1\]&quot;</span></div>
<div class="line"><span class="lineno"> 1846</span> </div>
<div class="line"><span class="lineno"> 1847</span>    oe = OrdinalEncoder(encoded_missing_value=1)</div>
<div class="line"><span class="lineno"> 1848</span> </div>
<div class="line"><span class="lineno"> 1849</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=error_msg):</div>
<div class="line"><span class="lineno"> 1850</span>        oe.fit(X)</div>
<div class="line"><span class="lineno"> 1851</span> </div>
<div class="line"><span class="lineno"> 1852</span> </div>
<div class="line"><span class="lineno"> 1853</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1854</span>    <span class="stringliteral">&quot;X_train, X_test_trans_expected, X_roundtrip_expected&quot;</span>,</div>
<div class="line"><span class="lineno"> 1855</span>    [</div>
<div class="line"><span class="lineno"> 1856</span>        (</div>
<div class="line"><span class="lineno"> 1857</span>            <span class="comment"># missing value is not in training set</span></div>
<div class="line"><span class="lineno"> 1858</span>            <span class="comment"># inverse transform will considering encoded nan as unknown</span></div>
<div class="line"><span class="lineno"> 1859</span>            np.array([[<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;1&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno"> 1860</span>            [[0], [np.nan], [np.nan]],</div>
<div class="line"><span class="lineno"> 1861</span>            np.asarray([[<span class="stringliteral">&quot;1&quot;</span>], [<span class="keywordtype">None</span>], [<span class="keywordtype">None</span>]], dtype=object),</div>
<div class="line"><span class="lineno"> 1862</span>        ),</div>
<div class="line"><span class="lineno"> 1863</span>        (</div>
<div class="line"><span class="lineno"> 1864</span>            <span class="comment"># missing value in training set,</span></div>
<div class="line"><span class="lineno"> 1865</span>            <span class="comment"># inverse transform will considering encoded nan as missing</span></div>
<div class="line"><span class="lineno"> 1866</span>            np.array([[np.nan], [<span class="stringliteral">&quot;1&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno"> 1867</span>            [[0], [np.nan], [np.nan]],</div>
<div class="line"><span class="lineno"> 1868</span>            np.asarray([[<span class="stringliteral">&quot;1&quot;</span>], [np.nan], [np.nan]], dtype=object),</div>
<div class="line"><span class="lineno"> 1869</span>        ),</div>
<div class="line"><span class="lineno"> 1870</span>    ],</div>
<div class="line"><span class="lineno"> 1871</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="accba49afc81c47e4b13722e5d9cbab6a" name="accba49afc81c47e4b13722e5d9cbab6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accba49afc81c47e4b13722e5d9cbab6a">&#9670;&#160;</a></span>test_ordinal_encoder_features_names_out_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_features_names_out_pandas </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check feature names out is same as the input.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1785</span><span class="keyword">def </span>test_ordinal_encoder_features_names_out_pandas():</div>
<div class="line"><span class="lineno"> 1786</span>    <span class="stringliteral">&quot;&quot;&quot;Check feature names out is same as the input.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1787</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1788</span> </div>
<div class="line"><span class="lineno"> 1789</span>    names = [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>]</div>
<div class="line"><span class="lineno"> 1790</span>    X = pd.DataFrame([[1, 2, 3]], columns=names)</div>
<div class="line"><span class="lineno"> 1791</span>    enc = OrdinalEncoder().fit(X)</div>
<div class="line"><span class="lineno"> 1792</span> </div>
<div class="line"><span class="lineno"> 1793</span>    feature_names_out = enc.get_feature_names_out()</div>
<div class="line"><span class="lineno"> 1794</span>    assert_array_equal(names, feature_names_out)</div>
<div class="line"><span class="lineno"> 1795</span> </div>
<div class="line"><span class="lineno"> 1796</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a097c57a8d425d25c8d87ee860f9a3ced" name="a097c57a8d425d25c8d87ee860f9a3ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a097c57a8d425d25c8d87ee860f9a3ced">&#9670;&#160;</a></span>test_ordinal_encoder_fit_with_unseen_category()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_fit_with_unseen_category </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check OrdinalEncoder.fit works with unseen category when
`handle_unknown="use_encoded_value"`.
Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/19872
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1720</span><span class="keyword">def </span>test_ordinal_encoder_fit_with_unseen_category():</div>
<div class="line"><span class="lineno"> 1721</span>    <span class="stringliteral">&quot;&quot;&quot;Check OrdinalEncoder.fit works with unseen category when</span></div>
<div class="line"><span class="lineno"> 1722</span><span class="stringliteral">    `handle_unknown=&quot;use_encoded_value&quot;`.</span></div>
<div class="line"><span class="lineno"> 1723</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 1724</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/19872</span></div>
<div class="line"><span class="lineno"> 1725</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1726</span>    X = np.array([0, 0, 1, 0, 2, 5])[:, np.newaxis]</div>
<div class="line"><span class="lineno"> 1727</span>    oe = OrdinalEncoder(</div>
<div class="line"><span class="lineno"> 1728</span>        categories=[[-1, 0, 1]], handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>, unknown_value=-999</div>
<div class="line"><span class="lineno"> 1729</span>    )</div>
<div class="line"><span class="lineno"> 1730</span>    oe.fit(X)</div>
<div class="line"><span class="lineno"> 1731</span> </div>
<div class="line"><span class="lineno"> 1732</span>    oe = OrdinalEncoder(categories=[[-1, 0, 1]], handle_unknown=<span class="stringliteral">&quot;error&quot;</span>)</div>
<div class="line"><span class="lineno"> 1733</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;Found unknown categories&quot;</span>):</div>
<div class="line"><span class="lineno"> 1734</span>        oe.fit(X)</div>
<div class="line"><span class="lineno"> 1735</span> </div>
<div class="line"><span class="lineno"> 1736</span> </div>
<div class="line"><span class="lineno"> 1737</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1738</span>    <span class="stringliteral">&quot;X_train&quot;</span>,</div>
<div class="line"><span class="lineno"> 1739</span>    [</div>
<div class="line"><span class="lineno"> 1740</span>        [[<span class="stringliteral">&quot;AA&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>]],</div>
<div class="line"><span class="lineno"> 1741</span>        np.array([[<span class="stringliteral">&quot;AA&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>]], dtype=<span class="stringliteral">&quot;O&quot;</span>),</div>
<div class="line"><span class="lineno"> 1742</span>        np.array([[<span class="stringliteral">&quot;AA&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>]], dtype=<span class="stringliteral">&quot;U&quot;</span>),</div>
<div class="line"><span class="lineno"> 1743</span>    ],</div>
<div class="line"><span class="lineno"> 1744</span>)</div>
<div class="line"><span class="lineno"> 1745</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1746</span>    <span class="stringliteral">&quot;X_test&quot;</span>,</div>
<div class="line"><span class="lineno"> 1747</span>    [</div>
<div class="line"><span class="lineno"> 1748</span>        [[<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>]],</div>
<div class="line"><span class="lineno"> 1749</span>        np.array([[<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>]], dtype=<span class="stringliteral">&quot;O&quot;</span>),</div>
<div class="line"><span class="lineno"> 1750</span>        np.array([[<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>]], dtype=<span class="stringliteral">&quot;U&quot;</span>),</div>
<div class="line"><span class="lineno"> 1751</span>    ],</div>
<div class="line"><span class="lineno"> 1752</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a56bf79f6b7c7ba8d35c4eacb9e1d8d07" name="a56bf79f6b7c7ba8d35c4eacb9e1d8d07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56bf79f6b7c7ba8d35c4eacb9e1d8d07">&#9670;&#160;</a></span>test_ordinal_encoder_handle_missing_and_unknown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_handle_missing_and_unknown </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_X_trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_test</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test the interaction between missing values and handle_unknown</pre> <div class="fragment"><div class="line"><span class="lineno"> 1687</span><span class="keyword">def </span>test_ordinal_encoder_handle_missing_and_unknown(X, expected_X_trans, X_test):</div>
<div class="line"><span class="lineno"> 1688</span>    <span class="stringliteral">&quot;&quot;&quot;Test the interaction between missing values and handle_unknown&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1689</span> </div>
<div class="line"><span class="lineno"> 1690</span>    oe = OrdinalEncoder(handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>, unknown_value=-1)</div>
<div class="line"><span class="lineno"> 1691</span> </div>
<div class="line"><span class="lineno"> 1692</span>    X_trans = oe.fit_transform(X)</div>
<div class="line"><span class="lineno"> 1693</span>    assert_allclose(X_trans, expected_X_trans)</div>
<div class="line"><span class="lineno"> 1694</span> </div>
<div class="line"><span class="lineno"> 1695</span>    assert_allclose(oe.transform(X_test), [[-1.0]])</div>
<div class="line"><span class="lineno"> 1696</span> </div>
<div class="line"><span class="lineno"> 1697</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae369aaa69b70a05690221a98433dcdf6" name="ae369aaa69b70a05690221a98433dcdf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae369aaa69b70a05690221a98433dcdf6">&#9670;&#160;</a></span>test_ordinal_encoder_handle_unknown_string_dtypes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_handle_unknown_string_dtypes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_train</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_test</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Checks that `OrdinalEncoder` transforms string dtypes.
Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/19872
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1753</span><span class="keyword">def </span>test_ordinal_encoder_handle_unknown_string_dtypes(X_train, X_test):</div>
<div class="line"><span class="lineno"> 1754</span>    <span class="stringliteral">&quot;&quot;&quot;Checks that `OrdinalEncoder` transforms string dtypes.</span></div>
<div class="line"><span class="lineno"> 1755</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 1756</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/19872</span></div>
<div class="line"><span class="lineno"> 1757</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1758</span>    enc = OrdinalEncoder(handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>, unknown_value=-9)</div>
<div class="line"><span class="lineno"> 1759</span>    enc.fit(X_train)</div>
<div class="line"><span class="lineno"> 1760</span> </div>
<div class="line"><span class="lineno"> 1761</span>    X_trans = enc.transform(X_test)</div>
<div class="line"><span class="lineno"> 1762</span>    assert_allclose(X_trans, [[-9, 0]])</div>
<div class="line"><span class="lineno"> 1763</span> </div>
<div class="line"><span class="lineno"> 1764</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2ad92beb7c6c919a2576fca753e96a9" name="aa2ad92beb7c6c919a2576fca753e96a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ad92beb7c6c919a2576fca753e96a9">&#9670;&#160;</a></span>test_ordinal_encoder_handle_unknowns_nan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_handle_unknowns_nan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  698</span><span class="keyword">def </span>test_ordinal_encoder_handle_unknowns_nan():</div>
<div class="line"><span class="lineno">  699</span>    <span class="comment"># Make sure unknown_value=np.nan properly works</span></div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span>    enc = OrdinalEncoder(handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>, unknown_value=np.nan)</div>
<div class="line"><span class="lineno">  702</span> </div>
<div class="line"><span class="lineno">  703</span>    X_fit = np.array([[1], [2], [3]])</div>
<div class="line"><span class="lineno">  704</span>    enc.fit(X_fit)</div>
<div class="line"><span class="lineno">  705</span>    X_trans = enc.transform([[1], [2], [4]])</div>
<div class="line"><span class="lineno">  706</span>    assert_array_equal(X_trans, [[0], [1], [np.nan]])</div>
<div class="line"><span class="lineno">  707</span> </div>
<div class="line"><span class="lineno">  708</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e705ff92de48fb2911d2c128903302a" name="a6e705ff92de48fb2911d2c128903302a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e705ff92de48fb2911d2c128903302a">&#9670;&#160;</a></span>test_ordinal_encoder_handle_unknowns_nan_non_float_dtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_handle_unknowns_nan_non_float_dtype </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  709</span><span class="keyword">def </span>test_ordinal_encoder_handle_unknowns_nan_non_float_dtype():</div>
<div class="line"><span class="lineno">  710</span>    <span class="comment"># Make sure an error is raised when unknown_value=np.nan and the dtype</span></div>
<div class="line"><span class="lineno">  711</span>    <span class="comment"># isn&#39;t a float dtype</span></div>
<div class="line"><span class="lineno">  712</span>    enc = OrdinalEncoder(</div>
<div class="line"><span class="lineno">  713</span>        handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>, unknown_value=np.nan, dtype=int</div>
<div class="line"><span class="lineno">  714</span>    )</div>
<div class="line"><span class="lineno">  715</span> </div>
<div class="line"><span class="lineno">  716</span>    X_fit = np.array([[1], [2], [3]])</div>
<div class="line"><span class="lineno">  717</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;dtype parameter should be a float dtype&quot;</span>):</div>
<div class="line"><span class="lineno">  718</span>        enc.fit(X_fit)</div>
<div class="line"><span class="lineno">  719</span> </div>
<div class="line"><span class="lineno">  720</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a871cc29fa401168268cf14e6f7f4bd94" name="a871cc29fa401168268cf14e6f7f4bd94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a871cc29fa401168268cf14e6f7f4bd94">&#9670;&#160;</a></span>test_ordinal_encoder_handle_unknowns_numeric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_handle_unknowns_numeric </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  683</span><span class="keyword">def </span>test_ordinal_encoder_handle_unknowns_numeric(dtype):</div>
<div class="line"><span class="lineno">  684</span>    enc = OrdinalEncoder(handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>, unknown_value=-999)</div>
<div class="line"><span class="lineno">  685</span>    X_fit = np.array([[1, 7], [2, 8], [3, 9]], dtype=dtype)</div>
<div class="line"><span class="lineno">  686</span>    X_trans = np.array([[3, 12], [23, 8], [1, 7]], dtype=dtype)</div>
<div class="line"><span class="lineno">  687</span>    enc.fit(X_fit)</div>
<div class="line"><span class="lineno">  688</span> </div>
<div class="line"><span class="lineno">  689</span>    X_trans_enc = enc.transform(X_trans)</div>
<div class="line"><span class="lineno">  690</span>    exp = np.array([[2, -999], [-999, 1], [0, 0]], dtype=<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  691</span>    assert_array_equal(X_trans_enc, exp)</div>
<div class="line"><span class="lineno">  692</span> </div>
<div class="line"><span class="lineno">  693</span>    X_trans_inv = enc.inverse_transform(X_trans_enc)</div>
<div class="line"><span class="lineno">  694</span>    inv_exp = np.array([[3, <span class="keywordtype">None</span>], [<span class="keywordtype">None</span>, 8], [1, 7]], dtype=object)</div>
<div class="line"><span class="lineno">  695</span>    assert_array_equal(X_trans_inv, inv_exp)</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a75418b427317e8f05db52cfd4d56e53c" name="a75418b427317e8f05db52cfd4d56e53c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75418b427317e8f05db52cfd4d56e53c">&#9670;&#160;</a></span>test_ordinal_encoder_handle_unknowns_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_handle_unknowns_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  667</span><span class="keyword">def </span>test_ordinal_encoder_handle_unknowns_string():</div>
<div class="line"><span class="lineno">  668</span>    enc = OrdinalEncoder(handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>, unknown_value=-2)</div>
<div class="line"><span class="lineno">  669</span>    X_fit = np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>], [<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;z&quot;</span>]], dtype=object)</div>
<div class="line"><span class="lineno">  670</span>    X_trans = np.array([[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;xy&quot;</span>], [<span class="stringliteral">&quot;bla&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>]], dtype=object)</div>
<div class="line"><span class="lineno">  671</span>    enc.fit(X_fit)</div>
<div class="line"><span class="lineno">  672</span> </div>
<div class="line"><span class="lineno">  673</span>    X_trans_enc = enc.transform(X_trans)</div>
<div class="line"><span class="lineno">  674</span>    exp = np.array([[2, -2], [-2, 1], [0, 0]], dtype=<span class="stringliteral">&quot;int64&quot;</span>)</div>
<div class="line"><span class="lineno">  675</span>    assert_array_equal(X_trans_enc, exp)</div>
<div class="line"><span class="lineno">  676</span> </div>
<div class="line"><span class="lineno">  677</span>    X_trans_inv = enc.inverse_transform(X_trans_enc)</div>
<div class="line"><span class="lineno">  678</span>    inv_exp = np.array([[<span class="stringliteral">&quot;c&quot;</span>, <span class="keywordtype">None</span>], [<span class="keywordtype">None</span>, <span class="stringliteral">&quot;y&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>]], dtype=object)</div>
<div class="line"><span class="lineno">  679</span>    assert_array_equal(X_trans_inv, inv_exp)</div>
<div class="line"><span class="lineno">  680</span> </div>
<div class="line"><span class="lineno">  681</span> </div>
<div class="line"><span class="lineno">  682</span><span class="preprocessor">@pytest.mark.parametrize(&quot;dtype&quot;, [float, int])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42bc44ff6944cf087e1e6caced05bc47" name="a42bc44ff6944cf087e1e6caced05bc47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bc44ff6944cf087e1e6caced05bc47">&#9670;&#160;</a></span>test_ordinal_encoder_inverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_inverse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  653</span><span class="keyword">def </span>test_ordinal_encoder_inverse():</div>
<div class="line"><span class="lineno">  654</span>    X = [[<span class="stringliteral">&quot;abc&quot;</span>, 2, 55], [<span class="stringliteral">&quot;def&quot;</span>, 1, 55]]</div>
<div class="line"><span class="lineno">  655</span>    enc = OrdinalEncoder()</div>
<div class="line"><span class="lineno">  656</span>    X_tr = enc.fit_transform(X)</div>
<div class="line"><span class="lineno">  657</span>    exp = np.array(X, dtype=object)</div>
<div class="line"><span class="lineno">  658</span>    assert_array_equal(enc.inverse_transform(X_tr), exp)</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>    <span class="comment"># incorrect shape raises</span></div>
<div class="line"><span class="lineno">  661</span>    X_tr = np.array([[0, 1, 1, 2], [1, 0, 1, 0]])</div>
<div class="line"><span class="lineno">  662</span>    msg = re.escape(<span class="stringliteral">&quot;Shape of the passed X data is not correct&quot;</span>)</div>
<div class="line"><span class="lineno">  663</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  664</span>        enc.inverse_transform(X_tr)</div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2533589483728fb140d02e483a87f375" name="a2533589483728fb140d02e483a87f375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2533589483728fb140d02e483a87f375">&#9670;&#160;</a></span>test_ordinal_encoder_missing_value_support_pandas_categorical()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_missing_value_support_pandas_categorical </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_nan_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoded_missing_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check ordinal encoder is compatible with pandas.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1581</span>):</div>
<div class="line"><span class="lineno"> 1582</span>    <span class="stringliteral">&quot;&quot;&quot;Check ordinal encoder is compatible with pandas.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1583</span>    <span class="comment"># checks pandas dataframe with categorical features</span></div>
<div class="line"><span class="lineno"> 1584</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1585</span> </div>
<div class="line"><span class="lineno"> 1586</span>    pd_missing_value = pd.NA <span class="keywordflow">if</span> pd_nan_type == <span class="stringliteral">&quot;pd.NA&quot;</span> <span class="keywordflow">else</span> np.nan</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>    df = pd.DataFrame(</div>
<div class="line"><span class="lineno"> 1589</span>        {</div>
<div class="line"><span class="lineno"> 1590</span>            <span class="stringliteral">&quot;col1&quot;</span>: pd.Series([<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, pd_missing_value, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>], dtype=<span class="stringliteral">&quot;category&quot;</span>),</div>
<div class="line"><span class="lineno"> 1591</span>        }</div>
<div class="line"><span class="lineno"> 1592</span>    )</div>
<div class="line"><span class="lineno"> 1593</span> </div>
<div class="line"><span class="lineno"> 1594</span>    oe = OrdinalEncoder(encoded_missing_value=encoded_missing_value).fit(df)</div>
<div class="line"><span class="lineno"> 1595</span>    <span class="keyword">assert</span> len(oe.categories_) == 1</div>
<div class="line"><span class="lineno"> 1596</span>    assert_array_equal(oe.categories_[0][:3], [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>])</div>
<div class="line"><span class="lineno"> 1597</span>    <span class="keyword">assert</span> np.isnan(oe.categories_[0][-1])</div>
<div class="line"><span class="lineno"> 1598</span> </div>
<div class="line"><span class="lineno"> 1599</span>    df_trans = oe.transform(df)</div>
<div class="line"><span class="lineno"> 1600</span> </div>
<div class="line"><span class="lineno"> 1601</span>    assert_allclose(df_trans, [[2.0], [0.0], [encoded_missing_value], [1.0], [0.0]])</div>
<div class="line"><span class="lineno"> 1602</span> </div>
<div class="line"><span class="lineno"> 1603</span>    X_inverse = oe.inverse_transform(df_trans)</div>
<div class="line"><span class="lineno"> 1604</span>    <span class="keyword">assert</span> X_inverse.shape == (5, 1)</div>
<div class="line"><span class="lineno"> 1605</span>    assert_array_equal(X_inverse[:2, 0], [<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>])</div>
<div class="line"><span class="lineno"> 1606</span>    assert_array_equal(X_inverse[3:, 0], [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>])</div>
<div class="line"><span class="lineno"> 1607</span>    <span class="keyword">assert</span> np.isnan(X_inverse[2, 0])</div>
<div class="line"><span class="lineno"> 1608</span> </div>
<div class="line"><span class="lineno"> 1609</span> </div>
<div class="line"><span class="lineno"> 1610</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1611</span>    <span class="stringliteral">&quot;X, X2, cats, cat_dtype&quot;</span>,</div>
<div class="line"><span class="lineno"> 1612</span>    [</div>
<div class="line"><span class="lineno"> 1613</span>        (</div>
<div class="line"><span class="lineno"> 1614</span>            (</div>
<div class="line"><span class="lineno"> 1615</span>                np.array([[<span class="stringliteral">&quot;a&quot;</span>, np.nan]], dtype=object).T,</div>
<div class="line"><span class="lineno"> 1616</span>                np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno"> 1617</span>                [np.array([<span class="stringliteral">&quot;a&quot;</span>, np.nan, <span class="stringliteral">&quot;d&quot;</span>], dtype=object)],</div>
<div class="line"><span class="lineno"> 1618</span>                np.object_,</div>
<div class="line"><span class="lineno"> 1619</span>            )</div>
<div class="line"><span class="lineno"> 1620</span>        ),</div>
<div class="line"><span class="lineno"> 1621</span>        (</div>
<div class="line"><span class="lineno"> 1622</span>            (</div>
<div class="line"><span class="lineno"> 1623</span>                np.array([[<span class="stringliteral">&quot;a&quot;</span>, np.nan]], dtype=object).T,</div>
<div class="line"><span class="lineno"> 1624</span>                np.array([[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno"> 1625</span>                [np.array([<span class="stringliteral">&quot;a&quot;</span>, np.nan, <span class="stringliteral">&quot;d&quot;</span>], dtype=object)],</div>
<div class="line"><span class="lineno"> 1626</span>                np.object_,</div>
<div class="line"><span class="lineno"> 1627</span>            )</div>
<div class="line"><span class="lineno"> 1628</span>        ),</div>
<div class="line"><span class="lineno"> 1629</span>        (</div>
<div class="line"><span class="lineno"> 1630</span>            (</div>
<div class="line"><span class="lineno"> 1631</span>                np.array([[2.0, np.nan]], dtype=np.float64).T,</div>
<div class="line"><span class="lineno"> 1632</span>                np.array([[3.0]], dtype=np.float64).T,</div>
<div class="line"><span class="lineno"> 1633</span>                [np.array([2.0, 4.0, np.nan])],</div>
<div class="line"><span class="lineno"> 1634</span>                np.float64,</div>
<div class="line"><span class="lineno"> 1635</span>            )</div>
<div class="line"><span class="lineno"> 1636</span>        ),</div>
<div class="line"><span class="lineno"> 1637</span>    ],</div>
<div class="line"><span class="lineno"> 1638</span>    ids=[</div>
<div class="line"><span class="lineno"> 1639</span>        <span class="stringliteral">&quot;object-None-missing-value&quot;</span>,</div>
<div class="line"><span class="lineno"> 1640</span>        <span class="stringliteral">&quot;object-nan-missing_value&quot;</span>,</div>
<div class="line"><span class="lineno"> 1641</span>        <span class="stringliteral">&quot;numeric-missing-value&quot;</span>,</div>
<div class="line"><span class="lineno"> 1642</span>    ],</div>
<div class="line"><span class="lineno"> 1643</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="aacca2c158042e9d71fd3ff2611d91383" name="aacca2c158042e9d71fd3ff2611d91383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacca2c158042e9d71fd3ff2611d91383">&#9670;&#160;</a></span>test_ordinal_encoder_passthrough_missing_values_float()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_passthrough_missing_values_float </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoded_missing_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test ordinal encoder with nan on float dtypes.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1560</span><span class="keyword">def </span>test_ordinal_encoder_passthrough_missing_values_float(encoded_missing_value):</div>
<div class="line"><span class="lineno"> 1561</span>    <span class="stringliteral">&quot;&quot;&quot;Test ordinal encoder with nan on float dtypes.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1562</span> </div>
<div class="line"><span class="lineno"> 1563</span>    X = np.array([[np.nan, 3.0, 1.0, 3.0]], dtype=np.float64).T</div>
<div class="line"><span class="lineno"> 1564</span>    oe = OrdinalEncoder(encoded_missing_value=encoded_missing_value).fit(X)</div>
<div class="line"><span class="lineno"> 1565</span> </div>
<div class="line"><span class="lineno"> 1566</span>    <span class="keyword">assert</span> len(oe.categories_) == 1</div>
<div class="line"><span class="lineno"> 1567</span> </div>
<div class="line"><span class="lineno"> 1568</span>    assert_allclose(oe.categories_[0], [1.0, 3.0, np.nan])</div>
<div class="line"><span class="lineno"> 1569</span> </div>
<div class="line"><span class="lineno"> 1570</span>    X_trans = oe.transform(X)</div>
<div class="line"><span class="lineno"> 1571</span>    assert_allclose(X_trans, [[encoded_missing_value], [1.0], [0.0], [1.0]])</div>
<div class="line"><span class="lineno"> 1572</span> </div>
<div class="line"><span class="lineno"> 1573</span>    X_inverse = oe.inverse_transform(X_trans)</div>
<div class="line"><span class="lineno"> 1574</span>    assert_allclose(X_inverse, X)</div>
<div class="line"><span class="lineno"> 1575</span> </div>
<div class="line"><span class="lineno"> 1576</span> </div>
<div class="line"><span class="lineno"> 1577</span><span class="preprocessor">@pytest.mark.parametrize(&quot;pd_nan_type&quot;, [&quot;pd.NA&quot;, &quot;np.nan&quot;])</span></div>
<div class="line"><span class="lineno"> 1578</span><span class="preprocessor">@pytest.mark.parametrize(&quot;encoded_missing_value&quot;, [np.nan, -2])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c8d3c0d381761693feff6d00425cc43" name="a6c8d3c0d381761693feff6d00425cc43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c8d3c0d381761693feff6d00425cc43">&#9670;&#160;</a></span>test_ordinal_encoder_passthrough_missing_values_float_errors_dtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_passthrough_missing_values_float_errors_dtype </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test ordinal encoder with nan passthrough fails when dtype=np.int32.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1545</span><span class="keyword">def </span>test_ordinal_encoder_passthrough_missing_values_float_errors_dtype():</div>
<div class="line"><span class="lineno"> 1546</span>    <span class="stringliteral">&quot;&quot;&quot;Test ordinal encoder with nan passthrough fails when dtype=np.int32.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1547</span> </div>
<div class="line"><span class="lineno"> 1548</span>    X = np.array([[np.nan, 3.0, 1.0, 3.0]]).T</div>
<div class="line"><span class="lineno"> 1549</span>    oe = OrdinalEncoder(dtype=np.int32)</div>
<div class="line"><span class="lineno"> 1550</span> </div>
<div class="line"><span class="lineno"> 1551</span>    msg = (</div>
<div class="line"><span class="lineno"> 1552</span>        <span class="stringliteral">r&quot;There are missing values in features \[0\]. For OrdinalEncoder &quot;</span></div>
<div class="line"><span class="lineno"> 1553</span>        f<span class="stringliteral">&quot;to encode missing values with dtype: {np.int32}&quot;</span></div>
<div class="line"><span class="lineno"> 1554</span>    )</div>
<div class="line"><span class="lineno"> 1555</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno"> 1556</span>        oe.fit(X)</div>
<div class="line"><span class="lineno"> 1557</span> </div>
<div class="line"><span class="lineno"> 1558</span> </div>
<div class="line"><span class="lineno"> 1559</span><span class="preprocessor">@pytest.mark.parametrize(&quot;encoded_missing_value&quot;, [np.nan, -2])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae12c243e9a15eb220a9da4b02b2d3944" name="ae12c243e9a15eb220a9da4b02b2d3944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae12c243e9a15eb220a9da4b02b2d3944">&#9670;&#160;</a></span>test_ordinal_encoder_python_integer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_python_integer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that `OrdinalEncoder` accepts Python integers that are potentially
larger than 64 bits.
Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/20721
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1765</span><span class="keyword">def </span>test_ordinal_encoder_python_integer():</div>
<div class="line"><span class="lineno"> 1766</span>    <span class="stringliteral">&quot;&quot;&quot;Check that `OrdinalEncoder` accepts Python integers that are potentially</span></div>
<div class="line"><span class="lineno"> 1767</span><span class="stringliteral">    larger than 64 bits.</span></div>
<div class="line"><span class="lineno"> 1768</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 1769</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/20721</span></div>
<div class="line"><span class="lineno"> 1770</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1771</span>    X = np.array(</div>
<div class="line"><span class="lineno"> 1772</span>        [</div>
<div class="line"><span class="lineno"> 1773</span>            44253463435747313673,</div>
<div class="line"><span class="lineno"> 1774</span>            9867966753463435747313673,</div>
<div class="line"><span class="lineno"> 1775</span>            44253462342215747313673,</div>
<div class="line"><span class="lineno"> 1776</span>            442534634357764313673,</div>
<div class="line"><span class="lineno"> 1777</span>        ]</div>
<div class="line"><span class="lineno"> 1778</span>    ).reshape(-1, 1)</div>
<div class="line"><span class="lineno"> 1779</span>    encoder = OrdinalEncoder().fit(X)</div>
<div class="line"><span class="lineno"> 1780</span>    assert_array_equal(encoder.categories_, np.sort(X, axis=0).T)</div>
<div class="line"><span class="lineno"> 1781</span>    X_trans = encoder.transform(X)</div>
<div class="line"><span class="lineno"> 1782</span>    assert_array_equal(X_trans, [[0], [3], [2], [1]])</div>
<div class="line"><span class="lineno"> 1783</span> </div>
<div class="line"><span class="lineno"> 1784</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a213804f91f1382e80b25804f6240a8" name="a5a213804f91f1382e80b25804f6240a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a213804f91f1382e80b25804f6240a8">&#9670;&#160;</a></span>test_ordinal_encoder_raise_categories_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_raise_categories_shape </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  721</span><span class="keyword">def </span>test_ordinal_encoder_raise_categories_shape():</div>
<div class="line"><span class="lineno">  722</span> </div>
<div class="line"><span class="lineno">  723</span>    X = np.array([[<span class="stringliteral">&quot;Low&quot;</span>, <span class="stringliteral">&quot;Medium&quot;</span>, <span class="stringliteral">&quot;High&quot;</span>, <span class="stringliteral">&quot;Medium&quot;</span>, <span class="stringliteral">&quot;Low&quot;</span>]], dtype=object).T</div>
<div class="line"><span class="lineno">  724</span>    cats = [<span class="stringliteral">&quot;Low&quot;</span>, <span class="stringliteral">&quot;Medium&quot;</span>, <span class="stringliteral">&quot;High&quot;</span>]</div>
<div class="line"><span class="lineno">  725</span>    enc = OrdinalEncoder(categories=cats)</div>
<div class="line"><span class="lineno">  726</span>    msg = <span class="stringliteral">&quot;Shape mismatch: if categories is an array,&quot;</span></div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  728</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  729</span>        enc.fit(X)</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afd13fa83812b1acec87d2d8a40fe82f1" name="afd13fa83812b1acec87d2d8a40fe82f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd13fa83812b1acec87d2d8a40fe82f1">&#9670;&#160;</a></span>test_ordinal_encoder_sparse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_sparse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check that we raise proper error with sparse input in OrdinalEncoder.
Non-regression test for:
https://github.com/scikit-learn/scikit-learn/issues/19878
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1698</span><span class="keyword">def </span>test_ordinal_encoder_sparse():</div>
<div class="line"><span class="lineno"> 1699</span>    <span class="stringliteral">&quot;&quot;&quot;Check that we raise proper error with sparse input in OrdinalEncoder.</span></div>
<div class="line"><span class="lineno"> 1700</span><span class="stringliteral">    Non-regression test for:</span></div>
<div class="line"><span class="lineno"> 1701</span><span class="stringliteral">    https://github.com/scikit-learn/scikit-learn/issues/19878</span></div>
<div class="line"><span class="lineno"> 1702</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1703</span>    X = np.array([[3, 2, 1], [0, 1, 1]])</div>
<div class="line"><span class="lineno"> 1704</span>    X_sparse = sparse.csr_matrix(X)</div>
<div class="line"><span class="lineno"> 1705</span> </div>
<div class="line"><span class="lineno"> 1706</span>    encoder = OrdinalEncoder()</div>
<div class="line"><span class="lineno"> 1707</span> </div>
<div class="line"><span class="lineno"> 1708</span>    err_msg = <span class="stringliteral">&quot;A sparse matrix was passed, but dense data is required&quot;</span></div>
<div class="line"><span class="lineno"> 1709</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1710</span>        encoder.fit(X_sparse)</div>
<div class="line"><span class="lineno"> 1711</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1712</span>        encoder.fit_transform(X_sparse)</div>
<div class="line"><span class="lineno"> 1713</span> </div>
<div class="line"><span class="lineno"> 1714</span>    X_trans = encoder.fit_transform(X)</div>
<div class="line"><span class="lineno"> 1715</span>    X_trans_sparse = sparse.csr_matrix(X_trans)</div>
<div class="line"><span class="lineno"> 1716</span>    <span class="keyword">with</span> pytest.raises(TypeError, match=err_msg):</div>
<div class="line"><span class="lineno"> 1717</span>        encoder.inverse_transform(X_trans_sparse)</div>
<div class="line"><span class="lineno"> 1718</span> </div>
<div class="line"><span class="lineno"> 1719</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a69870167b6e93b1a570b0c4e20928140" name="a69870167b6e93b1a570b0c4e20928140"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69870167b6e93b1a570b0c4e20928140">&#9670;&#160;</a></span>test_ordinal_encoder_specified_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_specified_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cat_dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  636</span><span class="keyword">def </span>test_ordinal_encoder_specified_categories(X, X2, cats, cat_dtype):</div>
<div class="line"><span class="lineno">  637</span>    enc = OrdinalEncoder(categories=cats)</div>
<div class="line"><span class="lineno">  638</span>    exp = np.array([[0.0], [1.0]])</div>
<div class="line"><span class="lineno">  639</span>    assert_array_equal(enc.fit_transform(X), exp)</div>
<div class="line"><span class="lineno">  640</span>    <span class="keyword">assert</span> list(enc.categories[0]) == list(cats[0])</div>
<div class="line"><span class="lineno">  641</span>    <span class="keyword">assert</span> enc.categories_[0].tolist() == list(cats[0])</div>
<div class="line"><span class="lineno">  642</span>    <span class="comment"># manually specified categories should have same dtype as</span></div>
<div class="line"><span class="lineno">  643</span>    <span class="comment"># the data when coerced from lists</span></div>
<div class="line"><span class="lineno">  644</span>    <span class="keyword">assert</span> enc.categories_[0].dtype == cat_dtype</div>
<div class="line"><span class="lineno">  645</span> </div>
<div class="line"><span class="lineno">  646</span>    <span class="comment"># when specifying categories manually, unknown categories should already</span></div>
<div class="line"><span class="lineno">  647</span>    <span class="comment"># raise when fitting</span></div>
<div class="line"><span class="lineno">  648</span>    enc = OrdinalEncoder(categories=cats)</div>
<div class="line"><span class="lineno">  649</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;Found unknown categories&quot;</span>):</div>
<div class="line"><span class="lineno">  650</span>        enc.fit(X2)</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1aa5a4cab512a02dfa2d0895a239d711" name="a1aa5a4cab512a02dfa2d0895a239d711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1aa5a4cab512a02dfa2d0895a239d711">&#9670;&#160;</a></span>test_ordinal_encoder_specified_categories_missing_passthrough()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_specified_categories_missing_passthrough </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cat_dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test ordinal encoder for specified categories.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1646</span>):</div>
<div class="line"><span class="lineno"> 1647</span>    <span class="stringliteral">&quot;&quot;&quot;Test ordinal encoder for specified categories.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1648</span>    oe = OrdinalEncoder(categories=cats)</div>
<div class="line"><span class="lineno"> 1649</span>    exp = np.array([[0.0], [np.nan]])</div>
<div class="line"><span class="lineno"> 1650</span>    assert_array_equal(oe.fit_transform(X), exp)</div>
<div class="line"><span class="lineno"> 1651</span>    <span class="comment"># manually specified categories should have same dtype as</span></div>
<div class="line"><span class="lineno"> 1652</span>    <span class="comment"># the data when coerced from lists</span></div>
<div class="line"><span class="lineno"> 1653</span>    <span class="keyword">assert</span> oe.categories_[0].dtype == cat_dtype</div>
<div class="line"><span class="lineno"> 1654</span> </div>
<div class="line"><span class="lineno"> 1655</span>    <span class="comment"># when specifying categories manually, unknown categories should already</span></div>
<div class="line"><span class="lineno"> 1656</span>    <span class="comment"># raise when fitting</span></div>
<div class="line"><span class="lineno"> 1657</span>    oe = OrdinalEncoder(categories=cats)</div>
<div class="line"><span class="lineno"> 1658</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;Found unknown categories&quot;</span>):</div>
<div class="line"><span class="lineno"> 1659</span>        oe.fit(X2)</div>
<div class="line"><span class="lineno"> 1660</span> </div>
<div class="line"><span class="lineno"> 1661</span> </div>
<div class="line"><span class="lineno"> 1662</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno"> 1663</span>    <span class="stringliteral">&quot;X, expected_X_trans, X_test&quot;</span>,</div>
<div class="line"><span class="lineno"> 1664</span>    [</div>
<div class="line"><span class="lineno"> 1665</span>        (</div>
<div class="line"><span class="lineno"> 1666</span>            np.array([[1.0, np.nan, 3.0]]).T,</div>
<div class="line"><span class="lineno"> 1667</span>            np.array([[0.0, np.nan, 1.0]]).T,</div>
<div class="line"><span class="lineno"> 1668</span>            np.array([[4.0]]),</div>
<div class="line"><span class="lineno"> 1669</span>        ),</div>
<div class="line"><span class="lineno"> 1670</span>        (</div>
<div class="line"><span class="lineno"> 1671</span>            np.array([[1.0, 4.0, 3.0]]).T,</div>
<div class="line"><span class="lineno"> 1672</span>            np.array([[0.0, 2.0, 1.0]]).T,</div>
<div class="line"><span class="lineno"> 1673</span>            np.array([[np.nan]]),</div>
<div class="line"><span class="lineno"> 1674</span>        ),</div>
<div class="line"><span class="lineno"> 1675</span>        (</div>
<div class="line"><span class="lineno"> 1676</span>            np.array([[<span class="stringliteral">&quot;c&quot;</span>, np.nan, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno"> 1677</span>            np.array([[1.0, np.nan, 0.0]]).T,</div>
<div class="line"><span class="lineno"> 1678</span>            np.array([[<span class="stringliteral">&quot;d&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno"> 1679</span>        ),</div>
<div class="line"><span class="lineno"> 1680</span>        (</div>
<div class="line"><span class="lineno"> 1681</span>            np.array([[<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>]], dtype=object).T,</div>
<div class="line"><span class="lineno"> 1682</span>            np.array([[2.0, 0.0, 1.0]]).T,</div>
<div class="line"><span class="lineno"> 1683</span>            np.array([[np.nan]], dtype=object),</div>
<div class="line"><span class="lineno"> 1684</span>        ),</div>
<div class="line"><span class="lineno"> 1685</span>    ],</div>
<div class="line"><span class="lineno"> 1686</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac601ed0ed022cc735d2267b3972cf2cb" name="ac601ed0ed022cc735d2267b3972cf2cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac601ed0ed022cc735d2267b3972cf2cb">&#9670;&#160;</a></span>test_ordinal_encoder_unknown_missing_interaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_unknown_missing_interaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check interactions between encode_unknown and missing value encoding.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1797</span><span class="keyword">def </span>test_ordinal_encoder_unknown_missing_interaction():</div>
<div class="line"><span class="lineno"> 1798</span>    <span class="stringliteral">&quot;&quot;&quot;Check interactions between encode_unknown and missing value encoding.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1799</span> </div>
<div class="line"><span class="lineno"> 1800</span>    X = np.array([[<span class="stringliteral">&quot;a&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>], [np.nan]], dtype=object)</div>
<div class="line"><span class="lineno"> 1801</span> </div>
<div class="line"><span class="lineno"> 1802</span>    oe = OrdinalEncoder(</div>
<div class="line"><span class="lineno"> 1803</span>        handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>,</div>
<div class="line"><span class="lineno"> 1804</span>        unknown_value=np.nan,</div>
<div class="line"><span class="lineno"> 1805</span>        encoded_missing_value=-3,</div>
<div class="line"><span class="lineno"> 1806</span>    ).fit(X)</div>
<div class="line"><span class="lineno"> 1807</span> </div>
<div class="line"><span class="lineno"> 1808</span>    X_trans = oe.transform(X)</div>
<div class="line"><span class="lineno"> 1809</span>    assert_allclose(X_trans, [[0], [1], [-3]])</div>
<div class="line"><span class="lineno"> 1810</span> </div>
<div class="line"><span class="lineno"> 1811</span>    <span class="comment"># &quot;c&quot; is unknown and is mapped to np.nan</span></div>
<div class="line"><span class="lineno"> 1812</span>    <span class="comment"># &quot;None&quot; is a missing value and is set to -3</span></div>
<div class="line"><span class="lineno"> 1813</span>    X_test = np.array([[<span class="stringliteral">&quot;c&quot;</span>], [np.nan]], dtype=object)</div>
<div class="line"><span class="lineno"> 1814</span>    X_test_trans = oe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1815</span>    assert_allclose(X_test_trans, [[np.nan], [-3]])</div>
<div class="line"><span class="lineno"> 1816</span> </div>
<div class="line"><span class="lineno"> 1817</span>    <span class="comment"># Non-regression test for #24082</span></div>
<div class="line"><span class="lineno"> 1818</span>    X_roundtrip = oe.inverse_transform(X_test_trans)</div>
<div class="line"><span class="lineno"> 1819</span> </div>
<div class="line"><span class="lineno"> 1820</span>    <span class="comment"># np.nan is unknown so it maps to None</span></div>
<div class="line"><span class="lineno"> 1821</span>    <span class="keyword">assert</span> X_roundtrip[0][0] <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1822</span> </div>
<div class="line"><span class="lineno"> 1823</span>    <span class="comment"># -3 is the encoded missing value so it maps back to nan</span></div>
<div class="line"><span class="lineno"> 1824</span>    <span class="keyword">assert</span> np.isnan(X_roundtrip[1][0])</div>
<div class="line"><span class="lineno"> 1825</span> </div>
<div class="line"><span class="lineno"> 1826</span> </div>
<div class="line"><span class="lineno"> 1827</span><span class="preprocessor">@pytest.mark.parametrize(&quot;with_pandas&quot;, [True, False])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0aadefe9f5e91fddac4c77cc78097569" name="a0aadefe9f5e91fddac4c77cc78097569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0aadefe9f5e91fddac4c77cc78097569">&#9670;&#160;</a></span>test_ordinal_encoder_unknown_missing_interaction_both_nan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_encoder_unknown_missing_interaction_both_nan </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_train</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_test_trans_expected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X_roundtrip_expected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check transform when unknown_value and encoded_missing_value is nan.

Non-regression test for #24082.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1874</span>):</div>
<div class="line"><span class="lineno"> 1875</span>    <span class="stringliteral">&quot;&quot;&quot;Check transform when unknown_value and encoded_missing_value is nan.</span></div>
<div class="line"><span class="lineno"> 1876</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1877</span><span class="stringliteral">    Non-regression test for #24082.</span></div>
<div class="line"><span class="lineno"> 1878</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1879</span>    oe = OrdinalEncoder(</div>
<div class="line"><span class="lineno"> 1880</span>        handle_unknown=<span class="stringliteral">&quot;use_encoded_value&quot;</span>,</div>
<div class="line"><span class="lineno"> 1881</span>        unknown_value=np.nan,</div>
<div class="line"><span class="lineno"> 1882</span>        encoded_missing_value=np.nan,</div>
<div class="line"><span class="lineno"> 1883</span>    ).fit(X_train)</div>
<div class="line"><span class="lineno"> 1884</span> </div>
<div class="line"><span class="lineno"> 1885</span>    X_test = np.array([[<span class="stringliteral">&quot;1&quot;</span>], [np.nan], [<span class="stringliteral">&quot;b&quot;</span>]])</div>
<div class="line"><span class="lineno"> 1886</span>    X_test_trans = oe.transform(X_test)</div>
<div class="line"><span class="lineno"> 1887</span> </div>
<div class="line"><span class="lineno"> 1888</span>    <span class="comment"># both nan and unknown are encoded as nan</span></div>
<div class="line"><span class="lineno"> 1889</span>    assert_allclose(X_test_trans, X_test_trans_expected)</div>
<div class="line"><span class="lineno"> 1890</span>    X_roundtrip = oe.inverse_transform(X_test_trans)</div>
<div class="line"><span class="lineno"> 1891</span> </div>
<div class="line"><span class="lineno"> 1892</span>    n_samples = X_roundtrip_expected.shape[0]</div>
<div class="line"><span class="lineno"> 1893</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_samples):</div>
<div class="line"><span class="lineno"> 1894</span>        expected_val = X_roundtrip_expected[i, 0]</div>
<div class="line"><span class="lineno"> 1895</span>        val = X_roundtrip[i, 0]</div>
<div class="line"><span class="lineno"> 1896</span> </div>
<div class="line"><span class="lineno"> 1897</span>        <span class="keywordflow">if</span> expected_val <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1898</span>            <span class="keyword">assert</span> val <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1899</span>        <span class="keywordflow">elif</span> is_scalar_nan(expected_val):</div>
<div class="line"><span class="lineno"> 1900</span>            <span class="keyword">assert</span> np.isnan(val)</div>
<div class="line"><span class="lineno"> 1901</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1902</span>            <span class="keyword">assert</span> val == expected_val</div>
<div class="line"><span class="lineno"> 1903</span> </div>
<div class="line"><span class="lineno"> 1904</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4779ea7450213f7a2dc844b430098df" name="ae4779ea7450213f7a2dc844b430098df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4779ea7450213f7a2dc844b430098df">&#9670;&#160;</a></span>test_ordinal_set_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_ordinal_set_output </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check OrdinalEncoder works with set_output.</pre> <div class="fragment"><div class="line"><span class="lineno"> 1928</span><span class="keyword">def </span>test_ordinal_set_output():</div>
<div class="line"><span class="lineno"> 1929</span>    <span class="stringliteral">&quot;&quot;&quot;Check OrdinalEncoder works with set_output.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1930</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1931</span> </div>
<div class="line"><span class="lineno"> 1932</span>    X_df = pd.DataFrame({<span class="stringliteral">&quot;A&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>], <span class="stringliteral">&quot;B&quot;</span>: [1, 2]})</div>
<div class="line"><span class="lineno"> 1933</span> </div>
<div class="line"><span class="lineno"> 1934</span>    ord_default = OrdinalEncoder().set_output(transform=<span class="stringliteral">&quot;default&quot;</span>)</div>
<div class="line"><span class="lineno"> 1935</span>    ord_pandas = OrdinalEncoder().set_output(transform=<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno"> 1936</span> </div>
<div class="line"><span class="lineno"> 1937</span>    X_default = ord_default.fit_transform(X_df)</div>
<div class="line"><span class="lineno"> 1938</span>    X_pandas = ord_pandas.fit_transform(X_df)</div>
<div class="line"><span class="lineno"> 1939</span> </div>
<div class="line"><span class="lineno"> 1940</span>    assert_allclose(X_pandas.to_numpy(), X_default)</div>
<div class="line"><span class="lineno"> 1941</span>    assert_array_equal(ord_pandas.get_feature_names_out(), X_pandas.columns)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a630bfcf0cf349075c4d2d6dc04194d30" name="a630bfcf0cf349075c4d2d6dc04194d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a630bfcf0cf349075c4d2d6dc04194d30">&#9670;&#160;</a></span>test_X_is_not_1D()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_X_is_not_1D </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  361</span><span class="keyword">def </span>test_X_is_not_1D(X, method):</div>
<div class="line"><span class="lineno">  362</span>    oh = OneHotEncoder()</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    msg = <span class="stringliteral">&quot;Expected 2D array, got 1D array instead&quot;</span></div>
<div class="line"><span class="lineno">  365</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  366</span>        getattr(oh, method)(X)</div>
<div class="line"><span class="lineno">  367</span> </div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span><span class="preprocessor">@pytest.mark.parametrize(&quot;method&quot;, [&quot;fit&quot;, &quot;fit_transform&quot;])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c4951c5a232daa532a26644f307560f" name="a9c4951c5a232daa532a26644f307560f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c4951c5a232daa532a26644f307560f">&#9670;&#160;</a></span>test_X_is_not_1D_pandas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.preprocessing.tests.test_encoders.test_X_is_not_1D_pandas </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  370</span><span class="keyword">def </span>test_X_is_not_1D_pandas(method):</div>
<div class="line"><span class="lineno">  371</span>    pd = pytest.importorskip(<span class="stringliteral">&quot;pandas&quot;</span>)</div>
<div class="line"><span class="lineno">  372</span>    X = pd.Series([6, 3, 4, 6])</div>
<div class="line"><span class="lineno">  373</span>    oh = OneHotEncoder()</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    msg = <span class="stringliteral">&quot;Expected 2D array, got 1D array instead&quot;</span></div>
<div class="line"><span class="lineno">  376</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  377</span>        getattr(oh, method)(X)</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  381</span>    <span class="stringliteral">&quot;X, cat_exp, cat_dtype&quot;</span>,</div>
<div class="line"><span class="lineno">  382</span>    [</div>
<div class="line"><span class="lineno">  383</span>        ([[<span class="stringliteral">&quot;abc&quot;</span>, 55], [<span class="stringliteral">&quot;def&quot;</span>, 55]], [[<span class="stringliteral">&quot;abc&quot;</span>, <span class="stringliteral">&quot;def&quot;</span>], [55]], np.object_),</div>
<div class="line"><span class="lineno">  384</span>        (np.array([[1, 2], [3, 2]]), [[1, 3], [2]], np.integer),</div>
<div class="line"><span class="lineno">  385</span>        (</div>
<div class="line"><span class="lineno">  386</span>            np.array([[<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>]], dtype=object),</div>
<div class="line"><span class="lineno">  387</span>            [[<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>], [<span class="stringliteral">&quot;cat&quot;</span>]],</div>
<div class="line"><span class="lineno">  388</span>            np.object_,</div>
<div class="line"><span class="lineno">  389</span>        ),</div>
<div class="line"><span class="lineno">  390</span>        (np.array([[<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>], [<span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>]]), [[<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>], [<span class="stringliteral">&quot;cat&quot;</span>]], np.str_),</div>
<div class="line"><span class="lineno">  391</span>        (np.array([[1, 2], [np.nan, 2]]), [[1, np.nan], [2]], np.float_),</div>
<div class="line"><span class="lineno">  392</span>        (</div>
<div class="line"><span class="lineno">  393</span>            np.array([[<span class="stringliteral">&quot;A&quot;</span>, np.nan], [<span class="keywordtype">None</span>, np.nan]], dtype=object),</div>
<div class="line"><span class="lineno">  394</span>            [[<span class="stringliteral">&quot;A&quot;</span>, <span class="keywordtype">None</span>], [np.nan]],</div>
<div class="line"><span class="lineno">  395</span>            np.object_,</div>
<div class="line"><span class="lineno">  396</span>        ),</div>
<div class="line"><span class="lineno">  397</span>        (</div>
<div class="line"><span class="lineno">  398</span>            np.array([[<span class="stringliteral">&quot;A&quot;</span>, float(<span class="stringliteral">&quot;nan&quot;</span>)], [<span class="keywordtype">None</span>, float(<span class="stringliteral">&quot;nan&quot;</span>)]], dtype=object),</div>
<div class="line"><span class="lineno">  399</span>            [[<span class="stringliteral">&quot;A&quot;</span>, <span class="keywordtype">None</span>], [float(<span class="stringliteral">&quot;nan&quot;</span>)]],</div>
<div class="line"><span class="lineno">  400</span>            np.object_,</div>
<div class="line"><span class="lineno">  401</span>        ),</div>
<div class="line"><span class="lineno">  402</span>    ],</div>
<div class="line"><span class="lineno">  403</span>    ids=[</div>
<div class="line"><span class="lineno">  404</span>        <span class="stringliteral">&quot;mixed&quot;</span>,</div>
<div class="line"><span class="lineno">  405</span>        <span class="stringliteral">&quot;numeric&quot;</span>,</div>
<div class="line"><span class="lineno">  406</span>        <span class="stringliteral">&quot;object&quot;</span>,</div>
<div class="line"><span class="lineno">  407</span>        <span class="stringliteral">&quot;string&quot;</span>,</div>
<div class="line"><span class="lineno">  408</span>        <span class="stringliteral">&quot;missing-float&quot;</span>,</div>
<div class="line"><span class="lineno">  409</span>        <span class="stringliteral">&quot;missing-np.nan-object&quot;</span>,</div>
<div class="line"><span class="lineno">  410</span>        <span class="stringliteral">&quot;missing-float-nan-object&quot;</span>,</div>
<div class="line"><span class="lineno">  411</span>    ],</div>
<div class="line"><span class="lineno">  412</span>)</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
