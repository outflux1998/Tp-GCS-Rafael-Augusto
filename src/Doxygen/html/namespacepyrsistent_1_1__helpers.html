<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: pyrsistent._helpers Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepyrsistent.html">pyrsistent</a></li><li class="navelem"><a class="el" href="namespacepyrsistent_1_1__helpers.html">_helpers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pyrsistent._helpers Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abe8098a99ded175652edca450d274243" id="r_abe8098a99ded175652edca450d274243"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepyrsistent_1_1__helpers.html#abe8098a99ded175652edca450d274243">freeze</a> (o, strict=True)</td></tr>
<tr class="separator:abe8098a99ded175652edca450d274243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6647d9c58f08c559c4b17b6fb917686" id="r_ab6647d9c58f08c559c4b17b6fb917686"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepyrsistent_1_1__helpers.html#ab6647d9c58f08c559c4b17b6fb917686">thaw</a> (o, strict=True)</td></tr>
<tr class="separator:ab6647d9c58f08c559c4b17b6fb917686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536ff87a206d470552c006b39da58cc9" id="r_a536ff87a206d470552c006b39da58cc9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepyrsistent_1_1__helpers.html#a536ff87a206d470552c006b39da58cc9">mutant</a> (fn)</td></tr>
<tr class="separator:a536ff87a206d470552c006b39da58cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="abe8098a99ded175652edca450d274243" name="abe8098a99ded175652edca450d274243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe8098a99ded175652edca450d274243">&#9670;&#160;</a></span>freeze()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pyrsistent._helpers.freeze </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>strict</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Recursively convert simple Python containers into pyrsistent versions
of those containers.

- list is converted to pvector, recursively
- dict is converted to pmap, recursively on values (but not keys)
- set is converted to pset, but not recursively
- tuple is converted to tuple, recursively.

If strict == True (default):

- freeze is called on elements of pvectors
- freeze is called on values of pmaps

Sets and dict keys are not recursively frozen because they do not contain
mutable data by convention. The main exception to this rule is that
dict keys and set elements are often instances of mutable objects that
support hash-by-id, which this function can't convert anyway.

&gt;&gt;&gt; freeze(set([1, 2]))
pset([1, 2])
&gt;&gt;&gt; freeze([1, {'a': 3}])
pvector([1, pmap({'a': 3})])
&gt;&gt;&gt; freeze((1, []))
(1, pvector([]))
</pre> <div class="fragment"><div class="line"><span class="lineno">    6</span><span class="keyword">def </span>freeze(o, strict=True):</div>
<div class="line"><span class="lineno">    7</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">    8</span><span class="stringliteral">    Recursively convert simple Python containers into pyrsistent versions</span></div>
<div class="line"><span class="lineno">    9</span><span class="stringliteral">    of those containers.</span></div>
<div class="line"><span class="lineno">   10</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   11</span><span class="stringliteral">    - list is converted to pvector, recursively</span></div>
<div class="line"><span class="lineno">   12</span><span class="stringliteral">    - dict is converted to pmap, recursively on values (but not keys)</span></div>
<div class="line"><span class="lineno">   13</span><span class="stringliteral">    - set is converted to pset, but not recursively</span></div>
<div class="line"><span class="lineno">   14</span><span class="stringliteral">    - tuple is converted to tuple, recursively.</span></div>
<div class="line"><span class="lineno">   15</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   16</span><span class="stringliteral">    If strict == True (default):</span></div>
<div class="line"><span class="lineno">   17</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   18</span><span class="stringliteral">    - freeze is called on elements of pvectors</span></div>
<div class="line"><span class="lineno">   19</span><span class="stringliteral">    - freeze is called on values of pmaps</span></div>
<div class="line"><span class="lineno">   20</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   21</span><span class="stringliteral">    Sets and dict keys are not recursively frozen because they do not contain</span></div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">    mutable data by convention. The main exception to this rule is that</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">    dict keys and set elements are often instances of mutable objects that</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">    support hash-by-id, which this function can&#39;t convert anyway.</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">    &gt;&gt;&gt; freeze(set([1, 2]))</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">    pset([1, 2])</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    &gt;&gt;&gt; freeze([1, {&#39;a&#39;: 3}])</span></div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral">    pvector([1, pmap({&#39;a&#39;: 3})])</span></div>
<div class="line"><span class="lineno">   30</span><span class="stringliteral">    &gt;&gt;&gt; freeze((1, []))</span></div>
<div class="line"><span class="lineno">   31</span><span class="stringliteral">    (1, pvector([]))</span></div>
<div class="line"><span class="lineno">   32</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   33</span>    typ = type(o)</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordflow">if</span> typ <span class="keywordflow">is</span> dict <span class="keywordflow">or</span> (strict <span class="keywordflow">and</span> isinstance(o, PMap)):</div>
<div class="line"><span class="lineno">   35</span>        <span class="keywordflow">return</span> pmap({k: freeze(v, strict) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> o.items()})</div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordflow">if</span> typ <span class="keywordflow">is</span> list <span class="keywordflow">or</span> (strict <span class="keywordflow">and</span> isinstance(o, PVector)):</div>
<div class="line"><span class="lineno">   37</span>        curried_freeze = <span class="keyword">lambda</span> x: freeze(x, strict)</div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">return</span> pvector(map(curried_freeze, o))</div>
<div class="line"><span class="lineno">   39</span>    <span class="keywordflow">if</span> typ <span class="keywordflow">is</span> tuple:</div>
<div class="line"><span class="lineno">   40</span>        curried_freeze = <span class="keyword">lambda</span> x: freeze(x, strict)</div>
<div class="line"><span class="lineno">   41</span>        <span class="keywordflow">return</span> tuple(map(curried_freeze, o))</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">if</span> typ <span class="keywordflow">is</span> set:</div>
<div class="line"><span class="lineno">   43</span>        <span class="comment"># impossible to have anything that needs freezing inside a set or pset</span></div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">return</span> pset(o)</div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">return</span> o</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a536ff87a206d470552c006b39da58cc9" name="a536ff87a206d470552c006b39da58cc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536ff87a206d470552c006b39da58cc9">&#9670;&#160;</a></span>mutant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pyrsistent._helpers.mutant </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convenience decorator to isolate mutation to within the decorated function (with respect
to the input arguments).

All arguments to the decorated function will be frozen so that they are guaranteed not to change.
The return value is also frozen.
</pre> <div class="fragment"><div class="line"><span class="lineno">   85</span><span class="keyword">def </span>mutant(fn):</div>
<div class="line"><span class="lineno">   86</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    Convenience decorator to isolate mutation to within the decorated function (with respect</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">    to the input arguments).</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">    All arguments to the decorated function will be frozen so that they are guaranteed not to change.</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">    The return value is also frozen.</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   93</span>    <span class="preprocessor">@wraps(fn)</span></div>
<div class="line"><span class="lineno">   94</span>    <span class="keyword">def </span>inner_f(*args, **kwargs):</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">return</span> freeze(fn(*[freeze(e) <span class="keywordflow">for</span> e <span class="keywordflow">in</span> args], **dict(freeze(item) <span class="keywordflow">for</span> item <span class="keywordflow">in</span> kwargs.items())))</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">return</span> inner_f</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6647d9c58f08c559c4b17b6fb917686" name="ab6647d9c58f08c559c4b17b6fb917686"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6647d9c58f08c559c4b17b6fb917686">&#9670;&#160;</a></span>thaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pyrsistent._helpers.thaw </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>strict</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Recursively convert pyrsistent containers into simple Python containers.

- pvector is converted to list, recursively
- pmap is converted to dict, recursively on values (but not keys)
- pset is converted to set, but not recursively
- tuple is converted to tuple, recursively.

If strict == True (the default):

- thaw is called on elements of lists
- thaw is called on values in dicts

&gt;&gt;&gt; from pyrsistent import s, m, v
&gt;&gt;&gt; thaw(s(1, 2))
{1, 2}
&gt;&gt;&gt; thaw(v(1, m(a=3)))
[1, {'a': 3}]
&gt;&gt;&gt; thaw((1, v()))
(1, [])
</pre> <div class="fragment"><div class="line"><span class="lineno">   48</span><span class="keyword">def </span>thaw(o, strict=True):</div>
<div class="line"><span class="lineno">   49</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">    Recursively convert pyrsistent containers into simple Python containers.</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    - pvector is converted to list, recursively</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    - pmap is converted to dict, recursively on values (but not keys)</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    - pset is converted to set, but not recursively</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">    - tuple is converted to tuple, recursively.</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    If strict == True (the default):</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">    - thaw is called on elements of lists</span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">    - thaw is called on values in dicts</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    &gt;&gt;&gt; from pyrsistent import s, m, v</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">    &gt;&gt;&gt; thaw(s(1, 2))</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">    {1, 2}</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">    &gt;&gt;&gt; thaw(v(1, m(a=3)))</span></div>
<div class="line"><span class="lineno">   66</span><span class="stringliteral">    [1, {&#39;a&#39;: 3}]</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">    &gt;&gt;&gt; thaw((1, v()))</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    (1, [])</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   70</span>    typ = type(o)</div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">if</span> isinstance(o, PVector) <span class="keywordflow">or</span> (strict <span class="keywordflow">and</span> typ <span class="keywordflow">is</span> list):</div>
<div class="line"><span class="lineno">   72</span>        curried_thaw = <span class="keyword">lambda</span> x: thaw(x, strict)</div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">return</span> list(map(curried_thaw, o))</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span> isinstance(o, PMap) <span class="keywordflow">or</span> (strict <span class="keywordflow">and</span> typ <span class="keywordflow">is</span> dict):</div>
<div class="line"><span class="lineno">   75</span>        <span class="keywordflow">return</span> {k: thaw(v, strict) <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> o.items()}</div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">if</span> typ <span class="keywordflow">is</span> tuple:</div>
<div class="line"><span class="lineno">   77</span>        curried_thaw = <span class="keyword">lambda</span> x: thaw(x, strict)</div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">return</span> tuple(map(curried_thaw, o))</div>
<div class="line"><span class="lineno">   79</span>    <span class="keywordflow">if</span> isinstance(o, PSet):</div>
<div class="line"><span class="lineno">   80</span>        <span class="comment"># impossible to thaw inside psets or sets</span></div>
<div class="line"><span class="lineno">   81</span>        <span class="keywordflow">return</span> set(o)</div>
<div class="line"><span class="lineno">   82</span>    <span class="keywordflow">return</span> o</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
