<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: numpy.core.tests.test_numeric.TestTypes Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenumpy.html">numpy</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core.html">core</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core_1_1tests_1_1test__numeric.html">test_numeric</a></li><li class="navelem"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html">TestTypes</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">numpy.core.tests.test_numeric.TestTypes Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af1a959014c03750b5045690e8a4c21bb" id="r_af1a959014c03750b5045690e8a4c21bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#af1a959014c03750b5045690e8a4c21bb">check_promotion_cases</a> (self, promote_func)</td></tr>
<tr class="separator:af1a959014c03750b5045690e8a4c21bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaffb9954080d7f9e3a284985a5c3f48" id="r_abaffb9954080d7f9e3a284985a5c3f48"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#abaffb9954080d7f9e3a284985a5c3f48">test_coercion</a> (self)</td></tr>
<tr class="separator:abaffb9954080d7f9e3a284985a5c3f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c9c88a75a0283ad5265cfcb8b355aa" id="r_a08c9c88a75a0283ad5265cfcb8b355aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a08c9c88a75a0283ad5265cfcb8b355aa">test_result_type</a> (self)</td></tr>
<tr class="separator:a08c9c88a75a0283ad5265cfcb8b355aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5862e44f414aaf68f4ab72a8a527fd98" id="r_a5862e44f414aaf68f4ab72a8a527fd98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a5862e44f414aaf68f4ab72a8a527fd98">test_promote_types_endian</a> (self)</td></tr>
<tr class="separator:a5862e44f414aaf68f4ab72a8a527fd98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb533d505676778944b282480980edf2" id="r_aeb533d505676778944b282480980edf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#aeb533d505676778944b282480980edf2">test_can_cast_and_promote_usertypes</a> (self)</td></tr>
<tr class="separator:aeb533d505676778944b282480980edf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea3e9a347bcc7f315350b5aa4bd5b2a7" id="r_aea3e9a347bcc7f315350b5aa4bd5b2a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#aea3e9a347bcc7f315350b5aa4bd5b2a7">test_promote_types_strings</a> (self, swap, string_dtype)</td></tr>
<tr class="separator:aea3e9a347bcc7f315350b5aa4bd5b2a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd6a84190279cade2f4bffdbe700e52" id="r_a1fd6a84190279cade2f4bffdbe700e52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a1fd6a84190279cade2f4bffdbe700e52">test_invalid_void_promotion</a> (self, dtype1, dtype2)</td></tr>
<tr class="separator:a1fd6a84190279cade2f4bffdbe700e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53117c27b6e376eea3f70101b1aa89f7" id="r_a53117c27b6e376eea3f70101b1aa89f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a53117c27b6e376eea3f70101b1aa89f7">test_valid_void_promotion</a> (self, dtype1, dtype2)</td></tr>
<tr class="separator:a53117c27b6e376eea3f70101b1aa89f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99a85307966a7965f0bd264acc96241" id="r_ab99a85307966a7965f0bd264acc96241"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#ab99a85307966a7965f0bd264acc96241">test_promote_identical_types_metadata</a> (self, dtype)</td></tr>
<tr class="separator:ab99a85307966a7965f0bd264acc96241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a837211eaed3752a1a31e6d02a16d6374" id="r_a837211eaed3752a1a31e6d02a16d6374"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a837211eaed3752a1a31e6d02a16d6374">test_promote_types_metadata</a> (self, dtype1, dtype2)</td></tr>
<tr class="separator:a837211eaed3752a1a31e6d02a16d6374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7defbd520d08e5f952b2a3ce6b3b45fe" id="r_a7defbd520d08e5f952b2a3ce6b3b45fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a7defbd520d08e5f952b2a3ce6b3b45fe">test_can_cast</a> (self)</td></tr>
<tr class="separator:a7defbd520d08e5f952b2a3ce6b3b45fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa90e08277c8afffda377cec67246448" id="r_aaa90e08277c8afffda377cec67246448"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#aaa90e08277c8afffda377cec67246448">test_can_cast_simple_to_structured</a> (self)</td></tr>
<tr class="separator:aaa90e08277c8afffda377cec67246448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1eb51f8864a09f4b918d17b39b4c2e" id="r_a2a1eb51f8864a09f4b918d17b39b4c2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a2a1eb51f8864a09f4b918d17b39b4c2e">test_can_cast_structured_to_simple</a> (self)</td></tr>
<tr class="separator:a2a1eb51f8864a09f4b918d17b39b4c2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc17bb4b3607c1849d8e672441f4e08" id="r_a2bc17bb4b3607c1849d8e672441f4e08"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__numeric_1_1_test_types.html#a2bc17bb4b3607c1849d8e672441f4e08">test_can_cast_values</a> (self)</td></tr>
<tr class="separator:a2bc17bb4b3607c1849d8e672441f4e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af1a959014c03750b5045690e8a4c21bb" name="af1a959014c03750b5045690e8a4c21bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a959014c03750b5045690e8a4c21bb">&#9670;&#160;</a></span>check_promotion_cases()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.check_promotion_cases </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>promote_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  724</span>    <span class="keyword">def </span>check_promotion_cases(self, promote_func):</div>
<div class="line"><span class="lineno">  725</span>        <span class="comment"># tests that the scalars get coerced correctly.</span></div>
<div class="line"><span class="lineno">  726</span>        b = np.bool_(0)</div>
<div class="line"><span class="lineno">  727</span>        i8, i16, i32, i64 = np.int8(0), np.int16(0), np.int32(0), np.int64(0)</div>
<div class="line"><span class="lineno">  728</span>        u8, u16, u32, u64 = np.uint8(0), np.uint16(0), np.uint32(0), np.uint64(0)</div>
<div class="line"><span class="lineno">  729</span>        f32, f64, fld = np.float32(0), np.float64(0), np.longdouble(0)</div>
<div class="line"><span class="lineno">  730</span>        c64, c128, cld = np.complex64(0), np.complex128(0), np.clongdouble(0)</div>
<div class="line"><span class="lineno">  731</span> </div>
<div class="line"><span class="lineno">  732</span>        <span class="comment"># coercion within the same kind</span></div>
<div class="line"><span class="lineno">  733</span>        assert_equal(promote_func(i8, i16), np.dtype(np.int16))</div>
<div class="line"><span class="lineno">  734</span>        assert_equal(promote_func(i32, i8), np.dtype(np.int32))</div>
<div class="line"><span class="lineno">  735</span>        assert_equal(promote_func(i16, i64), np.dtype(np.int64))</div>
<div class="line"><span class="lineno">  736</span>        assert_equal(promote_func(u8, u32), np.dtype(np.uint32))</div>
<div class="line"><span class="lineno">  737</span>        assert_equal(promote_func(f32, f64), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  738</span>        assert_equal(promote_func(fld, f32), np.dtype(np.longdouble))</div>
<div class="line"><span class="lineno">  739</span>        assert_equal(promote_func(f64, fld), np.dtype(np.longdouble))</div>
<div class="line"><span class="lineno">  740</span>        assert_equal(promote_func(c128, c64), np.dtype(np.complex128))</div>
<div class="line"><span class="lineno">  741</span>        assert_equal(promote_func(cld, c128), np.dtype(np.clongdouble))</div>
<div class="line"><span class="lineno">  742</span>        assert_equal(promote_func(c64, fld), np.dtype(np.clongdouble))</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>        <span class="comment"># coercion between kinds</span></div>
<div class="line"><span class="lineno">  745</span>        assert_equal(promote_func(b, i32), np.dtype(np.int32))</div>
<div class="line"><span class="lineno">  746</span>        assert_equal(promote_func(b, u8), np.dtype(np.uint8))</div>
<div class="line"><span class="lineno">  747</span>        assert_equal(promote_func(i8, u8), np.dtype(np.int16))</div>
<div class="line"><span class="lineno">  748</span>        assert_equal(promote_func(u8, i32), np.dtype(np.int32))</div>
<div class="line"><span class="lineno">  749</span>        assert_equal(promote_func(i64, u32), np.dtype(np.int64))</div>
<div class="line"><span class="lineno">  750</span>        assert_equal(promote_func(u64, i32), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  751</span>        assert_equal(promote_func(i32, f32), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  752</span>        assert_equal(promote_func(i64, f32), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  753</span>        assert_equal(promote_func(f32, i16), np.dtype(np.float32))</div>
<div class="line"><span class="lineno">  754</span>        assert_equal(promote_func(f32, u32), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  755</span>        assert_equal(promote_func(f32, c64), np.dtype(np.complex64))</div>
<div class="line"><span class="lineno">  756</span>        assert_equal(promote_func(c128, f32), np.dtype(np.complex128))</div>
<div class="line"><span class="lineno">  757</span>        assert_equal(promote_func(cld, f64), np.dtype(np.clongdouble))</div>
<div class="line"><span class="lineno">  758</span> </div>
<div class="line"><span class="lineno">  759</span>        <span class="comment"># coercion between scalars and 1-D arrays</span></div>
<div class="line"><span class="lineno">  760</span>        assert_equal(promote_func(np.array([b]), i8), np.dtype(np.int8))</div>
<div class="line"><span class="lineno">  761</span>        assert_equal(promote_func(np.array([b]), u8), np.dtype(np.uint8))</div>
<div class="line"><span class="lineno">  762</span>        assert_equal(promote_func(np.array([b]), i32), np.dtype(np.int32))</div>
<div class="line"><span class="lineno">  763</span>        assert_equal(promote_func(np.array([b]), u32), np.dtype(np.uint32))</div>
<div class="line"><span class="lineno">  764</span>        assert_equal(promote_func(np.array([i8]), i64), np.dtype(np.int8))</div>
<div class="line"><span class="lineno">  765</span>        assert_equal(promote_func(u64, np.array([i32])), np.dtype(np.int32))</div>
<div class="line"><span class="lineno">  766</span>        assert_equal(promote_func(i64, np.array([u32])), np.dtype(np.uint32))</div>
<div class="line"><span class="lineno">  767</span>        assert_equal(promote_func(np.int32(-1), np.array([u64])),</div>
<div class="line"><span class="lineno">  768</span>                     np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  769</span>        assert_equal(promote_func(f64, np.array([f32])), np.dtype(np.float32))</div>
<div class="line"><span class="lineno">  770</span>        assert_equal(promote_func(fld, np.array([f32])), np.dtype(np.float32))</div>
<div class="line"><span class="lineno">  771</span>        assert_equal(promote_func(np.array([f64]), fld), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  772</span>        assert_equal(promote_func(fld, np.array([c64])),</div>
<div class="line"><span class="lineno">  773</span>                     np.dtype(np.complex64))</div>
<div class="line"><span class="lineno">  774</span>        assert_equal(promote_func(c64, np.array([f64])),</div>
<div class="line"><span class="lineno">  775</span>                     np.dtype(np.complex128))</div>
<div class="line"><span class="lineno">  776</span>        assert_equal(promote_func(np.complex64(3j), np.array([f64])),</div>
<div class="line"><span class="lineno">  777</span>                     np.dtype(np.complex128))</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>        <span class="comment"># coercion between scalars and 1-D arrays, where</span></div>
<div class="line"><span class="lineno">  780</span>        <span class="comment"># the scalar has greater kind than the array</span></div>
<div class="line"><span class="lineno">  781</span>        assert_equal(promote_func(np.array([b]), f64), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  782</span>        assert_equal(promote_func(np.array([b]), i64), np.dtype(np.int64))</div>
<div class="line"><span class="lineno">  783</span>        assert_equal(promote_func(np.array([b]), u64), np.dtype(np.uint64))</div>
<div class="line"><span class="lineno">  784</span>        assert_equal(promote_func(np.array([i8]), f64), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  785</span>        assert_equal(promote_func(np.array([u16]), f64), np.dtype(np.float64))</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span>        <span class="comment"># uint and int are treated as the same &quot;kind&quot; for</span></div>
<div class="line"><span class="lineno">  788</span>        <span class="comment"># the purposes of array-scalar promotion.</span></div>
<div class="line"><span class="lineno">  789</span>        assert_equal(promote_func(np.array([u16]), i32), np.dtype(np.uint16))</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>        <span class="comment"># float and complex are treated as the same &quot;kind&quot; for</span></div>
<div class="line"><span class="lineno">  792</span>        <span class="comment"># the purposes of array-scalar promotion, so that you can do</span></div>
<div class="line"><span class="lineno">  793</span>        <span class="comment"># (0j + float32array) to get a complex64 array instead of</span></div>
<div class="line"><span class="lineno">  794</span>        <span class="comment"># a complex128 array.</span></div>
<div class="line"><span class="lineno">  795</span>        assert_equal(promote_func(np.array([f32]), c128),</div>
<div class="line"><span class="lineno">  796</span>                     np.dtype(np.complex64))</div>
<div class="line"><span class="lineno">  797</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7defbd520d08e5f952b2a3ce6b3b45fe" name="a7defbd520d08e5f952b2a3ce6b3b45fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7defbd520d08e5f952b2a3ce6b3b45fe">&#9670;&#160;</a></span>test_can_cast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_can_cast </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1039</span>    <span class="keyword">def </span>test_can_cast(self):</div>
<div class="line"><span class="lineno"> 1040</span>        assert_(np.can_cast(np.int32, np.int64))</div>
<div class="line"><span class="lineno"> 1041</span>        assert_(np.can_cast(np.float64, complex))</div>
<div class="line"><span class="lineno"> 1042</span>        assert_(<span class="keywordflow">not</span> np.can_cast(complex, float))</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>))</div>
<div class="line"><span class="lineno"> 1045</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;f4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1046</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;S11&#39;</span>))</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;no&#39;</span>))</div>
<div class="line"><span class="lineno"> 1049</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>, <span class="stringliteral">&#39;no&#39;</span>))</div>
<div class="line"><span class="lineno"> 1050</span> </div>
<div class="line"><span class="lineno"> 1051</span>        assert_(np.can_cast(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>, <span class="stringliteral">&#39;equiv&#39;</span>))</div>
<div class="line"><span class="lineno"> 1052</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;&lt;i4&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>, <span class="stringliteral">&#39;equiv&#39;</span>))</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span>        assert_(np.can_cast(<span class="stringliteral">&#39;&lt;i4&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>, <span class="stringliteral">&#39;safe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1055</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;i4&#39;</span>, <span class="stringliteral">&#39;safe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>        assert_(np.can_cast(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;i4&#39;</span>, <span class="stringliteral">&#39;same_kind&#39;</span>))</div>
<div class="line"><span class="lineno"> 1058</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;u4&#39;</span>, <span class="stringliteral">&#39;same_kind&#39;</span>))</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>        assert_(np.can_cast(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;u4&#39;</span>, <span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1061</span> </div>
<div class="line"><span class="lineno"> 1062</span>        assert_(np.can_cast(<span class="stringliteral">&#39;bool&#39;</span>, <span class="stringliteral">&#39;S5&#39;</span>))</div>
<div class="line"><span class="lineno"> 1063</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;bool&#39;</span>, <span class="stringliteral">&#39;S4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1064</span> </div>
<div class="line"><span class="lineno"> 1065</span>        assert_(np.can_cast(<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;S4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1066</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;S3&#39;</span>))</div>
<div class="line"><span class="lineno"> 1067</span> </div>
<div class="line"><span class="lineno"> 1068</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u1&#39;</span>, <span class="stringliteral">&#39;S3&#39;</span>))</div>
<div class="line"><span class="lineno"> 1069</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u1&#39;</span>, <span class="stringliteral">&#39;S2&#39;</span>))</div>
<div class="line"><span class="lineno"> 1070</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u2&#39;</span>, <span class="stringliteral">&#39;S5&#39;</span>))</div>
<div class="line"><span class="lineno"> 1071</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u2&#39;</span>, <span class="stringliteral">&#39;S4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1072</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u4&#39;</span>, <span class="stringliteral">&#39;S10&#39;</span>))</div>
<div class="line"><span class="lineno"> 1073</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u4&#39;</span>, <span class="stringliteral">&#39;S9&#39;</span>))</div>
<div class="line"><span class="lineno"> 1074</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u8&#39;</span>, <span class="stringliteral">&#39;S20&#39;</span>))</div>
<div class="line"><span class="lineno"> 1075</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u8&#39;</span>, <span class="stringliteral">&#39;S19&#39;</span>))</div>
<div class="line"><span class="lineno"> 1076</span> </div>
<div class="line"><span class="lineno"> 1077</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i1&#39;</span>, <span class="stringliteral">&#39;S4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1078</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i1&#39;</span>, <span class="stringliteral">&#39;S3&#39;</span>))</div>
<div class="line"><span class="lineno"> 1079</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, <span class="stringliteral">&#39;S6&#39;</span>))</div>
<div class="line"><span class="lineno"> 1080</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, <span class="stringliteral">&#39;S5&#39;</span>))</div>
<div class="line"><span class="lineno"> 1081</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;S11&#39;</span>))</div>
<div class="line"><span class="lineno"> 1082</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;S10&#39;</span>))</div>
<div class="line"><span class="lineno"> 1083</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;S21&#39;</span>))</div>
<div class="line"><span class="lineno"> 1084</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;S20&#39;</span>))</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>        assert_(np.can_cast(<span class="stringliteral">&#39;bool&#39;</span>, <span class="stringliteral">&#39;S5&#39;</span>))</div>
<div class="line"><span class="lineno"> 1087</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;bool&#39;</span>, <span class="stringliteral">&#39;S4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1088</span> </div>
<div class="line"><span class="lineno"> 1089</span>        assert_(np.can_cast(<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;U4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1090</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;U3&#39;</span>))</div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u1&#39;</span>, <span class="stringliteral">&#39;U3&#39;</span>))</div>
<div class="line"><span class="lineno"> 1093</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u1&#39;</span>, <span class="stringliteral">&#39;U2&#39;</span>))</div>
<div class="line"><span class="lineno"> 1094</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u2&#39;</span>, <span class="stringliteral">&#39;U5&#39;</span>))</div>
<div class="line"><span class="lineno"> 1095</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u2&#39;</span>, <span class="stringliteral">&#39;U4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1096</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u4&#39;</span>, <span class="stringliteral">&#39;U10&#39;</span>))</div>
<div class="line"><span class="lineno"> 1097</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u4&#39;</span>, <span class="stringliteral">&#39;U9&#39;</span>))</div>
<div class="line"><span class="lineno"> 1098</span>        assert_(np.can_cast(<span class="stringliteral">&#39;u8&#39;</span>, <span class="stringliteral">&#39;U20&#39;</span>))</div>
<div class="line"><span class="lineno"> 1099</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;u8&#39;</span>, <span class="stringliteral">&#39;U19&#39;</span>))</div>
<div class="line"><span class="lineno"> 1100</span> </div>
<div class="line"><span class="lineno"> 1101</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i1&#39;</span>, <span class="stringliteral">&#39;U4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1102</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i1&#39;</span>, <span class="stringliteral">&#39;U3&#39;</span>))</div>
<div class="line"><span class="lineno"> 1103</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, <span class="stringliteral">&#39;U6&#39;</span>))</div>
<div class="line"><span class="lineno"> 1104</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, <span class="stringliteral">&#39;U5&#39;</span>))</div>
<div class="line"><span class="lineno"> 1105</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;U11&#39;</span>))</div>
<div class="line"><span class="lineno"> 1106</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;U10&#39;</span>))</div>
<div class="line"><span class="lineno"> 1107</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;U21&#39;</span>))</div>
<div class="line"><span class="lineno"> 1108</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i8&#39;</span>, <span class="stringliteral">&#39;U20&#39;</span>))</div>
<div class="line"><span class="lineno"> 1109</span> </div>
<div class="line"><span class="lineno"> 1110</span>        assert_raises(TypeError, np.can_cast, <span class="stringliteral">&#39;i4&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1111</span>        assert_raises(TypeError, np.can_cast, <span class="keywordtype">None</span>, <span class="stringliteral">&#39;i4&#39;</span>)</div>
<div class="line"><span class="lineno"> 1112</span> </div>
<div class="line"><span class="lineno"> 1113</span>        <span class="comment"># Also test keyword arguments</span></div>
<div class="line"><span class="lineno"> 1114</span>        assert_(np.can_cast(from_=np.int32, to=np.int64))</div>
<div class="line"><span class="lineno"> 1115</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb533d505676778944b282480980edf2" name="aeb533d505676778944b282480980edf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb533d505676778944b282480980edf2">&#9670;&#160;</a></span>test_can_cast_and_promote_usertypes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_can_cast_and_promote_usertypes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  878</span>    <span class="keyword">def </span>test_can_cast_and_promote_usertypes(self):</div>
<div class="line"><span class="lineno">  879</span>        <span class="comment"># The rational type defines safe casting for signed integers,</span></div>
<div class="line"><span class="lineno">  880</span>        <span class="comment"># boolean. Rational itself *does* cast safely to double.</span></div>
<div class="line"><span class="lineno">  881</span>        <span class="comment"># (rational does not actually cast to all signed integers, e.g.</span></div>
<div class="line"><span class="lineno">  882</span>        <span class="comment"># int64 can be both long and longlong and it registers only the first)</span></div>
<div class="line"><span class="lineno">  883</span>        valid_types = [<span class="stringliteral">&quot;int8&quot;</span>, <span class="stringliteral">&quot;int16&quot;</span>, <span class="stringliteral">&quot;int32&quot;</span>, <span class="stringliteral">&quot;int64&quot;</span>, <span class="stringliteral">&quot;bool&quot;</span>]</div>
<div class="line"><span class="lineno">  884</span>        invalid_types = <span class="stringliteral">&quot;BHILQP&quot;</span> + <span class="stringliteral">&quot;FDG&quot;</span> + <span class="stringliteral">&quot;mM&quot;</span> + <span class="stringliteral">&quot;f&quot;</span> + <span class="stringliteral">&quot;V&quot;</span></div>
<div class="line"><span class="lineno">  885</span> </div>
<div class="line"><span class="lineno">  886</span>        rational_dt = np.dtype(rational)</div>
<div class="line"><span class="lineno">  887</span>        <span class="keywordflow">for</span> numpy_dtype <span class="keywordflow">in</span> valid_types:</div>
<div class="line"><span class="lineno">  888</span>            numpy_dtype = np.dtype(numpy_dtype)</div>
<div class="line"><span class="lineno">  889</span>            <span class="keyword">assert</span> np.can_cast(numpy_dtype, rational_dt)</div>
<div class="line"><span class="lineno">  890</span>            <span class="keyword">assert</span> np.promote_types(numpy_dtype, rational_dt) <span class="keywordflow">is</span> rational_dt</div>
<div class="line"><span class="lineno">  891</span> </div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordflow">for</span> numpy_dtype <span class="keywordflow">in</span> invalid_types:</div>
<div class="line"><span class="lineno">  893</span>            numpy_dtype = np.dtype(numpy_dtype)</div>
<div class="line"><span class="lineno">  894</span>            <span class="keyword">assert</span> <span class="keywordflow">not</span> np.can_cast(numpy_dtype, rational_dt)</div>
<div class="line"><span class="lineno">  895</span>            <span class="keyword">with</span> pytest.raises(TypeError):</div>
<div class="line"><span class="lineno">  896</span>                np.promote_types(numpy_dtype, rational_dt)</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>        double_dt = np.dtype(<span class="stringliteral">&quot;double&quot;</span>)</div>
<div class="line"><span class="lineno">  899</span>        <span class="keyword">assert</span> np.can_cast(rational_dt, double_dt)</div>
<div class="line"><span class="lineno">  900</span>        <span class="keyword">assert</span> np.promote_types(double_dt, rational_dt) <span class="keywordflow">is</span> double_dt</div>
<div class="line"><span class="lineno">  901</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa90e08277c8afffda377cec67246448" name="aaa90e08277c8afffda377cec67246448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa90e08277c8afffda377cec67246448">&#9670;&#160;</a></span>test_can_cast_simple_to_structured()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_can_cast_simple_to_structured </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1116</span>    <span class="keyword">def </span>test_can_cast_simple_to_structured(self):</div>
<div class="line"><span class="lineno"> 1117</span>        <span class="comment"># Non-structured can only be cast to structured in &#39;unsafe&#39; mode.</span></div>
<div class="line"><span class="lineno"> 1118</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;i4,i4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1119</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;i4,i2&#39;</span>))</div>
<div class="line"><span class="lineno"> 1120</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;i4,i4&#39;</span>, casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1121</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i4&#39;</span>, <span class="stringliteral">&#39;i4,i2&#39;</span>, casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1122</span>        <span class="comment"># Even if there is just a single field which is OK.</span></div>
<div class="line"><span class="lineno"> 1123</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)]))</div>
<div class="line"><span class="lineno"> 1124</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)], casting=<span class="stringliteral">&#39;same_kind&#39;</span>))</div>
<div class="line"><span class="lineno"> 1125</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)], casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1126</span>        <span class="comment"># It should be the same for recursive structured or subarrays.</span></div>
<div class="line"><span class="lineno"> 1127</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4,i4&#39;</span>)]))</div>
<div class="line"><span class="lineno"> 1128</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4,i4&#39;</span>)], casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1129</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;(2,3)i4&#39;</span>)]))</div>
<div class="line"><span class="lineno"> 1130</span>        assert_(np.can_cast(<span class="stringliteral">&#39;i2&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;(2,3)i4&#39;</span>)], casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1131</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a1eb51f8864a09f4b918d17b39b4c2e" name="a2a1eb51f8864a09f4b918d17b39b4c2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a1eb51f8864a09f4b918d17b39b4c2e">&#9670;&#160;</a></span>test_can_cast_structured_to_simple()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_can_cast_structured_to_simple </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1132</span>    <span class="keyword">def </span>test_can_cast_structured_to_simple(self):</div>
<div class="line"><span class="lineno"> 1133</span>        <span class="comment"># Need unsafe casting for structured to simple.</span></div>
<div class="line"><span class="lineno"> 1134</span>        assert_(<span class="keywordflow">not</span> np.can_cast([(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)], <span class="stringliteral">&#39;i4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1135</span>        assert_(np.can_cast([(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)], <span class="stringliteral">&#39;i4&#39;</span>, casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1136</span>        assert_(np.can_cast([(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)], <span class="stringliteral">&#39;i2&#39;</span>, casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1137</span>        <span class="comment"># Since it is unclear what is being cast, multiple fields to</span></div>
<div class="line"><span class="lineno"> 1138</span>        <span class="comment"># single should not work even for unsafe casting.</span></div>
<div class="line"><span class="lineno"> 1139</span>        assert_(<span class="keywordflow">not</span> np.can_cast(<span class="stringliteral">&#39;i4,i4&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>, casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1140</span>        <span class="comment"># But a single field inside a single field is OK.</span></div>
<div class="line"><span class="lineno"> 1141</span>        assert_(<span class="keywordflow">not</span> np.can_cast([(<span class="stringliteral">&#39;f1&#39;</span>, [(<span class="stringliteral">&#39;x&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)])], <span class="stringliteral">&#39;i4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1142</span>        assert_(np.can_cast([(<span class="stringliteral">&#39;f1&#39;</span>, [(<span class="stringliteral">&#39;x&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)])], <span class="stringliteral">&#39;i4&#39;</span>, casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1143</span>        <span class="comment"># And a subarray is fine too - it will just take the first element</span></div>
<div class="line"><span class="lineno"> 1144</span>        <span class="comment"># (arguably not very consistently; might also take the first field).</span></div>
<div class="line"><span class="lineno"> 1145</span>        assert_(<span class="keywordflow">not</span> np.can_cast([(<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;(3,)i4&#39;</span>)], <span class="stringliteral">&#39;i4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1146</span>        assert_(np.can_cast([(<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;(3,)i4&#39;</span>)], <span class="stringliteral">&#39;i4&#39;</span>, casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1147</span>        <span class="comment"># But a structured subarray with multiple fields should fail.</span></div>
<div class="line"><span class="lineno"> 1148</span>        assert_(<span class="keywordflow">not</span> np.can_cast([(<span class="stringliteral">&#39;f0&#39;</span>, (<span class="stringliteral">&#39;i4,i4&#39;</span>), (2,))], <span class="stringliteral">&#39;i4&#39;</span>,</div>
<div class="line"><span class="lineno"> 1149</span>                                casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1150</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bc17bb4b3607c1849d8e672441f4e08" name="a2bc17bb4b3607c1849d8e672441f4e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bc17bb4b3607c1849d8e672441f4e08">&#9670;&#160;</a></span>test_can_cast_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_can_cast_values </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1151</span>    <span class="keyword">def </span>test_can_cast_values(self):</div>
<div class="line"><span class="lineno"> 1152</span>        <span class="comment"># gh-5917</span></div>
<div class="line"><span class="lineno"> 1153</span>        <span class="keywordflow">for</span> dt <span class="keywordflow">in</span> np.sctypes[<span class="stringliteral">&#39;int&#39;</span>] + np.sctypes[<span class="stringliteral">&#39;uint&#39;</span>]:</div>
<div class="line"><span class="lineno"> 1154</span>            ii = np.iinfo(dt)</div>
<div class="line"><span class="lineno"> 1155</span>            assert_(np.can_cast(ii.min, dt))</div>
<div class="line"><span class="lineno"> 1156</span>            assert_(np.can_cast(ii.max, dt))</div>
<div class="line"><span class="lineno"> 1157</span>            assert_(<span class="keywordflow">not</span> np.can_cast(ii.min - 1, dt))</div>
<div class="line"><span class="lineno"> 1158</span>            assert_(<span class="keywordflow">not</span> np.can_cast(ii.max + 1, dt))</div>
<div class="line"><span class="lineno"> 1159</span> </div>
<div class="line"><span class="lineno"> 1160</span>        <span class="keywordflow">for</span> dt <span class="keywordflow">in</span> np.sctypes[<span class="stringliteral">&#39;float&#39;</span>]:</div>
<div class="line"><span class="lineno"> 1161</span>            fi = np.finfo(dt)</div>
<div class="line"><span class="lineno"> 1162</span>            assert_(np.can_cast(fi.min, dt))</div>
<div class="line"><span class="lineno"> 1163</span>            assert_(np.can_cast(fi.max, dt))</div>
<div class="line"><span class="lineno"> 1164</span> </div>
<div class="line"><span class="lineno"> 1165</span> </div>
<div class="line"><span class="lineno"> 1166</span><span class="comment"># Custom exception class to test exception propagation in fromiter</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="abaffb9954080d7f9e3a284985a5c3f48" name="abaffb9954080d7f9e3a284985a5c3f48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaffb9954080d7f9e3a284985a5c3f48">&#9670;&#160;</a></span>test_coercion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_coercion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  798</span>    <span class="keyword">def </span>test_coercion(self):</div>
<div class="line"><span class="lineno">  799</span>        <span class="keyword">def </span>res_type(a, b):</div>
<div class="line"><span class="lineno">  800</span>            <span class="keywordflow">return</span> np.add(a, b).dtype</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>        self.check_promotion_cases(res_type)</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>        <span class="comment"># Use-case: float/complex scalar * bool/int8 array</span></div>
<div class="line"><span class="lineno">  805</span>        <span class="comment">#           shouldn&#39;t narrow the float/complex type</span></div>
<div class="line"><span class="lineno">  806</span>        <span class="keywordflow">for</span> a <span class="keywordflow">in</span> [np.array([<span class="keyword">True</span>, <span class="keyword">False</span>]), np.array([-3, 12], dtype=np.int8)]:</div>
<div class="line"><span class="lineno">  807</span>            b = 1.234 * a</div>
<div class="line"><span class="lineno">  808</span>            assert_equal(b.dtype, np.dtype(<span class="stringliteral">&#39;f8&#39;</span>), <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  809</span>            b = np.longdouble(1.234) * a</div>
<div class="line"><span class="lineno">  810</span>            assert_equal(b.dtype, np.dtype(np.longdouble),</div>
<div class="line"><span class="lineno">  811</span>                         <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  812</span>            b = np.float64(1.234) * a</div>
<div class="line"><span class="lineno">  813</span>            assert_equal(b.dtype, np.dtype(<span class="stringliteral">&#39;f8&#39;</span>), <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  814</span>            b = np.float32(1.234) * a</div>
<div class="line"><span class="lineno">  815</span>            assert_equal(b.dtype, np.dtype(<span class="stringliteral">&#39;f4&#39;</span>), <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  816</span>            b = np.float16(1.234) * a</div>
<div class="line"><span class="lineno">  817</span>            assert_equal(b.dtype, np.dtype(<span class="stringliteral">&#39;f2&#39;</span>), <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>            b = 1.234j * a</div>
<div class="line"><span class="lineno">  820</span>            assert_equal(b.dtype, np.dtype(<span class="stringliteral">&#39;c16&#39;</span>), <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  821</span>            b = np.clongdouble(1.234j) * a</div>
<div class="line"><span class="lineno">  822</span>            assert_equal(b.dtype, np.dtype(np.clongdouble),</div>
<div class="line"><span class="lineno">  823</span>                         <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  824</span>            b = np.complex128(1.234j) * a</div>
<div class="line"><span class="lineno">  825</span>            assert_equal(b.dtype, np.dtype(<span class="stringliteral">&#39;c16&#39;</span>), <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  826</span>            b = np.complex64(1.234j) * a</div>
<div class="line"><span class="lineno">  827</span>            assert_equal(b.dtype, np.dtype(<span class="stringliteral">&#39;c8&#39;</span>), <span class="stringliteral">&quot;array type %s&quot;</span> % a.dtype)</div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span>        <span class="comment"># The following use-case is problematic, and to resolve its</span></div>
<div class="line"><span class="lineno">  830</span>        <span class="comment"># tricky side-effects requires more changes.</span></div>
<div class="line"><span class="lineno">  831</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  832</span>        <span class="comment"># Use-case: (1-t)*a, where &#39;t&#39; is a boolean array and &#39;a&#39; is</span></div>
<div class="line"><span class="lineno">  833</span>        <span class="comment">#            a float32, shouldn&#39;t promote to float64</span></div>
<div class="line"><span class="lineno">  834</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  835</span>        <span class="comment"># a = np.array([1.0, 1.5], dtype=np.float32)</span></div>
<div class="line"><span class="lineno">  836</span>        <span class="comment"># t = np.array([True, False])</span></div>
<div class="line"><span class="lineno">  837</span>        <span class="comment"># b = t*a</span></div>
<div class="line"><span class="lineno">  838</span>        <span class="comment"># assert_equal(b, [1.0, 0.0])</span></div>
<div class="line"><span class="lineno">  839</span>        <span class="comment"># assert_equal(b.dtype, np.dtype(&#39;f4&#39;))</span></div>
<div class="line"><span class="lineno">  840</span>        <span class="comment"># b = (1-t)*a</span></div>
<div class="line"><span class="lineno">  841</span>        <span class="comment"># assert_equal(b, [0.0, 1.5])</span></div>
<div class="line"><span class="lineno">  842</span>        <span class="comment"># assert_equal(b.dtype, np.dtype(&#39;f4&#39;))</span></div>
<div class="line"><span class="lineno">  843</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  844</span>        <span class="comment"># Probably ~t (bitwise negation) is more proper to use here,</span></div>
<div class="line"><span class="lineno">  845</span>        <span class="comment"># but this is arguably less intuitive to understand at a glance, and</span></div>
<div class="line"><span class="lineno">  846</span>        <span class="comment"># would fail if &#39;t&#39; is actually an integer array instead of boolean:</span></div>
<div class="line"><span class="lineno">  847</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  848</span>        <span class="comment"># b = (~t)*a</span></div>
<div class="line"><span class="lineno">  849</span>        <span class="comment"># assert_equal(b, [0.0, 1.5])</span></div>
<div class="line"><span class="lineno">  850</span>        <span class="comment"># assert_equal(b.dtype, np.dtype(&#39;f4&#39;))</span></div>
<div class="line"><span class="lineno">  851</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1fd6a84190279cade2f4bffdbe700e52" name="a1fd6a84190279cade2f4bffdbe700e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fd6a84190279cade2f4bffdbe700e52">&#9670;&#160;</a></span>test_invalid_void_promotion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_invalid_void_promotion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  944</span>    <span class="keyword">def </span>test_invalid_void_promotion(self, dtype1, dtype2):</div>
<div class="line"><span class="lineno">  945</span>        <span class="keyword">with</span> pytest.raises(TypeError):</div>
<div class="line"><span class="lineno">  946</span>            np.promote_types(dtype1, dtype2)</div>
<div class="line"><span class="lineno">  947</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab99a85307966a7965f0bd264acc96241" name="ab99a85307966a7965f0bd264acc96241"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab99a85307966a7965f0bd264acc96241">&#9670;&#160;</a></span>test_promote_identical_types_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_promote_identical_types_metadata </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  961</span>    <span class="keyword">def </span>test_promote_identical_types_metadata(self, dtype):</div>
<div class="line"><span class="lineno">  962</span>        <span class="comment"># The same type passed in twice to promote types always</span></div>
<div class="line"><span class="lineno">  963</span>        <span class="comment"># preserves metadata</span></div>
<div class="line"><span class="lineno">  964</span>        metadata = {1: 1}</div>
<div class="line"><span class="lineno">  965</span>        dtype = np.dtype(dtype, metadata=metadata)</div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>        res = np.promote_types(dtype, dtype)</div>
<div class="line"><span class="lineno">  968</span>        <span class="keyword">assert</span> res.metadata == dtype.metadata</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>        <span class="comment"># byte-swapping preserves and makes the dtype native:</span></div>
<div class="line"><span class="lineno">  971</span>        dtype = dtype.newbyteorder()</div>
<div class="line"><span class="lineno">  972</span>        <span class="keywordflow">if</span> dtype.isnative:</div>
<div class="line"><span class="lineno">  973</span>            <span class="comment"># The type does not have byte swapping</span></div>
<div class="line"><span class="lineno">  974</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  975</span> </div>
<div class="line"><span class="lineno">  976</span>        res = np.promote_types(dtype, dtype)</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span>        <span class="comment"># Metadata is (currently) generally lost on byte-swapping (except for</span></div>
<div class="line"><span class="lineno">  979</span>        <span class="comment"># unicode.</span></div>
<div class="line"><span class="lineno">  980</span>        <span class="keywordflow">if</span> dtype.char != <span class="stringliteral">&quot;U&quot;</span>:</div>
<div class="line"><span class="lineno">  981</span>            <span class="keyword">assert</span> res.metadata <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  982</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  983</span>            <span class="keyword">assert</span> res.metadata == metadata</div>
<div class="line"><span class="lineno">  984</span>        <span class="keyword">assert</span> res.isnative</div>
<div class="line"><span class="lineno">  985</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5862e44f414aaf68f4ab72a8a527fd98" name="a5862e44f414aaf68f4ab72a8a527fd98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5862e44f414aaf68f4ab72a8a527fd98">&#9670;&#160;</a></span>test_promote_types_endian()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_promote_types_endian </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  856</span>    <span class="keyword">def </span>test_promote_types_endian(self):</div>
<div class="line"><span class="lineno">  857</span>        <span class="comment"># promote_types should always return native-endian types</span></div>
<div class="line"><span class="lineno">  858</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&lt;i8&#39;</span>), np.dtype(<span class="stringliteral">&#39;i8&#39;</span>))</div>
<div class="line"><span class="lineno">  859</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>), np.dtype(<span class="stringliteral">&#39;i8&#39;</span>))</div>
<div class="line"><span class="lineno">  860</span> </div>
<div class="line"><span class="lineno">  861</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;i8&#39;</span>, <span class="stringliteral">&#39;&gt;U16&#39;</span>), np.dtype(<span class="stringliteral">&#39;U21&#39;</span>))</div>
<div class="line"><span class="lineno">  862</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;i8&#39;</span>, <span class="stringliteral">&#39;&lt;U16&#39;</span>), np.dtype(<span class="stringliteral">&#39;U21&#39;</span>))</div>
<div class="line"><span class="lineno">  863</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;U16&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>), np.dtype(<span class="stringliteral">&#39;U21&#39;</span>))</div>
<div class="line"><span class="lineno">  864</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;U16&#39;</span>, <span class="stringliteral">&#39;&lt;i8&#39;</span>), np.dtype(<span class="stringliteral">&#39;U21&#39;</span>))</div>
<div class="line"><span class="lineno">  865</span> </div>
<div class="line"><span class="lineno">  866</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;S5&#39;</span>, <span class="stringliteral">&#39;&lt;U8&#39;</span>), np.dtype(<span class="stringliteral">&#39;U8&#39;</span>))</div>
<div class="line"><span class="lineno">  867</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;S5&#39;</span>, <span class="stringliteral">&#39;&gt;U8&#39;</span>), np.dtype(<span class="stringliteral">&#39;U8&#39;</span>))</div>
<div class="line"><span class="lineno">  868</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;U8&#39;</span>, <span class="stringliteral">&#39;&lt;S5&#39;</span>), np.dtype(<span class="stringliteral">&#39;U8&#39;</span>))</div>
<div class="line"><span class="lineno">  869</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;U8&#39;</span>, <span class="stringliteral">&#39;&gt;S5&#39;</span>), np.dtype(<span class="stringliteral">&#39;U8&#39;</span>))</div>
<div class="line"><span class="lineno">  870</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;U5&#39;</span>, <span class="stringliteral">&#39;&lt;U8&#39;</span>), np.dtype(<span class="stringliteral">&#39;U8&#39;</span>))</div>
<div class="line"><span class="lineno">  871</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;U8&#39;</span>, <span class="stringliteral">&#39;&gt;U5&#39;</span>), np.dtype(<span class="stringliteral">&#39;U8&#39;</span>))</div>
<div class="line"><span class="lineno">  872</span> </div>
<div class="line"><span class="lineno">  873</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;M8&#39;</span>, <span class="stringliteral">&#39;&lt;M8&#39;</span>), np.dtype(<span class="stringliteral">&#39;M8&#39;</span>))</div>
<div class="line"><span class="lineno">  874</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;M8&#39;</span>, <span class="stringliteral">&#39;&gt;M8&#39;</span>), np.dtype(<span class="stringliteral">&#39;M8&#39;</span>))</div>
<div class="line"><span class="lineno">  875</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&lt;m8&#39;</span>, <span class="stringliteral">&#39;&lt;m8&#39;</span>), np.dtype(<span class="stringliteral">&#39;m8&#39;</span>))</div>
<div class="line"><span class="lineno">  876</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;&gt;m8&#39;</span>, <span class="stringliteral">&#39;&gt;m8&#39;</span>), np.dtype(<span class="stringliteral">&#39;m8&#39;</span>))</div>
<div class="line"><span class="lineno">  877</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a837211eaed3752a1a31e6d02a16d6374" name="a837211eaed3752a1a31e6d02a16d6374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a837211eaed3752a1a31e6d02a16d6374">&#9670;&#160;</a></span>test_promote_types_metadata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_promote_types_metadata </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Metadata handling in promotion does not appear formalized
right now in NumPy. This test should thus be considered to
document behaviour, rather than test the correct definition of it.

This test is very ugly, it was useful for rewriting part of the
promotion, but probably should eventually be replaced/deleted
(i.e. when metadata handling in promotion is better defined).
</pre> <div class="fragment"><div class="line"><span class="lineno">  993</span>    <span class="keyword">def </span>test_promote_types_metadata(self, dtype1, dtype2):</div>
<div class="line"><span class="lineno">  994</span>        <span class="stringliteral">&quot;&quot;&quot;Metadata handling in promotion does not appear formalized</span></div>
<div class="line"><span class="lineno">  995</span><span class="stringliteral">        right now in NumPy. This test should thus be considered to</span></div>
<div class="line"><span class="lineno">  996</span><span class="stringliteral">        document behaviour, rather than test the correct definition of it.</span></div>
<div class="line"><span class="lineno">  997</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  998</span><span class="stringliteral">        This test is very ugly, it was useful for rewriting part of the</span></div>
<div class="line"><span class="lineno">  999</span><span class="stringliteral">        promotion, but probably should eventually be replaced/deleted</span></div>
<div class="line"><span class="lineno"> 1000</span><span class="stringliteral">        (i.e. when metadata handling in promotion is better defined).</span></div>
<div class="line"><span class="lineno"> 1001</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1002</span>        metadata1 = {1: 1}</div>
<div class="line"><span class="lineno"> 1003</span>        metadata2 = {2: 2}</div>
<div class="line"><span class="lineno"> 1004</span>        dtype1 = np.dtype(dtype1, metadata=metadata1)</div>
<div class="line"><span class="lineno"> 1005</span>        dtype2 = np.dtype(dtype2, metadata=metadata2)</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1008</span>            res = np.promote_types(dtype1, dtype2)</div>
<div class="line"><span class="lineno"> 1009</span>        <span class="keywordflow">except</span> TypeError:</div>
<div class="line"><span class="lineno"> 1010</span>            <span class="comment"># Promotion failed, this test only checks metadata</span></div>
<div class="line"><span class="lineno"> 1011</span>            <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1012</span> </div>
<div class="line"><span class="lineno"> 1013</span>        <span class="keywordflow">if</span> res.char <span class="keywordflow">not</span> <span class="keywordflow">in</span> <span class="stringliteral">&quot;USV&quot;</span> <span class="keywordflow">or</span> res.names <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> res.shape != ():</div>
<div class="line"><span class="lineno"> 1014</span>            <span class="comment"># All except string dtypes (and unstructured void) lose metadata</span></div>
<div class="line"><span class="lineno"> 1015</span>            <span class="comment"># on promotion (unless both dtypes are identical).</span></div>
<div class="line"><span class="lineno"> 1016</span>            <span class="comment"># At some point structured ones did not, but were restrictive.</span></div>
<div class="line"><span class="lineno"> 1017</span>            <span class="keyword">assert</span> res.metadata <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1018</span>        <span class="keywordflow">elif</span> res == dtype1:</div>
<div class="line"><span class="lineno"> 1019</span>            <span class="comment"># If one result is the result, it is usually returned unchanged:</span></div>
<div class="line"><span class="lineno"> 1020</span>            <span class="keyword">assert</span> res <span class="keywordflow">is</span> dtype1</div>
<div class="line"><span class="lineno"> 1021</span>        <span class="keywordflow">elif</span> res == dtype2:</div>
<div class="line"><span class="lineno"> 1022</span>            <span class="comment"># dtype1 may have been cast to the same type/kind as dtype2.</span></div>
<div class="line"><span class="lineno"> 1023</span>            <span class="comment"># If the resulting dtype is identical we currently pick the cast</span></div>
<div class="line"><span class="lineno"> 1024</span>            <span class="comment"># version of dtype1, which lost the metadata:</span></div>
<div class="line"><span class="lineno"> 1025</span>            <span class="keywordflow">if</span> np.promote_types(dtype1, dtype2.kind) == dtype2:</div>
<div class="line"><span class="lineno"> 1026</span>                res.metadata <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1027</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1028</span>                res.metadata == metadata2</div>
<div class="line"><span class="lineno"> 1029</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1030</span>            <span class="keyword">assert</span> res.metadata <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1031</span> </div>
<div class="line"><span class="lineno"> 1032</span>        <span class="comment"># Try again for byteswapped version</span></div>
<div class="line"><span class="lineno"> 1033</span>        dtype1 = dtype1.newbyteorder()</div>
<div class="line"><span class="lineno"> 1034</span>        <span class="keyword">assert</span> dtype1.metadata == metadata1</div>
<div class="line"><span class="lineno"> 1035</span>        res_bs = np.promote_types(dtype1, dtype2)</div>
<div class="line"><span class="lineno"> 1036</span>        <span class="keyword">assert</span> res_bs == res</div>
<div class="line"><span class="lineno"> 1037</span>        <span class="keyword">assert</span> res_bs.metadata == res.metadata</div>
<div class="line"><span class="lineno"> 1038</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aea3e9a347bcc7f315350b5aa4bd5b2a7" name="aea3e9a347bcc7f315350b5aa4bd5b2a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3e9a347bcc7f315350b5aa4bd5b2a7">&#9670;&#160;</a></span>test_promote_types_strings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_promote_types_strings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>string_dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  904</span>    <span class="keyword">def </span>test_promote_types_strings(self, swap, string_dtype):</div>
<div class="line"><span class="lineno">  905</span>        <span class="keywordflow">if</span> swap == <span class="stringliteral">&quot;swap&quot;</span>:</div>
<div class="line"><span class="lineno">  906</span>            promote_types = <span class="keyword">lambda</span> a, b: np.promote_types(b, a)</div>
<div class="line"><span class="lineno">  907</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  908</span>            promote_types = np.promote_types</div>
<div class="line"><span class="lineno">  909</span> </div>
<div class="line"><span class="lineno">  910</span>        S = string_dtype</div>
<div class="line"><span class="lineno">  911</span> </div>
<div class="line"><span class="lineno">  912</span>        <span class="comment"># Promote numeric with unsized string:</span></div>
<div class="line"><span class="lineno">  913</span>        assert_equal(promote_types(<span class="stringliteral">&#39;bool&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;5&#39;</span>))</div>
<div class="line"><span class="lineno">  914</span>        assert_equal(promote_types(<span class="stringliteral">&#39;b&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;4&#39;</span>))</div>
<div class="line"><span class="lineno">  915</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u1&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;3&#39;</span>))</div>
<div class="line"><span class="lineno">  916</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u2&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;5&#39;</span>))</div>
<div class="line"><span class="lineno">  917</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u4&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;10&#39;</span>))</div>
<div class="line"><span class="lineno">  918</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u8&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;20&#39;</span>))</div>
<div class="line"><span class="lineno">  919</span>        assert_equal(promote_types(<span class="stringliteral">&#39;i1&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;4&#39;</span>))</div>
<div class="line"><span class="lineno">  920</span>        assert_equal(promote_types(<span class="stringliteral">&#39;i2&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;6&#39;</span>))</div>
<div class="line"><span class="lineno">  921</span>        assert_equal(promote_types(<span class="stringliteral">&#39;i4&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;11&#39;</span>))</div>
<div class="line"><span class="lineno">  922</span>        assert_equal(promote_types(<span class="stringliteral">&#39;i8&#39;</span>, S), np.dtype(S+<span class="stringliteral">&#39;21&#39;</span>))</div>
<div class="line"><span class="lineno">  923</span>        <span class="comment"># Promote numeric with sized string:</span></div>
<div class="line"><span class="lineno">  924</span>        assert_equal(promote_types(<span class="stringliteral">&#39;bool&#39;</span>, S+<span class="stringliteral">&#39;1&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;5&#39;</span>))</div>
<div class="line"><span class="lineno">  925</span>        assert_equal(promote_types(<span class="stringliteral">&#39;bool&#39;</span>, S+<span class="stringliteral">&#39;30&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;30&#39;</span>))</div>
<div class="line"><span class="lineno">  926</span>        assert_equal(promote_types(<span class="stringliteral">&#39;b&#39;</span>, S+<span class="stringliteral">&#39;1&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;4&#39;</span>))</div>
<div class="line"><span class="lineno">  927</span>        assert_equal(promote_types(<span class="stringliteral">&#39;b&#39;</span>, S+<span class="stringliteral">&#39;30&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;30&#39;</span>))</div>
<div class="line"><span class="lineno">  928</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u1&#39;</span>, S+<span class="stringliteral">&#39;1&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;3&#39;</span>))</div>
<div class="line"><span class="lineno">  929</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u1&#39;</span>, S+<span class="stringliteral">&#39;30&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;30&#39;</span>))</div>
<div class="line"><span class="lineno">  930</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u2&#39;</span>, S+<span class="stringliteral">&#39;1&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;5&#39;</span>))</div>
<div class="line"><span class="lineno">  931</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u2&#39;</span>, S+<span class="stringliteral">&#39;30&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;30&#39;</span>))</div>
<div class="line"><span class="lineno">  932</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u4&#39;</span>, S+<span class="stringliteral">&#39;1&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;10&#39;</span>))</div>
<div class="line"><span class="lineno">  933</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u4&#39;</span>, S+<span class="stringliteral">&#39;30&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;30&#39;</span>))</div>
<div class="line"><span class="lineno">  934</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u8&#39;</span>, S+<span class="stringliteral">&#39;1&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;20&#39;</span>))</div>
<div class="line"><span class="lineno">  935</span>        assert_equal(promote_types(<span class="stringliteral">&#39;u8&#39;</span>, S+<span class="stringliteral">&#39;30&#39;</span>), np.dtype(S+<span class="stringliteral">&#39;30&#39;</span>))</div>
<div class="line"><span class="lineno">  936</span>        <span class="comment"># Promote with object:</span></div>
<div class="line"><span class="lineno">  937</span>        assert_equal(promote_types(<span class="stringliteral">&#39;O&#39;</span>, S+<span class="stringliteral">&#39;30&#39;</span>), np.dtype(<span class="stringliteral">&#39;O&#39;</span>))</div>
<div class="line"><span class="lineno">  938</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a08c9c88a75a0283ad5265cfcb8b355aa" name="a08c9c88a75a0283ad5265cfcb8b355aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c9c88a75a0283ad5265cfcb8b355aa">&#9670;&#160;</a></span>test_result_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_result_type </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  852</span>    <span class="keyword">def </span>test_result_type(self):</div>
<div class="line"><span class="lineno">  853</span>        self.check_promotion_cases(np.result_type)</div>
<div class="line"><span class="lineno">  854</span>        assert_(np.result_type(<span class="keywordtype">None</span>) == np.dtype(<span class="keywordtype">None</span>))</div>
<div class="line"><span class="lineno">  855</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a53117c27b6e376eea3f70101b1aa89f7" name="a53117c27b6e376eea3f70101b1aa89f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53117c27b6e376eea3f70101b1aa89f7">&#9670;&#160;</a></span>test_valid_void_promotion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_numeric.TestTypes.test_valid_void_promotion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  955</span>    <span class="keyword">def </span>test_valid_void_promotion(self, dtype1, dtype2):</div>
<div class="line"><span class="lineno">  956</span>        <span class="keyword">assert</span> np.promote_types(dtype1, dtype2) == dtype1</div>
<div class="line"><span class="lineno">  957</span> </div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/rafael/Documents/GitHub/PUC-GCES-PY/Tp-GCS-Rafael-Augusto/venv/lib/python3.9/site-packages/numpy/core/tests/<a class="el" href="numpy_2core_2tests_2test__numeric_8py.html">test_numeric.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
