<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: setuptools.monkey Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesetuptools.html">setuptools</a></li><li class="navelem"><a class="el" href="namespacesetuptools_1_1monkey.html">monkey</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">setuptools.monkey Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a82c9be7bc07224018b8fcbccfc7ac4fc" id="r_a82c9be7bc07224018b8fcbccfc7ac4fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#a82c9be7bc07224018b8fcbccfc7ac4fc">_get_mro</a> (cls)</td></tr>
<tr class="separator:a82c9be7bc07224018b8fcbccfc7ac4fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a088c6dda330a4dd5d67da5d454131484" id="r_a088c6dda330a4dd5d67da5d454131484"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#a088c6dda330a4dd5d67da5d454131484">get_unpatched</a> (item)</td></tr>
<tr class="separator:a088c6dda330a4dd5d67da5d454131484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7012bc7c2cccbe5056c29022d7bd6695" id="r_a7012bc7c2cccbe5056c29022d7bd6695"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#a7012bc7c2cccbe5056c29022d7bd6695">get_unpatched_class</a> (cls)</td></tr>
<tr class="separator:a7012bc7c2cccbe5056c29022d7bd6695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3ddd650b2d211ab486940c8ab78fd86" id="r_af3ddd650b2d211ab486940c8ab78fd86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#af3ddd650b2d211ab486940c8ab78fd86">patch_all</a> ()</td></tr>
<tr class="separator:af3ddd650b2d211ab486940c8ab78fd86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f426a7d48738b2499011d1226e705d4" id="r_a7f426a7d48738b2499011d1226e705d4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#a7f426a7d48738b2499011d1226e705d4">_patch_distribution_metadata</a> ()</td></tr>
<tr class="separator:a7f426a7d48738b2499011d1226e705d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2614737a9f042a53a1427c41917e05e5" id="r_a2614737a9f042a53a1427c41917e05e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#a2614737a9f042a53a1427c41917e05e5">patch_func</a> (replacement, target_mod, func_name)</td></tr>
<tr class="separator:a2614737a9f042a53a1427c41917e05e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace8febb6fe5e978211f8c7f20bdc769f" id="r_ace8febb6fe5e978211f8c7f20bdc769f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#ace8febb6fe5e978211f8c7f20bdc769f">get_unpatched_function</a> (candidate)</td></tr>
<tr class="separator:ace8febb6fe5e978211f8c7f20bdc769f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa61c598b24bda0000a5450e7901202c8" id="r_aa61c598b24bda0000a5450e7901202c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesetuptools_1_1monkey.html#aa61c598b24bda0000a5450e7901202c8">patch_for_msvc_specialized_compiler</a> ()</td></tr>
<tr class="separator:aa61c598b24bda0000a5450e7901202c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Monkey patching of distutils.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a82c9be7bc07224018b8fcbccfc7ac4fc" name="a82c9be7bc07224018b8fcbccfc7ac4fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82c9be7bc07224018b8fcbccfc7ac4fc">&#9670;&#160;</a></span>_get_mro()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey._get_mro </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Returns the bases classes for cls sorted by the MRO.

Works around an issue on Jython where inspect.getmro will not return all
base classes if multiple classes share the same name. Instead, this
function will return a tuple containing the class itself, and the contents
of cls.__bases__. See https://github.com/pypa/setuptools/issues/1024.
</pre> <div class="fragment"><div class="line"><span class="lineno">   22</span><span class="keyword">def </span>_get_mro(cls):</div>
<div class="line"><span class="lineno">   23</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">    Returns the bases classes for cls sorted by the MRO.</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">    Works around an issue on Jython where inspect.getmro will not return all</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">    base classes if multiple classes share the same name. Instead, this</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    function will return a tuple containing the class itself, and the contents</span></div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral">    of cls.__bases__. See https://github.com/pypa/setuptools/issues/1024.</span></div>
<div class="line"><span class="lineno">   30</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   31</span>    <span class="keywordflow">if</span> platform.python_implementation() == <span class="stringliteral">&quot;Jython&quot;</span>:</div>
<div class="line"><span class="lineno">   32</span>        <span class="keywordflow">return</span> (cls,) + cls.__bases__</div>
<div class="line"><span class="lineno">   33</span>    <span class="keywordflow">return</span> inspect.getmro(cls)</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f426a7d48738b2499011d1226e705d4" name="a7f426a7d48738b2499011d1226e705d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f426a7d48738b2499011d1226e705d4">&#9670;&#160;</a></span>_patch_distribution_metadata()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey._patch_distribution_metadata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Patch write_pkg_file and read_pkg_file for higher metadata standards</pre> <div class="fragment"><div class="line"><span class="lineno">  102</span><span class="keyword">def </span>_patch_distribution_metadata():</div>
<div class="line"><span class="lineno">  103</span>    <span class="stringliteral">&quot;&quot;&quot;Patch write_pkg_file and read_pkg_file for higher metadata standards&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">for</span> attr <span class="keywordflow">in</span> (<span class="stringliteral">&#39;write_pkg_file&#39;</span>, <span class="stringliteral">&#39;read_pkg_file&#39;</span>, <span class="stringliteral">&#39;get_metadata_version&#39;</span>):</div>
<div class="line"><span class="lineno">  105</span>        new_val = getattr(<a class="code hl_namespace" href="namespacesetuptools_1_1dist.html">setuptools.dist</a>, attr)</div>
<div class="line"><span class="lineno">  106</span>        setattr(distutils.dist.DistributionMetadata, attr, new_val)</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="ttc" id="anamespacesetuptools_1_1dist_html"><div class="ttname"><a href="namespacesetuptools_1_1dist.html">setuptools.dist</a></div><div class="ttdef"><b>Definition</b> dist.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a088c6dda330a4dd5d67da5d454131484" name="a088c6dda330a4dd5d67da5d454131484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a088c6dda330a4dd5d67da5d454131484">&#9670;&#160;</a></span>get_unpatched()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey.get_unpatched </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   36</span><span class="keyword">def </span>get_unpatched(item):</div>
<div class="line"><span class="lineno">   37</span>    lookup = (</div>
<div class="line"><span class="lineno">   38</span>        get_unpatched_class <span class="keywordflow">if</span> isinstance(item, type) <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   39</span>        get_unpatched_function <span class="keywordflow">if</span> isinstance(item, types.FunctionType) <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   40</span>        <span class="keyword">lambda</span> item: <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   41</span>    )</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">return</span> lookup(item)</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7012bc7c2cccbe5056c29022d7bd6695" name="a7012bc7c2cccbe5056c29022d7bd6695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7012bc7c2cccbe5056c29022d7bd6695">&#9670;&#160;</a></span>get_unpatched_class()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey.get_unpatched_class </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Protect against re-patching the distutils if reloaded

Also ensures that no other distutils extension monkeypatched the distutils
first.
</pre> <div class="fragment"><div class="line"><span class="lineno">   45</span><span class="keyword">def </span>get_unpatched_class(cls):</div>
<div class="line"><span class="lineno">   46</span>    <span class="stringliteral">&quot;&quot;&quot;Protect against re-patching the distutils if reloaded</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">    Also ensures that no other distutils extension monkeypatched the distutils</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">    first.</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   51</span>    external_bases = (</div>
<div class="line"><span class="lineno">   52</span>        cls</div>
<div class="line"><span class="lineno">   53</span>        <span class="keywordflow">for</span> cls <span class="keywordflow">in</span> _get_mro(cls)</div>
<div class="line"><span class="lineno">   54</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> cls.__module__.startswith(<span class="stringliteral">&#39;setuptools&#39;</span>)</div>
<div class="line"><span class="lineno">   55</span>    )</div>
<div class="line"><span class="lineno">   56</span>    base = next(external_bases)</div>
<div class="line"><span class="lineno">   57</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> base.__module__.startswith(<span class="stringliteral">&#39;distutils&#39;</span>):</div>
<div class="line"><span class="lineno">   58</span>        msg = <span class="stringliteral">&quot;distutils has already been patched by %r&quot;</span> % cls</div>
<div class="line"><span class="lineno">   59</span>        <span class="keywordflow">raise</span> AssertionError(msg)</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">return</span> base</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ace8febb6fe5e978211f8c7f20bdc769f" name="ace8febb6fe5e978211f8c7f20bdc769f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace8febb6fe5e978211f8c7f20bdc769f">&#9670;&#160;</a></span>get_unpatched_function()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey.get_unpatched_function </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>candidate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  126</span><span class="keyword">def </span>get_unpatched_function(candidate):</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">return</span> getattr(candidate, <span class="stringliteral">&#39;unpatched&#39;</span>)</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af3ddd650b2d211ab486940c8ab78fd86" name="af3ddd650b2d211ab486940c8ab78fd86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3ddd650b2d211ab486940c8ab78fd86">&#9670;&#160;</a></span>patch_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey.patch_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   63</span><span class="keyword">def </span>patch_all():</div>
<div class="line"><span class="lineno">   64</span>    <span class="comment"># we can&#39;t patch distutils.cmd, alas</span></div>
<div class="line"><span class="lineno">   65</span>    distutils.core.Command = <a class="code hl_class" href="classsetuptools_1_1_command.html">setuptools.Command</a></div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    has_issue_12885 = sys.version_info &lt;= (3, 5, 3)</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">if</span> has_issue_12885:</div>
<div class="line"><span class="lineno">   70</span>        <span class="comment"># fix findall bug in distutils (http://bugs.python.org/issue12885)</span></div>
<div class="line"><span class="lineno">   71</span>        distutils.filelist.findall = setuptools.findall</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    needs_warehouse = (</div>
<div class="line"><span class="lineno">   74</span>        sys.version_info &lt; (2, 7, 13)</div>
<div class="line"><span class="lineno">   75</span>        <span class="keywordflow">or</span></div>
<div class="line"><span class="lineno">   76</span>        (3, 4) &lt; sys.version_info &lt; (3, 4, 6)</div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">or</span></div>
<div class="line"><span class="lineno">   78</span>        (3, 5) &lt; sys.version_info &lt;= (3, 5, 3)</div>
<div class="line"><span class="lineno">   79</span>    )</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordflow">if</span> needs_warehouse:</div>
<div class="line"><span class="lineno">   82</span>        warehouse = <span class="stringliteral">&#39;https://upload.pypi.org/legacy/&#39;</span></div>
<div class="line"><span class="lineno">   83</span>        distutils.config.PyPIRCCommand.DEFAULT_REPOSITORY = warehouse</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    _patch_distribution_metadata()</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    <span class="comment"># Install Distribution throughout the distutils</span></div>
<div class="line"><span class="lineno">   88</span>    <span class="keywordflow">for</span> module <span class="keywordflow">in</span> distutils.dist, distutils.core, distutils.cmd:</div>
<div class="line"><span class="lineno">   89</span>        module.Distribution = <a class="code hl_class" href="classsetuptools_1_1dist_1_1_distribution.html">setuptools.dist.Distribution</a></div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>    <span class="comment"># Install the patched Extension</span></div>
<div class="line"><span class="lineno">   92</span>    distutils.core.Extension = <a class="code hl_class" href="classsetuptools_1_1extension_1_1_extension.html">setuptools.extension.Extension</a></div>
<div class="line"><span class="lineno">   93</span>    distutils.extension.Extension = <a class="code hl_class" href="classsetuptools_1_1extension_1_1_extension.html">setuptools.extension.Extension</a></div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> <span class="stringliteral">&#39;distutils.command.build_ext&#39;</span> <span class="keywordflow">in</span> sys.modules:</div>
<div class="line"><span class="lineno">   95</span>        sys.modules[<span class="stringliteral">&#39;distutils.command.build_ext&#39;</span>].Extension = (</div>
<div class="line"><span class="lineno">   96</span>            <a class="code hl_class" href="classsetuptools_1_1extension_1_1_extension.html">setuptools.extension.Extension</a></div>
<div class="line"><span class="lineno">   97</span>        )</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    patch_for_msvc_specialized_compiler()</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="ttc" id="aclasssetuptools_1_1_command_html"><div class="ttname"><a href="classsetuptools_1_1_command.html">setuptools.Command</a></div><div class="ttdef"><b>Definition</b> __init__.py:162</div></div>
<div class="ttc" id="aclasssetuptools_1_1dist_1_1_distribution_html"><div class="ttname"><a href="classsetuptools_1_1dist_1_1_distribution.html">setuptools.dist.Distribution</a></div><div class="ttdef"><b>Definition</b> dist.py:365</div></div>
<div class="ttc" id="aclasssetuptools_1_1extension_1_1_extension_html"><div class="ttname"><a href="classsetuptools_1_1extension_1_1_extension.html">setuptools.extension.Extension</a></div><div class="ttdef"><b>Definition</b> extension.py:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa61c598b24bda0000a5450e7901202c8" name="aa61c598b24bda0000a5450e7901202c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa61c598b24bda0000a5450e7901202c8">&#9670;&#160;</a></span>patch_for_msvc_specialized_compiler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey.patch_for_msvc_specialized_compiler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Patch functions in distutils to use standalone Microsoft Visual C++
compilers.
</pre> <div class="fragment"><div class="line"><span class="lineno">  130</span><span class="keyword">def </span>patch_for_msvc_specialized_compiler():</div>
<div class="line"><span class="lineno">  131</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">    Patch functions in distutils to use standalone Microsoft Visual C++</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">    compilers.</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  135</span>    <span class="comment"># import late to avoid circular imports on Python &lt; 3.5</span></div>
<div class="line"><span class="lineno">  136</span>    msvc = import_module(<span class="stringliteral">&#39;setuptools.msvc&#39;</span>)</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    <span class="keywordflow">if</span> platform.system() != <span class="stringliteral">&#39;Windows&#39;</span>:</div>
<div class="line"><span class="lineno">  139</span>        <span class="comment"># Compilers only available on Microsoft Windows</span></div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>    <span class="keyword">def </span>patch_params(mod_name, func_name):</div>
<div class="line"><span class="lineno">  143</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral">        Prepare the parameters for patch_func to patch indicated function.</span></div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  146</span>        repl_prefix = <span class="stringliteral">&#39;msvc9_&#39;</span> <span class="keywordflow">if</span> <span class="stringliteral">&#39;msvc9&#39;</span> <span class="keywordflow">in</span> mod_name <span class="keywordflow">else</span> <span class="stringliteral">&#39;msvc14_&#39;</span></div>
<div class="line"><span class="lineno">  147</span>        repl_name = repl_prefix + func_name.lstrip(<span class="stringliteral">&#39;_&#39;</span>)</div>
<div class="line"><span class="lineno">  148</span>        repl = getattr(msvc, repl_name)</div>
<div class="line"><span class="lineno">  149</span>        mod = import_module(mod_name)</div>
<div class="line"><span class="lineno">  150</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(mod, func_name):</div>
<div class="line"><span class="lineno">  151</span>            <span class="keywordflow">raise</span> ImportError(func_name)</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">return</span> repl, mod, func_name</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    <span class="comment"># Python 2.7 to 3.4</span></div>
<div class="line"><span class="lineno">  155</span>    msvc9 = functools.partial(patch_params, <span class="stringliteral">&#39;distutils.msvc9compiler&#39;</span>)</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>    <span class="comment"># Python 3.5+</span></div>
<div class="line"><span class="lineno">  158</span>    msvc14 = functools.partial(patch_params, <span class="stringliteral">&#39;distutils._msvccompiler&#39;</span>)</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  161</span>        <span class="comment"># Patch distutils.msvc9compiler</span></div>
<div class="line"><span class="lineno">  162</span>        patch_func(*msvc9(<span class="stringliteral">&#39;find_vcvarsall&#39;</span>))</div>
<div class="line"><span class="lineno">  163</span>        patch_func(*msvc9(<span class="stringliteral">&#39;query_vcvarsall&#39;</span>))</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  168</span>        <span class="comment"># Patch distutils._msvccompiler._get_vc_env</span></div>
<div class="line"><span class="lineno">  169</span>        patch_func(*msvc14(<span class="stringliteral">&#39;_get_vc_env&#39;</span>))</div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  174</span>        <span class="comment"># Patch distutils._msvccompiler.gen_lib_options for Numpy</span></div>
<div class="line"><span class="lineno">  175</span>        patch_func(*msvc14(<span class="stringliteral">&#39;gen_lib_options&#39;</span>))</div>
<div class="line"><span class="lineno">  176</span>    <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno">  177</span>        <span class="keywordflow">pass</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2614737a9f042a53a1427c41917e05e5" name="a2614737a9f042a53a1427c41917e05e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2614737a9f042a53a1427c41917e05e5">&#9670;&#160;</a></span>patch_func()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setuptools.monkey.patch_func </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>replacement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target_mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Patch func_name in target_mod with replacement

Important - original must be resolved by name to avoid
patching an already patched function.
</pre> <div class="fragment"><div class="line"><span class="lineno">  109</span><span class="keyword">def </span>patch_func(replacement, target_mod, func_name):</div>
<div class="line"><span class="lineno">  110</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">    Patch func_name in target_mod with replacement</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">    Important - original must be resolved by name to avoid</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">    patching an already patched function.</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  116</span>    original = getattr(target_mod, func_name)</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="comment"># set the &#39;unpatched&#39; attribute on the replacement to</span></div>
<div class="line"><span class="lineno">  119</span>    <span class="comment"># point to the original.</span></div>
<div class="line"><span class="lineno">  120</span>    vars(replacement).setdefault(<span class="stringliteral">&#39;unpatched&#39;</span>, original)</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment"># replace the function in the original module</span></div>
<div class="line"><span class="lineno">  123</span>    setattr(target_mod, func_name, replacement)</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
