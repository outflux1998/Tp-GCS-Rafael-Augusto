<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: pandas.core.computation.eval Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepandas.html">pandas</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1core.html">core</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1core_1_1computation.html">computation</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html">eval</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pandas.core.computation.eval Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3fd1dff141c544679c32fb5ffa28a2bf" id="r_a3fd1dff141c544679c32fb5ffa28a2bf"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html#a3fd1dff141c544679c32fb5ffa28a2bf">_check_engine</a> (str|None engine)</td></tr>
<tr class="separator:a3fd1dff141c544679c32fb5ffa28a2bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac124bb0f523bcdc62468fe85d45d3587" id="r_ac124bb0f523bcdc62468fe85d45d3587"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html#ac124bb0f523bcdc62468fe85d45d3587">_check_parser</a> (str parser)</td></tr>
<tr class="separator:ac124bb0f523bcdc62468fe85d45d3587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56eff271c576adbe955425832652ae81" id="r_a56eff271c576adbe955425832652ae81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html#a56eff271c576adbe955425832652ae81">_check_resolvers</a> (resolvers)</td></tr>
<tr class="separator:a56eff271c576adbe955425832652ae81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6df0114084c75bd8ac5e4b95b7131f1" id="r_af6df0114084c75bd8ac5e4b95b7131f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html#af6df0114084c75bd8ac5e4b95b7131f1">_check_expression</a> (expr)</td></tr>
<tr class="separator:af6df0114084c75bd8ac5e4b95b7131f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72b940e8946ac357e85a1d88c9b761d" id="r_ae72b940e8946ac357e85a1d88c9b761d"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html#ae72b940e8946ac357e85a1d88c9b761d">_convert_expression</a> (expr)</td></tr>
<tr class="separator:ae72b940e8946ac357e85a1d88c9b761d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92434270931f75c723a94e94309030df" id="r_a92434270931f75c723a94e94309030df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html#a92434270931f75c723a94e94309030df">_check_for_locals</a> (str expr, int stack_level, str parser)</td></tr>
<tr class="separator:a92434270931f75c723a94e94309030df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94bb89708ef62680baf8127c0a32848a" id="r_a94bb89708ef62680baf8127c0a32848a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1core_1_1computation_1_1eval.html#a94bb89708ef62680baf8127c0a32848a">eval</a> (str|<a class="el" href="classpandas_1_1core_1_1computation_1_1ops_1_1_bin_op.html">BinOp</a> expr, str parser=&quot;pandas&quot;, str|None engine=None, truediv=no_default, local_dict=None, global_dict=None, resolvers=(), level=0, target=None, inplace=False)</td></tr>
<tr class="separator:a94bb89708ef62680baf8127c0a32848a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Top level ``eval`` module.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a3fd1dff141c544679c32fb5ffa28a2bf" name="a3fd1dff141c544679c32fb5ffa28a2bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fd1dff141c544679c32fb5ffa28a2bf">&#9670;&#160;</a></span>_check_engine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> str pandas.core.computation.eval._check_engine </td>
          <td>(</td>
          <td class="paramtype">str | None&#160;</td>
          <td class="paramname"><em>engine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Make sure a valid engine is passed.

Parameters
----------
engine : str
    String to validate.

Raises
------
KeyError
  * If an invalid engine is passed.
ImportError
  * If numexpr was requested but doesn't exist.

Returns
-------
str
    Engine name.
</pre> <div class="fragment"><div class="line"><span class="lineno">   29</span><span class="keyword">def </span>_check_engine(engine: str | <span class="keywordtype">None</span>) -&gt; str:</div>
<div class="line"><span class="lineno">   30</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   31</span><span class="stringliteral">    Make sure a valid engine is passed.</span></div>
<div class="line"><span class="lineno">   32</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   33</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   34</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   35</span><span class="stringliteral">    engine : str</span></div>
<div class="line"><span class="lineno">   36</span><span class="stringliteral">        String to validate.</span></div>
<div class="line"><span class="lineno">   37</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   38</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">   39</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral">    KeyError</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">      * If an invalid engine is passed.</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">    ImportError</span></div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral">      * If numexpr was requested but doesn&#39;t exist.</span></div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   45</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">    str</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">        Engine name.</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   50</span>    <span class="keyword">from</span> <a class="code hl_namespace" href="namespacepandas_1_1core_1_1computation_1_1check.html">pandas.core.computation.check</a> <span class="keyword">import</span> NUMEXPR_INSTALLED</div>
<div class="line"><span class="lineno">   51</span>    <span class="keyword">from</span> <a class="code hl_namespace" href="namespacepandas_1_1core_1_1computation_1_1expressions.html">pandas.core.computation.expressions</a> <span class="keyword">import</span> USE_NUMEXPR</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">if</span> engine <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   54</span>        engine = <span class="stringliteral">&quot;numexpr&quot;</span> <span class="keywordflow">if</span> USE_NUMEXPR <span class="keywordflow">else</span> <span class="stringliteral">&quot;python&quot;</span></div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">if</span> engine <span class="keywordflow">not</span> <span class="keywordflow">in</span> ENGINES:</div>
<div class="line"><span class="lineno">   57</span>        valid_engines = list(ENGINES.keys())</div>
<div class="line"><span class="lineno">   58</span>        <span class="keywordflow">raise</span> KeyError(</div>
<div class="line"><span class="lineno">   59</span>            f<span class="stringliteral">&quot;Invalid engine &#39;{engine}&#39; passed, valid engines are {valid_engines}&quot;</span></div>
<div class="line"><span class="lineno">   60</span>        )</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>    <span class="comment"># TODO: validate this in a more general way (thinking of future engines</span></div>
<div class="line"><span class="lineno">   63</span>    <span class="comment"># that won&#39;t necessarily be import-able)</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="comment"># Could potentially be done on engine instantiation</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="keywordflow">if</span> engine == <span class="stringliteral">&quot;numexpr&quot;</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> NUMEXPR_INSTALLED:</div>
<div class="line"><span class="lineno">   66</span>        <span class="keywordflow">raise</span> ImportError(</div>
<div class="line"><span class="lineno">   67</span>            <span class="stringliteral">&quot;&#39;numexpr&#39; is not installed or an unsupported version. Cannot use &quot;</span></div>
<div class="line"><span class="lineno">   68</span>            <span class="stringliteral">&quot;engine=&#39;numexpr&#39; for query/eval if &#39;numexpr&#39; is not installed&quot;</span></div>
<div class="line"><span class="lineno">   69</span>        )</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    <span class="keywordflow">return</span> engine</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="ttc" id="anamespacepandas_1_1core_1_1computation_1_1check_html"><div class="ttname"><a href="namespacepandas_1_1core_1_1computation_1_1check.html">pandas.core.computation.check</a></div><div class="ttdef"><b>Definition</b> check.py:1</div></div>
<div class="ttc" id="anamespacepandas_1_1core_1_1computation_1_1expressions_html"><div class="ttname"><a href="namespacepandas_1_1core_1_1computation_1_1expressions.html">pandas.core.computation.expressions</a></div><div class="ttdef"><b>Definition</b> expressions.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6df0114084c75bd8ac5e4b95b7131f1" name="af6df0114084c75bd8ac5e4b95b7131f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6df0114084c75bd8ac5e4b95b7131f1">&#9670;&#160;</a></span>_check_expression()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pandas.core.computation.eval._check_expression </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Make sure an expression is not an empty string

Parameters
----------
expr : object
    An object that can be converted to a string

Raises
------
ValueError
  * If expr is an empty string
</pre> <div class="fragment"><div class="line"><span class="lineno">  104</span><span class="keyword">def </span>_check_expression(expr):</div>
<div class="line"><span class="lineno">  105</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  106</span><span class="stringliteral">    Make sure an expression is not an empty string</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  108</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  109</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  110</span><span class="stringliteral">    expr : object</span></div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">        An object that can be converted to a string</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">    ValueError</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">      * If expr is an empty string</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> expr:</div>
<div class="line"><span class="lineno">  119</span>        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;expr cannot be an empty string&quot;</span>)</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a92434270931f75c723a94e94309030df" name="a92434270931f75c723a94e94309030df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92434270931f75c723a94e94309030df">&#9670;&#160;</a></span>_check_for_locals()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pandas.core.computation.eval._check_for_locals </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>expr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stack_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>parser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  151</span><span class="keyword">def </span>_check_for_locals(expr: str, stack_level: int, parser: str):</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    at_top_of_stack = stack_level == 0</div>
<div class="line"><span class="lineno">  154</span>    not_pandas_parser = parser != <span class="stringliteral">&quot;pandas&quot;</span></div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">if</span> not_pandas_parser:</div>
<div class="line"><span class="lineno">  157</span>        msg = <span class="stringliteral">&quot;The &#39;@&#39; prefix is only supported by the pandas parser&quot;</span></div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">elif</span> at_top_of_stack:</div>
<div class="line"><span class="lineno">  159</span>        msg = (</div>
<div class="line"><span class="lineno">  160</span>            <span class="stringliteral">&quot;The &#39;@&#39; prefix is not allowed in top-level eval calls.\n&quot;</span></div>
<div class="line"><span class="lineno">  161</span>            <span class="stringliteral">&quot;please refer to your variables by name without the &#39;@&#39; prefix.&quot;</span></div>
<div class="line"><span class="lineno">  162</span>        )</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">if</span> at_top_of_stack <span class="keywordflow">or</span> not_pandas_parser:</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">for</span> toknum, tokval <span class="keywordflow">in</span> tokenize_string(expr):</div>
<div class="line"><span class="lineno">  166</span>            <span class="keywordflow">if</span> toknum == tokenize.OP <span class="keywordflow">and</span> tokval == <span class="stringliteral">&quot;@&quot;</span>:</div>
<div class="line"><span class="lineno">  167</span>                <span class="keywordflow">raise</span> SyntaxError(msg)</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac124bb0f523bcdc62468fe85d45d3587" name="ac124bb0f523bcdc62468fe85d45d3587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac124bb0f523bcdc62468fe85d45d3587">&#9670;&#160;</a></span>_check_parser()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pandas.core.computation.eval._check_parser </td>
          <td>(</td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Make sure a valid parser is passed.

Parameters
----------
parser : str

Raises
------
KeyError
  * If an invalid parser is passed
</pre> <div class="fragment"><div class="line"><span class="lineno">   74</span><span class="keyword">def </span>_check_parser(parser: str):</div>
<div class="line"><span class="lineno">   75</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    Make sure a valid parser is passed.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">    parser : str</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">    KeyError</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">      * If an invalid parser is passed</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">if</span> parser <span class="keywordflow">not</span> <span class="keywordflow">in</span> PARSERS:</div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">raise</span> KeyError(</div>
<div class="line"><span class="lineno">   89</span>            f<span class="stringliteral">&quot;Invalid parser &#39;{parser}&#39; passed, valid parsers are {PARSERS.keys()}&quot;</span></div>
<div class="line"><span class="lineno">   90</span>        )</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a56eff271c576adbe955425832652ae81" name="a56eff271c576adbe955425832652ae81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56eff271c576adbe955425832652ae81">&#9670;&#160;</a></span>_check_resolvers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pandas.core.computation.eval._check_resolvers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>resolvers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   93</span><span class="keyword">def </span>_check_resolvers(resolvers):</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> resolvers <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">for</span> resolver <span class="keywordflow">in</span> resolvers:</div>
<div class="line"><span class="lineno">   96</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(resolver, <span class="stringliteral">&quot;__getitem__&quot;</span>):</div>
<div class="line"><span class="lineno">   97</span>                name = type(resolver).__name__</div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">raise</span> TypeError(</div>
<div class="line"><span class="lineno">   99</span>                    f<span class="stringliteral">&quot;Resolver of type &#39;{name}&#39; does not &quot;</span></div>
<div class="line"><span class="lineno">  100</span>                    <span class="stringliteral">&quot;implement the __getitem__ method&quot;</span></div>
<div class="line"><span class="lineno">  101</span>                )</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae72b940e8946ac357e85a1d88c9b761d" name="ae72b940e8946ac357e85a1d88c9b761d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72b940e8946ac357e85a1d88c9b761d">&#9670;&#160;</a></span>_convert_expression()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> str pandas.core.computation.eval._convert_expression </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Convert an object to an expression.

This function converts an object to an expression (a unicode string) and
checks to make sure it isn't empty after conversion. This is used to
convert operators to their string representation for recursive calls to
:func:`~pandas.eval`.

Parameters
----------
expr : object
    The object to be converted to a string.

Returns
-------
str
    The string representation of an object.

Raises
------
ValueError
  * If the expression is empty.
</pre> <div class="fragment"><div class="line"><span class="lineno">  122</span><span class="keyword">def </span>_convert_expression(expr) -&gt; str:</div>
<div class="line"><span class="lineno">  123</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral">    Convert an object to an expression.</span></div>
<div class="line"><span class="lineno">  125</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  126</span><span class="stringliteral">    This function converts an object to an expression (a unicode string) and</span></div>
<div class="line"><span class="lineno">  127</span><span class="stringliteral">    checks to make sure it isn&#39;t empty after conversion. This is used to</span></div>
<div class="line"><span class="lineno">  128</span><span class="stringliteral">    convert operators to their string representation for recursive calls to</span></div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">    :func:`~pandas.eval`.</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">    expr : object</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">        The object to be converted to a string.</span></div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">    str</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">        The string representation of an object.</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">    ValueError</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral">      * If the expression is empty.</span></div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  146</span>    s = pprint_thing(expr)</div>
<div class="line"><span class="lineno">  147</span>    _check_expression(s)</div>
<div class="line"><span class="lineno">  148</span>    <span class="keywordflow">return</span> s</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a94bb89708ef62680baf8127c0a32848a" name="a94bb89708ef62680baf8127c0a32848a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94bb89708ef62680baf8127c0a32848a">&#9670;&#160;</a></span>eval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.core.computation.eval.eval </td>
          <td>(</td>
          <td class="paramtype">str | <a class="el" href="classpandas_1_1core_1_1computation_1_1ops_1_1_bin_op.html">BinOp</a>&#160;</td>
          <td class="paramname"><em>expr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str &#160;</td>
          <td class="paramname"><em>parser</em> = <code>&quot;pandas&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str | None &#160;</td>
          <td class="paramname"><em>engine</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>truediv</em> = <code>no_default</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>local_dict</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_dict</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>resolvers</em> = <code>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>inplace</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Evaluate a Python expression as a string using various backends.

The following arithmetic operations are supported: ``+``, ``-``, ``*``,
``/``, ``**``, ``%``, ``//`` (python engine only) along with the following
boolean operations: ``|`` (or), ``&amp;`` (and), and ``~`` (not).
Additionally, the ``'pandas'`` parser allows the use of :keyword:`and`,
:keyword:`or`, and :keyword:`not` with the same semantics as the
corresponding bitwise operators.  :class:`~pandas.Series` and
:class:`~pandas.DataFrame` objects are supported and behave as they would
with plain ol' Python evaluation.

Parameters
----------
expr : str
    The expression to evaluate. This string cannot contain any Python
    `statements
    &lt;https://docs.python.org/3/reference/simple_stmts.html#simple-statements&gt;`__,
    only Python `expressions
    &lt;https://docs.python.org/3/reference/simple_stmts.html#expression-statements&gt;`__.
parser : {'pandas', 'python'}, default 'pandas'
    The parser to use to construct the syntax tree from the expression. The
    default of ``'pandas'`` parses code slightly different than standard
    Python. Alternatively, you can parse an expression using the
    ``'python'`` parser to retain strict Python semantics.  See the
    :ref:`enhancing performance &lt;enhancingperf.eval&gt;` documentation for
    more details.
engine : {'python', 'numexpr'}, default 'numexpr'

    The engine used to evaluate the expression. Supported engines are

    - None : tries to use ``numexpr``, falls back to ``python``
    - ``'numexpr'`` : This default engine evaluates pandas objects using
      numexpr for large speed ups in complex expressions with large frames.
    - ``'python'`` : Performs operations as if you had ``eval``'d in top
      level python. This engine is generally not that useful.

    More backends may be available in the future.

truediv : bool, optional
    Whether to use true division, like in Python &gt;= 3.

    .. deprecated:: 1.0.0

local_dict : dict or None, optional
    A dictionary of local variables, taken from locals() by default.
global_dict : dict or None, optional
    A dictionary of global variables, taken from globals() by default.
resolvers : list of dict-like or None, optional
    A list of objects implementing the ``__getitem__`` special method that
    you can use to inject an additional collection of namespaces to use for
    variable lookup. For example, this is used in the
    :meth:`~DataFrame.query` method to inject the
    ``DataFrame.index`` and ``DataFrame.columns``
    variables that refer to their respective :class:`~pandas.DataFrame`
    instance attributes.
level : int, optional
    The number of prior stack frames to traverse and add to the current
    scope. Most users will **not** need to change this parameter.
target : object, optional, default None
    This is the target object for assignment. It is used when there is
    variable assignment in the expression. If so, then `target` must
    support item assignment with string keys, and if a copy is being
    returned, it must also support `.copy()`.
inplace : bool, default False
    If `target` is provided, and the expression mutates `target`, whether
    to modify `target` inplace. Otherwise, return a copy of `target` with
    the mutation.

Returns
-------
ndarray, numeric scalar, DataFrame, Series, or None
    The completion value of evaluating the given code or None if ``inplace=True``.

Raises
------
ValueError
    There are many instances where such an error can be raised:

    - `target=None`, but the expression is multiline.
    - The expression is multiline, but not all them have item assignment.
      An example of such an arrangement is this:

      a = b + 1
      a + 2

      Here, there are expressions on different lines, making it multiline,
      but the last line has no variable assigned to the output of `a + 2`.
    - `inplace=True`, but the expression is missing item assignment.
    - Item assignment is provided, but the `target` does not support
      string item assignment.
    - Item assignment is provided and `inplace=False`, but the `target`
      does not support the `.copy()` method

See Also
--------
DataFrame.query : Evaluates a boolean expression to query the columns
        of a frame.
DataFrame.eval : Evaluate a string describing operations on
        DataFrame columns.

Notes
-----
The ``dtype`` of any objects involved in an arithmetic ``%`` operation are
recursively cast to ``float64``.

See the :ref:`enhancing performance &lt;enhancingperf.eval&gt;` documentation for
more details.

Examples
--------
&gt;&gt;&gt; df = pd.DataFrame({"animal": ["dog", "pig"], "age": [10, 20]})
&gt;&gt;&gt; df
  animal  age
0    dog   10
1    pig   20

We can add a new column using ``pd.eval``:

&gt;&gt;&gt; pd.eval("double_age = df.age * 2", target=df)
  animal  age  double_age
0    dog   10          20
1    pig   20          40
</pre> <div class="fragment"><div class="line"><span class="lineno">  181</span>):</div>
<div class="line"><span class="lineno">  182</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  183</span><span class="stringliteral">    Evaluate a Python expression as a string using various backends.</span></div>
<div class="line"><span class="lineno">  184</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  185</span><span class="stringliteral">    The following arithmetic operations are supported: ``+``, ``-``, ``*``,</span></div>
<div class="line"><span class="lineno">  186</span><span class="stringliteral">    ``/``, ``**``, ``%``, ``//`` (python engine only) along with the following</span></div>
<div class="line"><span class="lineno">  187</span><span class="stringliteral">    boolean operations: ``|`` (or), ``&amp;`` (and), and ``~`` (not).</span></div>
<div class="line"><span class="lineno">  188</span><span class="stringliteral">    Additionally, the ``&#39;pandas&#39;`` parser allows the use of :keyword:`and`,</span></div>
<div class="line"><span class="lineno">  189</span><span class="stringliteral">    :keyword:`or`, and :keyword:`not` with the same semantics as the</span></div>
<div class="line"><span class="lineno">  190</span><span class="stringliteral">    corresponding bitwise operators.  :class:`~pandas.Series` and</span></div>
<div class="line"><span class="lineno">  191</span><span class="stringliteral">    :class:`~pandas.DataFrame` objects are supported and behave as they would</span></div>
<div class="line"><span class="lineno">  192</span><span class="stringliteral">    with plain ol&#39; Python evaluation.</span></div>
<div class="line"><span class="lineno">  193</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  194</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  195</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  196</span><span class="stringliteral">    expr : str</span></div>
<div class="line"><span class="lineno">  197</span><span class="stringliteral">        The expression to evaluate. This string cannot contain any Python</span></div>
<div class="line"><span class="lineno">  198</span><span class="stringliteral">        `statements</span></div>
<div class="line"><span class="lineno">  199</span><span class="stringliteral">        &lt;https://docs.python.org/3/reference/simple_stmts.html#simple-statements&gt;`__,</span></div>
<div class="line"><span class="lineno">  200</span><span class="stringliteral">        only Python `expressions</span></div>
<div class="line"><span class="lineno">  201</span><span class="stringliteral">        &lt;https://docs.python.org/3/reference/simple_stmts.html#expression-statements&gt;`__.</span></div>
<div class="line"><span class="lineno">  202</span><span class="stringliteral">    parser : {&#39;pandas&#39;, &#39;python&#39;}, default &#39;pandas&#39;</span></div>
<div class="line"><span class="lineno">  203</span><span class="stringliteral">        The parser to use to construct the syntax tree from the expression. The</span></div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral">        default of ``&#39;pandas&#39;`` parses code slightly different than standard</span></div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">        Python. Alternatively, you can parse an expression using the</span></div>
<div class="line"><span class="lineno">  206</span><span class="stringliteral">        ``&#39;python&#39;`` parser to retain strict Python semantics.  See the</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">        :ref:`enhancing performance &lt;enhancingperf.eval&gt;` documentation for</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral">        more details.</span></div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">    engine : {&#39;python&#39;, &#39;numexpr&#39;}, default &#39;numexpr&#39;</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral">        The engine used to evaluate the expression. Supported engines are</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">        - None : tries to use ``numexpr``, falls back to ``python``</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">        - ``&#39;numexpr&#39;`` : This default engine evaluates pandas objects using</span></div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral">          numexpr for large speed ups in complex expressions with large frames.</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">        - ``&#39;python&#39;`` : Performs operations as if you had ``eval``&#39;d in top</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">          level python. This engine is generally not that useful.</span></div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">        More backends may be available in the future.</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">    truediv : bool, optional</span></div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">        Whether to use true division, like in Python &gt;= 3.</span></div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">        .. deprecated:: 1.0.0</span></div>
<div class="line"><span class="lineno">  225</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  226</span><span class="stringliteral">    local_dict : dict or None, optional</span></div>
<div class="line"><span class="lineno">  227</span><span class="stringliteral">        A dictionary of local variables, taken from locals() by default.</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral">    global_dict : dict or None, optional</span></div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral">        A dictionary of global variables, taken from globals() by default.</span></div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">    resolvers : list of dict-like or None, optional</span></div>
<div class="line"><span class="lineno">  231</span><span class="stringliteral">        A list of objects implementing the ``__getitem__`` special method that</span></div>
<div class="line"><span class="lineno">  232</span><span class="stringliteral">        you can use to inject an additional collection of namespaces to use for</span></div>
<div class="line"><span class="lineno">  233</span><span class="stringliteral">        variable lookup. For example, this is used in the</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">        :meth:`~DataFrame.query` method to inject the</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">        ``DataFrame.index`` and ``DataFrame.columns``</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">        variables that refer to their respective :class:`~pandas.DataFrame`</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">        instance attributes.</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">    level : int, optional</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">        The number of prior stack frames to traverse and add to the current</span></div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral">        scope. Most users will **not** need to change this parameter.</span></div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">    target : object, optional, default None</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">        This is the target object for assignment. It is used when there is</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">        variable assignment in the expression. If so, then `target` must</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">        support item assignment with string keys, and if a copy is being</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">        returned, it must also support `.copy()`.</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">    inplace : bool, default False</span></div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">        If `target` is provided, and the expression mutates `target`, whether</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">        to modify `target` inplace. Otherwise, return a copy of `target` with</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">        the mutation.</span></div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">    ndarray, numeric scalar, DataFrame, Series, or None</span></div>
<div class="line"><span class="lineno">  254</span><span class="stringliteral">        The completion value of evaluating the given code or None if ``inplace=True``.</span></div>
<div class="line"><span class="lineno">  255</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral">    Raises</span></div>
<div class="line"><span class="lineno">  257</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">  258</span><span class="stringliteral">    ValueError</span></div>
<div class="line"><span class="lineno">  259</span><span class="stringliteral">        There are many instances where such an error can be raised:</span></div>
<div class="line"><span class="lineno">  260</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  261</span><span class="stringliteral">        - `target=None`, but the expression is multiline.</span></div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral">        - The expression is multiline, but not all them have item assignment.</span></div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">          An example of such an arrangement is this:</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">          a = b + 1</span></div>
<div class="line"><span class="lineno">  266</span><span class="stringliteral">          a + 2</span></div>
<div class="line"><span class="lineno">  267</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  268</span><span class="stringliteral">          Here, there are expressions on different lines, making it multiline,</span></div>
<div class="line"><span class="lineno">  269</span><span class="stringliteral">          but the last line has no variable assigned to the output of `a + 2`.</span></div>
<div class="line"><span class="lineno">  270</span><span class="stringliteral">        - `inplace=True`, but the expression is missing item assignment.</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">        - Item assignment is provided, but the `target` does not support</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral">          string item assignment.</span></div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">        - Item assignment is provided and `inplace=False`, but the `target`</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral">          does not support the `.copy()` method</span></div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral">    See Also</span></div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">    DataFrame.query : Evaluates a boolean expression to query the columns</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">            of a frame.</span></div>
<div class="line"><span class="lineno">  280</span><span class="stringliteral">    DataFrame.eval : Evaluate a string describing operations on</span></div>
<div class="line"><span class="lineno">  281</span><span class="stringliteral">            DataFrame columns.</span></div>
<div class="line"><span class="lineno">  282</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  283</span><span class="stringliteral">    Notes</span></div>
<div class="line"><span class="lineno">  284</span><span class="stringliteral">    -----</span></div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral">    The ``dtype`` of any objects involved in an arithmetic ``%`` operation are</span></div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral">    recursively cast to ``float64``.</span></div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">    See the :ref:`enhancing performance &lt;enhancingperf.eval&gt;` documentation for</span></div>
<div class="line"><span class="lineno">  289</span><span class="stringliteral">    more details.</span></div>
<div class="line"><span class="lineno">  290</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  291</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  292</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  293</span><span class="stringliteral">    &gt;&gt;&gt; df = pd.DataFrame({&quot;animal&quot;: [&quot;dog&quot;, &quot;pig&quot;], &quot;age&quot;: [10, 20]})</span></div>
<div class="line"><span class="lineno">  294</span><span class="stringliteral">    &gt;&gt;&gt; df</span></div>
<div class="line"><span class="lineno">  295</span><span class="stringliteral">      animal  age</span></div>
<div class="line"><span class="lineno">  296</span><span class="stringliteral">    0    dog   10</span></div>
<div class="line"><span class="lineno">  297</span><span class="stringliteral">    1    pig   20</span></div>
<div class="line"><span class="lineno">  298</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral">    We can add a new column using ``pd.eval``:</span></div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">    &gt;&gt;&gt; pd.eval(&quot;double_age = df.age * 2&quot;, target=df)</span></div>
<div class="line"><span class="lineno">  302</span><span class="stringliteral">      animal  age  double_age</span></div>
<div class="line"><span class="lineno">  303</span><span class="stringliteral">    0    dog   10          20</span></div>
<div class="line"><span class="lineno">  304</span><span class="stringliteral">    1    pig   20          40</span></div>
<div class="line"><span class="lineno">  305</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  306</span>    inplace = validate_bool_kwarg(inplace, <span class="stringliteral">&quot;inplace&quot;</span>)</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordflow">if</span> truediv <span class="keywordflow">is</span> <span class="keywordflow">not</span> no_default:</div>
<div class="line"><span class="lineno">  309</span>        warnings.warn(</div>
<div class="line"><span class="lineno">  310</span>            (</div>
<div class="line"><span class="lineno">  311</span>                <span class="stringliteral">&quot;The `truediv` parameter in pd.eval is deprecated and &quot;</span></div>
<div class="line"><span class="lineno">  312</span>                <span class="stringliteral">&quot;will be removed in a future version.&quot;</span></div>
<div class="line"><span class="lineno">  313</span>            ),</div>
<div class="line"><span class="lineno">  314</span>            FutureWarning,</div>
<div class="line"><span class="lineno">  315</span>            stacklevel=find_stack_level(),</div>
<div class="line"><span class="lineno">  316</span>        )</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>    exprs: list[str | BinOp]</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">if</span> isinstance(expr, str):</div>
<div class="line"><span class="lineno">  320</span>        _check_expression(expr)</div>
<div class="line"><span class="lineno">  321</span>        exprs = [e.strip() <span class="keywordflow">for</span> e <span class="keywordflow">in</span> expr.splitlines() <span class="keywordflow">if</span> e.strip() != <span class="stringliteral">&quot;&quot;</span>]</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  323</span>        <span class="comment"># ops.BinOp; for internal compat, not intended to be passed by users</span></div>
<div class="line"><span class="lineno">  324</span>        exprs = [expr]</div>
<div class="line"><span class="lineno">  325</span>    multi_line = len(exprs) &gt; 1</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">if</span> multi_line <span class="keywordflow">and</span> target <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  329</span>            <span class="stringliteral">&quot;multi-line expressions are only valid in the &quot;</span></div>
<div class="line"><span class="lineno">  330</span>            <span class="stringliteral">&quot;context of data, use DataFrame.eval&quot;</span></div>
<div class="line"><span class="lineno">  331</span>        )</div>
<div class="line"><span class="lineno">  332</span>    engine = _check_engine(engine)</div>
<div class="line"><span class="lineno">  333</span>    _check_parser(parser)</div>
<div class="line"><span class="lineno">  334</span>    _check_resolvers(resolvers)</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>    ret = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  337</span>    first_expr = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  338</span>    target_modified = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">for</span> expr <span class="keywordflow">in</span> exprs:</div>
<div class="line"><span class="lineno">  341</span>        expr = _convert_expression(expr)</div>
<div class="line"><span class="lineno">  342</span>        _check_for_locals(expr, level, parser)</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>        <span class="comment"># get our (possibly passed-in) scope</span></div>
<div class="line"><span class="lineno">  345</span>        env = ensure_scope(</div>
<div class="line"><span class="lineno">  346</span>            level + 1,</div>
<div class="line"><span class="lineno">  347</span>            global_dict=global_dict,</div>
<div class="line"><span class="lineno">  348</span>            local_dict=local_dict,</div>
<div class="line"><span class="lineno">  349</span>            resolvers=resolvers,</div>
<div class="line"><span class="lineno">  350</span>            target=target,</div>
<div class="line"><span class="lineno">  351</span>        )</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>        parsed_expr = Expr(expr, engine=engine, parser=parser, env=env)</div>
<div class="line"><span class="lineno">  354</span> </div>
<div class="line"><span class="lineno">  355</span>        <span class="comment"># construct the engine and evaluate the parsed expression</span></div>
<div class="line"><span class="lineno">  356</span>        eng = ENGINES[engine]</div>
<div class="line"><span class="lineno">  357</span>        eng_inst = eng(parsed_expr)</div>
<div class="line"><span class="lineno">  358</span>        ret = eng_inst.evaluate()</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>        <span class="keywordflow">if</span> parsed_expr.assigner <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  361</span>            <span class="keywordflow">if</span> multi_line:</div>
<div class="line"><span class="lineno">  362</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  363</span>                    <span class="stringliteral">&quot;Multi-line expressions are only valid &quot;</span></div>
<div class="line"><span class="lineno">  364</span>                    <span class="stringliteral">&quot;if all expressions contain an assignment&quot;</span></div>
<div class="line"><span class="lineno">  365</span>                )</div>
<div class="line"><span class="lineno">  366</span>            <span class="keywordflow">elif</span> inplace:</div>
<div class="line"><span class="lineno">  367</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Cannot operate inplace if there is no assignment&quot;</span>)</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>        <span class="comment"># assign if needed</span></div>
<div class="line"><span class="lineno">  370</span>        assigner = parsed_expr.assigner</div>
<div class="line"><span class="lineno">  371</span>        <span class="keywordflow">if</span> env.target <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> assigner <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  372</span>            target_modified = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>            <span class="comment"># if returning a copy, copy only on the first assignment</span></div>
<div class="line"><span class="lineno">  375</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> inplace <span class="keywordflow">and</span> first_expr:</div>
<div class="line"><span class="lineno">  376</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  377</span>                    target = env.target.copy()</div>
<div class="line"><span class="lineno">  378</span>                <span class="keywordflow">except</span> AttributeError <span class="keyword">as</span> err:</div>
<div class="line"><span class="lineno">  379</span>                    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Cannot return a copy of the target&quot;</span>) <span class="keyword">from</span> err</div>
<div class="line"><span class="lineno">  380</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  381</span>                target = env.target</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>            <span class="comment"># TypeError is most commonly raised (e.g. int, list), but you</span></div>
<div class="line"><span class="lineno">  384</span>            <span class="comment"># get IndexError if you try to do this assignment on np.ndarray.</span></div>
<div class="line"><span class="lineno">  385</span>            <span class="comment"># we will ignore numpy warnings here; e.g. if trying</span></div>
<div class="line"><span class="lineno">  386</span>            <span class="comment"># to use a non-numeric indexer</span></div>
<div class="line"><span class="lineno">  387</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  388</span>                <span class="keyword">with</span> warnings.catch_warnings(record=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno">  389</span>                    <span class="comment"># TODO: Filter the warnings we actually care about here.</span></div>
<div class="line"><span class="lineno">  390</span>                    <span class="keywordflow">if</span> inplace <span class="keywordflow">and</span> isinstance(target, NDFrame):</div>
<div class="line"><span class="lineno">  391</span>                        target.loc[:, assigner] = ret</div>
<div class="line"><span class="lineno">  392</span>                    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  393</span>                        target[assigner] = ret</div>
<div class="line"><span class="lineno">  394</span>            <span class="keywordflow">except</span> (TypeError, IndexError) <span class="keyword">as</span> err:</div>
<div class="line"><span class="lineno">  395</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Cannot assign expression output to target&quot;</span>) <span class="keyword">from</span> err</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> resolvers:</div>
<div class="line"><span class="lineno">  398</span>                resolvers = ({assigner: ret},)</div>
<div class="line"><span class="lineno">  399</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  400</span>                <span class="comment"># existing resolver needs updated to handle</span></div>
<div class="line"><span class="lineno">  401</span>                <span class="comment"># case of mutating existing column in copy</span></div>
<div class="line"><span class="lineno">  402</span>                <span class="keywordflow">for</span> resolver <span class="keywordflow">in</span> resolvers:</div>
<div class="line"><span class="lineno">  403</span>                    <span class="keywordflow">if</span> assigner <span class="keywordflow">in</span> resolver:</div>
<div class="line"><span class="lineno">  404</span>                        resolver[assigner] = ret</div>
<div class="line"><span class="lineno">  405</span>                        <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  406</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  407</span>                    resolvers += ({assigner: ret},)</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>            ret = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  410</span>            first_expr = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>    <span class="comment"># We want to exclude `inplace=None` as being False.</span></div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">if</span> inplace <span class="keywordflow">is</span> <span class="keyword">False</span>:</div>
<div class="line"><span class="lineno">  414</span>        <span class="keywordflow">return</span> target <span class="keywordflow">if</span> target_modified <span class="keywordflow">else</span> ret</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
