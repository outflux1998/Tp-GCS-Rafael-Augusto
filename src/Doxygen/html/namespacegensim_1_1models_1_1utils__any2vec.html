<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: gensim.models.utils_any2vec Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegensim.html">gensim</a></li><li class="navelem"><a class="el" href="namespacegensim_1_1models.html">models</a></li><li class="navelem"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html">utils_any2vec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">gensim.models.utils_any2vec Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa3295a1740c71fd636af85994835bd5b" id="r_aa3295a1740c71fd636af85994835bd5b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#aa3295a1740c71fd636af85994835bd5b">_byte_to_int_py3</a> (b)</td></tr>
<tr class="separator:aa3295a1740c71fd636af85994835bd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ebb6d6fcce8c58d4ccc3886ff4b9044" id="r_a8ebb6d6fcce8c58d4ccc3886ff4b9044"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a8ebb6d6fcce8c58d4ccc3886ff4b9044">_byte_to_int_py2</a> (b)</td></tr>
<tr class="separator:a8ebb6d6fcce8c58d4ccc3886ff4b9044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b13c7c2c5d6b38ae4fec2c97431a6f8" id="r_a3b13c7c2c5d6b38ae4fec2c97431a6f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a3b13c7c2c5d6b38ae4fec2c97431a6f8">_is_utf8_continue</a> (b)</td></tr>
<tr class="separator:a3b13c7c2c5d6b38ae4fec2c97431a6f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3475a2ba60660a162c75321bb8707185" id="r_a3475a2ba60660a162c75321bb8707185"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a3475a2ba60660a162c75321bb8707185">ft_ngram_hashes</a> (word, minn, maxn, num_buckets, fb_compatible=True)</td></tr>
<tr class="separator:a3475a2ba60660a162c75321bb8707185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a010ccac3c7db3b44d8bba334386c0" id="r_af9a010ccac3c7db3b44d8bba334386c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#af9a010ccac3c7db3b44d8bba334386c0">_save_word2vec_format</a> (fname, vocab, vectors, fvocab=None, binary=False, total_vec=None)</td></tr>
<tr class="separator:af9a010ccac3c7db3b44d8bba334386c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae046e39881158f5285a646788365618f" id="r_ae046e39881158f5285a646788365618f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#ae046e39881158f5285a646788365618f">_add_word_to_result</a> (result, counts, word, weights, vocab_size)</td></tr>
<tr class="separator:ae046e39881158f5285a646788365618f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98148809085a5ae63739293b678c9f4" id="r_ae98148809085a5ae63739293b678c9f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#ae98148809085a5ae63739293b678c9f4">_add_bytes_to_result</a> (result, counts, chunk, vocab_size, vector_size, datatype, unicode_errors)</td></tr>
<tr class="separator:ae98148809085a5ae63739293b678c9f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a7b0acef24f8e782a4c7c75dfdecb25" id="r_a6a7b0acef24f8e782a4c7c75dfdecb25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a6a7b0acef24f8e782a4c7c75dfdecb25">_word2vec_read_binary</a> (fin, result, counts, vocab_size, vector_size, datatype, unicode_errors, binary_chunk_size)</td></tr>
<tr class="separator:a6a7b0acef24f8e782a4c7c75dfdecb25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69cf77ada8e5c77293958e719bbb0f55" id="r_a69cf77ada8e5c77293958e719bbb0f55"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a69cf77ada8e5c77293958e719bbb0f55">_word2vec_read_text</a> (fin, result, counts, vocab_size, vector_size, datatype, unicode_errors, encoding)</td></tr>
<tr class="separator:a69cf77ada8e5c77293958e719bbb0f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a796e6aebea8c374f57df562988d4431e" id="r_a796e6aebea8c374f57df562988d4431e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a796e6aebea8c374f57df562988d4431e">_load_word2vec_format</a> (cls, fname, fvocab=None, binary=False, encoding='utf8', unicode_errors='strict', limit=None, datatype=REAL, binary_chunk_size=100 *1024)</td></tr>
<tr class="separator:a796e6aebea8c374f57df562988d4431e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6ea2605a5c99c66bbd637eb7eecbf412" id="r_a6ea2605a5c99c66bbd637eb7eecbf412"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a6ea2605a5c99c66bbd637eb7eecbf412">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:a6ea2605a5c99c66bbd637eb7eecbf412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab245df469c3bdcc383a9674fc6ea51" id="r_a2ab245df469c3bdcc383a9674fc6ea51"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a2ab245df469c3bdcc383a9674fc6ea51">_MB_MASK</a> = 0xC0</td></tr>
<tr class="separator:a2ab245df469c3bdcc383a9674fc6ea51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab89a09acbfda3dec85ad4a021a0d4464" id="r_ab89a09acbfda3dec85ad4a021a0d4464"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#ab89a09acbfda3dec85ad4a021a0d4464">_MB_START</a> = 0x80</td></tr>
<tr class="separator:ab89a09acbfda3dec85ad4a021a0d4464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6d96dc7c72cc48d7489945f505388c" id="r_aed6d96dc7c72cc48d7489945f505388c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#aed6d96dc7c72cc48d7489945f505388c">_byte_to_int</a> = <a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a8ebb6d6fcce8c58d4ccc3886ff4b9044">_byte_to_int_py2</a> if PY2 else <a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#aa3295a1740c71fd636af85994835bd5b">_byte_to_int_py3</a></td></tr>
<tr class="separator:aed6d96dc7c72cc48d7489945f505388c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">General functions used for any2vec models.

One of the goals of this module is to provide an abstraction over the Cython
extensions for FastText.  If they are not available, then the module substitutes
slower Python versions in their place.

Another related set of FastText functionality is computing ngrams for a word.
The :py:func:`compute_ngrams` and :py:func:`compute_ngrams_bytes` hashes achieve that.

Closely related is the functionality for hashing ngrams, implemented by the
:py:func:`ft_hash` and :py:func:`ft_hash_broken` functions.
The module exposes "working" and "broken" hash functions in order to maintain
backwards compatibility with older versions of Gensim.

For compatibility with older Gensim, use :py:func:`compute_ngrams` and
:py:func:`ft_hash_broken` to has each ngram.  For compatibility with the
current Facebook implementation, use :py:func:`compute_ngrams_bytes` and
:py:func:`ft_hash_bytes`.</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="ae98148809085a5ae63739293b678c9f4" name="ae98148809085a5ae63739293b678c9f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae98148809085a5ae63739293b678c9f4">&#9670;&#160;</a></span>_add_bytes_to_result()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._add_bytes_to_result </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>chunk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vocab_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vector_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>unicode_errors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  174</span><span class="keyword">def </span>_add_bytes_to_result(result, counts, chunk, vocab_size, vector_size, datatype, unicode_errors):</div>
<div class="line"><span class="lineno">  175</span>    start = 0</div>
<div class="line"><span class="lineno">  176</span>    processed_words = 0</div>
<div class="line"><span class="lineno">  177</span>    bytes_per_vector = vector_size * <a class="code hl_namespace" href="namespacedtype.html">dtype</a>(REAL).itemsize</div>
<div class="line"><span class="lineno">  178</span>    max_words = vocab_size - len(result.vocab)</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(max_words):</div>
<div class="line"><span class="lineno">  180</span>        i_space = chunk.find(b<span class="stringliteral">&#39; &#39;</span>, start)</div>
<div class="line"><span class="lineno">  181</span>        i_vector = i_space + 1</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span> i_space == -1 <span class="keywordflow">or</span> (len(chunk) - i_vector) &lt; bytes_per_vector:</div>
<div class="line"><span class="lineno">  184</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>        word = chunk[start:i_space].decode(<span class="stringliteral">&quot;utf-8&quot;</span>, errors=unicode_errors)</div>
<div class="line"><span class="lineno">  187</span>        <span class="comment"># Some binary files are reported to have obsolete new line in the beginning of word, remove it</span></div>
<div class="line"><span class="lineno">  188</span>        word = word.lstrip(<span class="stringliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  189</span>        vector = frombuffer(chunk, offset=i_vector, count=vector_size, dtype=REAL).astype(datatype)</div>
<div class="line"><span class="lineno">  190</span>        _add_word_to_result(result, counts, word, vector, vocab_size)</div>
<div class="line"><span class="lineno">  191</span>        start = i_vector + bytes_per_vector</div>
<div class="line"><span class="lineno">  192</span>        processed_words += 1</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">return</span> processed_words, chunk[start:]</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="ttc" id="anamespacedtype_html"><div class="ttname"><a href="namespacedtype.html">dtype</a></div><div class="ttdef"><b>Definition</b> dtype.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae046e39881158f5285a646788365618f" name="ae046e39881158f5285a646788365618f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae046e39881158f5285a646788365618f">&#9670;&#160;</a></span>_add_word_to_result()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._add_word_to_result </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vocab_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  153</span><span class="keyword">def </span>_add_word_to_result(result, counts, word, weights, vocab_size):</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>    word_id = len(result.vocab)</div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">if</span> word <span class="keywordflow">in</span> result.vocab:</div>
<div class="line"><span class="lineno">  157</span>        logger.warning(<span class="stringliteral">&quot;duplicate word &#39;%s&#39; in word2vec file, ignoring all but first&quot;</span>, word)</div>
<div class="line"><span class="lineno">  158</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">if</span> counts <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  160</span>        <span class="comment"># most common scenario: no vocab file given. just make up some bogus counts, in descending order</span></div>
<div class="line"><span class="lineno">  161</span>        word_count = vocab_size - word_id</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">elif</span> word <span class="keywordflow">in</span> counts:</div>
<div class="line"><span class="lineno">  163</span>        <span class="comment"># use count from the vocab file</span></div>
<div class="line"><span class="lineno">  164</span>        word_count = counts[word]</div>
<div class="line"><span class="lineno">  165</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  166</span>        logger.warning(<span class="stringliteral">&quot;vocabulary file is incomplete: &#39;%s&#39; is missing&quot;</span>, word)</div>
<div class="line"><span class="lineno">  167</span>        word_count = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    result.vocab[word] = <a class="code hl_class" href="classgensim_1_1models_1_1keyedvectors_1_1_vocab.html">gensim.models.keyedvectors.Vocab</a>(index=word_id, count=word_count)</div>
<div class="line"><span class="lineno">  170</span>    result.vectors[word_id] = weights</div>
<div class="line"><span class="lineno">  171</span>    result.index2word.append(word)</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="ttc" id="aclassgensim_1_1models_1_1keyedvectors_1_1_vocab_html"><div class="ttname"><a href="classgensim_1_1models_1_1keyedvectors_1_1_vocab.html">gensim.models.keyedvectors.Vocab</a></div><div class="ttdef"><b>Definition</b> keyedvectors.py:198</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ebb6d6fcce8c58d4ccc3886ff4b9044" name="a8ebb6d6fcce8c58d4ccc3886ff4b9044"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ebb6d6fcce8c58d4ccc3886ff4b9044">&#9670;&#160;</a></span>_byte_to_int_py2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._byte_to_int_py2 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   52</span><span class="keyword">def </span>_byte_to_int_py2(b):</div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">return</span> ord(b)</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3295a1740c71fd636af85994835bd5b" name="aa3295a1740c71fd636af85994835bd5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3295a1740c71fd636af85994835bd5b">&#9670;&#160;</a></span>_byte_to_int_py3()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._byte_to_int_py3 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   48</span><span class="keyword">def </span>_byte_to_int_py3(b):</div>
<div class="line"><span class="lineno">   49</span>    <span class="keywordflow">return</span> b</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b13c7c2c5d6b38ae4fec2c97431a6f8" name="a3b13c7c2c5d6b38ae4fec2c97431a6f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b13c7c2c5d6b38ae4fec2c97431a6f8">&#9670;&#160;</a></span>_is_utf8_continue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._is_utf8_continue </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   59</span><span class="keyword">def </span>_is_utf8_continue(b):</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">return</span> _byte_to_int(b) &amp; _MB_MASK == _MB_START</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a796e6aebea8c374f57df562988d4431e" name="a796e6aebea8c374f57df562988d4431e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a796e6aebea8c374f57df562988d4431e">&#9670;&#160;</a></span>_load_word2vec_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._load_word2vec_format </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fvocab</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>binary</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoding</em> = <code>'utf8'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>unicode_errors</em> = <code>'strict'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>limit</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>datatype</em> = <code>REAL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>binary_chunk_size</em> = <code>100&#160;*&#160;1024</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Load the input-hidden weight matrix from the original C word2vec-tool format.

Note that the information stored in the file is incomplete (the binary tree is missing),
so while you can query for word similarity etc., you cannot continue training
with a model loaded this way.

Parameters
----------
fname : str
    The file path to the saved word2vec-format file.
fvocab : str, optional
    File path to the vocabulary.Word counts are read from `fvocab` filename, if set
    (this is the file generated by `-save-vocab` flag of the original C tool).
binary : bool, optional
    If True, indicates whether the data is in binary word2vec format.
encoding : str, optional
    If you trained the C model using non-utf8 encoding for words, specify that encoding in `encoding`.
unicode_errors : str, optional
    default 'strict', is a string suitable to be passed as the `errors`
    argument to the unicode() (Python 2.x) or str() (Python 3.x) function. If your source
    file may include word tokens truncated in the middle of a multibyte unicode character
    (as is common from the original word2vec.c tool), 'ignore' or 'replace' may help.
limit : int, optional
    Sets a maximum number of word-vectors to read from the file. The default,
    None, means read all.
datatype : type, optional
    (Experimental) Can coerce dimensions to a non-default float type (such as `np.float16`) to save memory.
    Such types may result in much slower bulk operations or incompatibility with optimized routines.)
binary_chunk_size : int, optional
    Read input file in chunks of this many bytes for performance reasons.

Returns
-------
object
    Returns the loaded model as an instance of :class:`cls`.</pre> <div class="fragment"><div class="line"><span class="lineno">  226</span>                          limit=<span class="keywordtype">None</span>, datatype=REAL, binary_chunk_size=100 * 1024):</div>
<div class="line"><span class="lineno">  227</span>    <span class="stringliteral">&quot;&quot;&quot;Load the input-hidden weight matrix from the original C word2vec-tool format.</span></div>
<div class="line"><span class="lineno">  228</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  229</span><span class="stringliteral">    Note that the information stored in the file is incomplete (the binary tree is missing),</span></div>
<div class="line"><span class="lineno">  230</span><span class="stringliteral">    so while you can query for word similarity etc., you cannot continue training</span></div>
<div class="line"><span class="lineno">  231</span><span class="stringliteral">    with a model loaded this way.</span></div>
<div class="line"><span class="lineno">  232</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  233</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  234</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  235</span><span class="stringliteral">    fname : str</span></div>
<div class="line"><span class="lineno">  236</span><span class="stringliteral">        The file path to the saved word2vec-format file.</span></div>
<div class="line"><span class="lineno">  237</span><span class="stringliteral">    fvocab : str, optional</span></div>
<div class="line"><span class="lineno">  238</span><span class="stringliteral">        File path to the vocabulary.Word counts are read from `fvocab` filename, if set</span></div>
<div class="line"><span class="lineno">  239</span><span class="stringliteral">        (this is the file generated by `-save-vocab` flag of the original C tool).</span></div>
<div class="line"><span class="lineno">  240</span><span class="stringliteral">    binary : bool, optional</span></div>
<div class="line"><span class="lineno">  241</span><span class="stringliteral">        If True, indicates whether the data is in binary word2vec format.</span></div>
<div class="line"><span class="lineno">  242</span><span class="stringliteral">    encoding : str, optional</span></div>
<div class="line"><span class="lineno">  243</span><span class="stringliteral">        If you trained the C model using non-utf8 encoding for words, specify that encoding in `encoding`.</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">    unicode_errors : str, optional</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">        default &#39;strict&#39;, is a string suitable to be passed as the `errors`</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral">        argument to the unicode() (Python 2.x) or str() (Python 3.x) function. If your source</span></div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">        file may include word tokens truncated in the middle of a multibyte unicode character</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">        (as is common from the original word2vec.c tool), &#39;ignore&#39; or &#39;replace&#39; may help.</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">    limit : int, optional</span></div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral">        Sets a maximum number of word-vectors to read from the file. The default,</span></div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">        None, means read all.</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral">    datatype : type, optional</span></div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">        (Experimental) Can coerce dimensions to a non-default float type (such as `np.float16`) to save memory.</span></div>
<div class="line"><span class="lineno">  254</span><span class="stringliteral">        Such types may result in much slower bulk operations or incompatibility with optimized routines.)</span></div>
<div class="line"><span class="lineno">  255</span><span class="stringliteral">    binary_chunk_size : int, optional</span></div>
<div class="line"><span class="lineno">  256</span><span class="stringliteral">        Read input file in chunks of this many bytes for performance reasons.</span></div>
<div class="line"><span class="lineno">  257</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  258</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  259</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  260</span><span class="stringliteral">    object</span></div>
<div class="line"><span class="lineno">  261</span><span class="stringliteral">        Returns the loaded model as an instance of :class:`cls`.</span></div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>    counts = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">if</span> fvocab <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  267</span>        logger.info(<span class="stringliteral">&quot;loading word counts from %s&quot;</span>, fvocab)</div>
<div class="line"><span class="lineno">  268</span>        counts = {}</div>
<div class="line"><span class="lineno">  269</span>        <span class="keyword">with</span> utils.open(fvocab, <span class="stringliteral">&#39;rb&#39;</span>) <span class="keyword">as</span> fin:</div>
<div class="line"><span class="lineno">  270</span>            <span class="keywordflow">for</span> line <span class="keywordflow">in</span> fin:</div>
<div class="line"><span class="lineno">  271</span>                word, count = utils.to_unicode(line, errors=unicode_errors).strip().split()</div>
<div class="line"><span class="lineno">  272</span>                counts[word] = int(count)</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>    logger.info(<span class="stringliteral">&quot;loading projection weights from %s&quot;</span>, fname)</div>
<div class="line"><span class="lineno">  275</span>    <span class="keyword">with</span> utils.open(fname, <span class="stringliteral">&#39;rb&#39;</span>) <span class="keyword">as</span> fin:</div>
<div class="line"><span class="lineno">  276</span>        header = utils.to_unicode(fin.readline(), encoding=encoding)</div>
<div class="line"><span class="lineno">  277</span>        vocab_size, vector_size = (int(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> header.split())  <span class="comment"># throws for invalid file format</span></div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordflow">if</span> limit:</div>
<div class="line"><span class="lineno">  279</span>            vocab_size = min(vocab_size, limit)</div>
<div class="line"><span class="lineno">  280</span>        result = cls(vector_size)</div>
<div class="line"><span class="lineno">  281</span>        result.vector_size = vector_size</div>
<div class="line"><span class="lineno">  282</span>        result.vectors = zeros((vocab_size, vector_size), dtype=datatype)</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">if</span> binary:</div>
<div class="line"><span class="lineno">  285</span>            _word2vec_read_binary(fin, result, counts,</div>
<div class="line"><span class="lineno">  286</span>                vocab_size, vector_size, datatype, unicode_errors, binary_chunk_size)</div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  288</span>            _word2vec_read_text(fin, result, counts, vocab_size, vector_size, datatype, unicode_errors, encoding)</div>
<div class="line"><span class="lineno">  289</span>    <span class="keywordflow">if</span> result.vectors.shape[0] != len(result.vocab):</div>
<div class="line"><span class="lineno">  290</span>        logger.info(</div>
<div class="line"><span class="lineno">  291</span>            <span class="stringliteral">&quot;duplicate words detected, shrinking matrix size from %i to %i&quot;</span>,</div>
<div class="line"><span class="lineno">  292</span>            result.vectors.shape[0], len(result.vocab)</div>
<div class="line"><span class="lineno">  293</span>        )</div>
<div class="line"><span class="lineno">  294</span>        result.vectors = ascontiguousarray(result.vectors[: len(result.vocab)])</div>
<div class="line"><span class="lineno">  295</span>    <span class="keyword">assert</span> (len(result.vocab), vector_size) == result.vectors.shape</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    logger.info(<span class="stringliteral">&quot;loaded %s matrix from %s&quot;</span>, result.vectors.shape, fname)</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordflow">return</span> result</div>
</div><!-- fragment -->
</div>
</div>
<a id="af9a010ccac3c7db3b44d8bba334386c0" name="af9a010ccac3c7db3b44d8bba334386c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9a010ccac3c7db3b44d8bba334386c0">&#9670;&#160;</a></span>_save_word2vec_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._save_word2vec_format </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vocab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vectors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fvocab</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>binary</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>total_vec</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Store the input-hidden weight matrix in the same format used by the original
C word2vec-tool, for compatibility.

Parameters
----------
fname : str
    The file path used to save the vectors in.
vocab : dict
    The vocabulary of words.
vectors : numpy.array
    The vectors to be stored.
fvocab : str, optional
    File path used to save the vocabulary.
binary : bool, optional
    If True, the data wil be saved in binary word2vec format, else it will be saved in plain text.
total_vec : int, optional
    Explicitly specify total number of vectors
    (in case word vectors are appended with document vectors afterwards).</pre> <div class="fragment"><div class="line"><span class="lineno">  105</span><span class="keyword">def </span>_save_word2vec_format(fname, vocab, vectors, fvocab=None, binary=False, total_vec=None):</div>
<div class="line"><span class="lineno">  106</span>    <span class="stringliteral">&quot;&quot;&quot;Store the input-hidden weight matrix in the same format used by the original</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral">    C word2vec-tool, for compatibility.</span></div>
<div class="line"><span class="lineno">  108</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  109</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  110</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  111</span><span class="stringliteral">    fname : str</span></div>
<div class="line"><span class="lineno">  112</span><span class="stringliteral">        The file path used to save the vectors in.</span></div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">    vocab : dict</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral">        The vocabulary of words.</span></div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">    vectors : numpy.array</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral">        The vectors to be stored.</span></div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">    fvocab : str, optional</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral">        File path used to save the vocabulary.</span></div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">    binary : bool, optional</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">        If True, the data wil be saved in binary word2vec format, else it will be saved in plain text.</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">    total_vec : int, optional</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">        Explicitly specify total number of vectors</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">        (in case word vectors are appended with document vectors afterwards).</span></div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  125</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  126</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> (vocab <span class="keywordflow">or</span> vectors):</div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;no input&quot;</span>)</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">if</span> total_vec <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  129</span>        total_vec = len(vocab)</div>
<div class="line"><span class="lineno">  130</span>    vector_size = vectors.shape[1]</div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordflow">if</span> fvocab <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  132</span>        logger.info(<span class="stringliteral">&quot;storing vocabulary in %s&quot;</span>, fvocab)</div>
<div class="line"><span class="lineno">  133</span>        <span class="keyword">with</span> utils.open(fvocab, <span class="stringliteral">&#39;wb&#39;</span>) <span class="keyword">as</span> vout:</div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">for</span> word, vocab_ <span class="keywordflow">in</span> sorted(iteritems(vocab), key=<span class="keyword">lambda</span> item: -item[1].count):</div>
<div class="line"><span class="lineno">  135</span>                vout.write(utils.to_utf8(<span class="stringliteral">&quot;%s %s\n&quot;</span> % (word, vocab_.count)))</div>
<div class="line"><span class="lineno">  136</span>    logger.info(<span class="stringliteral">&quot;storing %sx%s projection weights into %s&quot;</span>, total_vec, vector_size, fname)</div>
<div class="line"><span class="lineno">  137</span>    <span class="keyword">assert</span> (len(vocab), vector_size) == vectors.shape</div>
<div class="line"><span class="lineno">  138</span>    <span class="keyword">with</span> utils.open(fname, <span class="stringliteral">&#39;wb&#39;</span>) <span class="keyword">as</span> fout:</div>
<div class="line"><span class="lineno">  139</span>        fout.write(utils.to_utf8(<span class="stringliteral">&quot;%s %s\n&quot;</span> % (total_vec, vector_size)))</div>
<div class="line"><span class="lineno">  140</span>        <span class="comment"># store in sorted order: most frequent words at the top</span></div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">for</span> word, vocab_ <span class="keywordflow">in</span> sorted(iteritems(vocab), key=<span class="keyword">lambda</span> item: -item[1].count):</div>
<div class="line"><span class="lineno">  142</span>            row = vectors[vocab_.index]</div>
<div class="line"><span class="lineno">  143</span>            <span class="keywordflow">if</span> binary:</div>
<div class="line"><span class="lineno">  144</span>                row = row.astype(REAL)</div>
<div class="line"><span class="lineno">  145</span>                fout.write(utils.to_utf8(word) + b<span class="stringliteral">&quot; &quot;</span> + row.tostring())</div>
<div class="line"><span class="lineno">  146</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  147</span>                fout.write(utils.to_utf8(<span class="stringliteral">&quot;%s %s\n&quot;</span> % (word, <span class="stringliteral">&#39; &#39;</span>.join(repr(val) <span class="keywordflow">for</span> val <span class="keywordflow">in</span> row))))</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span><span class="comment"># Functions for internal use by _load_word2vec_format function</span></div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a7b0acef24f8e782a4c7c75dfdecb25" name="a6a7b0acef24f8e782a4c7c75dfdecb25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a7b0acef24f8e782a4c7c75dfdecb25">&#9670;&#160;</a></span>_word2vec_read_binary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._word2vec_read_binary </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vocab_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vector_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>unicode_errors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>binary_chunk_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  197</span><span class="keyword">def </span>_word2vec_read_binary(fin, result, counts, vocab_size, vector_size, datatype, unicode_errors, binary_chunk_size):</div>
<div class="line"><span class="lineno">  198</span>    chunk = b<span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><span class="lineno">  199</span>    tot_processed_words = 0</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">while</span> tot_processed_words &lt; vocab_size:</div>
<div class="line"><span class="lineno">  202</span>        new_chunk = fin.read(binary_chunk_size)</div>
<div class="line"><span class="lineno">  203</span>        chunk += new_chunk</div>
<div class="line"><span class="lineno">  204</span>        processed_words, chunk = _add_bytes_to_result(</div>
<div class="line"><span class="lineno">  205</span>            result, counts, chunk, vocab_size, vector_size, datatype, unicode_errors)</div>
<div class="line"><span class="lineno">  206</span>        tot_processed_words += processed_words</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> len(new_chunk) &lt; binary_chunk_size:</div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">if</span> tot_processed_words != vocab_size:</div>
<div class="line"><span class="lineno">  210</span>        <span class="keywordflow">raise</span> EOFError(<span class="stringliteral">&quot;unexpected end of input; is count incorrect or file otherwise damaged?&quot;</span>)</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a69cf77ada8e5c77293958e719bbb0f55" name="a69cf77ada8e5c77293958e719bbb0f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69cf77ada8e5c77293958e719bbb0f55">&#9670;&#160;</a></span>_word2vec_read_text()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._word2vec_read_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vocab_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vector_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>datatype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>unicode_errors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>encoding</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  213</span><span class="keyword">def </span>_word2vec_read_text(fin, result, counts, vocab_size, vector_size, datatype, unicode_errors, encoding):</div>
<div class="line"><span class="lineno">  214</span>    <span class="keywordflow">for</span> line_no <span class="keywordflow">in</span> range(vocab_size):</div>
<div class="line"><span class="lineno">  215</span>        line = fin.readline()</div>
<div class="line"><span class="lineno">  216</span>        <span class="keywordflow">if</span> line == b<span class="stringliteral">&#39;&#39;</span>:</div>
<div class="line"><span class="lineno">  217</span>            <span class="keywordflow">raise</span> EOFError(<span class="stringliteral">&quot;unexpected end of input; is count incorrect or file otherwise damaged?&quot;</span>)</div>
<div class="line"><span class="lineno">  218</span>        parts = utils.to_unicode(line.rstrip(), encoding=encoding, errors=unicode_errors).split(<span class="stringliteral">&quot; &quot;</span>)</div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">if</span> len(parts) != vector_size + 1:</div>
<div class="line"><span class="lineno">  220</span>            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;invalid vector on line %s (is this really the text format?)&quot;</span> % line_no)</div>
<div class="line"><span class="lineno">  221</span>        word, weights = parts[0], [datatype(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> parts[1:]]</div>
<div class="line"><span class="lineno">  222</span>        _add_word_to_result(result, counts, word, weights, vocab_size)</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3475a2ba60660a162c75321bb8707185" name="a3475a2ba60660a162c75321bb8707185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3475a2ba60660a162c75321bb8707185">&#9670;&#160;</a></span>ft_ngram_hashes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec.ft_ngram_hashes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>minn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>maxn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_buckets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fb_compatible</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Calculate the ngrams of the word and hash them.

Parameters
----------
word : str
    The word to calculate ngram hashes for.
minn : int
    Minimum ngram length
maxn : int
    Maximum ngram length
num_buckets : int
    The number of buckets
fb_compatible : boolean, optional
    True for compatibility with the Facebook implementation.
    False for compatibility with the old Gensim implementation.

Returns
-------
    A list of hashes (integers), one per each detected ngram.</pre> <div class="fragment"><div class="line"><span class="lineno">   74</span><span class="keyword">def </span>ft_ngram_hashes(word, minn, maxn, num_buckets, fb_compatible=True):</div>
<div class="line"><span class="lineno">   75</span>    <span class="stringliteral">&quot;&quot;&quot;Calculate the ngrams of the word and hash them.</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    word : str</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">        The word to calculate ngram hashes for.</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">    minn : int</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">        Minimum ngram length</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">    maxn : int</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">        Maximum ngram length</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">    num_buckets : int</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">        The number of buckets</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    fb_compatible : boolean, optional</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">        True for compatibility with the Facebook implementation.</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">        False for compatibility with the old Gensim implementation.</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral">        A list of hashes (integers), one per each detected ngram.</span></div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">if</span> fb_compatible:</div>
<div class="line"><span class="lineno">   97</span>        encoded_ngrams = compute_ngrams_bytes(word, minn, maxn)</div>
<div class="line"><span class="lineno">   98</span>        hashes = [ft_hash_bytes(n) % num_buckets <span class="keywordflow">for</span> n <span class="keywordflow">in</span> encoded_ngrams]</div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  100</span>        text_ngrams = compute_ngrams(word, minn, maxn)</div>
<div class="line"><span class="lineno">  101</span>        hashes = [ft_hash_broken(n) % num_buckets <span class="keywordflow">for</span> n <span class="keywordflow">in</span> text_ngrams]</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">return</span> hashes</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aed6d96dc7c72cc48d7489945f505388c" name="aed6d96dc7c72cc48d7489945f505388c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6d96dc7c72cc48d7489945f505388c">&#9670;&#160;</a></span>_byte_to_int</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec._byte_to_int = <a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#a8ebb6d6fcce8c58d4ccc3886ff4b9044">_byte_to_int_py2</a> if PY2 else <a class="el" href="namespacegensim_1_1models_1_1utils__any2vec.html#aa3295a1740c71fd636af85994835bd5b">_byte_to_int_py3</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ab245df469c3bdcc383a9674fc6ea51" name="a2ab245df469c3bdcc383a9674fc6ea51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ab245df469c3bdcc383a9674fc6ea51">&#9670;&#160;</a></span>_MB_MASK</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int gensim.models.utils_any2vec._MB_MASK = 0xC0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab89a09acbfda3dec85ad4a021a0d4464" name="ab89a09acbfda3dec85ad4a021a0d4464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab89a09acbfda3dec85ad4a021a0d4464">&#9670;&#160;</a></span>_MB_START</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int gensim.models.utils_any2vec._MB_START = 0x80</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6ea2605a5c99c66bbd637eb7eecbf412" name="a6ea2605a5c99c66bbd637eb7eecbf412"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea2605a5c99c66bbd637eb7eecbf412">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gensim.models.utils_any2vec.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
