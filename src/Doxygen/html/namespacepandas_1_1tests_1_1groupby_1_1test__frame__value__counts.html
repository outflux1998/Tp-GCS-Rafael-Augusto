<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: pandas.tests.groupby.test_frame_value_counts Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepandas.html">pandas</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1tests_1_1groupby.html">groupby</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html">test_frame_value_counts</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pandas.tests.groupby.test_frame_value_counts Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a088fbbaa5dac4624523e2f4172e46935" id="r_a088fbbaa5dac4624523e2f4172e46935"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a> ()</td></tr>
<tr class="separator:a088fbbaa5dac4624523e2f4172e46935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20da86108478bd3ffd5c919ea0a70d9e" id="r_a20da86108478bd3ffd5c919ea0a70d9e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a20da86108478bd3ffd5c919ea0a70d9e">test_axis</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>)</td></tr>
<tr class="separator:a20da86108478bd3ffd5c919ea0a70d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63acc280129b12b651a663eee7bc69da" id="r_a63acc280129b12b651a663eee7bc69da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a63acc280129b12b651a663eee7bc69da">test_bad_subset</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>)</td></tr>
<tr class="separator:a63acc280129b12b651a663eee7bc69da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fed2fc99de89f8aff7665038d0079a3" id="r_a8fed2fc99de89f8aff7665038d0079a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a8fed2fc99de89f8aff7665038d0079a3">test_basic</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>)</td></tr>
<tr class="separator:a8fed2fc99de89f8aff7665038d0079a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4c563b3341c5822d5db6660dd775e8" id="r_a1d4c563b3341c5822d5db6660dd775e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a1d4c563b3341c5822d5db6660dd775e8">_frame_value_counts</a> (<a class="el" href="__lapack__subroutines_8h.html#a2a33a012da63c0be8f0f3845c10bf577">df</a>, keys, normalize, sort, ascending)</td></tr>
<tr class="separator:a1d4c563b3341c5822d5db6660dd775e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf85fd9a9b7cd2133fcb6a6eb552792c" id="r_abf85fd9a9b7cd2133fcb6a6eb552792c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#abf85fd9a9b7cd2133fcb6a6eb552792c">test_against_frame_and_seriesgroupby</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, groupby, normalize, sort, ascending, as_index, frame)</td></tr>
<tr class="separator:abf85fd9a9b7cd2133fcb6a6eb552792c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefc677ae6fbffd22b4a00000b1d914c7" id="r_aefc677ae6fbffd22b4a00000b1d914c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#aefc677ae6fbffd22b4a00000b1d914c7">test_compound</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, normalize, sort, ascending, expected_rows, expected_count, expected_group_size)</td></tr>
<tr class="separator:aefc677ae6fbffd22b4a00000b1d914c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81294a105d6f2757a1b5655de9afd60a" id="r_a81294a105d6f2757a1b5655de9afd60a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a81294a105d6f2757a1b5655de9afd60a">animals_df</a> ()</td></tr>
<tr class="separator:a81294a105d6f2757a1b5655de9afd60a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06326f76e3e6d221546ca16d4b285dc9" id="r_a06326f76e3e6d221546ca16d4b285dc9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a06326f76e3e6d221546ca16d4b285dc9">test_data_frame_value_counts</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a81294a105d6f2757a1b5655de9afd60a">animals_df</a>, sort, ascending, normalize, expected_data, expected_index)</td></tr>
<tr class="separator:a06326f76e3e6d221546ca16d4b285dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2553f5fa1371ce16396c4e7faaaf096" id="r_af2553f5fa1371ce16396c4e7faaaf096"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#af2553f5fa1371ce16396c4e7faaaf096">nulls_df</a> ()</td></tr>
<tr class="separator:af2553f5fa1371ce16396c4e7faaaf096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a179e1068108a431ea56b3e36cca9df" id="r_a7a179e1068108a431ea56b3e36cca9df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a7a179e1068108a431ea56b3e36cca9df">test_dropna_combinations</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#af2553f5fa1371ce16396c4e7faaaf096">nulls_df</a>, group_dropna, count_dropna, expected_rows, expected_values)</td></tr>
<tr class="separator:a7a179e1068108a431ea56b3e36cca9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe19640ab57b1cd198f6928651cc9bb" id="r_aabe19640ab57b1cd198f6928651cc9bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#aabe19640ab57b1cd198f6928651cc9bb">names_with_nulls_df</a> (nulls_fixture)</td></tr>
<tr class="separator:aabe19640ab57b1cd198f6928651cc9bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bac1677898730c0119f331c55e7b6b8" id="r_a6bac1677898730c0119f331c55e7b6b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a6bac1677898730c0119f331c55e7b6b8">test_data_frame_value_counts_dropna</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#aabe19640ab57b1cd198f6928651cc9bb">names_with_nulls_df</a>, dropna, normalize, expected_data, expected_index)</td></tr>
<tr class="separator:a6bac1677898730c0119f331c55e7b6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c872c4e8774f2a976dd56dc56bb36d9" id="r_a9c872c4e8774f2a976dd56dc56bb36d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a9c872c4e8774f2a976dd56dc56bb36d9">test_categorical_single_grouper_with_only_observed_categories</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, as_index, observed, normalize, expected_data)</td></tr>
<tr class="separator:a9c872c4e8774f2a976dd56dc56bb36d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99704efd43fccc19476375d0e3d466b1" id="r_a99704efd43fccc19476375d0e3d466b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a99704efd43fccc19476375d0e3d466b1">assert_categorical_single_grouper</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, as_index, observed, expected_index, normalize, expected_data)</td></tr>
<tr class="separator:a99704efd43fccc19476375d0e3d466b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae668ac62be5f1cf484197e393633d111" id="r_ae668ac62be5f1cf484197e393633d111"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#ae668ac62be5f1cf484197e393633d111">test_categorical_single_grouper_observed_true</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, as_index, normalize, expected_data)</td></tr>
<tr class="separator:ae668ac62be5f1cf484197e393633d111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d808385a93621e59446da73c99f687d" id="r_a1d808385a93621e59446da73c99f687d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a1d808385a93621e59446da73c99f687d">test_categorical_single_grouper_observed_false</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, as_index, normalize, expected_data)</td></tr>
<tr class="separator:a1d808385a93621e59446da73c99f687d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdac51d922ff28e6480bc8aa959750ac" id="r_afdac51d922ff28e6480bc8aa959750ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#afdac51d922ff28e6480bc8aa959750ac">test_categorical_multiple_groupers</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, as_index, observed, expected_index, normalize, expected_data)</td></tr>
<tr class="separator:afdac51d922ff28e6480bc8aa959750ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb493ed639157e319f498efe4d7e3795" id="r_aeb493ed639157e319f498efe4d7e3795"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#aeb493ed639157e319f498efe4d7e3795">test_categorical_non_groupers</a> (<a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a088fbbaa5dac4624523e2f4172e46935">education_df</a>, as_index, observed, normalize, expected_data)</td></tr>
<tr class="separator:aeb493ed639157e319f498efe4d7e3795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c8b2a4996ce0abd5d1e1b8884383798" id="r_a9c8b2a4996ce0abd5d1e1b8884383798"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a9c8b2a4996ce0abd5d1e1b8884383798">test_mixed_groupings</a> (normalize, expected_label, expected_values)</td></tr>
<tr class="separator:a9c8b2a4996ce0abd5d1e1b8884383798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26df1fa1155191215f54a7e31a68c91c" id="r_a26df1fa1155191215f54a7e31a68c91c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a26df1fa1155191215f54a7e31a68c91c">test_column_label_duplicates</a> (test, columns, expected_names, as_index)</td></tr>
<tr class="separator:a26df1fa1155191215f54a7e31a68c91c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039002792ddbe4214d7f17c784de9534" id="r_a039002792ddbe4214d7f17c784de9534"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a039002792ddbe4214d7f17c784de9534">test_result_label_duplicates</a> (normalize, expected_label)</td></tr>
<tr class="separator:a039002792ddbe4214d7f17c784de9534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a985baf4cd3aa98435a3d81b07797ee6b" id="r_a985baf4cd3aa98435a3d81b07797ee6b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a985baf4cd3aa98435a3d81b07797ee6b">test_ambiguous_grouping</a> ()</td></tr>
<tr class="separator:a985baf4cd3aa98435a3d81b07797ee6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca62b5a770ed73b703b335145075721c" id="r_aca62b5a770ed73b703b335145075721c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#aca62b5a770ed73b703b335145075721c">test_subset_overlaps_gb_key_raises</a> ()</td></tr>
<tr class="separator:aca62b5a770ed73b703b335145075721c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6e74816beba28e4c7d8d20c3b306e6c" id="r_ac6e74816beba28e4c7d8d20c3b306e6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#ac6e74816beba28e4c7d8d20c3b306e6c">test_subset_doesnt_exist_in_frame</a> ()</td></tr>
<tr class="separator:ac6e74816beba28e4c7d8d20c3b306e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb99eeb19fb8c3211d4adc31162736d7" id="r_afb99eeb19fb8c3211d4adc31162736d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#afb99eeb19fb8c3211d4adc31162736d7">test_subset</a> ()</td></tr>
<tr class="separator:afb99eeb19fb8c3211d4adc31162736d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48adb57c07edef4fad8f854e1cec2a37" id="r_a48adb57c07edef4fad8f854e1cec2a37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1groupby_1_1test__frame__value__counts.html#a48adb57c07edef4fad8f854e1cec2a37">test_subset_duplicate_columns</a> ()</td></tr>
<tr class="separator:a48adb57c07edef4fad8f854e1cec2a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1d4c563b3341c5822d5db6660dd775e8" name="a1d4c563b3341c5822d5db6660dd775e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d4c563b3341c5822d5db6660dd775e8">&#9670;&#160;</a></span>_frame_value_counts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts._frame_value_counts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ascending</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   58</span><span class="keyword">def </span>_frame_value_counts(df, keys, normalize, sort, ascending):</div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">return</span> df[keys].value_counts(normalize=normalize, sort=sort, ascending=ascending)</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span><span class="preprocessor">@pytest.mark.parametrize(&quot;groupby&quot;, [&quot;column&quot;, &quot;array&quot;, &quot;function&quot;])</span></div>
<div class="line"><span class="lineno">   63</span><span class="preprocessor">@pytest.mark.parametrize(&quot;normalize&quot;, [True, False])</span></div>
<div class="line"><span class="lineno">   64</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">   65</span>    <span class="stringliteral">&quot;sort, ascending&quot;</span>,</div>
<div class="line"><span class="lineno">   66</span>    [</div>
<div class="line"><span class="lineno">   67</span>        (<span class="keyword">False</span>, <span class="keywordtype">None</span>),</div>
<div class="line"><span class="lineno">   68</span>        (<span class="keyword">True</span>, <span class="keyword">True</span>),</div>
<div class="line"><span class="lineno">   69</span>        (<span class="keyword">True</span>, <span class="keyword">False</span>),</div>
<div class="line"><span class="lineno">   70</span>    ],</div>
<div class="line"><span class="lineno">   71</span>)</div>
<div class="line"><span class="lineno">   72</span><span class="preprocessor">@pytest.mark.parametrize(&quot;as_index&quot;, [True, False])</span></div>
<div class="line"><span class="lineno">   73</span><span class="preprocessor">@pytest.mark.parametrize(&quot;frame&quot;, [True, False])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81294a105d6f2757a1b5655de9afd60a" name="a81294a105d6f2757a1b5655de9afd60a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81294a105d6f2757a1b5655de9afd60a">&#9670;&#160;</a></span>animals_df()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.animals_df </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  171</span><span class="keyword">def </span>animals_df():</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">return</span> DataFrame(</div>
<div class="line"><span class="lineno">  173</span>        {<span class="stringliteral">&quot;key&quot;</span>: [1, 1, 1, 1], <span class="stringliteral">&quot;num_legs&quot;</span>: [2, 4, 4, 6], <span class="stringliteral">&quot;num_wings&quot;</span>: [2, 0, 0, 0]},</div>
<div class="line"><span class="lineno">  174</span>        index=[<span class="stringliteral">&quot;falcon&quot;</span>, <span class="stringliteral">&quot;dog&quot;</span>, <span class="stringliteral">&quot;cat&quot;</span>, <span class="stringliteral">&quot;ant&quot;</span>],</div>
<div class="line"><span class="lineno">  175</span>    )</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  179</span>    <span class="stringliteral">&quot;sort, ascending, normalize, expected_data, expected_index&quot;</span>,</div>
<div class="line"><span class="lineno">  180</span>    [</div>
<div class="line"><span class="lineno">  181</span>        (<span class="keyword">False</span>, <span class="keywordtype">None</span>, <span class="keyword">False</span>, [1, 2, 1], [(1, 1, 1), (2, 4, 6), (2, 0, 0)]),</div>
<div class="line"><span class="lineno">  182</span>        (<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>, [1, 1, 2], [(1, 1, 1), (2, 6, 4), (2, 0, 0)]),</div>
<div class="line"><span class="lineno">  183</span>        (<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>, [2, 1, 1], [(1, 1, 1), (4, 2, 6), (0, 2, 0)]),</div>
<div class="line"><span class="lineno">  184</span>        (<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">True</span>, [0.5, 0.25, 0.25], [(1, 1, 1), (4, 2, 6), (0, 2, 0)]),</div>
<div class="line"><span class="lineno">  185</span>    ],</div>
<div class="line"><span class="lineno">  186</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a99704efd43fccc19476375d0e3d466b1" name="a99704efd43fccc19476375d0e3d466b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99704efd43fccc19476375d0e3d466b1">&#9670;&#160;</a></span>assert_categorical_single_grouper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.assert_categorical_single_grouper </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>observed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  373</span>):</div>
<div class="line"><span class="lineno">  374</span>    <span class="comment"># Test single categorical grouper when non-groupers are also categorical</span></div>
<div class="line"><span class="lineno">  375</span>    education_df = education_df.copy().astype(<span class="stringliteral">&quot;category&quot;</span>)</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>    <span class="comment"># Add non-observed grouping categories</span></div>
<div class="line"><span class="lineno">  378</span>    education_df[<span class="stringliteral">&quot;country&quot;</span>] = education_df[<span class="stringliteral">&quot;country&quot;</span>].cat.add_categories([<span class="stringliteral">&quot;ASIA&quot;</span>])</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>    gp = education_df.groupby(<span class="stringliteral">&quot;country&quot;</span>, as_index=as_index, observed=observed)</div>
<div class="line"><span class="lineno">  381</span>    result = gp.value_counts(normalize=normalize)</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>    expected_series = Series(</div>
<div class="line"><span class="lineno">  384</span>        data=expected_data,</div>
<div class="line"><span class="lineno">  385</span>        index=MultiIndex.from_tuples(</div>
<div class="line"><span class="lineno">  386</span>            expected_index,</div>
<div class="line"><span class="lineno">  387</span>            names=[<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>],</div>
<div class="line"><span class="lineno">  388</span>        ),</div>
<div class="line"><span class="lineno">  389</span>    )</div>
<div class="line"><span class="lineno">  390</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(3):</div>
<div class="line"><span class="lineno">  391</span>        index_level = CategoricalIndex(expected_series.index.levels[i])</div>
<div class="line"><span class="lineno">  392</span>        <span class="keywordflow">if</span> i == 0:</div>
<div class="line"><span class="lineno">  393</span>            index_level = index_level.set_categories(</div>
<div class="line"><span class="lineno">  394</span>                education_df[<span class="stringliteral">&quot;country&quot;</span>].cat.categories</div>
<div class="line"><span class="lineno">  395</span>            )</div>
<div class="line"><span class="lineno">  396</span>        expected_series.index = expected_series.index.set_levels(index_level, level=i)</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordflow">if</span> as_index:</div>
<div class="line"><span class="lineno">  399</span>        tm.assert_series_equal(result, expected_series)</div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  401</span>        expected = expected_series.reset_index(</div>
<div class="line"><span class="lineno">  402</span>            name=<span class="stringliteral">&quot;proportion&quot;</span> <span class="keywordflow">if</span> normalize <span class="keywordflow">else</span> <span class="stringliteral">&quot;count&quot;</span></div>
<div class="line"><span class="lineno">  403</span>        )</div>
<div class="line"><span class="lineno">  404</span>        tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span><span class="preprocessor">@pytest.mark.parametrize(&quot;as_index&quot;, [True, False])</span></div>
<div class="line"><span class="lineno">  408</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  409</span>    <span class="stringliteral">&quot;normalize, expected_data&quot;</span>,</div>
<div class="line"><span class="lineno">  410</span>    [</div>
<div class="line"><span class="lineno">  411</span>        (<span class="keyword">False</span>, np.array([2, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0], dtype=np.int64)),</div>
<div class="line"><span class="lineno">  412</span>        (</div>
<div class="line"><span class="lineno">  413</span>            <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  414</span>            np.array([0.5, 0.25, 0.25, 0.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 0.0]),</div>
<div class="line"><span class="lineno">  415</span>        ),</div>
<div class="line"><span class="lineno">  416</span>    ],</div>
<div class="line"><span class="lineno">  417</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a088fbbaa5dac4624523e2f4172e46935" name="a088fbbaa5dac4624523e2f4172e46935"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a088fbbaa5dac4624523e2f4172e46935">&#9670;&#160;</a></span>education_df()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.education_df </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   15</span><span class="keyword">def </span>education_df():</div>
<div class="line"><span class="lineno">   16</span>    <span class="keywordflow">return</span> DataFrame(</div>
<div class="line"><span class="lineno">   17</span>        {</div>
<div class="line"><span class="lineno">   18</span>            <span class="stringliteral">&quot;gender&quot;</span>: [<span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>],</div>
<div class="line"><span class="lineno">   19</span>            <span class="stringliteral">&quot;education&quot;</span>: [<span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>],</div>
<div class="line"><span class="lineno">   20</span>            <span class="stringliteral">&quot;country&quot;</span>: [<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;FR&quot;</span>],</div>
<div class="line"><span class="lineno">   21</span>        }</div>
<div class="line"><span class="lineno">   22</span>    )</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aabe19640ab57b1cd198f6928651cc9bb" name="aabe19640ab57b1cd198f6928651cc9bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabe19640ab57b1cd198f6928651cc9bb">&#9670;&#160;</a></span>names_with_nulls_df()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.names_with_nulls_df </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nulls_fixture</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  251</span><span class="keyword">def </span>names_with_nulls_df(nulls_fixture):</div>
<div class="line"><span class="lineno">  252</span>    <span class="keywordflow">return</span> DataFrame(</div>
<div class="line"><span class="lineno">  253</span>        {</div>
<div class="line"><span class="lineno">  254</span>            <span class="stringliteral">&quot;key&quot;</span>: [1, 1, 1, 1],</div>
<div class="line"><span class="lineno">  255</span>            <span class="stringliteral">&quot;first_name&quot;</span>: [<span class="stringliteral">&quot;John&quot;</span>, <span class="stringliteral">&quot;Anne&quot;</span>, <span class="stringliteral">&quot;John&quot;</span>, <span class="stringliteral">&quot;Beth&quot;</span>],</div>
<div class="line"><span class="lineno">  256</span>            <span class="stringliteral">&quot;middle_name&quot;</span>: [<span class="stringliteral">&quot;Smith&quot;</span>, nulls_fixture, nulls_fixture, <span class="stringliteral">&quot;Louise&quot;</span>],</div>
<div class="line"><span class="lineno">  257</span>        },</div>
<div class="line"><span class="lineno">  258</span>    )</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  262</span>    <span class="stringliteral">&quot;dropna, expected_data, expected_index&quot;</span>,</div>
<div class="line"><span class="lineno">  263</span>    [</div>
<div class="line"><span class="lineno">  264</span>        (</div>
<div class="line"><span class="lineno">  265</span>            <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  266</span>            [1, 1],</div>
<div class="line"><span class="lineno">  267</span>            MultiIndex.from_arrays(</div>
<div class="line"><span class="lineno">  268</span>                [(1, 1), (<span class="stringliteral">&quot;Beth&quot;</span>, <span class="stringliteral">&quot;John&quot;</span>), (<span class="stringliteral">&quot;Louise&quot;</span>, <span class="stringliteral">&quot;Smith&quot;</span>)],</div>
<div class="line"><span class="lineno">  269</span>                names=[<span class="stringliteral">&quot;key&quot;</span>, <span class="stringliteral">&quot;first_name&quot;</span>, <span class="stringliteral">&quot;middle_name&quot;</span>],</div>
<div class="line"><span class="lineno">  270</span>            ),</div>
<div class="line"><span class="lineno">  271</span>        ),</div>
<div class="line"><span class="lineno">  272</span>        (</div>
<div class="line"><span class="lineno">  273</span>            <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  274</span>            [1, 1, 1, 1],</div>
<div class="line"><span class="lineno">  275</span>            MultiIndex(</div>
<div class="line"><span class="lineno">  276</span>                levels=[</div>
<div class="line"><span class="lineno">  277</span>                    Index([1]),</div>
<div class="line"><span class="lineno">  278</span>                    Index([<span class="stringliteral">&quot;Anne&quot;</span>, <span class="stringliteral">&quot;Beth&quot;</span>, <span class="stringliteral">&quot;John&quot;</span>]),</div>
<div class="line"><span class="lineno">  279</span>                    Index([<span class="stringliteral">&quot;Louise&quot;</span>, <span class="stringliteral">&quot;Smith&quot;</span>, np.nan]),</div>
<div class="line"><span class="lineno">  280</span>                ],</div>
<div class="line"><span class="lineno">  281</span>                codes=[[0, 0, 0, 0], [0, 1, 2, 2], [2, 0, 1, 2]],</div>
<div class="line"><span class="lineno">  282</span>                names=[<span class="stringliteral">&quot;key&quot;</span>, <span class="stringliteral">&quot;first_name&quot;</span>, <span class="stringliteral">&quot;middle_name&quot;</span>],</div>
<div class="line"><span class="lineno">  283</span>            ),</div>
<div class="line"><span class="lineno">  284</span>        ),</div>
<div class="line"><span class="lineno">  285</span>    ],</div>
<div class="line"><span class="lineno">  286</span>)</div>
<div class="line"><span class="lineno">  287</span><span class="preprocessor">@pytest.mark.parametrize(&quot;normalize&quot;, [False, True])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2553f5fa1371ce16396c4e7faaaf096" name="af2553f5fa1371ce16396c4e7faaaf096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2553f5fa1371ce16396c4e7faaaf096">&#9670;&#160;</a></span>nulls_df()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.nulls_df </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  211</span><span class="keyword">def </span>nulls_df():</div>
<div class="line"><span class="lineno">  212</span>    n = np.nan</div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordflow">return</span> DataFrame(</div>
<div class="line"><span class="lineno">  214</span>        {</div>
<div class="line"><span class="lineno">  215</span>            <span class="stringliteral">&quot;A&quot;</span>: [1, 1, n, 4, n, 6, 6, 6, 6],</div>
<div class="line"><span class="lineno">  216</span>            <span class="stringliteral">&quot;B&quot;</span>: [1, 1, 3, n, n, 6, 6, 6, 6],</div>
<div class="line"><span class="lineno">  217</span>            <span class="stringliteral">&quot;C&quot;</span>: [1, 2, 3, 4, 5, 6, n, 8, n],</div>
<div class="line"><span class="lineno">  218</span>            <span class="stringliteral">&quot;D&quot;</span>: [1, 2, 3, 4, 5, 6, 7, n, n],</div>
<div class="line"><span class="lineno">  219</span>        }</div>
<div class="line"><span class="lineno">  220</span>    )</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  224</span>    <span class="stringliteral">&quot;group_dropna, count_dropna, expected_rows, expected_values&quot;</span>,</div>
<div class="line"><span class="lineno">  225</span>    [</div>
<div class="line"><span class="lineno">  226</span>        (</div>
<div class="line"><span class="lineno">  227</span>            <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  228</span>            <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  229</span>            [0, 1, 3, 5, 7, 6, 8, 2, 4],</div>
<div class="line"><span class="lineno">  230</span>            [0.5, 0.5, 1.0, 0.25, 0.25, 0.25, 0.25, 1.0, 1.0],</div>
<div class="line"><span class="lineno">  231</span>        ),</div>
<div class="line"><span class="lineno">  232</span>        (<span class="keyword">False</span>, <span class="keyword">True</span>, [0, 1, 3, 5, 2, 4], [0.5, 0.5, 1.0, 1.0, 1.0, 1.0]),</div>
<div class="line"><span class="lineno">  233</span>        (<span class="keyword">True</span>, <span class="keyword">False</span>, [0, 1, 5, 7, 6, 8], [0.5, 0.5, 0.25, 0.25, 0.25, 0.25]),</div>
<div class="line"><span class="lineno">  234</span>        (<span class="keyword">True</span>, <span class="keyword">True</span>, [0, 1, 5], [0.5, 0.5, 1.0]),</div>
<div class="line"><span class="lineno">  235</span>    ],</div>
<div class="line"><span class="lineno">  236</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="abf85fd9a9b7cd2133fcb6a6eb552792c" name="abf85fd9a9b7cd2133fcb6a6eb552792c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf85fd9a9b7cd2133fcb6a6eb552792c">&#9670;&#160;</a></span>test_against_frame_and_seriesgroupby()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_against_frame_and_seriesgroupby </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>groupby</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ascending</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   76</span>):</div>
<div class="line"><span class="lineno">   77</span>    <span class="comment"># test all parameters:</span></div>
<div class="line"><span class="lineno">   78</span>    <span class="comment"># - Use column, array or function as by= parameter</span></div>
<div class="line"><span class="lineno">   79</span>    <span class="comment"># - Whether or not to normalize</span></div>
<div class="line"><span class="lineno">   80</span>    <span class="comment"># - Whether or not to sort and how</span></div>
<div class="line"><span class="lineno">   81</span>    <span class="comment"># - Whether or not to use the groupby as an index</span></div>
<div class="line"><span class="lineno">   82</span>    <span class="comment"># - 3-way compare against:</span></div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">#   - apply with :meth:`~DataFrame.value_counts`</span></div>
<div class="line"><span class="lineno">   84</span>    <span class="comment">#   - `~SeriesGroupBy.value_counts`</span></div>
<div class="line"><span class="lineno">   85</span>    by = {</div>
<div class="line"><span class="lineno">   86</span>        <span class="stringliteral">&quot;column&quot;</span>: <span class="stringliteral">&quot;country&quot;</span>,</div>
<div class="line"><span class="lineno">   87</span>        <span class="stringliteral">&quot;array&quot;</span>: education_df[<span class="stringliteral">&quot;country&quot;</span>].values,</div>
<div class="line"><span class="lineno">   88</span>        <span class="stringliteral">&quot;function&quot;</span>: <span class="keyword">lambda</span> x: education_df[<span class="stringliteral">&quot;country&quot;</span>][x] == <span class="stringliteral">&quot;US&quot;</span>,</div>
<div class="line"><span class="lineno">   89</span>    }[groupby]</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>    gp = education_df.groupby(by=by, as_index=as_index)</div>
<div class="line"><span class="lineno">   92</span>    result = gp[[<span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>]].value_counts(</div>
<div class="line"><span class="lineno">   93</span>        normalize=normalize, sort=sort, ascending=ascending</div>
<div class="line"><span class="lineno">   94</span>    )</div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">if</span> frame:</div>
<div class="line"><span class="lineno">   96</span>        <span class="comment"># compare against apply with DataFrame value_counts</span></div>
<div class="line"><span class="lineno">   97</span>        expected = gp.apply(</div>
<div class="line"><span class="lineno">   98</span>            _frame_value_counts, [<span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>], normalize, sort, ascending</div>
<div class="line"><span class="lineno">   99</span>        )</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>        <span class="keywordflow">if</span> as_index:</div>
<div class="line"><span class="lineno">  102</span>            tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">  103</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  104</span>            name = <span class="stringliteral">&quot;proportion&quot;</span> <span class="keywordflow">if</span> normalize <span class="keywordflow">else</span> <span class="stringliteral">&quot;count&quot;</span></div>
<div class="line"><span class="lineno">  105</span>            expected = expected.reset_index().rename({0: name}, axis=1)</div>
<div class="line"><span class="lineno">  106</span>            <span class="keywordflow">if</span> groupby == <span class="stringliteral">&quot;column&quot;</span>:</div>
<div class="line"><span class="lineno">  107</span>                expected = expected.rename({<span class="stringliteral">&quot;level_0&quot;</span>: <span class="stringliteral">&quot;country&quot;</span>}, axis=1)</div>
<div class="line"><span class="lineno">  108</span>                expected[<span class="stringliteral">&quot;country&quot;</span>] = np.where(expected[<span class="stringliteral">&quot;country&quot;</span>], <span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;FR&quot;</span>)</div>
<div class="line"><span class="lineno">  109</span>            <span class="keywordflow">elif</span> groupby == <span class="stringliteral">&quot;function&quot;</span>:</div>
<div class="line"><span class="lineno">  110</span>                expected[<span class="stringliteral">&quot;level_0&quot;</span>] = expected[<span class="stringliteral">&quot;level_0&quot;</span>] == 1</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  112</span>                expected[<span class="stringliteral">&quot;level_0&quot;</span>] = np.where(expected[<span class="stringliteral">&quot;level_0&quot;</span>], <span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;FR&quot;</span>)</div>
<div class="line"><span class="lineno">  113</span>            tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  115</span>        <span class="comment"># compare against SeriesGroupBy value_counts</span></div>
<div class="line"><span class="lineno">  116</span>        education_df[<span class="stringliteral">&quot;both&quot;</span>] = education_df[<span class="stringliteral">&quot;gender&quot;</span>] + <span class="stringliteral">&quot;-&quot;</span> + education_df[<span class="stringliteral">&quot;education&quot;</span>]</div>
<div class="line"><span class="lineno">  117</span>        expected = gp[<span class="stringliteral">&quot;both&quot;</span>].value_counts(</div>
<div class="line"><span class="lineno">  118</span>            normalize=normalize, sort=sort, ascending=ascending</div>
<div class="line"><span class="lineno">  119</span>        )</div>
<div class="line"><span class="lineno">  120</span>        expected.name = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">if</span> as_index:</div>
<div class="line"><span class="lineno">  122</span>            index_frame = expected.index.to_frame(index=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  123</span>            index_frame[<span class="stringliteral">&quot;gender&quot;</span>] = index_frame[<span class="stringliteral">&quot;both&quot;</span>].str.split(<span class="stringliteral">&quot;-&quot;</span>).str.get(0)</div>
<div class="line"><span class="lineno">  124</span>            index_frame[<span class="stringliteral">&quot;education&quot;</span>] = index_frame[<span class="stringliteral">&quot;both&quot;</span>].str.split(<span class="stringliteral">&quot;-&quot;</span>).str.get(1)</div>
<div class="line"><span class="lineno">  125</span>            del index_frame[<span class="stringliteral">&quot;both&quot;</span>]</div>
<div class="line"><span class="lineno">  126</span>            index_frame = index_frame.rename({0: <span class="keywordtype">None</span>}, axis=1)</div>
<div class="line"><span class="lineno">  127</span>            expected.index = MultiIndex.from_frame(index_frame)</div>
<div class="line"><span class="lineno">  128</span>            tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  130</span>            expected.insert(1, <span class="stringliteral">&quot;gender&quot;</span>, expected[<span class="stringliteral">&quot;both&quot;</span>].str.split(<span class="stringliteral">&quot;-&quot;</span>).str.get(0))</div>
<div class="line"><span class="lineno">  131</span>            expected.insert(2, <span class="stringliteral">&quot;education&quot;</span>, expected[<span class="stringliteral">&quot;both&quot;</span>].str.split(<span class="stringliteral">&quot;-&quot;</span>).str.get(1))</div>
<div class="line"><span class="lineno">  132</span>            del expected[<span class="stringliteral">&quot;both&quot;</span>]</div>
<div class="line"><span class="lineno">  133</span>            tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span><span class="preprocessor">@pytest.mark.parametrize(&quot;normalize&quot;, [True, False])</span></div>
<div class="line"><span class="lineno">  137</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  138</span>    <span class="stringliteral">&quot;sort, ascending, expected_rows, expected_count, expected_group_size&quot;</span>,</div>
<div class="line"><span class="lineno">  139</span>    [</div>
<div class="line"><span class="lineno">  140</span>        (<span class="keyword">False</span>, <span class="keywordtype">None</span>, [0, 1, 2, 3, 4], [1, 1, 1, 2, 1], [1, 3, 1, 3, 1]),</div>
<div class="line"><span class="lineno">  141</span>        (<span class="keyword">True</span>, <span class="keyword">False</span>, [4, 3, 1, 2, 0], [1, 2, 1, 1, 1], [1, 3, 3, 1, 1]),</div>
<div class="line"><span class="lineno">  142</span>        (<span class="keyword">True</span>, <span class="keyword">True</span>, [4, 1, 3, 2, 0], [1, 1, 2, 1, 1], [1, 3, 3, 1, 1]),</div>
<div class="line"><span class="lineno">  143</span>    ],</div>
<div class="line"><span class="lineno">  144</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a985baf4cd3aa98435a3d81b07797ee6b" name="a985baf4cd3aa98435a3d81b07797ee6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a985baf4cd3aa98435a3d81b07797ee6b">&#9670;&#160;</a></span>test_ambiguous_grouping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_ambiguous_grouping </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  734</span><span class="keyword">def </span>test_ambiguous_grouping():</div>
<div class="line"><span class="lineno">  735</span>    <span class="comment"># Test that groupby is not confused by groupings length equal to row count</span></div>
<div class="line"><span class="lineno">  736</span>    df = DataFrame({<span class="stringliteral">&quot;a&quot;</span>: [1, 1]})</div>
<div class="line"><span class="lineno">  737</span>    gb = df.groupby([1, 1])</div>
<div class="line"><span class="lineno">  738</span>    result = gb.value_counts()</div>
<div class="line"><span class="lineno">  739</span>    expected = Series([2], index=MultiIndex.from_tuples([[1, 1]], names=[<span class="keywordtype">None</span>, <span class="stringliteral">&quot;a&quot;</span>]))</div>
<div class="line"><span class="lineno">  740</span>    tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">  741</span> </div>
<div class="line"><span class="lineno">  742</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a20da86108478bd3ffd5c919ea0a70d9e" name="a20da86108478bd3ffd5c919ea0a70d9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20da86108478bd3ffd5c919ea0a70d9e">&#9670;&#160;</a></span>test_axis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_axis </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   25</span><span class="keyword">def </span>test_axis(education_df):</div>
<div class="line"><span class="lineno">   26</span>    gp = education_df.groupby(<span class="stringliteral">&quot;country&quot;</span>, axis=1)</div>
<div class="line"><span class="lineno">   27</span>    <span class="keyword">with</span> pytest.raises(NotImplementedError, match=<span class="stringliteral">&quot;axis&quot;</span>):</div>
<div class="line"><span class="lineno">   28</span>        gp.value_counts()</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a63acc280129b12b651a663eee7bc69da" name="a63acc280129b12b651a663eee7bc69da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63acc280129b12b651a663eee7bc69da">&#9670;&#160;</a></span>test_bad_subset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_bad_subset </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   31</span><span class="keyword">def </span>test_bad_subset(education_df):</div>
<div class="line"><span class="lineno">   32</span>    gp = education_df.groupby(<span class="stringliteral">&quot;country&quot;</span>)</div>
<div class="line"><span class="lineno">   33</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">&quot;subset&quot;</span>):</div>
<div class="line"><span class="lineno">   34</span>        gp.value_counts(subset=[<span class="stringliteral">&quot;country&quot;</span>])</div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8fed2fc99de89f8aff7665038d0079a3" name="a8fed2fc99de89f8aff7665038d0079a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fed2fc99de89f8aff7665038d0079a3">&#9670;&#160;</a></span>test_basic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_basic </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   37</span><span class="keyword">def </span>test_basic(education_df):</div>
<div class="line"><span class="lineno">   38</span>    <span class="comment"># gh43564</span></div>
<div class="line"><span class="lineno">   39</span>    result = education_df.groupby(<span class="stringliteral">&quot;country&quot;</span>)[[<span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>]].value_counts(</div>
<div class="line"><span class="lineno">   40</span>        normalize=<span class="keyword">True</span></div>
<div class="line"><span class="lineno">   41</span>    )</div>
<div class="line"><span class="lineno">   42</span>    expected = Series(</div>
<div class="line"><span class="lineno">   43</span>        data=[0.5, 0.25, 0.25, 0.5, 0.5],</div>
<div class="line"><span class="lineno">   44</span>        index=MultiIndex.from_tuples(</div>
<div class="line"><span class="lineno">   45</span>            [</div>
<div class="line"><span class="lineno">   46</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">   47</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">   48</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">   49</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">   50</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">   51</span>            ],</div>
<div class="line"><span class="lineno">   52</span>            names=[<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>],</div>
<div class="line"><span class="lineno">   53</span>        ),</div>
<div class="line"><span class="lineno">   54</span>    )</div>
<div class="line"><span class="lineno">   55</span>    tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afdac51d922ff28e6480bc8aa959750ac" name="afdac51d922ff28e6480bc8aa959750ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdac51d922ff28e6480bc8aa959750ac">&#9670;&#160;</a></span>test_categorical_multiple_groupers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_categorical_multiple_groupers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>observed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  567</span>):</div>
<div class="line"><span class="lineno">  568</span>    <span class="comment"># GH#46357</span></div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>    <span class="comment"># Test multiple categorical groupers when non-groupers are non-categorical</span></div>
<div class="line"><span class="lineno">  571</span>    education_df = education_df.copy()</div>
<div class="line"><span class="lineno">  572</span>    education_df[<span class="stringliteral">&quot;country&quot;</span>] = education_df[<span class="stringliteral">&quot;country&quot;</span>].astype(<span class="stringliteral">&quot;category&quot;</span>)</div>
<div class="line"><span class="lineno">  573</span>    education_df[<span class="stringliteral">&quot;education&quot;</span>] = education_df[<span class="stringliteral">&quot;education&quot;</span>].astype(<span class="stringliteral">&quot;category&quot;</span>)</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>    gp = education_df.groupby(</div>
<div class="line"><span class="lineno">  576</span>        [<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>], as_index=as_index, observed=observed</div>
<div class="line"><span class="lineno">  577</span>    )</div>
<div class="line"><span class="lineno">  578</span>    result = gp.value_counts(normalize=normalize)</div>
<div class="line"><span class="lineno">  579</span> </div>
<div class="line"><span class="lineno">  580</span>    expected_series = Series(</div>
<div class="line"><span class="lineno">  581</span>        data=expected_data[expected_data &gt; 0.0] <span class="keywordflow">if</span> observed <span class="keywordflow">else</span> expected_data,</div>
<div class="line"><span class="lineno">  582</span>        index=MultiIndex.from_tuples(</div>
<div class="line"><span class="lineno">  583</span>            expected_index,</div>
<div class="line"><span class="lineno">  584</span>            names=[<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>, <span class="stringliteral">&quot;gender&quot;</span>],</div>
<div class="line"><span class="lineno">  585</span>        ),</div>
<div class="line"><span class="lineno">  586</span>    )</div>
<div class="line"><span class="lineno">  587</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2):</div>
<div class="line"><span class="lineno">  588</span>        expected_series.index = expected_series.index.set_levels(</div>
<div class="line"><span class="lineno">  589</span>            CategoricalIndex(expected_series.index.levels[i]), level=i</div>
<div class="line"><span class="lineno">  590</span>        )</div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>    <span class="keywordflow">if</span> as_index:</div>
<div class="line"><span class="lineno">  593</span>        tm.assert_series_equal(result, expected_series)</div>
<div class="line"><span class="lineno">  594</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  595</span>        expected = expected_series.reset_index(</div>
<div class="line"><span class="lineno">  596</span>            name=<span class="stringliteral">&quot;proportion&quot;</span> <span class="keywordflow">if</span> normalize <span class="keywordflow">else</span> <span class="stringliteral">&quot;count&quot;</span></div>
<div class="line"><span class="lineno">  597</span>        )</div>
<div class="line"><span class="lineno">  598</span>        tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span> </div>
<div class="line"><span class="lineno">  601</span><span class="preprocessor">@pytest.mark.parametrize(&quot;as_index&quot;, [False, True])</span></div>
<div class="line"><span class="lineno">  602</span><span class="preprocessor">@pytest.mark.parametrize(&quot;observed&quot;, [False, True])</span></div>
<div class="line"><span class="lineno">  603</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  604</span>    <span class="stringliteral">&quot;normalize, expected_data&quot;</span>,</div>
<div class="line"><span class="lineno">  605</span>    [</div>
<div class="line"><span class="lineno">  606</span>        (<span class="keyword">False</span>, np.array([2, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0], dtype=np.int64)),</div>
<div class="line"><span class="lineno">  607</span>        (</div>
<div class="line"><span class="lineno">  608</span>            <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  609</span>            <span class="comment"># NaN values corresponds to non-observed groups</span></div>
<div class="line"><span class="lineno">  610</span>            np.array([0.5, 0.25, 0.25, 0.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 0.0]),</div>
<div class="line"><span class="lineno">  611</span>        ),</div>
<div class="line"><span class="lineno">  612</span>    ],</div>
<div class="line"><span class="lineno">  613</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb493ed639157e319f498efe4d7e3795" name="aeb493ed639157e319f498efe4d7e3795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb493ed639157e319f498efe4d7e3795">&#9670;&#160;</a></span>test_categorical_non_groupers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_categorical_non_groupers </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>observed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  616</span>):</div>
<div class="line"><span class="lineno">  617</span>    <span class="comment"># GH#46357 Test non-observed categories are included in the result,</span></div>
<div class="line"><span class="lineno">  618</span>    <span class="comment"># regardless of `observed`</span></div>
<div class="line"><span class="lineno">  619</span>    education_df = education_df.copy()</div>
<div class="line"><span class="lineno">  620</span>    education_df[<span class="stringliteral">&quot;gender&quot;</span>] = education_df[<span class="stringliteral">&quot;gender&quot;</span>].astype(<span class="stringliteral">&quot;category&quot;</span>)</div>
<div class="line"><span class="lineno">  621</span>    education_df[<span class="stringliteral">&quot;education&quot;</span>] = education_df[<span class="stringliteral">&quot;education&quot;</span>].astype(<span class="stringliteral">&quot;category&quot;</span>)</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>    gp = education_df.groupby(<span class="stringliteral">&quot;country&quot;</span>, as_index=as_index, observed=observed)</div>
<div class="line"><span class="lineno">  624</span>    result = gp.value_counts(normalize=normalize)</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>    expected_index = [</div>
<div class="line"><span class="lineno">  627</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  628</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  629</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  630</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  631</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  632</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  633</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  634</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  635</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  636</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  637</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  638</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  639</span>    ]</div>
<div class="line"><span class="lineno">  640</span>    expected_series = Series(</div>
<div class="line"><span class="lineno">  641</span>        data=expected_data,</div>
<div class="line"><span class="lineno">  642</span>        index=MultiIndex.from_tuples(</div>
<div class="line"><span class="lineno">  643</span>            expected_index,</div>
<div class="line"><span class="lineno">  644</span>            names=[<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>],</div>
<div class="line"><span class="lineno">  645</span>        ),</div>
<div class="line"><span class="lineno">  646</span>    )</div>
<div class="line"><span class="lineno">  647</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(1, 3):</div>
<div class="line"><span class="lineno">  648</span>        expected_series.index = expected_series.index.set_levels(</div>
<div class="line"><span class="lineno">  649</span>            CategoricalIndex(expected_series.index.levels[i]), level=i</div>
<div class="line"><span class="lineno">  650</span>        )</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>    <span class="keywordflow">if</span> as_index:</div>
<div class="line"><span class="lineno">  653</span>        tm.assert_series_equal(result, expected_series)</div>
<div class="line"><span class="lineno">  654</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  655</span>        expected = expected_series.reset_index(</div>
<div class="line"><span class="lineno">  656</span>            name=<span class="stringliteral">&quot;proportion&quot;</span> <span class="keywordflow">if</span> normalize <span class="keywordflow">else</span> <span class="stringliteral">&quot;count&quot;</span></div>
<div class="line"><span class="lineno">  657</span>        )</div>
<div class="line"><span class="lineno">  658</span>        tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  662</span>    <span class="stringliteral">&quot;normalize, expected_label, expected_values&quot;</span>,</div>
<div class="line"><span class="lineno">  663</span>    [</div>
<div class="line"><span class="lineno">  664</span>        (<span class="keyword">False</span>, <span class="stringliteral">&quot;count&quot;</span>, [1, 1, 1]),</div>
<div class="line"><span class="lineno">  665</span>        (<span class="keyword">True</span>, <span class="stringliteral">&quot;proportion&quot;</span>, [0.5, 0.5, 1.0]),</div>
<div class="line"><span class="lineno">  666</span>    ],</div>
<div class="line"><span class="lineno">  667</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d808385a93621e59446da73c99f687d" name="a1d808385a93621e59446da73c99f687d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d808385a93621e59446da73c99f687d">&#9670;&#160;</a></span>test_categorical_single_grouper_observed_false()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_categorical_single_grouper_observed_false </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  487</span>):</div>
<div class="line"><span class="lineno">  488</span>    <span class="comment"># GH#46357</span></div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>    expected_index = [</div>
<div class="line"><span class="lineno">  491</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  492</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  493</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  494</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  495</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  496</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  497</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  498</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  499</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  500</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  501</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  502</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  503</span>        (<span class="stringliteral">&quot;ASIA&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  504</span>        (<span class="stringliteral">&quot;ASIA&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  505</span>        (<span class="stringliteral">&quot;ASIA&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  506</span>        (<span class="stringliteral">&quot;ASIA&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  507</span>        (<span class="stringliteral">&quot;ASIA&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  508</span>        (<span class="stringliteral">&quot;ASIA&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  509</span>    ]</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>    assert_categorical_single_grouper(</div>
<div class="line"><span class="lineno">  512</span>        education_df=education_df,</div>
<div class="line"><span class="lineno">  513</span>        as_index=as_index,</div>
<div class="line"><span class="lineno">  514</span>        observed=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  515</span>        expected_index=expected_index,</div>
<div class="line"><span class="lineno">  516</span>        normalize=normalize,</div>
<div class="line"><span class="lineno">  517</span>        expected_data=expected_data,</div>
<div class="line"><span class="lineno">  518</span>    )</div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span><span class="preprocessor">@pytest.mark.parametrize(&quot;as_index&quot;, [True, False])</span></div>
<div class="line"><span class="lineno">  522</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  523</span>    <span class="stringliteral">&quot;observed, expected_index&quot;</span>,</div>
<div class="line"><span class="lineno">  524</span>    [</div>
<div class="line"><span class="lineno">  525</span>        (</div>
<div class="line"><span class="lineno">  526</span>            <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  527</span>            [</div>
<div class="line"><span class="lineno">  528</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  529</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  530</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  531</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  532</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  533</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  534</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  535</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  536</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  537</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  538</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  539</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  540</span>            ],</div>
<div class="line"><span class="lineno">  541</span>        ),</div>
<div class="line"><span class="lineno">  542</span>        (</div>
<div class="line"><span class="lineno">  543</span>            <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  544</span>            [</div>
<div class="line"><span class="lineno">  545</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  546</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  547</span>                (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  548</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>),</div>
<div class="line"><span class="lineno">  549</span>                (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>),</div>
<div class="line"><span class="lineno">  550</span>            ],</div>
<div class="line"><span class="lineno">  551</span>        ),</div>
<div class="line"><span class="lineno">  552</span>    ],</div>
<div class="line"><span class="lineno">  553</span>)</div>
<div class="line"><span class="lineno">  554</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  555</span>    <span class="stringliteral">&quot;normalize, expected_data&quot;</span>,</div>
<div class="line"><span class="lineno">  556</span>    [</div>
<div class="line"><span class="lineno">  557</span>        (<span class="keyword">False</span>, np.array([1, 0, 2, 0, 1, 0, 1, 0, 1, 0, 0, 0], dtype=np.int64)),</div>
<div class="line"><span class="lineno">  558</span>        (</div>
<div class="line"><span class="lineno">  559</span>            <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  560</span>            <span class="comment"># NaN values corresponds to non-observed groups</span></div>
<div class="line"><span class="lineno">  561</span>            np.array([1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0]),</div>
<div class="line"><span class="lineno">  562</span>        ),</div>
<div class="line"><span class="lineno">  563</span>    ],</div>
<div class="line"><span class="lineno">  564</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae668ac62be5f1cf484197e393633d111" name="ae668ac62be5f1cf484197e393633d111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae668ac62be5f1cf484197e393633d111">&#9670;&#160;</a></span>test_categorical_single_grouper_observed_true()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_categorical_single_grouper_observed_true </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  420</span>):</div>
<div class="line"><span class="lineno">  421</span>    <span class="comment"># GH#46357</span></div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>    expected_index = [</div>
<div class="line"><span class="lineno">  424</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  425</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  426</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  427</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  428</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  429</span>        (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  430</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  431</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  432</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  433</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  434</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  435</span>        (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  436</span>    ]</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>    assert_categorical_single_grouper(</div>
<div class="line"><span class="lineno">  439</span>        education_df=education_df,</div>
<div class="line"><span class="lineno">  440</span>        as_index=as_index,</div>
<div class="line"><span class="lineno">  441</span>        observed=<span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  442</span>        expected_index=expected_index,</div>
<div class="line"><span class="lineno">  443</span>        normalize=normalize,</div>
<div class="line"><span class="lineno">  444</span>        expected_data=expected_data,</div>
<div class="line"><span class="lineno">  445</span>    )</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span><span class="preprocessor">@pytest.mark.parametrize(&quot;as_index&quot;, [True, False])</span></div>
<div class="line"><span class="lineno">  449</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  450</span>    <span class="stringliteral">&quot;normalize, expected_data&quot;</span>,</div>
<div class="line"><span class="lineno">  451</span>    [</div>
<div class="line"><span class="lineno">  452</span>        (</div>
<div class="line"><span class="lineno">  453</span>            <span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  454</span>            np.array(</div>
<div class="line"><span class="lineno">  455</span>                [2, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], dtype=np.int64</div>
<div class="line"><span class="lineno">  456</span>            ),</div>
<div class="line"><span class="lineno">  457</span>        ),</div>
<div class="line"><span class="lineno">  458</span>        (</div>
<div class="line"><span class="lineno">  459</span>            <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  460</span>            np.array(</div>
<div class="line"><span class="lineno">  461</span>                [</div>
<div class="line"><span class="lineno">  462</span>                    0.5,</div>
<div class="line"><span class="lineno">  463</span>                    0.25,</div>
<div class="line"><span class="lineno">  464</span>                    0.25,</div>
<div class="line"><span class="lineno">  465</span>                    0.0,</div>
<div class="line"><span class="lineno">  466</span>                    0.0,</div>
<div class="line"><span class="lineno">  467</span>                    0.0,</div>
<div class="line"><span class="lineno">  468</span>                    0.5,</div>
<div class="line"><span class="lineno">  469</span>                    0.5,</div>
<div class="line"><span class="lineno">  470</span>                    0.0,</div>
<div class="line"><span class="lineno">  471</span>                    0.0,</div>
<div class="line"><span class="lineno">  472</span>                    0.0,</div>
<div class="line"><span class="lineno">  473</span>                    0.0,</div>
<div class="line"><span class="lineno">  474</span>                    0.0,</div>
<div class="line"><span class="lineno">  475</span>                    0.0,</div>
<div class="line"><span class="lineno">  476</span>                    0.0,</div>
<div class="line"><span class="lineno">  477</span>                    0.0,</div>
<div class="line"><span class="lineno">  478</span>                    0.0,</div>
<div class="line"><span class="lineno">  479</span>                    0.0,</div>
<div class="line"><span class="lineno">  480</span>                ]</div>
<div class="line"><span class="lineno">  481</span>            ),</div>
<div class="line"><span class="lineno">  482</span>        ),</div>
<div class="line"><span class="lineno">  483</span>    ],</div>
<div class="line"><span class="lineno">  484</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c872c4e8774f2a976dd56dc56bb36d9" name="a9c872c4e8774f2a976dd56dc56bb36d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c872c4e8774f2a976dd56dc56bb36d9">&#9670;&#160;</a></span>test_categorical_single_grouper_with_only_observed_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_categorical_single_grouper_with_only_observed_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>observed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  325</span>):</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    <span class="comment"># Test single categorical grouper with only observed grouping categories</span></div>
<div class="line"><span class="lineno">  328</span>    <span class="comment"># when non-groupers are also categorical</span></div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>    gp = education_df.astype(<span class="stringliteral">&quot;category&quot;</span>).groupby(</div>
<div class="line"><span class="lineno">  331</span>        <span class="stringliteral">&quot;country&quot;</span>, as_index=as_index, observed=observed</div>
<div class="line"><span class="lineno">  332</span>    )</div>
<div class="line"><span class="lineno">  333</span>    result = gp.value_counts(normalize=normalize)</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    expected_index = MultiIndex.from_tuples(</div>
<div class="line"><span class="lineno">  336</span>        [</div>
<div class="line"><span class="lineno">  337</span>            (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  338</span>            (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  339</span>            (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  340</span>            (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  341</span>            (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  342</span>            (<span class="stringliteral">&quot;FR&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  343</span>            (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  344</span>            (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  345</span>            (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;low&quot;</span>),</div>
<div class="line"><span class="lineno">  346</span>            (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;female&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  347</span>            (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;high&quot;</span>),</div>
<div class="line"><span class="lineno">  348</span>            (<span class="stringliteral">&quot;US&quot;</span>, <span class="stringliteral">&quot;male&quot;</span>, <span class="stringliteral">&quot;medium&quot;</span>),</div>
<div class="line"><span class="lineno">  349</span>        ],</div>
<div class="line"><span class="lineno">  350</span>        names=[<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>],</div>
<div class="line"><span class="lineno">  351</span>    )</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    expected_series = Series(</div>
<div class="line"><span class="lineno">  354</span>        data=expected_data,</div>
<div class="line"><span class="lineno">  355</span>        index=expected_index,</div>
<div class="line"><span class="lineno">  356</span>    )</div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(3):</div>
<div class="line"><span class="lineno">  358</span>        expected_series.index = expected_series.index.set_levels(</div>
<div class="line"><span class="lineno">  359</span>            CategoricalIndex(expected_series.index.levels[i]), level=i</div>
<div class="line"><span class="lineno">  360</span>        )</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">if</span> as_index:</div>
<div class="line"><span class="lineno">  363</span>        tm.assert_series_equal(result, expected_series)</div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  365</span>        expected = expected_series.reset_index(</div>
<div class="line"><span class="lineno">  366</span>            name=<span class="stringliteral">&quot;proportion&quot;</span> <span class="keywordflow">if</span> normalize <span class="keywordflow">else</span> <span class="stringliteral">&quot;count&quot;</span></div>
<div class="line"><span class="lineno">  367</span>        )</div>
<div class="line"><span class="lineno">  368</span>        tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a26df1fa1155191215f54a7e31a68c91c" name="a26df1fa1155191215f54a7e31a68c91c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26df1fa1155191215f54a7e31a68c91c">&#9670;&#160;</a></span>test_column_label_duplicates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_column_label_duplicates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>as_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  693</span><span class="keyword">def </span>test_column_label_duplicates(test, columns, expected_names, as_index):</div>
<div class="line"><span class="lineno">  694</span>    <span class="comment"># GH 44992</span></div>
<div class="line"><span class="lineno">  695</span>    <span class="comment"># Test for duplicate input column labels and generated duplicate labels</span></div>
<div class="line"><span class="lineno">  696</span>    df = DataFrame([[1, 3, 5, 7, 9], [2, 4, 6, 8, 10]], columns=columns)</div>
<div class="line"><span class="lineno">  697</span>    expected_data = [(1, 0, 7, 3, 5, 9), (2, 1, 8, 4, 6, 10)]</div>
<div class="line"><span class="lineno">  698</span>    result = df.groupby([<span class="stringliteral">&quot;a&quot;</span>, [0, 1], <span class="stringliteral">&quot;d&quot;</span>], as_index=as_index).value_counts()</div>
<div class="line"><span class="lineno">  699</span>    <span class="keywordflow">if</span> as_index:</div>
<div class="line"><span class="lineno">  700</span>        expected = Series(</div>
<div class="line"><span class="lineno">  701</span>            data=(1, 1),</div>
<div class="line"><span class="lineno">  702</span>            index=MultiIndex.from_tuples(</div>
<div class="line"><span class="lineno">  703</span>                expected_data,</div>
<div class="line"><span class="lineno">  704</span>                names=expected_names,</div>
<div class="line"><span class="lineno">  705</span>            ),</div>
<div class="line"><span class="lineno">  706</span>        )</div>
<div class="line"><span class="lineno">  707</span>        tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">  708</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  709</span>        expected_data = [list(row) + [1] <span class="keywordflow">for</span> row <span class="keywordflow">in</span> expected_data]</div>
<div class="line"><span class="lineno">  710</span>        expected_columns = list(expected_names)</div>
<div class="line"><span class="lineno">  711</span>        expected_columns[1] = <span class="stringliteral">&quot;level_1&quot;</span></div>
<div class="line"><span class="lineno">  712</span>        expected_columns.append(<span class="stringliteral">&quot;count&quot;</span>)</div>
<div class="line"><span class="lineno">  713</span>        expected = DataFrame(expected_data, columns=expected_columns)</div>
<div class="line"><span class="lineno">  714</span>        tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  715</span> </div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  718</span>    <span class="stringliteral">&quot;normalize, expected_label&quot;</span>,</div>
<div class="line"><span class="lineno">  719</span>    [</div>
<div class="line"><span class="lineno">  720</span>        (<span class="keyword">False</span>, <span class="stringliteral">&quot;count&quot;</span>),</div>
<div class="line"><span class="lineno">  721</span>        (<span class="keyword">True</span>, <span class="stringliteral">&quot;proportion&quot;</span>),</div>
<div class="line"><span class="lineno">  722</span>    ],</div>
<div class="line"><span class="lineno">  723</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="aefc677ae6fbffd22b4a00000b1d914c7" name="aefc677ae6fbffd22b4a00000b1d914c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefc677ae6fbffd22b4a00000b1d914c7">&#9670;&#160;</a></span>test_compound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_compound </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>education_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ascending</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_group_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  153</span>):</div>
<div class="line"><span class="lineno">  154</span>    <span class="comment"># Multiple groupby keys and as_index=False</span></div>
<div class="line"><span class="lineno">  155</span>    gp = education_df.groupby([<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;gender&quot;</span>], as_index=<span class="keyword">False</span>, sort=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  156</span>    result = gp[<span class="stringliteral">&quot;education&quot;</span>].value_counts(</div>
<div class="line"><span class="lineno">  157</span>        normalize=normalize, sort=sort, ascending=ascending</div>
<div class="line"><span class="lineno">  158</span>    )</div>
<div class="line"><span class="lineno">  159</span>    expected = DataFrame()</div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordflow">for</span> column <span class="keywordflow">in</span> [<span class="stringliteral">&quot;country&quot;</span>, <span class="stringliteral">&quot;gender&quot;</span>, <span class="stringliteral">&quot;education&quot;</span>]:</div>
<div class="line"><span class="lineno">  161</span>        expected[column] = [education_df[column][row] <span class="keywordflow">for</span> row <span class="keywordflow">in</span> expected_rows]</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> normalize:</div>
<div class="line"><span class="lineno">  163</span>        expected[<span class="stringliteral">&quot;proportion&quot;</span>] = expected_count</div>
<div class="line"><span class="lineno">  164</span>        expected[<span class="stringliteral">&quot;proportion&quot;</span>] /= expected_group_size</div>
<div class="line"><span class="lineno">  165</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  166</span>        expected[<span class="stringliteral">&quot;count&quot;</span>] = expected_count</div>
<div class="line"><span class="lineno">  167</span>    tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span><span class="preprocessor">@pytest.fixture</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06326f76e3e6d221546ca16d4b285dc9" name="a06326f76e3e6d221546ca16d4b285dc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06326f76e3e6d221546ca16d4b285dc9">&#9670;&#160;</a></span>test_data_frame_value_counts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_data_frame_value_counts </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>animals_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ascending</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  189</span>):</div>
<div class="line"><span class="lineno">  190</span>    <span class="comment"># 3-way compare with :meth:`~DataFrame.value_counts`</span></div>
<div class="line"><span class="lineno">  191</span>    <span class="comment"># Tests from frame/methods/test_value_counts.py</span></div>
<div class="line"><span class="lineno">  192</span>    result_frame = animals_df.value_counts(</div>
<div class="line"><span class="lineno">  193</span>        sort=sort, ascending=ascending, normalize=normalize</div>
<div class="line"><span class="lineno">  194</span>    )</div>
<div class="line"><span class="lineno">  195</span>    expected = Series(</div>
<div class="line"><span class="lineno">  196</span>        data=expected_data,</div>
<div class="line"><span class="lineno">  197</span>        index=MultiIndex.from_arrays(</div>
<div class="line"><span class="lineno">  198</span>            expected_index, names=[<span class="stringliteral">&quot;key&quot;</span>, <span class="stringliteral">&quot;num_legs&quot;</span>, <span class="stringliteral">&quot;num_wings&quot;</span>]</div>
<div class="line"><span class="lineno">  199</span>        ),</div>
<div class="line"><span class="lineno">  200</span>    )</div>
<div class="line"><span class="lineno">  201</span>    tm.assert_series_equal(result_frame, expected)</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span>    result_frame_groupby = animals_df.groupby(<span class="stringliteral">&quot;key&quot;</span>).value_counts(</div>
<div class="line"><span class="lineno">  204</span>        sort=sort, ascending=ascending, normalize=normalize</div>
<div class="line"><span class="lineno">  205</span>    )</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    tm.assert_series_equal(result_frame_groupby, expected)</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span><span class="preprocessor">@pytest.fixture</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6bac1677898730c0119f331c55e7b6b8" name="a6bac1677898730c0119f331c55e7b6b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bac1677898730c0119f331c55e7b6b8">&#9670;&#160;</a></span>test_data_frame_value_counts_dropna()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_data_frame_value_counts_dropna </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>names_with_nulls_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dropna</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  290</span>):</div>
<div class="line"><span class="lineno">  291</span>    <span class="comment"># GH 41334</span></div>
<div class="line"><span class="lineno">  292</span>    <span class="comment"># 3-way compare with :meth:`~DataFrame.value_counts`</span></div>
<div class="line"><span class="lineno">  293</span>    <span class="comment"># Tests with nulls from frame/methods/test_value_counts.py</span></div>
<div class="line"><span class="lineno">  294</span>    result_frame = names_with_nulls_df.value_counts(dropna=dropna, normalize=normalize)</div>
<div class="line"><span class="lineno">  295</span>    expected = Series(</div>
<div class="line"><span class="lineno">  296</span>        data=expected_data,</div>
<div class="line"><span class="lineno">  297</span>        index=expected_index,</div>
<div class="line"><span class="lineno">  298</span>    )</div>
<div class="line"><span class="lineno">  299</span>    <span class="keywordflow">if</span> normalize:</div>
<div class="line"><span class="lineno">  300</span>        expected /= float(len(expected_data))</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>    tm.assert_series_equal(result_frame, expected)</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    result_frame_groupby = names_with_nulls_df.groupby(<span class="stringliteral">&quot;key&quot;</span>).value_counts(</div>
<div class="line"><span class="lineno">  305</span>        dropna=dropna, normalize=normalize</div>
<div class="line"><span class="lineno">  306</span>    )</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    tm.assert_series_equal(result_frame_groupby, expected)</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span> </div>
<div class="line"><span class="lineno">  311</span><span class="preprocessor">@pytest.mark.parametrize(&quot;as_index&quot;, [False, True])</span></div>
<div class="line"><span class="lineno">  312</span><span class="preprocessor">@pytest.mark.parametrize(&quot;observed&quot;, [False, True])</span></div>
<div class="line"><span class="lineno">  313</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  314</span>    <span class="stringliteral">&quot;normalize, expected_data&quot;</span>,</div>
<div class="line"><span class="lineno">  315</span>    [</div>
<div class="line"><span class="lineno">  316</span>        (<span class="keyword">False</span>, np.array([2, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0], dtype=np.int64)),</div>
<div class="line"><span class="lineno">  317</span>        (</div>
<div class="line"><span class="lineno">  318</span>            <span class="keyword">True</span>,</div>
<div class="line"><span class="lineno">  319</span>            np.array([0.5, 0.25, 0.25, 0.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 0.0]),</div>
<div class="line"><span class="lineno">  320</span>        ),</div>
<div class="line"><span class="lineno">  321</span>    ],</div>
<div class="line"><span class="lineno">  322</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a179e1068108a431ea56b3e36cca9df" name="a7a179e1068108a431ea56b3e36cca9df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a179e1068108a431ea56b3e36cca9df">&#9670;&#160;</a></span>test_dropna_combinations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_dropna_combinations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>nulls_df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>group_dropna</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>count_dropna</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  239</span>):</div>
<div class="line"><span class="lineno">  240</span>    gp = nulls_df.groupby([<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>], dropna=group_dropna)</div>
<div class="line"><span class="lineno">  241</span>    result = gp.value_counts(normalize=<span class="keyword">True</span>, sort=<span class="keyword">True</span>, dropna=count_dropna)</div>
<div class="line"><span class="lineno">  242</span>    columns = DataFrame()</div>
<div class="line"><span class="lineno">  243</span>    <span class="keywordflow">for</span> column <span class="keywordflow">in</span> nulls_df.columns:</div>
<div class="line"><span class="lineno">  244</span>        columns[column] = [nulls_df[column][row] <span class="keywordflow">for</span> row <span class="keywordflow">in</span> expected_rows]</div>
<div class="line"><span class="lineno">  245</span>    index = MultiIndex.from_frame(columns)</div>
<div class="line"><span class="lineno">  246</span>    expected = Series(data=expected_values, index=index)</div>
<div class="line"><span class="lineno">  247</span>    tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span><span class="preprocessor">@pytest.fixture</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c8b2a4996ce0abd5d1e1b8884383798" name="a9c8b2a4996ce0abd5d1e1b8884383798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c8b2a4996ce0abd5d1e1b8884383798">&#9670;&#160;</a></span>test_mixed_groupings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_mixed_groupings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  668</span><span class="keyword">def </span>test_mixed_groupings(normalize, expected_label, expected_values):</div>
<div class="line"><span class="lineno">  669</span>    <span class="comment"># Test multiple groupings</span></div>
<div class="line"><span class="lineno">  670</span>    df = DataFrame({<span class="stringliteral">&quot;A&quot;</span>: [1, 2, 1], <span class="stringliteral">&quot;B&quot;</span>: [1, 2, 3]})</div>
<div class="line"><span class="lineno">  671</span>    gp = df.groupby([[4, 5, 4], <span class="stringliteral">&quot;A&quot;</span>, <span class="keyword">lambda</span> i: 7 <span class="keywordflow">if</span> i == 1 <span class="keywordflow">else</span> 8], as_index=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  672</span>    result = gp.value_counts(sort=<span class="keyword">True</span>, normalize=normalize)</div>
<div class="line"><span class="lineno">  673</span>    expected = DataFrame(</div>
<div class="line"><span class="lineno">  674</span>        {</div>
<div class="line"><span class="lineno">  675</span>            <span class="stringliteral">&quot;level_0&quot;</span>: [4, 4, 5],</div>
<div class="line"><span class="lineno">  676</span>            <span class="stringliteral">&quot;A&quot;</span>: [1, 1, 2],</div>
<div class="line"><span class="lineno">  677</span>            <span class="stringliteral">&quot;level_2&quot;</span>: [8, 8, 7],</div>
<div class="line"><span class="lineno">  678</span>            <span class="stringliteral">&quot;B&quot;</span>: [1, 3, 2],</div>
<div class="line"><span class="lineno">  679</span>            expected_label: expected_values,</div>
<div class="line"><span class="lineno">  680</span>        }</div>
<div class="line"><span class="lineno">  681</span>    )</div>
<div class="line"><span class="lineno">  682</span>    tm.assert_frame_equal(result, expected)</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  686</span>    <span class="stringliteral">&quot;test, columns, expected_names&quot;</span>,</div>
<div class="line"><span class="lineno">  687</span>    [</div>
<div class="line"><span class="lineno">  688</span>        (<span class="stringliteral">&quot;repeat&quot;</span>, list(<span class="stringliteral">&quot;abbde&quot;</span>), [<span class="stringliteral">&quot;a&quot;</span>, <span class="keywordtype">None</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>]),</div>
<div class="line"><span class="lineno">  689</span>        (<span class="stringliteral">&quot;level&quot;</span>, list(<span class="stringliteral">&quot;abcd&quot;</span>) + [<span class="stringliteral">&quot;level_1&quot;</span>], [<span class="stringliteral">&quot;a&quot;</span>, <span class="keywordtype">None</span>, <span class="stringliteral">&quot;d&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;level_1&quot;</span>]),</div>
<div class="line"><span class="lineno">  690</span>    ],</div>
<div class="line"><span class="lineno">  691</span>)</div>
<div class="line"><span class="lineno">  692</span><span class="preprocessor">@pytest.mark.parametrize(&quot;as_index&quot;, [False, True])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a039002792ddbe4214d7f17c784de9534" name="a039002792ddbe4214d7f17c784de9534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039002792ddbe4214d7f17c784de9534">&#9670;&#160;</a></span>test_result_label_duplicates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_result_label_duplicates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>normalize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_label</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  724</span><span class="keyword">def </span>test_result_label_duplicates(normalize, expected_label):</div>
<div class="line"><span class="lineno">  725</span>    <span class="comment"># Test for result column label duplicating an input column label</span></div>
<div class="line"><span class="lineno">  726</span>    gb = DataFrame([[1, 2, 3]], columns=[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, expected_label]).groupby(</div>
<div class="line"><span class="lineno">  727</span>        <span class="stringliteral">&quot;a&quot;</span>, as_index=<span class="keyword">False</span></div>
<div class="line"><span class="lineno">  728</span>    )</div>
<div class="line"><span class="lineno">  729</span>    msg = f<span class="stringliteral">&quot;Column label &#39;{expected_label}&#39; is duplicate of result column&quot;</span></div>
<div class="line"><span class="lineno">  730</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  731</span>        gb.value_counts(normalize=normalize)</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afb99eeb19fb8c3211d4adc31162736d7" name="afb99eeb19fb8c3211d4adc31162736d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb99eeb19fb8c3211d4adc31162736d7">&#9670;&#160;</a></span>test_subset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_subset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  759</span><span class="keyword">def </span>test_subset():</div>
<div class="line"><span class="lineno">  760</span>    <span class="comment"># GH 46383</span></div>
<div class="line"><span class="lineno">  761</span>    df = DataFrame({<span class="stringliteral">&quot;c1&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], <span class="stringliteral">&quot;c2&quot;</span>: [<span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>]}, index=[0, 1, 1])</div>
<div class="line"><span class="lineno">  762</span>    result = df.groupby(level=0).value_counts(subset=[<span class="stringliteral">&quot;c2&quot;</span>])</div>
<div class="line"><span class="lineno">  763</span>    expected = Series(</div>
<div class="line"><span class="lineno">  764</span>        [1, 2], index=MultiIndex.from_arrays([[0, 1], [<span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>]], names=[<span class="keywordtype">None</span>, <span class="stringliteral">&quot;c2&quot;</span>])</div>
<div class="line"><span class="lineno">  765</span>    )</div>
<div class="line"><span class="lineno">  766</span>    tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">  767</span> </div>
<div class="line"><span class="lineno">  768</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6e74816beba28e4c7d8d20c3b306e6c" name="ac6e74816beba28e4c7d8d20c3b306e6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6e74816beba28e4c7d8d20c3b306e6c">&#9670;&#160;</a></span>test_subset_doesnt_exist_in_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_subset_doesnt_exist_in_frame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  751</span><span class="keyword">def </span>test_subset_doesnt_exist_in_frame():</div>
<div class="line"><span class="lineno">  752</span>    <span class="comment"># GH 46383</span></div>
<div class="line"><span class="lineno">  753</span>    df = DataFrame({<span class="stringliteral">&quot;c1&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], <span class="stringliteral">&quot;c2&quot;</span>: [<span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>]}, index=[0, 1, 1])</div>
<div class="line"><span class="lineno">  754</span>    msg = <span class="stringliteral">&quot;Keys {&#39;c3&#39;} in subset do not exist in the DataFrame.&quot;</span></div>
<div class="line"><span class="lineno">  755</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  756</span>        df.groupby(<span class="stringliteral">&quot;c1&quot;</span>).value_counts(subset=[<span class="stringliteral">&quot;c3&quot;</span>])</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a48adb57c07edef4fad8f854e1cec2a37" name="a48adb57c07edef4fad8f854e1cec2a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48adb57c07edef4fad8f854e1cec2a37">&#9670;&#160;</a></span>test_subset_duplicate_columns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_subset_duplicate_columns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  769</span><span class="keyword">def </span>test_subset_duplicate_columns():</div>
<div class="line"><span class="lineno">  770</span>    <span class="comment"># GH 46383</span></div>
<div class="line"><span class="lineno">  771</span>    df = DataFrame(</div>
<div class="line"><span class="lineno">  772</span>        [[<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;x&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>], [<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>]],</div>
<div class="line"><span class="lineno">  773</span>        index=[0, 1, 1],</div>
<div class="line"><span class="lineno">  774</span>        columns=[<span class="stringliteral">&quot;c1&quot;</span>, <span class="stringliteral">&quot;c2&quot;</span>, <span class="stringliteral">&quot;c2&quot;</span>],</div>
<div class="line"><span class="lineno">  775</span>    )</div>
<div class="line"><span class="lineno">  776</span>    result = df.groupby(level=0).value_counts(subset=[<span class="stringliteral">&quot;c2&quot;</span>])</div>
<div class="line"><span class="lineno">  777</span>    expected = Series(</div>
<div class="line"><span class="lineno">  778</span>        [1, 2],</div>
<div class="line"><span class="lineno">  779</span>        index=MultiIndex.from_arrays(</div>
<div class="line"><span class="lineno">  780</span>            [[0, 1], [<span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>], [<span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>]], names=[<span class="keywordtype">None</span>, <span class="stringliteral">&quot;c2&quot;</span>, <span class="stringliteral">&quot;c2&quot;</span>]</div>
<div class="line"><span class="lineno">  781</span>        ),</div>
<div class="line"><span class="lineno">  782</span>    )</div>
<div class="line"><span class="lineno">  783</span>    tm.assert_series_equal(result, expected)</div>
</div><!-- fragment -->
</div>
</div>
<a id="aca62b5a770ed73b703b335145075721c" name="aca62b5a770ed73b703b335145075721c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca62b5a770ed73b703b335145075721c">&#9670;&#160;</a></span>test_subset_overlaps_gb_key_raises()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.groupby.test_frame_value_counts.test_subset_overlaps_gb_key_raises </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  743</span><span class="keyword">def </span>test_subset_overlaps_gb_key_raises():</div>
<div class="line"><span class="lineno">  744</span>    <span class="comment"># GH 46383</span></div>
<div class="line"><span class="lineno">  745</span>    df = DataFrame({<span class="stringliteral">&quot;c1&quot;</span>: [<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;c&quot;</span>], <span class="stringliteral">&quot;c2&quot;</span>: [<span class="stringliteral">&quot;x&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>, <span class="stringliteral">&quot;y&quot;</span>]}, index=[0, 1, 1])</div>
<div class="line"><span class="lineno">  746</span>    msg = <span class="stringliteral">&quot;Keys {&#39;c1&#39;} in subset cannot be in the groupby column keys.&quot;</span></div>
<div class="line"><span class="lineno">  747</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=msg):</div>
<div class="line"><span class="lineno">  748</span>        df.groupby(<span class="stringliteral">&quot;c1&quot;</span>).value_counts(subset=[<span class="stringliteral">&quot;c1&quot;</span>])</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
