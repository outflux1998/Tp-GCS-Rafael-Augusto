<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: pandas.tests.window.test_rolling_quantile Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepandas.html">pandas</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1tests_1_1window.html">window</a></li><li class="navelem"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html">test_rolling_quantile</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pandas.tests.window.test_rolling_quantile Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a521e68d316d9520ecc2b0a647520ea8d" id="r_a521e68d316d9520ecc2b0a647520ea8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#a521e68d316d9520ecc2b0a647520ea8d">scoreatpercentile</a> (<a class="el" href="__blas__subroutines_8h.html#a4da0a64c77789ca4c8115aef76120fd2">a</a>, per)</td></tr>
<tr class="separator:a521e68d316d9520ecc2b0a647520ea8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf647c11e97bc943e47784e7c04f592e" id="r_abf647c11e97bc943e47784e7c04f592e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#abf647c11e97bc943e47784e7c04f592e">test_series</a> (series, <a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>, step)</td></tr>
<tr class="separator:abf647c11e97bc943e47784e7c04f592e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e44c7b4ded4271701304baf2042b620" id="r_a5e44c7b4ded4271701304baf2042b620"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#a5e44c7b4ded4271701304baf2042b620">test_frame</a> (raw, frame, <a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>, step)</td></tr>
<tr class="separator:a5e44c7b4ded4271701304baf2042b620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade3ffbb4b9634e12a86c75a1373688e3" id="r_ade3ffbb4b9634e12a86c75a1373688e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#ade3ffbb4b9634e12a86c75a1373688e3">test_time_rule_series</a> (series, <a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>)</td></tr>
<tr class="separator:ade3ffbb4b9634e12a86c75a1373688e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a3255cfc75836a3321f47a36d7548a" id="r_a22a3255cfc75836a3321f47a36d7548a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#a22a3255cfc75836a3321f47a36d7548a">test_time_rule_frame</a> (raw, frame, <a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>)</td></tr>
<tr class="separator:a22a3255cfc75836a3321f47a36d7548a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafad35f147dcf76c0cef3e67c49c5fe7" id="r_aafad35f147dcf76c0cef3e67c49c5fe7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#aafad35f147dcf76c0cef3e67c49c5fe7">test_nans</a> (<a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>)</td></tr>
<tr class="separator:aafad35f147dcf76c0cef3e67c49c5fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8169519fd688dd1ef38011609839158" id="r_ac8169519fd688dd1ef38011609839158"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#ac8169519fd688dd1ef38011609839158">test_min_periods</a> (series, <a class="el" href="__lapack__subroutines_8h.html#a2f5f56d4e33ee3d797a5fc48604f7558">minp</a>, <a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>, step)</td></tr>
<tr class="separator:ac8169519fd688dd1ef38011609839158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6a257669bfb18de111e054369090b2" id="r_a5f6a257669bfb18de111e054369090b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#a5f6a257669bfb18de111e054369090b2">test_center</a> (<a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>)</td></tr>
<tr class="separator:a5f6a257669bfb18de111e054369090b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ecc56297dc24ab57560e7da1cffbd92" id="r_a6ecc56297dc24ab57560e7da1cffbd92"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#a6ecc56297dc24ab57560e7da1cffbd92">test_center_reindex_series</a> (series, <a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>)</td></tr>
<tr class="separator:a6ecc56297dc24ab57560e7da1cffbd92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29b9ab0bdfecb369e5a6f0f60ac706f" id="r_ac29b9ab0bdfecb369e5a6f0f60ac706f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepandas_1_1tests_1_1window_1_1test__rolling__quantile.html#ac29b9ab0bdfecb369e5a6f0f60ac706f">test_center_reindex_frame</a> (frame, <a class="el" href="__lapack__subroutines_8h.html#a8061c32fe478d4807c95448a20a58ca8">q</a>)</td></tr>
<tr class="separator:ac29b9ab0bdfecb369e5a6f0f60ac706f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a521e68d316d9520ecc2b0a647520ea8d" name="a521e68d316d9520ecc2b0a647520ea8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a521e68d316d9520ecc2b0a647520ea8d">&#9670;&#160;</a></span>scoreatpercentile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.scoreatpercentile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>per</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   18</span><span class="keyword">def </span>scoreatpercentile(a, per):</div>
<div class="line"><span class="lineno">   19</span>    values = np.sort(a, axis=0)</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>    idx = int(per / 1.0 * (values.shape[0] - 1))</div>
<div class="line"><span class="lineno">   22</span> </div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordflow">if</span> idx == values.shape[0] - 1:</div>
<div class="line"><span class="lineno">   24</span>        retval = values[-1]</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   27</span>        qlow = idx / (values.shape[0] - 1)</div>
<div class="line"><span class="lineno">   28</span>        qhig = (idx + 1) / (values.shape[0] - 1)</div>
<div class="line"><span class="lineno">   29</span>        vlow = values[idx]</div>
<div class="line"><span class="lineno">   30</span>        vhig = values[idx + 1]</div>
<div class="line"><span class="lineno">   31</span>        retval = vlow + (vhig - vlow) * (per - qlow) / (qhig - qlow)</div>
<div class="line"><span class="lineno">   32</span> </div>
<div class="line"><span class="lineno">   33</span>    <span class="keywordflow">return</span> retval</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f6a257669bfb18de111e054369090b2" name="a5f6a257669bfb18de111e054369090b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f6a257669bfb18de111e054369090b2">&#9670;&#160;</a></span>test_center()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_center </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  129</span><span class="keyword">def </span>test_center(q):</div>
<div class="line"><span class="lineno">  130</span>    obj = Series(np.random.randn(50))</div>
<div class="line"><span class="lineno">  131</span>    obj[:10] = np.NaN</div>
<div class="line"><span class="lineno">  132</span>    obj[-10:] = np.NaN</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    result = obj.rolling(20, center=<span class="keyword">True</span>).quantile(q)</div>
<div class="line"><span class="lineno">  135</span>    expected = (</div>
<div class="line"><span class="lineno">  136</span>        concat([obj, Series([np.NaN] * 9)])</div>
<div class="line"><span class="lineno">  137</span>        .rolling(20)</div>
<div class="line"><span class="lineno">  138</span>        .quantile(q)</div>
<div class="line"><span class="lineno">  139</span>        .iloc[9:]</div>
<div class="line"><span class="lineno">  140</span>        .reset_index(drop=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  141</span>    )</div>
<div class="line"><span class="lineno">  142</span>    tm.assert_series_equal(result, expected)</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac29b9ab0bdfecb369e5a6f0f60ac706f" name="ac29b9ab0bdfecb369e5a6f0f60ac706f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac29b9ab0bdfecb369e5a6f0f60ac706f">&#9670;&#160;</a></span>test_center_reindex_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_center_reindex_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  163</span><span class="keyword">def </span>test_center_reindex_frame(frame, q):</div>
<div class="line"><span class="lineno">  164</span>    <span class="comment"># shifter index</span></div>
<div class="line"><span class="lineno">  165</span>    s = [f<span class="stringliteral">&quot;x{x:d}&quot;</span> <span class="keywordflow">for</span> x <span class="keywordflow">in</span> range(12)]</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    frame_xp = (</div>
<div class="line"><span class="lineno">  168</span>        frame.reindex(list(frame.index) + s)</div>
<div class="line"><span class="lineno">  169</span>        .rolling(window=25)</div>
<div class="line"><span class="lineno">  170</span>        .quantile(q)</div>
<div class="line"><span class="lineno">  171</span>        .shift(-12)</div>
<div class="line"><span class="lineno">  172</span>        .reindex(frame.index)</div>
<div class="line"><span class="lineno">  173</span>    )</div>
<div class="line"><span class="lineno">  174</span>    frame_rs = frame.rolling(window=25, center=<span class="keyword">True</span>).quantile(q)</div>
<div class="line"><span class="lineno">  175</span>    tm.assert_frame_equal(frame_xp, frame_rs)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ecc56297dc24ab57560e7da1cffbd92" name="a6ecc56297dc24ab57560e7da1cffbd92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ecc56297dc24ab57560e7da1cffbd92">&#9670;&#160;</a></span>test_center_reindex_series()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_center_reindex_series </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>series</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  146</span><span class="keyword">def </span>test_center_reindex_series(series, q):</div>
<div class="line"><span class="lineno">  147</span>    <span class="comment"># shifter index</span></div>
<div class="line"><span class="lineno">  148</span>    s = [f<span class="stringliteral">&quot;x{x:d}&quot;</span> <span class="keywordflow">for</span> x <span class="keywordflow">in</span> range(12)]</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    series_xp = (</div>
<div class="line"><span class="lineno">  151</span>        series.reindex(list(series.index) + s)</div>
<div class="line"><span class="lineno">  152</span>        .rolling(window=25)</div>
<div class="line"><span class="lineno">  153</span>        .quantile(q)</div>
<div class="line"><span class="lineno">  154</span>        .shift(-12)</div>
<div class="line"><span class="lineno">  155</span>        .reindex(series.index)</div>
<div class="line"><span class="lineno">  156</span>    )</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    series_rs = series.rolling(window=25, center=<span class="keyword">True</span>).quantile(q)</div>
<div class="line"><span class="lineno">  159</span>    tm.assert_series_equal(series_xp, series_rs)</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e44c7b4ded4271701304baf2042b620" name="a5e44c7b4ded4271701304baf2042b620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e44c7b4ded4271701304baf2042b620">&#9670;&#160;</a></span>test_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>step</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   46</span><span class="keyword">def </span>test_frame(raw, frame, q, step):</div>
<div class="line"><span class="lineno">   47</span>    compare_func = partial(scoreatpercentile, per=q)</div>
<div class="line"><span class="lineno">   48</span>    result = frame.rolling(50, step=step).quantile(q)</div>
<div class="line"><span class="lineno">   49</span>    <span class="keyword">assert</span> isinstance(result, DataFrame)</div>
<div class="line"><span class="lineno">   50</span>    end = range(0, len(frame), step <span class="keywordflow">or</span> 1)[-1] + 1</div>
<div class="line"><span class="lineno">   51</span>    tm.assert_series_equal(</div>
<div class="line"><span class="lineno">   52</span>        result.iloc[-1, :],</div>
<div class="line"><span class="lineno">   53</span>        frame.iloc[end - 50 : end, :].apply(compare_func, axis=0, raw=raw),</div>
<div class="line"><span class="lineno">   54</span>        check_names=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   55</span>    )</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8169519fd688dd1ef38011609839158" name="ac8169519fd688dd1ef38011609839158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8169519fd688dd1ef38011609839158">&#9670;&#160;</a></span>test_min_periods()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_min_periods </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>series</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>minp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>step</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  118</span><span class="keyword">def </span>test_min_periods(series, minp, q, step):</div>
<div class="line"><span class="lineno">  119</span>    result = series.rolling(len(series) + 1, min_periods=minp, step=step).quantile(q)</div>
<div class="line"><span class="lineno">  120</span>    expected = series.rolling(len(series), min_periods=minp, step=step).quantile(q)</div>
<div class="line"><span class="lineno">  121</span>    nan_mask = isna(result)</div>
<div class="line"><span class="lineno">  122</span>    tm.assert_series_equal(nan_mask, isna(expected))</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    nan_mask = ~nan_mask</div>
<div class="line"><span class="lineno">  125</span>    tm.assert_almost_equal(result[nan_mask], expected[nan_mask])</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aafad35f147dcf76c0cef3e67c49c5fe7" name="aafad35f147dcf76c0cef3e67c49c5fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafad35f147dcf76c0cef3e67c49c5fe7">&#9670;&#160;</a></span>test_nans()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_nans </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   89</span><span class="keyword">def </span>test_nans(q):</div>
<div class="line"><span class="lineno">   90</span>    compare_func = partial(scoreatpercentile, per=q)</div>
<div class="line"><span class="lineno">   91</span>    obj = Series(np.random.randn(50))</div>
<div class="line"><span class="lineno">   92</span>    obj[:10] = np.NaN</div>
<div class="line"><span class="lineno">   93</span>    obj[-10:] = np.NaN</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    result = obj.rolling(50, min_periods=30).quantile(q)</div>
<div class="line"><span class="lineno">   96</span>    tm.assert_almost_equal(result.iloc[-1], compare_func(obj[10:-10]))</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    <span class="comment"># min_periods is working correctly</span></div>
<div class="line"><span class="lineno">   99</span>    result = obj.rolling(20, min_periods=15).quantile(q)</div>
<div class="line"><span class="lineno">  100</span>    <span class="keyword">assert</span> isna(result.iloc[23])</div>
<div class="line"><span class="lineno">  101</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> isna(result.iloc[24])</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    <span class="keyword">assert</span> <span class="keywordflow">not</span> isna(result.iloc[-6])</div>
<div class="line"><span class="lineno">  104</span>    <span class="keyword">assert</span> isna(result.iloc[-5])</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    obj2 = Series(np.random.randn(20))</div>
<div class="line"><span class="lineno">  107</span>    result = obj2.rolling(10, min_periods=5).quantile(q)</div>
<div class="line"><span class="lineno">  108</span>    <span class="keyword">assert</span> isna(result.iloc[3])</div>
<div class="line"><span class="lineno">  109</span>    <span class="keyword">assert</span> notna(result.iloc[4])</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    result0 = obj.rolling(20, min_periods=0).quantile(q)</div>
<div class="line"><span class="lineno">  112</span>    result1 = obj.rolling(20, min_periods=1).quantile(q)</div>
<div class="line"><span class="lineno">  113</span>    tm.assert_almost_equal(result0, result1)</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span><span class="preprocessor">@pytest.mark.parametrize(&quot;minp&quot;, [0, 99, 100])</span></div>
<div class="line"><span class="lineno">  117</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf647c11e97bc943e47784e7c04f592e" name="abf647c11e97bc943e47784e7c04f592e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf647c11e97bc943e47784e7c04f592e">&#9670;&#160;</a></span>test_series()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_series </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>series</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>step</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   37</span><span class="keyword">def </span>test_series(series, q, step):</div>
<div class="line"><span class="lineno">   38</span>    compare_func = partial(scoreatpercentile, per=q)</div>
<div class="line"><span class="lineno">   39</span>    result = series.rolling(50, step=step).quantile(q)</div>
<div class="line"><span class="lineno">   40</span>    <span class="keyword">assert</span> isinstance(result, Series)</div>
<div class="line"><span class="lineno">   41</span>    end = range(0, len(series), step <span class="keywordflow">or</span> 1)[-1] + 1</div>
<div class="line"><span class="lineno">   42</span>    tm.assert_almost_equal(result.iloc[-1], compare_func(series[end - 50 : end]))</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a22a3255cfc75836a3321f47a36d7548a" name="a22a3255cfc75836a3321f47a36d7548a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a3255cfc75836a3321f47a36d7548a">&#9670;&#160;</a></span>test_time_rule_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_time_rule_frame </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   72</span><span class="keyword">def </span>test_time_rule_frame(raw, frame, q):</div>
<div class="line"><span class="lineno">   73</span>    compare_func = partial(scoreatpercentile, per=q)</div>
<div class="line"><span class="lineno">   74</span>    win = 25</div>
<div class="line"><span class="lineno">   75</span>    frm = frame[::2].resample(<span class="stringliteral">&quot;B&quot;</span>).mean()</div>
<div class="line"><span class="lineno">   76</span>    frame_result = frm.rolling(window=win, min_periods=10).quantile(q)</div>
<div class="line"><span class="lineno">   77</span>    last_date = frame_result.index[-1]</div>
<div class="line"><span class="lineno">   78</span>    prev_date = last_date - 24 * offsets.BDay()</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>    trunc_frame = frame[::2].truncate(prev_date, last_date)</div>
<div class="line"><span class="lineno">   81</span>    tm.assert_series_equal(</div>
<div class="line"><span class="lineno">   82</span>        frame_result.xs(last_date),</div>
<div class="line"><span class="lineno">   83</span>        trunc_frame.apply(compare_func, raw=raw),</div>
<div class="line"><span class="lineno">   84</span>        check_names=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">   85</span>    )</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade3ffbb4b9634e12a86c75a1373688e3" name="ade3ffbb4b9634e12a86c75a1373688e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade3ffbb4b9634e12a86c75a1373688e3">&#9670;&#160;</a></span>test_time_rule_series()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pandas.tests.window.test_rolling_quantile.test_time_rule_series </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>series</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   59</span><span class="keyword">def </span>test_time_rule_series(series, q):</div>
<div class="line"><span class="lineno">   60</span>    compare_func = partial(scoreatpercentile, per=q)</div>
<div class="line"><span class="lineno">   61</span>    win = 25</div>
<div class="line"><span class="lineno">   62</span>    ser = series[::2].resample(<span class="stringliteral">&quot;B&quot;</span>).mean()</div>
<div class="line"><span class="lineno">   63</span>    series_result = ser.rolling(window=win, min_periods=10).quantile(q)</div>
<div class="line"><span class="lineno">   64</span>    last_date = series_result.index[-1]</div>
<div class="line"><span class="lineno">   65</span>    prev_date = last_date - 24 * offsets.BDay()</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    trunc_series = series[::2].truncate(prev_date, last_date)</div>
<div class="line"><span class="lineno">   68</span>    tm.assert_almost_equal(series_result[-1], compare_func(trunc_series))</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span><span class="preprocessor">@pytest.mark.parametrize(&quot;q&quot;, [0.0, 0.1, 0.5, 0.9, 1.0])</span></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
