<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1inspection.html">inspection</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1inspection_1_1__plot.html">_plot</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1inspection_1_1__plot_1_1partial__dependence.html">partial_dependence</a></li><li class="navelem"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html">PartialDependenceDisplay</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5ca01a6fe1ea65ad5e3934c6af8e7d43" id="r_a5ca01a6fe1ea65ad5e3934c6af8e7d43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a5ca01a6fe1ea65ad5e3934c6af8e7d43">__init__</a> (self, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a8cb8722d8653b2524e4a37324d63145f">pd_results</a>, *<a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#aacf7c47283d2520ebf844a46b4be0c26">features</a>, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a16ef93d05a3da907c494b624e15b981d">feature_names</a>, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a4b76474099f1317a51adc230d97438ed">target_idx</a>, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#aabe2a739f382683d2e441232bed19612">deciles</a>, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a360254f5cafa98b13679a90d26654fb6">pdp_lim</a>=&quot;deprecated&quot;, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a6e64a8812d97547d3f9d2241140f0c88">kind</a>=&quot;average&quot;, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ab83223e9420e6aa02afc5af2452d2a89">subsample</a>=1000, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a2a68f8d0df914159a50505a6c4da9726">random_state</a>=None, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a31dc11fc6b8c0e37a0892dcb0e7e69bd">is_categorical</a>=None)</td></tr>
<tr class="separator:a5ca01a6fe1ea65ad5e3934c6af8e7d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd14fa80ec8a7d6fc39a5ac984574cae" id="r_abd14fa80ec8a7d6fc39a5ac984574cae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#abd14fa80ec8a7d6fc39a5ac984574cae">from_estimator</a> (cls, estimator, X, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#aacf7c47283d2520ebf844a46b4be0c26">features</a>, *categorical_features=None, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a16ef93d05a3da907c494b624e15b981d">feature_names</a>=None, target=None, response_method=&quot;auto&quot;, n_cols=3, grid_resolution=100, percentiles=(0.05, 0.95), method=&quot;auto&quot;, n_jobs=None, verbose=0, line_kw=None, ice_lines_kw=None, pd_line_kw=None, contour_kw=None, ax=None, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a6e64a8812d97547d3f9d2241140f0c88">kind</a>=&quot;average&quot;, centered=False, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ab83223e9420e6aa02afc5af2452d2a89">subsample</a>=1000, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a2a68f8d0df914159a50505a6c4da9726">random_state</a>=None)</td></tr>
<tr class="separator:abd14fa80ec8a7d6fc39a5ac984574cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bad3026896db278e47c97f00e542485" id="r_a8bad3026896db278e47c97f00e542485"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a8bad3026896db278e47c97f00e542485">plot</a> (self, *ax=None, n_cols=3, line_kw=None, ice_lines_kw=None, pd_line_kw=None, contour_kw=None, bar_kw=None, heatmap_kw=None, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a360254f5cafa98b13679a90d26654fb6">pdp_lim</a>=None, centered=False)</td></tr>
<tr class="separator:a8bad3026896db278e47c97f00e542485"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8cb8722d8653b2524e4a37324d63145f" id="r_a8cb8722d8653b2524e4a37324d63145f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a8cb8722d8653b2524e4a37324d63145f">pd_results</a></td></tr>
<tr class="separator:a8cb8722d8653b2524e4a37324d63145f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf7c47283d2520ebf844a46b4be0c26" id="r_aacf7c47283d2520ebf844a46b4be0c26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#aacf7c47283d2520ebf844a46b4be0c26">features</a></td></tr>
<tr class="separator:aacf7c47283d2520ebf844a46b4be0c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16ef93d05a3da907c494b624e15b981d" id="r_a16ef93d05a3da907c494b624e15b981d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a16ef93d05a3da907c494b624e15b981d">feature_names</a></td></tr>
<tr class="separator:a16ef93d05a3da907c494b624e15b981d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b76474099f1317a51adc230d97438ed" id="r_a4b76474099f1317a51adc230d97438ed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a4b76474099f1317a51adc230d97438ed">target_idx</a></td></tr>
<tr class="separator:a4b76474099f1317a51adc230d97438ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a360254f5cafa98b13679a90d26654fb6" id="r_a360254f5cafa98b13679a90d26654fb6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a360254f5cafa98b13679a90d26654fb6">pdp_lim</a></td></tr>
<tr class="separator:a360254f5cafa98b13679a90d26654fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabe2a739f382683d2e441232bed19612" id="r_aabe2a739f382683d2e441232bed19612"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#aabe2a739f382683d2e441232bed19612">deciles</a></td></tr>
<tr class="separator:aabe2a739f382683d2e441232bed19612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e64a8812d97547d3f9d2241140f0c88" id="r_a6e64a8812d97547d3f9d2241140f0c88"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a6e64a8812d97547d3f9d2241140f0c88">kind</a></td></tr>
<tr class="separator:a6e64a8812d97547d3f9d2241140f0c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83223e9420e6aa02afc5af2452d2a89" id="r_ab83223e9420e6aa02afc5af2452d2a89"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ab83223e9420e6aa02afc5af2452d2a89">subsample</a></td></tr>
<tr class="separator:ab83223e9420e6aa02afc5af2452d2a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a68f8d0df914159a50505a6c4da9726" id="r_a2a68f8d0df914159a50505a6c4da9726"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a2a68f8d0df914159a50505a6c4da9726">random_state</a></td></tr>
<tr class="separator:a2a68f8d0df914159a50505a6c4da9726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31dc11fc6b8c0e37a0892dcb0e7e69bd" id="r_a31dc11fc6b8c0e37a0892dcb0e7e69bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a31dc11fc6b8c0e37a0892dcb0e7e69bd">is_categorical</a></td></tr>
<tr class="separator:a31dc11fc6b8c0e37a0892dcb0e7e69bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45361954b808f95b88de46c06af01c05" id="r_a45361954b808f95b88de46c06af01c05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a45361954b808f95b88de46c06af01c05">bounding_ax_</a></td></tr>
<tr class="separator:a45361954b808f95b88de46c06af01c05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ccac90414bf79eba2de75294401a8c8" id="r_a9ccac90414bf79eba2de75294401a8c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a9ccac90414bf79eba2de75294401a8c8">figure_</a></td></tr>
<tr class="separator:a9ccac90414bf79eba2de75294401a8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e1fa61c9e33723c87d8e46c4090c198" id="r_a4e1fa61c9e33723c87d8e46c4090c198"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a4e1fa61c9e33723c87d8e46c4090c198">axes_</a></td></tr>
<tr class="separator:a4e1fa61c9e33723c87d8e46c4090c198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44528deb7e0f5afe87726c947d0ae952" id="r_a44528deb7e0f5afe87726c947d0ae952"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a44528deb7e0f5afe87726c947d0ae952">lines_</a></td></tr>
<tr class="separator:a44528deb7e0f5afe87726c947d0ae952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f7fa61cc9b3b1c0f7b6fa67335da036" id="r_a8f7fa61cc9b3b1c0f7b6fa67335da036"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a8f7fa61cc9b3b1c0f7b6fa67335da036">contours_</a></td></tr>
<tr class="separator:a8f7fa61cc9b3b1c0f7b6fa67335da036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc15cc07e56ae1d1aa99b33b58aea6e" id="r_a1bc15cc07e56ae1d1aa99b33b58aea6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a1bc15cc07e56ae1d1aa99b33b58aea6e">bars_</a></td></tr>
<tr class="separator:a1bc15cc07e56ae1d1aa99b33b58aea6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac190bff0264c678fc885933dfb8cdffc" id="r_ac190bff0264c678fc885933dfb8cdffc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ac190bff0264c678fc885933dfb8cdffc">heatmaps_</a></td></tr>
<tr class="separator:ac190bff0264c678fc885933dfb8cdffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad36345457ecd2fa8002c19c761791c5b" id="r_ad36345457ecd2fa8002c19c761791c5b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ad36345457ecd2fa8002c19c761791c5b">deciles_vlines_</a></td></tr>
<tr class="separator:ad36345457ecd2fa8002c19c761791c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2deb29b357572fa418a5eea84e01f25" id="r_ac2deb29b357572fa418a5eea84e01f25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ac2deb29b357572fa418a5eea84e01f25">deciles_hlines_</a></td></tr>
<tr class="separator:ac2deb29b357572fa418a5eea84e01f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ae06431a04efe50332185bb0d0c794d3a" id="r_ae06431a04efe50332185bb0d0c794d3a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ae06431a04efe50332185bb0d0c794d3a">_get_sample_count</a> (self, n_samples)</td></tr>
<tr class="separator:ae06431a04efe50332185bb0d0c794d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6bed8abbbe3ea00cf78a6418a09a012" id="r_ad6bed8abbbe3ea00cf78a6418a09a012"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ad6bed8abbbe3ea00cf78a6418a09a012">_plot_ice_lines</a> (self, preds, feature_values, n_ice_to_plot, ax, pd_plot_idx, n_total_lines_by_plot, individual_line_kw)</td></tr>
<tr class="separator:ad6bed8abbbe3ea00cf78a6418a09a012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a08bf468454afb42e9d65fd1fd59040" id="r_a8a08bf468454afb42e9d65fd1fd59040"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a8a08bf468454afb42e9d65fd1fd59040">_plot_average_dependence</a> (self, avg_preds, feature_values, ax, pd_line_idx, line_kw, categorical, bar_kw)</td></tr>
<tr class="separator:a8a08bf468454afb42e9d65fd1fd59040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b11e7fb5933bb151140cdedd3e112b5" id="r_a8b11e7fb5933bb151140cdedd3e112b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a8b11e7fb5933bb151140cdedd3e112b5">_plot_one_way_partial_dependence</a> (self, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a6e64a8812d97547d3f9d2241140f0c88">kind</a>, preds, avg_preds, feature_values, feature_idx, n_ice_lines, ax, n_cols, pd_plot_idx, n_lines, ice_lines_kw, pd_line_kw, categorical, bar_kw, <a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#a360254f5cafa98b13679a90d26654fb6">pdp_lim</a>)</td></tr>
<tr class="separator:a8b11e7fb5933bb151140cdedd3e112b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace9214544f8ea9349bf67e5993bb4d37" id="r_ace9214544f8ea9349bf67e5993bb4d37"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsklearn_1_1inspection_1_1__plot_1_1partial__dependence_1_1_partial_dependence_display.html#ace9214544f8ea9349bf67e5993bb4d37">_plot_two_way_partial_dependence</a> (self, avg_preds, feature_values, feature_idx, ax, pd_plot_idx, Z_level, contour_kw, categorical, heatmap_kw)</td></tr>
<tr class="separator:ace9214544f8ea9349bf67e5993bb4d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Partial Dependence Plot (PDP).

This can also display individual partial dependencies which are often
referred to as: Individual Condition Expectation (ICE).

It is recommended to use
:func:`~sklearn.inspection.PartialDependenceDisplay.from_estimator` to create a
:class:`~sklearn.inspection.PartialDependenceDisplay`. All parameters are
stored as attributes.

Read more in
:ref:`sphx_glr_auto_examples_miscellaneous_plot_partial_dependence_visualization_api.py`
and the :ref:`User Guide &lt;partial_dependence&gt;`.

    .. versionadded:: 0.22

Parameters
----------
pd_results : list of Bunch
    Results of :func:`~sklearn.inspection.partial_dependence` for
    ``features``.

features : list of (int,) or list of (int, int)
    Indices of features for a given plot. A tuple of one integer will plot
    a partial dependence curve of one feature. A tuple of two integers will
    plot a two-way partial dependence curve as a contour plot.

feature_names : list of str
    Feature names corresponding to the indices in ``features``.

target_idx : int

    - In a multiclass setting, specifies the class for which the PDPs
      should be computed. Note that for binary classification, the
      positive class (index 1) is always used.
    - In a multioutput setting, specifies the task for which the PDPs
      should be computed.

    Ignored in binary classification or classical regression settings.

deciles : dict
    Deciles for feature indices in ``features``.

pdp_lim : dict or None
    Global min and max average predictions, such that all plots will have
    the same scale and y limits. `pdp_lim[1]` is the global min and max for
    single partial dependence curves. `pdp_lim[2]` is the global min and
    max for two-way partial dependence curves. If `None`, the limit will be
    inferred from the global minimum and maximum of all predictions.

    .. deprecated:: 1.1
       Pass the parameter `pdp_lim` to
       :meth:`~sklearn.inspection.PartialDependenceDisplay.plot` instead.
       It will be removed in 1.3.

kind : {'average', 'individual', 'both'} or list of such str, \
        default='average'
    Whether to plot the partial dependence averaged across all the samples
    in the dataset or one line per sample or both.

    - ``kind='average'`` results in the traditional PD plot;
    - ``kind='individual'`` results in the ICE plot;
    - ``kind='both'`` results in plotting both the ICE and PD on the same
      plot.

    A list of such strings can be provided to specify `kind` on a per-plot
    basis. The length of the list should be the same as the number of
    interaction requested in `features`.

    .. note::
       ICE ('individual' or 'both') is not a valid option for 2-ways
       interactions plot. As a result, an error will be raised.
       2-ways interaction plots should always be configured to
       use the 'average' kind instead.

    .. note::
       The fast ``method='recursion'`` option is only available for
       ``kind='average'``. Plotting individual dependencies requires using
       the slower ``method='brute'`` option.

    .. versionadded:: 0.24
       Add `kind` parameter with `'average'`, `'individual'`, and `'both'`
       options.

    .. versionadded:: 1.1
       Add the possibility to pass a list of string specifying `kind`
       for each plot.

subsample : float, int or None, default=1000
    Sampling for ICE curves when `kind` is 'individual' or 'both'.
    If float, should be between 0.0 and 1.0 and represent the proportion
    of the dataset to be used to plot ICE curves. If int, represents the
    maximum absolute number of samples to use.

    Note that the full dataset is still used to calculate partial
    dependence when `kind='both'`.

    .. versionadded:: 0.24

random_state : int, RandomState instance or None, default=None
    Controls the randomness of the selected samples when subsamples is not
    `None`. See :term:`Glossary &lt;random_state&gt;` for details.

    .. versionadded:: 0.24

is_categorical : list of (bool,) or list of (bool, bool), default=None
    Whether each target feature in `features` is categorical or not.
    The list should be same size as `features`. If `None`, all features
    are assumed to be continuous.

    .. versionadded:: 1.2

Attributes
----------
bounding_ax_ : matplotlib Axes or None
    If `ax` is an axes or None, the `bounding_ax_` is the axes where the
    grid of partial dependence plots are drawn. If `ax` is a list of axes
    or a numpy array of axes, `bounding_ax_` is None.

axes_ : ndarray of matplotlib Axes
    If `ax` is an axes or None, `axes_[i, j]` is the axes on the i-th row
    and j-th column. If `ax` is a list of axes, `axes_[i]` is the i-th item
    in `ax`. Elements that are None correspond to a nonexisting axes in
    that position.

lines_ : ndarray of matplotlib Artists
    If `ax` is an axes or None, `lines_[i, j]` is the partial dependence
    curve on the i-th row and j-th column. If `ax` is a list of axes,
    `lines_[i]` is the partial dependence curve corresponding to the i-th
    item in `ax`. Elements that are None correspond to a nonexisting axes
    or an axes that does not include a line plot.

deciles_vlines_ : ndarray of matplotlib LineCollection
    If `ax` is an axes or None, `vlines_[i, j]` is the line collection
    representing the x axis deciles of the i-th row and j-th column. If
    `ax` is a list of axes, `vlines_[i]` corresponds to the i-th item in
    `ax`. Elements that are None correspond to a nonexisting axes or an
    axes that does not include a PDP plot.

    .. versionadded:: 0.23

deciles_hlines_ : ndarray of matplotlib LineCollection
    If `ax` is an axes or None, `vlines_[i, j]` is the line collection
    representing the y axis deciles of the i-th row and j-th column. If
    `ax` is a list of axes, `vlines_[i]` corresponds to the i-th item in
    `ax`. Elements that are None correspond to a nonexisting axes or an
    axes that does not include a 2-way plot.

    .. versionadded:: 0.23

contours_ : ndarray of matplotlib Artists
    If `ax` is an axes or None, `contours_[i, j]` is the partial dependence
    plot on the i-th row and j-th column. If `ax` is a list of axes,
    `contours_[i]` is the partial dependence plot corresponding to the i-th
    item in `ax`. Elements that are None correspond to a nonexisting axes
    or an axes that does not include a contour plot.

bars_ : ndarray of matplotlib Artists
    If `ax` is an axes or None, `bars_[i, j]` is the partial dependence bar
    plot on the i-th row and j-th column (for a categorical feature).
    If `ax` is a list of axes, `bars_[i]` is the partial dependence bar
    plot corresponding to the i-th item in `ax`. Elements that are None
    correspond to a nonexisting axes or an axes that does not include a
    bar plot.

    .. versionadded:: 1.2

heatmaps_ : ndarray of matplotlib Artists
    If `ax` is an axes or None, `heatmaps_[i, j]` is the partial dependence
    heatmap on the i-th row and j-th column (for a pair of categorical
    features) . If `ax` is a list of axes, `heatmaps_[i]` is the partial
    dependence heatmap corresponding to the i-th item in `ax`. Elements
    that are None correspond to a nonexisting axes or an axes that does not
    include a heatmap.

    .. versionadded:: 1.2

figure_ : matplotlib Figure
    Figure containing partial dependence plots.

See Also
--------
partial_dependence : Compute Partial Dependence values.
PartialDependenceDisplay.from_estimator : Plot Partial Dependence.

Examples
--------
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import matplotlib.pyplot as plt
&gt;&gt;&gt; from sklearn.datasets import make_friedman1
&gt;&gt;&gt; from sklearn.ensemble import GradientBoostingRegressor
&gt;&gt;&gt; from sklearn.inspection import PartialDependenceDisplay
&gt;&gt;&gt; from sklearn.inspection import partial_dependence
&gt;&gt;&gt; X, y = make_friedman1()
&gt;&gt;&gt; clf = GradientBoostingRegressor(n_estimators=10).fit(X, y)
&gt;&gt;&gt; features, feature_names = [(0,)], [f"Features #{i}" for i in range(X.shape[1])]
&gt;&gt;&gt; deciles = {0: np.linspace(0, 1, num=5)}
&gt;&gt;&gt; pd_results = partial_dependence(
...     clf, X, features=0, kind="average", grid_resolution=5)
&gt;&gt;&gt; display = PartialDependenceDisplay(
...     [pd_results], features=features, feature_names=feature_names,
...     target_idx=0, deciles=deciles
... )
&gt;&gt;&gt; display.plot(pdp_lim={1: (-1.38, 0.66)})
&lt;...&gt;
&gt;&gt;&gt; plt.show()
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5ca01a6fe1ea65ad5e3934c6af8e7d43" name="a5ca01a6fe1ea65ad5e3934c6af8e7d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ca01a6fe1ea65ad5e3934c6af8e7d43">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deciles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pdp_lim</em> = <code>&quot;deprecated&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kind</em> = <code>&quot;average&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subsample</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>random_state</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>is_categorical</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  245</span>    ):</div>
<div class="line"><span class="lineno">  246</span>        self.pd_results = pd_results</div>
<div class="line"><span class="lineno">  247</span>        self.features = features</div>
<div class="line"><span class="lineno">  248</span>        self.feature_names = feature_names</div>
<div class="line"><span class="lineno">  249</span>        self.target_idx = target_idx</div>
<div class="line"><span class="lineno">  250</span>        self.pdp_lim = pdp_lim</div>
<div class="line"><span class="lineno">  251</span>        self.deciles = deciles</div>
<div class="line"><span class="lineno">  252</span>        self.kind = kind</div>
<div class="line"><span class="lineno">  253</span>        self.subsample = subsample</div>
<div class="line"><span class="lineno">  254</span>        self.random_state = random_state</div>
<div class="line"><span class="lineno">  255</span>        self.is_categorical = is_categorical</div>
<div class="line"><span class="lineno">  256</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae06431a04efe50332185bb0d0c794d3a" name="ae06431a04efe50332185bb0d0c794d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae06431a04efe50332185bb0d0c794d3a">&#9670;&#160;</a></span>_get_sample_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay._get_sample_count </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Compute the number of samples as an integer.</pre> <div class="fragment"><div class="line"><span class="lineno">  769</span>    <span class="keyword">def </span>_get_sample_count(self, n_samples):</div>
<div class="line"><span class="lineno">  770</span>        <span class="stringliteral">&quot;&quot;&quot;Compute the number of samples as an integer.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  771</span>        <span class="keywordflow">if</span> isinstance(self.subsample, numbers.Integral):</div>
<div class="line"><span class="lineno">  772</span>            <span class="keywordflow">if</span> self.subsample &lt; n_samples:</div>
<div class="line"><span class="lineno">  773</span>                <span class="keywordflow">return</span> self.subsample</div>
<div class="line"><span class="lineno">  774</span>            <span class="keywordflow">return</span> n_samples</div>
<div class="line"><span class="lineno">  775</span>        <span class="keywordflow">elif</span> isinstance(self.subsample, numbers.Real):</div>
<div class="line"><span class="lineno">  776</span>            <span class="keywordflow">return</span> ceil(n_samples * self.subsample)</div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">return</span> n_samples</div>
<div class="line"><span class="lineno">  778</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a08bf468454afb42e9d65fd1fd59040" name="a8a08bf468454afb42e9d65fd1fd59040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a08bf468454afb42e9d65fd1fd59040">&#9670;&#160;</a></span>_plot_average_dependence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay._plot_average_dependence </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>avg_preds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_line_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>line_kw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>categorical</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bar_kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Plot the average partial dependence.

Parameters
----------
avg_preds : ndarray of shape (n_grid_points,)
    The average predictions for all points of `feature_values` for a
    given feature for all samples in `X`.
feature_values : ndarray of shape (n_grid_points,)
    The feature values for which the predictions have been computed.
ax : Matplotlib axes
    The axis on which to plot the average PD.
pd_line_idx : int
    The sequential index of the plot. It will be unraveled to find the
    matching 2D position in the grid layout.
line_kw : dict
    Dict with keywords passed when plotting the PD plot.
categorical : bool
    Whether feature is categorical.
bar_kw: dict
    Dict with keywords passed when plotting the PD bars (categorical).
</pre> <div class="fragment"><div class="line"><span class="lineno">  837</span>    ):</div>
<div class="line"><span class="lineno">  838</span>        <span class="stringliteral">&quot;&quot;&quot;Plot the average partial dependence.</span></div>
<div class="line"><span class="lineno">  839</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  840</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno">  841</span><span class="stringliteral">        ----------</span></div>
<div class="line"><span class="lineno">  842</span><span class="stringliteral">        avg_preds : ndarray of shape (n_grid_points,)</span></div>
<div class="line"><span class="lineno">  843</span><span class="stringliteral">            The average predictions for all points of `feature_values` for a</span></div>
<div class="line"><span class="lineno">  844</span><span class="stringliteral">            given feature for all samples in `X`.</span></div>
<div class="line"><span class="lineno">  845</span><span class="stringliteral">        feature_values : ndarray of shape (n_grid_points,)</span></div>
<div class="line"><span class="lineno">  846</span><span class="stringliteral">            The feature values for which the predictions have been computed.</span></div>
<div class="line"><span class="lineno">  847</span><span class="stringliteral">        ax : Matplotlib axes</span></div>
<div class="line"><span class="lineno">  848</span><span class="stringliteral">            The axis on which to plot the average PD.</span></div>
<div class="line"><span class="lineno">  849</span><span class="stringliteral">        pd_line_idx : int</span></div>
<div class="line"><span class="lineno">  850</span><span class="stringliteral">            The sequential index of the plot. It will be unraveled to find the</span></div>
<div class="line"><span class="lineno">  851</span><span class="stringliteral">            matching 2D position in the grid layout.</span></div>
<div class="line"><span class="lineno">  852</span><span class="stringliteral">        line_kw : dict</span></div>
<div class="line"><span class="lineno">  853</span><span class="stringliteral">            Dict with keywords passed when plotting the PD plot.</span></div>
<div class="line"><span class="lineno">  854</span><span class="stringliteral">        categorical : bool</span></div>
<div class="line"><span class="lineno">  855</span><span class="stringliteral">            Whether feature is categorical.</span></div>
<div class="line"><span class="lineno">  856</span><span class="stringliteral">        bar_kw: dict</span></div>
<div class="line"><span class="lineno">  857</span><span class="stringliteral">            Dict with keywords passed when plotting the PD bars (categorical).</span></div>
<div class="line"><span class="lineno">  858</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  859</span>        <span class="keywordflow">if</span> categorical:</div>
<div class="line"><span class="lineno">  860</span>            bar_idx = np.unravel_index(pd_line_idx, self.bars_.shape)</div>
<div class="line"><span class="lineno">  861</span>            self.bars_[bar_idx] = ax.bar(feature_values, avg_preds, **bar_kw)[0]</div>
<div class="line"><span class="lineno">  862</span>            ax.tick_params(axis=<span class="stringliteral">&quot;x&quot;</span>, rotation=90)</div>
<div class="line"><span class="lineno">  863</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  864</span>            line_idx = np.unravel_index(pd_line_idx, self.lines_.shape)</div>
<div class="line"><span class="lineno">  865</span>            self.lines_[line_idx] = ax.plot(</div>
<div class="line"><span class="lineno">  866</span>                feature_values,</div>
<div class="line"><span class="lineno">  867</span>                avg_preds,</div>
<div class="line"><span class="lineno">  868</span>                **line_kw,</div>
<div class="line"><span class="lineno">  869</span>            )[0]</div>
<div class="line"><span class="lineno">  870</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6bed8abbbe3ea00cf78a6418a09a012" name="ad6bed8abbbe3ea00cf78a6418a09a012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6bed8abbbe3ea00cf78a6418a09a012">&#9670;&#160;</a></span>_plot_ice_lines()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay._plot_ice_lines </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>preds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_ice_to_plot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_plot_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_total_lines_by_plot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>individual_line_kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Plot the ICE lines.

Parameters
----------
preds : ndarray of shape \
        (n_instances, n_grid_points)
    The predictions computed for all points of `feature_values` for a
    given feature for all samples in `X`.
feature_values : ndarray of shape (n_grid_points,)
    The feature values for which the predictions have been computed.
n_ice_to_plot : int
    The number of ICE lines to plot.
ax : Matplotlib axes
    The axis on which to plot the ICE lines.
pd_plot_idx : int
    The sequential index of the plot. It will be unraveled to find the
    matching 2D position in the grid layout.
n_total_lines_by_plot : int
    The total number of lines expected to be plot on the axis.
individual_line_kw : dict
    Dict with keywords passed when plotting the ICE lines.
</pre> <div class="fragment"><div class="line"><span class="lineno">  788</span>    ):</div>
<div class="line"><span class="lineno">  789</span>        <span class="stringliteral">&quot;&quot;&quot;Plot the ICE lines.</span></div>
<div class="line"><span class="lineno">  790</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  791</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno">  792</span><span class="stringliteral">        ----------</span></div>
<div class="line"><span class="lineno">  793</span><span class="stringliteral">        preds : ndarray of shape \</span></div>
<div class="line"><span class="lineno">  794</span><span class="stringliteral">                (n_instances, n_grid_points)</span></div>
<div class="line"><span class="lineno">  795</span><span class="stringliteral">            The predictions computed for all points of `feature_values` for a</span></div>
<div class="line"><span class="lineno">  796</span><span class="stringliteral">            given feature for all samples in `X`.</span></div>
<div class="line"><span class="lineno">  797</span><span class="stringliteral">        feature_values : ndarray of shape (n_grid_points,)</span></div>
<div class="line"><span class="lineno">  798</span><span class="stringliteral">            The feature values for which the predictions have been computed.</span></div>
<div class="line"><span class="lineno">  799</span><span class="stringliteral">        n_ice_to_plot : int</span></div>
<div class="line"><span class="lineno">  800</span><span class="stringliteral">            The number of ICE lines to plot.</span></div>
<div class="line"><span class="lineno">  801</span><span class="stringliteral">        ax : Matplotlib axes</span></div>
<div class="line"><span class="lineno">  802</span><span class="stringliteral">            The axis on which to plot the ICE lines.</span></div>
<div class="line"><span class="lineno">  803</span><span class="stringliteral">        pd_plot_idx : int</span></div>
<div class="line"><span class="lineno">  804</span><span class="stringliteral">            The sequential index of the plot. It will be unraveled to find the</span></div>
<div class="line"><span class="lineno">  805</span><span class="stringliteral">            matching 2D position in the grid layout.</span></div>
<div class="line"><span class="lineno">  806</span><span class="stringliteral">        n_total_lines_by_plot : int</span></div>
<div class="line"><span class="lineno">  807</span><span class="stringliteral">            The total number of lines expected to be plot on the axis.</span></div>
<div class="line"><span class="lineno">  808</span><span class="stringliteral">        individual_line_kw : dict</span></div>
<div class="line"><span class="lineno">  809</span><span class="stringliteral">            Dict with keywords passed when plotting the ICE lines.</span></div>
<div class="line"><span class="lineno">  810</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  811</span>        rng = check_random_state(self.random_state)</div>
<div class="line"><span class="lineno">  812</span>        <span class="comment"># subsample ice</span></div>
<div class="line"><span class="lineno">  813</span>        ice_lines_idx = rng.choice(</div>
<div class="line"><span class="lineno">  814</span>            preds.shape[0],</div>
<div class="line"><span class="lineno">  815</span>            n_ice_to_plot,</div>
<div class="line"><span class="lineno">  816</span>            replace=<span class="keyword">False</span>,</div>
<div class="line"><span class="lineno">  817</span>        )</div>
<div class="line"><span class="lineno">  818</span>        ice_lines_subsampled = preds[ice_lines_idx, :]</div>
<div class="line"><span class="lineno">  819</span>        <span class="comment"># plot the subsampled ice</span></div>
<div class="line"><span class="lineno">  820</span>        <span class="keywordflow">for</span> ice_idx, ice <span class="keywordflow">in</span> enumerate(ice_lines_subsampled):</div>
<div class="line"><span class="lineno">  821</span>            line_idx = np.unravel_index(</div>
<div class="line"><span class="lineno">  822</span>                pd_plot_idx * n_total_lines_by_plot + ice_idx, self.lines_.shape</div>
<div class="line"><span class="lineno">  823</span>            )</div>
<div class="line"><span class="lineno">  824</span>            self.lines_[line_idx] = ax.plot(</div>
<div class="line"><span class="lineno">  825</span>                feature_values, ice.ravel(), **individual_line_kw</div>
<div class="line"><span class="lineno">  826</span>            )[0]</div>
<div class="line"><span class="lineno">  827</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b11e7fb5933bb151140cdedd3e112b5" name="a8b11e7fb5933bb151140cdedd3e112b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b11e7fb5933bb151140cdedd3e112b5">&#9670;&#160;</a></span>_plot_one_way_partial_dependence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay._plot_one_way_partial_dependence </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>preds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>avg_preds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_ice_lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_plot_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ice_lines_kw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_line_kw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>categorical</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bar_kw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pdp_lim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Plot 1-way partial dependence: ICE and PDP.

Parameters
----------
kind : str
    The kind of partial plot to draw.
preds : ndarray of shape \
        (n_instances, n_grid_points) or None
    The predictions computed for all points of `feature_values` for a
    given feature for all samples in `X`.
avg_preds : ndarray of shape (n_grid_points,)
    The average predictions for all points of `feature_values` for a
    given feature for all samples in `X`.
feature_values : ndarray of shape (n_grid_points,)
    The feature values for which the predictions have been computed.
feature_idx : int
    The index corresponding to the target feature.
n_ice_lines : int
    The number of ICE lines to plot.
ax : Matplotlib axes
    The axis on which to plot the ICE and PDP lines.
n_cols : int or None
    The number of column in the axis.
pd_plot_idx : int
    The sequential index of the plot. It will be unraveled to find the
    matching 2D position in the grid layout.
n_lines : int
    The total number of lines expected to be plot on the axis.
ice_lines_kw : dict
    Dict with keywords passed when plotting the ICE lines.
pd_line_kw : dict
    Dict with keywords passed when plotting the PD plot.
categorical : bool
    Whether feature is categorical.
bar_kw: dict
    Dict with keywords passed when plotting the PD bars (categorical).
pdp_lim : dict
    Global min and max average predictions, such that all plots will
    have the same scale and y limits. `pdp_lim[1]` is the global min
    and max for single partial dependence curves.
</pre> <div class="fragment"><div class="line"><span class="lineno">  888</span>    ):</div>
<div class="line"><span class="lineno">  889</span>        <span class="stringliteral">&quot;&quot;&quot;Plot 1-way partial dependence: ICE and PDP.</span></div>
<div class="line"><span class="lineno">  890</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  891</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno">  892</span><span class="stringliteral">        ----------</span></div>
<div class="line"><span class="lineno">  893</span><span class="stringliteral">        kind : str</span></div>
<div class="line"><span class="lineno">  894</span><span class="stringliteral">            The kind of partial plot to draw.</span></div>
<div class="line"><span class="lineno">  895</span><span class="stringliteral">        preds : ndarray of shape \</span></div>
<div class="line"><span class="lineno">  896</span><span class="stringliteral">                (n_instances, n_grid_points) or None</span></div>
<div class="line"><span class="lineno">  897</span><span class="stringliteral">            The predictions computed for all points of `feature_values` for a</span></div>
<div class="line"><span class="lineno">  898</span><span class="stringliteral">            given feature for all samples in `X`.</span></div>
<div class="line"><span class="lineno">  899</span><span class="stringliteral">        avg_preds : ndarray of shape (n_grid_points,)</span></div>
<div class="line"><span class="lineno">  900</span><span class="stringliteral">            The average predictions for all points of `feature_values` for a</span></div>
<div class="line"><span class="lineno">  901</span><span class="stringliteral">            given feature for all samples in `X`.</span></div>
<div class="line"><span class="lineno">  902</span><span class="stringliteral">        feature_values : ndarray of shape (n_grid_points,)</span></div>
<div class="line"><span class="lineno">  903</span><span class="stringliteral">            The feature values for which the predictions have been computed.</span></div>
<div class="line"><span class="lineno">  904</span><span class="stringliteral">        feature_idx : int</span></div>
<div class="line"><span class="lineno">  905</span><span class="stringliteral">            The index corresponding to the target feature.</span></div>
<div class="line"><span class="lineno">  906</span><span class="stringliteral">        n_ice_lines : int</span></div>
<div class="line"><span class="lineno">  907</span><span class="stringliteral">            The number of ICE lines to plot.</span></div>
<div class="line"><span class="lineno">  908</span><span class="stringliteral">        ax : Matplotlib axes</span></div>
<div class="line"><span class="lineno">  909</span><span class="stringliteral">            The axis on which to plot the ICE and PDP lines.</span></div>
<div class="line"><span class="lineno">  910</span><span class="stringliteral">        n_cols : int or None</span></div>
<div class="line"><span class="lineno">  911</span><span class="stringliteral">            The number of column in the axis.</span></div>
<div class="line"><span class="lineno">  912</span><span class="stringliteral">        pd_plot_idx : int</span></div>
<div class="line"><span class="lineno">  913</span><span class="stringliteral">            The sequential index of the plot. It will be unraveled to find the</span></div>
<div class="line"><span class="lineno">  914</span><span class="stringliteral">            matching 2D position in the grid layout.</span></div>
<div class="line"><span class="lineno">  915</span><span class="stringliteral">        n_lines : int</span></div>
<div class="line"><span class="lineno">  916</span><span class="stringliteral">            The total number of lines expected to be plot on the axis.</span></div>
<div class="line"><span class="lineno">  917</span><span class="stringliteral">        ice_lines_kw : dict</span></div>
<div class="line"><span class="lineno">  918</span><span class="stringliteral">            Dict with keywords passed when plotting the ICE lines.</span></div>
<div class="line"><span class="lineno">  919</span><span class="stringliteral">        pd_line_kw : dict</span></div>
<div class="line"><span class="lineno">  920</span><span class="stringliteral">            Dict with keywords passed when plotting the PD plot.</span></div>
<div class="line"><span class="lineno">  921</span><span class="stringliteral">        categorical : bool</span></div>
<div class="line"><span class="lineno">  922</span><span class="stringliteral">            Whether feature is categorical.</span></div>
<div class="line"><span class="lineno">  923</span><span class="stringliteral">        bar_kw: dict</span></div>
<div class="line"><span class="lineno">  924</span><span class="stringliteral">            Dict with keywords passed when plotting the PD bars (categorical).</span></div>
<div class="line"><span class="lineno">  925</span><span class="stringliteral">        pdp_lim : dict</span></div>
<div class="line"><span class="lineno">  926</span><span class="stringliteral">            Global min and max average predictions, such that all plots will</span></div>
<div class="line"><span class="lineno">  927</span><span class="stringliteral">            have the same scale and y limits. `pdp_lim[1]` is the global min</span></div>
<div class="line"><span class="lineno">  928</span><span class="stringliteral">            and max for single partial dependence curves.</span></div>
<div class="line"><span class="lineno">  929</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  930</span>        <span class="keyword">from</span> matplotlib <span class="keyword">import</span> transforms  <span class="comment"># noqa</span></div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span>        <span class="keywordflow">if</span> kind <span class="keywordflow">in</span> (<span class="stringliteral">&quot;individual&quot;</span>, <span class="stringliteral">&quot;both&quot;</span>):</div>
<div class="line"><span class="lineno">  933</span>            self._plot_ice_lines(</div>
<div class="line"><span class="lineno">  934</span>                preds[self.target_idx],</div>
<div class="line"><span class="lineno">  935</span>                feature_values,</div>
<div class="line"><span class="lineno">  936</span>                n_ice_lines,</div>
<div class="line"><span class="lineno">  937</span>                ax,</div>
<div class="line"><span class="lineno">  938</span>                pd_plot_idx,</div>
<div class="line"><span class="lineno">  939</span>                n_lines,</div>
<div class="line"><span class="lineno">  940</span>                ice_lines_kw,</div>
<div class="line"><span class="lineno">  941</span>            )</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>        <span class="keywordflow">if</span> kind <span class="keywordflow">in</span> (<span class="stringliteral">&quot;average&quot;</span>, <span class="stringliteral">&quot;both&quot;</span>):</div>
<div class="line"><span class="lineno">  944</span>            <span class="comment"># the average is stored as the last line</span></div>
<div class="line"><span class="lineno">  945</span>            <span class="keywordflow">if</span> kind == <span class="stringliteral">&quot;average&quot;</span>:</div>
<div class="line"><span class="lineno">  946</span>                pd_line_idx = pd_plot_idx</div>
<div class="line"><span class="lineno">  947</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  948</span>                pd_line_idx = pd_plot_idx * n_lines + n_ice_lines</div>
<div class="line"><span class="lineno">  949</span>            self._plot_average_dependence(</div>
<div class="line"><span class="lineno">  950</span>                avg_preds[self.target_idx].ravel(),</div>
<div class="line"><span class="lineno">  951</span>                feature_values,</div>
<div class="line"><span class="lineno">  952</span>                ax,</div>
<div class="line"><span class="lineno">  953</span>                pd_line_idx,</div>
<div class="line"><span class="lineno">  954</span>                pd_line_kw,</div>
<div class="line"><span class="lineno">  955</span>                categorical,</div>
<div class="line"><span class="lineno">  956</span>                bar_kw,</div>
<div class="line"><span class="lineno">  957</span>            )</div>
<div class="line"><span class="lineno">  958</span> </div>
<div class="line"><span class="lineno">  959</span>        trans = transforms.blended_transform_factory(ax.transData, ax.transAxes)</div>
<div class="line"><span class="lineno">  960</span>        <span class="comment"># create the decile line for the vertical axis</span></div>
<div class="line"><span class="lineno">  961</span>        vlines_idx = np.unravel_index(pd_plot_idx, self.deciles_vlines_.shape)</div>
<div class="line"><span class="lineno">  962</span>        <span class="keywordflow">if</span> self.deciles.get(feature_idx[0], <span class="keywordtype">None</span>) <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  963</span>            self.deciles_vlines_[vlines_idx] = ax.vlines(</div>
<div class="line"><span class="lineno">  964</span>                self.deciles[feature_idx[0]],</div>
<div class="line"><span class="lineno">  965</span>                0,</div>
<div class="line"><span class="lineno">  966</span>                0.05,</div>
<div class="line"><span class="lineno">  967</span>                transform=trans,</div>
<div class="line"><span class="lineno">  968</span>                color=<span class="stringliteral">&quot;k&quot;</span>,</div>
<div class="line"><span class="lineno">  969</span>            )</div>
<div class="line"><span class="lineno">  970</span>        <span class="comment"># reset ylim which was overwritten by vlines</span></div>
<div class="line"><span class="lineno">  971</span>        min_val = min(val[0] <span class="keywordflow">for</span> val <span class="keywordflow">in</span> pdp_lim.values())</div>
<div class="line"><span class="lineno">  972</span>        max_val = max(val[1] <span class="keywordflow">for</span> val <span class="keywordflow">in</span> pdp_lim.values())</div>
<div class="line"><span class="lineno">  973</span>        ax.set_ylim([min_val, max_val])</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>        <span class="comment"># Set xlabel if it is not already set</span></div>
<div class="line"><span class="lineno">  976</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> ax.get_xlabel():</div>
<div class="line"><span class="lineno">  977</span>            ax.set_xlabel(self.feature_names[feature_idx[0]])</div>
<div class="line"><span class="lineno">  978</span> </div>
<div class="line"><span class="lineno">  979</span>        <span class="keywordflow">if</span> n_cols <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> pd_plot_idx % n_cols == 0:</div>
<div class="line"><span class="lineno">  980</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> ax.get_ylabel():</div>
<div class="line"><span class="lineno">  981</span>                ax.set_ylabel(<span class="stringliteral">&quot;Partial dependence&quot;</span>)</div>
<div class="line"><span class="lineno">  982</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  983</span>            ax.set_yticklabels([])</div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span>        <span class="keywordflow">if</span> pd_line_kw.get(<span class="stringliteral">&quot;label&quot;</span>, <span class="keywordtype">None</span>) <span class="keywordflow">and</span> kind != <span class="stringliteral">&quot;individual&quot;</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> categorical:</div>
<div class="line"><span class="lineno">  986</span>            ax.legend()</div>
<div class="line"><span class="lineno">  987</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ace9214544f8ea9349bf67e5993bb4d37" name="ace9214544f8ea9349bf67e5993bb4d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace9214544f8ea9349bf67e5993bb4d37">&#9670;&#160;</a></span>_plot_two_way_partial_dependence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay._plot_two_way_partial_dependence </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>avg_preds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_plot_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Z_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>contour_kw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>categorical</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>heatmap_kw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Plot 2-way partial dependence.

Parameters
----------
avg_preds : ndarray of shape \
        (n_instances, n_grid_points, n_grid_points)
    The average predictions for all points of `feature_values[0]` and
    `feature_values[1]` for some given features for all samples in `X`.
feature_values : seq of 1d array
    A sequence of array of the feature values for which the predictions
    have been computed.
feature_idx : tuple of int
    The indices of the target features
ax : Matplotlib axes
    The axis on which to plot the ICE and PDP lines.
pd_plot_idx : int
    The sequential index of the plot. It will be unraveled to find the
    matching 2D position in the grid layout.
Z_level : ndarray of shape (8, 8)
    The Z-level used to encode the average predictions.
contour_kw : dict
    Dict with keywords passed when plotting the contours.
categorical : bool
    Whether features are categorical.
heatmap_kw: dict
    Dict with keywords passed when plotting the PD heatmap
    (categorical).
</pre> <div class="fragment"><div class="line"><span class="lineno">  999</span>    ):</div>
<div class="line"><span class="lineno"> 1000</span>        <span class="stringliteral">&quot;&quot;&quot;Plot 2-way partial dependence.</span></div>
<div class="line"><span class="lineno"> 1001</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1002</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno"> 1003</span><span class="stringliteral">        ----------</span></div>
<div class="line"><span class="lineno"> 1004</span><span class="stringliteral">        avg_preds : ndarray of shape \</span></div>
<div class="line"><span class="lineno"> 1005</span><span class="stringliteral">                (n_instances, n_grid_points, n_grid_points)</span></div>
<div class="line"><span class="lineno"> 1006</span><span class="stringliteral">            The average predictions for all points of `feature_values[0]` and</span></div>
<div class="line"><span class="lineno"> 1007</span><span class="stringliteral">            `feature_values[1]` for some given features for all samples in `X`.</span></div>
<div class="line"><span class="lineno"> 1008</span><span class="stringliteral">        feature_values : seq of 1d array</span></div>
<div class="line"><span class="lineno"> 1009</span><span class="stringliteral">            A sequence of array of the feature values for which the predictions</span></div>
<div class="line"><span class="lineno"> 1010</span><span class="stringliteral">            have been computed.</span></div>
<div class="line"><span class="lineno"> 1011</span><span class="stringliteral">        feature_idx : tuple of int</span></div>
<div class="line"><span class="lineno"> 1012</span><span class="stringliteral">            The indices of the target features</span></div>
<div class="line"><span class="lineno"> 1013</span><span class="stringliteral">        ax : Matplotlib axes</span></div>
<div class="line"><span class="lineno"> 1014</span><span class="stringliteral">            The axis on which to plot the ICE and PDP lines.</span></div>
<div class="line"><span class="lineno"> 1015</span><span class="stringliteral">        pd_plot_idx : int</span></div>
<div class="line"><span class="lineno"> 1016</span><span class="stringliteral">            The sequential index of the plot. It will be unraveled to find the</span></div>
<div class="line"><span class="lineno"> 1017</span><span class="stringliteral">            matching 2D position in the grid layout.</span></div>
<div class="line"><span class="lineno"> 1018</span><span class="stringliteral">        Z_level : ndarray of shape (8, 8)</span></div>
<div class="line"><span class="lineno"> 1019</span><span class="stringliteral">            The Z-level used to encode the average predictions.</span></div>
<div class="line"><span class="lineno"> 1020</span><span class="stringliteral">        contour_kw : dict</span></div>
<div class="line"><span class="lineno"> 1021</span><span class="stringliteral">            Dict with keywords passed when plotting the contours.</span></div>
<div class="line"><span class="lineno"> 1022</span><span class="stringliteral">        categorical : bool</span></div>
<div class="line"><span class="lineno"> 1023</span><span class="stringliteral">            Whether features are categorical.</span></div>
<div class="line"><span class="lineno"> 1024</span><span class="stringliteral">        heatmap_kw: dict</span></div>
<div class="line"><span class="lineno"> 1025</span><span class="stringliteral">            Dict with keywords passed when plotting the PD heatmap</span></div>
<div class="line"><span class="lineno"> 1026</span><span class="stringliteral">            (categorical).</span></div>
<div class="line"><span class="lineno"> 1027</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1028</span>        <span class="keywordflow">if</span> categorical:</div>
<div class="line"><span class="lineno"> 1029</span>            <span class="keyword">import</span> <a class="code hl_namespace" href="namespacematplotlib_1_1pyplot.html">matplotlib.pyplot</a> <span class="keyword">as</span> plt</div>
<div class="line"><span class="lineno"> 1030</span> </div>
<div class="line"><span class="lineno"> 1031</span>            default_im_kw = dict(interpolation=<span class="stringliteral">&quot;nearest&quot;</span>, cmap=<span class="stringliteral">&quot;viridis&quot;</span>)</div>
<div class="line"><span class="lineno"> 1032</span>            im_kw = {**default_im_kw, **heatmap_kw}</div>
<div class="line"><span class="lineno"> 1033</span> </div>
<div class="line"><span class="lineno"> 1034</span>            data = avg_preds[self.target_idx]</div>
<div class="line"><span class="lineno"> 1035</span>            im = ax.imshow(data, **im_kw)</div>
<div class="line"><span class="lineno"> 1036</span>            text = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1037</span>            cmap_min, cmap_max = im.cmap(0), im.cmap(1.0)</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>            text = np.empty_like(data, dtype=object)</div>
<div class="line"><span class="lineno"> 1040</span>            <span class="comment"># print text with appropriate color depending on background</span></div>
<div class="line"><span class="lineno"> 1041</span>            thresh = (data.max() + data.min()) / 2.0</div>
<div class="line"><span class="lineno"> 1042</span> </div>
<div class="line"><span class="lineno"> 1043</span>            <span class="keywordflow">for</span> flat_index <span class="keywordflow">in</span> range(data.size):</div>
<div class="line"><span class="lineno"> 1044</span>                row, col = np.unravel_index(flat_index, data.shape)</div>
<div class="line"><span class="lineno"> 1045</span>                color = cmap_max <span class="keywordflow">if</span> data[row, col] &lt; thresh <span class="keywordflow">else</span> cmap_min</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>                values_format = <span class="stringliteral">&quot;.2f&quot;</span></div>
<div class="line"><span class="lineno"> 1048</span>                text_data = format(data[row, col], values_format)</div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>                text_kwargs = dict(ha=<span class="stringliteral">&quot;center&quot;</span>, va=<span class="stringliteral">&quot;center&quot;</span>, color=color)</div>
<div class="line"><span class="lineno"> 1051</span>                text[row, col] = ax.text(col, row, text_data, **text_kwargs)</div>
<div class="line"><span class="lineno"> 1052</span> </div>
<div class="line"><span class="lineno"> 1053</span>            fig = ax.figure</div>
<div class="line"><span class="lineno"> 1054</span>            fig.colorbar(im, ax=ax)</div>
<div class="line"><span class="lineno"> 1055</span>            ax.set(</div>
<div class="line"><span class="lineno"> 1056</span>                xticks=np.arange(len(feature_values[1])),</div>
<div class="line"><span class="lineno"> 1057</span>                yticks=np.arange(len(feature_values[0])),</div>
<div class="line"><span class="lineno"> 1058</span>                xticklabels=feature_values[1],</div>
<div class="line"><span class="lineno"> 1059</span>                yticklabels=feature_values[0],</div>
<div class="line"><span class="lineno"> 1060</span>                xlabel=self.feature_names[feature_idx[1]],</div>
<div class="line"><span class="lineno"> 1061</span>                ylabel=self.feature_names[feature_idx[0]],</div>
<div class="line"><span class="lineno"> 1062</span>            )</div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>            plt.setp(ax.get_xticklabels(), rotation=<span class="stringliteral">&quot;vertical&quot;</span>)</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>            heatmap_idx = np.unravel_index(pd_plot_idx, self.heatmaps_.shape)</div>
<div class="line"><span class="lineno"> 1067</span>            self.heatmaps_[heatmap_idx] = im</div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1069</span>            <span class="keyword">from</span> matplotlib <span class="keyword">import</span> transforms  <span class="comment"># noqa</span></div>
<div class="line"><span class="lineno"> 1070</span> </div>
<div class="line"><span class="lineno"> 1071</span>            XX, YY = np.meshgrid(feature_values[0], feature_values[1])</div>
<div class="line"><span class="lineno"> 1072</span>            Z = avg_preds[self.target_idx].T</div>
<div class="line"><span class="lineno"> 1073</span>            CS = ax.contour(XX, YY, Z, levels=Z_level, linewidths=0.5, colors=<span class="stringliteral">&quot;k&quot;</span>)</div>
<div class="line"><span class="lineno"> 1074</span>            contour_idx = np.unravel_index(pd_plot_idx, self.contours_.shape)</div>
<div class="line"><span class="lineno"> 1075</span>            self.contours_[contour_idx] = ax.contourf(</div>
<div class="line"><span class="lineno"> 1076</span>                XX,</div>
<div class="line"><span class="lineno"> 1077</span>                YY,</div>
<div class="line"><span class="lineno"> 1078</span>                Z,</div>
<div class="line"><span class="lineno"> 1079</span>                levels=Z_level,</div>
<div class="line"><span class="lineno"> 1080</span>                vmax=Z_level[-1],</div>
<div class="line"><span class="lineno"> 1081</span>                vmin=Z_level[0],</div>
<div class="line"><span class="lineno"> 1082</span>                **contour_kw,</div>
<div class="line"><span class="lineno"> 1083</span>            )</div>
<div class="line"><span class="lineno"> 1084</span>            ax.clabel(CS, fmt=<span class="stringliteral">&quot;%2.2f&quot;</span>, colors=<span class="stringliteral">&quot;k&quot;</span>, fontsize=10, inline=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1085</span> </div>
<div class="line"><span class="lineno"> 1086</span>            trans = transforms.blended_transform_factory(ax.transData, ax.transAxes)</div>
<div class="line"><span class="lineno"> 1087</span>            <span class="comment"># create the decile line for the vertical axis</span></div>
<div class="line"><span class="lineno"> 1088</span>            xlim, ylim = ax.get_xlim(), ax.get_ylim()</div>
<div class="line"><span class="lineno"> 1089</span>            vlines_idx = np.unravel_index(pd_plot_idx, self.deciles_vlines_.shape)</div>
<div class="line"><span class="lineno"> 1090</span>            self.deciles_vlines_[vlines_idx] = ax.vlines(</div>
<div class="line"><span class="lineno"> 1091</span>                self.deciles[feature_idx[0]],</div>
<div class="line"><span class="lineno"> 1092</span>                0,</div>
<div class="line"><span class="lineno"> 1093</span>                0.05,</div>
<div class="line"><span class="lineno"> 1094</span>                transform=trans,</div>
<div class="line"><span class="lineno"> 1095</span>                color=<span class="stringliteral">&quot;k&quot;</span>,</div>
<div class="line"><span class="lineno"> 1096</span>            )</div>
<div class="line"><span class="lineno"> 1097</span>            <span class="comment"># create the decile line for the horizontal axis</span></div>
<div class="line"><span class="lineno"> 1098</span>            hlines_idx = np.unravel_index(pd_plot_idx, self.deciles_hlines_.shape)</div>
<div class="line"><span class="lineno"> 1099</span>            self.deciles_hlines_[hlines_idx] = ax.hlines(</div>
<div class="line"><span class="lineno"> 1100</span>                self.deciles[feature_idx[1]],</div>
<div class="line"><span class="lineno"> 1101</span>                0,</div>
<div class="line"><span class="lineno"> 1102</span>                0.05,</div>
<div class="line"><span class="lineno"> 1103</span>                transform=trans,</div>
<div class="line"><span class="lineno"> 1104</span>                color=<span class="stringliteral">&quot;k&quot;</span>,</div>
<div class="line"><span class="lineno"> 1105</span>            )</div>
<div class="line"><span class="lineno"> 1106</span>            <span class="comment"># reset xlim and ylim since they are overwritten by hlines and</span></div>
<div class="line"><span class="lineno"> 1107</span>            <span class="comment"># vlines</span></div>
<div class="line"><span class="lineno"> 1108</span>            ax.set_xlim(xlim)</div>
<div class="line"><span class="lineno"> 1109</span>            ax.set_ylim(ylim)</div>
<div class="line"><span class="lineno"> 1110</span> </div>
<div class="line"><span class="lineno"> 1111</span>            <span class="comment"># set xlabel if it is not already set</span></div>
<div class="line"><span class="lineno"> 1112</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> ax.get_xlabel():</div>
<div class="line"><span class="lineno"> 1113</span>                ax.set_xlabel(self.feature_names[feature_idx[0]])</div>
<div class="line"><span class="lineno"> 1114</span>            ax.set_ylabel(self.feature_names[feature_idx[1]])</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="ttc" id="anamespacematplotlib_1_1pyplot_html"><div class="ttname"><a href="namespacematplotlib_1_1pyplot.html">matplotlib.pyplot</a></div><div class="ttdef"><b>Definition</b> pyplot.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abd14fa80ec8a7d6fc39a5ac984574cae" name="abd14fa80ec8a7d6fc39a5ac984574cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd14fa80ec8a7d6fc39a5ac984574cae">&#9670;&#160;</a></span>from_estimator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.from_estimator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>estimator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>categorical_features</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>feature_names</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>response_method</em> = <code>&quot;auto&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_cols</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>grid_resolution</em> = <code>100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>percentiles</em> = <code>(0.05,&#160;0.95)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em> = <code>&quot;auto&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_jobs</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>line_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ice_lines_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_line_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>contour_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ax</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>kind</em> = <code>&quot;average&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>centered</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>subsample</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>random_state</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Partial dependence (PD) and individual conditional expectation (ICE) plots.

Partial dependence plots, individual conditional expectation plots or an
overlay of both of them can be plotted by setting the ``kind``
parameter. The ``len(features)`` plots are arranged in a grid with
``n_cols`` columns. Two-way partial dependence plots are plotted as
contour plots. The deciles of the feature values will be shown with tick
marks on the x-axes for one-way plots, and on both axes for two-way
plots.

Read more in the :ref:`User Guide &lt;partial_dependence&gt;`.

.. note::

    :func:`PartialDependenceDisplay.from_estimator` does not support using the
    same axes with multiple calls. To plot the partial dependence for
    multiple estimators, please pass the axes created by the first call to the
    second call::

       &gt;&gt;&gt; from sklearn.inspection import PartialDependenceDisplay
       &gt;&gt;&gt; from sklearn.datasets import make_friedman1
       &gt;&gt;&gt; from sklearn.linear_model import LinearRegression
       &gt;&gt;&gt; from sklearn.ensemble import RandomForestRegressor
       &gt;&gt;&gt; X, y = make_friedman1()
       &gt;&gt;&gt; est1 = LinearRegression().fit(X, y)
       &gt;&gt;&gt; est2 = RandomForestRegressor().fit(X, y)
       &gt;&gt;&gt; disp1 = PartialDependenceDisplay.from_estimator(est1, X,
       ...                                                 [1, 2])
       &gt;&gt;&gt; disp2 = PartialDependenceDisplay.from_estimator(est2, X, [1, 2],
       ...                                                 ax=disp1.axes_)

.. warning::

    For :class:`~sklearn.ensemble.GradientBoostingClassifier` and
    :class:`~sklearn.ensemble.GradientBoostingRegressor`, the
    `'recursion'` method (used by default) will not account for the `init`
    predictor of the boosting process. In practice, this will produce
    the same values as `'brute'` up to a constant offset in the target
    response, provided that `init` is a constant estimator (which is the
    default). However, if `init` is not a constant estimator, the
    partial dependence values are incorrect for `'recursion'` because the
    offset will be sample-dependent. It is preferable to use the `'brute'`
    method. Note that this only applies to
    :class:`~sklearn.ensemble.GradientBoostingClassifier` and
    :class:`~sklearn.ensemble.GradientBoostingRegressor`, not to
    :class:`~sklearn.ensemble.HistGradientBoostingClassifier` and
    :class:`~sklearn.ensemble.HistGradientBoostingRegressor`.

.. versionadded:: 1.0

Parameters
----------
estimator : BaseEstimator
    A fitted estimator object implementing :term:`predict`,
    :term:`predict_proba`, or :term:`decision_function`.
    Multioutput-multiclass classifiers are not supported.

X : {array-like, dataframe} of shape (n_samples, n_features)
    ``X`` is used to generate a grid of values for the target
    ``features`` (where the partial dependence will be evaluated), and
    also to generate values for the complement features when the
    `method` is `'brute'`.

features : list of {int, str, pair of int, pair of str}
    The target features for which to create the PDPs.
    If `features[i]` is an integer or a string, a one-way PDP is created;
    if `features[i]` is a tuple, a two-way PDP is created (only supported
    with `kind='average'`). Each tuple must be of size 2.
    If any entry is a string, then it must be in ``feature_names``.

categorical_features : array-like of shape (n_features,) or shape \
        (n_categorical_features,), dtype={bool, int, str}, default=None
    Indicates the categorical features.

    - `None`: no feature will be considered categorical;
    - boolean array-like: boolean mask of shape `(n_features,)`
      indicating which features are categorical. Thus, this array has
      the same shape has `X.shape[1]`;
    - integer or string array-like: integer indices or strings
      indicating categorical features.

    .. versionadded:: 1.2

feature_names : array-like of shape (n_features,), dtype=str, default=None
    Name of each feature; `feature_names[i]` holds the name of the feature
    with index `i`.
    By default, the name of the feature corresponds to their numerical
    index for NumPy array and their column name for pandas dataframe.

target : int, default=None
    - In a multiclass setting, specifies the class for which the PDPs
      should be computed. Note that for binary classification, the
      positive class (index 1) is always used.
    - In a multioutput setting, specifies the task for which the PDPs
      should be computed.

    Ignored in binary classification or classical regression settings.

response_method : {'auto', 'predict_proba', 'decision_function'}, \
        default='auto'
    Specifies whether to use :term:`predict_proba` or
    :term:`decision_function` as the target response. For regressors
    this parameter is ignored and the response is always the output of
    :term:`predict`. By default, :term:`predict_proba` is tried first
    and we revert to :term:`decision_function` if it doesn't exist. If
    ``method`` is `'recursion'`, the response is always the output of
    :term:`decision_function`.

n_cols : int, default=3
    The maximum number of columns in the grid plot. Only active when `ax`
    is a single axis or `None`.

grid_resolution : int, default=100
    The number of equally spaced points on the axes of the plots, for each
    target feature.

percentiles : tuple of float, default=(0.05, 0.95)
    The lower and upper percentile used to create the extreme values
    for the PDP axes. Must be in [0, 1].

method : str, default='auto'
    The method used to calculate the averaged predictions:

    - `'recursion'` is only supported for some tree-based estimators
      (namely
      :class:`~sklearn.ensemble.GradientBoostingClassifier`,
      :class:`~sklearn.ensemble.GradientBoostingRegressor`,
      :class:`~sklearn.ensemble.HistGradientBoostingClassifier`,
      :class:`~sklearn.ensemble.HistGradientBoostingRegressor`,
      :class:`~sklearn.tree.DecisionTreeRegressor`,
      :class:`~sklearn.ensemble.RandomForestRegressor`
      but is more efficient in terms of speed.
      With this method, the target response of a
      classifier is always the decision function, not the predicted
      probabilities. Since the `'recursion'` method implicitly computes
      the average of the ICEs by design, it is not compatible with ICE and
      thus `kind` must be `'average'`.

    - `'brute'` is supported for any estimator, but is more
      computationally intensive.

    - `'auto'`: the `'recursion'` is used for estimators that support it,
      and `'brute'` is used otherwise.

    Please see :ref:`this note &lt;pdp_method_differences&gt;` for
    differences between the `'brute'` and `'recursion'` method.

n_jobs : int, default=None
    The number of CPUs to use to compute the partial dependences.
    Computation is parallelized over features specified by the `features`
    parameter.

    ``None`` means 1 unless in a :obj:`joblib.parallel_backend` context.
    ``-1`` means using all processors. See :term:`Glossary &lt;n_jobs&gt;`
    for more details.

verbose : int, default=0
    Verbose output during PD computations.

line_kw : dict, default=None
    Dict with keywords passed to the ``matplotlib.pyplot.plot`` call.
    For one-way partial dependence plots. It can be used to define common
    properties for both `ice_lines_kw` and `pdp_line_kw`.

ice_lines_kw : dict, default=None
    Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.
    For ICE lines in the one-way partial dependence plots.
    The key value pairs defined in `ice_lines_kw` takes priority over
    `line_kw`.

pd_line_kw : dict, default=None
    Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.
    For partial dependence in one-way partial dependence plots.
    The key value pairs defined in `pd_line_kw` takes priority over
    `line_kw`.

contour_kw : dict, default=None
    Dict with keywords passed to the ``matplotlib.pyplot.contourf`` call.
    For two-way partial dependence plots.

ax : Matplotlib axes or array-like of Matplotlib axes, default=None
    - If a single axis is passed in, it is treated as a bounding axes
      and a grid of partial dependence plots will be drawn within
      these bounds. The `n_cols` parameter controls the number of
      columns in the grid.
    - If an array-like of axes are passed in, the partial dependence
      plots will be drawn directly into these axes.
    - If `None`, a figure and a bounding axes is created and treated
      as the single axes case.

kind : {'average', 'individual', 'both'}, default='average'
    Whether to plot the partial dependence averaged across all the samples
    in the dataset or one line per sample or both.

    - ``kind='average'`` results in the traditional PD plot;
    - ``kind='individual'`` results in the ICE plot.

   Note that the fast ``method='recursion'`` option is only available for
   ``kind='average'``. Plotting individual dependencies requires using the
   slower ``method='brute'`` option.

centered : bool, default=False
    If `True`, the ICE and PD lines will start at the origin of the
    y-axis. By default, no centering is done.

    .. versionadded:: 1.1

subsample : float, int or None, default=1000
    Sampling for ICE curves when `kind` is 'individual' or 'both'.
    If `float`, should be between 0.0 and 1.0 and represent the proportion
    of the dataset to be used to plot ICE curves. If `int`, represents the
    absolute number samples to use.

    Note that the full dataset is still used to calculate averaged partial
    dependence when `kind='both'`.

random_state : int, RandomState instance or None, default=None
    Controls the randomness of the selected samples when subsamples is not
    `None` and `kind` is either `'both'` or `'individual'`.
    See :term:`Glossary &lt;random_state&gt;` for details.

Returns
-------
display : :class:`~sklearn.inspection.PartialDependenceDisplay`

See Also
--------
partial_dependence : Compute Partial Dependence values.

Examples
--------
&gt;&gt;&gt; import matplotlib.pyplot as plt
&gt;&gt;&gt; from sklearn.datasets import make_friedman1
&gt;&gt;&gt; from sklearn.ensemble import GradientBoostingRegressor
&gt;&gt;&gt; from sklearn.inspection import PartialDependenceDisplay
&gt;&gt;&gt; X, y = make_friedman1()
&gt;&gt;&gt; clf = GradientBoostingRegressor(n_estimators=10).fit(X, y)
&gt;&gt;&gt; PartialDependenceDisplay.from_estimator(clf, X, [0, (0, 1)])
&lt;...&gt;
&gt;&gt;&gt; plt.show()
</pre> <div class="fragment"><div class="line"><span class="lineno">  283</span>    ):</div>
<div class="line"><span class="lineno">  284</span>        <span class="stringliteral">&quot;&quot;&quot;Partial dependence (PD) and individual conditional expectation (ICE) plots.</span></div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral">        Partial dependence plots, individual conditional expectation plots or an</span></div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral">        overlay of both of them can be plotted by setting the ``kind``</span></div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">        parameter. The ``len(features)`` plots are arranged in a grid with</span></div>
<div class="line"><span class="lineno">  289</span><span class="stringliteral">        ``n_cols`` columns. Two-way partial dependence plots are plotted as</span></div>
<div class="line"><span class="lineno">  290</span><span class="stringliteral">        contour plots. The deciles of the feature values will be shown with tick</span></div>
<div class="line"><span class="lineno">  291</span><span class="stringliteral">        marks on the x-axes for one-way plots, and on both axes for two-way</span></div>
<div class="line"><span class="lineno">  292</span><span class="stringliteral">        plots.</span></div>
<div class="line"><span class="lineno">  293</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  294</span><span class="stringliteral">        Read more in the :ref:`User Guide &lt;partial_dependence&gt;`.</span></div>
<div class="line"><span class="lineno">  295</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  296</span><span class="stringliteral">        .. note::</span></div>
<div class="line"><span class="lineno">  297</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  298</span><span class="stringliteral">            :func:`PartialDependenceDisplay.from_estimator` does not support using the</span></div>
<div class="line"><span class="lineno">  299</span><span class="stringliteral">            same axes with multiple calls. To plot the partial dependence for</span></div>
<div class="line"><span class="lineno">  300</span><span class="stringliteral">            multiple estimators, please pass the axes created by the first call to the</span></div>
<div class="line"><span class="lineno">  301</span><span class="stringliteral">            second call::</span></div>
<div class="line"><span class="lineno">  302</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  303</span><span class="stringliteral">               &gt;&gt;&gt; from sklearn.inspection import PartialDependenceDisplay</span></div>
<div class="line"><span class="lineno">  304</span><span class="stringliteral">               &gt;&gt;&gt; from sklearn.datasets import make_friedman1</span></div>
<div class="line"><span class="lineno">  305</span><span class="stringliteral">               &gt;&gt;&gt; from sklearn.linear_model import LinearRegression</span></div>
<div class="line"><span class="lineno">  306</span><span class="stringliteral">               &gt;&gt;&gt; from sklearn.ensemble import RandomForestRegressor</span></div>
<div class="line"><span class="lineno">  307</span><span class="stringliteral">               &gt;&gt;&gt; X, y = make_friedman1()</span></div>
<div class="line"><span class="lineno">  308</span><span class="stringliteral">               &gt;&gt;&gt; est1 = LinearRegression().fit(X, y)</span></div>
<div class="line"><span class="lineno">  309</span><span class="stringliteral">               &gt;&gt;&gt; est2 = RandomForestRegressor().fit(X, y)</span></div>
<div class="line"><span class="lineno">  310</span><span class="stringliteral">               &gt;&gt;&gt; disp1 = PartialDependenceDisplay.from_estimator(est1, X,</span></div>
<div class="line"><span class="lineno">  311</span><span class="stringliteral">               ...                                                 [1, 2])</span></div>
<div class="line"><span class="lineno">  312</span><span class="stringliteral">               &gt;&gt;&gt; disp2 = PartialDependenceDisplay.from_estimator(est2, X, [1, 2],</span></div>
<div class="line"><span class="lineno">  313</span><span class="stringliteral">               ...                                                 ax=disp1.axes_)</span></div>
<div class="line"><span class="lineno">  314</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral">        .. warning::</span></div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">            For :class:`~sklearn.ensemble.GradientBoostingClassifier` and</span></div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">            :class:`~sklearn.ensemble.GradientBoostingRegressor`, the</span></div>
<div class="line"><span class="lineno">  319</span><span class="stringliteral">            `&#39;recursion&#39;` method (used by default) will not account for the `init`</span></div>
<div class="line"><span class="lineno">  320</span><span class="stringliteral">            predictor of the boosting process. In practice, this will produce</span></div>
<div class="line"><span class="lineno">  321</span><span class="stringliteral">            the same values as `&#39;brute&#39;` up to a constant offset in the target</span></div>
<div class="line"><span class="lineno">  322</span><span class="stringliteral">            response, provided that `init` is a constant estimator (which is the</span></div>
<div class="line"><span class="lineno">  323</span><span class="stringliteral">            default). However, if `init` is not a constant estimator, the</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral">            partial dependence values are incorrect for `&#39;recursion&#39;` because the</span></div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">            offset will be sample-dependent. It is preferable to use the `&#39;brute&#39;`</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral">            method. Note that this only applies to</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">            :class:`~sklearn.ensemble.GradientBoostingClassifier` and</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">            :class:`~sklearn.ensemble.GradientBoostingRegressor`, not to</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">            :class:`~sklearn.ensemble.HistGradientBoostingClassifier` and</span></div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral">            :class:`~sklearn.ensemble.HistGradientBoostingRegressor`.</span></div>
<div class="line"><span class="lineno">  331</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  332</span><span class="stringliteral">        .. versionadded:: 1.0</span></div>
<div class="line"><span class="lineno">  333</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  334</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno">  335</span><span class="stringliteral">        ----------</span></div>
<div class="line"><span class="lineno">  336</span><span class="stringliteral">        estimator : BaseEstimator</span></div>
<div class="line"><span class="lineno">  337</span><span class="stringliteral">            A fitted estimator object implementing :term:`predict`,</span></div>
<div class="line"><span class="lineno">  338</span><span class="stringliteral">            :term:`predict_proba`, or :term:`decision_function`.</span></div>
<div class="line"><span class="lineno">  339</span><span class="stringliteral">            Multioutput-multiclass classifiers are not supported.</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  341</span><span class="stringliteral">        X : {array-like, dataframe} of shape (n_samples, n_features)</span></div>
<div class="line"><span class="lineno">  342</span><span class="stringliteral">            ``X`` is used to generate a grid of values for the target</span></div>
<div class="line"><span class="lineno">  343</span><span class="stringliteral">            ``features`` (where the partial dependence will be evaluated), and</span></div>
<div class="line"><span class="lineno">  344</span><span class="stringliteral">            also to generate values for the complement features when the</span></div>
<div class="line"><span class="lineno">  345</span><span class="stringliteral">            `method` is `&#39;brute&#39;`.</span></div>
<div class="line"><span class="lineno">  346</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  347</span><span class="stringliteral">        features : list of {int, str, pair of int, pair of str}</span></div>
<div class="line"><span class="lineno">  348</span><span class="stringliteral">            The target features for which to create the PDPs.</span></div>
<div class="line"><span class="lineno">  349</span><span class="stringliteral">            If `features[i]` is an integer or a string, a one-way PDP is created;</span></div>
<div class="line"><span class="lineno">  350</span><span class="stringliteral">            if `features[i]` is a tuple, a two-way PDP is created (only supported</span></div>
<div class="line"><span class="lineno">  351</span><span class="stringliteral">            with `kind=&#39;average&#39;`). Each tuple must be of size 2.</span></div>
<div class="line"><span class="lineno">  352</span><span class="stringliteral">            If any entry is a string, then it must be in ``feature_names``.</span></div>
<div class="line"><span class="lineno">  353</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  354</span><span class="stringliteral">        categorical_features : array-like of shape (n_features,) or shape \</span></div>
<div class="line"><span class="lineno">  355</span><span class="stringliteral">                (n_categorical_features,), dtype={bool, int, str}, default=None</span></div>
<div class="line"><span class="lineno">  356</span><span class="stringliteral">            Indicates the categorical features.</span></div>
<div class="line"><span class="lineno">  357</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  358</span><span class="stringliteral">            - `None`: no feature will be considered categorical;</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">            - boolean array-like: boolean mask of shape `(n_features,)`</span></div>
<div class="line"><span class="lineno">  360</span><span class="stringliteral">              indicating which features are categorical. Thus, this array has</span></div>
<div class="line"><span class="lineno">  361</span><span class="stringliteral">              the same shape has `X.shape[1]`;</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">            - integer or string array-like: integer indices or strings</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">              indicating categorical features.</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral">            .. versionadded:: 1.2</span></div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">        feature_names : array-like of shape (n_features,), dtype=str, default=None</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">            Name of each feature; `feature_names[i]` holds the name of the feature</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">            with index `i`.</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">            By default, the name of the feature corresponds to their numerical</span></div>
<div class="line"><span class="lineno">  371</span><span class="stringliteral">            index for NumPy array and their column name for pandas dataframe.</span></div>
<div class="line"><span class="lineno">  372</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  373</span><span class="stringliteral">        target : int, default=None</span></div>
<div class="line"><span class="lineno">  374</span><span class="stringliteral">            - In a multiclass setting, specifies the class for which the PDPs</span></div>
<div class="line"><span class="lineno">  375</span><span class="stringliteral">              should be computed. Note that for binary classification, the</span></div>
<div class="line"><span class="lineno">  376</span><span class="stringliteral">              positive class (index 1) is always used.</span></div>
<div class="line"><span class="lineno">  377</span><span class="stringliteral">            - In a multioutput setting, specifies the task for which the PDPs</span></div>
<div class="line"><span class="lineno">  378</span><span class="stringliteral">              should be computed.</span></div>
<div class="line"><span class="lineno">  379</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  380</span><span class="stringliteral">            Ignored in binary classification or classical regression settings.</span></div>
<div class="line"><span class="lineno">  381</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  382</span><span class="stringliteral">        response_method : {&#39;auto&#39;, &#39;predict_proba&#39;, &#39;decision_function&#39;}, \</span></div>
<div class="line"><span class="lineno">  383</span><span class="stringliteral">                default=&#39;auto&#39;</span></div>
<div class="line"><span class="lineno">  384</span><span class="stringliteral">            Specifies whether to use :term:`predict_proba` or</span></div>
<div class="line"><span class="lineno">  385</span><span class="stringliteral">            :term:`decision_function` as the target response. For regressors</span></div>
<div class="line"><span class="lineno">  386</span><span class="stringliteral">            this parameter is ignored and the response is always the output of</span></div>
<div class="line"><span class="lineno">  387</span><span class="stringliteral">            :term:`predict`. By default, :term:`predict_proba` is tried first</span></div>
<div class="line"><span class="lineno">  388</span><span class="stringliteral">            and we revert to :term:`decision_function` if it doesn&#39;t exist. If</span></div>
<div class="line"><span class="lineno">  389</span><span class="stringliteral">            ``method`` is `&#39;recursion&#39;`, the response is always the output of</span></div>
<div class="line"><span class="lineno">  390</span><span class="stringliteral">            :term:`decision_function`.</span></div>
<div class="line"><span class="lineno">  391</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  392</span><span class="stringliteral">        n_cols : int, default=3</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">            The maximum number of columns in the grid plot. Only active when `ax`</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral">            is a single axis or `None`.</span></div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">        grid_resolution : int, default=100</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">            The number of equally spaced points on the axes of the plots, for each</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral">            target feature.</span></div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  400</span><span class="stringliteral">        percentiles : tuple of float, default=(0.05, 0.95)</span></div>
<div class="line"><span class="lineno">  401</span><span class="stringliteral">            The lower and upper percentile used to create the extreme values</span></div>
<div class="line"><span class="lineno">  402</span><span class="stringliteral">            for the PDP axes. Must be in [0, 1].</span></div>
<div class="line"><span class="lineno">  403</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  404</span><span class="stringliteral">        method : str, default=&#39;auto&#39;</span></div>
<div class="line"><span class="lineno">  405</span><span class="stringliteral">            The method used to calculate the averaged predictions:</span></div>
<div class="line"><span class="lineno">  406</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  407</span><span class="stringliteral">            - `&#39;recursion&#39;` is only supported for some tree-based estimators</span></div>
<div class="line"><span class="lineno">  408</span><span class="stringliteral">              (namely</span></div>
<div class="line"><span class="lineno">  409</span><span class="stringliteral">              :class:`~sklearn.ensemble.GradientBoostingClassifier`,</span></div>
<div class="line"><span class="lineno">  410</span><span class="stringliteral">              :class:`~sklearn.ensemble.GradientBoostingRegressor`,</span></div>
<div class="line"><span class="lineno">  411</span><span class="stringliteral">              :class:`~sklearn.ensemble.HistGradientBoostingClassifier`,</span></div>
<div class="line"><span class="lineno">  412</span><span class="stringliteral">              :class:`~sklearn.ensemble.HistGradientBoostingRegressor`,</span></div>
<div class="line"><span class="lineno">  413</span><span class="stringliteral">              :class:`~sklearn.tree.DecisionTreeRegressor`,</span></div>
<div class="line"><span class="lineno">  414</span><span class="stringliteral">              :class:`~sklearn.ensemble.RandomForestRegressor`</span></div>
<div class="line"><span class="lineno">  415</span><span class="stringliteral">              but is more efficient in terms of speed.</span></div>
<div class="line"><span class="lineno">  416</span><span class="stringliteral">              With this method, the target response of a</span></div>
<div class="line"><span class="lineno">  417</span><span class="stringliteral">              classifier is always the decision function, not the predicted</span></div>
<div class="line"><span class="lineno">  418</span><span class="stringliteral">              probabilities. Since the `&#39;recursion&#39;` method implicitly computes</span></div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">              the average of the ICEs by design, it is not compatible with ICE and</span></div>
<div class="line"><span class="lineno">  420</span><span class="stringliteral">              thus `kind` must be `&#39;average&#39;`.</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral">            - `&#39;brute&#39;` is supported for any estimator, but is more</span></div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral">              computationally intensive.</span></div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral">            - `&#39;auto&#39;`: the `&#39;recursion&#39;` is used for estimators that support it,</span></div>
<div class="line"><span class="lineno">  426</span><span class="stringliteral">              and `&#39;brute&#39;` is used otherwise.</span></div>
<div class="line"><span class="lineno">  427</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  428</span><span class="stringliteral">            Please see :ref:`this note &lt;pdp_method_differences&gt;` for</span></div>
<div class="line"><span class="lineno">  429</span><span class="stringliteral">            differences between the `&#39;brute&#39;` and `&#39;recursion&#39;` method.</span></div>
<div class="line"><span class="lineno">  430</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  431</span><span class="stringliteral">        n_jobs : int, default=None</span></div>
<div class="line"><span class="lineno">  432</span><span class="stringliteral">            The number of CPUs to use to compute the partial dependences.</span></div>
<div class="line"><span class="lineno">  433</span><span class="stringliteral">            Computation is parallelized over features specified by the `features`</span></div>
<div class="line"><span class="lineno">  434</span><span class="stringliteral">            parameter.</span></div>
<div class="line"><span class="lineno">  435</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  436</span><span class="stringliteral">            ``None`` means 1 unless in a :obj:`joblib.parallel_backend` context.</span></div>
<div class="line"><span class="lineno">  437</span><span class="stringliteral">            ``-1`` means using all processors. See :term:`Glossary &lt;n_jobs&gt;`</span></div>
<div class="line"><span class="lineno">  438</span><span class="stringliteral">            for more details.</span></div>
<div class="line"><span class="lineno">  439</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  440</span><span class="stringliteral">        verbose : int, default=0</span></div>
<div class="line"><span class="lineno">  441</span><span class="stringliteral">            Verbose output during PD computations.</span></div>
<div class="line"><span class="lineno">  442</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  443</span><span class="stringliteral">        line_kw : dict, default=None</span></div>
<div class="line"><span class="lineno">  444</span><span class="stringliteral">            Dict with keywords passed to the ``matplotlib.pyplot.plot`` call.</span></div>
<div class="line"><span class="lineno">  445</span><span class="stringliteral">            For one-way partial dependence plots. It can be used to define common</span></div>
<div class="line"><span class="lineno">  446</span><span class="stringliteral">            properties for both `ice_lines_kw` and `pdp_line_kw`.</span></div>
<div class="line"><span class="lineno">  447</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  448</span><span class="stringliteral">        ice_lines_kw : dict, default=None</span></div>
<div class="line"><span class="lineno">  449</span><span class="stringliteral">            Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.</span></div>
<div class="line"><span class="lineno">  450</span><span class="stringliteral">            For ICE lines in the one-way partial dependence plots.</span></div>
<div class="line"><span class="lineno">  451</span><span class="stringliteral">            The key value pairs defined in `ice_lines_kw` takes priority over</span></div>
<div class="line"><span class="lineno">  452</span><span class="stringliteral">            `line_kw`.</span></div>
<div class="line"><span class="lineno">  453</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  454</span><span class="stringliteral">        pd_line_kw : dict, default=None</span></div>
<div class="line"><span class="lineno">  455</span><span class="stringliteral">            Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.</span></div>
<div class="line"><span class="lineno">  456</span><span class="stringliteral">            For partial dependence in one-way partial dependence plots.</span></div>
<div class="line"><span class="lineno">  457</span><span class="stringliteral">            The key value pairs defined in `pd_line_kw` takes priority over</span></div>
<div class="line"><span class="lineno">  458</span><span class="stringliteral">            `line_kw`.</span></div>
<div class="line"><span class="lineno">  459</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  460</span><span class="stringliteral">        contour_kw : dict, default=None</span></div>
<div class="line"><span class="lineno">  461</span><span class="stringliteral">            Dict with keywords passed to the ``matplotlib.pyplot.contourf`` call.</span></div>
<div class="line"><span class="lineno">  462</span><span class="stringliteral">            For two-way partial dependence plots.</span></div>
<div class="line"><span class="lineno">  463</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  464</span><span class="stringliteral">        ax : Matplotlib axes or array-like of Matplotlib axes, default=None</span></div>
<div class="line"><span class="lineno">  465</span><span class="stringliteral">            - If a single axis is passed in, it is treated as a bounding axes</span></div>
<div class="line"><span class="lineno">  466</span><span class="stringliteral">              and a grid of partial dependence plots will be drawn within</span></div>
<div class="line"><span class="lineno">  467</span><span class="stringliteral">              these bounds. The `n_cols` parameter controls the number of</span></div>
<div class="line"><span class="lineno">  468</span><span class="stringliteral">              columns in the grid.</span></div>
<div class="line"><span class="lineno">  469</span><span class="stringliteral">            - If an array-like of axes are passed in, the partial dependence</span></div>
<div class="line"><span class="lineno">  470</span><span class="stringliteral">              plots will be drawn directly into these axes.</span></div>
<div class="line"><span class="lineno">  471</span><span class="stringliteral">            - If `None`, a figure and a bounding axes is created and treated</span></div>
<div class="line"><span class="lineno">  472</span><span class="stringliteral">              as the single axes case.</span></div>
<div class="line"><span class="lineno">  473</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  474</span><span class="stringliteral">        kind : {&#39;average&#39;, &#39;individual&#39;, &#39;both&#39;}, default=&#39;average&#39;</span></div>
<div class="line"><span class="lineno">  475</span><span class="stringliteral">            Whether to plot the partial dependence averaged across all the samples</span></div>
<div class="line"><span class="lineno">  476</span><span class="stringliteral">            in the dataset or one line per sample or both.</span></div>
<div class="line"><span class="lineno">  477</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  478</span><span class="stringliteral">            - ``kind=&#39;average&#39;`` results in the traditional PD plot;</span></div>
<div class="line"><span class="lineno">  479</span><span class="stringliteral">            - ``kind=&#39;individual&#39;`` results in the ICE plot.</span></div>
<div class="line"><span class="lineno">  480</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  481</span><span class="stringliteral">           Note that the fast ``method=&#39;recursion&#39;`` option is only available for</span></div>
<div class="line"><span class="lineno">  482</span><span class="stringliteral">           ``kind=&#39;average&#39;``. Plotting individual dependencies requires using the</span></div>
<div class="line"><span class="lineno">  483</span><span class="stringliteral">           slower ``method=&#39;brute&#39;`` option.</span></div>
<div class="line"><span class="lineno">  484</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  485</span><span class="stringliteral">        centered : bool, default=False</span></div>
<div class="line"><span class="lineno">  486</span><span class="stringliteral">            If `True`, the ICE and PD lines will start at the origin of the</span></div>
<div class="line"><span class="lineno">  487</span><span class="stringliteral">            y-axis. By default, no centering is done.</span></div>
<div class="line"><span class="lineno">  488</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  489</span><span class="stringliteral">            .. versionadded:: 1.1</span></div>
<div class="line"><span class="lineno">  490</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  491</span><span class="stringliteral">        subsample : float, int or None, default=1000</span></div>
<div class="line"><span class="lineno">  492</span><span class="stringliteral">            Sampling for ICE curves when `kind` is &#39;individual&#39; or &#39;both&#39;.</span></div>
<div class="line"><span class="lineno">  493</span><span class="stringliteral">            If `float`, should be between 0.0 and 1.0 and represent the proportion</span></div>
<div class="line"><span class="lineno">  494</span><span class="stringliteral">            of the dataset to be used to plot ICE curves. If `int`, represents the</span></div>
<div class="line"><span class="lineno">  495</span><span class="stringliteral">            absolute number samples to use.</span></div>
<div class="line"><span class="lineno">  496</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  497</span><span class="stringliteral">            Note that the full dataset is still used to calculate averaged partial</span></div>
<div class="line"><span class="lineno">  498</span><span class="stringliteral">            dependence when `kind=&#39;both&#39;`.</span></div>
<div class="line"><span class="lineno">  499</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  500</span><span class="stringliteral">        random_state : int, RandomState instance or None, default=None</span></div>
<div class="line"><span class="lineno">  501</span><span class="stringliteral">            Controls the randomness of the selected samples when subsamples is not</span></div>
<div class="line"><span class="lineno">  502</span><span class="stringliteral">            `None` and `kind` is either `&#39;both&#39;` or `&#39;individual&#39;`.</span></div>
<div class="line"><span class="lineno">  503</span><span class="stringliteral">            See :term:`Glossary &lt;random_state&gt;` for details.</span></div>
<div class="line"><span class="lineno">  504</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  505</span><span class="stringliteral">        Returns</span></div>
<div class="line"><span class="lineno">  506</span><span class="stringliteral">        -------</span></div>
<div class="line"><span class="lineno">  507</span><span class="stringliteral">        display : :class:`~sklearn.inspection.PartialDependenceDisplay`</span></div>
<div class="line"><span class="lineno">  508</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  509</span><span class="stringliteral">        See Also</span></div>
<div class="line"><span class="lineno">  510</span><span class="stringliteral">        --------</span></div>
<div class="line"><span class="lineno">  511</span><span class="stringliteral">        partial_dependence : Compute Partial Dependence values.</span></div>
<div class="line"><span class="lineno">  512</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  513</span><span class="stringliteral">        Examples</span></div>
<div class="line"><span class="lineno">  514</span><span class="stringliteral">        --------</span></div>
<div class="line"><span class="lineno">  515</span><span class="stringliteral">        &gt;&gt;&gt; import matplotlib.pyplot as plt</span></div>
<div class="line"><span class="lineno">  516</span><span class="stringliteral">        &gt;&gt;&gt; from sklearn.datasets import make_friedman1</span></div>
<div class="line"><span class="lineno">  517</span><span class="stringliteral">        &gt;&gt;&gt; from sklearn.ensemble import GradientBoostingRegressor</span></div>
<div class="line"><span class="lineno">  518</span><span class="stringliteral">        &gt;&gt;&gt; from sklearn.inspection import PartialDependenceDisplay</span></div>
<div class="line"><span class="lineno">  519</span><span class="stringliteral">        &gt;&gt;&gt; X, y = make_friedman1()</span></div>
<div class="line"><span class="lineno">  520</span><span class="stringliteral">        &gt;&gt;&gt; clf = GradientBoostingRegressor(n_estimators=10).fit(X, y)</span></div>
<div class="line"><span class="lineno">  521</span><span class="stringliteral">        &gt;&gt;&gt; PartialDependenceDisplay.from_estimator(clf, X, [0, (0, 1)])</span></div>
<div class="line"><span class="lineno">  522</span><span class="stringliteral">        &lt;...&gt;</span></div>
<div class="line"><span class="lineno">  523</span><span class="stringliteral">        &gt;&gt;&gt; plt.show()</span></div>
<div class="line"><span class="lineno">  524</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  525</span>        check_matplotlib_support(f<span class="stringliteral">&quot;{cls.__name__}.from_estimator&quot;</span>)  <span class="comment"># noqa</span></div>
<div class="line"><span class="lineno">  526</span>        <span class="keyword">import</span> <a class="code hl_namespace" href="namespacematplotlib_1_1pyplot.html">matplotlib.pyplot</a> <span class="keyword">as</span> plt  <span class="comment"># noqa</span></div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>        <span class="comment"># set target_idx for multi-class estimators</span></div>
<div class="line"><span class="lineno">  529</span>        <span class="keywordflow">if</span> hasattr(estimator, <span class="stringliteral">&quot;classes_&quot;</span>) <span class="keywordflow">and</span> np.size(estimator.classes_) &gt; 2:</div>
<div class="line"><span class="lineno">  530</span>            <span class="keywordflow">if</span> target <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  531</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;target must be specified for multi-class&quot;</span>)</div>
<div class="line"><span class="lineno">  532</span>            target_idx = np.searchsorted(estimator.classes_, target)</div>
<div class="line"><span class="lineno">  533</span>            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  534</span>                <span class="keywordflow">not</span> (0 &lt;= target_idx &lt; len(estimator.classes_))</div>
<div class="line"><span class="lineno">  535</span>                <span class="keywordflow">or</span> estimator.classes_[target_idx] != target</div>
<div class="line"><span class="lineno">  536</span>            ):</div>
<div class="line"><span class="lineno">  537</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;target not in est.classes_, got {}&quot;</span>.format(target))</div>
<div class="line"><span class="lineno">  538</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  539</span>            <span class="comment"># regression and binary classification</span></div>
<div class="line"><span class="lineno">  540</span>            target_idx = 0</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>        <span class="comment"># Use check_array only on lists and other non-array-likes / sparse. Do not</span></div>
<div class="line"><span class="lineno">  543</span>        <span class="comment"># convert DataFrame into a NumPy array.</span></div>
<div class="line"><span class="lineno">  544</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> (hasattr(X, <span class="stringliteral">&quot;__array__&quot;</span>) <span class="keywordflow">or</span> sparse.issparse(X)):</div>
<div class="line"><span class="lineno">  545</span>            X = check_array(X, force_all_finite=<span class="stringliteral">&quot;allow-nan&quot;</span>, dtype=object)</div>
<div class="line"><span class="lineno">  546</span>        n_features = X.shape[1]</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>        feature_names = _check_feature_names(X, feature_names)</div>
<div class="line"><span class="lineno">  549</span>        <span class="comment"># expand kind to always be a list of str</span></div>
<div class="line"><span class="lineno">  550</span>        kind_ = [kind] * len(features) <span class="keywordflow">if</span> isinstance(kind, str) <span class="keywordflow">else</span> kind</div>
<div class="line"><span class="lineno">  551</span>        <span class="keywordflow">if</span> len(kind_) != len(features):</div>
<div class="line"><span class="lineno">  552</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  553</span>                <span class="stringliteral">&quot;When `kind` is provided as a list of strings, it should contain &quot;</span></div>
<div class="line"><span class="lineno">  554</span>                f<span class="stringliteral">&quot;as many elements as `features`. `kind` contains {len(kind_)} &quot;</span></div>
<div class="line"><span class="lineno">  555</span>                f<span class="stringliteral">&quot;element(s) and `features` contains {len(features)} element(s).&quot;</span></div>
<div class="line"><span class="lineno">  556</span>            )</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>        <span class="comment"># convert features into a seq of int tuples</span></div>
<div class="line"><span class="lineno">  559</span>        tmp_features, ice_for_two_way_pd = [], []</div>
<div class="line"><span class="lineno">  560</span>        <span class="keywordflow">for</span> kind_plot, fxs <span class="keywordflow">in</span> zip(kind_, features):</div>
<div class="line"><span class="lineno">  561</span>            <span class="keywordflow">if</span> isinstance(fxs, (numbers.Integral, str)):</div>
<div class="line"><span class="lineno">  562</span>                fxs = (fxs,)</div>
<div class="line"><span class="lineno">  563</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  564</span>                fxs = tuple(</div>
<div class="line"><span class="lineno">  565</span>                    _get_feature_index(fx, feature_names=feature_names) <span class="keywordflow">for</span> fx <span class="keywordflow">in</span> fxs</div>
<div class="line"><span class="lineno">  566</span>                )</div>
<div class="line"><span class="lineno">  567</span>            <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  568</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  569</span>                    <span class="stringliteral">&quot;Each entry in features must be either an int, &quot;</span></div>
<div class="line"><span class="lineno">  570</span>                    <span class="stringliteral">&quot;a string, or an iterable of size at most 2.&quot;</span></div>
<div class="line"><span class="lineno">  571</span>                ) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  572</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> 1 &lt;= np.size(fxs) &lt;= 2:</div>
<div class="line"><span class="lineno">  573</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  574</span>                    <span class="stringliteral">&quot;Each entry in features must be either an int, &quot;</span></div>
<div class="line"><span class="lineno">  575</span>                    <span class="stringliteral">&quot;a string, or an iterable of size at most 2.&quot;</span></div>
<div class="line"><span class="lineno">  576</span>                )</div>
<div class="line"><span class="lineno">  577</span>            <span class="comment"># store the information if 2-way PD was requested with ICE to later</span></div>
<div class="line"><span class="lineno">  578</span>            <span class="comment"># raise a ValueError with an exhaustive list of problematic</span></div>
<div class="line"><span class="lineno">  579</span>            <span class="comment"># settings.</span></div>
<div class="line"><span class="lineno">  580</span>            ice_for_two_way_pd.append(kind_plot != <span class="stringliteral">&quot;average&quot;</span> <span class="keywordflow">and</span> np.size(fxs) &gt; 1)</div>
<div class="line"><span class="lineno">  581</span> </div>
<div class="line"><span class="lineno">  582</span>            tmp_features.append(fxs)</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>        <span class="keywordflow">if</span> any(ice_for_two_way_pd):</div>
<div class="line"><span class="lineno">  585</span>            <span class="comment"># raise an error and be specific regarding the parameter values</span></div>
<div class="line"><span class="lineno">  586</span>            <span class="comment"># when 1- and 2-way PD were requested</span></div>
<div class="line"><span class="lineno">  587</span>            kind_ = [</div>
<div class="line"><span class="lineno">  588</span>                <span class="stringliteral">&quot;average&quot;</span> <span class="keywordflow">if</span> forcing_average <span class="keywordflow">else</span> kind_plot</div>
<div class="line"><span class="lineno">  589</span>                <span class="keywordflow">for</span> forcing_average, kind_plot <span class="keywordflow">in</span> zip(ice_for_two_way_pd, kind_)</div>
<div class="line"><span class="lineno">  590</span>            ]</div>
<div class="line"><span class="lineno">  591</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  592</span>                <span class="stringliteral">&quot;ICE plot cannot be rendered for 2-way feature interactions. &quot;</span></div>
<div class="line"><span class="lineno">  593</span>                <span class="stringliteral">&quot;2-way feature interactions mandates PD plots using the &quot;</span></div>
<div class="line"><span class="lineno">  594</span>                <span class="stringliteral">&quot;&#39;average&#39; kind: &quot;</span></div>
<div class="line"><span class="lineno">  595</span>                f<span class="stringliteral">&quot;features={features!r} should be configured to use &quot;</span></div>
<div class="line"><span class="lineno">  596</span>                f<span class="stringliteral">&quot;kind={kind_!r} explicitly.&quot;</span></div>
<div class="line"><span class="lineno">  597</span>            )</div>
<div class="line"><span class="lineno">  598</span>        features = tmp_features</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>        <span class="keywordflow">if</span> categorical_features <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  601</span>            is_categorical = [</div>
<div class="line"><span class="lineno">  602</span>                (<span class="keyword">False</span>,) <span class="keywordflow">if</span> len(fxs) == 1 <span class="keywordflow">else</span> (<span class="keyword">False</span>, <span class="keyword">False</span>) <span class="keywordflow">for</span> fxs <span class="keywordflow">in</span> features</div>
<div class="line"><span class="lineno">  603</span>            ]</div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  605</span>            <span class="comment"># we need to create a boolean indicator of which features are</span></div>
<div class="line"><span class="lineno">  606</span>            <span class="comment"># categorical from the categorical_features list.</span></div>
<div class="line"><span class="lineno">  607</span>            categorical_features = np.array(categorical_features, copy=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  608</span>            <span class="keywordflow">if</span> categorical_features.dtype.kind == <span class="stringliteral">&quot;b&quot;</span>:</div>
<div class="line"><span class="lineno">  609</span>                <span class="comment"># categorical features provided as a list of boolean</span></div>
<div class="line"><span class="lineno">  610</span>                <span class="keywordflow">if</span> categorical_features.size != n_features:</div>
<div class="line"><span class="lineno">  611</span>                    <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  612</span>                        <span class="stringliteral">&quot;When `categorical_features` is a boolean array-like, &quot;</span></div>
<div class="line"><span class="lineno">  613</span>                        <span class="stringliteral">&quot;the array should be of shape (n_features,). Got &quot;</span></div>
<div class="line"><span class="lineno">  614</span>                        f<span class="stringliteral">&quot;{categorical_features.size} elements while `X` contains &quot;</span></div>
<div class="line"><span class="lineno">  615</span>                        f<span class="stringliteral">&quot;{n_features} features.&quot;</span></div>
<div class="line"><span class="lineno">  616</span>                    )</div>
<div class="line"><span class="lineno">  617</span>                is_categorical = [</div>
<div class="line"><span class="lineno">  618</span>                    tuple(categorical_features[fx] <span class="keywordflow">for</span> fx <span class="keywordflow">in</span> fxs) <span class="keywordflow">for</span> fxs <span class="keywordflow">in</span> features</div>
<div class="line"><span class="lineno">  619</span>                ]</div>
<div class="line"><span class="lineno">  620</span>            <span class="keywordflow">elif</span> categorical_features.dtype.kind <span class="keywordflow">in</span> (<span class="stringliteral">&quot;i&quot;</span>, <span class="stringliteral">&quot;O&quot;</span>, <span class="stringliteral">&quot;U&quot;</span>):</div>
<div class="line"><span class="lineno">  621</span>                <span class="comment"># categorical features provided as a list of indices or feature names</span></div>
<div class="line"><span class="lineno">  622</span>                categorical_features_idx = [</div>
<div class="line"><span class="lineno">  623</span>                    _get_feature_index(cat, feature_names=feature_names)</div>
<div class="line"><span class="lineno">  624</span>                    <span class="keywordflow">for</span> cat <span class="keywordflow">in</span> categorical_features</div>
<div class="line"><span class="lineno">  625</span>                ]</div>
<div class="line"><span class="lineno">  626</span>                is_categorical = [</div>
<div class="line"><span class="lineno">  627</span>                    tuple([idx <span class="keywordflow">in</span> categorical_features_idx <span class="keywordflow">for</span> idx <span class="keywordflow">in</span> fxs])</div>
<div class="line"><span class="lineno">  628</span>                    <span class="keywordflow">for</span> fxs <span class="keywordflow">in</span> features</div>
<div class="line"><span class="lineno">  629</span>                ]</div>
<div class="line"><span class="lineno">  630</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  631</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  632</span>                    <span class="stringliteral">&quot;Expected `categorical_features` to be an array-like of boolean,&quot;</span></div>
<div class="line"><span class="lineno">  633</span>                    f<span class="stringliteral">&quot; integer, or string. Got {categorical_features.dtype} instead.&quot;</span></div>
<div class="line"><span class="lineno">  634</span>                )</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span>            <span class="keywordflow">for</span> cats <span class="keywordflow">in</span> is_categorical:</div>
<div class="line"><span class="lineno">  637</span>                <span class="keywordflow">if</span> np.size(cats) == 2 <span class="keywordflow">and</span> (cats[0] != cats[1]):</div>
<div class="line"><span class="lineno">  638</span>                    <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  639</span>                        <span class="stringliteral">&quot;Two-way partial dependence plots are not supported for pairs&quot;</span></div>
<div class="line"><span class="lineno">  640</span>                        <span class="stringliteral">&quot; of continuous and categorical features.&quot;</span></div>
<div class="line"><span class="lineno">  641</span>                    )</div>
<div class="line"><span class="lineno">  642</span> </div>
<div class="line"><span class="lineno">  643</span>            <span class="comment"># collect the indices of the categorical features targeted by the partial</span></div>
<div class="line"><span class="lineno">  644</span>            <span class="comment"># dependence computation</span></div>
<div class="line"><span class="lineno">  645</span>            categorical_features_targeted = set(</div>
<div class="line"><span class="lineno">  646</span>                [</div>
<div class="line"><span class="lineno">  647</span>                    fx</div>
<div class="line"><span class="lineno">  648</span>                    <span class="keywordflow">for</span> fxs, cats <span class="keywordflow">in</span> zip(features, is_categorical)</div>
<div class="line"><span class="lineno">  649</span>                    <span class="keywordflow">for</span> fx <span class="keywordflow">in</span> fxs</div>
<div class="line"><span class="lineno">  650</span>                    <span class="keywordflow">if</span> any(cats)</div>
<div class="line"><span class="lineno">  651</span>                ]</div>
<div class="line"><span class="lineno">  652</span>            )</div>
<div class="line"><span class="lineno">  653</span>            <span class="keywordflow">if</span> categorical_features_targeted:</div>
<div class="line"><span class="lineno">  654</span>                min_n_cats = min(</div>
<div class="line"><span class="lineno">  655</span>                    [</div>
<div class="line"><span class="lineno">  656</span>                        len(_unique(_safe_indexing(X, idx, axis=1)))</div>
<div class="line"><span class="lineno">  657</span>                        <span class="keywordflow">for</span> idx <span class="keywordflow">in</span> categorical_features_targeted</div>
<div class="line"><span class="lineno">  658</span>                    ]</div>
<div class="line"><span class="lineno">  659</span>                )</div>
<div class="line"><span class="lineno">  660</span>                <span class="keywordflow">if</span> grid_resolution &lt; min_n_cats:</div>
<div class="line"><span class="lineno">  661</span>                    <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  662</span>                        <span class="stringliteral">&quot;The resolution of the computed grid is less than the &quot;</span></div>
<div class="line"><span class="lineno">  663</span>                        <span class="stringliteral">&quot;minimum number of categories in the targeted categorical &quot;</span></div>
<div class="line"><span class="lineno">  664</span>                        <span class="stringliteral">&quot;features. Expect the `grid_resolution` to be greater than &quot;</span></div>
<div class="line"><span class="lineno">  665</span>                        f<span class="stringliteral">&quot;{min_n_cats}. Got {grid_resolution} instead.&quot;</span></div>
<div class="line"><span class="lineno">  666</span>                    )</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>            <span class="keywordflow">for</span> is_cat, kind_plot <span class="keywordflow">in</span> zip(is_categorical, kind_):</div>
<div class="line"><span class="lineno">  669</span>                <span class="keywordflow">if</span> any(is_cat) <span class="keywordflow">and</span> kind_plot != <span class="stringliteral">&quot;average&quot;</span>:</div>
<div class="line"><span class="lineno">  670</span>                    <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  671</span>                        <span class="stringliteral">&quot;It is not possible to display individual effects for&quot;</span></div>
<div class="line"><span class="lineno">  672</span>                        <span class="stringliteral">&quot; categorical features.&quot;</span></div>
<div class="line"><span class="lineno">  673</span>                    )</div>
<div class="line"><span class="lineno">  674</span> </div>
<div class="line"><span class="lineno">  675</span>        <span class="comment"># Early exit if the axes does not have the correct number of axes</span></div>
<div class="line"><span class="lineno">  676</span>        <span class="keywordflow">if</span> ax <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> isinstance(ax, plt.Axes):</div>
<div class="line"><span class="lineno">  677</span>            axes = np.asarray(ax, dtype=object)</div>
<div class="line"><span class="lineno">  678</span>            <span class="keywordflow">if</span> axes.size != len(features):</div>
<div class="line"><span class="lineno">  679</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  680</span>                    <span class="stringliteral">&quot;Expected ax to have {} axes, got {}&quot;</span>.format(</div>
<div class="line"><span class="lineno">  681</span>                        len(features), axes.size</div>
<div class="line"><span class="lineno">  682</span>                    )</div>
<div class="line"><span class="lineno">  683</span>                )</div>
<div class="line"><span class="lineno">  684</span> </div>
<div class="line"><span class="lineno">  685</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> chain.from_iterable(features):</div>
<div class="line"><span class="lineno">  686</span>            <span class="keywordflow">if</span> i &gt;= len(feature_names):</div>
<div class="line"><span class="lineno">  687</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  688</span>                    <span class="stringliteral">&quot;All entries of features must be less than &quot;</span></div>
<div class="line"><span class="lineno">  689</span>                    <span class="stringliteral">&quot;len(feature_names) = {0}, got {1}.&quot;</span>.format(len(feature_names), i)</div>
<div class="line"><span class="lineno">  690</span>                )</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>        <span class="keywordflow">if</span> isinstance(subsample, numbers.Integral):</div>
<div class="line"><span class="lineno">  693</span>            <span class="keywordflow">if</span> subsample &lt;= 0:</div>
<div class="line"><span class="lineno">  694</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  695</span>                    f<span class="stringliteral">&quot;When an integer, subsample={subsample} should be positive.&quot;</span></div>
<div class="line"><span class="lineno">  696</span>                )</div>
<div class="line"><span class="lineno">  697</span>        <span class="keywordflow">elif</span> isinstance(subsample, numbers.Real):</div>
<div class="line"><span class="lineno">  698</span>            <span class="keywordflow">if</span> subsample &lt;= 0 <span class="keywordflow">or</span> subsample &gt;= 1:</div>
<div class="line"><span class="lineno">  699</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  700</span>                    f<span class="stringliteral">&quot;When a floating-point, subsample={subsample} should be in &quot;</span></div>
<div class="line"><span class="lineno">  701</span>                    <span class="stringliteral">&quot;the (0, 1) range.&quot;</span></div>
<div class="line"><span class="lineno">  702</span>                )</div>
<div class="line"><span class="lineno">  703</span> </div>
<div class="line"><span class="lineno">  704</span>        <span class="comment"># compute predictions and/or averaged predictions</span></div>
<div class="line"><span class="lineno">  705</span>        pd_results = Parallel(n_jobs=n_jobs, verbose=verbose)(</div>
<div class="line"><span class="lineno">  706</span>            delayed(partial_dependence)(</div>
<div class="line"><span class="lineno">  707</span>                estimator,</div>
<div class="line"><span class="lineno">  708</span>                X,</div>
<div class="line"><span class="lineno">  709</span>                fxs,</div>
<div class="line"><span class="lineno">  710</span>                feature_names=feature_names,</div>
<div class="line"><span class="lineno">  711</span>                categorical_features=categorical_features,</div>
<div class="line"><span class="lineno">  712</span>                response_method=response_method,</div>
<div class="line"><span class="lineno">  713</span>                method=method,</div>
<div class="line"><span class="lineno">  714</span>                grid_resolution=grid_resolution,</div>
<div class="line"><span class="lineno">  715</span>                percentiles=percentiles,</div>
<div class="line"><span class="lineno">  716</span>                kind=kind_plot,</div>
<div class="line"><span class="lineno">  717</span>            )</div>
<div class="line"><span class="lineno">  718</span>            <span class="keywordflow">for</span> kind_plot, fxs <span class="keywordflow">in</span> zip(kind_, features)</div>
<div class="line"><span class="lineno">  719</span>        )</div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>        <span class="comment"># For multioutput regression, we can only check the validity of target</span></div>
<div class="line"><span class="lineno">  722</span>        <span class="comment"># now that we have the predictions.</span></div>
<div class="line"><span class="lineno">  723</span>        <span class="comment"># Also note: as multiclass-multioutput classifiers are not supported,</span></div>
<div class="line"><span class="lineno">  724</span>        <span class="comment"># multiclass and multioutput scenario are mutually exclusive. So there is</span></div>
<div class="line"><span class="lineno">  725</span>        <span class="comment"># no risk of overwriting target_idx here.</span></div>
<div class="line"><span class="lineno">  726</span>        pd_result = pd_results[0]  <span class="comment"># checking the first result is enough</span></div>
<div class="line"><span class="lineno">  727</span>        n_tasks = (</div>
<div class="line"><span class="lineno">  728</span>            pd_result.average.shape[0]</div>
<div class="line"><span class="lineno">  729</span>            <span class="keywordflow">if</span> kind_[0] == <span class="stringliteral">&quot;average&quot;</span></div>
<div class="line"><span class="lineno">  730</span>            <span class="keywordflow">else</span> pd_result.individual.shape[0]</div>
<div class="line"><span class="lineno">  731</span>        )</div>
<div class="line"><span class="lineno">  732</span>        <span class="keywordflow">if</span> is_regressor(estimator) <span class="keywordflow">and</span> n_tasks &gt; 1:</div>
<div class="line"><span class="lineno">  733</span>            <span class="keywordflow">if</span> target <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  734</span>                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;target must be specified for multi-output regressors&quot;</span>)</div>
<div class="line"><span class="lineno">  735</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> 0 &lt;= target &lt;= n_tasks:</div>
<div class="line"><span class="lineno">  736</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno">  737</span>                    <span class="stringliteral">&quot;target must be in [0, n_tasks], got {}.&quot;</span>.format(target)</div>
<div class="line"><span class="lineno">  738</span>                )</div>
<div class="line"><span class="lineno">  739</span>            target_idx = target</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>        deciles = {}</div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordflow">for</span> fxs, cats <span class="keywordflow">in</span> zip(features, is_categorical):</div>
<div class="line"><span class="lineno">  743</span>            <span class="keywordflow">for</span> fx, cat <span class="keywordflow">in</span> zip(fxs, cats):</div>
<div class="line"><span class="lineno">  744</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> cat <span class="keywordflow">and</span> fx <span class="keywordflow">not</span> <span class="keywordflow">in</span> deciles:</div>
<div class="line"><span class="lineno">  745</span>                    X_col = _safe_indexing(X, fx, axis=1)</div>
<div class="line"><span class="lineno">  746</span>                    deciles[fx] = mquantiles(X_col, prob=np.arange(0.1, 1.0, 0.1))</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>        display = PartialDependenceDisplay(</div>
<div class="line"><span class="lineno">  749</span>            pd_results=pd_results,</div>
<div class="line"><span class="lineno">  750</span>            features=features,</div>
<div class="line"><span class="lineno">  751</span>            feature_names=feature_names,</div>
<div class="line"><span class="lineno">  752</span>            target_idx=target_idx,</div>
<div class="line"><span class="lineno">  753</span>            deciles=deciles,</div>
<div class="line"><span class="lineno">  754</span>            kind=kind,</div>
<div class="line"><span class="lineno">  755</span>            subsample=subsample,</div>
<div class="line"><span class="lineno">  756</span>            random_state=random_state,</div>
<div class="line"><span class="lineno">  757</span>            is_categorical=is_categorical,</div>
<div class="line"><span class="lineno">  758</span>        )</div>
<div class="line"><span class="lineno">  759</span>        <span class="keywordflow">return</span> display.plot(</div>
<div class="line"><span class="lineno">  760</span>            ax=ax,</div>
<div class="line"><span class="lineno">  761</span>            n_cols=n_cols,</div>
<div class="line"><span class="lineno">  762</span>            line_kw=line_kw,</div>
<div class="line"><span class="lineno">  763</span>            ice_lines_kw=ice_lines_kw,</div>
<div class="line"><span class="lineno">  764</span>            pd_line_kw=pd_line_kw,</div>
<div class="line"><span class="lineno">  765</span>            contour_kw=contour_kw,</div>
<div class="line"><span class="lineno">  766</span>            centered=centered,</div>
<div class="line"><span class="lineno">  767</span>        )</div>
<div class="line"><span class="lineno">  768</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8bad3026896db278e47c97f00e542485" name="a8bad3026896db278e47c97f00e542485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bad3026896db278e47c97f00e542485">&#9670;&#160;</a></span>plot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.plot </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>ax</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_cols</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>line_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ice_lines_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pd_line_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>contour_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bar_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>heatmap_kw</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pdp_lim</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>centered</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Plot partial dependence plots.

Parameters
----------
ax : Matplotlib axes or array-like of Matplotlib axes, default=None
    - If a single axis is passed in, it is treated as a bounding axes
        and a grid of partial dependence plots will be drawn within
        these bounds. The `n_cols` parameter controls the number of
        columns in the grid.
    - If an array-like of axes are passed in, the partial dependence
        plots will be drawn directly into these axes.
    - If `None`, a figure and a bounding axes is created and treated
        as the single axes case.

n_cols : int, default=3
    The maximum number of columns in the grid plot. Only active when
    `ax` is a single axes or `None`.

line_kw : dict, default=None
    Dict with keywords passed to the `matplotlib.pyplot.plot` call.
    For one-way partial dependence plots.

ice_lines_kw : dict, default=None
    Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.
    For ICE lines in the one-way partial dependence plots.
    The key value pairs defined in `ice_lines_kw` takes priority over
    `line_kw`.

    .. versionadded:: 1.0

pd_line_kw : dict, default=None
    Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.
    For partial dependence in one-way partial dependence plots.
    The key value pairs defined in `pd_line_kw` takes priority over
    `line_kw`.

    .. versionadded:: 1.0

contour_kw : dict, default=None
    Dict with keywords passed to the `matplotlib.pyplot.contourf`
    call for two-way partial dependence plots.

bar_kw : dict, default=None
    Dict with keywords passed to the `matplotlib.pyplot.bar`
    call for one-way categorical partial dependence plots.

    .. versionadded:: 1.2

heatmap_kw : dict, default=None
    Dict with keywords passed to the `matplotlib.pyplot.imshow`
    call for two-way categorical partial dependence plots.

    .. versionadded:: 1.2

pdp_lim : dict, default=None
    Global min and max average predictions, such that all plots will have the
    same scale and y limits. `pdp_lim[1]` is the global min and max for single
    partial dependence curves. `pdp_lim[2]` is the global min and max for
    two-way partial dependence curves. If `None` (default), the limit will be
    inferred from the global minimum and maximum of all predictions.

    .. versionadded:: 1.1

centered : bool, default=False
    If `True`, the ICE and PD lines will start at the origin of the
    y-axis. By default, no centering is done.

    .. versionadded:: 1.1

Returns
-------
display : :class:`~sklearn.inspection.PartialDependenceDisplay`
    Returns a :class:`~sklearn.inspection.PartialDependenceDisplay`
    object that contains the partial dependence plots.
</pre> <div class="fragment"><div class="line"><span class="lineno"> 1129</span>    ):</div>
<div class="line"><span class="lineno"> 1130</span>        <span class="stringliteral">&quot;&quot;&quot;Plot partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1131</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1132</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno"> 1133</span><span class="stringliteral">        ----------</span></div>
<div class="line"><span class="lineno"> 1134</span><span class="stringliteral">        ax : Matplotlib axes or array-like of Matplotlib axes, default=None</span></div>
<div class="line"><span class="lineno"> 1135</span><span class="stringliteral">            - If a single axis is passed in, it is treated as a bounding axes</span></div>
<div class="line"><span class="lineno"> 1136</span><span class="stringliteral">                and a grid of partial dependence plots will be drawn within</span></div>
<div class="line"><span class="lineno"> 1137</span><span class="stringliteral">                these bounds. The `n_cols` parameter controls the number of</span></div>
<div class="line"><span class="lineno"> 1138</span><span class="stringliteral">                columns in the grid.</span></div>
<div class="line"><span class="lineno"> 1139</span><span class="stringliteral">            - If an array-like of axes are passed in, the partial dependence</span></div>
<div class="line"><span class="lineno"> 1140</span><span class="stringliteral">                plots will be drawn directly into these axes.</span></div>
<div class="line"><span class="lineno"> 1141</span><span class="stringliteral">            - If `None`, a figure and a bounding axes is created and treated</span></div>
<div class="line"><span class="lineno"> 1142</span><span class="stringliteral">                as the single axes case.</span></div>
<div class="line"><span class="lineno"> 1143</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1144</span><span class="stringliteral">        n_cols : int, default=3</span></div>
<div class="line"><span class="lineno"> 1145</span><span class="stringliteral">            The maximum number of columns in the grid plot. Only active when</span></div>
<div class="line"><span class="lineno"> 1146</span><span class="stringliteral">            `ax` is a single axes or `None`.</span></div>
<div class="line"><span class="lineno"> 1147</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1148</span><span class="stringliteral">        line_kw : dict, default=None</span></div>
<div class="line"><span class="lineno"> 1149</span><span class="stringliteral">            Dict with keywords passed to the `matplotlib.pyplot.plot` call.</span></div>
<div class="line"><span class="lineno"> 1150</span><span class="stringliteral">            For one-way partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1151</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1152</span><span class="stringliteral">        ice_lines_kw : dict, default=None</span></div>
<div class="line"><span class="lineno"> 1153</span><span class="stringliteral">            Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.</span></div>
<div class="line"><span class="lineno"> 1154</span><span class="stringliteral">            For ICE lines in the one-way partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1155</span><span class="stringliteral">            The key value pairs defined in `ice_lines_kw` takes priority over</span></div>
<div class="line"><span class="lineno"> 1156</span><span class="stringliteral">            `line_kw`.</span></div>
<div class="line"><span class="lineno"> 1157</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1158</span><span class="stringliteral">            .. versionadded:: 1.0</span></div>
<div class="line"><span class="lineno"> 1159</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1160</span><span class="stringliteral">        pd_line_kw : dict, default=None</span></div>
<div class="line"><span class="lineno"> 1161</span><span class="stringliteral">            Dictionary with keywords passed to the `matplotlib.pyplot.plot` call.</span></div>
<div class="line"><span class="lineno"> 1162</span><span class="stringliteral">            For partial dependence in one-way partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1163</span><span class="stringliteral">            The key value pairs defined in `pd_line_kw` takes priority over</span></div>
<div class="line"><span class="lineno"> 1164</span><span class="stringliteral">            `line_kw`.</span></div>
<div class="line"><span class="lineno"> 1165</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1166</span><span class="stringliteral">            .. versionadded:: 1.0</span></div>
<div class="line"><span class="lineno"> 1167</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1168</span><span class="stringliteral">        contour_kw : dict, default=None</span></div>
<div class="line"><span class="lineno"> 1169</span><span class="stringliteral">            Dict with keywords passed to the `matplotlib.pyplot.contourf`</span></div>
<div class="line"><span class="lineno"> 1170</span><span class="stringliteral">            call for two-way partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1171</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1172</span><span class="stringliteral">        bar_kw : dict, default=None</span></div>
<div class="line"><span class="lineno"> 1173</span><span class="stringliteral">            Dict with keywords passed to the `matplotlib.pyplot.bar`</span></div>
<div class="line"><span class="lineno"> 1174</span><span class="stringliteral">            call for one-way categorical partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1175</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1176</span><span class="stringliteral">            .. versionadded:: 1.2</span></div>
<div class="line"><span class="lineno"> 1177</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1178</span><span class="stringliteral">        heatmap_kw : dict, default=None</span></div>
<div class="line"><span class="lineno"> 1179</span><span class="stringliteral">            Dict with keywords passed to the `matplotlib.pyplot.imshow`</span></div>
<div class="line"><span class="lineno"> 1180</span><span class="stringliteral">            call for two-way categorical partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1181</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1182</span><span class="stringliteral">            .. versionadded:: 1.2</span></div>
<div class="line"><span class="lineno"> 1183</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1184</span><span class="stringliteral">        pdp_lim : dict, default=None</span></div>
<div class="line"><span class="lineno"> 1185</span><span class="stringliteral">            Global min and max average predictions, such that all plots will have the</span></div>
<div class="line"><span class="lineno"> 1186</span><span class="stringliteral">            same scale and y limits. `pdp_lim[1]` is the global min and max for single</span></div>
<div class="line"><span class="lineno"> 1187</span><span class="stringliteral">            partial dependence curves. `pdp_lim[2]` is the global min and max for</span></div>
<div class="line"><span class="lineno"> 1188</span><span class="stringliteral">            two-way partial dependence curves. If `None` (default), the limit will be</span></div>
<div class="line"><span class="lineno"> 1189</span><span class="stringliteral">            inferred from the global minimum and maximum of all predictions.</span></div>
<div class="line"><span class="lineno"> 1190</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1191</span><span class="stringliteral">            .. versionadded:: 1.1</span></div>
<div class="line"><span class="lineno"> 1192</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1193</span><span class="stringliteral">        centered : bool, default=False</span></div>
<div class="line"><span class="lineno"> 1194</span><span class="stringliteral">            If `True`, the ICE and PD lines will start at the origin of the</span></div>
<div class="line"><span class="lineno"> 1195</span><span class="stringliteral">            y-axis. By default, no centering is done.</span></div>
<div class="line"><span class="lineno"> 1196</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1197</span><span class="stringliteral">            .. versionadded:: 1.1</span></div>
<div class="line"><span class="lineno"> 1198</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1199</span><span class="stringliteral">        Returns</span></div>
<div class="line"><span class="lineno"> 1200</span><span class="stringliteral">        -------</span></div>
<div class="line"><span class="lineno"> 1201</span><span class="stringliteral">        display : :class:`~sklearn.inspection.PartialDependenceDisplay`</span></div>
<div class="line"><span class="lineno"> 1202</span><span class="stringliteral">            Returns a :class:`~sklearn.inspection.PartialDependenceDisplay`</span></div>
<div class="line"><span class="lineno"> 1203</span><span class="stringliteral">            object that contains the partial dependence plots.</span></div>
<div class="line"><span class="lineno"> 1204</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>        check_matplotlib_support(<span class="stringliteral">&quot;plot_partial_dependence&quot;</span>)</div>
<div class="line"><span class="lineno"> 1207</span>        <span class="keyword">import</span> <a class="code hl_namespace" href="namespacematplotlib_1_1pyplot.html">matplotlib.pyplot</a> <span class="keyword">as</span> plt  <span class="comment"># noqa</span></div>
<div class="line"><span class="lineno"> 1208</span>        <span class="keyword">from</span> <a class="code hl_namespace" href="namespacematplotlib_1_1gridspec.html">matplotlib.gridspec</a> <span class="keyword">import</span> GridSpecFromSubplotSpec  <span class="comment"># noqa</span></div>
<div class="line"><span class="lineno"> 1209</span> </div>
<div class="line"><span class="lineno"> 1210</span>        <span class="keywordflow">if</span> isinstance(self.kind, str):</div>
<div class="line"><span class="lineno"> 1211</span>            kind = [self.kind] * len(self.features)</div>
<div class="line"><span class="lineno"> 1212</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1213</span>            kind = self.kind</div>
<div class="line"><span class="lineno"> 1214</span> </div>
<div class="line"><span class="lineno"> 1215</span>        <span class="keywordflow">if</span> self.is_categorical <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1216</span>            is_categorical = [</div>
<div class="line"><span class="lineno"> 1217</span>                (<span class="keyword">False</span>,) <span class="keywordflow">if</span> len(fx) == 1 <span class="keywordflow">else</span> (<span class="keyword">False</span>, <span class="keyword">False</span>) <span class="keywordflow">for</span> fx <span class="keywordflow">in</span> self.features</div>
<div class="line"><span class="lineno"> 1218</span>            ]</div>
<div class="line"><span class="lineno"> 1219</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1220</span>            is_categorical = self.is_categorical</div>
<div class="line"><span class="lineno"> 1221</span> </div>
<div class="line"><span class="lineno"> 1222</span>        <span class="keywordflow">if</span> len(kind) != len(self.features):</div>
<div class="line"><span class="lineno"> 1223</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1224</span>                <span class="stringliteral">&quot;When `kind` is provided as a list of strings, it should &quot;</span></div>
<div class="line"><span class="lineno"> 1225</span>                <span class="stringliteral">&quot;contain as many elements as `features`. `kind` contains &quot;</span></div>
<div class="line"><span class="lineno"> 1226</span>                f<span class="stringliteral">&quot;{len(kind)} element(s) and `features` contains &quot;</span></div>
<div class="line"><span class="lineno"> 1227</span>                f<span class="stringliteral">&quot;{len(self.features)} element(s).&quot;</span></div>
<div class="line"><span class="lineno"> 1228</span>            )</div>
<div class="line"><span class="lineno"> 1229</span> </div>
<div class="line"><span class="lineno"> 1230</span>        valid_kinds = {<span class="stringliteral">&quot;average&quot;</span>, <span class="stringliteral">&quot;individual&quot;</span>, <span class="stringliteral">&quot;both&quot;</span>}</div>
<div class="line"><span class="lineno"> 1231</span>        <span class="keywordflow">if</span> any([k <span class="keywordflow">not</span> <span class="keywordflow">in</span> valid_kinds <span class="keywordflow">for</span> k <span class="keywordflow">in</span> kind]):</div>
<div class="line"><span class="lineno"> 1232</span>            <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1233</span>                f<span class="stringliteral">&quot;Values provided to `kind` must be one of: {valid_kinds!r} or a list&quot;</span></div>
<div class="line"><span class="lineno"> 1234</span>                f<span class="stringliteral">&quot; of such values. Currently, kind={self.kind!r}&quot;</span></div>
<div class="line"><span class="lineno"> 1235</span>            )</div>
<div class="line"><span class="lineno"> 1236</span> </div>
<div class="line"><span class="lineno"> 1237</span>        <span class="comment"># FIXME: remove in 1.3</span></div>
<div class="line"><span class="lineno"> 1238</span>        <span class="keywordflow">if</span> self.pdp_lim != <span class="stringliteral">&quot;deprecated&quot;</span>:</div>
<div class="line"><span class="lineno"> 1239</span>            warnings.warn(</div>
<div class="line"><span class="lineno"> 1240</span>                <span class="stringliteral">&quot;The `pdp_lim` parameter is deprecated in version 1.1 and will be &quot;</span></div>
<div class="line"><span class="lineno"> 1241</span>                <span class="stringliteral">&quot;removed in version 1.3. Provide `pdp_lim` to the `plot` method.&quot;</span></div>
<div class="line"><span class="lineno"> 1242</span>                <span class="stringliteral">&quot;instead.&quot;</span>,</div>
<div class="line"><span class="lineno"> 1243</span>                FutureWarning,</div>
<div class="line"><span class="lineno"> 1244</span>            )</div>
<div class="line"><span class="lineno"> 1245</span>            <span class="keywordflow">if</span> pdp_lim <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.pdp_lim != pdp_lim:</div>
<div class="line"><span class="lineno"> 1246</span>                warnings.warn(</div>
<div class="line"><span class="lineno"> 1247</span>                    <span class="stringliteral">&quot;`pdp_lim` has been passed in both the constructor and the `plot` &quot;</span></div>
<div class="line"><span class="lineno"> 1248</span>                    <span class="stringliteral">&quot;method. For backward compatibility, the parameter from the &quot;</span></div>
<div class="line"><span class="lineno"> 1249</span>                    <span class="stringliteral">&quot;constructor will be used.&quot;</span>,</div>
<div class="line"><span class="lineno"> 1250</span>                    UserWarning,</div>
<div class="line"><span class="lineno"> 1251</span>                )</div>
<div class="line"><span class="lineno"> 1252</span>            pdp_lim = self.pdp_lim</div>
<div class="line"><span class="lineno"> 1253</span> </div>
<div class="line"><span class="lineno"> 1254</span>        <span class="comment"># Center results before plotting</span></div>
<div class="line"><span class="lineno"> 1255</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> centered:</div>
<div class="line"><span class="lineno"> 1256</span>            pd_results_ = self.pd_results</div>
<div class="line"><span class="lineno"> 1257</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1258</span>            pd_results_ = []</div>
<div class="line"><span class="lineno"> 1259</span>            <span class="keywordflow">for</span> kind_plot, pd_result <span class="keywordflow">in</span> zip(kind, self.pd_results):</div>
<div class="line"><span class="lineno"> 1260</span>                current_results = {<span class="stringliteral">&quot;values&quot;</span>: pd_result[<span class="stringliteral">&quot;values&quot;</span>]}</div>
<div class="line"><span class="lineno"> 1261</span> </div>
<div class="line"><span class="lineno"> 1262</span>                <span class="keywordflow">if</span> kind_plot <span class="keywordflow">in</span> (<span class="stringliteral">&quot;individual&quot;</span>, <span class="stringliteral">&quot;both&quot;</span>):</div>
<div class="line"><span class="lineno"> 1263</span>                    preds = pd_result.individual</div>
<div class="line"><span class="lineno"> 1264</span>                    preds = preds - preds[self.target_idx, :, 0, <span class="keywordtype">None</span>]</div>
<div class="line"><span class="lineno"> 1265</span>                    current_results[<span class="stringliteral">&quot;individual&quot;</span>] = preds</div>
<div class="line"><span class="lineno"> 1266</span> </div>
<div class="line"><span class="lineno"> 1267</span>                <span class="keywordflow">if</span> kind_plot <span class="keywordflow">in</span> (<span class="stringliteral">&quot;average&quot;</span>, <span class="stringliteral">&quot;both&quot;</span>):</div>
<div class="line"><span class="lineno"> 1268</span>                    avg_preds = pd_result.average</div>
<div class="line"><span class="lineno"> 1269</span>                    avg_preds = avg_preds - avg_preds[self.target_idx, 0, <span class="keywordtype">None</span>]</div>
<div class="line"><span class="lineno"> 1270</span>                    current_results[<span class="stringliteral">&quot;average&quot;</span>] = avg_preds</div>
<div class="line"><span class="lineno"> 1271</span> </div>
<div class="line"><span class="lineno"> 1272</span>                pd_results_.append(Bunch(**current_results))</div>
<div class="line"><span class="lineno"> 1273</span> </div>
<div class="line"><span class="lineno"> 1274</span>        <span class="keywordflow">if</span> pdp_lim <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1275</span>            <span class="comment"># get global min and max average predictions of PD grouped by plot type</span></div>
<div class="line"><span class="lineno"> 1276</span>            pdp_lim = {}</div>
<div class="line"><span class="lineno"> 1277</span>            <span class="keywordflow">for</span> kind_plot, pdp <span class="keywordflow">in</span> zip(kind, pd_results_):</div>
<div class="line"><span class="lineno"> 1278</span>                values = pdp[<span class="stringliteral">&quot;values&quot;</span>]</div>
<div class="line"><span class="lineno"> 1279</span>                preds = pdp.average <span class="keywordflow">if</span> kind_plot == <span class="stringliteral">&quot;average&quot;</span> <span class="keywordflow">else</span> pdp.individual</div>
<div class="line"><span class="lineno"> 1280</span>                min_pd = preds[self.target_idx].min()</div>
<div class="line"><span class="lineno"> 1281</span>                max_pd = preds[self.target_idx].max()</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>                <span class="comment"># expand the limits to account so that the plotted lines do not touch</span></div>
<div class="line"><span class="lineno"> 1284</span>                <span class="comment"># the edges of the plot</span></div>
<div class="line"><span class="lineno"> 1285</span>                span = max_pd - min_pd</div>
<div class="line"><span class="lineno"> 1286</span>                min_pd -= 0.05 * span</div>
<div class="line"><span class="lineno"> 1287</span>                max_pd += 0.05 * span</div>
<div class="line"><span class="lineno"> 1288</span> </div>
<div class="line"><span class="lineno"> 1289</span>                n_fx = len(values)</div>
<div class="line"><span class="lineno"> 1290</span>                old_min_pd, old_max_pd = pdp_lim.get(n_fx, (min_pd, max_pd))</div>
<div class="line"><span class="lineno"> 1291</span>                min_pd = min(min_pd, old_min_pd)</div>
<div class="line"><span class="lineno"> 1292</span>                max_pd = max(max_pd, old_max_pd)</div>
<div class="line"><span class="lineno"> 1293</span>                pdp_lim[n_fx] = (min_pd, max_pd)</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span>        <span class="keywordflow">if</span> line_kw <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1296</span>            line_kw = {}</div>
<div class="line"><span class="lineno"> 1297</span>        <span class="keywordflow">if</span> ice_lines_kw <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1298</span>            ice_lines_kw = {}</div>
<div class="line"><span class="lineno"> 1299</span>        <span class="keywordflow">if</span> pd_line_kw <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1300</span>            pd_line_kw = {}</div>
<div class="line"><span class="lineno"> 1301</span>        <span class="keywordflow">if</span> bar_kw <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1302</span>            bar_kw = {}</div>
<div class="line"><span class="lineno"> 1303</span>        <span class="keywordflow">if</span> heatmap_kw <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1304</span>            heatmap_kw = {}</div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>        <span class="keywordflow">if</span> ax <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1307</span>            _, ax = plt.subplots()</div>
<div class="line"><span class="lineno"> 1308</span> </div>
<div class="line"><span class="lineno"> 1309</span>        <span class="keywordflow">if</span> contour_kw <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1310</span>            contour_kw = {}</div>
<div class="line"><span class="lineno"> 1311</span>        default_contour_kws = {<span class="stringliteral">&quot;alpha&quot;</span>: 0.75}</div>
<div class="line"><span class="lineno"> 1312</span>        contour_kw = {**default_contour_kws, **contour_kw}</div>
<div class="line"><span class="lineno"> 1313</span> </div>
<div class="line"><span class="lineno"> 1314</span>        n_features = len(self.features)</div>
<div class="line"><span class="lineno"> 1315</span>        is_average_plot = [kind_plot == <span class="stringliteral">&quot;average&quot;</span> <span class="keywordflow">for</span> kind_plot <span class="keywordflow">in</span> kind]</div>
<div class="line"><span class="lineno"> 1316</span>        <span class="keywordflow">if</span> all(is_average_plot):</div>
<div class="line"><span class="lineno"> 1317</span>            <span class="comment"># only average plots are requested</span></div>
<div class="line"><span class="lineno"> 1318</span>            n_ice_lines = 0</div>
<div class="line"><span class="lineno"> 1319</span>            n_lines = 1</div>
<div class="line"><span class="lineno"> 1320</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1321</span>            <span class="comment"># we need to determine the number of ICE samples computed</span></div>
<div class="line"><span class="lineno"> 1322</span>            ice_plot_idx = is_average_plot.index(<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1323</span>            n_ice_lines = self._get_sample_count(</div>
<div class="line"><span class="lineno"> 1324</span>                len(pd_results_[ice_plot_idx].individual[0])</div>
<div class="line"><span class="lineno"> 1325</span>            )</div>
<div class="line"><span class="lineno"> 1326</span>            <span class="keywordflow">if</span> any([kind_plot == <span class="stringliteral">&quot;both&quot;</span> <span class="keywordflow">for</span> kind_plot <span class="keywordflow">in</span> kind]):</div>
<div class="line"><span class="lineno"> 1327</span>                n_lines = n_ice_lines + 1  <span class="comment"># account for the average line</span></div>
<div class="line"><span class="lineno"> 1328</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1329</span>                n_lines = n_ice_lines</div>
<div class="line"><span class="lineno"> 1330</span> </div>
<div class="line"><span class="lineno"> 1331</span>        <span class="keywordflow">if</span> isinstance(ax, plt.Axes):</div>
<div class="line"><span class="lineno"> 1332</span>            <span class="comment"># If ax was set off, it has most likely been set to off</span></div>
<div class="line"><span class="lineno"> 1333</span>            <span class="comment"># by a previous call to plot.</span></div>
<div class="line"><span class="lineno"> 1334</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> ax.axison:</div>
<div class="line"><span class="lineno"> 1335</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1336</span>                    <span class="stringliteral">&quot;The ax was already used in another plot &quot;</span></div>
<div class="line"><span class="lineno"> 1337</span>                    <span class="stringliteral">&quot;function, please set ax=display.axes_ &quot;</span></div>
<div class="line"><span class="lineno"> 1338</span>                    <span class="stringliteral">&quot;instead&quot;</span></div>
<div class="line"><span class="lineno"> 1339</span>                )</div>
<div class="line"><span class="lineno"> 1340</span> </div>
<div class="line"><span class="lineno"> 1341</span>            ax.set_axis_off()</div>
<div class="line"><span class="lineno"> 1342</span>            self.bounding_ax_ = ax</div>
<div class="line"><span class="lineno"> 1343</span>            self.figure_ = ax.figure</div>
<div class="line"><span class="lineno"> 1344</span> </div>
<div class="line"><span class="lineno"> 1345</span>            n_cols = min(n_cols, n_features)</div>
<div class="line"><span class="lineno"> 1346</span>            n_rows = int(np.ceil(n_features / float(n_cols)))</div>
<div class="line"><span class="lineno"> 1347</span> </div>
<div class="line"><span class="lineno"> 1348</span>            self.axes_ = np.empty((n_rows, n_cols), dtype=object)</div>
<div class="line"><span class="lineno"> 1349</span>            <span class="keywordflow">if</span> all(is_average_plot):</div>
<div class="line"><span class="lineno"> 1350</span>                self.lines_ = np.empty((n_rows, n_cols), dtype=object)</div>
<div class="line"><span class="lineno"> 1351</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1352</span>                self.lines_ = np.empty((n_rows, n_cols, n_lines), dtype=object)</div>
<div class="line"><span class="lineno"> 1353</span>            self.contours_ = np.empty((n_rows, n_cols), dtype=object)</div>
<div class="line"><span class="lineno"> 1354</span>            self.bars_ = np.empty((n_rows, n_cols), dtype=object)</div>
<div class="line"><span class="lineno"> 1355</span>            self.heatmaps_ = np.empty((n_rows, n_cols), dtype=object)</div>
<div class="line"><span class="lineno"> 1356</span> </div>
<div class="line"><span class="lineno"> 1357</span>            axes_ravel = self.axes_.ravel()</div>
<div class="line"><span class="lineno"> 1358</span> </div>
<div class="line"><span class="lineno"> 1359</span>            gs = GridSpecFromSubplotSpec(</div>
<div class="line"><span class="lineno"> 1360</span>                n_rows, n_cols, subplot_spec=ax.get_subplotspec()</div>
<div class="line"><span class="lineno"> 1361</span>            )</div>
<div class="line"><span class="lineno"> 1362</span>            <span class="keywordflow">for</span> i, spec <span class="keywordflow">in</span> zip(range(n_features), gs):</div>
<div class="line"><span class="lineno"> 1363</span>                axes_ravel[i] = self.figure_.add_subplot(spec)</div>
<div class="line"><span class="lineno"> 1364</span> </div>
<div class="line"><span class="lineno"> 1365</span>        <span class="keywordflow">else</span>:  <span class="comment"># array-like</span></div>
<div class="line"><span class="lineno"> 1366</span>            ax = np.asarray(ax, dtype=object)</div>
<div class="line"><span class="lineno"> 1367</span>            <span class="keywordflow">if</span> ax.size != n_features:</div>
<div class="line"><span class="lineno"> 1368</span>                <span class="keywordflow">raise</span> ValueError(</div>
<div class="line"><span class="lineno"> 1369</span>                    <span class="stringliteral">&quot;Expected ax to have {} axes, got {}&quot;</span>.format(n_features, ax.size)</div>
<div class="line"><span class="lineno"> 1370</span>                )</div>
<div class="line"><span class="lineno"> 1371</span> </div>
<div class="line"><span class="lineno"> 1372</span>            <span class="keywordflow">if</span> ax.ndim == 2:</div>
<div class="line"><span class="lineno"> 1373</span>                n_cols = ax.shape[1]</div>
<div class="line"><span class="lineno"> 1374</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1375</span>                n_cols = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1376</span> </div>
<div class="line"><span class="lineno"> 1377</span>            self.bounding_ax_ = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1378</span>            self.figure_ = ax.ravel()[0].figure</div>
<div class="line"><span class="lineno"> 1379</span>            self.axes_ = ax</div>
<div class="line"><span class="lineno"> 1380</span>            <span class="keywordflow">if</span> all(is_average_plot):</div>
<div class="line"><span class="lineno"> 1381</span>                self.lines_ = np.empty_like(ax, dtype=object)</div>
<div class="line"><span class="lineno"> 1382</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1383</span>                self.lines_ = np.empty(ax.shape + (n_lines,), dtype=object)</div>
<div class="line"><span class="lineno"> 1384</span>            self.contours_ = np.empty_like(ax, dtype=object)</div>
<div class="line"><span class="lineno"> 1385</span>            self.bars_ = np.empty_like(ax, dtype=object)</div>
<div class="line"><span class="lineno"> 1386</span>            self.heatmaps_ = np.empty_like(ax, dtype=object)</div>
<div class="line"><span class="lineno"> 1387</span> </div>
<div class="line"><span class="lineno"> 1388</span>        <span class="comment"># create contour levels for two-way plots</span></div>
<div class="line"><span class="lineno"> 1389</span>        <span class="keywordflow">if</span> 2 <span class="keywordflow">in</span> pdp_lim:</div>
<div class="line"><span class="lineno"> 1390</span>            Z_level = np.linspace(*pdp_lim[2], num=8)</div>
<div class="line"><span class="lineno"> 1391</span> </div>
<div class="line"><span class="lineno"> 1392</span>        self.deciles_vlines_ = np.empty_like(self.axes_, dtype=object)</div>
<div class="line"><span class="lineno"> 1393</span>        self.deciles_hlines_ = np.empty_like(self.axes_, dtype=object)</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>        <span class="keywordflow">for</span> pd_plot_idx, (axi, feature_idx, cat, pd_result, kind_plot) <span class="keywordflow">in</span> enumerate(</div>
<div class="line"><span class="lineno"> 1396</span>            zip(</div>
<div class="line"><span class="lineno"> 1397</span>                self.axes_.ravel(),</div>
<div class="line"><span class="lineno"> 1398</span>                self.features,</div>
<div class="line"><span class="lineno"> 1399</span>                is_categorical,</div>
<div class="line"><span class="lineno"> 1400</span>                pd_results_,</div>
<div class="line"><span class="lineno"> 1401</span>                kind,</div>
<div class="line"><span class="lineno"> 1402</span>            )</div>
<div class="line"><span class="lineno"> 1403</span>        ):</div>
<div class="line"><span class="lineno"> 1404</span>            avg_preds = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1405</span>            preds = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1406</span>            feature_values = pd_result[<span class="stringliteral">&quot;values&quot;</span>]</div>
<div class="line"><span class="lineno"> 1407</span>            <span class="keywordflow">if</span> kind_plot == <span class="stringliteral">&quot;individual&quot;</span>:</div>
<div class="line"><span class="lineno"> 1408</span>                preds = pd_result.individual</div>
<div class="line"><span class="lineno"> 1409</span>            <span class="keywordflow">elif</span> kind_plot == <span class="stringliteral">&quot;average&quot;</span>:</div>
<div class="line"><span class="lineno"> 1410</span>                avg_preds = pd_result.average</div>
<div class="line"><span class="lineno"> 1411</span>            <span class="keywordflow">else</span>:  <span class="comment"># kind_plot == &#39;both&#39;</span></div>
<div class="line"><span class="lineno"> 1412</span>                avg_preds = pd_result.average</div>
<div class="line"><span class="lineno"> 1413</span>                preds = pd_result.individual</div>
<div class="line"><span class="lineno"> 1414</span> </div>
<div class="line"><span class="lineno"> 1415</span>            <span class="keywordflow">if</span> len(feature_values) == 1:</div>
<div class="line"><span class="lineno"> 1416</span>                <span class="comment"># define the line-style for the current plot</span></div>
<div class="line"><span class="lineno"> 1417</span>                default_line_kws = {</div>
<div class="line"><span class="lineno"> 1418</span>                    <span class="stringliteral">&quot;color&quot;</span>: <span class="stringliteral">&quot;C0&quot;</span>,</div>
<div class="line"><span class="lineno"> 1419</span>                    <span class="stringliteral">&quot;label&quot;</span>: <span class="stringliteral">&quot;average&quot;</span> <span class="keywordflow">if</span> kind_plot == <span class="stringliteral">&quot;both&quot;</span> <span class="keywordflow">else</span> <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 1420</span>                }</div>
<div class="line"><span class="lineno"> 1421</span>                <span class="keywordflow">if</span> kind_plot == <span class="stringliteral">&quot;individual&quot;</span>:</div>
<div class="line"><span class="lineno"> 1422</span>                    default_ice_lines_kws = {<span class="stringliteral">&quot;alpha&quot;</span>: 0.3, <span class="stringliteral">&quot;linewidth&quot;</span>: 0.5}</div>
<div class="line"><span class="lineno"> 1423</span>                    default_pd_lines_kws = {}</div>
<div class="line"><span class="lineno"> 1424</span>                <span class="keywordflow">elif</span> kind_plot == <span class="stringliteral">&quot;both&quot;</span>:</div>
<div class="line"><span class="lineno"> 1425</span>                    <span class="comment"># by default, we need to distinguish the average line from</span></div>
<div class="line"><span class="lineno"> 1426</span>                    <span class="comment"># the individual lines via color and line style</span></div>
<div class="line"><span class="lineno"> 1427</span>                    default_ice_lines_kws = {</div>
<div class="line"><span class="lineno"> 1428</span>                        <span class="stringliteral">&quot;alpha&quot;</span>: 0.3,</div>
<div class="line"><span class="lineno"> 1429</span>                        <span class="stringliteral">&quot;linewidth&quot;</span>: 0.5,</div>
<div class="line"><span class="lineno"> 1430</span>                        <span class="stringliteral">&quot;color&quot;</span>: <span class="stringliteral">&quot;tab:blue&quot;</span>,</div>
<div class="line"><span class="lineno"> 1431</span>                    }</div>
<div class="line"><span class="lineno"> 1432</span>                    default_pd_lines_kws = {</div>
<div class="line"><span class="lineno"> 1433</span>                        <span class="stringliteral">&quot;color&quot;</span>: <span class="stringliteral">&quot;tab:orange&quot;</span>,</div>
<div class="line"><span class="lineno"> 1434</span>                        <span class="stringliteral">&quot;linestyle&quot;</span>: <span class="stringliteral">&quot;--&quot;</span>,</div>
<div class="line"><span class="lineno"> 1435</span>                    }</div>
<div class="line"><span class="lineno"> 1436</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1437</span>                    default_ice_lines_kws = {}</div>
<div class="line"><span class="lineno"> 1438</span>                    default_pd_lines_kws = {}</div>
<div class="line"><span class="lineno"> 1439</span> </div>
<div class="line"><span class="lineno"> 1440</span>                ice_lines_kw = {</div>
<div class="line"><span class="lineno"> 1441</span>                    **default_line_kws,</div>
<div class="line"><span class="lineno"> 1442</span>                    **default_ice_lines_kws,</div>
<div class="line"><span class="lineno"> 1443</span>                    **line_kw,</div>
<div class="line"><span class="lineno"> 1444</span>                    **ice_lines_kw,</div>
<div class="line"><span class="lineno"> 1445</span>                }</div>
<div class="line"><span class="lineno"> 1446</span>                del ice_lines_kw[<span class="stringliteral">&quot;label&quot;</span>]</div>
<div class="line"><span class="lineno"> 1447</span> </div>
<div class="line"><span class="lineno"> 1448</span>                pd_line_kw = {</div>
<div class="line"><span class="lineno"> 1449</span>                    **default_line_kws,</div>
<div class="line"><span class="lineno"> 1450</span>                    **default_pd_lines_kws,</div>
<div class="line"><span class="lineno"> 1451</span>                    **line_kw,</div>
<div class="line"><span class="lineno"> 1452</span>                    **pd_line_kw,</div>
<div class="line"><span class="lineno"> 1453</span>                }</div>
<div class="line"><span class="lineno"> 1454</span> </div>
<div class="line"><span class="lineno"> 1455</span>                default_bar_kws = {<span class="stringliteral">&quot;color&quot;</span>: <span class="stringliteral">&quot;C0&quot;</span>}</div>
<div class="line"><span class="lineno"> 1456</span>                bar_kw = {**default_bar_kws, **bar_kw}</div>
<div class="line"><span class="lineno"> 1457</span> </div>
<div class="line"><span class="lineno"> 1458</span>                default_heatmap_kw = {}</div>
<div class="line"><span class="lineno"> 1459</span>                heatmap_kw = {**default_heatmap_kw, **heatmap_kw}</div>
<div class="line"><span class="lineno"> 1460</span> </div>
<div class="line"><span class="lineno"> 1461</span>                self._plot_one_way_partial_dependence(</div>
<div class="line"><span class="lineno"> 1462</span>                    kind_plot,</div>
<div class="line"><span class="lineno"> 1463</span>                    preds,</div>
<div class="line"><span class="lineno"> 1464</span>                    avg_preds,</div>
<div class="line"><span class="lineno"> 1465</span>                    feature_values[0],</div>
<div class="line"><span class="lineno"> 1466</span>                    feature_idx,</div>
<div class="line"><span class="lineno"> 1467</span>                    n_ice_lines,</div>
<div class="line"><span class="lineno"> 1468</span>                    axi,</div>
<div class="line"><span class="lineno"> 1469</span>                    n_cols,</div>
<div class="line"><span class="lineno"> 1470</span>                    pd_plot_idx,</div>
<div class="line"><span class="lineno"> 1471</span>                    n_lines,</div>
<div class="line"><span class="lineno"> 1472</span>                    ice_lines_kw,</div>
<div class="line"><span class="lineno"> 1473</span>                    pd_line_kw,</div>
<div class="line"><span class="lineno"> 1474</span>                    cat[0],</div>
<div class="line"><span class="lineno"> 1475</span>                    bar_kw,</div>
<div class="line"><span class="lineno"> 1476</span>                    pdp_lim,</div>
<div class="line"><span class="lineno"> 1477</span>                )</div>
<div class="line"><span class="lineno"> 1478</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1479</span>                self._plot_two_way_partial_dependence(</div>
<div class="line"><span class="lineno"> 1480</span>                    avg_preds,</div>
<div class="line"><span class="lineno"> 1481</span>                    feature_values,</div>
<div class="line"><span class="lineno"> 1482</span>                    feature_idx,</div>
<div class="line"><span class="lineno"> 1483</span>                    axi,</div>
<div class="line"><span class="lineno"> 1484</span>                    pd_plot_idx,</div>
<div class="line"><span class="lineno"> 1485</span>                    Z_level,</div>
<div class="line"><span class="lineno"> 1486</span>                    contour_kw,</div>
<div class="line"><span class="lineno"> 1487</span>                    cat[0] <span class="keywordflow">and</span> cat[1],</div>
<div class="line"><span class="lineno"> 1488</span>                    heatmap_kw,</div>
<div class="line"><span class="lineno"> 1489</span>                )</div>
<div class="line"><span class="lineno"> 1490</span> </div>
<div class="line"><span class="lineno"> 1491</span>        <span class="keywordflow">return</span> self</div>
<div class="ttc" id="anamespacematplotlib_1_1gridspec_html"><div class="ttname"><a href="namespacematplotlib_1_1gridspec.html">matplotlib.gridspec</a></div><div class="ttdef"><b>Definition</b> gridspec.py:1</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4e1fa61c9e33723c87d8e46c4090c198" name="a4e1fa61c9e33723c87d8e46c4090c198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e1fa61c9e33723c87d8e46c4090c198">&#9670;&#160;</a></span>axes_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.axes_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1bc15cc07e56ae1d1aa99b33b58aea6e" name="a1bc15cc07e56ae1d1aa99b33b58aea6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc15cc07e56ae1d1aa99b33b58aea6e">&#9670;&#160;</a></span>bars_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.bars_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a45361954b808f95b88de46c06af01c05" name="a45361954b808f95b88de46c06af01c05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45361954b808f95b88de46c06af01c05">&#9670;&#160;</a></span>bounding_ax_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.bounding_ax_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8f7fa61cc9b3b1c0f7b6fa67335da036" name="a8f7fa61cc9b3b1c0f7b6fa67335da036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f7fa61cc9b3b1c0f7b6fa67335da036">&#9670;&#160;</a></span>contours_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.contours_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aabe2a739f382683d2e441232bed19612" name="aabe2a739f382683d2e441232bed19612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabe2a739f382683d2e441232bed19612">&#9670;&#160;</a></span>deciles</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.deciles</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac2deb29b357572fa418a5eea84e01f25" name="ac2deb29b357572fa418a5eea84e01f25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2deb29b357572fa418a5eea84e01f25">&#9670;&#160;</a></span>deciles_hlines_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.deciles_hlines_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad36345457ecd2fa8002c19c761791c5b" name="ad36345457ecd2fa8002c19c761791c5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad36345457ecd2fa8002c19c761791c5b">&#9670;&#160;</a></span>deciles_vlines_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.deciles_vlines_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a16ef93d05a3da907c494b624e15b981d" name="a16ef93d05a3da907c494b624e15b981d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16ef93d05a3da907c494b624e15b981d">&#9670;&#160;</a></span>feature_names</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.feature_names</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aacf7c47283d2520ebf844a46b4be0c26" name="aacf7c47283d2520ebf844a46b4be0c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacf7c47283d2520ebf844a46b4be0c26">&#9670;&#160;</a></span>features</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.features</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ccac90414bf79eba2de75294401a8c8" name="a9ccac90414bf79eba2de75294401a8c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ccac90414bf79eba2de75294401a8c8">&#9670;&#160;</a></span>figure_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.figure_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac190bff0264c678fc885933dfb8cdffc" name="ac190bff0264c678fc885933dfb8cdffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac190bff0264c678fc885933dfb8cdffc">&#9670;&#160;</a></span>heatmaps_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.heatmaps_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a31dc11fc6b8c0e37a0892dcb0e7e69bd" name="a31dc11fc6b8c0e37a0892dcb0e7e69bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31dc11fc6b8c0e37a0892dcb0e7e69bd">&#9670;&#160;</a></span>is_categorical</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.is_categorical</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6e64a8812d97547d3f9d2241140f0c88" name="a6e64a8812d97547d3f9d2241140f0c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e64a8812d97547d3f9d2241140f0c88">&#9670;&#160;</a></span>kind</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.kind</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a44528deb7e0f5afe87726c947d0ae952" name="a44528deb7e0f5afe87726c947d0ae952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44528deb7e0f5afe87726c947d0ae952">&#9670;&#160;</a></span>lines_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.lines_</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8cb8722d8653b2524e4a37324d63145f" name="a8cb8722d8653b2524e4a37324d63145f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cb8722d8653b2524e4a37324d63145f">&#9670;&#160;</a></span>pd_results</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.pd_results</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a360254f5cafa98b13679a90d26654fb6" name="a360254f5cafa98b13679a90d26654fb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a360254f5cafa98b13679a90d26654fb6">&#9670;&#160;</a></span>pdp_lim</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.pdp_lim</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2a68f8d0df914159a50505a6c4da9726" name="a2a68f8d0df914159a50505a6c4da9726"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a68f8d0df914159a50505a6c4da9726">&#9670;&#160;</a></span>random_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.random_state</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab83223e9420e6aa02afc5af2452d2a89" name="ab83223e9420e6aa02afc5af2452d2a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab83223e9420e6aa02afc5af2452d2a89">&#9670;&#160;</a></span>subsample</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.subsample</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4b76474099f1317a51adc230d97438ed" name="a4b76474099f1317a51adc230d97438ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b76474099f1317a51adc230d97438ed">&#9670;&#160;</a></span>target_idx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.inspection._plot.partial_dependence.PartialDependenceDisplay.target_idx</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/rafael/Documents/GitHub/PUC-GCES-PY/Tp-GCS-Rafael-Augusto/venv/lib/python3.9/site-packages/sklearn/inspection/_plot/<a class="el" href="partial__dependence_8py.html">partial_dependence.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
