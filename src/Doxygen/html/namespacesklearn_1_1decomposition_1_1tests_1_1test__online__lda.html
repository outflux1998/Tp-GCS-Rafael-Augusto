<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: sklearn.decomposition.tests.test_online_lda Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesklearn.html">sklearn</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1decomposition.html">decomposition</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html">test_online_lda</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sklearn.decomposition.tests.test_online_lda Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a046896754a21c2a5fdb664edbf533c6a" id="r_a046896754a21c2a5fdb664edbf533c6a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a046896754a21c2a5fdb664edbf533c6a">_build_sparse_mtx</a> ()</td></tr>
<tr class="separator:a046896754a21c2a5fdb664edbf533c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21aff4d9cc180d808614ff50ea80ae2e" id="r_a21aff4d9cc180d808614ff50ea80ae2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a21aff4d9cc180d808614ff50ea80ae2e">test_lda_default_prior_params</a> ()</td></tr>
<tr class="separator:a21aff4d9cc180d808614ff50ea80ae2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0fae6a238c459641a6b5f0067449168" id="r_ad0fae6a238c459641a6b5f0067449168"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#ad0fae6a238c459641a6b5f0067449168">test_lda_fit_batch</a> ()</td></tr>
<tr class="separator:ad0fae6a238c459641a6b5f0067449168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ac918948d7901a9fb9ad5b449960df" id="r_a43ac918948d7901a9fb9ad5b449960df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a43ac918948d7901a9fb9ad5b449960df">test_lda_fit_online</a> ()</td></tr>
<tr class="separator:a43ac918948d7901a9fb9ad5b449960df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af80af85a3bc739deeddec88fa131b4c4" id="r_af80af85a3bc739deeddec88fa131b4c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#af80af85a3bc739deeddec88fa131b4c4">test_lda_partial_fit</a> ()</td></tr>
<tr class="separator:af80af85a3bc739deeddec88fa131b4c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97866316554b23c97bc69b021e1c74f0" id="r_a97866316554b23c97bc69b021e1c74f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a97866316554b23c97bc69b021e1c74f0">test_lda_dense_input</a> ()</td></tr>
<tr class="separator:a97866316554b23c97bc69b021e1c74f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17dd1ff3406ccc9b5e677d0653bc2e16" id="r_a17dd1ff3406ccc9b5e677d0653bc2e16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a17dd1ff3406ccc9b5e677d0653bc2e16">test_lda_transform</a> ()</td></tr>
<tr class="separator:a17dd1ff3406ccc9b5e677d0653bc2e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b937d6c92584b0ead06aeb85f7c0c8" id="r_a17b937d6c92584b0ead06aeb85f7c0c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a17b937d6c92584b0ead06aeb85f7c0c8">test_lda_fit_transform</a> (method)</td></tr>
<tr class="separator:a17b937d6c92584b0ead06aeb85f7c0c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa96676363e39d01a38ec7111d00d94d3" id="r_aa96676363e39d01a38ec7111d00d94d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#aa96676363e39d01a38ec7111d00d94d3">test_lda_negative_input</a> ()</td></tr>
<tr class="separator:aa96676363e39d01a38ec7111d00d94d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33fbbc37d0b9d66f6043e3d2816a0383" id="r_a33fbbc37d0b9d66f6043e3d2816a0383"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a33fbbc37d0b9d66f6043e3d2816a0383">test_lda_no_component_error</a> ()</td></tr>
<tr class="separator:a33fbbc37d0b9d66f6043e3d2816a0383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff2279a22a96d15b93d384c2831cfb57" id="r_aff2279a22a96d15b93d384c2831cfb57"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#aff2279a22a96d15b93d384c2831cfb57">test_lda_multi_jobs</a> (method)</td></tr>
<tr class="separator:aff2279a22a96d15b93d384c2831cfb57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace604bd2371b57ceb3023b5f41883ae1" id="r_ace604bd2371b57ceb3023b5f41883ae1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#ace604bd2371b57ceb3023b5f41883ae1">test_lda_partial_fit_multi_jobs</a> ()</td></tr>
<tr class="separator:ace604bd2371b57ceb3023b5f41883ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad717d3557b483ef6e4518dfc0b253792" id="r_ad717d3557b483ef6e4518dfc0b253792"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#ad717d3557b483ef6e4518dfc0b253792">test_lda_preplexity_mismatch</a> ()</td></tr>
<tr class="separator:ad717d3557b483ef6e4518dfc0b253792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8bec7685fa6f9a03533015bbd99e7b9" id="r_ac8bec7685fa6f9a03533015bbd99e7b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#ac8bec7685fa6f9a03533015bbd99e7b9">test_lda_perplexity</a> (method)</td></tr>
<tr class="separator:ac8bec7685fa6f9a03533015bbd99e7b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2adfd305431c097215e541e8e1899c6" id="r_ac2adfd305431c097215e541e8e1899c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#ac2adfd305431c097215e541e8e1899c6">test_lda_score</a> (method)</td></tr>
<tr class="separator:ac2adfd305431c097215e541e8e1899c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07a645a5e89970a88fa0b66a13696ef8" id="r_a07a645a5e89970a88fa0b66a13696ef8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a07a645a5e89970a88fa0b66a13696ef8">test_perplexity_input_format</a> ()</td></tr>
<tr class="separator:a07a645a5e89970a88fa0b66a13696ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9793c2fb0351bece71b01cca6b7c4e58" id="r_a9793c2fb0351bece71b01cca6b7c4e58"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a9793c2fb0351bece71b01cca6b7c4e58">test_lda_score_perplexity</a> ()</td></tr>
<tr class="separator:a9793c2fb0351bece71b01cca6b7c4e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1546d708b21a412bdc1729a8715a6b8" id="r_ac1546d708b21a412bdc1729a8715a6b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#ac1546d708b21a412bdc1729a8715a6b8">test_lda_fit_perplexity</a> ()</td></tr>
<tr class="separator:ac1546d708b21a412bdc1729a8715a6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f4f6f367ccc3780226464eed874dd1e" id="r_a4f4f6f367ccc3780226464eed874dd1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a4f4f6f367ccc3780226464eed874dd1e">test_lda_empty_docs</a> ()</td></tr>
<tr class="separator:a4f4f6f367ccc3780226464eed874dd1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28d91fca7e165bb0dacf3cecd8106172" id="r_a28d91fca7e165bb0dacf3cecd8106172"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a28d91fca7e165bb0dacf3cecd8106172">test_dirichlet_expectation</a> ()</td></tr>
<tr class="separator:a28d91fca7e165bb0dacf3cecd8106172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df6a19c209e40fc3cc08a52b790c96c" id="r_a5df6a19c209e40fc3cc08a52b790c96c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a5df6a19c209e40fc3cc08a52b790c96c">check_verbosity</a> (verbose, evaluate_every, expected_lines, expected_perplexities)</td></tr>
<tr class="separator:a5df6a19c209e40fc3cc08a52b790c96c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add29addea42933bd7bbcc2e38b799ffa" id="r_add29addea42933bd7bbcc2e38b799ffa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#add29addea42933bd7bbcc2e38b799ffa">test_verbosity</a> (verbose, evaluate_every, expected_lines, expected_perplexities)</td></tr>
<tr class="separator:add29addea42933bd7bbcc2e38b799ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a860d24bd7ae0dd5960dc886968e08889" id="r_a860d24bd7ae0dd5960dc886968e08889"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#a860d24bd7ae0dd5960dc886968e08889">test_lda_feature_names_out</a> ()</td></tr>
<tr class="separator:a860d24bd7ae0dd5960dc886968e08889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af495b8e5e187015a7bda1bfdac5d7a4f" id="r_af495b8e5e187015a7bda1bfdac5d7a4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#af495b8e5e187015a7bda1bfdac5d7a4f">test_lda_dtype_match</a> (learning_method, global_dtype)</td></tr>
<tr class="separator:af495b8e5e187015a7bda1bfdac5d7a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeefa98e86015e46c0828eea9d65fc125" id="r_aeefa98e86015e46c0828eea9d65fc125"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesklearn_1_1decomposition_1_1tests_1_1test__online__lda.html#aeefa98e86015e46c0828eea9d65fc125">test_lda_numerical_consistency</a> (learning_method, global_random_seed)</td></tr>
<tr class="separator:aeefa98e86015e46c0828eea9d65fc125"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a046896754a21c2a5fdb664edbf533c6a" name="a046896754a21c2a5fdb664edbf533c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a046896754a21c2a5fdb664edbf533c6a">&#9670;&#160;</a></span>_build_sparse_mtx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda._build_sparse_mtx </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   26</span><span class="keyword">def </span>_build_sparse_mtx():</div>
<div class="line"><span class="lineno">   27</span>    <span class="comment"># Create 3 topics and each topic has 3 distinct words.</span></div>
<div class="line"><span class="lineno">   28</span>    <span class="comment"># (Each word only belongs to a single topic.)</span></div>
<div class="line"><span class="lineno">   29</span>    n_components = 3</div>
<div class="line"><span class="lineno">   30</span>    block = np.full((3, 3), n_components, dtype=int)</div>
<div class="line"><span class="lineno">   31</span>    blocks = [block] * n_components</div>
<div class="line"><span class="lineno">   32</span>    X = block_diag(*blocks)</div>
<div class="line"><span class="lineno">   33</span>    X = csr_matrix(X)</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordflow">return</span> (n_components, X)</div>
<div class="line"><span class="lineno">   35</span> </div>
<div class="line"><span class="lineno">   36</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5df6a19c209e40fc3cc08a52b790c96c" name="a5df6a19c209e40fc3cc08a52b790c96c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df6a19c209e40fc3cc08a52b790c96c">&#9670;&#160;</a></span>check_verbosity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.check_verbosity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>evaluate_every</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_perplexities</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  380</span><span class="keyword">def </span>check_verbosity(verbose, evaluate_every, expected_lines, expected_perplexities):</div>
<div class="line"><span class="lineno">  381</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  382</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  383</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  384</span>        max_iter=3,</div>
<div class="line"><span class="lineno">  385</span>        learning_method=<span class="stringliteral">&quot;batch&quot;</span>,</div>
<div class="line"><span class="lineno">  386</span>        verbose=verbose,</div>
<div class="line"><span class="lineno">  387</span>        evaluate_every=evaluate_every,</div>
<div class="line"><span class="lineno">  388</span>        random_state=0,</div>
<div class="line"><span class="lineno">  389</span>    )</div>
<div class="line"><span class="lineno">  390</span>    out = StringIO()</div>
<div class="line"><span class="lineno">  391</span>    old_out, sys.stdout = sys.stdout, out</div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  393</span>        lda.fit(X)</div>
<div class="line"><span class="lineno">  394</span>    <span class="keywordflow">finally</span>:</div>
<div class="line"><span class="lineno">  395</span>        sys.stdout = old_out</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    n_lines = out.getvalue().count(<span class="stringliteral">&quot;\n&quot;</span>)</div>
<div class="line"><span class="lineno">  398</span>    n_perplexity = out.getvalue().count(<span class="stringliteral">&quot;perplexity&quot;</span>)</div>
<div class="line"><span class="lineno">  399</span>    <span class="keyword">assert</span> expected_lines == n_lines</div>
<div class="line"><span class="lineno">  400</span>    <span class="keyword">assert</span> expected_perplexities == n_perplexity</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span><span class="preprocessor">@pytest.mark.parametrize</span>(</div>
<div class="line"><span class="lineno">  404</span>    <span class="stringliteral">&quot;verbose,evaluate_every,expected_lines,expected_perplexities&quot;</span>,</div>
<div class="line"><span class="lineno">  405</span>    [</div>
<div class="line"><span class="lineno">  406</span>        (<span class="keyword">False</span>, 1, 0, 0),</div>
<div class="line"><span class="lineno">  407</span>        (<span class="keyword">False</span>, 0, 0, 0),</div>
<div class="line"><span class="lineno">  408</span>        (<span class="keyword">True</span>, 0, 3, 0),</div>
<div class="line"><span class="lineno">  409</span>        (<span class="keyword">True</span>, 1, 3, 3),</div>
<div class="line"><span class="lineno">  410</span>        (<span class="keyword">True</span>, 2, 3, 1),</div>
<div class="line"><span class="lineno">  411</span>    ],</div>
<div class="line"><span class="lineno">  412</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a28d91fca7e165bb0dacf3cecd8106172" name="a28d91fca7e165bb0dacf3cecd8106172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28d91fca7e165bb0dacf3cecd8106172">&#9670;&#160;</a></span>test_dirichlet_expectation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_dirichlet_expectation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test Cython version of Dirichlet expectation calculation.</pre> <div class="fragment"><div class="line"><span class="lineno">  364</span><span class="keyword">def </span>test_dirichlet_expectation():</div>
<div class="line"><span class="lineno">  365</span>    <span class="stringliteral">&quot;&quot;&quot;Test Cython version of Dirichlet expectation calculation.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  366</span>    x = np.logspace(-100, 10, 10000)</div>
<div class="line"><span class="lineno">  367</span>    expectation = np.empty_like(x)</div>
<div class="line"><span class="lineno">  368</span>    _dirichlet_expectation_1d(x, 0, expectation)</div>
<div class="line"><span class="lineno">  369</span>    assert_allclose(expectation, np.exp(psi(x) - psi(np.sum(x))), atol=1e-19)</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    x = x.reshape(100, 100)</div>
<div class="line"><span class="lineno">  372</span>    assert_allclose(</div>
<div class="line"><span class="lineno">  373</span>        _dirichlet_expectation_2d(x),</div>
<div class="line"><span class="lineno">  374</span>        psi(x) - psi(np.sum(x, axis=1)[:, np.newaxis]),</div>
<div class="line"><span class="lineno">  375</span>        rtol=1e-11,</div>
<div class="line"><span class="lineno">  376</span>        atol=3e-9,</div>
<div class="line"><span class="lineno">  377</span>    )</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a21aff4d9cc180d808614ff50ea80ae2e" name="a21aff4d9cc180d808614ff50ea80ae2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21aff4d9cc180d808614ff50ea80ae2e">&#9670;&#160;</a></span>test_lda_default_prior_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_default_prior_params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   37</span><span class="keyword">def </span>test_lda_default_prior_params():</div>
<div class="line"><span class="lineno">   38</span>    <span class="comment"># default prior parameter should be `1 / topics`</span></div>
<div class="line"><span class="lineno">   39</span>    <span class="comment"># and verbose params should not affect result</span></div>
<div class="line"><span class="lineno">   40</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">   41</span>    prior = 1.0 / n_components</div>
<div class="line"><span class="lineno">   42</span>    lda_1 = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">   43</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">   44</span>        doc_topic_prior=prior,</div>
<div class="line"><span class="lineno">   45</span>        topic_word_prior=prior,</div>
<div class="line"><span class="lineno">   46</span>        random_state=0,</div>
<div class="line"><span class="lineno">   47</span>    )</div>
<div class="line"><span class="lineno">   48</span>    lda_2 = LatentDirichletAllocation(n_components=n_components, random_state=0)</div>
<div class="line"><span class="lineno">   49</span>    topic_distr_1 = lda_1.fit_transform(X)</div>
<div class="line"><span class="lineno">   50</span>    topic_distr_2 = lda_2.fit_transform(X)</div>
<div class="line"><span class="lineno">   51</span>    assert_almost_equal(topic_distr_1, topic_distr_2)</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a97866316554b23c97bc69b021e1c74f0" name="a97866316554b23c97bc69b021e1c74f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97866316554b23c97bc69b021e1c74f0">&#9670;&#160;</a></span>test_lda_dense_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_dense_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  113</span><span class="keyword">def </span>test_lda_dense_input():</div>
<div class="line"><span class="lineno">  114</span>    <span class="comment"># Test LDA with dense input.</span></div>
<div class="line"><span class="lineno">  115</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  116</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  117</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  118</span>        n_components=n_components, learning_method=<span class="stringliteral">&quot;batch&quot;</span>, random_state=rng</div>
<div class="line"><span class="lineno">  119</span>    )</div>
<div class="line"><span class="lineno">  120</span>    lda.fit(X.toarray())</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    correct_idx_grps = [(0, 1, 2), (3, 4, 5), (6, 7, 8)]</div>
<div class="line"><span class="lineno">  123</span>    <span class="keywordflow">for</span> component <span class="keywordflow">in</span> lda.components_:</div>
<div class="line"><span class="lineno">  124</span>        <span class="comment"># Find top 3 words in each LDA component</span></div>
<div class="line"><span class="lineno">  125</span>        top_idx = set(component.argsort()[-3:][::-1])</div>
<div class="line"><span class="lineno">  126</span>        <span class="keyword">assert</span> tuple(sorted(top_idx)) <span class="keywordflow">in</span> correct_idx_grps</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af495b8e5e187015a7bda1bfdac5d7a4f" name="af495b8e5e187015a7bda1bfdac5d7a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af495b8e5e187015a7bda1bfdac5d7a4f">&#9670;&#160;</a></span>test_lda_dtype_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_dtype_match </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>learning_method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_dtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check data type preservation of fitted attributes.</pre> <div class="fragment"><div class="line"><span class="lineno">  429</span><span class="keyword">def </span>test_lda_dtype_match(learning_method, global_dtype):</div>
<div class="line"><span class="lineno">  430</span>    <span class="stringliteral">&quot;&quot;&quot;Check data type preservation of fitted attributes.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  431</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  432</span>    X = rng.uniform(size=(20, 10)).astype(global_dtype, copy=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  435</span>        n_components=5, random_state=0, learning_method=learning_method</div>
<div class="line"><span class="lineno">  436</span>    )</div>
<div class="line"><span class="lineno">  437</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">  438</span>    <span class="keyword">assert</span> lda.components_.dtype == global_dtype</div>
<div class="line"><span class="lineno">  439</span>    <span class="keyword">assert</span> lda.exp_dirichlet_component_.dtype == global_dtype</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span><span class="preprocessor">@pytest.mark.parametrize(&quot;learning_method&quot;, (&quot;batch&quot;, &quot;online&quot;)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f4f6f367ccc3780226464eed874dd1e" name="a4f4f6f367ccc3780226464eed874dd1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f4f6f367ccc3780226464eed874dd1e">&#9670;&#160;</a></span>test_lda_empty_docs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_empty_docs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Test LDA on empty document (all-zero rows).</pre> <div class="fragment"><div class="line"><span class="lineno">  354</span><span class="keyword">def </span>test_lda_empty_docs():</div>
<div class="line"><span class="lineno">  355</span>    <span class="stringliteral">&quot;&quot;&quot;Test LDA on empty document (all-zero rows).&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  356</span>    Z = np.zeros((5, 4))</div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordflow">for</span> X <span class="keywordflow">in</span> [Z, csr_matrix(Z)]:</div>
<div class="line"><span class="lineno">  358</span>        lda = LatentDirichletAllocation(max_iter=750).fit(X)</div>
<div class="line"><span class="lineno">  359</span>        assert_almost_equal(</div>
<div class="line"><span class="lineno">  360</span>            lda.components_.sum(axis=0), np.ones(lda.components_.shape[1])</div>
<div class="line"><span class="lineno">  361</span>        )</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a860d24bd7ae0dd5960dc886968e08889" name="a860d24bd7ae0dd5960dc886968e08889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a860d24bd7ae0dd5960dc886968e08889">&#9670;&#160;</a></span>test_lda_feature_names_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_feature_names_out </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check feature names out for LatentDirichletAllocation.</pre> <div class="fragment"><div class="line"><span class="lineno">  417</span><span class="keyword">def </span>test_lda_feature_names_out():</div>
<div class="line"><span class="lineno">  418</span>    <span class="stringliteral">&quot;&quot;&quot;Check feature names out for LatentDirichletAllocation.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  419</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  420</span>    lda = LatentDirichletAllocation(n_components=n_components).fit(X)</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>    names = lda.get_feature_names_out()</div>
<div class="line"><span class="lineno">  423</span>    assert_array_equal(</div>
<div class="line"><span class="lineno">  424</span>        [f<span class="stringliteral">&quot;latentdirichletallocation{i}&quot;</span> <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(n_components)], names</div>
<div class="line"><span class="lineno">  425</span>    )</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span><span class="preprocessor">@pytest.mark.parametrize(&quot;learning_method&quot;, (&quot;batch&quot;, &quot;online&quot;)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0fae6a238c459641a6b5f0067449168" name="ad0fae6a238c459641a6b5f0067449168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0fae6a238c459641a6b5f0067449168">&#9670;&#160;</a></span>test_lda_fit_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_fit_batch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   54</span><span class="keyword">def </span>test_lda_fit_batch():</div>
<div class="line"><span class="lineno">   55</span>    <span class="comment"># Test LDA batch learning_offset (`fit` method with &#39;batch&#39; learning)</span></div>
<div class="line"><span class="lineno">   56</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">   57</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">   58</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">   59</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">   60</span>        evaluate_every=1,</div>
<div class="line"><span class="lineno">   61</span>        learning_method=<span class="stringliteral">&quot;batch&quot;</span>,</div>
<div class="line"><span class="lineno">   62</span>        random_state=rng,</div>
<div class="line"><span class="lineno">   63</span>    )</div>
<div class="line"><span class="lineno">   64</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    correct_idx_grps = [(0, 1, 2), (3, 4, 5), (6, 7, 8)]</div>
<div class="line"><span class="lineno">   67</span>    <span class="keywordflow">for</span> component <span class="keywordflow">in</span> lda.components_:</div>
<div class="line"><span class="lineno">   68</span>        <span class="comment"># Find top 3 words in each LDA component</span></div>
<div class="line"><span class="lineno">   69</span>        top_idx = set(component.argsort()[-3:][::-1])</div>
<div class="line"><span class="lineno">   70</span>        <span class="keyword">assert</span> tuple(sorted(top_idx)) <span class="keywordflow">in</span> correct_idx_grps</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a43ac918948d7901a9fb9ad5b449960df" name="a43ac918948d7901a9fb9ad5b449960df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ac918948d7901a9fb9ad5b449960df">&#9670;&#160;</a></span>test_lda_fit_online()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_fit_online </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   73</span><span class="keyword">def </span>test_lda_fit_online():</div>
<div class="line"><span class="lineno">   74</span>    <span class="comment"># Test LDA online learning (`fit` method with &#39;online&#39; learning)</span></div>
<div class="line"><span class="lineno">   75</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">   76</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">   77</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">   78</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">   79</span>        learning_offset=10.0,</div>
<div class="line"><span class="lineno">   80</span>        evaluate_every=1,</div>
<div class="line"><span class="lineno">   81</span>        learning_method=<span class="stringliteral">&quot;online&quot;</span>,</div>
<div class="line"><span class="lineno">   82</span>        random_state=rng,</div>
<div class="line"><span class="lineno">   83</span>    )</div>
<div class="line"><span class="lineno">   84</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    correct_idx_grps = [(0, 1, 2), (3, 4, 5), (6, 7, 8)]</div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">for</span> component <span class="keywordflow">in</span> lda.components_:</div>
<div class="line"><span class="lineno">   88</span>        <span class="comment"># Find top 3 words in each LDA component</span></div>
<div class="line"><span class="lineno">   89</span>        top_idx = set(component.argsort()[-3:][::-1])</div>
<div class="line"><span class="lineno">   90</span>        <span class="keyword">assert</span> tuple(sorted(top_idx)) <span class="keywordflow">in</span> correct_idx_grps</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1546d708b21a412bdc1729a8715a6b8" name="ac1546d708b21a412bdc1729a8715a6b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1546d708b21a412bdc1729a8715a6b8">&#9670;&#160;</a></span>test_lda_fit_perplexity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_fit_perplexity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  332</span><span class="keyword">def </span>test_lda_fit_perplexity():</div>
<div class="line"><span class="lineno">  333</span>    <span class="comment"># Test that the perplexity computed during fit is consistent with what is</span></div>
<div class="line"><span class="lineno">  334</span>    <span class="comment"># returned by the perplexity method</span></div>
<div class="line"><span class="lineno">  335</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  336</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  337</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  338</span>        max_iter=1,</div>
<div class="line"><span class="lineno">  339</span>        learning_method=<span class="stringliteral">&quot;batch&quot;</span>,</div>
<div class="line"><span class="lineno">  340</span>        random_state=0,</div>
<div class="line"><span class="lineno">  341</span>        evaluate_every=1,</div>
<div class="line"><span class="lineno">  342</span>    )</div>
<div class="line"><span class="lineno">  343</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    <span class="comment"># Perplexity computed at end of fit method</span></div>
<div class="line"><span class="lineno">  346</span>    perplexity1 = lda.bound_</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <span class="comment"># Result of perplexity method on the train set</span></div>
<div class="line"><span class="lineno">  349</span>    perplexity2 = lda.perplexity(X)</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    assert_almost_equal(perplexity1, perplexity2)</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a17b937d6c92584b0ead06aeb85f7c0c8" name="a17b937d6c92584b0ead06aeb85f7c0c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17b937d6c92584b0ead06aeb85f7c0c8">&#9670;&#160;</a></span>test_lda_fit_transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_fit_transform </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  142</span><span class="keyword">def </span>test_lda_fit_transform(method):</div>
<div class="line"><span class="lineno">  143</span>    <span class="comment"># Test LDA fit_transform &amp; transform</span></div>
<div class="line"><span class="lineno">  144</span>    <span class="comment"># fit_transform and transform result should be the same</span></div>
<div class="line"><span class="lineno">  145</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  146</span>    X = rng.randint(10, size=(50, 20))</div>
<div class="line"><span class="lineno">  147</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  148</span>        n_components=5, learning_method=method, random_state=rng</div>
<div class="line"><span class="lineno">  149</span>    )</div>
<div class="line"><span class="lineno">  150</span>    X_fit = lda.fit_transform(X)</div>
<div class="line"><span class="lineno">  151</span>    X_trans = lda.transform(X)</div>
<div class="line"><span class="lineno">  152</span>    assert_array_almost_equal(X_fit, X_trans, 4)</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aff2279a22a96d15b93d384c2831cfb57" name="aff2279a22a96d15b93d384c2831cfb57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff2279a22a96d15b93d384c2831cfb57">&#9670;&#160;</a></span>test_lda_multi_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_multi_jobs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  180</span><span class="keyword">def </span>test_lda_multi_jobs(method):</div>
<div class="line"><span class="lineno">  181</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  182</span>    <span class="comment"># Test LDA batch training with multi CPU</span></div>
<div class="line"><span class="lineno">  183</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  184</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  185</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  186</span>        n_jobs=2,</div>
<div class="line"><span class="lineno">  187</span>        learning_method=method,</div>
<div class="line"><span class="lineno">  188</span>        evaluate_every=1,</div>
<div class="line"><span class="lineno">  189</span>        random_state=rng,</div>
<div class="line"><span class="lineno">  190</span>    )</div>
<div class="line"><span class="lineno">  191</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    correct_idx_grps = [(0, 1, 2), (3, 4, 5), (6, 7, 8)]</div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">for</span> c <span class="keywordflow">in</span> lda.components_:</div>
<div class="line"><span class="lineno">  195</span>        top_idx = set(c.argsort()[-3:][::-1])</div>
<div class="line"><span class="lineno">  196</span>        <span class="keyword">assert</span> tuple(sorted(top_idx)) <span class="keywordflow">in</span> correct_idx_grps</div>
<div class="line"><span class="lineno">  197</span> </div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span><span class="preprocessor">@if_safe_multiprocessing_with_blas</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa96676363e39d01a38ec7111d00d94d3" name="aa96676363e39d01a38ec7111d00d94d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa96676363e39d01a38ec7111d00d94d3">&#9670;&#160;</a></span>test_lda_negative_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_negative_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  155</span><span class="keyword">def </span>test_lda_negative_input():</div>
<div class="line"><span class="lineno">  156</span>    <span class="comment"># test pass dense matrix with sparse negative input.</span></div>
<div class="line"><span class="lineno">  157</span>    X = np.full((5, 10), -1.0)</div>
<div class="line"><span class="lineno">  158</span>    lda = LatentDirichletAllocation()</div>
<div class="line"><span class="lineno">  159</span>    regex = <span class="stringliteral">r&quot;^Negative values in data passed&quot;</span></div>
<div class="line"><span class="lineno">  160</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=regex):</div>
<div class="line"><span class="lineno">  161</span>        lda.fit(X)</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a33fbbc37d0b9d66f6043e3d2816a0383" name="a33fbbc37d0b9d66f6043e3d2816a0383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33fbbc37d0b9d66f6043e3d2816a0383">&#9670;&#160;</a></span>test_lda_no_component_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_no_component_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  164</span><span class="keyword">def </span>test_lda_no_component_error():</div>
<div class="line"><span class="lineno">  165</span>    <span class="comment"># test `perplexity` before `fit`</span></div>
<div class="line"><span class="lineno">  166</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  167</span>    X = rng.randint(4, size=(20, 10))</div>
<div class="line"><span class="lineno">  168</span>    lda = LatentDirichletAllocation()</div>
<div class="line"><span class="lineno">  169</span>    regex = (</div>
<div class="line"><span class="lineno">  170</span>        <span class="stringliteral">&quot;This LatentDirichletAllocation instance is not fitted yet. &quot;</span></div>
<div class="line"><span class="lineno">  171</span>        <span class="stringliteral">&quot;Call &#39;fit&#39; with appropriate arguments before using this &quot;</span></div>
<div class="line"><span class="lineno">  172</span>        <span class="stringliteral">&quot;estimator.&quot;</span></div>
<div class="line"><span class="lineno">  173</span>    )</div>
<div class="line"><span class="lineno">  174</span>    <span class="keyword">with</span> pytest.raises(NotFittedError, match=regex):</div>
<div class="line"><span class="lineno">  175</span>        lda.perplexity(X)</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span><span class="preprocessor">@if_safe_multiprocessing_with_blas</span></div>
<div class="line"><span class="lineno">  179</span><span class="preprocessor">@pytest.mark.parametrize(&quot;method&quot;, (&quot;online&quot;, &quot;batch&quot;)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeefa98e86015e46c0828eea9d65fc125" name="aeefa98e86015e46c0828eea9d65fc125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeefa98e86015e46c0828eea9d65fc125">&#9670;&#160;</a></span>test_lda_numerical_consistency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_numerical_consistency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>learning_method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>global_random_seed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check numerical consistency between np.float32 and np.float64.</pre> <div class="fragment"><div class="line"><span class="lineno">  443</span><span class="keyword">def </span>test_lda_numerical_consistency(learning_method, global_random_seed):</div>
<div class="line"><span class="lineno">  444</span>    <span class="stringliteral">&quot;&quot;&quot;Check numerical consistency between np.float32 and np.float64.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  445</span>    rng = np.random.RandomState(global_random_seed)</div>
<div class="line"><span class="lineno">  446</span>    X64 = rng.uniform(size=(20, 10))</div>
<div class="line"><span class="lineno">  447</span>    X32 = X64.astype(np.float32)</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>    lda_64 = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  450</span>        n_components=5, random_state=global_random_seed, learning_method=learning_method</div>
<div class="line"><span class="lineno">  451</span>    ).fit(X64)</div>
<div class="line"><span class="lineno">  452</span>    lda_32 = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  453</span>        n_components=5, random_state=global_random_seed, learning_method=learning_method</div>
<div class="line"><span class="lineno">  454</span>    ).fit(X32)</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>    assert_allclose(lda_32.components_, lda_64.components_)</div>
<div class="line"><span class="lineno">  457</span>    assert_allclose(lda_32.transform(X32), lda_64.transform(X64))</div>
</div><!-- fragment -->
</div>
</div>
<a id="af80af85a3bc739deeddec88fa131b4c4" name="af80af85a3bc739deeddec88fa131b4c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af80af85a3bc739deeddec88fa131b4c4">&#9670;&#160;</a></span>test_lda_partial_fit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_partial_fit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   93</span><span class="keyword">def </span>test_lda_partial_fit():</div>
<div class="line"><span class="lineno">   94</span>    <span class="comment"># Test LDA online learning (`partial_fit` method)</span></div>
<div class="line"><span class="lineno">   95</span>    <span class="comment"># (same as test_lda_batch)</span></div>
<div class="line"><span class="lineno">   96</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">   97</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">   98</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">   99</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  100</span>        learning_offset=10.0,</div>
<div class="line"><span class="lineno">  101</span>        total_samples=100,</div>
<div class="line"><span class="lineno">  102</span>        random_state=rng,</div>
<div class="line"><span class="lineno">  103</span>    )</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(3):</div>
<div class="line"><span class="lineno">  105</span>        lda.partial_fit(X)</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    correct_idx_grps = [(0, 1, 2), (3, 4, 5), (6, 7, 8)]</div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">for</span> c <span class="keywordflow">in</span> lda.components_:</div>
<div class="line"><span class="lineno">  109</span>        top_idx = set(c.argsort()[-3:][::-1])</div>
<div class="line"><span class="lineno">  110</span>        <span class="keyword">assert</span> tuple(sorted(top_idx)) <span class="keywordflow">in</span> correct_idx_grps</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ace604bd2371b57ceb3023b5f41883ae1" name="ace604bd2371b57ceb3023b5f41883ae1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace604bd2371b57ceb3023b5f41883ae1">&#9670;&#160;</a></span>test_lda_partial_fit_multi_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_partial_fit_multi_jobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  200</span><span class="keyword">def </span>test_lda_partial_fit_multi_jobs():</div>
<div class="line"><span class="lineno">  201</span>    <span class="comment"># Test LDA online training with multi CPU</span></div>
<div class="line"><span class="lineno">  202</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  203</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  204</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  205</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  206</span>        n_jobs=2,</div>
<div class="line"><span class="lineno">  207</span>        learning_offset=5.0,</div>
<div class="line"><span class="lineno">  208</span>        total_samples=30,</div>
<div class="line"><span class="lineno">  209</span>        random_state=rng,</div>
<div class="line"><span class="lineno">  210</span>    )</div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2):</div>
<div class="line"><span class="lineno">  212</span>        lda.partial_fit(X)</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>    correct_idx_grps = [(0, 1, 2), (3, 4, 5), (6, 7, 8)]</div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">for</span> c <span class="keywordflow">in</span> lda.components_:</div>
<div class="line"><span class="lineno">  216</span>        top_idx = set(c.argsort()[-3:][::-1])</div>
<div class="line"><span class="lineno">  217</span>        <span class="keyword">assert</span> tuple(sorted(top_idx)) <span class="keywordflow">in</span> correct_idx_grps</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8bec7685fa6f9a03533015bbd99e7b9" name="ac8bec7685fa6f9a03533015bbd99e7b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8bec7685fa6f9a03533015bbd99e7b9">&#9670;&#160;</a></span>test_lda_perplexity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_perplexity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  244</span><span class="keyword">def </span>test_lda_perplexity(method):</div>
<div class="line"><span class="lineno">  245</span>    <span class="comment"># Test LDA perplexity for batch training</span></div>
<div class="line"><span class="lineno">  246</span>    <span class="comment"># perplexity should be lower after each iteration</span></div>
<div class="line"><span class="lineno">  247</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  248</span>    lda_1 = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  249</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  250</span>        max_iter=1,</div>
<div class="line"><span class="lineno">  251</span>        learning_method=method,</div>
<div class="line"><span class="lineno">  252</span>        total_samples=100,</div>
<div class="line"><span class="lineno">  253</span>        random_state=0,</div>
<div class="line"><span class="lineno">  254</span>    )</div>
<div class="line"><span class="lineno">  255</span>    lda_2 = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  256</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  257</span>        max_iter=10,</div>
<div class="line"><span class="lineno">  258</span>        learning_method=method,</div>
<div class="line"><span class="lineno">  259</span>        total_samples=100,</div>
<div class="line"><span class="lineno">  260</span>        random_state=0,</div>
<div class="line"><span class="lineno">  261</span>    )</div>
<div class="line"><span class="lineno">  262</span>    lda_1.fit(X)</div>
<div class="line"><span class="lineno">  263</span>    perp_1 = lda_1.perplexity(X, sub_sampling=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>    lda_2.fit(X)</div>
<div class="line"><span class="lineno">  266</span>    perp_2 = lda_2.perplexity(X, sub_sampling=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  267</span>    <span class="keyword">assert</span> perp_1 &gt;= perp_2</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>    perp_1_subsampling = lda_1.perplexity(X, sub_sampling=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  270</span>    perp_2_subsampling = lda_2.perplexity(X, sub_sampling=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  271</span>    <span class="keyword">assert</span> perp_1_subsampling &gt;= perp_2_subsampling</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span><span class="preprocessor">@pytest.mark.parametrize(&quot;method&quot;, (&quot;online&quot;, &quot;batch&quot;)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad717d3557b483ef6e4518dfc0b253792" name="ad717d3557b483ef6e4518dfc0b253792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad717d3557b483ef6e4518dfc0b253792">&#9670;&#160;</a></span>test_lda_preplexity_mismatch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_preplexity_mismatch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  220</span><span class="keyword">def </span>test_lda_preplexity_mismatch():</div>
<div class="line"><span class="lineno">  221</span>    <span class="comment"># test dimension mismatch in `perplexity` method</span></div>
<div class="line"><span class="lineno">  222</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  223</span>    n_components = rng.randint(3, 6)</div>
<div class="line"><span class="lineno">  224</span>    n_samples = rng.randint(6, 10)</div>
<div class="line"><span class="lineno">  225</span>    X = np.random.randint(4, size=(n_samples, 10))</div>
<div class="line"><span class="lineno">  226</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  227</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  228</span>        learning_offset=5.0,</div>
<div class="line"><span class="lineno">  229</span>        total_samples=20,</div>
<div class="line"><span class="lineno">  230</span>        random_state=rng,</div>
<div class="line"><span class="lineno">  231</span>    )</div>
<div class="line"><span class="lineno">  232</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">  233</span>    <span class="comment"># invalid samples</span></div>
<div class="line"><span class="lineno">  234</span>    invalid_n_samples = rng.randint(4, size=(n_samples + 1, n_components))</div>
<div class="line"><span class="lineno">  235</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">r&quot;Number of samples&quot;</span>):</div>
<div class="line"><span class="lineno">  236</span>        lda._perplexity_precomp_distr(X, invalid_n_samples)</div>
<div class="line"><span class="lineno">  237</span>    <span class="comment"># invalid topic number</span></div>
<div class="line"><span class="lineno">  238</span>    invalid_n_components = rng.randint(4, size=(n_samples, n_components + 1))</div>
<div class="line"><span class="lineno">  239</span>    <span class="keyword">with</span> pytest.raises(ValueError, match=<span class="stringliteral">r&quot;Number of topics&quot;</span>):</div>
<div class="line"><span class="lineno">  240</span>        lda._perplexity_precomp_distr(X, invalid_n_components)</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span><span class="preprocessor">@pytest.mark.parametrize(&quot;method&quot;, (&quot;online&quot;, &quot;batch&quot;)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2adfd305431c097215e541e8e1899c6" name="ac2adfd305431c097215e541e8e1899c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2adfd305431c097215e541e8e1899c6">&#9670;&#160;</a></span>test_lda_score()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_score </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  275</span><span class="keyword">def </span>test_lda_score(method):</div>
<div class="line"><span class="lineno">  276</span>    <span class="comment"># Test LDA score for batch training</span></div>
<div class="line"><span class="lineno">  277</span>    <span class="comment"># score should be higher after each iteration</span></div>
<div class="line"><span class="lineno">  278</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  279</span>    lda_1 = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  280</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  281</span>        max_iter=1,</div>
<div class="line"><span class="lineno">  282</span>        learning_method=method,</div>
<div class="line"><span class="lineno">  283</span>        total_samples=100,</div>
<div class="line"><span class="lineno">  284</span>        random_state=0,</div>
<div class="line"><span class="lineno">  285</span>    )</div>
<div class="line"><span class="lineno">  286</span>    lda_2 = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  287</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  288</span>        max_iter=10,</div>
<div class="line"><span class="lineno">  289</span>        learning_method=method,</div>
<div class="line"><span class="lineno">  290</span>        total_samples=100,</div>
<div class="line"><span class="lineno">  291</span>        random_state=0,</div>
<div class="line"><span class="lineno">  292</span>    )</div>
<div class="line"><span class="lineno">  293</span>    lda_1.fit_transform(X)</div>
<div class="line"><span class="lineno">  294</span>    score_1 = lda_1.score(X)</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>    lda_2.fit_transform(X)</div>
<div class="line"><span class="lineno">  297</span>    score_2 = lda_2.score(X)</div>
<div class="line"><span class="lineno">  298</span>    <span class="keyword">assert</span> score_2 &gt;= score_1</div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a9793c2fb0351bece71b01cca6b7c4e58" name="a9793c2fb0351bece71b01cca6b7c4e58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9793c2fb0351bece71b01cca6b7c4e58">&#9670;&#160;</a></span>test_lda_score_perplexity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_score_perplexity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  318</span><span class="keyword">def </span>test_lda_score_perplexity():</div>
<div class="line"><span class="lineno">  319</span>    <span class="comment"># Test the relationship between LDA score and perplexity</span></div>
<div class="line"><span class="lineno">  320</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  321</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  322</span>        n_components=n_components, max_iter=10, random_state=0</div>
<div class="line"><span class="lineno">  323</span>    )</div>
<div class="line"><span class="lineno">  324</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">  325</span>    perplexity_1 = lda.perplexity(X, sub_sampling=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    score = lda.score(X)</div>
<div class="line"><span class="lineno">  328</span>    perplexity_2 = np.exp(-1.0 * (score / np.sum(X.data)))</div>
<div class="line"><span class="lineno">  329</span>    assert_almost_equal(perplexity_1, perplexity_2)</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a17dd1ff3406ccc9b5e677d0653bc2e16" name="a17dd1ff3406ccc9b5e677d0653bc2e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17dd1ff3406ccc9b5e677d0653bc2e16">&#9670;&#160;</a></span>test_lda_transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_lda_transform </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  129</span><span class="keyword">def </span>test_lda_transform():</div>
<div class="line"><span class="lineno">  130</span>    <span class="comment"># Test LDA transform.</span></div>
<div class="line"><span class="lineno">  131</span>    <span class="comment"># Transform result cannot be negative and should be normalized</span></div>
<div class="line"><span class="lineno">  132</span>    rng = np.random.RandomState(0)</div>
<div class="line"><span class="lineno">  133</span>    X = rng.randint(5, size=(20, 10))</div>
<div class="line"><span class="lineno">  134</span>    n_components = 3</div>
<div class="line"><span class="lineno">  135</span>    lda = LatentDirichletAllocation(n_components=n_components, random_state=rng)</div>
<div class="line"><span class="lineno">  136</span>    X_trans = lda.fit_transform(X)</div>
<div class="line"><span class="lineno">  137</span>    <span class="keyword">assert</span> (X_trans &gt; 0.0).any()</div>
<div class="line"><span class="lineno">  138</span>    assert_array_almost_equal(np.sum(X_trans, axis=1), np.ones(X_trans.shape[0]))</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span><span class="preprocessor">@pytest.mark.parametrize(&quot;method&quot;, (&quot;online&quot;, &quot;batch&quot;)</span>)</div>
</div><!-- fragment -->
</div>
</div>
<a id="a07a645a5e89970a88fa0b66a13696ef8" name="a07a645a5e89970a88fa0b66a13696ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07a645a5e89970a88fa0b66a13696ef8">&#9670;&#160;</a></span>test_perplexity_input_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_perplexity_input_format </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  301</span><span class="keyword">def </span>test_perplexity_input_format():</div>
<div class="line"><span class="lineno">  302</span>    <span class="comment"># Test LDA perplexity for sparse and dense input</span></div>
<div class="line"><span class="lineno">  303</span>    <span class="comment"># score should be the same for both dense and sparse input</span></div>
<div class="line"><span class="lineno">  304</span>    n_components, X = _build_sparse_mtx()</div>
<div class="line"><span class="lineno">  305</span>    lda = LatentDirichletAllocation(</div>
<div class="line"><span class="lineno">  306</span>        n_components=n_components,</div>
<div class="line"><span class="lineno">  307</span>        max_iter=1,</div>
<div class="line"><span class="lineno">  308</span>        learning_method=<span class="stringliteral">&quot;batch&quot;</span>,</div>
<div class="line"><span class="lineno">  309</span>        total_samples=100,</div>
<div class="line"><span class="lineno">  310</span>        random_state=0,</div>
<div class="line"><span class="lineno">  311</span>    )</div>
<div class="line"><span class="lineno">  312</span>    lda.fit(X)</div>
<div class="line"><span class="lineno">  313</span>    perp_1 = lda.perplexity(X)</div>
<div class="line"><span class="lineno">  314</span>    perp_2 = lda.perplexity(X.toarray())</div>
<div class="line"><span class="lineno">  315</span>    assert_almost_equal(perp_1, perp_2)</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="add29addea42933bd7bbcc2e38b799ffa" name="add29addea42933bd7bbcc2e38b799ffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add29addea42933bd7bbcc2e38b799ffa">&#9670;&#160;</a></span>test_verbosity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sklearn.decomposition.tests.test_online_lda.test_verbosity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>evaluate_every</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expected_perplexities</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  413</span><span class="keyword">def </span>test_verbosity(verbose, evaluate_every, expected_lines, expected_perplexities):</div>
<div class="line"><span class="lineno">  414</span>    check_verbosity(verbose, evaluate_every, expected_lines, expected_perplexities)</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
