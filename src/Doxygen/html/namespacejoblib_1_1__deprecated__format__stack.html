<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: joblib._deprecated_format_stack Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejoblib.html">joblib</a></li><li class="navelem"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html">_deprecated_format_stack</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">joblib._deprecated_format_stack Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5133e4843ca0dc195d28a78843800a2c" id="r_a5133e4843ca0dc195d28a78843800a2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a5133e4843ca0dc195d28a78843800a2c">safe_repr</a> (value)</td></tr>
<tr class="memdesc:a5133e4843ca0dc195d28a78843800a2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">some internal-use functions  <br /></td></tr>
<tr class="separator:a5133e4843ca0dc195d28a78843800a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b4076ec2db6c5fb2ea4d8315c84e8f" id="r_a76b4076ec2db6c5fb2ea4d8315c84e8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a76b4076ec2db6c5fb2ea4d8315c84e8f">eq_repr</a> (value, repr=<a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a5133e4843ca0dc195d28a78843800a2c">safe_repr</a>)</td></tr>
<tr class="separator:a76b4076ec2db6c5fb2ea4d8315c84e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a49f0394b344d35e44e5112d53dedc2" id="r_a0a49f0394b344d35e44e5112d53dedc2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a0a49f0394b344d35e44e5112d53dedc2">uniq_stable</a> (elems)</td></tr>
<tr class="separator:a0a49f0394b344d35e44e5112d53dedc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad158b5f1c3c213948ed1a2d76f3f4b8a" id="r_ad158b5f1c3c213948ed1a2d76f3f4b8a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#ad158b5f1c3c213948ed1a2d76f3f4b8a">fix_frame_records_filenames</a> (records)</td></tr>
<tr class="separator:ad158b5f1c3c213948ed1a2d76f3f4b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec3b15a115f4e0ead6dc3f841a113ae5" id="r_aec3b15a115f4e0ead6dc3f841a113ae5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#aec3b15a115f4e0ead6dc3f841a113ae5">_fixed_getframes</a> (etb, context=1, tb_offset=0)</td></tr>
<tr class="separator:aec3b15a115f4e0ead6dc3f841a113ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00ea04b87cd6c918139a4c34be4f9c1" id="r_aa00ea04b87cd6c918139a4c34be4f9c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#aa00ea04b87cd6c918139a4c34be4f9c1">_format_traceback_lines</a> (lnum, index, lines, lvals=None)</td></tr>
<tr class="separator:aa00ea04b87cd6c918139a4c34be4f9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7e9f4e783ab97b53381f8f57f904d7" id="r_aba7e9f4e783ab97b53381f8f57f904d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#aba7e9f4e783ab97b53381f8f57f904d7">format_records</a> (records)</td></tr>
<tr class="separator:aba7e9f4e783ab97b53381f8f57f904d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dfffd22945b4a45b90c4234f3942853" id="r_a8dfffd22945b4a45b90c4234f3942853"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a8dfffd22945b4a45b90c4234f3942853">format_exc</a> (etype, evalue, etb, context=5, tb_offset=0)</td></tr>
<tr class="separator:a8dfffd22945b4a45b90c4234f3942853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32825311c39584bb6a1091597452f2d6" id="r_a32825311c39584bb6a1091597452f2d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a32825311c39584bb6a1091597452f2d6">format_outer_frames</a> (context=5, stack_start=None, stack_end=None, ignore_ipython=True)</td></tr>
<tr class="separator:a32825311c39584bb6a1091597452f2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a75f69996b736cf6dbb3fb7e762390aea" id="r_a75f69996b736cf6dbb3fb7e762390aea"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a75f69996b736cf6dbb3fb7e762390aea">INDENT</a> = ' ' * 8</td></tr>
<tr class="separator:a75f69996b736cf6dbb3fb7e762390aea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Represent an exception with a lot of information.

Provides 2 useful functions:

format_exc: format an exception into a complete traceback, with full
            debugging instruction.

format_outer_frames: format the current position in the stack call.

Adapted from IPython's VerboseTB.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="aec3b15a115f4e0ead6dc3f841a113ae5" name="aec3b15a115f4e0ead6dc3f841a113ae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec3b15a115f4e0ead6dc3f841a113ae5">&#9670;&#160;</a></span>_fixed_getframes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack._fixed_getframes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>etb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>context</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tb_offset</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  115</span><span class="keyword">def </span>_fixed_getframes(etb, context=1, tb_offset=0):</div>
<div class="line"><span class="lineno">  116</span>    LNUM_POS, LINES_POS, INDEX_POS = 2, 4, 5</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    records = fix_frame_records_filenames(inspect.getinnerframes(etb, context))</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    <span class="comment"># If the error is at the console, don&#39;t build any context, since it would</span></div>
<div class="line"><span class="lineno">  121</span>    <span class="comment"># otherwise produce 5 blank lines printed out (there is no file at the</span></div>
<div class="line"><span class="lineno">  122</span>    <span class="comment"># console)</span></div>
<div class="line"><span class="lineno">  123</span>    rec_check = records[tb_offset:]</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  125</span>        rname = rec_check[0][1]</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> rname == <span class="stringliteral">&#39;&lt;ipython console&gt;&#39;</span> <span class="keywordflow">or</span> rname.endswith(<span class="stringliteral">&#39;&lt;string&gt;&#39;</span>):</div>
<div class="line"><span class="lineno">  127</span>            <span class="keywordflow">return</span> rec_check</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">except</span> IndexError:</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    aux = traceback.extract_tb(etb)</div>
<div class="line"><span class="lineno">  132</span>    <span class="keyword">assert</span> len(records) == len(aux)</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">for</span> i, (file, lnum, _, _) <span class="keywordflow">in</span> enumerate(aux):</div>
<div class="line"><span class="lineno">  134</span>        maybe_start = lnum - 1 - context // 2</div>
<div class="line"><span class="lineno">  135</span>        start = max(maybe_start, 0)</div>
<div class="line"><span class="lineno">  136</span>        end = start + context</div>
<div class="line"><span class="lineno">  137</span>        lines = linecache.getlines(file)[start:end]</div>
<div class="line"><span class="lineno">  138</span>        buf = list(records[i])</div>
<div class="line"><span class="lineno">  139</span>        buf[LNUM_POS] = lnum</div>
<div class="line"><span class="lineno">  140</span>        buf[INDEX_POS] = lnum - 1 - start</div>
<div class="line"><span class="lineno">  141</span>        buf[LINES_POS] = lines</div>
<div class="line"><span class="lineno">  142</span>        records[i] = tuple(buf)</div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">return</span> records[tb_offset:]</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa00ea04b87cd6c918139a4c34be4f9c1" name="aa00ea04b87cd6c918139a4c34be4f9c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00ea04b87cd6c918139a4c34be4f9c1">&#9670;&#160;</a></span>_format_traceback_lines()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack._format_traceback_lines </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lvals</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  146</span><span class="keyword">def </span>_format_traceback_lines(lnum, index, lines, lvals=None):</div>
<div class="line"><span class="lineno">  147</span>    numbers_width = 7</div>
<div class="line"><span class="lineno">  148</span>    res = []</div>
<div class="line"><span class="lineno">  149</span>    i = lnum - index</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">for</span> line <span class="keywordflow">in</span> lines:</div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">if</span> i == lnum:</div>
<div class="line"><span class="lineno">  153</span>            <span class="comment"># This is the line with the error</span></div>
<div class="line"><span class="lineno">  154</span>            pad = numbers_width - len(str(i))</div>
<div class="line"><span class="lineno">  155</span>            <span class="keywordflow">if</span> pad &gt;= 3:</div>
<div class="line"><span class="lineno">  156</span>                marker = <span class="stringliteral">&#39;-&#39;</span> * (pad - 3) + <span class="stringliteral">&#39;-&gt; &#39;</span></div>
<div class="line"><span class="lineno">  157</span>            <span class="keywordflow">elif</span> pad == 2:</div>
<div class="line"><span class="lineno">  158</span>                marker = <span class="stringliteral">&#39;&gt; &#39;</span></div>
<div class="line"><span class="lineno">  159</span>            <span class="keywordflow">elif</span> pad == 1:</div>
<div class="line"><span class="lineno">  160</span>                marker = <span class="stringliteral">&#39;&gt;&#39;</span></div>
<div class="line"><span class="lineno">  161</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  162</span>                marker = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><span class="lineno">  163</span>            num = marker + str(i)</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  165</span>            num = <span class="stringliteral">&#39;%*s&#39;</span> % (numbers_width, i)</div>
<div class="line"><span class="lineno">  166</span>        line = <span class="stringliteral">&#39;%s %s&#39;</span> % (num, line)</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>        res.append(line)</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">if</span> lvals <span class="keywordflow">and</span> i == lnum:</div>
<div class="line"><span class="lineno">  170</span>            res.append(lvals + <span class="stringliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  171</span>        i = i + 1</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">return</span> res</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a76b4076ec2db6c5fb2ea4d8315c84e8f" name="a76b4076ec2db6c5fb2ea4d8315c84e8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76b4076ec2db6c5fb2ea4d8315c84e8f">&#9670;&#160;</a></span>eq_repr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack.eq_repr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>repr</em> = <code><a class="el" href="namespacejoblib_1_1__deprecated__format__stack.html#a5133e4843ca0dc195d28a78843800a2c">safe_repr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   67</span><span class="keyword">def </span>eq_repr(value, repr=safe_repr):</div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">return</span> <span class="stringliteral">&#39;=%s&#39;</span> % repr(value)</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad158b5f1c3c213948ed1a2d76f3f4b8a" name="ad158b5f1c3c213948ed1a2d76f3f4b8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad158b5f1c3c213948ed1a2d76f3f4b8a">&#9670;&#160;</a></span>fix_frame_records_filenames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack.fix_frame_records_filenames </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>records</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Try to fix the filenames in each record from inspect.getinnerframes().

Particularly, modules loaded from within zip files have useless filenames
attached to their code object, and inspect.getinnerframes() just uses it.
</pre> <div class="fragment"><div class="line"><span class="lineno">   94</span><span class="keyword">def </span>fix_frame_records_filenames(records):</div>
<div class="line"><span class="lineno">   95</span>    <span class="stringliteral">&quot;&quot;&quot;Try to fix the filenames in each record from inspect.getinnerframes().</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral">    Particularly, modules loaded from within zip files have useless filenames</span></div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">    attached to their code object, and inspect.getinnerframes() just uses it.</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  100</span>    fixed_records = []</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">for</span> frame, filename, line_no, func_name, lines, index <span class="keywordflow">in</span> records:</div>
<div class="line"><span class="lineno">  102</span>        <span class="comment"># Look inside the frame&#39;s globals dictionary for __file__, which should</span></div>
<div class="line"><span class="lineno">  103</span>        <span class="comment"># be better.</span></div>
<div class="line"><span class="lineno">  104</span>        better_fn = frame.f_globals.get(<span class="stringliteral">&#39;__file__&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> isinstance(better_fn, str):</div>
<div class="line"><span class="lineno">  106</span>            <span class="comment"># Check the type just in case someone did something weird with</span></div>
<div class="line"><span class="lineno">  107</span>            <span class="comment"># __file__. It might also be None if the error occurred during</span></div>
<div class="line"><span class="lineno">  108</span>            <span class="comment"># import.</span></div>
<div class="line"><span class="lineno">  109</span>            filename = better_fn</div>
<div class="line"><span class="lineno">  110</span>        fixed_records.append((frame, filename, line_no, func_name, lines,</div>
<div class="line"><span class="lineno">  111</span>                              index))</div>
<div class="line"><span class="lineno">  112</span>    <span class="keywordflow">return</span> fixed_records</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8dfffd22945b4a45b90c4234f3942853" name="a8dfffd22945b4a45b90c4234f3942853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dfffd22945b4a45b90c4234f3942853">&#9670;&#160;</a></span>format_exc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack.format_exc </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>etype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>evalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>etb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>context</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tb_offset</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment"> Return a nice text document describing the traceback.

    Parameters
    -----------
    etype, evalue, etb: as returned by sys.exc_info
    context: number of lines of the source file to plot
    tb_offset: the number of stack frame not to use (0 = use all)</pre> <div class="fragment"><div class="line"><span class="lineno">  322</span><span class="keyword">def </span>format_exc(etype, evalue, etb, context=5, tb_offset=0):</div>
<div class="line"><span class="lineno">  323</span>    <span class="stringliteral">&quot;&quot;&quot; Return a nice text document describing the traceback.</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">        Parameters</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral">        -----------</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral">        etype, evalue, etb: as returned by sys.exc_info</span></div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">        context: number of lines of the source file to plot</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">        tb_offset: the number of stack frame not to use (0 = use all)</span></div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  331</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  332</span>    <span class="comment"># some locals</span></div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  334</span>        etype = etype.__name__</div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><span class="lineno">  336</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    <span class="comment"># Header with the exception type, python version, and date</span></div>
<div class="line"><span class="lineno">  339</span>    pyver = <span class="stringliteral">&#39;Python &#39;</span> + sys.version.split()[0] + <span class="stringliteral">&#39;: &#39;</span> + sys.executable</div>
<div class="line"><span class="lineno">  340</span>    date = time.ctime(time.time())</div>
<div class="line"><span class="lineno">  341</span>    pid = <span class="stringliteral">&#39;PID: %i&#39;</span> % os.getpid()</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>    head = <span class="stringliteral">&#39;%s%s%s\n%s%s%s&#39;</span> % (</div>
<div class="line"><span class="lineno">  344</span>        etype, <span class="stringliteral">&#39; &#39;</span> * (75 - len(str(etype)) - len(date)),</div>
<div class="line"><span class="lineno">  345</span>        date, pid, <span class="stringliteral">&#39; &#39;</span> * (75 - len(str(pid)) - len(pyver)),</div>
<div class="line"><span class="lineno">  346</span>        pyver)</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    <span class="comment"># Drop topmost frames if requested</span></div>
<div class="line"><span class="lineno">  349</span>    records = _fixed_getframes(etb, context, tb_offset)</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <span class="comment"># Get (safely) a string form of the exception info</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  353</span>        etype_str, evalue_str = map(str, (etype, evalue))</div>
<div class="line"><span class="lineno">  354</span>    <span class="keywordflow">except</span> BaseException:</div>
<div class="line"><span class="lineno">  355</span>        <span class="comment"># User exception is improperly defined.</span></div>
<div class="line"><span class="lineno">  356</span>        etype, evalue = str, sys.exc_info()[:2]</div>
<div class="line"><span class="lineno">  357</span>        etype_str, evalue_str = map(str, (etype, evalue))</div>
<div class="line"><span class="lineno">  358</span>    <span class="comment"># ... and format it</span></div>
<div class="line"><span class="lineno">  359</span>    exception = [<span class="stringliteral">&#39;%s: %s&#39;</span> % (etype_str, evalue_str)]</div>
<div class="line"><span class="lineno">  360</span>    frames = format_records(records)</div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s\n%s\n%s&#39;</span> % (head, <span class="stringliteral">&#39;\n&#39;</span>.join(frames), <span class="stringliteral">&#39;&#39;</span>.join(exception[0]))</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a32825311c39584bb6a1091597452f2d6" name="a32825311c39584bb6a1091597452f2d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32825311c39584bb6a1091597452f2d6">&#9670;&#160;</a></span>format_outer_frames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack.format_outer_frames </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>context</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stack_start</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stack_end</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ignore_ipython</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  366</span>                        ignore_ipython=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno">  367</span>    LNUM_POS, LINES_POS, INDEX_POS = 2, 4, 5</div>
<div class="line"><span class="lineno">  368</span>    records = inspect.getouterframes(inspect.currentframe())</div>
<div class="line"><span class="lineno">  369</span>    output = list()</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordflow">for</span> i, (frame, filename, line_no, func_name, lines, index) \</div>
<div class="line"><span class="lineno">  372</span>                                                <span class="keywordflow">in</span> enumerate(records):</div>
<div class="line"><span class="lineno">  373</span>        <span class="comment"># Look inside the frame&#39;s globals dictionary for __file__, which should</span></div>
<div class="line"><span class="lineno">  374</span>        <span class="comment"># be better.</span></div>
<div class="line"><span class="lineno">  375</span>        better_fn = frame.f_globals.get(<span class="stringliteral">&#39;__file__&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  376</span>        <span class="keywordflow">if</span> isinstance(better_fn, str):</div>
<div class="line"><span class="lineno">  377</span>            <span class="comment"># Check the type just in case someone did something weird with</span></div>
<div class="line"><span class="lineno">  378</span>            <span class="comment"># __file__. It might also be None if the error occurred during</span></div>
<div class="line"><span class="lineno">  379</span>            <span class="comment"># import.</span></div>
<div class="line"><span class="lineno">  380</span>            filename = better_fn</div>
<div class="line"><span class="lineno">  381</span>            <span class="keywordflow">if</span> filename.endswith(<span class="stringliteral">&#39;.pyc&#39;</span>):</div>
<div class="line"><span class="lineno">  382</span>                filename = filename[:-4] + <span class="stringliteral">&#39;.py&#39;</span></div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordflow">if</span> ignore_ipython:</div>
<div class="line"><span class="lineno">  384</span>            <span class="comment"># Hack to avoid printing the internals of IPython</span></div>
<div class="line"><span class="lineno">  385</span>            <span class="keywordflow">if</span> (os.path.basename(filename) <span class="keywordflow">in</span> (<span class="stringliteral">&#39;iplib.py&#39;</span>, <span class="stringliteral">&#39;py3compat.py&#39;</span>)</div>
<div class="line"><span class="lineno">  386</span>                        <span class="keywordflow">and</span> func_name <span class="keywordflow">in</span> (<span class="stringliteral">&#39;execfile&#39;</span>, <span class="stringliteral">&#39;safe_execfile&#39;</span>, <span class="stringliteral">&#39;runcode&#39;</span>)):</div>
<div class="line"><span class="lineno">  387</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  388</span>        maybe_start = line_no - 1 - context // 2</div>
<div class="line"><span class="lineno">  389</span>        start = max(maybe_start, 0)</div>
<div class="line"><span class="lineno">  390</span>        end = start + context</div>
<div class="line"><span class="lineno">  391</span>        lines = linecache.getlines(filename)[start:end]</div>
<div class="line"><span class="lineno">  392</span>        buf = list(records[i])</div>
<div class="line"><span class="lineno">  393</span>        buf[LNUM_POS] = line_no</div>
<div class="line"><span class="lineno">  394</span>        buf[INDEX_POS] = line_no - 1 - start</div>
<div class="line"><span class="lineno">  395</span>        buf[LINES_POS] = lines</div>
<div class="line"><span class="lineno">  396</span>        output.append(tuple(buf))</div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordflow">return</span> <span class="stringliteral">&#39;\n&#39;</span>.join(format_records(output[stack_end:stack_start:-1]))</div>
</div><!-- fragment -->
</div>
</div>
<a id="aba7e9f4e783ab97b53381f8f57f904d7" name="aba7e9f4e783ab97b53381f8f57f904d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba7e9f4e783ab97b53381f8f57f904d7">&#9670;&#160;</a></span>format_records()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack.format_records </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>records</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  175</span><span class="keyword">def </span>format_records(records):   <span class="comment"># , print_globals=False):</span></div>
<div class="line"><span class="lineno">  176</span>    <span class="comment"># Loop over all records printing context and info</span></div>
<div class="line"><span class="lineno">  177</span>    frames = []</div>
<div class="line"><span class="lineno">  178</span>    abspath = os.path.abspath</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordflow">for</span> frame, file, lnum, func, lines, index <span class="keywordflow">in</span> records:</div>
<div class="line"><span class="lineno">  180</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  181</span>            file = file <span class="keywordflow">and</span> abspath(file) <span class="keywordflow">or</span> <span class="stringliteral">&#39;?&#39;</span></div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">except</span> OSError:</div>
<div class="line"><span class="lineno">  183</span>            <span class="comment"># if file is &#39;&lt;console&gt;&#39; or something not in the filesystem,</span></div>
<div class="line"><span class="lineno">  184</span>            <span class="comment"># the abspath call will throw an OSError.  Just ignore it and</span></div>
<div class="line"><span class="lineno">  185</span>            <span class="comment"># keep the original file string.</span></div>
<div class="line"><span class="lineno">  186</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span> file.endswith(<span class="stringliteral">&#39;.pyc&#39;</span>):</div>
<div class="line"><span class="lineno">  189</span>            file = file[:-4] + <span class="stringliteral">&#39;.py&#39;</span></div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>        link = file</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>        args, varargs, varkw, locals = inspect.getargvalues(frame)</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">if</span> func == <span class="stringliteral">&#39;?&#39;</span>:</div>
<div class="line"><span class="lineno">  196</span>            call = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  198</span>            <span class="comment"># Decide whether to include variable details or not</span></div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  200</span>                call = <span class="stringliteral">&#39;in %s%s&#39;</span> % (func, inspect.formatargvalues(args,</div>
<div class="line"><span class="lineno">  201</span>                                            varargs, varkw, locals,</div>
<div class="line"><span class="lineno">  202</span>                                            formatvalue=eq_repr))</div>
<div class="line"><span class="lineno">  203</span>            <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">  204</span>                <span class="comment"># Very odd crash from inspect.formatargvalues().  The</span></div>
<div class="line"><span class="lineno">  205</span>                <span class="comment"># scenario under which it appeared was a call to</span></div>
<div class="line"><span class="lineno">  206</span>                <span class="comment"># view(array,scale) in NumTut.view.view(), where scale had</span></div>
<div class="line"><span class="lineno">  207</span>                <span class="comment"># been defined as a scalar (it should be a tuple). Somehow</span></div>
<div class="line"><span class="lineno">  208</span>                <span class="comment"># inspect messes up resolving the argument list of view()</span></div>
<div class="line"><span class="lineno">  209</span>                <span class="comment"># and barfs out. At some point I should dig into this one</span></div>
<div class="line"><span class="lineno">  210</span>                <span class="comment"># and file a bug report about it.</span></div>
<div class="line"><span class="lineno">  211</span>                print(<span class="stringliteral">&quot;\nJoblib&#39;s exception reporting continues...\n&quot;</span>)</div>
<div class="line"><span class="lineno">  212</span>                call = <span class="stringliteral">&#39;in %s(***failed resolving arguments***)&#39;</span> % func</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>        <span class="comment"># Initialize a list of names on the current line, which the</span></div>
<div class="line"><span class="lineno">  215</span>        <span class="comment"># tokenizer below will populate.</span></div>
<div class="line"><span class="lineno">  216</span>        names = []</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>        <span class="keyword">def </span>tokeneater(token_type, token, start, end, line):</div>
<div class="line"><span class="lineno">  219</span>            <span class="stringliteral">&quot;&quot;&quot;Stateful tokeneater which builds dotted names.</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral">            The list of names it appends to (from the enclosing scope) can</span></div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">            contain repeated composite names.  This is unavoidable, since</span></div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral">            there is no way to disambiguate partial dotted structures until</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">            the full list is known.  The caller is responsible for pruning</span></div>
<div class="line"><span class="lineno">  225</span><span class="stringliteral">            the final list of duplicates before using it.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>            <span class="comment"># build composite names</span></div>
<div class="line"><span class="lineno">  228</span>            <span class="keywordflow">if</span> token == <span class="stringliteral">&#39;.&#39;</span>:</div>
<div class="line"><span class="lineno">  229</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  230</span>                    names[-1] += <span class="stringliteral">&#39;.&#39;</span></div>
<div class="line"><span class="lineno">  231</span>                    <span class="comment"># store state so the next token is added for x.y.z names</span></div>
<div class="line"><span class="lineno">  232</span>                    tokeneater.name_cont = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  233</span>                    <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  234</span>                <span class="keywordflow">except</span> IndexError:</div>
<div class="line"><span class="lineno">  235</span>                    <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">if</span> token_type == tokenize.NAME <span class="keywordflow">and</span> token <span class="keywordflow">not</span> <span class="keywordflow">in</span> keyword.kwlist:</div>
<div class="line"><span class="lineno">  237</span>                <span class="keywordflow">if</span> tokeneater.name_cont:</div>
<div class="line"><span class="lineno">  238</span>                    <span class="comment"># Dotted names</span></div>
<div class="line"><span class="lineno">  239</span>                    names[-1] += token</div>
<div class="line"><span class="lineno">  240</span>                    tokeneater.name_cont = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  241</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  242</span>                    <span class="comment"># Regular new names.  We append everything, the caller</span></div>
<div class="line"><span class="lineno">  243</span>                    <span class="comment"># will be responsible for pruning the list later.  It&#39;s</span></div>
<div class="line"><span class="lineno">  244</span>                    <span class="comment"># very tricky to try to prune as we go, b/c composite</span></div>
<div class="line"><span class="lineno">  245</span>                    <span class="comment"># names can fool us.  The pruning at the end is easy</span></div>
<div class="line"><span class="lineno">  246</span>                    <span class="comment"># to do (or the caller can print a list with repeated</span></div>
<div class="line"><span class="lineno">  247</span>                    <span class="comment"># names if so desired.</span></div>
<div class="line"><span class="lineno">  248</span>                    names.append(token)</div>
<div class="line"><span class="lineno">  249</span>            <span class="keywordflow">elif</span> token_type == tokenize.NEWLINE:</div>
<div class="line"><span class="lineno">  250</span>                <span class="keywordflow">raise</span> IndexError</div>
<div class="line"><span class="lineno">  251</span>        <span class="comment"># we need to store a bit of state in the tokenizer to build</span></div>
<div class="line"><span class="lineno">  252</span>        <span class="comment"># dotted names</span></div>
<div class="line"><span class="lineno">  253</span>        tokeneater.name_cont = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>        <span class="keyword">def </span>linereader(file=file, lnum=[lnum], getline=linecache.getline):</div>
<div class="line"><span class="lineno">  256</span>            line = getline(file, lnum[0])</div>
<div class="line"><span class="lineno">  257</span>            lnum[0] += 1</div>
<div class="line"><span class="lineno">  258</span>            <span class="keywordflow">return</span> line</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>        <span class="comment"># Build the list of names on this line of code where the exception</span></div>
<div class="line"><span class="lineno">  261</span>        <span class="comment"># occurred.</span></div>
<div class="line"><span class="lineno">  262</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  263</span>            <span class="comment"># This builds the names list in-place by capturing it from the</span></div>
<div class="line"><span class="lineno">  264</span>            <span class="comment"># enclosing scope.</span></div>
<div class="line"><span class="lineno">  265</span>            <span class="keywordflow">for</span> token <span class="keywordflow">in</span> tokenize.generate_tokens(linereader):</div>
<div class="line"><span class="lineno">  266</span>                tokeneater(*token)</div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">except</span> (IndexError, UnicodeDecodeError, SyntaxError):</div>
<div class="line"><span class="lineno">  268</span>            <span class="comment"># signals exit of tokenizer</span></div>
<div class="line"><span class="lineno">  269</span>            <span class="comment"># SyntaxError can happen when trying to tokenize</span></div>
<div class="line"><span class="lineno">  270</span>            <span class="comment"># a compiled (e.g. .so or .pyd) extension</span></div>
<div class="line"><span class="lineno">  271</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  272</span>        <span class="keywordflow">except</span> tokenize.TokenError <span class="keyword">as</span> msg:</div>
<div class="line"><span class="lineno">  273</span>            _m = (<span class="stringliteral">&quot;An unexpected error occurred while tokenizing input file %s\n&quot;</span></div>
<div class="line"><span class="lineno">  274</span>                  <span class="stringliteral">&quot;The following traceback may be corrupted or invalid\n&quot;</span></div>
<div class="line"><span class="lineno">  275</span>                  <span class="stringliteral">&quot;The error message is: %s\n&quot;</span> % (file, msg))</div>
<div class="line"><span class="lineno">  276</span>            print(_m)</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>        <span class="comment"># prune names list of duplicates, but keep the right order</span></div>
<div class="line"><span class="lineno">  279</span>        unique_names = uniq_stable(names)</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>        <span class="comment"># Start loop over vars</span></div>
<div class="line"><span class="lineno">  282</span>        lvals = []</div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordflow">for</span> name_full <span class="keywordflow">in</span> unique_names:</div>
<div class="line"><span class="lineno">  284</span>            name_base = name_full.split(<span class="stringliteral">&#39;.&#39;</span>, 1)[0]</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">if</span> name_base <span class="keywordflow">in</span> frame.f_code.co_varnames:</div>
<div class="line"><span class="lineno">  286</span>                <span class="keywordflow">if</span> name_base <span class="keywordflow">in</span> locals.keys():</div>
<div class="line"><span class="lineno">  287</span>                    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  288</span>                        value = safe_repr(eval(name_full, locals))</div>
<div class="line"><span class="lineno">  289</span>                    <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">  290</span>                        value = <span class="stringliteral">&quot;undefined&quot;</span></div>
<div class="line"><span class="lineno">  291</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  292</span>                    value = <span class="stringliteral">&quot;undefined&quot;</span></div>
<div class="line"><span class="lineno">  293</span>                name = name_full</div>
<div class="line"><span class="lineno">  294</span>                lvals.append(<span class="stringliteral">&#39;%s = %s&#39;</span> % (name, value))</div>
<div class="line"><span class="lineno">  295</span>            <span class="comment">#elif print_globals:</span></div>
<div class="line"><span class="lineno">  296</span>            <span class="comment">#    if frame.f_globals.has_key(name_base):</span></div>
<div class="line"><span class="lineno">  297</span>            <span class="comment">#        try:</span></div>
<div class="line"><span class="lineno">  298</span>            <span class="comment">#            value = safe_repr(eval(name_full,frame.f_globals))</span></div>
<div class="line"><span class="lineno">  299</span>            <span class="comment">#        except:</span></div>
<div class="line"><span class="lineno">  300</span>            <span class="comment">#            value = &quot;undefined&quot;</span></div>
<div class="line"><span class="lineno">  301</span>            <span class="comment">#    else:</span></div>
<div class="line"><span class="lineno">  302</span>            <span class="comment">#        value = &quot;undefined&quot;</span></div>
<div class="line"><span class="lineno">  303</span>            <span class="comment">#    name = &#39;global %s&#39; % name_full</span></div>
<div class="line"><span class="lineno">  304</span>            <span class="comment">#    lvals.append(&#39;%s = %s&#39; % (name,value))</span></div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">if</span> lvals:</div>
<div class="line"><span class="lineno">  306</span>            lvals = <span class="stringliteral">&#39;%s%s&#39;</span> % (INDENT, (<span class="stringliteral">&#39;\n%s&#39;</span> % INDENT).join(lvals))</div>
<div class="line"><span class="lineno">  307</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  308</span>            lvals = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>        level = <span class="stringliteral">&#39;%s\n%s %s\n&#39;</span> % (75 * <span class="stringliteral">&#39;.&#39;</span>, link, call)</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>        <span class="keywordflow">if</span> index <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  313</span>            frames.append(level)</div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  315</span>            frames.append(<span class="stringliteral">&#39;%s%s&#39;</span> % (level, <span class="stringliteral">&#39;&#39;</span>.join(</div>
<div class="line"><span class="lineno">  316</span>                _format_traceback_lines(lnum, index, lines, lvals))))</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordflow">return</span> frames</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5133e4843ca0dc195d28a78843800a2c" name="a5133e4843ca0dc195d28a78843800a2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5133e4843ca0dc195d28a78843800a2c">&#9670;&#160;</a></span>safe_repr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack.safe_repr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>some internal-use functions </p>
<pre class="fragment">Hopefully pretty robust repr equivalent.</pre> <div class="fragment"><div class="line"><span class="lineno">   38</span><span class="keyword">def </span>safe_repr(value):</div>
<div class="line"><span class="lineno">   39</span>    <span class="stringliteral">&quot;&quot;&quot;Hopefully pretty robust repr equivalent.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   40</span>    <span class="comment"># this is pretty horrible but should always return *something*</span></div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   42</span>        <span class="keywordflow">return</span> pydoc.text.repr(value)</div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">   46</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   47</span>            <span class="keywordflow">return</span> repr(value)</div>
<div class="line"><span class="lineno">   48</span>        <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line"><span class="lineno">   49</span>            <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">   51</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   52</span>                <span class="comment"># all still in an except block so we catch</span></div>
<div class="line"><span class="lineno">   53</span>                <span class="comment"># getattr raising</span></div>
<div class="line"><span class="lineno">   54</span>                name = getattr(value, <span class="stringliteral">&#39;__name__&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">   55</span>                <span class="keywordflow">if</span> name:</div>
<div class="line"><span class="lineno">   56</span>                    <span class="comment"># ick, recursion</span></div>
<div class="line"><span class="lineno">   57</span>                    <span class="keywordflow">return</span> safe_repr(name)</div>
<div class="line"><span class="lineno">   58</span>                klass = getattr(value, <span class="stringliteral">&#39;__class__&#39;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">   59</span>                <span class="keywordflow">if</span> klass:</div>
<div class="line"><span class="lineno">   60</span>                    <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s instance&#39;</span> % safe_repr(klass)</div>
<div class="line"><span class="lineno">   61</span>            <span class="keywordflow">except</span> KeyboardInterrupt:</div>
<div class="line"><span class="lineno">   62</span>                <span class="keywordflow">raise</span></div>
<div class="line"><span class="lineno">   63</span>            <span class="keywordflow">except</span>:</div>
<div class="line"><span class="lineno">   64</span>                <span class="keywordflow">return</span> <span class="stringliteral">&#39;UNRECOVERABLE REPR FAILURE&#39;</span></div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a49f0394b344d35e44e5112d53dedc2" name="a0a49f0394b344d35e44e5112d53dedc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a49f0394b344d35e44e5112d53dedc2">&#9670;&#160;</a></span>uniq_stable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">joblib._deprecated_format_stack.uniq_stable </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>elems</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">uniq_stable(elems) -&gt; list

Return from an iterable, a list of all the unique elements in the input,
but maintaining the order in which they first appear.

A naive solution to this problem which just makes a dictionary with the
elements as keys fails to respect the stability condition, since
dictionaries are unsorted by nature.

Note: All elements in the input must be hashable.
</pre> <div class="fragment"><div class="line"><span class="lineno">   72</span><span class="keyword">def </span>uniq_stable(elems):</div>
<div class="line"><span class="lineno">   73</span>    <span class="stringliteral">&quot;&quot;&quot;uniq_stable(elems) -&gt; list</span></div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">    Return from an iterable, a list of all the unique elements in the input,</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    but maintaining the order in which they first appear.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    A naive solution to this problem which just makes a dictionary with the</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    elements as keys fails to respect the stability condition, since</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">    dictionaries are unsorted by nature.</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">    Note: All elements in the input must be hashable.</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   84</span>    unique = []</div>
<div class="line"><span class="lineno">   85</span>    unique_set = set()</div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">for</span> nn <span class="keywordflow">in</span> elems:</div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">if</span> nn <span class="keywordflow">not</span> <span class="keywordflow">in</span> unique_set:</div>
<div class="line"><span class="lineno">   88</span>            unique.append(nn)</div>
<div class="line"><span class="lineno">   89</span>            unique_set.add(nn)</div>
<div class="line"><span class="lineno">   90</span>    <span class="keywordflow">return</span> unique</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a75f69996b736cf6dbb3fb7e762390aea" name="a75f69996b736cf6dbb3fb7e762390aea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75f69996b736cf6dbb3fb7e762390aea">&#9670;&#160;</a></span>INDENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">str joblib._deprecated_format_stack.INDENT = ' ' * 8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
