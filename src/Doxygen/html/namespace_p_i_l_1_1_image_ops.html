<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: PIL.ImageOps Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_p_i_l.html">PIL</a></li><li class="navelem"><a class="el" href="namespace_p_i_l_1_1_image_ops.html">ImageOps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">PIL.ImageOps Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9a18bcbbd1737c02df6999ed66b12498" id="r_a9a18bcbbd1737c02df6999ed66b12498"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a9a18bcbbd1737c02df6999ed66b12498">_border</a> (border)</td></tr>
<tr class="separator:a9a18bcbbd1737c02df6999ed66b12498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ebd3765ed801c4ac1dbe753f39a0ab6" id="r_a1ebd3765ed801c4ac1dbe753f39a0ab6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a1ebd3765ed801c4ac1dbe753f39a0ab6">_color</a> (color, mode)</td></tr>
<tr class="separator:a1ebd3765ed801c4ac1dbe753f39a0ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c485f255a336e6a86d86192f364378" id="r_ab0c485f255a336e6a86d86192f364378"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#ab0c485f255a336e6a86d86192f364378">_lut</a> (image, lut)</td></tr>
<tr class="separator:ab0c485f255a336e6a86d86192f364378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647d94495d982f854482012f2b68c288" id="r_a647d94495d982f854482012f2b68c288"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a647d94495d982f854482012f2b68c288">autocontrast</a> (image, cutoff=0, ignore=None, mask=None, preserve_tone=False)</td></tr>
<tr class="separator:a647d94495d982f854482012f2b68c288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f694d09922a120d41049365f2425991" id="r_a7f694d09922a120d41049365f2425991"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a7f694d09922a120d41049365f2425991">colorize</a> (image, black, white, mid=None, blackpoint=0, whitepoint=255, midpoint=127)</td></tr>
<tr class="separator:a7f694d09922a120d41049365f2425991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9efb5aa788c8ff317904b470759dad3" id="r_ae9efb5aa788c8ff317904b470759dad3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#ae9efb5aa788c8ff317904b470759dad3">contain</a> (image, size, method=<a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a>)</td></tr>
<tr class="separator:ae9efb5aa788c8ff317904b470759dad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3786de381807322b9c93308d3c70b01" id="r_ac3786de381807322b9c93308d3c70b01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#ac3786de381807322b9c93308d3c70b01">pad</a> (image, size, method=<a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a>, color=None, centering=(0.5, 0.5))</td></tr>
<tr class="separator:ac3786de381807322b9c93308d3c70b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec78e26ed6094213b5c850164a166c43" id="r_aec78e26ed6094213b5c850164a166c43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#aec78e26ed6094213b5c850164a166c43">crop</a> (image, border=0)</td></tr>
<tr class="separator:aec78e26ed6094213b5c850164a166c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1b04a19bbb72508f26fe1e11b8114d" id="r_a1a1b04a19bbb72508f26fe1e11b8114d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a1a1b04a19bbb72508f26fe1e11b8114d">scale</a> (image, factor, resample=<a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a>)</td></tr>
<tr class="separator:a1a1b04a19bbb72508f26fe1e11b8114d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af17f1dd3a8ea64a0c76b8413697b823b" id="r_af17f1dd3a8ea64a0c76b8413697b823b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#af17f1dd3a8ea64a0c76b8413697b823b">deform</a> (image, deformer, resample=<a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a94f7233fb4cb9dfa21b656c23df14784">Image.Resampling.BILINEAR</a>)</td></tr>
<tr class="separator:af17f1dd3a8ea64a0c76b8413697b823b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5a4f6bbe1ccdee671408502d672b17" id="r_a0e5a4f6bbe1ccdee671408502d672b17"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a0e5a4f6bbe1ccdee671408502d672b17">equalize</a> (image, mask=None)</td></tr>
<tr class="separator:a0e5a4f6bbe1ccdee671408502d672b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1271131b0c8ba3458ceeaf79cfa6101" id="r_ad1271131b0c8ba3458ceeaf79cfa6101"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#ad1271131b0c8ba3458ceeaf79cfa6101">expand</a> (image, border=0, fill=0)</td></tr>
<tr class="separator:ad1271131b0c8ba3458ceeaf79cfa6101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e3d2e9aa76ddb4f95cf595e3c0cf57" id="r_a71e3d2e9aa76ddb4f95cf595e3c0cf57"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a71e3d2e9aa76ddb4f95cf595e3c0cf57">fit</a> (image, size, method=<a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a>, bleed=0.0, centering=(0.5, 0.5))</td></tr>
<tr class="separator:a71e3d2e9aa76ddb4f95cf595e3c0cf57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ae124296a40a3f78546abf5d2009d68" id="r_a4ae124296a40a3f78546abf5d2009d68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a4ae124296a40a3f78546abf5d2009d68">flip</a> (image)</td></tr>
<tr class="separator:a4ae124296a40a3f78546abf5d2009d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de978b8c315e7794019f4e5c827b11e" id="r_a7de978b8c315e7794019f4e5c827b11e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a7de978b8c315e7794019f4e5c827b11e">grayscale</a> (image)</td></tr>
<tr class="separator:a7de978b8c315e7794019f4e5c827b11e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7aea13cadcf7263d6140e60ac7daa99" id="r_ac7aea13cadcf7263d6140e60ac7daa99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#ac7aea13cadcf7263d6140e60ac7daa99">invert</a> (image)</td></tr>
<tr class="separator:ac7aea13cadcf7263d6140e60ac7daa99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03bcb5c3b5e955c85a616741200694e9" id="r_a03bcb5c3b5e955c85a616741200694e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#a03bcb5c3b5e955c85a616741200694e9">mirror</a> (image)</td></tr>
<tr class="separator:a03bcb5c3b5e955c85a616741200694e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad442aaa8a6456dec939e40d43e2b3acc" id="r_ad442aaa8a6456dec939e40d43e2b3acc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#ad442aaa8a6456dec939e40d43e2b3acc">posterize</a> (image, bits)</td></tr>
<tr class="separator:ad442aaa8a6456dec939e40d43e2b3acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad8f74d53ef3a480d763c3276e048a2e" id="r_aad8f74d53ef3a480d763c3276e048a2e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#aad8f74d53ef3a480d763c3276e048a2e">solarize</a> (image, threshold=128)</td></tr>
<tr class="separator:aad8f74d53ef3a480d763c3276e048a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8664837f9f28f340c0cfca2e65ca2fa" id="r_ac8664837f9f28f340c0cfca2e65ca2fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_image_ops.html#ac8664837f9f28f340c0cfca2e65ca2fa">exif_transpose</a> (image)</td></tr>
<tr class="separator:ac8664837f9f28f340c0cfca2e65ca2fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9a18bcbbd1737c02df6999ed66b12498" name="a9a18bcbbd1737c02df6999ed66b12498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a18bcbbd1737c02df6999ed66b12498">&#9670;&#160;</a></span>_border()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps._border </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>border</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   30</span><span class="keyword">def </span>_border(border):</div>
<div class="line"><span class="lineno">   31</span>    <span class="keywordflow">if</span> isinstance(border, tuple):</div>
<div class="line"><span class="lineno">   32</span>        <span class="keywordflow">if</span> len(border) == 2:</div>
<div class="line"><span class="lineno">   33</span>            left, top = right, bottom = border</div>
<div class="line"><span class="lineno">   34</span>        <span class="keywordflow">elif</span> len(border) == 4:</div>
<div class="line"><span class="lineno">   35</span>            left, top, right, bottom = border</div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   37</span>        left = top = right = bottom = border</div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">return</span> left, top, right, bottom</div>
<div class="line"><span class="lineno">   39</span> </div>
<div class="line"><span class="lineno">   40</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ebd3765ed801c4ac1dbe753f39a0ab6" name="a1ebd3765ed801c4ac1dbe753f39a0ab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ebd3765ed801c4ac1dbe753f39a0ab6">&#9670;&#160;</a></span>_color()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps._color </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   41</span><span class="keyword">def </span>_color(color, mode):</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">if</span> isinstance(color, str):</div>
<div class="line"><span class="lineno">   43</span>        <span class="keyword">from</span> . <span class="keyword">import</span> ImageColor</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>        color = ImageColor.getcolor(color, mode)</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">return</span> color</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0c485f255a336e6a86d86192f364378" name="ab0c485f255a336e6a86d86192f364378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0c485f255a336e6a86d86192f364378">&#9670;&#160;</a></span>_lut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps._lut </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   49</span><span class="keyword">def </span>_lut(image, lut):</div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">if</span> image.mode == <span class="stringliteral">&quot;P&quot;</span>:</div>
<div class="line"><span class="lineno">   51</span>        <span class="comment"># FIXME: apply to lookup table, not image data</span></div>
<div class="line"><span class="lineno">   52</span>        msg = <span class="stringliteral">&quot;mode P support coming soon&quot;</span></div>
<div class="line"><span class="lineno">   53</span>        <span class="keywordflow">raise</span> NotImplementedError(msg)</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">elif</span> image.mode <span class="keywordflow">in</span> (<span class="stringliteral">&quot;L&quot;</span>, <span class="stringliteral">&quot;RGB&quot;</span>):</div>
<div class="line"><span class="lineno">   55</span>        <span class="keywordflow">if</span> image.mode == <span class="stringliteral">&quot;RGB&quot;</span> <span class="keywordflow">and</span> len(lut) == 256:</div>
<div class="line"><span class="lineno">   56</span>            lut = lut + lut + lut</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">return</span> image.point(lut)</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   59</span>        msg = <span class="stringliteral">&quot;not supported for this image mode&quot;</span></div>
<div class="line"><span class="lineno">   60</span>        <span class="keywordflow">raise</span> OSError(msg)</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span><span class="comment">#</span></div>
<div class="line"><span class="lineno">   64</span><span class="comment"># actions</span></div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a647d94495d982f854482012f2b68c288" name="a647d94495d982f854482012f2b68c288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a647d94495d982f854482012f2b68c288">&#9670;&#160;</a></span>autocontrast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.autocontrast </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cutoff</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ignore</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mask</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>preserve_tone</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Maximize (normalize) image contrast. This function calculates a
histogram of the input image (or mask region), removes ``cutoff`` percent of the
lightest and darkest pixels from the histogram, and remaps the image
so that the darkest pixel becomes black (0), and the lightest
becomes white (255).

:param image: The image to process.
:param cutoff: The percent to cut off from the histogram on the low and
               high ends. Either a tuple of (low, high), or a single
               number for both.
:param ignore: The background pixel value (use None for no background).
:param mask: Histogram used in contrast operation is computed using pixels
             within the mask. If no mask is given the entire image is used
             for histogram computation.
:param preserve_tone: Preserve image tone in Photoshop-like style autocontrast.

                      .. versionadded:: 8.2.0

:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">   67</span><span class="keyword">def </span>autocontrast(image, cutoff=0, ignore=None, mask=None, preserve_tone=False):</div>
<div class="line"><span class="lineno">   68</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">    Maximize (normalize) image contrast. This function calculates a</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral">    histogram of the input image (or mask region), removes ``cutoff`` percent of the</span></div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral">    lightest and darkest pixels from the histogram, and remaps the image</span></div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral">    so that the darkest pixel becomes black (0), and the lightest</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral">    becomes white (255).</span></div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">    :param image: The image to process.</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    :param cutoff: The percent to cut off from the histogram on the low and</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">                   high ends. Either a tuple of (low, high), or a single</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">                   number for both.</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    :param ignore: The background pixel value (use None for no background).</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">    :param mask: Histogram used in contrast operation is computed using pixels</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">                 within the mask. If no mask is given the entire image is used</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">                 for histogram computation.</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">    :param preserve_tone: Preserve image tone in Photoshop-like style autocontrast.</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">                          .. versionadded:: 8.2.0</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> preserve_tone:</div>
<div class="line"><span class="lineno">   90</span>        histogram = image.convert(<span class="stringliteral">&quot;L&quot;</span>).histogram(mask)</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   92</span>        histogram = image.histogram(mask)</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    lut = []</div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">for</span> layer <span class="keywordflow">in</span> range(0, len(histogram), 256):</div>
<div class="line"><span class="lineno">   96</span>        h = histogram[layer : layer + 256]</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">if</span> ignore <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   98</span>            <span class="comment"># get rid of outliers</span></div>
<div class="line"><span class="lineno">   99</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  100</span>                h[ignore] = 0</div>
<div class="line"><span class="lineno">  101</span>            <span class="keywordflow">except</span> TypeError:</div>
<div class="line"><span class="lineno">  102</span>                <span class="comment"># assume sequence</span></div>
<div class="line"><span class="lineno">  103</span>                <span class="keywordflow">for</span> ix <span class="keywordflow">in</span> ignore:</div>
<div class="line"><span class="lineno">  104</span>                    h[ix] = 0</div>
<div class="line"><span class="lineno">  105</span>        <span class="keywordflow">if</span> cutoff:</div>
<div class="line"><span class="lineno">  106</span>            <span class="comment"># cut off pixels from both ends of the histogram</span></div>
<div class="line"><span class="lineno">  107</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(cutoff, tuple):</div>
<div class="line"><span class="lineno">  108</span>                cutoff = (cutoff, cutoff)</div>
<div class="line"><span class="lineno">  109</span>            <span class="comment"># get number of pixels</span></div>
<div class="line"><span class="lineno">  110</span>            n = 0</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">for</span> ix <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  112</span>                n = n + h[ix]</div>
<div class="line"><span class="lineno">  113</span>            <span class="comment"># remove cutoff% pixels from the low end</span></div>
<div class="line"><span class="lineno">  114</span>            cut = n * cutoff[0] // 100</div>
<div class="line"><span class="lineno">  115</span>            <span class="keywordflow">for</span> lo <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  116</span>                <span class="keywordflow">if</span> cut &gt; h[lo]:</div>
<div class="line"><span class="lineno">  117</span>                    cut = cut - h[lo]</div>
<div class="line"><span class="lineno">  118</span>                    h[lo] = 0</div>
<div class="line"><span class="lineno">  119</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  120</span>                    h[lo] -= cut</div>
<div class="line"><span class="lineno">  121</span>                    cut = 0</div>
<div class="line"><span class="lineno">  122</span>                <span class="keywordflow">if</span> cut &lt;= 0:</div>
<div class="line"><span class="lineno">  123</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  124</span>            <span class="comment"># remove cutoff% samples from the high end</span></div>
<div class="line"><span class="lineno">  125</span>            cut = n * cutoff[1] // 100</div>
<div class="line"><span class="lineno">  126</span>            <span class="keywordflow">for</span> hi <span class="keywordflow">in</span> range(255, -1, -1):</div>
<div class="line"><span class="lineno">  127</span>                <span class="keywordflow">if</span> cut &gt; h[hi]:</div>
<div class="line"><span class="lineno">  128</span>                    cut = cut - h[hi]</div>
<div class="line"><span class="lineno">  129</span>                    h[hi] = 0</div>
<div class="line"><span class="lineno">  130</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  131</span>                    h[hi] -= cut</div>
<div class="line"><span class="lineno">  132</span>                    cut = 0</div>
<div class="line"><span class="lineno">  133</span>                <span class="keywordflow">if</span> cut &lt;= 0:</div>
<div class="line"><span class="lineno">  134</span>                    <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  135</span>        <span class="comment"># find lowest/highest samples after preprocessing</span></div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">for</span> lo <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  137</span>            <span class="keywordflow">if</span> h[lo]:</div>
<div class="line"><span class="lineno">  138</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  139</span>        <span class="keywordflow">for</span> hi <span class="keywordflow">in</span> range(255, -1, -1):</div>
<div class="line"><span class="lineno">  140</span>            <span class="keywordflow">if</span> h[hi]:</div>
<div class="line"><span class="lineno">  141</span>                <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  142</span>        <span class="keywordflow">if</span> hi &lt;= lo:</div>
<div class="line"><span class="lineno">  143</span>            <span class="comment"># don&#39;t bother</span></div>
<div class="line"><span class="lineno">  144</span>            lut.extend(list(range(256)))</div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  146</span>            scale = 255.0 / (hi - lo)</div>
<div class="line"><span class="lineno">  147</span>            offset = -lo * scale</div>
<div class="line"><span class="lineno">  148</span>            <span class="keywordflow">for</span> ix <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  149</span>                ix = int(ix * scale + offset)</div>
<div class="line"><span class="lineno">  150</span>                <span class="keywordflow">if</span> ix &lt; 0:</div>
<div class="line"><span class="lineno">  151</span>                    ix = 0</div>
<div class="line"><span class="lineno">  152</span>                <span class="keywordflow">elif</span> ix &gt; 255:</div>
<div class="line"><span class="lineno">  153</span>                    ix = 255</div>
<div class="line"><span class="lineno">  154</span>                lut.append(ix)</div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">return</span> _lut(image, lut)</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f694d09922a120d41049365f2425991" name="a7f694d09922a120d41049365f2425991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f694d09922a120d41049365f2425991">&#9670;&#160;</a></span>colorize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.colorize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>black</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>white</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mid</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>blackpoint</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>whitepoint</em> = <code>255</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>midpoint</em> = <code>127</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Colorize grayscale image.
This function calculates a color wedge which maps all black pixels in
the source image to the first color and all white pixels to the
second color. If ``mid`` is specified, it uses three-color mapping.
The ``black`` and ``white`` arguments should be RGB tuples or color names;
optionally you can use three-color mapping by also specifying ``mid``.
Mapping positions for any of the colors can be specified
(e.g. ``blackpoint``), where these parameters are the integer
value corresponding to where the corresponding color should be mapped.
These parameters must have logical order, such that
``blackpoint &lt;= midpoint &lt;= whitepoint`` (if ``mid`` is specified).

:param image: The image to colorize.
:param black: The color to use for black input pixels.
:param white: The color to use for white input pixels.
:param mid: The color to use for midtone input pixels.
:param blackpoint: an int value [0, 255] for the black mapping.
:param whitepoint: an int value [0, 255] for the white mapping.
:param midpoint: an int value [0, 255] for the midtone mapping.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  158</span><span class="keyword">def </span>colorize(image, black, white, mid=None, blackpoint=0, whitepoint=255, midpoint=127):</div>
<div class="line"><span class="lineno">  159</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">    Colorize grayscale image.</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral">    This function calculates a color wedge which maps all black pixels in</span></div>
<div class="line"><span class="lineno">  162</span><span class="stringliteral">    the source image to the first color and all white pixels to the</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">    second color. If ``mid`` is specified, it uses three-color mapping.</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral">    The ``black`` and ``white`` arguments should be RGB tuples or color names;</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral">    optionally you can use three-color mapping by also specifying ``mid``.</span></div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">    Mapping positions for any of the colors can be specified</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral">    (e.g. ``blackpoint``), where these parameters are the integer</span></div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">    value corresponding to where the corresponding color should be mapped.</span></div>
<div class="line"><span class="lineno">  169</span><span class="stringliteral">    These parameters must have logical order, such that</span></div>
<div class="line"><span class="lineno">  170</span><span class="stringliteral">    ``blackpoint &lt;= midpoint &lt;= whitepoint`` (if ``mid`` is specified).</span></div>
<div class="line"><span class="lineno">  171</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  172</span><span class="stringliteral">    :param image: The image to colorize.</span></div>
<div class="line"><span class="lineno">  173</span><span class="stringliteral">    :param black: The color to use for black input pixels.</span></div>
<div class="line"><span class="lineno">  174</span><span class="stringliteral">    :param white: The color to use for white input pixels.</span></div>
<div class="line"><span class="lineno">  175</span><span class="stringliteral">    :param mid: The color to use for midtone input pixels.</span></div>
<div class="line"><span class="lineno">  176</span><span class="stringliteral">    :param blackpoint: an int value [0, 255] for the black mapping.</span></div>
<div class="line"><span class="lineno">  177</span><span class="stringliteral">    :param whitepoint: an int value [0, 255] for the white mapping.</span></div>
<div class="line"><span class="lineno">  178</span><span class="stringliteral">    :param midpoint: an int value [0, 255] for the midtone mapping.</span></div>
<div class="line"><span class="lineno">  179</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  180</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="comment"># Initial asserts</span></div>
<div class="line"><span class="lineno">  183</span>    <span class="keyword">assert</span> image.mode == <span class="stringliteral">&quot;L&quot;</span></div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordflow">if</span> mid <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  185</span>        <span class="keyword">assert</span> 0 &lt;= blackpoint &lt;= whitepoint &lt;= 255</div>
<div class="line"><span class="lineno">  186</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  187</span>        <span class="keyword">assert</span> 0 &lt;= blackpoint &lt;= midpoint &lt;= whitepoint &lt;= 255</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment"># Define colors from arguments</span></div>
<div class="line"><span class="lineno">  190</span>    black = _color(black, <span class="stringliteral">&quot;RGB&quot;</span>)</div>
<div class="line"><span class="lineno">  191</span>    white = _color(white, <span class="stringliteral">&quot;RGB&quot;</span>)</div>
<div class="line"><span class="lineno">  192</span>    <span class="keywordflow">if</span> mid <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  193</span>        mid = _color(mid, <span class="stringliteral">&quot;RGB&quot;</span>)</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>    <span class="comment"># Empty lists for the mapping</span></div>
<div class="line"><span class="lineno">  196</span>    red = []</div>
<div class="line"><span class="lineno">  197</span>    green = []</div>
<div class="line"><span class="lineno">  198</span>    blue = []</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>    <span class="comment"># Create the low-end values</span></div>
<div class="line"><span class="lineno">  201</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, blackpoint):</div>
<div class="line"><span class="lineno">  202</span>        red.append(black[0])</div>
<div class="line"><span class="lineno">  203</span>        green.append(black[1])</div>
<div class="line"><span class="lineno">  204</span>        blue.append(black[2])</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>    <span class="comment"># Create the mapping (2-color)</span></div>
<div class="line"><span class="lineno">  207</span>    <span class="keywordflow">if</span> mid <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>        range_map = range(0, whitepoint - blackpoint)</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range_map:</div>
<div class="line"><span class="lineno">  212</span>            red.append(black[0] + i * (white[0] - black[0]) // len(range_map))</div>
<div class="line"><span class="lineno">  213</span>            green.append(black[1] + i * (white[1] - black[1]) // len(range_map))</div>
<div class="line"><span class="lineno">  214</span>            blue.append(black[2] + i * (white[2] - black[2]) // len(range_map))</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>    <span class="comment"># Create the mapping (3-color)</span></div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>        range_map1 = range(0, midpoint - blackpoint)</div>
<div class="line"><span class="lineno">  220</span>        range_map2 = range(0, whitepoint - midpoint)</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range_map1:</div>
<div class="line"><span class="lineno">  223</span>            red.append(black[0] + i * (mid[0] - black[0]) // len(range_map1))</div>
<div class="line"><span class="lineno">  224</span>            green.append(black[1] + i * (mid[1] - black[1]) // len(range_map1))</div>
<div class="line"><span class="lineno">  225</span>            blue.append(black[2] + i * (mid[2] - black[2]) // len(range_map1))</div>
<div class="line"><span class="lineno">  226</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range_map2:</div>
<div class="line"><span class="lineno">  227</span>            red.append(mid[0] + i * (white[0] - mid[0]) // len(range_map2))</div>
<div class="line"><span class="lineno">  228</span>            green.append(mid[1] + i * (white[1] - mid[1]) // len(range_map2))</div>
<div class="line"><span class="lineno">  229</span>            blue.append(mid[2] + i * (white[2] - mid[2]) // len(range_map2))</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="comment"># Create the high-end values</span></div>
<div class="line"><span class="lineno">  232</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, 256 - whitepoint):</div>
<div class="line"><span class="lineno">  233</span>        red.append(white[0])</div>
<div class="line"><span class="lineno">  234</span>        green.append(white[1])</div>
<div class="line"><span class="lineno">  235</span>        blue.append(white[2])</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="comment"># Return converted image</span></div>
<div class="line"><span class="lineno">  238</span>    image = image.convert(<span class="stringliteral">&quot;RGB&quot;</span>)</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">return</span> _lut(image, red + green + blue)</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae9efb5aa788c8ff317904b470759dad3" name="ae9efb5aa788c8ff317904b470759dad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9efb5aa788c8ff317904b470759dad3">&#9670;&#160;</a></span>contain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.contain </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em> = <code><a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a resized version of the image, set to the maximum width and height
within the requested size, while maintaining the original aspect ratio.

:param image: The image to resize and crop.
:param size: The requested output size in pixels, given as a
             (width, height) tuple.
:param method: Resampling method to use. Default is
               :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  242</span><span class="keyword">def </span>contain(image, size, method=Image.Resampling.BICUBIC):</div>
<div class="line"><span class="lineno">  243</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  244</span><span class="stringliteral">    Returns a resized version of the image, set to the maximum width and height</span></div>
<div class="line"><span class="lineno">  245</span><span class="stringliteral">    within the requested size, while maintaining the original aspect ratio.</span></div>
<div class="line"><span class="lineno">  246</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  247</span><span class="stringliteral">    :param image: The image to resize and crop.</span></div>
<div class="line"><span class="lineno">  248</span><span class="stringliteral">    :param size: The requested output size in pixels, given as a</span></div>
<div class="line"><span class="lineno">  249</span><span class="stringliteral">                 (width, height) tuple.</span></div>
<div class="line"><span class="lineno">  250</span><span class="stringliteral">    :param method: Resampling method to use. Default is</span></div>
<div class="line"><span class="lineno">  251</span><span class="stringliteral">                   :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.</span></div>
<div class="line"><span class="lineno">  252</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  253</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    im_ratio = image.width / image.height</div>
<div class="line"><span class="lineno">  256</span>    dest_ratio = size[0] / size[1]</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordflow">if</span> im_ratio != dest_ratio:</div>
<div class="line"><span class="lineno">  259</span>        <span class="keywordflow">if</span> im_ratio &gt; dest_ratio:</div>
<div class="line"><span class="lineno">  260</span>            new_height = round(image.height / image.width * size[0])</div>
<div class="line"><span class="lineno">  261</span>            <span class="keywordflow">if</span> new_height != size[1]:</div>
<div class="line"><span class="lineno">  262</span>                size = (size[0], new_height)</div>
<div class="line"><span class="lineno">  263</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  264</span>            new_width = round(image.width / image.height * size[1])</div>
<div class="line"><span class="lineno">  265</span>            <span class="keywordflow">if</span> new_width != size[0]:</div>
<div class="line"><span class="lineno">  266</span>                size = (new_width, size[1])</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordflow">return</span> image.resize(size, resample=method)</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aec78e26ed6094213b5c850164a166c43" name="aec78e26ed6094213b5c850164a166c43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec78e26ed6094213b5c850164a166c43">&#9670;&#160;</a></span>crop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.crop </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>border</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Remove border from image.  The same amount of pixels are removed
from all four sides.  This function works on all image modes.

.. seealso:: :py:meth:`~PIL.Image.Image.crop`

:param image: The image to crop.
:param border: The number of pixels to remove.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  307</span><span class="keyword">def </span>crop(image, border=0):</div>
<div class="line"><span class="lineno">  308</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  309</span><span class="stringliteral">    Remove border from image.  The same amount of pixels are removed</span></div>
<div class="line"><span class="lineno">  310</span><span class="stringliteral">    from all four sides.  This function works on all image modes.</span></div>
<div class="line"><span class="lineno">  311</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  312</span><span class="stringliteral">    .. seealso:: :py:meth:`~PIL.Image.Image.crop`</span></div>
<div class="line"><span class="lineno">  313</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  314</span><span class="stringliteral">    :param image: The image to crop.</span></div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral">    :param border: The number of pixels to remove.</span></div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  318</span>    left, top, right, bottom = _border(border)</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">return</span> image.crop((left, top, image.size[0] - right, image.size[1] - bottom))</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af17f1dd3a8ea64a0c76b8413697b823b" name="af17f1dd3a8ea64a0c76b8413697b823b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af17f1dd3a8ea64a0c76b8413697b823b">&#9670;&#160;</a></span>deform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.deform </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>deformer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>resample</em> = <code><a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a94f7233fb4cb9dfa21b656c23df14784">Image.Resampling.BILINEAR</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Deform the image.

:param image: The image to deform.
:param deformer: A deformer object.  Any object that implements a
                ``getmesh`` method can be used.
:param resample: An optional resampling filter. Same values possible as
   in the PIL.Image.transform function.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  344</span><span class="keyword">def </span>deform(image, deformer, resample=Image.Resampling.BILINEAR):</div>
<div class="line"><span class="lineno">  345</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  346</span><span class="stringliteral">    Deform the image.</span></div>
<div class="line"><span class="lineno">  347</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  348</span><span class="stringliteral">    :param image: The image to deform.</span></div>
<div class="line"><span class="lineno">  349</span><span class="stringliteral">    :param deformer: A deformer object.  Any object that implements a</span></div>
<div class="line"><span class="lineno">  350</span><span class="stringliteral">                    ``getmesh`` method can be used.</span></div>
<div class="line"><span class="lineno">  351</span><span class="stringliteral">    :param resample: An optional resampling filter. Same values possible as</span></div>
<div class="line"><span class="lineno">  352</span><span class="stringliteral">       in the PIL.Image.transform function.</span></div>
<div class="line"><span class="lineno">  353</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  354</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">return</span> image.transform(</div>
<div class="line"><span class="lineno">  356</span>        image.size, Image.Transform.MESH, deformer.getmesh(image), resample</div>
<div class="line"><span class="lineno">  357</span>    )</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e5a4f6bbe1ccdee671408502d672b17" name="a0e5a4f6bbe1ccdee671408502d672b17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5a4f6bbe1ccdee671408502d672b17">&#9670;&#160;</a></span>equalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.equalize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mask</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Equalize the image histogram. This function applies a non-linear
mapping to the input image, in order to create a uniform
distribution of grayscale values in the output image.

:param image: The image to equalize.
:param mask: An optional mask.  If given, only the pixels selected by
             the mask are included in the analysis.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  360</span><span class="keyword">def </span>equalize(image, mask=None):</div>
<div class="line"><span class="lineno">  361</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  362</span><span class="stringliteral">    Equalize the image histogram. This function applies a non-linear</span></div>
<div class="line"><span class="lineno">  363</span><span class="stringliteral">    mapping to the input image, in order to create a uniform</span></div>
<div class="line"><span class="lineno">  364</span><span class="stringliteral">    distribution of grayscale values in the output image.</span></div>
<div class="line"><span class="lineno">  365</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  366</span><span class="stringliteral">    :param image: The image to equalize.</span></div>
<div class="line"><span class="lineno">  367</span><span class="stringliteral">    :param mask: An optional mask.  If given, only the pixels selected by</span></div>
<div class="line"><span class="lineno">  368</span><span class="stringliteral">                 the mask are included in the analysis.</span></div>
<div class="line"><span class="lineno">  369</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  370</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordflow">if</span> image.mode == <span class="stringliteral">&quot;P&quot;</span>:</div>
<div class="line"><span class="lineno">  372</span>        image = image.convert(<span class="stringliteral">&quot;RGB&quot;</span>)</div>
<div class="line"><span class="lineno">  373</span>    h = image.histogram(mask)</div>
<div class="line"><span class="lineno">  374</span>    lut = []</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">for</span> b <span class="keywordflow">in</span> range(0, len(h), 256):</div>
<div class="line"><span class="lineno">  376</span>        histo = [_f <span class="keywordflow">for</span> _f <span class="keywordflow">in</span> h[b : b + 256] <span class="keywordflow">if</span> _f]</div>
<div class="line"><span class="lineno">  377</span>        <span class="keywordflow">if</span> len(histo) &lt;= 1:</div>
<div class="line"><span class="lineno">  378</span>            lut.extend(list(range(256)))</div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  380</span>            step = (functools.reduce(operator.add, histo) - histo[-1]) // 255</div>
<div class="line"><span class="lineno">  381</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> step:</div>
<div class="line"><span class="lineno">  382</span>                lut.extend(list(range(256)))</div>
<div class="line"><span class="lineno">  383</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  384</span>                n = step // 2</div>
<div class="line"><span class="lineno">  385</span>                <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  386</span>                    lut.append(n // step)</div>
<div class="line"><span class="lineno">  387</span>                    n = n + h[i + b]</div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">return</span> _lut(image, lut)</div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8664837f9f28f340c0cfca2e65ca2fa" name="ac8664837f9f28f340c0cfca2e65ca2fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8664837f9f28f340c0cfca2e65ca2fa">&#9670;&#160;</a></span>exif_transpose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.exif_transpose </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">If an image has an EXIF Orientation tag, other than 1, return a new image
that is transposed accordingly. The new image will have the orientation
data removed.

Otherwise, return a copy of the image.

:param image: The image to transpose.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  577</span><span class="keyword">def </span>exif_transpose(image):</div>
<div class="line"><span class="lineno">  578</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  579</span><span class="stringliteral">    If an image has an EXIF Orientation tag, other than 1, return a new image</span></div>
<div class="line"><span class="lineno">  580</span><span class="stringliteral">    that is transposed accordingly. The new image will have the orientation</span></div>
<div class="line"><span class="lineno">  581</span><span class="stringliteral">    data removed.</span></div>
<div class="line"><span class="lineno">  582</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  583</span><span class="stringliteral">    Otherwise, return a copy of the image.</span></div>
<div class="line"><span class="lineno">  584</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  585</span><span class="stringliteral">    :param image: The image to transpose.</span></div>
<div class="line"><span class="lineno">  586</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  587</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  588</span>    exif = image.getexif()</div>
<div class="line"><span class="lineno">  589</span>    orientation = exif.get(0x0112)</div>
<div class="line"><span class="lineno">  590</span>    method = {</div>
<div class="line"><span class="lineno">  591</span>        2: Image.Transpose.FLIP_LEFT_RIGHT,</div>
<div class="line"><span class="lineno">  592</span>        3: Image.Transpose.ROTATE_180,</div>
<div class="line"><span class="lineno">  593</span>        4: Image.Transpose.FLIP_TOP_BOTTOM,</div>
<div class="line"><span class="lineno">  594</span>        5: Image.Transpose.TRANSPOSE,</div>
<div class="line"><span class="lineno">  595</span>        6: Image.Transpose.ROTATE_270,</div>
<div class="line"><span class="lineno">  596</span>        7: Image.Transpose.TRANSVERSE,</div>
<div class="line"><span class="lineno">  597</span>        8: Image.Transpose.ROTATE_90,</div>
<div class="line"><span class="lineno">  598</span>    }.get(orientation)</div>
<div class="line"><span class="lineno">  599</span>    <span class="keywordflow">if</span> method <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  600</span>        transposed_image = image.transpose(method)</div>
<div class="line"><span class="lineno">  601</span>        transposed_exif = transposed_image.getexif()</div>
<div class="line"><span class="lineno">  602</span>        <span class="keywordflow">if</span> 0x0112 <span class="keywordflow">in</span> transposed_exif:</div>
<div class="line"><span class="lineno">  603</span>            del transposed_exif[0x0112]</div>
<div class="line"><span class="lineno">  604</span>            <span class="keywordflow">if</span> <span class="stringliteral">&quot;exif&quot;</span> <span class="keywordflow">in</span> transposed_image.info:</div>
<div class="line"><span class="lineno">  605</span>                transposed_image.info[<span class="stringliteral">&quot;exif&quot;</span>] = transposed_exif.tobytes()</div>
<div class="line"><span class="lineno">  606</span>            <span class="keywordflow">elif</span> <span class="stringliteral">&quot;Raw profile type exif&quot;</span> <span class="keywordflow">in</span> transposed_image.info:</div>
<div class="line"><span class="lineno">  607</span>                transposed_image.info[</div>
<div class="line"><span class="lineno">  608</span>                    <span class="stringliteral">&quot;Raw profile type exif&quot;</span></div>
<div class="line"><span class="lineno">  609</span>                ] = transposed_exif.tobytes().hex()</div>
<div class="line"><span class="lineno">  610</span>            <span class="keywordflow">elif</span> <span class="stringliteral">&quot;XML:com.adobe.xmp&quot;</span> <span class="keywordflow">in</span> transposed_image.info:</div>
<div class="line"><span class="lineno">  611</span>                <span class="keywordflow">for</span> pattern <span class="keywordflow">in</span> (</div>
<div class="line"><span class="lineno">  612</span>                    <span class="stringliteral">r&#39;tiff:Orientation=&quot;([0-9])&quot;&#39;</span>,</div>
<div class="line"><span class="lineno">  613</span>                    <span class="stringliteral">r&quot;&lt;tiff:Orientation&gt;([0-9])&lt;/tiff:Orientation&gt;&quot;</span>,</div>
<div class="line"><span class="lineno">  614</span>                ):</div>
<div class="line"><span class="lineno">  615</span>                    transposed_image.info[<span class="stringliteral">&quot;XML:com.adobe.xmp&quot;</span>] = re.sub(</div>
<div class="line"><span class="lineno">  616</span>                        pattern, <span class="stringliteral">&quot;&quot;</span>, transposed_image.info[<span class="stringliteral">&quot;XML:com.adobe.xmp&quot;</span>]</div>
<div class="line"><span class="lineno">  617</span>                    )</div>
<div class="line"><span class="lineno">  618</span>        <span class="keywordflow">return</span> transposed_image</div>
<div class="line"><span class="lineno">  619</span>    <span class="keywordflow">return</span> image.copy()</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1271131b0c8ba3458ceeaf79cfa6101" name="ad1271131b0c8ba3458ceeaf79cfa6101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1271131b0c8ba3458ceeaf79cfa6101">&#9670;&#160;</a></span>expand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.expand </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>border</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fill</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add border to the image

:param image: The image to expand.
:param border: Border width, in pixels.
:param fill: Pixel fill value (a color value).  Default is 0 (black).
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  391</span><span class="keyword">def </span>expand(image, border=0, fill=0):</div>
<div class="line"><span class="lineno">  392</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  393</span><span class="stringliteral">    Add border to the image</span></div>
<div class="line"><span class="lineno">  394</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  395</span><span class="stringliteral">    :param image: The image to expand.</span></div>
<div class="line"><span class="lineno">  396</span><span class="stringliteral">    :param border: Border width, in pixels.</span></div>
<div class="line"><span class="lineno">  397</span><span class="stringliteral">    :param fill: Pixel fill value (a color value).  Default is 0 (black).</span></div>
<div class="line"><span class="lineno">  398</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  399</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  400</span>    left, top, right, bottom = _border(border)</div>
<div class="line"><span class="lineno">  401</span>    width = left + image.size[0] + right</div>
<div class="line"><span class="lineno">  402</span>    height = top + image.size[1] + bottom</div>
<div class="line"><span class="lineno">  403</span>    color = _color(fill, image.mode)</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">if</span> image.palette:</div>
<div class="line"><span class="lineno">  405</span>        palette = ImagePalette.ImagePalette(palette=image.getpalette())</div>
<div class="line"><span class="lineno">  406</span>        <span class="keywordflow">if</span> isinstance(color, tuple):</div>
<div class="line"><span class="lineno">  407</span>            color = palette.getcolor(color)</div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  409</span>        palette = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  410</span>    out = Image.new(image.mode, (width, height), color)</div>
<div class="line"><span class="lineno">  411</span>    <span class="keywordflow">if</span> palette:</div>
<div class="line"><span class="lineno">  412</span>        out.putpalette(palette.palette)</div>
<div class="line"><span class="lineno">  413</span>    out.paste(image, (left, top))</div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">return</span> out</div>
<div class="line"><span class="lineno">  415</span> </div>
<div class="line"><span class="lineno">  416</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a71e3d2e9aa76ddb4f95cf595e3c0cf57" name="a71e3d2e9aa76ddb4f95cf595e3c0cf57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71e3d2e9aa76ddb4f95cf595e3c0cf57">&#9670;&#160;</a></span>fit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.fit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em> = <code><a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bleed</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>centering</em> = <code>(0.5,&#160;0.5)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a resized and cropped version of the image, cropped to the
requested aspect ratio and size.

This function was contributed by Kevin Cazabon.

:param image: The image to resize and crop.
:param size: The requested output size in pixels, given as a
             (width, height) tuple.
:param method: Resampling method to use. Default is
               :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.
:param bleed: Remove a border around the outside of the image from all
              four edges. The value is a decimal percentage (use 0.01 for
              one percent). The default value is 0 (no border).
              Cannot be greater than or equal to 0.5.
:param centering: Control the cropping position.  Use (0.5, 0.5) for
                  center cropping (e.g. if cropping the width, take 50% off
                  of the left side, and therefore 50% off the right side).
                  (0.0, 0.0) will crop from the top left corner (i.e. if
                  cropping the width, take all of the crop off of the right
                  side, and if cropping the height, take all of it off the
                  bottom).  (1.0, 0.0) will crop from the bottom left
                  corner, etc. (i.e. if cropping the width, take all of the
                  crop off the left side, and if cropping the height take
                  none from the top, and therefore all off the bottom).
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  417</span><span class="keyword">def </span>fit(image, size, method=Image.Resampling.BICUBIC, bleed=0.0, centering=(0.5, 0.5)):</div>
<div class="line"><span class="lineno">  418</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  419</span><span class="stringliteral">    Returns a resized and cropped version of the image, cropped to the</span></div>
<div class="line"><span class="lineno">  420</span><span class="stringliteral">    requested aspect ratio and size.</span></div>
<div class="line"><span class="lineno">  421</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  422</span><span class="stringliteral">    This function was contributed by Kevin Cazabon.</span></div>
<div class="line"><span class="lineno">  423</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  424</span><span class="stringliteral">    :param image: The image to resize and crop.</span></div>
<div class="line"><span class="lineno">  425</span><span class="stringliteral">    :param size: The requested output size in pixels, given as a</span></div>
<div class="line"><span class="lineno">  426</span><span class="stringliteral">                 (width, height) tuple.</span></div>
<div class="line"><span class="lineno">  427</span><span class="stringliteral">    :param method: Resampling method to use. Default is</span></div>
<div class="line"><span class="lineno">  428</span><span class="stringliteral">                   :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.</span></div>
<div class="line"><span class="lineno">  429</span><span class="stringliteral">    :param bleed: Remove a border around the outside of the image from all</span></div>
<div class="line"><span class="lineno">  430</span><span class="stringliteral">                  four edges. The value is a decimal percentage (use 0.01 for</span></div>
<div class="line"><span class="lineno">  431</span><span class="stringliteral">                  one percent). The default value is 0 (no border).</span></div>
<div class="line"><span class="lineno">  432</span><span class="stringliteral">                  Cannot be greater than or equal to 0.5.</span></div>
<div class="line"><span class="lineno">  433</span><span class="stringliteral">    :param centering: Control the cropping position.  Use (0.5, 0.5) for</span></div>
<div class="line"><span class="lineno">  434</span><span class="stringliteral">                      center cropping (e.g. if cropping the width, take 50% off</span></div>
<div class="line"><span class="lineno">  435</span><span class="stringliteral">                      of the left side, and therefore 50% off the right side).</span></div>
<div class="line"><span class="lineno">  436</span><span class="stringliteral">                      (0.0, 0.0) will crop from the top left corner (i.e. if</span></div>
<div class="line"><span class="lineno">  437</span><span class="stringliteral">                      cropping the width, take all of the crop off of the right</span></div>
<div class="line"><span class="lineno">  438</span><span class="stringliteral">                      side, and if cropping the height, take all of it off the</span></div>
<div class="line"><span class="lineno">  439</span><span class="stringliteral">                      bottom).  (1.0, 0.0) will crop from the bottom left</span></div>
<div class="line"><span class="lineno">  440</span><span class="stringliteral">                      corner, etc. (i.e. if cropping the width, take all of the</span></div>
<div class="line"><span class="lineno">  441</span><span class="stringliteral">                      crop off the left side, and if cropping the height take</span></div>
<div class="line"><span class="lineno">  442</span><span class="stringliteral">                      none from the top, and therefore all off the bottom).</span></div>
<div class="line"><span class="lineno">  443</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  444</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    <span class="comment"># by Kevin Cazabon, Feb 17/2000</span></div>
<div class="line"><span class="lineno">  447</span>    <span class="comment"># kevin@cazabon.com</span></div>
<div class="line"><span class="lineno">  448</span>    <span class="comment"># https://www.cazabon.com</span></div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>    <span class="comment"># ensure centering is mutable</span></div>
<div class="line"><span class="lineno">  451</span>    centering = list(centering)</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= centering[0] &lt;= 1.0:</div>
<div class="line"><span class="lineno">  454</span>        centering[0] = 0.5</div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= centering[1] &lt;= 1.0:</div>
<div class="line"><span class="lineno">  456</span>        centering[1] = 0.5</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> 0.0 &lt;= bleed &lt; 0.5:</div>
<div class="line"><span class="lineno">  459</span>        bleed = 0.0</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>    <span class="comment"># calculate the area to use for resizing and cropping, subtracting</span></div>
<div class="line"><span class="lineno">  462</span>    <span class="comment"># the &#39;bleed&#39; around the edges</span></div>
<div class="line"><span class="lineno">  463</span> </div>
<div class="line"><span class="lineno">  464</span>    <span class="comment"># number of pixels to trim off on Top and Bottom, Left and Right</span></div>
<div class="line"><span class="lineno">  465</span>    bleed_pixels = (bleed * image.size[0], bleed * image.size[1])</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>    live_size = (</div>
<div class="line"><span class="lineno">  468</span>        image.size[0] - bleed_pixels[0] * 2,</div>
<div class="line"><span class="lineno">  469</span>        image.size[1] - bleed_pixels[1] * 2,</div>
<div class="line"><span class="lineno">  470</span>    )</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>    <span class="comment"># calculate the aspect ratio of the live_size</span></div>
<div class="line"><span class="lineno">  473</span>    live_size_ratio = live_size[0] / live_size[1]</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>    <span class="comment"># calculate the aspect ratio of the output image</span></div>
<div class="line"><span class="lineno">  476</span>    output_ratio = size[0] / size[1]</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>    <span class="comment"># figure out if the sides or top/bottom will be cropped off</span></div>
<div class="line"><span class="lineno">  479</span>    <span class="keywordflow">if</span> live_size_ratio == output_ratio:</div>
<div class="line"><span class="lineno">  480</span>        <span class="comment"># live_size is already the needed ratio</span></div>
<div class="line"><span class="lineno">  481</span>        crop_width = live_size[0]</div>
<div class="line"><span class="lineno">  482</span>        crop_height = live_size[1]</div>
<div class="line"><span class="lineno">  483</span>    <span class="keywordflow">elif</span> live_size_ratio &gt;= output_ratio:</div>
<div class="line"><span class="lineno">  484</span>        <span class="comment"># live_size is wider than what&#39;s needed, crop the sides</span></div>
<div class="line"><span class="lineno">  485</span>        crop_width = output_ratio * live_size[1]</div>
<div class="line"><span class="lineno">  486</span>        crop_height = live_size[1]</div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  488</span>        <span class="comment"># live_size is taller than what&#39;s needed, crop the top and bottom</span></div>
<div class="line"><span class="lineno">  489</span>        crop_width = live_size[0]</div>
<div class="line"><span class="lineno">  490</span>        crop_height = live_size[0] / output_ratio</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>    <span class="comment"># make the crop</span></div>
<div class="line"><span class="lineno">  493</span>    crop_left = bleed_pixels[0] + (live_size[0] - crop_width) * centering[0]</div>
<div class="line"><span class="lineno">  494</span>    crop_top = bleed_pixels[1] + (live_size[1] - crop_height) * centering[1]</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>    crop = (crop_left, crop_top, crop_left + crop_width, crop_top + crop_height)</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>    <span class="comment"># resize the image and return it</span></div>
<div class="line"><span class="lineno">  499</span>    <span class="keywordflow">return</span> image.resize(size, method, box=crop)</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ae124296a40a3f78546abf5d2009d68" name="a4ae124296a40a3f78546abf5d2009d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ae124296a40a3f78546abf5d2009d68">&#9670;&#160;</a></span>flip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.flip </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Flip the image vertically (top to bottom).

:param image: The image to flip.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  502</span><span class="keyword">def </span>flip(image):</div>
<div class="line"><span class="lineno">  503</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  504</span><span class="stringliteral">    Flip the image vertically (top to bottom).</span></div>
<div class="line"><span class="lineno">  505</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  506</span><span class="stringliteral">    :param image: The image to flip.</span></div>
<div class="line"><span class="lineno">  507</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  508</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">return</span> image.transpose(Image.Transpose.FLIP_TOP_BOTTOM)</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7de978b8c315e7794019f4e5c827b11e" name="a7de978b8c315e7794019f4e5c827b11e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7de978b8c315e7794019f4e5c827b11e">&#9670;&#160;</a></span>grayscale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.grayscale </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert the image to grayscale.

:param image: The image to convert.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  512</span><span class="keyword">def </span>grayscale(image):</div>
<div class="line"><span class="lineno">  513</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  514</span><span class="stringliteral">    Convert the image to grayscale.</span></div>
<div class="line"><span class="lineno">  515</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  516</span><span class="stringliteral">    :param image: The image to convert.</span></div>
<div class="line"><span class="lineno">  517</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  518</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  519</span>    <span class="keywordflow">return</span> image.convert(<span class="stringliteral">&quot;L&quot;</span>)</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7aea13cadcf7263d6140e60ac7daa99" name="ac7aea13cadcf7263d6140e60ac7daa99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7aea13cadcf7263d6140e60ac7daa99">&#9670;&#160;</a></span>invert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.invert </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Invert (negate) the image.

:param image: The image to invert.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  522</span><span class="keyword">def </span>invert(image):</div>
<div class="line"><span class="lineno">  523</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  524</span><span class="stringliteral">    Invert (negate) the image.</span></div>
<div class="line"><span class="lineno">  525</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  526</span><span class="stringliteral">    :param image: The image to invert.</span></div>
<div class="line"><span class="lineno">  527</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  528</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  529</span>    lut = []</div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  531</span>        lut.append(255 - i)</div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">return</span> image.point(lut) <span class="keywordflow">if</span> image.mode == <span class="stringliteral">&quot;1&quot;</span> <span class="keywordflow">else</span> _lut(image, lut)</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a03bcb5c3b5e955c85a616741200694e9" name="a03bcb5c3b5e955c85a616741200694e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03bcb5c3b5e955c85a616741200694e9">&#9670;&#160;</a></span>mirror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.mirror </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Flip image horizontally (left to right).

:param image: The image to mirror.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  535</span><span class="keyword">def </span>mirror(image):</div>
<div class="line"><span class="lineno">  536</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  537</span><span class="stringliteral">    Flip image horizontally (left to right).</span></div>
<div class="line"><span class="lineno">  538</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  539</span><span class="stringliteral">    :param image: The image to mirror.</span></div>
<div class="line"><span class="lineno">  540</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  541</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  542</span>    <span class="keywordflow">return</span> image.transpose(Image.Transpose.FLIP_LEFT_RIGHT)</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3786de381807322b9c93308d3c70b01" name="ac3786de381807322b9c93308d3c70b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3786de381807322b9c93308d3c70b01">&#9670;&#160;</a></span>pad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.pad </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em> = <code><a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>color</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>centering</em> = <code>(0.5,&#160;0.5)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a resized and padded version of the image, expanded to fill the
requested aspect ratio and size.

:param image: The image to resize and crop.
:param size: The requested output size in pixels, given as a
             (width, height) tuple.
:param method: Resampling method to use. Default is
               :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.
:param color: The background color of the padded image.
:param centering: Control the position of the original image within the
                  padded version.

                      (0.5, 0.5) will keep the image centered
                      (0, 0) will keep the image aligned to the top left
                      (1, 1) will keep the image aligned to the bottom
                      right
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  270</span><span class="keyword">def </span>pad(image, size, method=Image.Resampling.BICUBIC, color=None, centering=(0.5, 0.5)):</div>
<div class="line"><span class="lineno">  271</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral">    Returns a resized and padded version of the image, expanded to fill the</span></div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">    requested aspect ratio and size.</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral">    :param image: The image to resize and crop.</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral">    :param size: The requested output size in pixels, given as a</span></div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">                 (width, height) tuple.</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">    :param method: Resampling method to use. Default is</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">                   :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.</span></div>
<div class="line"><span class="lineno">  280</span><span class="stringliteral">    :param color: The background color of the padded image.</span></div>
<div class="line"><span class="lineno">  281</span><span class="stringliteral">    :param centering: Control the position of the original image within the</span></div>
<div class="line"><span class="lineno">  282</span><span class="stringliteral">                      padded version.</span></div>
<div class="line"><span class="lineno">  283</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  284</span><span class="stringliteral">                          (0.5, 0.5) will keep the image centered</span></div>
<div class="line"><span class="lineno">  285</span><span class="stringliteral">                          (0, 0) will keep the image aligned to the top left</span></div>
<div class="line"><span class="lineno">  286</span><span class="stringliteral">                          (1, 1) will keep the image aligned to the bottom</span></div>
<div class="line"><span class="lineno">  287</span><span class="stringliteral">                          right</span></div>
<div class="line"><span class="lineno">  288</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  289</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span>    resized = contain(image, size, method)</div>
<div class="line"><span class="lineno">  292</span>    <span class="keywordflow">if</span> resized.size == size:</div>
<div class="line"><span class="lineno">  293</span>        out = resized</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  295</span>        out = Image.new(image.mode, size, color)</div>
<div class="line"><span class="lineno">  296</span>        <span class="keywordflow">if</span> resized.palette:</div>
<div class="line"><span class="lineno">  297</span>            out.putpalette(resized.getpalette())</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">if</span> resized.width != size[0]:</div>
<div class="line"><span class="lineno">  299</span>            x = round((size[0] - resized.width) * max(0, min(centering[0], 1)))</div>
<div class="line"><span class="lineno">  300</span>            out.paste(resized, (x, 0))</div>
<div class="line"><span class="lineno">  301</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  302</span>            y = round((size[1] - resized.height) * max(0, min(centering[1], 1)))</div>
<div class="line"><span class="lineno">  303</span>            out.paste(resized, (0, y))</div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">return</span> out</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad442aaa8a6456dec939e40d43e2b3acc" name="ad442aaa8a6456dec939e40d43e2b3acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad442aaa8a6456dec939e40d43e2b3acc">&#9670;&#160;</a></span>posterize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.posterize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Reduce the number of bits for each color channel.

:param image: The image to posterize.
:param bits: The number of bits to keep for each channel (1-8).
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  545</span><span class="keyword">def </span>posterize(image, bits):</div>
<div class="line"><span class="lineno">  546</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  547</span><span class="stringliteral">    Reduce the number of bits for each color channel.</span></div>
<div class="line"><span class="lineno">  548</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  549</span><span class="stringliteral">    :param image: The image to posterize.</span></div>
<div class="line"><span class="lineno">  550</span><span class="stringliteral">    :param bits: The number of bits to keep for each channel (1-8).</span></div>
<div class="line"><span class="lineno">  551</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  552</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  553</span>    lut = []</div>
<div class="line"><span class="lineno">  554</span>    mask = ~(2 ** (8 - bits) - 1)</div>
<div class="line"><span class="lineno">  555</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  556</span>        lut.append(i &amp; mask)</div>
<div class="line"><span class="lineno">  557</span>    <span class="keywordflow">return</span> _lut(image, lut)</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a1b04a19bbb72508f26fe1e11b8114d" name="a1a1b04a19bbb72508f26fe1e11b8114d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a1b04a19bbb72508f26fe1e11b8114d">&#9670;&#160;</a></span>scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.scale </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>resample</em> = <code><a class="el" href="class_p_i_l_1_1_image_1_1_resampling.html#a5c5419ce07472b391157b395a20a3c68">Image.Resampling.BICUBIC</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a rescaled image by a specific factor given in parameter.
A factor greater than 1 expands the image, between 0 and 1 contracts the
image.

:param image: The image to rescale.
:param factor: The expansion factor, as a float.
:param resample: Resampling method to use. Default is
                 :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.
:returns: An :py:class:`~PIL.Image.Image` object.
</pre> <div class="fragment"><div class="line"><span class="lineno">  322</span><span class="keyword">def </span>scale(image, factor, resample=Image.Resampling.BICUBIC):</div>
<div class="line"><span class="lineno">  323</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  324</span><span class="stringliteral">    Returns a rescaled image by a specific factor given in parameter.</span></div>
<div class="line"><span class="lineno">  325</span><span class="stringliteral">    A factor greater than 1 expands the image, between 0 and 1 contracts the</span></div>
<div class="line"><span class="lineno">  326</span><span class="stringliteral">    image.</span></div>
<div class="line"><span class="lineno">  327</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  328</span><span class="stringliteral">    :param image: The image to rescale.</span></div>
<div class="line"><span class="lineno">  329</span><span class="stringliteral">    :param factor: The expansion factor, as a float.</span></div>
<div class="line"><span class="lineno">  330</span><span class="stringliteral">    :param resample: Resampling method to use. Default is</span></div>
<div class="line"><span class="lineno">  331</span><span class="stringliteral">                     :py:attr:`PIL.Image.BICUBIC`. See :ref:`concept-filters`.</span></div>
<div class="line"><span class="lineno">  332</span><span class="stringliteral">    :returns: An :py:class:`~PIL.Image.Image` object.</span></div>
<div class="line"><span class="lineno">  333</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  334</span>    <span class="keywordflow">if</span> factor == 1:</div>
<div class="line"><span class="lineno">  335</span>        <span class="keywordflow">return</span> image.copy()</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">elif</span> factor &lt;= 0:</div>
<div class="line"><span class="lineno">  337</span>        msg = <span class="stringliteral">&quot;the factor must be greater than 0&quot;</span></div>
<div class="line"><span class="lineno">  338</span>        <span class="keywordflow">raise</span> ValueError(msg)</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  340</span>        size = (round(factor * image.width), round(factor * image.height))</div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">return</span> image.resize(size, resample)</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aad8f74d53ef3a480d763c3276e048a2e" name="aad8f74d53ef3a480d763c3276e048a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad8f74d53ef3a480d763c3276e048a2e">&#9670;&#160;</a></span>solarize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.ImageOps.solarize </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>128</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Invert all pixel values above a threshold.

:param image: The image to solarize.
:param threshold: All pixels above this greyscale level are inverted.
:return: An image.
</pre> <div class="fragment"><div class="line"><span class="lineno">  560</span><span class="keyword">def </span>solarize(image, threshold=128):</div>
<div class="line"><span class="lineno">  561</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  562</span><span class="stringliteral">    Invert all pixel values above a threshold.</span></div>
<div class="line"><span class="lineno">  563</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  564</span><span class="stringliteral">    :param image: The image to solarize.</span></div>
<div class="line"><span class="lineno">  565</span><span class="stringliteral">    :param threshold: All pixels above this greyscale level are inverted.</span></div>
<div class="line"><span class="lineno">  566</span><span class="stringliteral">    :return: An image.</span></div>
<div class="line"><span class="lineno">  567</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  568</span>    lut = []</div>
<div class="line"><span class="lineno">  569</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(256):</div>
<div class="line"><span class="lineno">  570</span>        <span class="keywordflow">if</span> i &lt; threshold:</div>
<div class="line"><span class="lineno">  571</span>            lut.append(i)</div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  573</span>            lut.append(255 - i)</div>
<div class="line"><span class="lineno">  574</span>    <span class="keywordflow">return</span> _lut(image, lut)</div>
<div class="line"><span class="lineno">  575</span> </div>
<div class="line"><span class="lineno">  576</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
