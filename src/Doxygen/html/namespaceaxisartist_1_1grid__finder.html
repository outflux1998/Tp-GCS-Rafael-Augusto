<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: axisartist.grid_finder Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceaxisartist.html">axisartist</a></li><li class="navelem"><a class="el" href="namespaceaxisartist_1_1grid__finder.html">grid_finder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">axisartist.grid_finder Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaxisartist_1_1grid__finder_1_1___user2_d_transform.html">_User2DTransform</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaxisartist_1_1grid__finder_1_1_dict_formatter.html">DictFormatter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaxisartist_1_1grid__finder_1_1_extreme_finder_simple.html">ExtremeFinderSimple</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaxisartist_1_1grid__finder_1_1_fixed_locator.html">FixedLocator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaxisartist_1_1grid__finder_1_1_formatter_pretty_print.html">FormatterPrettyPrint</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaxisartist_1_1grid__finder_1_1_grid_finder.html">GridFinder</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaxisartist_1_1grid__finder_1_1_max_n_locator.html">MaxNLocator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa9fb915c905681863e9fa22b942ffdeb" id="r_aa9fb915c905681863e9fa22b942ffdeb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceaxisartist_1_1grid__finder.html#aa9fb915c905681863e9fa22b942ffdeb">_find_line_box_crossings</a> (xys, bbox)</td></tr>
<tr class="separator:aa9fb915c905681863e9fa22b942ffdeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa9fb915c905681863e9fa22b942ffdeb" name="aa9fb915c905681863e9fa22b942ffdeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9fb915c905681863e9fa22b942ffdeb">&#9670;&#160;</a></span>_find_line_box_crossings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">axisartist.grid_finder._find_line_box_crossings </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>xys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bbox</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Find the points where a polyline crosses a bbox, and the crossing angles.

Parameters
----------
xys : (N, 2) array
    The polyline coordinates.
bbox : `.Bbox`
    The bounding box.

Returns
-------
list of ((float, float), float)
    Four separate lists of crossings, for the left, right, bottom, and top
    sides of the bbox, respectively.  For each list, the entries are the
    ``((x, y), ccw_angle_in_degrees)`` of the crossing, where an angle of 0
    means that the polyline is moving to the right at the crossing point.

    The entries are computed by linearly interpolating at each crossing
    between the nearest points on either side of the bbox edges.
</pre> <div class="fragment"><div class="line"><span class="lineno">    7</span><span class="keyword">def </span>_find_line_box_crossings(xys, bbox):</div>
<div class="line"><span class="lineno">    8</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">    9</span><span class="stringliteral">    Find the points where a polyline crosses a bbox, and the crossing angles.</span></div>
<div class="line"><span class="lineno">   10</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   11</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   12</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   13</span><span class="stringliteral">    xys : (N, 2) array</span></div>
<div class="line"><span class="lineno">   14</span><span class="stringliteral">        The polyline coordinates.</span></div>
<div class="line"><span class="lineno">   15</span><span class="stringliteral">    bbox : `.Bbox`</span></div>
<div class="line"><span class="lineno">   16</span><span class="stringliteral">        The bounding box.</span></div>
<div class="line"><span class="lineno">   17</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   18</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">   19</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">   20</span><span class="stringliteral">    list of ((float, float), float)</span></div>
<div class="line"><span class="lineno">   21</span><span class="stringliteral">        Four separate lists of crossings, for the left, right, bottom, and top</span></div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">        sides of the bbox, respectively.  For each list, the entries are the</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">        ``((x, y), ccw_angle_in_degrees)`` of the crossing, where an angle of 0</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">        means that the polyline is moving to the right at the crossing point.</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">        The entries are computed by linearly interpolating at each crossing</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">        between the nearest points on either side of the bbox edges.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   29</span>    crossings = []</div>
<div class="line"><span class="lineno">   30</span>    dxys = xys[1:] - xys[:-1]</div>
<div class="line"><span class="lineno">   31</span>    <span class="keywordflow">for</span> sl <span class="keywordflow">in</span> [slice(<span class="keywordtype">None</span>), slice(<span class="keywordtype">None</span>, <span class="keywordtype">None</span>, -1)]:</div>
<div class="line"><span class="lineno">   32</span>        us, vs = xys.T[sl]  <span class="comment"># &quot;this&quot; coord, &quot;other&quot; coord</span></div>
<div class="line"><span class="lineno">   33</span>        dus, dvs = dxys.T[sl]</div>
<div class="line"><span class="lineno">   34</span>        umin, vmin = bbox.min[sl]</div>
<div class="line"><span class="lineno">   35</span>        umax, vmax = bbox.max[sl]</div>
<div class="line"><span class="lineno">   36</span>        <span class="keywordflow">for</span> u0, inside <span class="keywordflow">in</span> [(umin, us &gt; umin), (umax, us &lt; umax)]:</div>
<div class="line"><span class="lineno">   37</span>            crossings.append([])</div>
<div class="line"><span class="lineno">   38</span>            idxs, = (inside[:-1] ^ inside[1:]).nonzero()</div>
<div class="line"><span class="lineno">   39</span>            <span class="keywordflow">for</span> idx <span class="keywordflow">in</span> idxs:</div>
<div class="line"><span class="lineno">   40</span>                v = vs[idx] + (u0 - us[idx]) * dvs[idx] / dus[idx]</div>
<div class="line"><span class="lineno">   41</span>                <span class="keywordflow">if</span> <span class="keywordflow">not</span> vmin &lt;= v &lt;= vmax:</div>
<div class="line"><span class="lineno">   42</span>                    <span class="keywordflow">continue</span></div>
<div class="line"><span class="lineno">   43</span>                crossing = (u0, v)[sl]</div>
<div class="line"><span class="lineno">   44</span>                theta = np.degrees(np.arctan2(*dxys[idx][::-1]))</div>
<div class="line"><span class="lineno">   45</span>                crossings[-1].append((crossing, theta))</div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">return</span> crossings</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span> </div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
