<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: coverage.numbits Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecoverage.html">coverage</a></li><li class="navelem"><a class="el" href="namespacecoverage_1_1numbits.html">numbits</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">coverage.numbits Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a226dda3d94b71f8728b05241cf613b41" id="r_a226dda3d94b71f8728b05241cf613b41"><td class="memItemLeft" align="right" valign="top">bytes&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoverage_1_1numbits.html#a226dda3d94b71f8728b05241cf613b41">nums_to_numbits</a> (Iterable[int] nums)</td></tr>
<tr class="separator:a226dda3d94b71f8728b05241cf613b41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08e950658fd5d09c47ce8b7f0d16f09f" id="r_a08e950658fd5d09c47ce8b7f0d16f09f"><td class="memItemLeft" align="right" valign="top">List[int]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoverage_1_1numbits.html#a08e950658fd5d09c47ce8b7f0d16f09f">numbits_to_nums</a> (bytes numbits)</td></tr>
<tr class="separator:a08e950658fd5d09c47ce8b7f0d16f09f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30eed642dc823a55fb6540ca58dee2ca" id="r_a30eed642dc823a55fb6540ca58dee2ca"><td class="memItemLeft" align="right" valign="top">bytes&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoverage_1_1numbits.html#a30eed642dc823a55fb6540ca58dee2ca">numbits_union</a> (bytes numbits1, bytes numbits2)</td></tr>
<tr class="separator:a30eed642dc823a55fb6540ca58dee2ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46de06aaf5b92c200f5c8a259af7450f" id="r_a46de06aaf5b92c200f5c8a259af7450f"><td class="memItemLeft" align="right" valign="top">bytes&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoverage_1_1numbits.html#a46de06aaf5b92c200f5c8a259af7450f">numbits_intersection</a> (bytes numbits1, bytes numbits2)</td></tr>
<tr class="separator:a46de06aaf5b92c200f5c8a259af7450f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52342221d9eae750bc0a2b11c37eeaec" id="r_a52342221d9eae750bc0a2b11c37eeaec"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoverage_1_1numbits.html#a52342221d9eae750bc0a2b11c37eeaec">numbits_any_intersection</a> (bytes numbits1, bytes numbits2)</td></tr>
<tr class="separator:a52342221d9eae750bc0a2b11c37eeaec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe785ad7a0ccde38f8a6b30a24530de" id="r_a3fe785ad7a0ccde38f8a6b30a24530de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoverage_1_1numbits.html#a3fe785ad7a0ccde38f8a6b30a24530de">num_in_numbits</a> (int num, bytes numbits)</td></tr>
<tr class="separator:a3fe785ad7a0ccde38f8a6b30a24530de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a0cf6f1e11b5fc6696e826a743d08f" id="r_a78a0cf6f1e11b5fc6696e826a743d08f"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecoverage_1_1numbits.html#a78a0cf6f1e11b5fc6696e826a743d08f">register_sqlite_functions</a> (sqlite3.Connection connection)</td></tr>
<tr class="separator:a78a0cf6f1e11b5fc6696e826a743d08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Functions to manipulate packed binary representations of number sets.

To save space, coverage stores sets of line numbers in SQLite using a packed
binary representation called a numbits.  A numbits is a set of positive
integers.

A numbits is stored as a blob in the database.  The exact meaning of the bytes
in the blobs should be considered an implementation detail that might change in
the future.  Use these functions to work with those binary blobs of data.</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a3fe785ad7a0ccde38f8a6b30a24530de" name="a3fe785ad7a0ccde38f8a6b30a24530de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe785ad7a0ccde38f8a6b30a24530de">&#9670;&#160;</a></span>num_in_numbits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bool coverage.numbits.num_in_numbits </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Does the integer `num` appear in `numbits`?

Returns:
    A bool, True if `num` is a member of `numbits`.
</pre> <div class="fragment"><div class="line"><span class="lineno">   99</span><span class="keyword">def </span>num_in_numbits(num: int, numbits: bytes) -&gt; bool:</div>
<div class="line"><span class="lineno">  100</span>    <span class="stringliteral">&quot;&quot;&quot;Does the integer `num` appear in `numbits`?</span></div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">        A bool, True if `num` is a member of `numbits`.</span></div>
<div class="line"><span class="lineno">  104</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  105</span>    nbyte, nbit = divmod(num, 8)</div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">if</span> nbyte &gt;= len(numbits):</div>
<div class="line"><span class="lineno">  107</span>        <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">return</span> bool(numbits[nbyte] &amp; (1 &lt;&lt; nbit))</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a52342221d9eae750bc0a2b11c37eeaec" name="a52342221d9eae750bc0a2b11c37eeaec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52342221d9eae750bc0a2b11c37eeaec">&#9670;&#160;</a></span>numbits_any_intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bool coverage.numbits.numbits_any_intersection </td>
          <td>(</td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Is there any number that appears in both numbits?

Determine whether two number sets have a non-empty intersection. This is
faster than computing the intersection.

Returns:
    A bool, True if there is any number in both `numbits1` and `numbits2`.
</pre> <div class="fragment"><div class="line"><span class="lineno">   86</span><span class="keyword">def </span>numbits_any_intersection(numbits1: bytes, numbits2: bytes) -&gt; bool:</div>
<div class="line"><span class="lineno">   87</span>    <span class="stringliteral">&quot;&quot;&quot;Is there any number that appears in both numbits?</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">    Determine whether two number sets have a non-empty intersection. This is</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">    faster than computing the intersection.</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral">        A bool, True if there is any number in both `numbits1` and `numbits2`.</span></div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   95</span>    byte_pairs = zip_longest(numbits1, numbits2, fillvalue=0)</div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">return</span> any(b1 &amp; b2 <span class="keywordflow">for</span> b1, b2 <span class="keywordflow">in</span> byte_pairs)</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a46de06aaf5b92c200f5c8a259af7450f" name="a46de06aaf5b92c200f5c8a259af7450f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46de06aaf5b92c200f5c8a259af7450f">&#9670;&#160;</a></span>numbits_intersection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bytes coverage.numbits.numbits_intersection </td>
          <td>(</td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute the intersection of two numbits.

Returns:
    A new numbits, the intersection `numbits1` and `numbits2`.
</pre> <div class="fragment"><div class="line"><span class="lineno">   75</span><span class="keyword">def </span>numbits_intersection(numbits1: bytes, numbits2: bytes) -&gt; bytes:</div>
<div class="line"><span class="lineno">   76</span>    <span class="stringliteral">&quot;&quot;&quot;Compute the intersection of two numbits.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">        A new numbits, the intersection `numbits1` and `numbits2`.</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   81</span>    byte_pairs = zip_longest(numbits1, numbits2, fillvalue=0)</div>
<div class="line"><span class="lineno">   82</span>    intersection_bytes = bytes(b1 &amp; b2 <span class="keywordflow">for</span> b1, b2 <span class="keywordflow">in</span> byte_pairs)</div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">return</span> intersection_bytes.rstrip(b<span class="stringliteral">&#39;\0&#39;</span>)</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a08e950658fd5d09c47ce8b7f0d16f09f" name="a08e950658fd5d09c47ce8b7f0d16f09f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08e950658fd5d09c47ce8b7f0d16f09f">&#9670;&#160;</a></span>numbits_to_nums()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> List[int] coverage.numbits.numbits_to_nums </td>
          <td>(</td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert a numbits into a list of numbers.

Arguments:
    numbits: a binary blob, the packed number set.

Returns:
    A list of ints.

When registered as a SQLite function by :func:`register_sqlite_functions`,
this returns a string, a JSON-encoded list of ints.</pre> <div class="fragment"><div class="line"><span class="lineno">   44</span><span class="keyword">def </span>numbits_to_nums(numbits: bytes) -&gt; List[int]:</div>
<div class="line"><span class="lineno">   45</span>    <span class="stringliteral">&quot;&quot;&quot;Convert a numbits into a list of numbers.</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">    Arguments:</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">        numbits: a binary blob, the packed number set.</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">        A list of ints.</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    When registered as a SQLite function by :func:`register_sqlite_functions`,</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    this returns a string, a JSON-encoded list of ints.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   57</span>    nums = []</div>
<div class="line"><span class="lineno">   58</span>    <span class="keywordflow">for</span> byte_i, byte <span class="keywordflow">in</span> enumerate(numbits):</div>
<div class="line"><span class="lineno">   59</span>        <span class="keywordflow">for</span> bit_i <span class="keywordflow">in</span> range(8):</div>
<div class="line"><span class="lineno">   60</span>            <span class="keywordflow">if</span> (byte &amp; (1 &lt;&lt; bit_i)):</div>
<div class="line"><span class="lineno">   61</span>                nums.append(byte_i * 8 + bit_i)</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">return</span> nums</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a30eed642dc823a55fb6540ca58dee2ca" name="a30eed642dc823a55fb6540ca58dee2ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30eed642dc823a55fb6540ca58dee2ca">&#9670;&#160;</a></span>numbits_union()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bytes coverage.numbits.numbits_union </td>
          <td>(</td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bytes&#160;</td>
          <td class="paramname"><em>numbits2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute the union of two numbits.

Returns:
    A new numbits, the union of `numbits1` and `numbits2`.
</pre> <div class="fragment"><div class="line"><span class="lineno">   65</span><span class="keyword">def </span>numbits_union(numbits1: bytes, numbits2: bytes) -&gt; bytes:</div>
<div class="line"><span class="lineno">   66</span>    <span class="stringliteral">&quot;&quot;&quot;Compute the union of two numbits.</span></div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">        A new numbits, the union of `numbits1` and `numbits2`.</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   71</span>    byte_pairs = zip_longest(numbits1, numbits2, fillvalue=0)</div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordflow">return</span> bytes(b1 | b2 <span class="keywordflow">for</span> b1, b2 <span class="keywordflow">in</span> byte_pairs)</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a226dda3d94b71f8728b05241cf613b41" name="a226dda3d94b71f8728b05241cf613b41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a226dda3d94b71f8728b05241cf613b41">&#9670;&#160;</a></span>nums_to_numbits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bytes coverage.numbits.nums_to_numbits </td>
          <td>(</td>
          <td class="paramtype">Iterable[int]&#160;</td>
          <td class="paramname"><em>nums</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert `nums` into a numbits.

Arguments:
    nums: a reusable iterable of integers, the line numbers to store.

Returns:
    A binary blob.
</pre> <div class="fragment"><div class="line"><span class="lineno">   24</span><span class="keyword">def </span>nums_to_numbits(nums: Iterable[int]) -&gt; bytes:</div>
<div class="line"><span class="lineno">   25</span>    <span class="stringliteral">&quot;&quot;&quot;Convert `nums` into a numbits.</span></div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">    Arguments:</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">        nums: a reusable iterable of integers, the line numbers to store.</span></div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   30</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   31</span><span class="stringliteral">        A binary blob.</span></div>
<div class="line"><span class="lineno">   32</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   33</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   34</span>        nbytes = max(nums) // 8 + 1</div>
<div class="line"><span class="lineno">   35</span>    <span class="keywordflow">except</span> ValueError:</div>
<div class="line"><span class="lineno">   36</span>        <span class="comment"># nums was empty.</span></div>
<div class="line"><span class="lineno">   37</span>        <span class="keywordflow">return</span> b<span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><span class="lineno">   38</span>    b = bytearray(nbytes)</div>
<div class="line"><span class="lineno">   39</span>    <span class="keywordflow">for</span> num <span class="keywordflow">in</span> nums:</div>
<div class="line"><span class="lineno">   40</span>        b[num//8] |= 1 &lt;&lt; num % 8</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">return</span> bytes(b)</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a78a0cf6f1e11b5fc6696e826a743d08f" name="a78a0cf6f1e11b5fc6696e826a743d08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a0cf6f1e11b5fc6696e826a743d08f">&#9670;&#160;</a></span>register_sqlite_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None coverage.numbits.register_sqlite_functions </td>
          <td>(</td>
          <td class="paramtype">sqlite3.Connection&#160;</td>
          <td class="paramname"><em>connection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Define numbits functions in a SQLite connection.

This defines these functions for use in SQLite statements:

* :func:`numbits_union`
* :func:`numbits_intersection`
* :func:`numbits_any_intersection`
* :func:`num_in_numbits`
* :func:`numbits_to_nums`

`connection` is a :class:`sqlite3.Connection &lt;python:sqlite3.Connection&gt;`
object.  After creating the connection, pass it to this function to
register the numbits functions.  Then you can use numbits functions in your
queries::

    import sqlite3
    from coverage.numbits import register_sqlite_functions

    conn = sqlite3.connect('example.db')
    register_sqlite_functions(conn)
    c = conn.cursor()
    # Kind of a nonsense query:
    # Find all the files and contexts that executed line 47 in any file:
    c.execute(
        "select file_id, context_id from line_bits where num_in_numbits(?, numbits)",
        (47,)
    )
</pre> <div class="fragment"><div class="line"><span class="lineno">  111</span><span class="keyword">def </span>register_sqlite_functions(connection: sqlite3.Connection) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  112</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  113</span><span class="stringliteral">    Define numbits functions in a SQLite connection.</span></div>
<div class="line"><span class="lineno">  114</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  115</span><span class="stringliteral">    This defines these functions for use in SQLite statements:</span></div>
<div class="line"><span class="lineno">  116</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  117</span><span class="stringliteral">    * :func:`numbits_union`</span></div>
<div class="line"><span class="lineno">  118</span><span class="stringliteral">    * :func:`numbits_intersection`</span></div>
<div class="line"><span class="lineno">  119</span><span class="stringliteral">    * :func:`numbits_any_intersection`</span></div>
<div class="line"><span class="lineno">  120</span><span class="stringliteral">    * :func:`num_in_numbits`</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral">    * :func:`numbits_to_nums`</span></div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">    `connection` is a :class:`sqlite3.Connection &lt;python:sqlite3.Connection&gt;`</span></div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral">    object.  After creating the connection, pass it to this function to</span></div>
<div class="line"><span class="lineno">  125</span><span class="stringliteral">    register the numbits functions.  Then you can use numbits functions in your</span></div>
<div class="line"><span class="lineno">  126</span><span class="stringliteral">    queries::</span></div>
<div class="line"><span class="lineno">  127</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  128</span><span class="stringliteral">        import sqlite3</span></div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">        from coverage.numbits import register_sqlite_functions</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">        conn = sqlite3.connect(&#39;example.db&#39;)</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">        register_sqlite_functions(conn)</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">        c = conn.cursor()</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">        # Kind of a nonsense query:</span></div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">        # Find all the files and contexts that executed line 47 in any file:</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">        c.execute(</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">            &quot;select file_id, context_id from line_bits where num_in_numbits(?, numbits)&quot;,</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">            (47,)</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">        )</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  141</span>    connection.create_function(<span class="stringliteral">&quot;numbits_union&quot;</span>, 2, numbits_union)</div>
<div class="line"><span class="lineno">  142</span>    connection.create_function(<span class="stringliteral">&quot;numbits_intersection&quot;</span>, 2, numbits_intersection)</div>
<div class="line"><span class="lineno">  143</span>    connection.create_function(<span class="stringliteral">&quot;numbits_any_intersection&quot;</span>, 2, numbits_any_intersection)</div>
<div class="line"><span class="lineno">  144</span>    connection.create_function(<span class="stringliteral">&quot;num_in_numbits&quot;</span>, 2, num_in_numbits)</div>
<div class="line"><span class="lineno">  145</span>    connection.create_function(<span class="stringliteral">&quot;numbits_to_nums&quot;</span>, 1, <span class="keyword">lambda</span> b: json.dumps(numbits_to_nums(b)))</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
