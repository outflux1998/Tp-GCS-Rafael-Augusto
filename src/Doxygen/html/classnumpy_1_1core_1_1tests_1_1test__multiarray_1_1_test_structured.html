<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: numpy.core.tests.test_multiarray.TestStructured Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenumpy.html">numpy</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core.html">core</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core_1_1tests.html">tests</a></li><li class="navelem"><a class="el" href="namespacenumpy_1_1core_1_1tests_1_1test__multiarray.html">test_multiarray</a></li><li class="navelem"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html">TestStructured</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">numpy.core.tests.test_multiarray.TestStructured Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab70cedd852d7f3caef02cb9429027368" id="r_ab70cedd852d7f3caef02cb9429027368"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#ab70cedd852d7f3caef02cb9429027368">test_subarray_field_access</a> (self)</td></tr>
<tr class="separator:ab70cedd852d7f3caef02cb9429027368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e73125ca84f46292fcdcbb8c766c4c" id="r_a52e73125ca84f46292fcdcbb8c766c4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a52e73125ca84f46292fcdcbb8c766c4c">test_subarray_comparison</a> (self)</td></tr>
<tr class="separator:a52e73125ca84f46292fcdcbb8c766c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f656b2531b960f822258261b649224" id="r_ac9f656b2531b960f822258261b649224"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#ac9f656b2531b960f822258261b649224">test_empty_structured_array_comparison</a> (self)</td></tr>
<tr class="separator:ac9f656b2531b960f822258261b649224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ec9c1538fb3d81b0de706d4e223da1" id="r_af2ec9c1538fb3d81b0de706d4e223da1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#af2ec9c1538fb3d81b0de706d4e223da1">test_structured_comparisons_with_promotion</a> (self)</td></tr>
<tr class="separator:af2ec9c1538fb3d81b0de706d4e223da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae440153fea9b3388996d8fdf43d2214" id="r_aae440153fea9b3388996d8fdf43d2214"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#aae440153fea9b3388996d8fdf43d2214">test_void_comparison_failures</a> (self)</td></tr>
<tr class="separator:aae440153fea9b3388996d8fdf43d2214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc230ba90257818b933eb3c52d3e150" id="r_abfc230ba90257818b933eb3c52d3e150"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#abfc230ba90257818b933eb3c52d3e150">test_casting</a> (self)</td></tr>
<tr class="separator:abfc230ba90257818b933eb3c52d3e150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e289c1ae4ce1f5c24f68f0404e15f2" id="r_a58e289c1ae4ce1f5c24f68f0404e15f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a58e289c1ae4ce1f5c24f68f0404e15f2">test_objview</a> (self)</td></tr>
<tr class="separator:a58e289c1ae4ce1f5c24f68f0404e15f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7748ba92ff6517e5acc31ff4c4332a5e" id="r_a7748ba92ff6517e5acc31ff4c4332a5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a7748ba92ff6517e5acc31ff4c4332a5e">test_setfield</a> (self)</td></tr>
<tr class="separator:a7748ba92ff6517e5acc31ff4c4332a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47036843bcf204e51e96b2711dd1d5d0" id="r_a47036843bcf204e51e96b2711dd1d5d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a47036843bcf204e51e96b2711dd1d5d0">test_setfield_object</a> (self)</td></tr>
<tr class="separator:a47036843bcf204e51e96b2711dd1d5d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac830c921d2c72a9ee2b23518690b586f" id="r_ac830c921d2c72a9ee2b23518690b586f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#ac830c921d2c72a9ee2b23518690b586f">test_zero_width_string</a> (self)</td></tr>
<tr class="separator:ac830c921d2c72a9ee2b23518690b586f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad26fcf84fe1330d83371e3b6abd5cbf9" id="r_ad26fcf84fe1330d83371e3b6abd5cbf9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#ad26fcf84fe1330d83371e3b6abd5cbf9">test_base_attr</a> (self)</td></tr>
<tr class="separator:ad26fcf84fe1330d83371e3b6abd5cbf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fffc0a8b64df6f18e83013e4537e32d" id="r_a7fffc0a8b64df6f18e83013e4537e32d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a7fffc0a8b64df6f18e83013e4537e32d">test_assignment</a> (self)</td></tr>
<tr class="separator:a7fffc0a8b64df6f18e83013e4537e32d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71065d7340956b3f109a80c889eacb2" id="r_af71065d7340956b3f109a80c889eacb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#af71065d7340956b3f109a80c889eacb2">test_scalar_assignment</a> (self)</td></tr>
<tr class="separator:af71065d7340956b3f109a80c889eacb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab156d8399b43a6a5b2ee8bae2a312f07" id="r_ab156d8399b43a6a5b2ee8bae2a312f07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#ab156d8399b43a6a5b2ee8bae2a312f07">test_structuredscalar_indexing</a> (self)</td></tr>
<tr class="separator:ab156d8399b43a6a5b2ee8bae2a312f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32185518bfb2e77844b28288df56fe84" id="r_a32185518bfb2e77844b28288df56fe84"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a32185518bfb2e77844b28288df56fe84">test_multiindex_titles</a> (self)</td></tr>
<tr class="separator:a32185518bfb2e77844b28288df56fe84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673e0f02047bac9ce61b9453a7fcdff8" id="r_a673e0f02047bac9ce61b9453a7fcdff8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a673e0f02047bac9ce61b9453a7fcdff8">test_structured_cast_promotion_fieldorder</a> (self)</td></tr>
<tr class="separator:a673e0f02047bac9ce61b9453a7fcdff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a084caceb5a0a718d62c5a8b34d5409a5" id="r_a084caceb5a0a718d62c5a8b34d5409a5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a084caceb5a0a718d62c5a8b34d5409a5">test_structured_promotion_packs</a> (self, dtype_dict, align)</td></tr>
<tr class="separator:a084caceb5a0a718d62c5a8b34d5409a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0861369fc2afd8693b3a4ccb36bd11e2" id="r_a0861369fc2afd8693b3a4ccb36bd11e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnumpy_1_1core_1_1tests_1_1test__multiarray_1_1_test_structured.html#a0861369fc2afd8693b3a4ccb36bd11e2">test_structured_asarray_is_view</a> (self)</td></tr>
<tr class="separator:a0861369fc2afd8693b3a4ccb36bd11e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7fffc0a8b64df6f18e83013e4537e32d" name="a7fffc0a8b64df6f18e83013e4537e32d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fffc0a8b64df6f18e83013e4537e32d">&#9670;&#160;</a></span>test_assignment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_assignment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1468</span>    <span class="keyword">def </span>test_assignment(self):</div>
<div class="line"><span class="lineno"> 1469</span>        <span class="keyword">def </span>testassign(arr, v):</div>
<div class="line"><span class="lineno"> 1470</span>            c = arr.copy()</div>
<div class="line"><span class="lineno"> 1471</span>            c[0] = v  <span class="comment"># assign using setitem</span></div>
<div class="line"><span class="lineno"> 1472</span>            c[1:] = v <span class="comment"># assign using &quot;dtype_transfer&quot; code paths</span></div>
<div class="line"><span class="lineno"> 1473</span>            <span class="keywordflow">return</span> c</div>
<div class="line"><span class="lineno"> 1474</span> </div>
<div class="line"><span class="lineno"> 1475</span>        dt = np.dtype([(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1476</span>        arr = np.ones(2, dt)</div>
<div class="line"><span class="lineno"> 1477</span>        v1 = np.array([(2,3)], dtype=[(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1478</span>        v2 = np.array([(2,3)], dtype=[(<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1479</span>        v3 = np.array([(2,3)], dtype=[(<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;baz&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1480</span>        v4 = np.array([(2,)],  dtype=[(<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1481</span>        v5 = np.array([(2,3)], dtype=[(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>), (<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1482</span>        w = arr.view({<span class="stringliteral">&#39;names&#39;</span>: [<span class="stringliteral">&#39;bar&#39;</span>], <span class="stringliteral">&#39;formats&#39;</span>: [<span class="stringliteral">&#39;i8&#39;</span>], <span class="stringliteral">&#39;offsets&#39;</span>: [8]})</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>        ans = np.array([(2,3),(2,3)], dtype=dt)</div>
<div class="line"><span class="lineno"> 1485</span>        assert_equal(testassign(arr, v1), ans)</div>
<div class="line"><span class="lineno"> 1486</span>        assert_equal(testassign(arr, v2), ans)</div>
<div class="line"><span class="lineno"> 1487</span>        assert_equal(testassign(arr, v3), ans)</div>
<div class="line"><span class="lineno"> 1488</span>        assert_raises(TypeError, <span class="keyword">lambda</span>: testassign(arr, v4))</div>
<div class="line"><span class="lineno"> 1489</span>        assert_equal(testassign(arr, v5), ans)</div>
<div class="line"><span class="lineno"> 1490</span>        w[:] = 4</div>
<div class="line"><span class="lineno"> 1491</span>        assert_equal(arr, np.array([(1,4),(1,4)], dtype=dt))</div>
<div class="line"><span class="lineno"> 1492</span> </div>
<div class="line"><span class="lineno"> 1493</span>        <span class="comment"># test field-reordering, assignment by position, and self-assignment</span></div>
<div class="line"><span class="lineno"> 1494</span>        a = np.array([(1,2,3)],</div>
<div class="line"><span class="lineno"> 1495</span>                     dtype=[(<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;baz&#39;</span>, <span class="stringliteral">&#39;f4&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1496</span>        a[[<span class="stringliteral">&#39;foo&#39;</span>, <span class="stringliteral">&#39;bar&#39;</span>]] = a[[<span class="stringliteral">&#39;bar&#39;</span>, <span class="stringliteral">&#39;foo&#39;</span>]]</div>
<div class="line"><span class="lineno"> 1497</span>        assert_equal(a[0].item(), (2,1,3))</div>
<div class="line"><span class="lineno"> 1498</span> </div>
<div class="line"><span class="lineno"> 1499</span>        <span class="comment"># test that this works even for &#39;simple_unaligned&#39; structs</span></div>
<div class="line"><span class="lineno"> 1500</span>        <span class="comment"># (ie, that PyArray_EquivTypes cares about field order too)</span></div>
<div class="line"><span class="lineno"> 1501</span>        a = np.array([(1,2)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1502</span>        a[[<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;b&#39;</span>]] = a[[<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;a&#39;</span>]]</div>
<div class="line"><span class="lineno"> 1503</span>        assert_equal(a[0].item(), (2,1))</div>
<div class="line"><span class="lineno"> 1504</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ad26fcf84fe1330d83371e3b6abd5cbf9" name="ad26fcf84fe1330d83371e3b6abd5cbf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad26fcf84fe1330d83371e3b6abd5cbf9">&#9670;&#160;</a></span>test_base_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_base_attr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1463</span>    <span class="keyword">def </span>test_base_attr(self):</div>
<div class="line"><span class="lineno"> 1464</span>        a = np.zeros(3, dtype=<span class="stringliteral">&#39;i4,f4&#39;</span>)</div>
<div class="line"><span class="lineno"> 1465</span>        b = a[0]</div>
<div class="line"><span class="lineno"> 1466</span>        assert_(b.base <span class="keywordflow">is</span> a)</div>
<div class="line"><span class="lineno"> 1467</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="abfc230ba90257818b933eb3c52d3e150" name="abfc230ba90257818b933eb3c52d3e150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfc230ba90257818b933eb3c52d3e150">&#9670;&#160;</a></span>test_casting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_casting </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1315</span>    <span class="keyword">def </span>test_casting(self):</div>
<div class="line"><span class="lineno"> 1316</span>        <span class="comment"># Check that casting a structured array to change its byte order</span></div>
<div class="line"><span class="lineno"> 1317</span>        <span class="comment"># works</span></div>
<div class="line"><span class="lineno"> 1318</span>        a = np.array([(1,)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;i4&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1319</span>        assert_(np.can_cast(a.dtype, [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i4&#39;</span>)], casting=<span class="stringliteral">&#39;unsafe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1320</span>        b = a.astype([(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i4&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1321</span>        assert_equal(b, a.byteswap().newbyteorder())</div>
<div class="line"><span class="lineno"> 1322</span>        assert_equal(a[<span class="stringliteral">&#39;a&#39;</span>][0], b[<span class="stringliteral">&#39;a&#39;</span>][0])</div>
<div class="line"><span class="lineno"> 1323</span> </div>
<div class="line"><span class="lineno"> 1324</span>        <span class="comment"># Check that equality comparison works on structured arrays if</span></div>
<div class="line"><span class="lineno"> 1325</span>        <span class="comment"># they are &#39;equiv&#39;-castable</span></div>
<div class="line"><span class="lineno"> 1326</span>        a = np.array([(5, 42), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i4&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1327</span>        b = np.array([(5, 42), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;i4&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&gt;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1328</span>        assert_(np.can_cast(a.dtype, b.dtype, casting=<span class="stringliteral">&#39;equiv&#39;</span>))</div>
<div class="line"><span class="lineno"> 1329</span>        assert_equal(a == b, [<span class="keyword">True</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1330</span> </div>
<div class="line"><span class="lineno"> 1331</span>        <span class="comment"># Check that &#39;equiv&#39; casting can change byte order</span></div>
<div class="line"><span class="lineno"> 1332</span>        assert_(np.can_cast(a.dtype, b.dtype, casting=<span class="stringliteral">&#39;equiv&#39;</span>))</div>
<div class="line"><span class="lineno"> 1333</span>        c = a.astype(b.dtype, casting=<span class="stringliteral">&#39;equiv&#39;</span>)</div>
<div class="line"><span class="lineno"> 1334</span>        assert_equal(a == c, [<span class="keyword">True</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1335</span> </div>
<div class="line"><span class="lineno"> 1336</span>        <span class="comment"># Check that &#39;safe&#39; casting can change byte order and up-cast</span></div>
<div class="line"><span class="lineno"> 1337</span>        <span class="comment"># fields</span></div>
<div class="line"><span class="lineno"> 1338</span>        t = [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;i8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&gt;f8&#39;</span>)]</div>
<div class="line"><span class="lineno"> 1339</span>        assert_(np.can_cast(a.dtype, t, casting=<span class="stringliteral">&#39;safe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1340</span>        c = a.astype(t, casting=<span class="stringliteral">&#39;safe&#39;</span>)</div>
<div class="line"><span class="lineno"> 1341</span>        assert_equal((c == np.array([(5, 42), (10, 1)], dtype=t)),</div>
<div class="line"><span class="lineno"> 1342</span>                     [<span class="keyword">True</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1343</span> </div>
<div class="line"><span class="lineno"> 1344</span>        <span class="comment"># Check that &#39;same_kind&#39; casting can change byte order and</span></div>
<div class="line"><span class="lineno"> 1345</span>        <span class="comment"># change field widths within a &quot;kind&quot;</span></div>
<div class="line"><span class="lineno"> 1346</span>        t = [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;i4&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&gt;f4&#39;</span>)]</div>
<div class="line"><span class="lineno"> 1347</span>        assert_(np.can_cast(a.dtype, t, casting=<span class="stringliteral">&#39;same_kind&#39;</span>))</div>
<div class="line"><span class="lineno"> 1348</span>        c = a.astype(t, casting=<span class="stringliteral">&#39;same_kind&#39;</span>)</div>
<div class="line"><span class="lineno"> 1349</span>        assert_equal((c == np.array([(5, 42), (10, 1)], dtype=t)),</div>
<div class="line"><span class="lineno"> 1350</span>                     [<span class="keyword">True</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1351</span> </div>
<div class="line"><span class="lineno"> 1352</span>        <span class="comment"># Check that casting fails if the casting rule should fail on</span></div>
<div class="line"><span class="lineno"> 1353</span>        <span class="comment"># any of the fields</span></div>
<div class="line"><span class="lineno"> 1354</span>        t = [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&lt;f4&#39;</span>)]</div>
<div class="line"><span class="lineno"> 1355</span>        assert_(<span class="keywordflow">not</span> np.can_cast(a.dtype, t, casting=<span class="stringliteral">&#39;safe&#39;</span>))</div>
<div class="line"><span class="lineno"> 1356</span>        assert_raises(TypeError, a.astype, t, casting=<span class="stringliteral">&#39;safe&#39;</span>)</div>
<div class="line"><span class="lineno"> 1357</span>        t = [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i2&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>)]</div>
<div class="line"><span class="lineno"> 1358</span>        assert_(<span class="keywordflow">not</span> np.can_cast(a.dtype, t, casting=<span class="stringliteral">&#39;equiv&#39;</span>))</div>
<div class="line"><span class="lineno"> 1359</span>        assert_raises(TypeError, a.astype, t, casting=<span class="stringliteral">&#39;equiv&#39;</span>)</div>
<div class="line"><span class="lineno"> 1360</span>        t = [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&lt;i2&#39;</span>)]</div>
<div class="line"><span class="lineno"> 1361</span>        assert_(<span class="keywordflow">not</span> np.can_cast(a.dtype, t, casting=<span class="stringliteral">&#39;same_kind&#39;</span>))</div>
<div class="line"><span class="lineno"> 1362</span>        assert_raises(TypeError, a.astype, t, casting=<span class="stringliteral">&#39;same_kind&#39;</span>)</div>
<div class="line"><span class="lineno"> 1363</span>        assert_(<span class="keywordflow">not</span> np.can_cast(a.dtype, b.dtype, casting=<span class="stringliteral">&#39;no&#39;</span>))</div>
<div class="line"><span class="lineno"> 1364</span>        assert_raises(TypeError, a.astype, b.dtype, casting=<span class="stringliteral">&#39;no&#39;</span>)</div>
<div class="line"><span class="lineno"> 1365</span> </div>
<div class="line"><span class="lineno"> 1366</span>        <span class="comment"># Check that non-&#39;unsafe&#39; casting can&#39;t change the set of field names</span></div>
<div class="line"><span class="lineno"> 1367</span>        <span class="keywordflow">for</span> casting <span class="keywordflow">in</span> [<span class="stringliteral">&#39;no&#39;</span>, <span class="stringliteral">&#39;safe&#39;</span>, <span class="stringliteral">&#39;equiv&#39;</span>, <span class="stringliteral">&#39;same_kind&#39;</span>]:</div>
<div class="line"><span class="lineno"> 1368</span>            t = [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i4&#39;</span>)]</div>
<div class="line"><span class="lineno"> 1369</span>            assert_(<span class="keywordflow">not</span> np.can_cast(a.dtype, t, casting=casting))</div>
<div class="line"><span class="lineno"> 1370</span>            t = [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i4&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>), (<span class="stringliteral">&#39;c&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)]</div>
<div class="line"><span class="lineno"> 1371</span>            assert_(<span class="keywordflow">not</span> np.can_cast(a.dtype, t, casting=casting))</div>
<div class="line"><span class="lineno"> 1372</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9f656b2531b960f822258261b649224" name="ac9f656b2531b960f822258261b649224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f656b2531b960f822258261b649224">&#9670;&#160;</a></span>test_empty_structured_array_comparison()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_empty_structured_array_comparison </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1262</span>    <span class="keyword">def </span>test_empty_structured_array_comparison(self):</div>
<div class="line"><span class="lineno"> 1263</span>        <span class="comment"># Check that comparison works on empty arrays with nontrivially</span></div>
<div class="line"><span class="lineno"> 1264</span>        <span class="comment"># shaped fields</span></div>
<div class="line"><span class="lineno"> 1265</span>        a = np.zeros(0, [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>, (1, 1))])</div>
<div class="line"><span class="lineno"> 1266</span>        assert_equal(a, a)</div>
<div class="line"><span class="lineno"> 1267</span>        a = np.zeros(0, [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>, (1,))])</div>
<div class="line"><span class="lineno"> 1268</span>        assert_equal(a, a)</div>
<div class="line"><span class="lineno"> 1269</span>        a = np.zeros((0, 0), [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>, (1, 1))])</div>
<div class="line"><span class="lineno"> 1270</span>        assert_equal(a, a)</div>
<div class="line"><span class="lineno"> 1271</span>        a = np.zeros((1, 0, 1), [(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>, (1, 1))])</div>
<div class="line"><span class="lineno"> 1272</span>        assert_equal(a, a)</div>
<div class="line"><span class="lineno"> 1273</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a32185518bfb2e77844b28288df56fe84" name="a32185518bfb2e77844b28288df56fe84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32185518bfb2e77844b28288df56fe84">&#9670;&#160;</a></span>test_multiindex_titles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_multiindex_titles </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1516</span>    <span class="keyword">def </span>test_multiindex_titles(self):</div>
<div class="line"><span class="lineno"> 1517</span>        a = np.zeros(4, dtype=[((<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;b&#39;</span>), <span class="stringliteral">&#39;i&#39;</span>), (<span class="stringliteral">&#39;c&#39;</span>, <span class="stringliteral">&#39;i&#39;</span>), (<span class="stringliteral">&#39;d&#39;</span>, <span class="stringliteral">&#39;i&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1518</span>        assert_raises(KeyError, <span class="keyword">lambda</span> : a[[<span class="stringliteral">&#39;a&#39;</span>,<span class="stringliteral">&#39;c&#39;</span>]])</div>
<div class="line"><span class="lineno"> 1519</span>        assert_raises(KeyError, <span class="keyword">lambda</span> : a[[<span class="stringliteral">&#39;a&#39;</span>,<span class="stringliteral">&#39;a&#39;</span>]])</div>
<div class="line"><span class="lineno"> 1520</span>        assert_raises(ValueError, <span class="keyword">lambda</span> : a[[<span class="stringliteral">&#39;b&#39;</span>,<span class="stringliteral">&#39;b&#39;</span>]])  <span class="comment"># field exists, but repeated</span></div>
<div class="line"><span class="lineno"> 1521</span>        a[[<span class="stringliteral">&#39;b&#39;</span>,<span class="stringliteral">&#39;c&#39;</span>]]  <span class="comment"># no exception</span></div>
<div class="line"><span class="lineno"> 1522</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a58e289c1ae4ce1f5c24f68f0404e15f2" name="a58e289c1ae4ce1f5c24f68f0404e15f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58e289c1ae4ce1f5c24f68f0404e15f2">&#9670;&#160;</a></span>test_objview()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_objview </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1373</span>    <span class="keyword">def </span>test_objview(self):</div>
<div class="line"><span class="lineno"> 1374</span>        <span class="comment"># https://github.com/numpy/numpy/issues/3286</span></div>
<div class="line"><span class="lineno"> 1375</span>        a = np.array([], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;f&#39;</span>), (<span class="stringliteral">&#39;c&#39;</span>, <span class="stringliteral">&#39;O&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1376</span>        a[[<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;b&#39;</span>]]  <span class="comment"># TypeError?</span></div>
<div class="line"><span class="lineno"> 1377</span> </div>
<div class="line"><span class="lineno"> 1378</span>        <span class="comment"># https://github.com/numpy/numpy/issues/3253</span></div>
<div class="line"><span class="lineno"> 1379</span>        dat2 = np.zeros(3, [(<span class="stringliteral">&#39;A&#39;</span>, <span class="stringliteral">&#39;i&#39;</span>), (<span class="stringliteral">&#39;B&#39;</span>, <span class="stringliteral">&#39;|O&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1380</span>        dat2[[<span class="stringliteral">&#39;B&#39;</span>, <span class="stringliteral">&#39;A&#39;</span>]]  <span class="comment"># TypeError?</span></div>
<div class="line"><span class="lineno"> 1381</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af71065d7340956b3f109a80c889eacb2" name="af71065d7340956b3f109a80c889eacb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71065d7340956b3f109a80c889eacb2">&#9670;&#160;</a></span>test_scalar_assignment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_scalar_assignment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1505</span>    <span class="keyword">def </span>test_scalar_assignment(self):</div>
<div class="line"><span class="lineno"> 1506</span>        <span class="keyword">with</span> assert_raises(ValueError):</div>
<div class="line"><span class="lineno"> 1507</span>            arr = np.arange(25).reshape(5, 5)</div>
<div class="line"><span class="lineno"> 1508</span>            arr.itemset(3)</div>
<div class="line"><span class="lineno"> 1509</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a7748ba92ff6517e5acc31ff4c4332a5e" name="a7748ba92ff6517e5acc31ff4c4332a5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7748ba92ff6517e5acc31ff4c4332a5e">&#9670;&#160;</a></span>test_setfield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_setfield </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1382</span>    <span class="keyword">def </span>test_setfield(self):</div>
<div class="line"><span class="lineno"> 1383</span>        <span class="comment"># https://github.com/numpy/numpy/issues/3126</span></div>
<div class="line"><span class="lineno"> 1384</span>        struct_dt = np.dtype([(<span class="stringliteral">&#39;elem&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>, 5),])</div>
<div class="line"><span class="lineno"> 1385</span>        dt = np.dtype([(<span class="stringliteral">&#39;field&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>, 10),(<span class="stringliteral">&#39;struct&#39;</span>, struct_dt)])</div>
<div class="line"><span class="lineno"> 1386</span>        x = np.zeros(1, dt)</div>
<div class="line"><span class="lineno"> 1387</span>        x[0][<span class="stringliteral">&#39;field&#39;</span>] = np.ones(10, dtype=<span class="stringliteral">&#39;i4&#39;</span>)</div>
<div class="line"><span class="lineno"> 1388</span>        x[0][<span class="stringliteral">&#39;struct&#39;</span>] = np.ones(1, dtype=struct_dt)</div>
<div class="line"><span class="lineno"> 1389</span>        assert_equal(x[0][<span class="stringliteral">&#39;field&#39;</span>], np.ones(10, dtype=<span class="stringliteral">&#39;i4&#39;</span>))</div>
<div class="line"><span class="lineno"> 1390</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a47036843bcf204e51e96b2711dd1d5d0" name="a47036843bcf204e51e96b2711dd1d5d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47036843bcf204e51e96b2711dd1d5d0">&#9670;&#160;</a></span>test_setfield_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_setfield_object </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1391</span>    <span class="keyword">def </span>test_setfield_object(self):</div>
<div class="line"><span class="lineno"> 1392</span>        <span class="comment"># make sure object field assignment with ndarray value</span></div>
<div class="line"><span class="lineno"> 1393</span>        <span class="comment"># on void scalar mimics setitem behavior</span></div>
<div class="line"><span class="lineno"> 1394</span>        b = np.zeros(1, dtype=[(<span class="stringliteral">&#39;x&#39;</span>, <span class="stringliteral">&#39;O&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1395</span>        <span class="comment"># next line should work identically to b[&#39;x&#39;][0] = np.arange(3)</span></div>
<div class="line"><span class="lineno"> 1396</span>        b[0][<span class="stringliteral">&#39;x&#39;</span>] = np.arange(3)</div>
<div class="line"><span class="lineno"> 1397</span>        assert_equal(b[0][<span class="stringliteral">&#39;x&#39;</span>], np.arange(3))</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>        <span class="comment"># check that broadcasting check still works</span></div>
<div class="line"><span class="lineno"> 1400</span>        c = np.zeros(1, dtype=[(<span class="stringliteral">&#39;x&#39;</span>, <span class="stringliteral">&#39;O&#39;</span>, 5)])</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>        <span class="keyword">def </span>testassign():</div>
<div class="line"><span class="lineno"> 1403</span>            c[0][<span class="stringliteral">&#39;x&#39;</span>] = np.arange(3)</div>
<div class="line"><span class="lineno"> 1404</span> </div>
<div class="line"><span class="lineno"> 1405</span>        assert_raises(ValueError, testassign)</div>
<div class="line"><span class="lineno"> 1406</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0861369fc2afd8693b3a4ccb36bd11e2" name="a0861369fc2afd8693b3a4ccb36bd11e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0861369fc2afd8693b3a4ccb36bd11e2">&#9670;&#160;</a></span>test_structured_asarray_is_view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_structured_asarray_is_view </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1592</span>    <span class="keyword">def </span>test_structured_asarray_is_view(self):</div>
<div class="line"><span class="lineno"> 1593</span>        <span class="comment"># A scalar viewing an array preserves its view even when creating a</span></div>
<div class="line"><span class="lineno"> 1594</span>        <span class="comment"># new array. This test documents behaviour, it may not be the best</span></div>
<div class="line"><span class="lineno"> 1595</span>        <span class="comment"># desired behaviour.</span></div>
<div class="line"><span class="lineno"> 1596</span>        arr = np.array([1], dtype=<span class="stringliteral">&quot;i,i&quot;</span>)</div>
<div class="line"><span class="lineno"> 1597</span>        scalar = arr[0]</div>
<div class="line"><span class="lineno"> 1598</span>        <span class="keyword">assert</span> <span class="keywordflow">not</span> scalar.flags.owndata  <span class="comment"># view into the array</span></div>
<div class="line"><span class="lineno"> 1599</span>        <span class="keyword">assert</span> np.asarray(scalar).base <span class="keywordflow">is</span> scalar</div>
<div class="line"><span class="lineno"> 1600</span>        <span class="comment"># But never when a dtype is passed in:</span></div>
<div class="line"><span class="lineno"> 1601</span>        <span class="keyword">assert</span> np.asarray(scalar, dtype=scalar.dtype).base <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1602</span>        <span class="comment"># A scalar which owns its data does not have this property.</span></div>
<div class="line"><span class="lineno"> 1603</span>        <span class="comment"># It is not easy to create one, one method is to use pickle:</span></div>
<div class="line"><span class="lineno"> 1604</span>        scalar = pickle.loads(pickle.dumps(scalar))</div>
<div class="line"><span class="lineno"> 1605</span>        <span class="keyword">assert</span> scalar.flags.owndata</div>
<div class="line"><span class="lineno"> 1606</span>        <span class="keyword">assert</span> np.asarray(scalar).base <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1607</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a673e0f02047bac9ce61b9453a7fcdff8" name="a673e0f02047bac9ce61b9453a7fcdff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673e0f02047bac9ce61b9453a7fcdff8">&#9670;&#160;</a></span>test_structured_cast_promotion_fieldorder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_structured_cast_promotion_fieldorder </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1523</span>    <span class="keyword">def </span>test_structured_cast_promotion_fieldorder(self):</div>
<div class="line"><span class="lineno"> 1524</span>        <span class="comment"># gh-15494</span></div>
<div class="line"><span class="lineno"> 1525</span>        <span class="comment"># dtypes with different field names are not promotable</span></div>
<div class="line"><span class="lineno"> 1526</span>        A = (<span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;&lt;i8&quot;</span>)</div>
<div class="line"><span class="lineno"> 1527</span>        B = (<span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;&gt;i8&quot;</span>)</div>
<div class="line"><span class="lineno"> 1528</span>        ab = np.array([(1, 2)], dtype=[A, B])</div>
<div class="line"><span class="lineno"> 1529</span>        ba = np.array([(1, 2)], dtype=[B, A])</div>
<div class="line"><span class="lineno"> 1530</span>        assert_raises(TypeError, np.concatenate, ab, ba)</div>
<div class="line"><span class="lineno"> 1531</span>        assert_raises(TypeError, np.result_type, ab.dtype, ba.dtype)</div>
<div class="line"><span class="lineno"> 1532</span>        assert_raises(TypeError, np.promote_types, ab.dtype, ba.dtype)</div>
<div class="line"><span class="lineno"> 1533</span> </div>
<div class="line"><span class="lineno"> 1534</span>        <span class="comment"># dtypes with same field names/order but different memory offsets</span></div>
<div class="line"><span class="lineno"> 1535</span>        <span class="comment"># and byte-order are promotable to packed nbo.</span></div>
<div class="line"><span class="lineno"> 1536</span>        assert_equal(np.promote_types(ab.dtype, ba[[<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;b&#39;</span>]].dtype),</div>
<div class="line"><span class="lineno"> 1537</span>                     repack_fields(ab.dtype.newbyteorder(<span class="stringliteral">&#39;N&#39;</span>)))</div>
<div class="line"><span class="lineno"> 1538</span> </div>
<div class="line"><span class="lineno"> 1539</span>        <span class="comment"># gh-13667</span></div>
<div class="line"><span class="lineno"> 1540</span>        <span class="comment"># dtypes with different fieldnames but castable field types are castable</span></div>
<div class="line"><span class="lineno"> 1541</span>        assert_equal(np.can_cast(ab.dtype, ba.dtype), <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1542</span>        assert_equal(ab.astype(ba.dtype).dtype, ba.dtype)</div>
<div class="line"><span class="lineno"> 1543</span>        assert_equal(np.can_cast(<span class="stringliteral">&#39;f8,i8&#39;</span>, [(<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>), (<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)]), <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1544</span>        assert_equal(np.can_cast(<span class="stringliteral">&#39;f8,i8&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>), (<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)]), <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1545</span>        assert_equal(np.can_cast(<span class="stringliteral">&#39;f8,i8&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>)]), <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1546</span>        assert_equal(np.can_cast(<span class="stringliteral">&#39;f8,i8&#39;</span>, [(<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>)],</div>
<div class="line"><span class="lineno"> 1547</span>                                 casting=<span class="stringliteral">&#39;unsafe&#39;</span>), <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1548</span> </div>
<div class="line"><span class="lineno"> 1549</span>        ab[:] = ba  <span class="comment"># make sure assignment still works</span></div>
<div class="line"><span class="lineno"> 1550</span> </div>
<div class="line"><span class="lineno"> 1551</span>        <span class="comment"># tests of type-promotion of corresponding fields</span></div>
<div class="line"><span class="lineno"> 1552</span>        dt1 = np.dtype([(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;i4&quot;</span>)])</div>
<div class="line"><span class="lineno"> 1553</span>        dt2 = np.dtype([(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;i8&quot;</span>)])</div>
<div class="line"><span class="lineno"> 1554</span>        assert_equal(np.promote_types(dt1, dt2), np.dtype([(<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)]))</div>
<div class="line"><span class="lineno"> 1555</span>        assert_equal(np.promote_types(dt2, dt1), np.dtype([(<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)]))</div>
<div class="line"><span class="lineno"> 1556</span>        assert_raises(TypeError, np.promote_types, dt1, np.dtype([(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;V3&quot;</span>)]))</div>
<div class="line"><span class="lineno"> 1557</span>        assert_equal(np.promote_types(<span class="stringliteral">&#39;i4,f8&#39;</span>, <span class="stringliteral">&#39;i8,f4&#39;</span>),</div>
<div class="line"><span class="lineno"> 1558</span>                     np.dtype([(<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>), (<span class="stringliteral">&#39;f1&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>)]))</div>
<div class="line"><span class="lineno"> 1559</span>        <span class="comment"># test nested case</span></div>
<div class="line"><span class="lineno"> 1560</span>        dt1nest = np.dtype([(<span class="stringliteral">&quot;&quot;</span>, dt1)])</div>
<div class="line"><span class="lineno"> 1561</span>        dt2nest = np.dtype([(<span class="stringliteral">&quot;&quot;</span>, dt2)])</div>
<div class="line"><span class="lineno"> 1562</span>        assert_equal(np.promote_types(dt1nest, dt2nest),</div>
<div class="line"><span class="lineno"> 1563</span>                     np.dtype([(<span class="stringliteral">&#39;f0&#39;</span>, np.dtype([(<span class="stringliteral">&#39;f0&#39;</span>, <span class="stringliteral">&#39;i8&#39;</span>)]))]))</div>
<div class="line"><span class="lineno"> 1564</span> </div>
<div class="line"><span class="lineno"> 1565</span>        <span class="comment"># note that offsets are lost when promoting:</span></div>
<div class="line"><span class="lineno"> 1566</span>        dt = np.dtype({<span class="stringliteral">&#39;names&#39;</span>: [<span class="stringliteral">&#39;x&#39;</span>], <span class="stringliteral">&#39;formats&#39;</span>: [<span class="stringliteral">&#39;i4&#39;</span>], <span class="stringliteral">&#39;offsets&#39;</span>: [8]})</div>
<div class="line"><span class="lineno"> 1567</span>        a = np.ones(3, dtype=dt)</div>
<div class="line"><span class="lineno"> 1568</span>        assert_equal(np.concatenate([a, a]).dtype, np.dtype([(<span class="stringliteral">&#39;x&#39;</span>, <span class="stringliteral">&#39;i4&#39;</span>)]))</div>
<div class="line"><span class="lineno"> 1569</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af2ec9c1538fb3d81b0de706d4e223da1" name="af2ec9c1538fb3d81b0de706d4e223da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2ec9c1538fb3d81b0de706d4e223da1">&#9670;&#160;</a></span>test_structured_comparisons_with_promotion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_structured_comparisons_with_promotion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1274</span>    <span class="keyword">def </span>test_structured_comparisons_with_promotion(self):</div>
<div class="line"><span class="lineno"> 1275</span>        <span class="comment"># Check that structured arrays can be compared so long as their</span></div>
<div class="line"><span class="lineno"> 1276</span>        <span class="comment"># dtypes promote fine:</span></div>
<div class="line"><span class="lineno"> 1277</span>        a = np.array([(5, 42), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1278</span>        b = np.array([(5, 43), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;i8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&gt;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1279</span>        assert_equal(a == b, [<span class="keyword">False</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1280</span>        assert_equal(a != b, [<span class="keyword">True</span>, <span class="keyword">False</span>])</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>        a = np.array([(5, 42), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&gt;f8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&lt;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1283</span>        b = np.array([(5, 43), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;&lt;i8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;&gt;i8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1284</span>        assert_equal(a == b, [<span class="keyword">False</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1285</span>        assert_equal(a != b, [<span class="keyword">True</span>, <span class="keyword">False</span>])</div>
<div class="line"><span class="lineno"> 1286</span> </div>
<div class="line"><span class="lineno"> 1287</span>        <span class="comment"># Including with embedded subarray dtype (although subarray comparison</span></div>
<div class="line"><span class="lineno"> 1288</span>        <span class="comment"># itself may still be a bit weird and compare the raw data)</span></div>
<div class="line"><span class="lineno"> 1289</span>        a = np.array([(5, 42), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;10&gt;f8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;5&lt;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1290</span>        b = np.array([(5, 43), (10, 1)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;10&lt;i8&#39;</span>), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;5&gt;i8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1291</span>        assert_equal(a == b, [<span class="keyword">False</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1292</span>        assert_equal(a != b, [<span class="keyword">True</span>, <span class="keyword">False</span>])</div>
<div class="line"><span class="lineno"> 1293</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a084caceb5a0a718d62c5a8b34d5409a5" name="a084caceb5a0a718d62c5a8b34d5409a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a084caceb5a0a718d62c5a8b34d5409a5">&#9670;&#160;</a></span>test_structured_promotion_packs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_structured_promotion_packs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dtype_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>align</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1575</span>    <span class="keyword">def </span>test_structured_promotion_packs(self, dtype_dict, align):</div>
<div class="line"><span class="lineno"> 1576</span>        <span class="comment"># Structured dtypes are packed when promoted (we consider the packed</span></div>
<div class="line"><span class="lineno"> 1577</span>        <span class="comment"># form to be &quot;canonical&quot;), so tere is no extra padding.</span></div>
<div class="line"><span class="lineno"> 1578</span>        dtype = np.dtype(dtype_dict, align=align)</div>
<div class="line"><span class="lineno"> 1579</span>        <span class="comment"># Remove non &quot;canonical&quot; dtype options:</span></div>
<div class="line"><span class="lineno"> 1580</span>        dtype_dict.pop(<span class="stringliteral">&quot;itemsize&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1581</span>        dtype_dict.pop(<span class="stringliteral">&quot;offsets&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno"> 1582</span>        expected = np.dtype(dtype_dict, align=align)</div>
<div class="line"><span class="lineno"> 1583</span> </div>
<div class="line"><span class="lineno"> 1584</span>        res = np.promote_types(dtype, dtype)</div>
<div class="line"><span class="lineno"> 1585</span>        <span class="keyword">assert</span> res.itemsize == expected.itemsize</div>
<div class="line"><span class="lineno"> 1586</span>        <span class="keyword">assert</span> res.fields == expected.fields</div>
<div class="line"><span class="lineno"> 1587</span> </div>
<div class="line"><span class="lineno"> 1588</span>        <span class="comment"># But the &quot;expected&quot; one, should just be returned unchanged:</span></div>
<div class="line"><span class="lineno"> 1589</span>        res = np.promote_types(expected, expected)</div>
<div class="line"><span class="lineno"> 1590</span>        <span class="keyword">assert</span> res <span class="keywordflow">is</span> expected</div>
<div class="line"><span class="lineno"> 1591</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab156d8399b43a6a5b2ee8bae2a312f07" name="ab156d8399b43a6a5b2ee8bae2a312f07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab156d8399b43a6a5b2ee8bae2a312f07">&#9670;&#160;</a></span>test_structuredscalar_indexing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_structuredscalar_indexing </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1510</span>    <span class="keyword">def </span>test_structuredscalar_indexing(self):</div>
<div class="line"><span class="lineno"> 1511</span>        <span class="comment"># test gh-7262</span></div>
<div class="line"><span class="lineno"> 1512</span>        x = np.empty(shape=1, dtype=<span class="stringliteral">&quot;(2)3S,(2)3U&quot;</span>)</div>
<div class="line"><span class="lineno"> 1513</span>        assert_equal(x[[<span class="stringliteral">&quot;f0&quot;</span>,<span class="stringliteral">&quot;f1&quot;</span>]][0], x[0][[<span class="stringliteral">&quot;f0&quot;</span>,<span class="stringliteral">&quot;f1&quot;</span>]])</div>
<div class="line"><span class="lineno"> 1514</span>        assert_equal(x[0], x[0][()])</div>
<div class="line"><span class="lineno"> 1515</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a52e73125ca84f46292fcdcbb8c766c4c" name="a52e73125ca84f46292fcdcbb8c766c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52e73125ca84f46292fcdcbb8c766c4c">&#9670;&#160;</a></span>test_subarray_comparison()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_subarray_comparison </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1204</span>    <span class="keyword">def </span>test_subarray_comparison(self):</div>
<div class="line"><span class="lineno"> 1205</span>        <span class="comment"># Check that comparisons between record arrays with</span></div>
<div class="line"><span class="lineno"> 1206</span>        <span class="comment"># multi-dimensional field types work properly</span></div>
<div class="line"><span class="lineno"> 1207</span>        a = np.rec.fromrecords(</div>
<div class="line"><span class="lineno"> 1208</span>            [([1, 2, 3], <span class="stringliteral">&#39;a&#39;</span>, [[1, 2], [3, 4]]), ([3, 3, 3], <span class="stringliteral">&#39;b&#39;</span>, [[0, 0], [0, 0]])],</div>
<div class="line"><span class="lineno"> 1209</span>            dtype=[(<span class="stringliteral">&#39;a&#39;</span>, (<span class="stringliteral">&#39;f4&#39;</span>, 3)), (<span class="stringliteral">&#39;b&#39;</span>, object), (<span class="stringliteral">&#39;c&#39;</span>, (<span class="stringliteral">&#39;i4&#39;</span>, (2, 2)))])</div>
<div class="line"><span class="lineno"> 1210</span>        b = a.copy()</div>
<div class="line"><span class="lineno"> 1211</span>        assert_equal(a == b, [<span class="keyword">True</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1212</span>        assert_equal(a != b, [<span class="keyword">False</span>, <span class="keyword">False</span>])</div>
<div class="line"><span class="lineno"> 1213</span>        b[1].b = <span class="stringliteral">&#39;c&#39;</span></div>
<div class="line"><span class="lineno"> 1214</span>        assert_equal(a == b, [<span class="keyword">True</span>, <span class="keyword">False</span>])</div>
<div class="line"><span class="lineno"> 1215</span>        assert_equal(a != b, [<span class="keyword">False</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1216</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(3):</div>
<div class="line"><span class="lineno"> 1217</span>            b[0].a = a[0].a</div>
<div class="line"><span class="lineno"> 1218</span>            b[0].a[i] = 5</div>
<div class="line"><span class="lineno"> 1219</span>            assert_equal(a == b, [<span class="keyword">False</span>, <span class="keyword">False</span>])</div>
<div class="line"><span class="lineno"> 1220</span>            assert_equal(a != b, [<span class="keyword">True</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1221</span>        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(2):</div>
<div class="line"><span class="lineno"> 1222</span>            <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(2):</div>
<div class="line"><span class="lineno"> 1223</span>                b = a.copy()</div>
<div class="line"><span class="lineno"> 1224</span>                b[0].c[i, j] = 10</div>
<div class="line"><span class="lineno"> 1225</span>                assert_equal(a == b, [<span class="keyword">False</span>, <span class="keyword">True</span>])</div>
<div class="line"><span class="lineno"> 1226</span>                assert_equal(a != b, [<span class="keyword">True</span>, <span class="keyword">False</span>])</div>
<div class="line"><span class="lineno"> 1227</span> </div>
<div class="line"><span class="lineno"> 1228</span>        <span class="comment"># Check that broadcasting with a subarray works, including cases that</span></div>
<div class="line"><span class="lineno"> 1229</span>        <span class="comment"># require promotion to work:</span></div>
<div class="line"><span class="lineno"> 1230</span>        a = np.array([[(0,)], [(1,)]], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1231</span>        b = np.array([(0,), (0,), (1,)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1232</span>        assert_equal(a == b, [[<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1233</span>        assert_equal(b == a, [[<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1234</span>        a = np.array([[(0,)], [(1,)]], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>, (1,))])</div>
<div class="line"><span class="lineno"> 1235</span>        b = np.array([(0,), (0,), (1,)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>, (1,))])</div>
<div class="line"><span class="lineno"> 1236</span>        assert_equal(a == b, [[<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1237</span>        assert_equal(b == a, [[<span class="keyword">True</span>, <span class="keyword">True</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1238</span>        a = np.array([[([0, 0],)], [([1, 1],)]], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>, (2,))])</div>
<div class="line"><span class="lineno"> 1239</span>        b = np.array([([0, 0],), ([0, 1],), ([1, 1],)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>, (2,))])</div>
<div class="line"><span class="lineno"> 1240</span>        assert_equal(a == b, [[<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1241</span>        assert_equal(b == a, [[<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1242</span> </div>
<div class="line"><span class="lineno"> 1243</span>        <span class="comment"># Check that broadcasting Fortran-style arrays with a subarray work</span></div>
<div class="line"><span class="lineno"> 1244</span>        a = np.array([[([0, 0],)], [([1, 1],)]], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>, (2,))], order=<span class="stringliteral">&#39;F&#39;</span>)</div>
<div class="line"><span class="lineno"> 1245</span>        b = np.array([([0, 0],), ([0, 1],), ([1, 1],)], dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;f8&#39;</span>, (2,))])</div>
<div class="line"><span class="lineno"> 1246</span>        assert_equal(a == b, [[<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1247</span>        assert_equal(b == a, [[<span class="keyword">True</span>, <span class="keyword">False</span>, <span class="keyword">False</span>], [<span class="keyword">False</span>, <span class="keyword">False</span>, <span class="keyword">True</span>]])</div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span>        <span class="comment"># Check that incompatible sub-array shapes don&#39;t result to broadcasting</span></div>
<div class="line"><span class="lineno"> 1250</span>        x = np.zeros((1,), dtype=[(<span class="stringliteral">&#39;a&#39;</span>, (<span class="stringliteral">&#39;f4&#39;</span>, (1, 2))), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;i1&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1251</span>        y = np.zeros((1,), dtype=[(<span class="stringliteral">&#39;a&#39;</span>, (<span class="stringliteral">&#39;f4&#39;</span>, (2,))), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;i1&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1252</span>        <span class="comment"># The main importance is that it does not return True:</span></div>
<div class="line"><span class="lineno"> 1253</span>        <span class="keyword">with</span> pytest.raises(TypeError):</div>
<div class="line"><span class="lineno"> 1254</span>            x == y</div>
<div class="line"><span class="lineno"> 1255</span> </div>
<div class="line"><span class="lineno"> 1256</span>        x = np.zeros((1,), dtype=[(<span class="stringliteral">&#39;a&#39;</span>, (<span class="stringliteral">&#39;f4&#39;</span>, (2, 1))), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;i1&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1257</span>        y = np.zeros((1,), dtype=[(<span class="stringliteral">&#39;a&#39;</span>, (<span class="stringliteral">&#39;f4&#39;</span>, (2,))), (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;i1&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1258</span>        <span class="comment"># The main importance is that it does not return True:</span></div>
<div class="line"><span class="lineno"> 1259</span>        <span class="keyword">with</span> pytest.raises(TypeError):</div>
<div class="line"><span class="lineno"> 1260</span>            x == y</div>
<div class="line"><span class="lineno"> 1261</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab70cedd852d7f3caef02cb9429027368" name="ab70cedd852d7f3caef02cb9429027368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab70cedd852d7f3caef02cb9429027368">&#9670;&#160;</a></span>test_subarray_field_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_subarray_field_access </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1190</span>    <span class="keyword">def </span>test_subarray_field_access(self):</div>
<div class="line"><span class="lineno"> 1191</span>        a = np.zeros((3, 5), dtype=[(<span class="stringliteral">&#39;a&#39;</span>, (<span class="stringliteral">&#39;i4&#39;</span>, (2, 2)))])</div>
<div class="line"><span class="lineno"> 1192</span>        a[<span class="stringliteral">&#39;a&#39;</span>] = np.arange(60).reshape(3, 5, 2, 2)</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>        <span class="comment"># Since the subarray is always in C-order, a transpose</span></div>
<div class="line"><span class="lineno"> 1195</span>        <span class="comment"># does not swap the subarray:</span></div>
<div class="line"><span class="lineno"> 1196</span>        assert_array_equal(a.T[<span class="stringliteral">&#39;a&#39;</span>], a[<span class="stringliteral">&#39;a&#39;</span>].transpose(1, 0, 2, 3))</div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>        <span class="comment"># In Fortran order, the subarray gets appended</span></div>
<div class="line"><span class="lineno"> 1199</span>        <span class="comment"># like in all other cases, not prepended as a special case</span></div>
<div class="line"><span class="lineno"> 1200</span>        b = a.copy(order=<span class="stringliteral">&#39;F&#39;</span>)</div>
<div class="line"><span class="lineno"> 1201</span>        assert_equal(a[<span class="stringliteral">&#39;a&#39;</span>].shape, b[<span class="stringliteral">&#39;a&#39;</span>].shape)</div>
<div class="line"><span class="lineno"> 1202</span>        assert_equal(a.T[<span class="stringliteral">&#39;a&#39;</span>].shape, a.T.copy()[<span class="stringliteral">&#39;a&#39;</span>].shape)</div>
<div class="line"><span class="lineno"> 1203</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aae440153fea9b3388996d8fdf43d2214" name="aae440153fea9b3388996d8fdf43d2214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae440153fea9b3388996d8fdf43d2214">&#9670;&#160;</a></span>test_void_comparison_failures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_void_comparison_failures </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1294</span>    <span class="keyword">def </span>test_void_comparison_failures(self):</div>
<div class="line"><span class="lineno"> 1295</span>        <span class="comment"># In principle, one could decide to return an array of False for some</span></div>
<div class="line"><span class="lineno"> 1296</span>        <span class="comment"># if comparisons are impossible.  But right now we return TypeError</span></div>
<div class="line"><span class="lineno"> 1297</span>        <span class="comment"># when &quot;void&quot; dtype are involved.</span></div>
<div class="line"><span class="lineno"> 1298</span>        x = np.zeros(3, dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;i1&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1299</span>        y = np.zeros(3)</div>
<div class="line"><span class="lineno"> 1300</span>        <span class="comment"># Cannot compare non-structured to structured:</span></div>
<div class="line"><span class="lineno"> 1301</span>        <span class="keyword">with</span> pytest.raises(TypeError):</div>
<div class="line"><span class="lineno"> 1302</span>            x == y</div>
<div class="line"><span class="lineno"> 1303</span> </div>
<div class="line"><span class="lineno"> 1304</span>        <span class="comment"># Added title prevents promotion, but casts are OK:</span></div>
<div class="line"><span class="lineno"> 1305</span>        y = np.zeros(3, dtype=[((<span class="stringliteral">&#39;title&#39;</span>, <span class="stringliteral">&#39;a&#39;</span>), <span class="stringliteral">&#39;i1&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1306</span>        <span class="keyword">assert</span> np.can_cast(y.dtype, x.dtype)</div>
<div class="line"><span class="lineno"> 1307</span>        <span class="keyword">with</span> pytest.raises(TypeError):</div>
<div class="line"><span class="lineno"> 1308</span>            x == y</div>
<div class="line"><span class="lineno"> 1309</span> </div>
<div class="line"><span class="lineno"> 1310</span>        x = np.zeros(3, dtype=<span class="stringliteral">&quot;V7&quot;</span>)</div>
<div class="line"><span class="lineno"> 1311</span>        y = np.zeros(3, dtype=<span class="stringliteral">&quot;V8&quot;</span>)</div>
<div class="line"><span class="lineno"> 1312</span>        <span class="keyword">with</span> pytest.raises(TypeError):</div>
<div class="line"><span class="lineno"> 1313</span>            x == y</div>
<div class="line"><span class="lineno"> 1314</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ac830c921d2c72a9ee2b23518690b586f" name="ac830c921d2c72a9ee2b23518690b586f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac830c921d2c72a9ee2b23518690b586f">&#9670;&#160;</a></span>test_zero_width_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">numpy.core.tests.test_multiarray.TestStructured.test_zero_width_string </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1407</span>    <span class="keyword">def </span>test_zero_width_string(self):</div>
<div class="line"><span class="lineno"> 1408</span>        <span class="comment"># Test for PR #6430 / issues #473, #4955, #2585</span></div>
<div class="line"><span class="lineno"> 1409</span> </div>
<div class="line"><span class="lineno"> 1410</span>        dt = np.dtype([(<span class="stringliteral">&#39;I&#39;</span>, int), (<span class="stringliteral">&#39;S&#39;</span>, <span class="stringliteral">&#39;S0&#39;</span>)])</div>
<div class="line"><span class="lineno"> 1411</span> </div>
<div class="line"><span class="lineno"> 1412</span>        x = np.zeros(4, dtype=dt)</div>
<div class="line"><span class="lineno"> 1413</span> </div>
<div class="line"><span class="lineno"> 1414</span>        assert_equal(x[<span class="stringliteral">&#39;S&#39;</span>], [b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>])</div>
<div class="line"><span class="lineno"> 1415</span>        assert_equal(x[<span class="stringliteral">&#39;S&#39;</span>].itemsize, 0)</div>
<div class="line"><span class="lineno"> 1416</span> </div>
<div class="line"><span class="lineno"> 1417</span>        x[<span class="stringliteral">&#39;S&#39;</span>] = [<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;c&#39;</span>, <span class="stringliteral">&#39;d&#39;</span>]</div>
<div class="line"><span class="lineno"> 1418</span>        assert_equal(x[<span class="stringliteral">&#39;S&#39;</span>], [b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>])</div>
<div class="line"><span class="lineno"> 1419</span>        assert_equal(x[<span class="stringliteral">&#39;I&#39;</span>], [0, 0, 0, 0])</div>
<div class="line"><span class="lineno"> 1420</span> </div>
<div class="line"><span class="lineno"> 1421</span>        <span class="comment"># Variation on test case from #4955</span></div>
<div class="line"><span class="lineno"> 1422</span>        x[<span class="stringliteral">&#39;S&#39;</span>][x[<span class="stringliteral">&#39;I&#39;</span>] == 0] = <span class="stringliteral">&#39;hello&#39;</span></div>
<div class="line"><span class="lineno"> 1423</span>        assert_equal(x[<span class="stringliteral">&#39;S&#39;</span>], [b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>])</div>
<div class="line"><span class="lineno"> 1424</span>        assert_equal(x[<span class="stringliteral">&#39;I&#39;</span>], [0, 0, 0, 0])</div>
<div class="line"><span class="lineno"> 1425</span> </div>
<div class="line"><span class="lineno"> 1426</span>        <span class="comment"># Variation on test case from #2585</span></div>
<div class="line"><span class="lineno"> 1427</span>        x[<span class="stringliteral">&#39;S&#39;</span>] = <span class="stringliteral">&#39;A&#39;</span></div>
<div class="line"><span class="lineno"> 1428</span>        assert_equal(x[<span class="stringliteral">&#39;S&#39;</span>], [b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>])</div>
<div class="line"><span class="lineno"> 1429</span>        assert_equal(x[<span class="stringliteral">&#39;I&#39;</span>], [0, 0, 0, 0])</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>        <span class="comment"># Allow zero-width dtypes in ndarray constructor</span></div>
<div class="line"><span class="lineno"> 1432</span>        y = np.ndarray(4, dtype=x[<span class="stringliteral">&#39;S&#39;</span>].dtype)</div>
<div class="line"><span class="lineno"> 1433</span>        assert_equal(y.itemsize, 0)</div>
<div class="line"><span class="lineno"> 1434</span>        assert_equal(x[<span class="stringliteral">&#39;S&#39;</span>], y)</div>
<div class="line"><span class="lineno"> 1435</span> </div>
<div class="line"><span class="lineno"> 1436</span>        <span class="comment"># More tests for indexing an array with zero-width fields</span></div>
<div class="line"><span class="lineno"> 1437</span>        assert_equal(np.zeros(4, dtype=[(<span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;S0,S0&#39;</span>),</div>
<div class="line"><span class="lineno"> 1438</span>                                        (<span class="stringliteral">&#39;b&#39;</span>, <span class="stringliteral">&#39;u1&#39;</span>)])[<span class="stringliteral">&#39;a&#39;</span>].itemsize, 0)</div>
<div class="line"><span class="lineno"> 1439</span>        assert_equal(np.empty(3, dtype=<span class="stringliteral">&#39;S0,S0&#39;</span>).itemsize, 0)</div>
<div class="line"><span class="lineno"> 1440</span>        assert_equal(np.zeros(4, dtype=<span class="stringliteral">&#39;S0,u1&#39;</span>)[<span class="stringliteral">&#39;f0&#39;</span>].itemsize, 0)</div>
<div class="line"><span class="lineno"> 1441</span> </div>
<div class="line"><span class="lineno"> 1442</span>        xx = x[<span class="stringliteral">&#39;S&#39;</span>].reshape((2, 2))</div>
<div class="line"><span class="lineno"> 1443</span>        assert_equal(xx.itemsize, 0)</div>
<div class="line"><span class="lineno"> 1444</span>        assert_equal(xx, [[b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>], [b<span class="stringliteral">&#39;&#39;</span>, b<span class="stringliteral">&#39;&#39;</span>]])</div>
<div class="line"><span class="lineno"> 1445</span>        <span class="comment"># check for no uninitialized memory due to viewing S0 array</span></div>
<div class="line"><span class="lineno"> 1446</span>        assert_equal(xx[:].dtype, xx.dtype)</div>
<div class="line"><span class="lineno"> 1447</span>        assert_array_equal(eval(repr(xx), dict(array=np.array)), xx)</div>
<div class="line"><span class="lineno"> 1448</span> </div>
<div class="line"><span class="lineno"> 1449</span>        b = io.BytesIO()</div>
<div class="line"><span class="lineno"> 1450</span>        np.save(b, xx)</div>
<div class="line"><span class="lineno"> 1451</span> </div>
<div class="line"><span class="lineno"> 1452</span>        b.seek(0)</div>
<div class="line"><span class="lineno"> 1453</span>        yy = np.load(b)</div>
<div class="line"><span class="lineno"> 1454</span>        assert_equal(yy.itemsize, 0)</div>
<div class="line"><span class="lineno"> 1455</span>        assert_equal(xx, yy)</div>
<div class="line"><span class="lineno"> 1456</span> </div>
<div class="line"><span class="lineno"> 1457</span>        <span class="keyword">with</span> temppath(suffix=<span class="stringliteral">&#39;.npy&#39;</span>) <span class="keyword">as</span> tmp:</div>
<div class="line"><span class="lineno"> 1458</span>            np.save(tmp, xx)</div>
<div class="line"><span class="lineno"> 1459</span>            yy = np.load(tmp)</div>
<div class="line"><span class="lineno"> 1460</span>            assert_equal(yy.itemsize, 0)</div>
<div class="line"><span class="lineno"> 1461</span>            assert_equal(xx, yy)</div>
<div class="line"><span class="lineno"> 1462</span> </div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/rafael/Documents/GitHub/PUC-GCES-PY/Tp-GCS-Rafael-Augusto/venv/lib/python3.9/site-packages/numpy/core/tests/<a class="el" href="core_2tests_2test__multiarray_8py.html">test_multiarray.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
