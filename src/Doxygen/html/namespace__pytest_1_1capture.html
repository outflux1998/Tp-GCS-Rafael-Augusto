<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: _pytest.capture Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace__pytest.html">_pytest</a></li><li class="navelem"><a class="el" href="namespace__pytest_1_1capture.html">capture</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">_pytest.capture Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_capture_i_o.html">CaptureIO</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_capture_manager.html">CaptureManager</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_capture_result.html">CaptureResult</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_dont_read_from_input.html">DontReadFromInput</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_encoded_file.html">EncodedFile</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_f_d_capture.html">FDCapture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_f_d_capture_binary.html">FDCaptureBinary</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_multi_capture.html">MultiCapture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_no_capture.html">NoCapture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_sys_capture.html">SysCapture</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_sys_capture_binary.html">SysCaptureBinary</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__pytest_1_1capture_1_1_tee_capture_i_o.html">TeeCaptureIO</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a72aac3196c562f38fe639fead1e5ae2e" id="r_a72aac3196c562f38fe639fead1e5ae2e"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a72aac3196c562f38fe639fead1e5ae2e">pytest_addoption</a> (<a class="el" href="class__pytest_1_1config_1_1argparsing_1_1_parser.html">Parser</a> parser)</td></tr>
<tr class="separator:a72aac3196c562f38fe639fead1e5ae2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa523ebcaf82034a666e3ac3b77e466f5" id="r_aa523ebcaf82034a666e3ac3b77e466f5"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#aa523ebcaf82034a666e3ac3b77e466f5">_colorama_workaround</a> ()</td></tr>
<tr class="separator:aa523ebcaf82034a666e3ac3b77e466f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774bf124147b31b45d9b37003d172b87" id="r_a774bf124147b31b45d9b37003d172b87"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a774bf124147b31b45d9b37003d172b87">_windowsconsoleio_workaround</a> (TextIO stream)</td></tr>
<tr class="separator:a774bf124147b31b45d9b37003d172b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dbee5daf54b6536fdeb2936c85bedce" id="r_a5dbee5daf54b6536fdeb2936c85bedce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a5dbee5daf54b6536fdeb2936c85bedce">pytest_load_initial_conftests</a> (<a class="el" href="class__pytest_1_1config_1_1_config.html">Config</a> early_config)</td></tr>
<tr class="separator:a5dbee5daf54b6536fdeb2936c85bedce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d7b75cb7975013b13f22554357e2fa" id="r_a12d7b75cb7975013b13f22554357e2fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class__pytest_1_1capture_1_1_multi_capture.html">MultiCapture</a>[str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a12d7b75cb7975013b13f22554357e2fa">_get_multicapture</a> (&quot;_CaptureMethod&quot; method)</td></tr>
<tr class="separator:a12d7b75cb7975013b13f22554357e2fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c88aa3400b02f99945a9072aa25617d" id="r_a3c88aa3400b02f99945a9072aa25617d"><td class="memItemLeft" align="right" valign="top">Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[str], None, None]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a3c88aa3400b02f99945a9072aa25617d">capsys</a> (<a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a> request)</td></tr>
<tr class="separator:a3c88aa3400b02f99945a9072aa25617d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d99287e4e853129027ac9090a73ab7" id="r_a95d99287e4e853129027ac9090a73ab7"><td class="memItemLeft" align="right" valign="top">Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[bytes], None, None]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a95d99287e4e853129027ac9090a73ab7">capsysbinary</a> (<a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a> request)</td></tr>
<tr class="separator:a95d99287e4e853129027ac9090a73ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe903a501e72e0f4931a74d9db2fd41b" id="r_abe903a501e72e0f4931a74d9db2fd41b"><td class="memItemLeft" align="right" valign="top">Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[str], None, None]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#abe903a501e72e0f4931a74d9db2fd41b">capfd</a> (<a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a> request)</td></tr>
<tr class="separator:abe903a501e72e0f4931a74d9db2fd41b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6a5816e823a17fae0852c1afdf20deb" id="r_ad6a5816e823a17fae0852c1afdf20deb"><td class="memItemLeft" align="right" valign="top">Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[bytes], None, None]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#ad6a5816e823a17fae0852c1afdf20deb">capfdbinary</a> (<a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a> request)</td></tr>
<tr class="separator:ad6a5816e823a17fae0852c1afdf20deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a23c523da644655e1d3c38a992556ecbf" id="r_a23c523da644655e1d3c38a992556ecbf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a23c523da644655e1d3c38a992556ecbf">_CaptureMethod</a> = Literal[&quot;fd&quot;, &quot;sys&quot;, &quot;no&quot;, &quot;tee-sys&quot;]</td></tr>
<tr class="separator:a23c523da644655e1d3c38a992556ecbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939c3c698269e398080cdedea1cb1c19" id="r_a939c3c698269e398080cdedea1cb1c19"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace__pytest_1_1capture.html#a939c3c698269e398080cdedea1cb1c19">patchsysdict</a> = {0: &quot;stdin&quot;, 1: &quot;stdout&quot;, 2: &quot;stderr&quot;}</td></tr>
<tr class="separator:a939c3c698269e398080cdedea1cb1c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Per-test stdout/stderr capturing mechanism.</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="aa523ebcaf82034a666e3ac3b77e466f5" name="aa523ebcaf82034a666e3ac3b77e466f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa523ebcaf82034a666e3ac3b77e466f5">&#9670;&#160;</a></span>_colorama_workaround()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> None _pytest.capture._colorama_workaround </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Ensure colorama is imported so that it attaches to the correct stdio
handles on Windows.

colorama uses the terminal on import time. So if something does the
first import of colorama while I/O capture is active, colorama will
fail in various ways.
</pre> <div class="fragment"><div class="line"><span class="lineno">   56</span><span class="keyword">def </span>_colorama_workaround() -&gt; None:</div>
<div class="line"><span class="lineno">   57</span>    <span class="stringliteral">&quot;&quot;&quot;Ensure colorama is imported so that it attaches to the correct stdio</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">    handles on Windows.</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">    colorama uses the terminal on import time. So if something does the</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral">    first import of colorama while I/O capture is active, colorama will</span></div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    fail in various ways.</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="keywordflow">if</span> sys.platform.startswith(<span class="stringliteral">&quot;win32&quot;</span>):</div>
<div class="line"><span class="lineno">   65</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   66</span>            <span class="keyword">import</span> colorama  <span class="comment"># noqa: F401</span></div>
<div class="line"><span class="lineno">   67</span>        <span class="keywordflow">except</span> ImportError:</div>
<div class="line"><span class="lineno">   68</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a12d7b75cb7975013b13f22554357e2fa" name="a12d7b75cb7975013b13f22554357e2fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12d7b75cb7975013b13f22554357e2fa">&#9670;&#160;</a></span>_get_multicapture()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> <a class="el" href="class__pytest_1_1capture_1_1_multi_capture.html">MultiCapture</a>[str] _pytest.capture._get_multicapture </td>
          <td>(</td>
          <td class="paramtype">&quot;_CaptureMethod&quot;&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  628</span><span class="keyword">def </span>_get_multicapture(method: <span class="stringliteral">&quot;_CaptureMethod&quot;</span>) -&gt; MultiCapture[str]:</div>
<div class="line"><span class="lineno">  629</span>    <span class="keywordflow">if</span> method == <span class="stringliteral">&quot;fd&quot;</span>:</div>
<div class="line"><span class="lineno">  630</span>        <span class="keywordflow">return</span> MultiCapture(in_=FDCapture(0), out=FDCapture(1), err=FDCapture(2))</div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordflow">elif</span> method == <span class="stringliteral">&quot;sys&quot;</span>:</div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">return</span> MultiCapture(in_=SysCapture(0), out=SysCapture(1), err=SysCapture(2))</div>
<div class="line"><span class="lineno">  633</span>    <span class="keywordflow">elif</span> method == <span class="stringliteral">&quot;no&quot;</span>:</div>
<div class="line"><span class="lineno">  634</span>        <span class="keywordflow">return</span> MultiCapture(in_=<span class="keywordtype">None</span>, out=<span class="keywordtype">None</span>, err=<span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  635</span>    <span class="keywordflow">elif</span> method == <span class="stringliteral">&quot;tee-sys&quot;</span>:</div>
<div class="line"><span class="lineno">  636</span>        <span class="keywordflow">return</span> MultiCapture(</div>
<div class="line"><span class="lineno">  637</span>            in_=<span class="keywordtype">None</span>, out=SysCapture(1, tee=<span class="keyword">True</span>), err=SysCapture(2, tee=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  638</span>        )</div>
<div class="line"><span class="lineno">  639</span>    <span class="keywordflow">raise</span> ValueError(f<span class="stringliteral">&quot;unknown capturing method: {method!r}&quot;</span>)</div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span><span class="comment"># CaptureManager and CaptureFixture</span></div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a774bf124147b31b45d9b37003d172b87" name="a774bf124147b31b45d9b37003d172b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a774bf124147b31b45d9b37003d172b87">&#9670;&#160;</a></span>_windowsconsoleio_workaround()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> None _pytest.capture._windowsconsoleio_workaround </td>
          <td>(</td>
          <td class="paramtype">TextIO&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Workaround for Windows Unicode console handling.

Python 3.6 implemented Unicode console handling for Windows. This works
by reading/writing to the raw console handle using
``{Read,Write}ConsoleW``.

The problem is that we are going to ``dup2`` over the stdio file
descriptors when doing ``FDCapture`` and this will ``CloseHandle`` the
handles used by Python to write to the console. Though there is still some
weirdness and the console handle seems to only be closed randomly and not
on the first call to ``CloseHandle``, or maybe it gets reopened with the
same handle value when we suspend capturing.

The workaround in this case will reopen stdio with a different fd which
also means a different handle by replicating the logic in
"Py_lifecycle.c:initstdio/create_stdio".

:param stream:
    In practice ``sys.stdout`` or ``sys.stderr``, but given
    here as parameter for unittesting purposes.

See https://github.com/pytest-dev/py/issues/103.
</pre> <div class="fragment"><div class="line"><span class="lineno">   71</span><span class="keyword">def </span>_windowsconsoleio_workaround(stream: TextIO) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   72</span>    <span class="stringliteral">&quot;&quot;&quot;Workaround for Windows Unicode console handling.</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral">    Python 3.6 implemented Unicode console handling for Windows. This works</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">    by reading/writing to the raw console handle using</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">    ``{Read,Write}ConsoleW``.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">    The problem is that we are going to ``dup2`` over the stdio file</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">    descriptors when doing ``FDCapture`` and this will ``CloseHandle`` the</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">    handles used by Python to write to the console. Though there is still some</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">    weirdness and the console handle seems to only be closed randomly and not</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">    on the first call to ``CloseHandle``, or maybe it gets reopened with the</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">    same handle value when we suspend capturing.</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">    The workaround in this case will reopen stdio with a different fd which</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    also means a different handle by replicating the logic in</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    &quot;Py_lifecycle.c:initstdio/create_stdio&quot;.</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">    :param stream:</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">        In practice ``sys.stdout`` or ``sys.stderr``, but given</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">        here as parameter for unittesting purposes.</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral">    See https://github.com/pytest-dev/py/issues/103.</span></div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> sys.platform.startswith(<span class="stringliteral">&quot;win32&quot;</span>) <span class="keywordflow">or</span> hasattr(sys, <span class="stringliteral">&quot;pypy_version_info&quot;</span>):</div>
<div class="line"><span class="lineno">   96</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    <span class="comment"># Bail out if ``stream`` doesn&#39;t seem like a proper ``io`` stream (#2666).</span></div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(stream, <span class="stringliteral">&quot;buffer&quot;</span>):  <span class="comment"># type: ignore[unreachable]</span></div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    buffered = hasattr(stream.buffer, <span class="stringliteral">&quot;raw&quot;</span>)</div>
<div class="line"><span class="lineno">  103</span>    raw_stdout = stream.buffer.raw <span class="keywordflow">if</span> buffered <span class="keywordflow">else</span> stream.buffer  <span class="comment"># type: ignore[attr-defined]</span></div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(raw_stdout, io._WindowsConsoleIO):  <span class="comment"># type: ignore[attr-defined]</span></div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>    <span class="keyword">def </span>_reopen_stdio(f, mode):</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> buffered <span class="keywordflow">and</span> mode[0] == <span class="stringliteral">&quot;w&quot;</span>:</div>
<div class="line"><span class="lineno">  110</span>            buffering = 0</div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  112</span>            buffering = -1</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">return</span> io.TextIOWrapper(</div>
<div class="line"><span class="lineno">  115</span>            open(os.dup(f.fileno()), mode, buffering),</div>
<div class="line"><span class="lineno">  116</span>            f.encoding,</div>
<div class="line"><span class="lineno">  117</span>            f.errors,</div>
<div class="line"><span class="lineno">  118</span>            f.newlines,</div>
<div class="line"><span class="lineno">  119</span>            f.line_buffering,</div>
<div class="line"><span class="lineno">  120</span>        )</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    sys.stdin = _reopen_stdio(sys.stdin, <span class="stringliteral">&quot;rb&quot;</span>)</div>
<div class="line"><span class="lineno">  123</span>    sys.stdout = _reopen_stdio(sys.stdout, <span class="stringliteral">&quot;wb&quot;</span>)</div>
<div class="line"><span class="lineno">  124</span>    sys.stderr = _reopen_stdio(sys.stderr, <span class="stringliteral">&quot;wb&quot;</span>)</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span><span class="preprocessor">@hookimpl(hookwrapper=True)</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe903a501e72e0f4931a74d9db2fd41b" name="abe903a501e72e0f4931a74d9db2fd41b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe903a501e72e0f4931a74d9db2fd41b">&#9670;&#160;</a></span>capfd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[str], None, None] _pytest.capture.capfd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a>&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Enable text capturing of writes to file descriptors ``1`` and ``2``.

The captured output is made available via ``capfd.readouterr()`` method
calls, which return a ``(out, err)`` namedtuple.
``out`` and ``err`` will be ``text`` objects.

Returns an instance of :class:`CaptureFixture[str] &lt;pytest.CaptureFixture&gt;`.

Example:

.. code-block:: python

def test_system_echo(capfd):
os.system('echo "hello"')
captured = capfd.readouterr()
assert captured.out == "hello\n"
</pre> <div class="fragment"><div class="line"><span class="lineno">  961</span><span class="keyword">def </span>capfd(request: SubRequest) -&gt; Generator[CaptureFixture[str], <span class="keywordtype">None</span>, <span class="keywordtype">None</span>]:</div>
<div class="line"><span class="lineno">  962</span>    <span class="stringliteral">r&quot;&quot;&quot;Enable text capturing of writes to file descriptors ``1`` and ``2``.</span></div>
<div class="line"><span class="lineno">  963</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  964</span><span class="stringliteral">    The captured output is made available via ``capfd.readouterr()`` method</span></div>
<div class="line"><span class="lineno">  965</span><span class="stringliteral">    calls, which return a ``(out, err)`` namedtuple.</span></div>
<div class="line"><span class="lineno">  966</span><span class="stringliteral">    ``out`` and ``err`` will be ``text`` objects.</span></div>
<div class="line"><span class="lineno">  967</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  968</span><span class="stringliteral">    Returns an instance of :class:`CaptureFixture[str] &lt;pytest.CaptureFixture&gt;`.</span></div>
<div class="line"><span class="lineno">  969</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  970</span><span class="stringliteral">    Example:</span></div>
<div class="line"><span class="lineno">  971</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  972</span><span class="stringliteral">    .. code-block:: python</span></div>
<div class="line"><span class="lineno">  973</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  974</span><span class="stringliteral">        def test_system_echo(capfd):</span></div>
<div class="line"><span class="lineno">  975</span><span class="stringliteral">            os.system(&#39;echo &quot;hello&quot;&#39;)</span></div>
<div class="line"><span class="lineno">  976</span><span class="stringliteral">            captured = capfd.readouterr()</span></div>
<div class="line"><span class="lineno">  977</span><span class="stringliteral">            assert captured.out == &quot;hello\n&quot;</span></div>
<div class="line"><span class="lineno">  978</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  979</span>    capman = request.config.pluginmanager.getplugin(<span class="stringliteral">&quot;capturemanager&quot;</span>)</div>
<div class="line"><span class="lineno">  980</span>    capture_fixture = CaptureFixture[str](FDCapture, request, _ispytest=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  981</span>    capman.set_fixture(capture_fixture)</div>
<div class="line"><span class="lineno">  982</span>    capture_fixture._start()</div>
<div class="line"><span class="lineno">  983</span>    <span class="keywordflow">yield</span> capture_fixture</div>
<div class="line"><span class="lineno">  984</span>    capture_fixture.close()</div>
<div class="line"><span class="lineno">  985</span>    capman.unset_fixture()</div>
<div class="line"><span class="lineno">  986</span> </div>
<div class="line"><span class="lineno">  987</span> </div>
<div class="line"><span class="lineno">  988</span><span class="preprocessor">@fixture</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6a5816e823a17fae0852c1afdf20deb" name="ad6a5816e823a17fae0852c1afdf20deb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6a5816e823a17fae0852c1afdf20deb">&#9670;&#160;</a></span>capfdbinary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[bytes], None, None] _pytest.capture.capfdbinary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a>&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Enable bytes capturing of writes to file descriptors ``1`` and ``2``.

The captured output is made available via ``capfd.readouterr()`` method
calls, which return a ``(out, err)`` namedtuple.
``out`` and ``err`` will be ``byte`` objects.

Returns an instance of :class:`CaptureFixture[bytes] &lt;pytest.CaptureFixture&gt;`.

Example:

.. code-block:: python

def test_system_echo(capfdbinary):
os.system('echo "hello"')
captured = capfdbinary.readouterr()
assert captured.out == b"hello\n"</pre> <div class="fragment"><div class="line"><span class="lineno">  989</span><span class="keyword">def </span>capfdbinary(request: SubRequest) -&gt; Generator[CaptureFixture[bytes], <span class="keywordtype">None</span>, <span class="keywordtype">None</span>]:</div>
<div class="line"><span class="lineno">  990</span>    <span class="stringliteral">r&quot;&quot;&quot;Enable bytes capturing of writes to file descriptors ``1`` and ``2``.</span></div>
<div class="line"><span class="lineno">  991</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  992</span><span class="stringliteral">    The captured output is made available via ``capfd.readouterr()`` method</span></div>
<div class="line"><span class="lineno">  993</span><span class="stringliteral">    calls, which return a ``(out, err)`` namedtuple.</span></div>
<div class="line"><span class="lineno">  994</span><span class="stringliteral">    ``out`` and ``err`` will be ``byte`` objects.</span></div>
<div class="line"><span class="lineno">  995</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  996</span><span class="stringliteral">    Returns an instance of :class:`CaptureFixture[bytes] &lt;pytest.CaptureFixture&gt;`.</span></div>
<div class="line"><span class="lineno">  997</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  998</span><span class="stringliteral">    Example:</span></div>
<div class="line"><span class="lineno">  999</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1000</span><span class="stringliteral">    .. code-block:: python</span></div>
<div class="line"><span class="lineno"> 1001</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1002</span><span class="stringliteral">        def test_system_echo(capfdbinary):</span></div>
<div class="line"><span class="lineno"> 1003</span><span class="stringliteral">            os.system(&#39;echo &quot;hello&quot;&#39;)</span></div>
<div class="line"><span class="lineno"> 1004</span><span class="stringliteral">            captured = capfdbinary.readouterr()</span></div>
<div class="line"><span class="lineno"> 1005</span><span class="stringliteral">            assert captured.out == b&quot;hello\n&quot;</span></div>
<div class="line"><span class="lineno"> 1006</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 1007</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno"> 1008</span>    capman = request.config.pluginmanager.getplugin(<span class="stringliteral">&quot;capturemanager&quot;</span>)</div>
<div class="line"><span class="lineno"> 1009</span>    capture_fixture = CaptureFixture[bytes](FDCaptureBinary, request, _ispytest=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1010</span>    capman.set_fixture(capture_fixture)</div>
<div class="line"><span class="lineno"> 1011</span>    capture_fixture._start()</div>
<div class="line"><span class="lineno"> 1012</span>    <span class="keywordflow">yield</span> capture_fixture</div>
<div class="line"><span class="lineno"> 1013</span>    capture_fixture.close()</div>
<div class="line"><span class="lineno"> 1014</span>    capman.unset_fixture()</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c88aa3400b02f99945a9072aa25617d" name="a3c88aa3400b02f99945a9072aa25617d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c88aa3400b02f99945a9072aa25617d">&#9670;&#160;</a></span>capsys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[str], None, None] _pytest.capture.capsys </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a>&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Enable text capturing of writes to ``sys.stdout`` and ``sys.stderr``.

The captured output is made available via ``capsys.readouterr()`` method
calls, which return a ``(out, err)`` namedtuple.
``out`` and ``err`` will be ``text`` objects.

Returns an instance of :class:`CaptureFixture[str] &lt;pytest.CaptureFixture&gt;`.

Example:

.. code-block:: python

def test_output(capsys):
print("hello")
captured = capsys.readouterr()
assert captured.out == "hello\n"
</pre> <div class="fragment"><div class="line"><span class="lineno">  905</span><span class="keyword">def </span>capsys(request: SubRequest) -&gt; Generator[CaptureFixture[str], <span class="keywordtype">None</span>, <span class="keywordtype">None</span>]:</div>
<div class="line"><span class="lineno">  906</span>    <span class="stringliteral">r&quot;&quot;&quot;Enable text capturing of writes to ``sys.stdout`` and ``sys.stderr``.</span></div>
<div class="line"><span class="lineno">  907</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  908</span><span class="stringliteral">    The captured output is made available via ``capsys.readouterr()`` method</span></div>
<div class="line"><span class="lineno">  909</span><span class="stringliteral">    calls, which return a ``(out, err)`` namedtuple.</span></div>
<div class="line"><span class="lineno">  910</span><span class="stringliteral">    ``out`` and ``err`` will be ``text`` objects.</span></div>
<div class="line"><span class="lineno">  911</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  912</span><span class="stringliteral">    Returns an instance of :class:`CaptureFixture[str] &lt;pytest.CaptureFixture&gt;`.</span></div>
<div class="line"><span class="lineno">  913</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  914</span><span class="stringliteral">    Example:</span></div>
<div class="line"><span class="lineno">  915</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  916</span><span class="stringliteral">    .. code-block:: python</span></div>
<div class="line"><span class="lineno">  917</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  918</span><span class="stringliteral">        def test_output(capsys):</span></div>
<div class="line"><span class="lineno">  919</span><span class="stringliteral">            print(&quot;hello&quot;)</span></div>
<div class="line"><span class="lineno">  920</span><span class="stringliteral">            captured = capsys.readouterr()</span></div>
<div class="line"><span class="lineno">  921</span><span class="stringliteral">            assert captured.out == &quot;hello\n&quot;</span></div>
<div class="line"><span class="lineno">  922</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  923</span>    capman = request.config.pluginmanager.getplugin(<span class="stringliteral">&quot;capturemanager&quot;</span>)</div>
<div class="line"><span class="lineno">  924</span>    capture_fixture = CaptureFixture[str](SysCapture, request, _ispytest=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  925</span>    capman.set_fixture(capture_fixture)</div>
<div class="line"><span class="lineno">  926</span>    capture_fixture._start()</div>
<div class="line"><span class="lineno">  927</span>    <span class="keywordflow">yield</span> capture_fixture</div>
<div class="line"><span class="lineno">  928</span>    capture_fixture.close()</div>
<div class="line"><span class="lineno">  929</span>    capman.unset_fixture()</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span> </div>
<div class="line"><span class="lineno">  932</span><span class="preprocessor">@fixture</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95d99287e4e853129027ac9090a73ab7" name="a95d99287e4e853129027ac9090a73ab7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d99287e4e853129027ac9090a73ab7">&#9670;&#160;</a></span>capsysbinary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Generator[<a class="el" href="class__pytest_1_1capture_1_1_capture_fixture.html">CaptureFixture</a>[bytes], None, None] _pytest.capture.capsysbinary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1fixtures_1_1_sub_request.html">SubRequest</a>&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Enable bytes capturing of writes to ``sys.stdout`` and ``sys.stderr``.

The captured output is made available via ``capsysbinary.readouterr()``
method calls, which return a ``(out, err)`` namedtuple.
``out`` and ``err`` will be ``bytes`` objects.

Returns an instance of :class:`CaptureFixture[bytes] &lt;pytest.CaptureFixture&gt;`.

Example:

.. code-block:: python

def test_output(capsysbinary):
print("hello")
captured = capsysbinary.readouterr()
assert captured.out == b"hello\n"
</pre> <div class="fragment"><div class="line"><span class="lineno">  933</span><span class="keyword">def </span>capsysbinary(request: SubRequest) -&gt; Generator[CaptureFixture[bytes], <span class="keywordtype">None</span>, <span class="keywordtype">None</span>]:</div>
<div class="line"><span class="lineno">  934</span>    <span class="stringliteral">r&quot;&quot;&quot;Enable bytes capturing of writes to ``sys.stdout`` and ``sys.stderr``.</span></div>
<div class="line"><span class="lineno">  935</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  936</span><span class="stringliteral">    The captured output is made available via ``capsysbinary.readouterr()``</span></div>
<div class="line"><span class="lineno">  937</span><span class="stringliteral">    method calls, which return a ``(out, err)`` namedtuple.</span></div>
<div class="line"><span class="lineno">  938</span><span class="stringliteral">    ``out`` and ``err`` will be ``bytes`` objects.</span></div>
<div class="line"><span class="lineno">  939</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  940</span><span class="stringliteral">    Returns an instance of :class:`CaptureFixture[bytes] &lt;pytest.CaptureFixture&gt;`.</span></div>
<div class="line"><span class="lineno">  941</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  942</span><span class="stringliteral">    Example:</span></div>
<div class="line"><span class="lineno">  943</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  944</span><span class="stringliteral">    .. code-block:: python</span></div>
<div class="line"><span class="lineno">  945</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  946</span><span class="stringliteral">        def test_output(capsysbinary):</span></div>
<div class="line"><span class="lineno">  947</span><span class="stringliteral">            print(&quot;hello&quot;)</span></div>
<div class="line"><span class="lineno">  948</span><span class="stringliteral">            captured = capsysbinary.readouterr()</span></div>
<div class="line"><span class="lineno">  949</span><span class="stringliteral">            assert captured.out == b&quot;hello\n&quot;</span></div>
<div class="line"><span class="lineno">  950</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  951</span>    capman = request.config.pluginmanager.getplugin(<span class="stringliteral">&quot;capturemanager&quot;</span>)</div>
<div class="line"><span class="lineno">  952</span>    capture_fixture = CaptureFixture[bytes](SysCaptureBinary, request, _ispytest=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  953</span>    capman.set_fixture(capture_fixture)</div>
<div class="line"><span class="lineno">  954</span>    capture_fixture._start()</div>
<div class="line"><span class="lineno">  955</span>    <span class="keywordflow">yield</span> capture_fixture</div>
<div class="line"><span class="lineno">  956</span>    capture_fixture.close()</div>
<div class="line"><span class="lineno">  957</span>    capman.unset_fixture()</div>
<div class="line"><span class="lineno">  958</span> </div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span><span class="preprocessor">@fixture</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72aac3196c562f38fe639fead1e5ae2e" name="a72aac3196c562f38fe639fead1e5ae2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72aac3196c562f38fe639fead1e5ae2e">&#9670;&#160;</a></span>pytest_addoption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None _pytest.capture.pytest_addoption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1config_1_1argparsing_1_1_parser.html">Parser</a>&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   37</span><span class="keyword">def </span>pytest_addoption(parser: Parser) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   38</span>    group = parser.getgroup(<span class="stringliteral">&quot;general&quot;</span>)</div>
<div class="line"><span class="lineno">   39</span>    group._addoption(</div>
<div class="line"><span class="lineno">   40</span>        <span class="stringliteral">&quot;--capture&quot;</span>,</div>
<div class="line"><span class="lineno">   41</span>        action=<span class="stringliteral">&quot;store&quot;</span>,</div>
<div class="line"><span class="lineno">   42</span>        default=<span class="stringliteral">&quot;fd&quot;</span>,</div>
<div class="line"><span class="lineno">   43</span>        metavar=<span class="stringliteral">&quot;method&quot;</span>,</div>
<div class="line"><span class="lineno">   44</span>        choices=[<span class="stringliteral">&quot;fd&quot;</span>, <span class="stringliteral">&quot;sys&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>, <span class="stringliteral">&quot;tee-sys&quot;</span>],</div>
<div class="line"><span class="lineno">   45</span>        help=<span class="stringliteral">&quot;Per-test capturing method: one of fd|sys|no|tee-sys&quot;</span>,</div>
<div class="line"><span class="lineno">   46</span>    )</div>
<div class="line"><span class="lineno">   47</span>    group._addoption(</div>
<div class="line"><span class="lineno">   48</span>        <span class="stringliteral">&quot;-s&quot;</span>,</div>
<div class="line"><span class="lineno">   49</span>        action=<span class="stringliteral">&quot;store_const&quot;</span>,</div>
<div class="line"><span class="lineno">   50</span>        const=<span class="stringliteral">&quot;no&quot;</span>,</div>
<div class="line"><span class="lineno">   51</span>        dest=<span class="stringliteral">&quot;capture&quot;</span>,</div>
<div class="line"><span class="lineno">   52</span>        help=<span class="stringliteral">&quot;Shortcut for --capture=no&quot;</span>,</div>
<div class="line"><span class="lineno">   53</span>    )</div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5dbee5daf54b6536fdeb2936c85bedce" name="a5dbee5daf54b6536fdeb2936c85bedce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dbee5daf54b6536fdeb2936c85bedce">&#9670;&#160;</a></span>pytest_load_initial_conftests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_pytest.capture.pytest_load_initial_conftests </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class__pytest_1_1config_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>early_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  128</span><span class="keyword">def </span>pytest_load_initial_conftests(early_config: Config):</div>
<div class="line"><span class="lineno">  129</span>    ns = early_config.known_args_namespace</div>
<div class="line"><span class="lineno">  130</span>    <span class="keywordflow">if</span> ns.capture == <span class="stringliteral">&quot;fd&quot;</span>:</div>
<div class="line"><span class="lineno">  131</span>        _windowsconsoleio_workaround(sys.stdout)</div>
<div class="line"><span class="lineno">  132</span>    _colorama_workaround()</div>
<div class="line"><span class="lineno">  133</span>    pluginmanager = early_config.pluginmanager</div>
<div class="line"><span class="lineno">  134</span>    capman = CaptureManager(ns.capture)</div>
<div class="line"><span class="lineno">  135</span>    pluginmanager.register(capman, <span class="stringliteral">&quot;capturemanager&quot;</span>)</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    <span class="comment"># Make sure that capturemanager is properly reset at final shutdown.</span></div>
<div class="line"><span class="lineno">  138</span>    early_config.add_cleanup(capman.stop_global_capturing)</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="comment"># Finally trigger conftest loading but while capturing (issue #93).</span></div>
<div class="line"><span class="lineno">  141</span>    capman.start_global_capturing()</div>
<div class="line"><span class="lineno">  142</span>    outcome = <span class="keywordflow">yield</span></div>
<div class="line"><span class="lineno">  143</span>    capman.suspend_global_capture()</div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">if</span> outcome.excinfo <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  145</span>        out, err = capman.read_global_capture()</div>
<div class="line"><span class="lineno">  146</span>        sys.stdout.write(out)</div>
<div class="line"><span class="lineno">  147</span>        sys.stderr.write(err)</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span><span class="comment"># IO Helpers.</span></div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a23c523da644655e1d3c38a992556ecbf" name="a23c523da644655e1d3c38a992556ecbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c523da644655e1d3c38a992556ecbf">&#9670;&#160;</a></span>_CaptureMethod</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_pytest.capture._CaptureMethod = Literal[&quot;fd&quot;, &quot;sys&quot;, &quot;no&quot;, &quot;tee-sys&quot;]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a939c3c698269e398080cdedea1cb1c19" name="a939c3c698269e398080cdedea1cb1c19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a939c3c698269e398080cdedea1cb1c19">&#9670;&#160;</a></span>patchsysdict</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict _pytest.capture.patchsysdict = {0: &quot;stdin&quot;, 1: &quot;stdout&quot;, 2: &quot;stderr&quot;}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
