<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: PIL.JpegImagePlugin Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_p_i_l.html">PIL</a></li><li class="navelem"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html">JpegImagePlugin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">PIL.JpegImagePlugin Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_p_i_l_1_1_jpeg_image_plugin_1_1_jpeg_image_file.html">JpegImageFile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Image plugin for JPEG and JFIF images.  <a href="class_p_i_l_1_1_jpeg_image_plugin_1_1_jpeg_image_file.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b09d69844c9ccf99be5da7aedd65db8" id="r_a6b09d69844c9ccf99be5da7aedd65db8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a6b09d69844c9ccf99be5da7aedd65db8">Skip</a> (self, marker)</td></tr>
<tr class="separator:a6b09d69844c9ccf99be5da7aedd65db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48d8e7e5615137942ca4217abea6174d" id="r_a48d8e7e5615137942ca4217abea6174d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a48d8e7e5615137942ca4217abea6174d">APP</a> (self, marker)</td></tr>
<tr class="separator:a48d8e7e5615137942ca4217abea6174d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e04ac1fb535437187c5cd938886421e" id="r_a0e04ac1fb535437187c5cd938886421e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a0e04ac1fb535437187c5cd938886421e">COM</a> (self, marker)</td></tr>
<tr class="separator:a0e04ac1fb535437187c5cd938886421e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c440581c79ff080a588e1de9465185" id="r_a86c440581c79ff080a588e1de9465185"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a86c440581c79ff080a588e1de9465185">SOF</a> (self, marker)</td></tr>
<tr class="separator:a86c440581c79ff080a588e1de9465185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a276d896c3ea0bbb8a45d060b9f33bbaf" id="r_a276d896c3ea0bbb8a45d060b9f33bbaf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a276d896c3ea0bbb8a45d060b9f33bbaf">DQT</a> (self, marker)</td></tr>
<tr class="separator:a276d896c3ea0bbb8a45d060b9f33bbaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b7194d7d1cf57e2d32c720c0f470fea" id="r_a3b7194d7d1cf57e2d32c720c0f470fea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a3b7194d7d1cf57e2d32c720c0f470fea">_accept</a> (prefix)</td></tr>
<tr class="separator:a3b7194d7d1cf57e2d32c720c0f470fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86eb930e871589e6126a8fbe8ceb9703" id="r_a86eb930e871589e6126a8fbe8ceb9703"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a86eb930e871589e6126a8fbe8ceb9703">_getexif</a> (self)</td></tr>
<tr class="separator:a86eb930e871589e6126a8fbe8ceb9703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f05d74bf1759dc2ef20448e967a3cf" id="r_a65f05d74bf1759dc2ef20448e967a3cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a65f05d74bf1759dc2ef20448e967a3cf">_getmp</a> (self)</td></tr>
<tr class="separator:a65f05d74bf1759dc2ef20448e967a3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5319282355e4de71790e469a6001029" id="r_af5319282355e4de71790e469a6001029"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#af5319282355e4de71790e469a6001029">convert_dict_qtables</a> (qtables)</td></tr>
<tr class="separator:af5319282355e4de71790e469a6001029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef2086066b1d83d2679fb3235e950883" id="r_aef2086066b1d83d2679fb3235e950883"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#aef2086066b1d83d2679fb3235e950883">get_sampling</a> (im)</td></tr>
<tr class="separator:aef2086066b1d83d2679fb3235e950883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d0d2e735d7d5a9b813cbc664c32a9fb" id="r_a2d0d2e735d7d5a9b813cbc664c32a9fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a2d0d2e735d7d5a9b813cbc664c32a9fb">_save</a> (im, <a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#afbb81958534085c78a999abdb1ed0665">fp</a>, filename)</td></tr>
<tr class="separator:a2d0d2e735d7d5a9b813cbc664c32a9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41488a5fbbc2040b5ae78f24e836b467" id="r_a41488a5fbbc2040b5ae78f24e836b467"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a41488a5fbbc2040b5ae78f24e836b467">_save_cjpeg</a> (im, <a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#afbb81958534085c78a999abdb1ed0665">fp</a>, filename)</td></tr>
<tr class="separator:a41488a5fbbc2040b5ae78f24e836b467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e116116fe1bdfe5b0e8025f3328b1fe" id="r_a5e116116fe1bdfe5b0e8025f3328b1fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a5e116116fe1bdfe5b0e8025f3328b1fe">jpeg_factory</a> (<a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#afbb81958534085c78a999abdb1ed0665">fp</a>=None, filename=None)</td></tr>
<tr class="memdesc:a5e116116fe1bdfe5b0e8025f3328b1fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory for making JPEG and MPO instances.  <br /></td></tr>
<tr class="separator:a5e116116fe1bdfe5b0e8025f3328b1fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3b27b9d942b836a660aa4a35e3cc72c9" id="r_a3b27b9d942b836a660aa4a35e3cc72c9"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a3b27b9d942b836a660aa4a35e3cc72c9">MARKER</a></td></tr>
<tr class="separator:a3b27b9d942b836a660aa4a35e3cc72c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d2046bc6df6ca9276d643df706f0aa9" id="r_a1d2046bc6df6ca9276d643df706f0aa9"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a1d2046bc6df6ca9276d643df706f0aa9">RAWMODE</a></td></tr>
<tr class="separator:a1d2046bc6df6ca9276d643df706f0aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c522eff72189a902699b7f7a812696d" id="r_a5c522eff72189a902699b7f7a812696d"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a5c522eff72189a902699b7f7a812696d">zigzag_index</a></td></tr>
<tr class="separator:a5c522eff72189a902699b7f7a812696d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bbc666db1d7d40d2f46edf4049b206b" id="r_a1bbc666db1d7d40d2f46edf4049b206b"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a1bbc666db1d7d40d2f46edf4049b206b">samplings</a></td></tr>
<tr class="separator:a1bbc666db1d7d40d2f46edf4049b206b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb81958534085c78a999abdb1ed0665" id="r_afbb81958534085c78a999abdb1ed0665"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#afbb81958534085c78a999abdb1ed0665">fp</a></td></tr>
<tr class="separator:afbb81958534085c78a999abdb1ed0665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae58ef17201b214b54df4ee5d15dba0a9" id="r_ae58ef17201b214b54df4ee5d15dba0a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#ae58ef17201b214b54df4ee5d15dba0a9">_exif_offset</a></td></tr>
<tr class="separator:ae58ef17201b214b54df4ee5d15dba0a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a456375d0b35ab014bd7158bbfda703eb" id="r_a456375d0b35ab014bd7158bbfda703eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a456375d0b35ab014bd7158bbfda703eb">_size</a></td></tr>
<tr class="separator:a456375d0b35ab014bd7158bbfda703eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfc8adc0e5df82d6c92e3ff83b6321f5" id="r_acfc8adc0e5df82d6c92e3ff83b6321f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#acfc8adc0e5df82d6c92e3ff83b6321f5">bits</a></td></tr>
<tr class="separator:acfc8adc0e5df82d6c92e3ff83b6321f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f3dc7daa7c66940aff1401d59dd8f2a" id="r_a0f3dc7daa7c66940aff1401d59dd8f2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a0f3dc7daa7c66940aff1401d59dd8f2a">layers</a></td></tr>
<tr class="separator:a0f3dc7daa7c66940aff1401d59dd8f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55efcf4f75445996b359eef9f8ade5e6" id="r_a55efcf4f75445996b359eef9f8ade5e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a55efcf4f75445996b359eef9f8ade5e6">mode</a></td></tr>
<tr class="separator:a55efcf4f75445996b359eef9f8ade5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649e409f25ad4457e6f6ff6c2c3a5dd8" id="r_a649e409f25ad4457e6f6ff6c2c3a5dd8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_p_i_l_1_1_jpeg_image_plugin.html#a649e409f25ad4457e6f6ff6c2c3a5dd8">icclist</a></td></tr>
<tr class="separator:a649e409f25ad4457e6f6ff6c2c3a5dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3b7194d7d1cf57e2d32c720c0f470fea" name="a3b7194d7d1cf57e2d32c720c0f470fea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b7194d7d1cf57e2d32c720c0f470fea">&#9670;&#160;</a></span>_accept()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin._accept </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prefix</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  337</span><span class="keyword">def </span>_accept(prefix):</div>
<div class="line"><span class="lineno">  338</span>    <span class="comment"># Magic number was taken from https://en.wikipedia.org/wiki/JPEG</span></div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">return</span> prefix[:3] == b<span class="stringliteral">&quot;\xFF\xD8\xFF&quot;</span></div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a86eb930e871589e6126a8fbe8ceb9703" name="a86eb930e871589e6126a8fbe8ceb9703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86eb930e871589e6126a8fbe8ceb9703">&#9670;&#160;</a></span>_getexif()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin._getexif </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  506</span><span class="keyword">def </span>_getexif(self):</div>
<div class="line"><span class="lineno">  507</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;exif&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.info:</div>
<div class="line"><span class="lineno">  508</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordflow">return</span> self.getexif()._get_merged_dict()</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a65f05d74bf1759dc2ef20448e967a3cf" name="a65f05d74bf1759dc2ef20448e967a3cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65f05d74bf1759dc2ef20448e967a3cf">&#9670;&#160;</a></span>_getmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin._getmp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  512</span><span class="keyword">def </span>_getmp(self):</div>
<div class="line"><span class="lineno">  513</span>    <span class="comment"># Extract MP information.  This method was inspired by the &quot;highly</span></div>
<div class="line"><span class="lineno">  514</span>    <span class="comment"># experimental&quot; _getexif version that&#39;s been in use for years now,</span></div>
<div class="line"><span class="lineno">  515</span>    <span class="comment"># itself based on the ImageFileDirectory class in the TIFF plugin.</span></div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>    <span class="comment"># The MP record essentially consists of a TIFF file embedded in a JPEG</span></div>
<div class="line"><span class="lineno">  518</span>    <span class="comment"># application marker.</span></div>
<div class="line"><span class="lineno">  519</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  520</span>        data = self.info[<span class="stringliteral">&quot;mp&quot;</span>]</div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordflow">except</span> KeyError:</div>
<div class="line"><span class="lineno">  522</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  523</span>    file_contents = io.BytesIO(data)</div>
<div class="line"><span class="lineno">  524</span>    head = file_contents.read(8)</div>
<div class="line"><span class="lineno">  525</span>    endianness = <span class="stringliteral">&quot;&gt;&quot;</span> <span class="keywordflow">if</span> head[:4] == b<span class="stringliteral">&quot;\x4d\x4d\x00\x2a&quot;</span> <span class="keywordflow">else</span> <span class="stringliteral">&quot;&lt;&quot;</span></div>
<div class="line"><span class="lineno">  526</span>    <span class="comment"># process dictionary</span></div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  528</span>        info = TiffImagePlugin.ImageFileDirectory_v2(head)</div>
<div class="line"><span class="lineno">  529</span>        file_contents.seek(info.next)</div>
<div class="line"><span class="lineno">  530</span>        info.load(file_contents)</div>
<div class="line"><span class="lineno">  531</span>        mp = dict(info)</div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  533</span>        msg = <span class="stringliteral">&quot;malformed MP Index (unreadable directory)&quot;</span></div>
<div class="line"><span class="lineno">  534</span>        <span class="keywordflow">raise</span> SyntaxError(msg) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  535</span>    <span class="comment"># it&#39;s an error not to have a number of images</span></div>
<div class="line"><span class="lineno">  536</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  537</span>        quant = mp[0xB001]</div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">except</span> KeyError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  539</span>        msg = <span class="stringliteral">&quot;malformed MP Index (no number of images)&quot;</span></div>
<div class="line"><span class="lineno">  540</span>        <span class="keywordflow">raise</span> SyntaxError(msg) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  541</span>    <span class="comment"># get MP entries</span></div>
<div class="line"><span class="lineno">  542</span>    mpentries = []</div>
<div class="line"><span class="lineno">  543</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  544</span>        rawmpentries = mp[0xB002]</div>
<div class="line"><span class="lineno">  545</span>        <span class="keywordflow">for</span> entrynum <span class="keywordflow">in</span> range(0, quant):</div>
<div class="line"><span class="lineno">  546</span>            unpackedentry = struct.unpack_from(</div>
<div class="line"><span class="lineno">  547</span>                f<span class="stringliteral">&quot;{endianness}LLLHH&quot;</span>, rawmpentries, entrynum * 16</div>
<div class="line"><span class="lineno">  548</span>            )</div>
<div class="line"><span class="lineno">  549</span>            labels = (<span class="stringliteral">&quot;Attribute&quot;</span>, <span class="stringliteral">&quot;Size&quot;</span>, <span class="stringliteral">&quot;DataOffset&quot;</span>, <span class="stringliteral">&quot;EntryNo1&quot;</span>, <span class="stringliteral">&quot;EntryNo2&quot;</span>)</div>
<div class="line"><span class="lineno">  550</span>            mpentry = dict(zip(labels, unpackedentry))</div>
<div class="line"><span class="lineno">  551</span>            mpentryattr = {</div>
<div class="line"><span class="lineno">  552</span>                <span class="stringliteral">&quot;DependentParentImageFlag&quot;</span>: bool(mpentry[<span class="stringliteral">&quot;Attribute&quot;</span>] &amp; (1 &lt;&lt; 31)),</div>
<div class="line"><span class="lineno">  553</span>                <span class="stringliteral">&quot;DependentChildImageFlag&quot;</span>: bool(mpentry[<span class="stringliteral">&quot;Attribute&quot;</span>] &amp; (1 &lt;&lt; 30)),</div>
<div class="line"><span class="lineno">  554</span>                <span class="stringliteral">&quot;RepresentativeImageFlag&quot;</span>: bool(mpentry[<span class="stringliteral">&quot;Attribute&quot;</span>] &amp; (1 &lt;&lt; 29)),</div>
<div class="line"><span class="lineno">  555</span>                <span class="stringliteral">&quot;Reserved&quot;</span>: (mpentry[<span class="stringliteral">&quot;Attribute&quot;</span>] &amp; (3 &lt;&lt; 27)) &gt;&gt; 27,</div>
<div class="line"><span class="lineno">  556</span>                <span class="stringliteral">&quot;ImageDataFormat&quot;</span>: (mpentry[<span class="stringliteral">&quot;Attribute&quot;</span>] &amp; (7 &lt;&lt; 24)) &gt;&gt; 24,</div>
<div class="line"><span class="lineno">  557</span>                <span class="stringliteral">&quot;MPType&quot;</span>: mpentry[<span class="stringliteral">&quot;Attribute&quot;</span>] &amp; 0x00FFFFFF,</div>
<div class="line"><span class="lineno">  558</span>            }</div>
<div class="line"><span class="lineno">  559</span>            <span class="keywordflow">if</span> mpentryattr[<span class="stringliteral">&quot;ImageDataFormat&quot;</span>] == 0:</div>
<div class="line"><span class="lineno">  560</span>                mpentryattr[<span class="stringliteral">&quot;ImageDataFormat&quot;</span>] = <span class="stringliteral">&quot;JPEG&quot;</span></div>
<div class="line"><span class="lineno">  561</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  562</span>                msg = <span class="stringliteral">&quot;unsupported picture format in MPO&quot;</span></div>
<div class="line"><span class="lineno">  563</span>                <span class="keywordflow">raise</span> SyntaxError(msg)</div>
<div class="line"><span class="lineno">  564</span>            mptypemap = {</div>
<div class="line"><span class="lineno">  565</span>                0x000000: <span class="stringliteral">&quot;Undefined&quot;</span>,</div>
<div class="line"><span class="lineno">  566</span>                0x010001: <span class="stringliteral">&quot;Large Thumbnail (VGA Equivalent)&quot;</span>,</div>
<div class="line"><span class="lineno">  567</span>                0x010002: <span class="stringliteral">&quot;Large Thumbnail (Full HD Equivalent)&quot;</span>,</div>
<div class="line"><span class="lineno">  568</span>                0x020001: <span class="stringliteral">&quot;Multi-Frame Image (Panorama)&quot;</span>,</div>
<div class="line"><span class="lineno">  569</span>                0x020002: <span class="stringliteral">&quot;Multi-Frame Image: (Disparity)&quot;</span>,</div>
<div class="line"><span class="lineno">  570</span>                0x020003: <span class="stringliteral">&quot;Multi-Frame Image: (Multi-Angle)&quot;</span>,</div>
<div class="line"><span class="lineno">  571</span>                0x030000: <span class="stringliteral">&quot;Baseline MP Primary Image&quot;</span>,</div>
<div class="line"><span class="lineno">  572</span>            }</div>
<div class="line"><span class="lineno">  573</span>            mpentryattr[<span class="stringliteral">&quot;MPType&quot;</span>] = mptypemap.get(mpentryattr[<span class="stringliteral">&quot;MPType&quot;</span>], <span class="stringliteral">&quot;Unknown&quot;</span>)</div>
<div class="line"><span class="lineno">  574</span>            mpentry[<span class="stringliteral">&quot;Attribute&quot;</span>] = mpentryattr</div>
<div class="line"><span class="lineno">  575</span>            mpentries.append(mpentry)</div>
<div class="line"><span class="lineno">  576</span>        mp[0xB002] = mpentries</div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordflow">except</span> KeyError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  578</span>        msg = <span class="stringliteral">&quot;malformed MP Index (bad MP Entry)&quot;</span></div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">raise</span> SyntaxError(msg) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  580</span>    <span class="comment"># Next we should try and parse the individual image unique ID list;</span></div>
<div class="line"><span class="lineno">  581</span>    <span class="comment"># we don&#39;t because I&#39;ve never seen this actually used in a real MPO</span></div>
<div class="line"><span class="lineno">  582</span>    <span class="comment"># file and so can&#39;t test it.</span></div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordflow">return</span> mp</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span><span class="comment"># --------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  587</span><span class="comment"># stuff to save JPEG files</span></div>
<div class="line"><span class="lineno">  588</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d0d2e735d7d5a9b813cbc664c32a9fb" name="a2d0d2e735d7d5a9b813cbc664c32a9fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d0d2e735d7d5a9b813cbc664c32a9fb">&#9670;&#160;</a></span>_save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin._save </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>im</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  637</span><span class="keyword">def </span>_save(im, fp, filename):</div>
<div class="line"><span class="lineno">  638</span>    <span class="keywordflow">if</span> im.width == 0 <span class="keywordflow">or</span> im.height == 0:</div>
<div class="line"><span class="lineno">  639</span>        msg = <span class="stringliteral">&quot;cannot write empty image as JPEG&quot;</span></div>
<div class="line"><span class="lineno">  640</span>        <span class="keywordflow">raise</span> ValueError(msg)</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  643</span>        rawmode = RAWMODE[im.mode]</div>
<div class="line"><span class="lineno">  644</span>    <span class="keywordflow">except</span> KeyError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  645</span>        msg = f<span class="stringliteral">&quot;cannot write mode {im.mode} as JPEG&quot;</span></div>
<div class="line"><span class="lineno">  646</span>        <span class="keywordflow">raise</span> OSError(msg) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>    info = im.encoderinfo</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>    dpi = [round(x) <span class="keywordflow">for</span> x <span class="keywordflow">in</span> info.get(<span class="stringliteral">&quot;dpi&quot;</span>, (0, 0))]</div>
<div class="line"><span class="lineno">  651</span> </div>
<div class="line"><span class="lineno">  652</span>    quality = info.get(<span class="stringliteral">&quot;quality&quot;</span>, -1)</div>
<div class="line"><span class="lineno">  653</span>    subsampling = info.get(<span class="stringliteral">&quot;subsampling&quot;</span>, -1)</div>
<div class="line"><span class="lineno">  654</span>    qtables = info.get(<span class="stringliteral">&quot;qtables&quot;</span>)</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>    <span class="keywordflow">if</span> quality == <span class="stringliteral">&quot;keep&quot;</span>:</div>
<div class="line"><span class="lineno">  657</span>        quality = -1</div>
<div class="line"><span class="lineno">  658</span>        subsampling = <span class="stringliteral">&quot;keep&quot;</span></div>
<div class="line"><span class="lineno">  659</span>        qtables = <span class="stringliteral">&quot;keep&quot;</span></div>
<div class="line"><span class="lineno">  660</span>    <span class="keywordflow">elif</span> quality <span class="keywordflow">in</span> presets:</div>
<div class="line"><span class="lineno">  661</span>        preset = presets[quality]</div>
<div class="line"><span class="lineno">  662</span>        quality = -1</div>
<div class="line"><span class="lineno">  663</span>        subsampling = preset.get(<span class="stringliteral">&quot;subsampling&quot;</span>, -1)</div>
<div class="line"><span class="lineno">  664</span>        qtables = preset.get(<span class="stringliteral">&quot;quantization&quot;</span>)</div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">elif</span> <span class="keywordflow">not</span> isinstance(quality, int):</div>
<div class="line"><span class="lineno">  666</span>        msg = <span class="stringliteral">&quot;Invalid quality setting&quot;</span></div>
<div class="line"><span class="lineno">  667</span>        <span class="keywordflow">raise</span> ValueError(msg)</div>
<div class="line"><span class="lineno">  668</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  669</span>        <span class="keywordflow">if</span> subsampling <span class="keywordflow">in</span> presets:</div>
<div class="line"><span class="lineno">  670</span>            subsampling = presets[subsampling].get(<span class="stringliteral">&quot;subsampling&quot;</span>, -1)</div>
<div class="line"><span class="lineno">  671</span>        <span class="keywordflow">if</span> isinstance(qtables, str) <span class="keywordflow">and</span> qtables <span class="keywordflow">in</span> presets:</div>
<div class="line"><span class="lineno">  672</span>            qtables = presets[qtables].get(<span class="stringliteral">&quot;quantization&quot;</span>)</div>
<div class="line"><span class="lineno">  673</span> </div>
<div class="line"><span class="lineno">  674</span>    <span class="keywordflow">if</span> subsampling == <span class="stringliteral">&quot;4:4:4&quot;</span>:</div>
<div class="line"><span class="lineno">  675</span>        subsampling = 0</div>
<div class="line"><span class="lineno">  676</span>    <span class="keywordflow">elif</span> subsampling == <span class="stringliteral">&quot;4:2:2&quot;</span>:</div>
<div class="line"><span class="lineno">  677</span>        subsampling = 1</div>
<div class="line"><span class="lineno">  678</span>    <span class="keywordflow">elif</span> subsampling == <span class="stringliteral">&quot;4:2:0&quot;</span>:</div>
<div class="line"><span class="lineno">  679</span>        subsampling = 2</div>
<div class="line"><span class="lineno">  680</span>    <span class="keywordflow">elif</span> subsampling == <span class="stringliteral">&quot;4:1:1&quot;</span>:</div>
<div class="line"><span class="lineno">  681</span>        <span class="comment"># For compatibility. Before Pillow 4.3, 4:1:1 actually meant 4:2:0.</span></div>
<div class="line"><span class="lineno">  682</span>        <span class="comment"># Set 4:2:0 if someone is still using that value.</span></div>
<div class="line"><span class="lineno">  683</span>        subsampling = 2</div>
<div class="line"><span class="lineno">  684</span>    <span class="keywordflow">elif</span> subsampling == <span class="stringliteral">&quot;keep&quot;</span>:</div>
<div class="line"><span class="lineno">  685</span>        <span class="keywordflow">if</span> im.format != <span class="stringliteral">&quot;JPEG&quot;</span>:</div>
<div class="line"><span class="lineno">  686</span>            msg = <span class="stringliteral">&quot;Cannot use &#39;keep&#39; when original image is not a JPEG&quot;</span></div>
<div class="line"><span class="lineno">  687</span>            <span class="keywordflow">raise</span> ValueError(msg)</div>
<div class="line"><span class="lineno">  688</span>        subsampling = get_sampling(im)</div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>    <span class="keyword">def </span>validate_qtables(qtables):</div>
<div class="line"><span class="lineno">  691</span>        <span class="keywordflow">if</span> qtables <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  692</span>            <span class="keywordflow">return</span> qtables</div>
<div class="line"><span class="lineno">  693</span>        <span class="keywordflow">if</span> isinstance(qtables, str):</div>
<div class="line"><span class="lineno">  694</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  695</span>                lines = [</div>
<div class="line"><span class="lineno">  696</span>                    int(num)</div>
<div class="line"><span class="lineno">  697</span>                    <span class="keywordflow">for</span> line <span class="keywordflow">in</span> qtables.splitlines()</div>
<div class="line"><span class="lineno">  698</span>                    <span class="keywordflow">for</span> num <span class="keywordflow">in</span> line.split(<span class="stringliteral">&quot;#&quot;</span>, 1)[0].split()</div>
<div class="line"><span class="lineno">  699</span>                ]</div>
<div class="line"><span class="lineno">  700</span>            <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  701</span>                msg = <span class="stringliteral">&quot;Invalid quantization table&quot;</span></div>
<div class="line"><span class="lineno">  702</span>                <span class="keywordflow">raise</span> ValueError(msg) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  703</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  704</span>                qtables = [lines[s : s + 64] <span class="keywordflow">for</span> s <span class="keywordflow">in</span> range(0, len(lines), 64)]</div>
<div class="line"><span class="lineno">  705</span>        <span class="keywordflow">if</span> isinstance(qtables, (tuple, list, dict)):</div>
<div class="line"><span class="lineno">  706</span>            <span class="keywordflow">if</span> isinstance(qtables, dict):</div>
<div class="line"><span class="lineno">  707</span>                qtables = [</div>
<div class="line"><span class="lineno">  708</span>                    qtables[key] <span class="keywordflow">for</span> key <span class="keywordflow">in</span> range(len(qtables)) <span class="keywordflow">if</span> key <span class="keywordflow">in</span> qtables</div>
<div class="line"><span class="lineno">  709</span>                ]</div>
<div class="line"><span class="lineno">  710</span>            <span class="keywordflow">elif</span> isinstance(qtables, tuple):</div>
<div class="line"><span class="lineno">  711</span>                qtables = list(qtables)</div>
<div class="line"><span class="lineno">  712</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> (0 &lt; len(qtables) &lt; 5):</div>
<div class="line"><span class="lineno">  713</span>                msg = <span class="stringliteral">&quot;None or too many quantization tables&quot;</span></div>
<div class="line"><span class="lineno">  714</span>                <span class="keywordflow">raise</span> ValueError(msg)</div>
<div class="line"><span class="lineno">  715</span>            <span class="keywordflow">for</span> idx, table <span class="keywordflow">in</span> enumerate(qtables):</div>
<div class="line"><span class="lineno">  716</span>                <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  717</span>                    <span class="keywordflow">if</span> len(table) != 64:</div>
<div class="line"><span class="lineno">  718</span>                        <span class="keywordflow">raise</span> TypeError</div>
<div class="line"><span class="lineno">  719</span>                    table = array.array(<span class="stringliteral">&quot;H&quot;</span>, table)</div>
<div class="line"><span class="lineno">  720</span>                <span class="keywordflow">except</span> TypeError <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  721</span>                    msg = <span class="stringliteral">&quot;Invalid quantization table&quot;</span></div>
<div class="line"><span class="lineno">  722</span>                    <span class="keywordflow">raise</span> ValueError(msg) <span class="keyword">from</span> e</div>
<div class="line"><span class="lineno">  723</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  724</span>                    qtables[idx] = list(table)</div>
<div class="line"><span class="lineno">  725</span>            <span class="keywordflow">return</span> qtables</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span>    <span class="keywordflow">if</span> qtables == <span class="stringliteral">&quot;keep&quot;</span>:</div>
<div class="line"><span class="lineno">  728</span>        <span class="keywordflow">if</span> im.format != <span class="stringliteral">&quot;JPEG&quot;</span>:</div>
<div class="line"><span class="lineno">  729</span>            msg = <span class="stringliteral">&quot;Cannot use &#39;keep&#39; when original image is not a JPEG&quot;</span></div>
<div class="line"><span class="lineno">  730</span>            <span class="keywordflow">raise</span> ValueError(msg)</div>
<div class="line"><span class="lineno">  731</span>        qtables = getattr(im, <span class="stringliteral">&quot;quantization&quot;</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><span class="lineno">  732</span>    qtables = validate_qtables(qtables)</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>    extra = info.get(<span class="stringliteral">&quot;extra&quot;</span>, b<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>    icc_profile = info.get(<span class="stringliteral">&quot;icc_profile&quot;</span>)</div>
<div class="line"><span class="lineno">  737</span>    <span class="keywordflow">if</span> icc_profile:</div>
<div class="line"><span class="lineno">  738</span>        ICC_OVERHEAD_LEN = 14</div>
<div class="line"><span class="lineno">  739</span>        MAX_BYTES_IN_MARKER = 65533</div>
<div class="line"><span class="lineno">  740</span>        MAX_DATA_BYTES_IN_MARKER = MAX_BYTES_IN_MARKER - ICC_OVERHEAD_LEN</div>
<div class="line"><span class="lineno">  741</span>        markers = []</div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordflow">while</span> icc_profile:</div>
<div class="line"><span class="lineno">  743</span>            markers.append(icc_profile[:MAX_DATA_BYTES_IN_MARKER])</div>
<div class="line"><span class="lineno">  744</span>            icc_profile = icc_profile[MAX_DATA_BYTES_IN_MARKER:]</div>
<div class="line"><span class="lineno">  745</span>        i = 1</div>
<div class="line"><span class="lineno">  746</span>        <span class="keywordflow">for</span> marker <span class="keywordflow">in</span> markers:</div>
<div class="line"><span class="lineno">  747</span>            size = o16(2 + ICC_OVERHEAD_LEN + len(marker))</div>
<div class="line"><span class="lineno">  748</span>            extra += (</div>
<div class="line"><span class="lineno">  749</span>                b<span class="stringliteral">&quot;\xFF\xE2&quot;</span></div>
<div class="line"><span class="lineno">  750</span>                + size</div>
<div class="line"><span class="lineno">  751</span>                + b<span class="stringliteral">&quot;ICC_PROFILE\0&quot;</span></div>
<div class="line"><span class="lineno">  752</span>                + o8(i)</div>
<div class="line"><span class="lineno">  753</span>                + o8(len(markers))</div>
<div class="line"><span class="lineno">  754</span>                + marker</div>
<div class="line"><span class="lineno">  755</span>            )</div>
<div class="line"><span class="lineno">  756</span>            i += 1</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>    comment = info.get(<span class="stringliteral">&quot;comment&quot;</span>, im.info.get(<span class="stringliteral">&quot;comment&quot;</span>))</div>
<div class="line"><span class="lineno">  759</span> </div>
<div class="line"><span class="lineno">  760</span>    <span class="comment"># &quot;progressive&quot; is the official name, but older documentation</span></div>
<div class="line"><span class="lineno">  761</span>    <span class="comment"># says &quot;progression&quot;</span></div>
<div class="line"><span class="lineno">  762</span>    <span class="comment"># FIXME: issue a warning if the wrong form is used (post-1.1.7)</span></div>
<div class="line"><span class="lineno">  763</span>    progressive = info.get(<span class="stringliteral">&quot;progressive&quot;</span>, <span class="keyword">False</span>) <span class="keywordflow">or</span> info.get(<span class="stringliteral">&quot;progression&quot;</span>, <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  764</span> </div>
<div class="line"><span class="lineno">  765</span>    optimize = info.get(<span class="stringliteral">&quot;optimize&quot;</span>, <span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>    exif = info.get(<span class="stringliteral">&quot;exif&quot;</span>, b<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  768</span>    <span class="keywordflow">if</span> isinstance(exif, Image.Exif):</div>
<div class="line"><span class="lineno">  769</span>        exif = exif.tobytes()</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>    <span class="comment"># get keyword arguments</span></div>
<div class="line"><span class="lineno">  772</span>    im.encoderconfig = (</div>
<div class="line"><span class="lineno">  773</span>        quality,</div>
<div class="line"><span class="lineno">  774</span>        progressive,</div>
<div class="line"><span class="lineno">  775</span>        info.get(<span class="stringliteral">&quot;smooth&quot;</span>, 0),</div>
<div class="line"><span class="lineno">  776</span>        optimize,</div>
<div class="line"><span class="lineno">  777</span>        info.get(<span class="stringliteral">&quot;streamtype&quot;</span>, 0),</div>
<div class="line"><span class="lineno">  778</span>        dpi[0],</div>
<div class="line"><span class="lineno">  779</span>        dpi[1],</div>
<div class="line"><span class="lineno">  780</span>        subsampling,</div>
<div class="line"><span class="lineno">  781</span>        qtables,</div>
<div class="line"><span class="lineno">  782</span>        comment,</div>
<div class="line"><span class="lineno">  783</span>        extra,</div>
<div class="line"><span class="lineno">  784</span>        exif,</div>
<div class="line"><span class="lineno">  785</span>    )</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span>    <span class="comment"># if we optimize, libjpeg needs a buffer big enough to hold the whole image</span></div>
<div class="line"><span class="lineno">  788</span>    <span class="comment"># in a shot. Guessing on the size, at im.size bytes. (raw pixel size is</span></div>
<div class="line"><span class="lineno">  789</span>    <span class="comment"># channels*size, this is a value that&#39;s been used in a django patch.</span></div>
<div class="line"><span class="lineno">  790</span>    <span class="comment"># https://github.com/matthewwithanm/django-imagekit/issues/50</span></div>
<div class="line"><span class="lineno">  791</span>    bufsize = 0</div>
<div class="line"><span class="lineno">  792</span>    <span class="keywordflow">if</span> optimize <span class="keywordflow">or</span> progressive:</div>
<div class="line"><span class="lineno">  793</span>        <span class="comment"># CMYK can be bigger</span></div>
<div class="line"><span class="lineno">  794</span>        <span class="keywordflow">if</span> im.mode == <span class="stringliteral">&quot;CMYK&quot;</span>:</div>
<div class="line"><span class="lineno">  795</span>            bufsize = 4 * im.size[0] * im.size[1]</div>
<div class="line"><span class="lineno">  796</span>        <span class="comment"># keep sets quality to -1, but the actual value may be high.</span></div>
<div class="line"><span class="lineno">  797</span>        <span class="keywordflow">elif</span> quality &gt;= 95 <span class="keywordflow">or</span> quality == -1:</div>
<div class="line"><span class="lineno">  798</span>            bufsize = 2 * im.size[0] * im.size[1]</div>
<div class="line"><span class="lineno">  799</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  800</span>            bufsize = im.size[0] * im.size[1]</div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>    <span class="comment"># The EXIF info needs to be written as one block, + APP1, + one spare byte.</span></div>
<div class="line"><span class="lineno">  803</span>    <span class="comment"># Ensure that our buffer is big enough. Same with the icc_profile block.</span></div>
<div class="line"><span class="lineno">  804</span>    bufsize = max(ImageFile.MAXBLOCK, bufsize, len(exif) + 5, len(extra) + 1)</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    ImageFile._save(im, fp, [(<span class="stringliteral">&quot;jpeg&quot;</span>, (0, 0) + im.size, 0, rawmode)], bufsize)</div>
<div class="line"><span class="lineno">  807</span> </div>
<div class="line"><span class="lineno">  808</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a41488a5fbbc2040b5ae78f24e836b467" name="a41488a5fbbc2040b5ae78f24e836b467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41488a5fbbc2040b5ae78f24e836b467">&#9670;&#160;</a></span>_save_cjpeg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin._save_cjpeg </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>im</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  809</span><span class="keyword">def </span>_save_cjpeg(im, fp, filename):</div>
<div class="line"><span class="lineno">  810</span>    <span class="comment"># ALTERNATIVE: handle JPEGs via the IJG command line utilities.</span></div>
<div class="line"><span class="lineno">  811</span>    tempfile = im._dump()</div>
<div class="line"><span class="lineno">  812</span>    subprocess.check_call([<span class="stringliteral">&quot;cjpeg&quot;</span>, <span class="stringliteral">&quot;-outfile&quot;</span>, filename, tempfile])</div>
<div class="line"><span class="lineno">  813</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  814</span>        os.unlink(tempfile)</div>
<div class="line"><span class="lineno">  815</span>    <span class="keywordflow">except</span> OSError:</div>
<div class="line"><span class="lineno">  816</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a48d8e7e5615137942ca4217abea6174d" name="a48d8e7e5615137942ca4217abea6174d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d8e7e5615137942ca4217abea6174d">&#9670;&#160;</a></span>APP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.APP </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>marker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   61</span><span class="keyword">def </span>APP(self, marker):</div>
<div class="line"><span class="lineno">   62</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">   63</span>    <span class="comment"># Application marker.  Store these in the APP dictionary.</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="comment"># Also look for well-known application markers.</span></div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    n = i16(self.fp.read(2)) - 2</div>
<div class="line"><span class="lineno">   67</span>    s = ImageFile._safe_read(self.fp, n)</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>    app = <span class="stringliteral">&quot;APP%d&quot;</span> % (marker &amp; 15)</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    self.app[app] = s  <span class="comment"># compatibility</span></div>
<div class="line"><span class="lineno">   72</span>    self.applist.append((app, s))</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span> marker == 0xFFE0 <span class="keywordflow">and</span> s[:4] == b<span class="stringliteral">&quot;JFIF&quot;</span>:</div>
<div class="line"><span class="lineno">   75</span>        <span class="comment"># extract JFIF information</span></div>
<div class="line"><span class="lineno">   76</span>        self.info[<span class="stringliteral">&quot;jfif&quot;</span>] = version = i16(s, 5)  <span class="comment"># version</span></div>
<div class="line"><span class="lineno">   77</span>        self.info[<span class="stringliteral">&quot;jfif_version&quot;</span>] = divmod(version, 256)</div>
<div class="line"><span class="lineno">   78</span>        <span class="comment"># extract JFIF properties</span></div>
<div class="line"><span class="lineno">   79</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   80</span>            jfif_unit = s[7]</div>
<div class="line"><span class="lineno">   81</span>            jfif_density = i16(s, 8), i16(s, 10)</div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">except</span> Exception:</div>
<div class="line"><span class="lineno">   83</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   85</span>            <span class="keywordflow">if</span> jfif_unit == 1:</div>
<div class="line"><span class="lineno">   86</span>                self.info[<span class="stringliteral">&quot;dpi&quot;</span>] = jfif_density</div>
<div class="line"><span class="lineno">   87</span>            self.info[<span class="stringliteral">&quot;jfif_unit&quot;</span>] = jfif_unit</div>
<div class="line"><span class="lineno">   88</span>            self.info[<span class="stringliteral">&quot;jfif_density&quot;</span>] = jfif_density</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">elif</span> marker == 0xFFE1 <span class="keywordflow">and</span> s[:5] == b<span class="stringliteral">&quot;Exif\0&quot;</span>:</div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;exif&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.info:</div>
<div class="line"><span class="lineno">   91</span>            <span class="comment"># extract EXIF information (incomplete)</span></div>
<div class="line"><span class="lineno">   92</span>            self.info[<span class="stringliteral">&quot;exif&quot;</span>] = s  <span class="comment"># FIXME: value will change</span></div>
<div class="line"><span class="lineno">   93</span>            self._exif_offset = self.fp.tell() - n + 6</div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">elif</span> marker == 0xFFE2 <span class="keywordflow">and</span> s[:5] == b<span class="stringliteral">&quot;FPXR\0&quot;</span>:</div>
<div class="line"><span class="lineno">   95</span>        <span class="comment"># extract FlashPix information (incomplete)</span></div>
<div class="line"><span class="lineno">   96</span>        self.info[<span class="stringliteral">&quot;flashpix&quot;</span>] = s  <span class="comment"># FIXME: value will change</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">elif</span> marker == 0xFFE2 <span class="keywordflow">and</span> s[:12] == b<span class="stringliteral">&quot;ICC_PROFILE\0&quot;</span>:</div>
<div class="line"><span class="lineno">   98</span>        <span class="comment"># Since an ICC profile can be larger than the maximum size of</span></div>
<div class="line"><span class="lineno">   99</span>        <span class="comment"># a JPEG marker (64K), we need provisions to split it into</span></div>
<div class="line"><span class="lineno">  100</span>        <span class="comment"># multiple markers. The format defined by the ICC specifies</span></div>
<div class="line"><span class="lineno">  101</span>        <span class="comment"># one or more APP2 markers containing the following data:</span></div>
<div class="line"><span class="lineno">  102</span>        <span class="comment">#   Identifying string      ASCII &quot;ICC_PROFILE\0&quot;  (12 bytes)</span></div>
<div class="line"><span class="lineno">  103</span>        <span class="comment">#   Marker sequence number  1, 2, etc (1 byte)</span></div>
<div class="line"><span class="lineno">  104</span>        <span class="comment">#   Number of markers       Total of APP2&#39;s used (1 byte)</span></div>
<div class="line"><span class="lineno">  105</span>        <span class="comment">#   Profile data            (remainder of APP2 data)</span></div>
<div class="line"><span class="lineno">  106</span>        <span class="comment"># Decoders should use the marker sequence numbers to</span></div>
<div class="line"><span class="lineno">  107</span>        <span class="comment"># reassemble the profile, rather than assuming that the APP2</span></div>
<div class="line"><span class="lineno">  108</span>        <span class="comment"># markers appear in the correct sequence.</span></div>
<div class="line"><span class="lineno">  109</span>        self.icclist.append(s)</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">elif</span> marker == 0xFFED <span class="keywordflow">and</span> s[:14] == b<span class="stringliteral">&quot;Photoshop 3.0\x00&quot;</span>:</div>
<div class="line"><span class="lineno">  111</span>        <span class="comment"># parse the image resource block</span></div>
<div class="line"><span class="lineno">  112</span>        offset = 14</div>
<div class="line"><span class="lineno">  113</span>        photoshop = self.info.setdefault(<span class="stringliteral">&quot;photoshop&quot;</span>, {})</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">while</span> s[offset : offset + 4] == b<span class="stringliteral">&quot;8BIM&quot;</span>:</div>
<div class="line"><span class="lineno">  115</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  116</span>                offset += 4</div>
<div class="line"><span class="lineno">  117</span>                <span class="comment"># resource code</span></div>
<div class="line"><span class="lineno">  118</span>                code = i16(s, offset)</div>
<div class="line"><span class="lineno">  119</span>                offset += 2</div>
<div class="line"><span class="lineno">  120</span>                <span class="comment"># resource name (usually empty)</span></div>
<div class="line"><span class="lineno">  121</span>                name_len = s[offset]</div>
<div class="line"><span class="lineno">  122</span>                <span class="comment"># name = s[offset+1:offset+1+name_len]</span></div>
<div class="line"><span class="lineno">  123</span>                offset += 1 + name_len</div>
<div class="line"><span class="lineno">  124</span>                offset += offset &amp; 1  <span class="comment"># align</span></div>
<div class="line"><span class="lineno">  125</span>                <span class="comment"># resource data block</span></div>
<div class="line"><span class="lineno">  126</span>                size = i32(s, offset)</div>
<div class="line"><span class="lineno">  127</span>                offset += 4</div>
<div class="line"><span class="lineno">  128</span>                data = s[offset : offset + size]</div>
<div class="line"><span class="lineno">  129</span>                <span class="keywordflow">if</span> code == 0x03ED:  <span class="comment"># ResolutionInfo</span></div>
<div class="line"><span class="lineno">  130</span>                    data = {</div>
<div class="line"><span class="lineno">  131</span>                        <span class="stringliteral">&quot;XResolution&quot;</span>: i32(data, 0) / 65536,</div>
<div class="line"><span class="lineno">  132</span>                        <span class="stringliteral">&quot;DisplayedUnitsX&quot;</span>: i16(data, 4),</div>
<div class="line"><span class="lineno">  133</span>                        <span class="stringliteral">&quot;YResolution&quot;</span>: i32(data, 8) / 65536,</div>
<div class="line"><span class="lineno">  134</span>                        <span class="stringliteral">&quot;DisplayedUnitsY&quot;</span>: i16(data, 12),</div>
<div class="line"><span class="lineno">  135</span>                    }</div>
<div class="line"><span class="lineno">  136</span>                photoshop[code] = data</div>
<div class="line"><span class="lineno">  137</span>                offset += size</div>
<div class="line"><span class="lineno">  138</span>                offset += offset &amp; 1  <span class="comment"># align</span></div>
<div class="line"><span class="lineno">  139</span>            <span class="keywordflow">except</span> struct.error:</div>
<div class="line"><span class="lineno">  140</span>                <span class="keywordflow">break</span>  <span class="comment"># insufficient data</span></div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordflow">elif</span> marker == 0xFFEE <span class="keywordflow">and</span> s[:5] == b<span class="stringliteral">&quot;Adobe&quot;</span>:</div>
<div class="line"><span class="lineno">  143</span>        self.info[<span class="stringliteral">&quot;adobe&quot;</span>] = i16(s, 5)</div>
<div class="line"><span class="lineno">  144</span>        <span class="comment"># extract Adobe custom properties</span></div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  146</span>            adobe_transform = s[11]</div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">except</span> IndexError:</div>
<div class="line"><span class="lineno">  148</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  149</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  150</span>            self.info[<span class="stringliteral">&quot;adobe_transform&quot;</span>] = adobe_transform</div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">elif</span> marker == 0xFFE2 <span class="keywordflow">and</span> s[:4] == b<span class="stringliteral">&quot;MPF\0&quot;</span>:</div>
<div class="line"><span class="lineno">  152</span>        <span class="comment"># extract MPO information</span></div>
<div class="line"><span class="lineno">  153</span>        self.info[<span class="stringliteral">&quot;mp&quot;</span>] = s[4:]</div>
<div class="line"><span class="lineno">  154</span>        <span class="comment"># offset is current location minus buffer size</span></div>
<div class="line"><span class="lineno">  155</span>        <span class="comment"># plus constant header size</span></div>
<div class="line"><span class="lineno">  156</span>        self.info[<span class="stringliteral">&quot;mpoffset&quot;</span>] = self.fp.tell() - n + 4</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="comment"># If DPI isn&#39;t in JPEG header, fetch from EXIF</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;dpi&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.info <span class="keywordflow">and</span> <span class="stringliteral">&quot;exif&quot;</span> <span class="keywordflow">in</span> self.info:</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  161</span>            exif = self.getexif()</div>
<div class="line"><span class="lineno">  162</span>            resolution_unit = exif[0x0128]</div>
<div class="line"><span class="lineno">  163</span>            x_resolution = exif[0x011A]</div>
<div class="line"><span class="lineno">  164</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  165</span>                dpi = float(x_resolution[0]) / x_resolution[1]</div>
<div class="line"><span class="lineno">  166</span>            <span class="keywordflow">except</span> TypeError:</div>
<div class="line"><span class="lineno">  167</span>                dpi = x_resolution</div>
<div class="line"><span class="lineno">  168</span>            <span class="keywordflow">if</span> math.isnan(dpi):</div>
<div class="line"><span class="lineno">  169</span>                <span class="keywordflow">raise</span> ValueError</div>
<div class="line"><span class="lineno">  170</span>            <span class="keywordflow">if</span> resolution_unit == 3:  <span class="comment"># cm</span></div>
<div class="line"><span class="lineno">  171</span>                <span class="comment"># 1 dpcm = 2.54 dpi</span></div>
<div class="line"><span class="lineno">  172</span>                dpi *= 2.54</div>
<div class="line"><span class="lineno">  173</span>            self.info[<span class="stringliteral">&quot;dpi&quot;</span>] = dpi, dpi</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">except</span> (TypeError, KeyError, SyntaxError, ValueError, ZeroDivisionError):</div>
<div class="line"><span class="lineno">  175</span>            <span class="comment"># SyntaxError for invalid/unreadable EXIF</span></div>
<div class="line"><span class="lineno">  176</span>            <span class="comment"># KeyError for dpi not included</span></div>
<div class="line"><span class="lineno">  177</span>            <span class="comment"># ZeroDivisionError for invalid dpi rational value</span></div>
<div class="line"><span class="lineno">  178</span>            <span class="comment"># ValueError or TypeError for dpi being an invalid float</span></div>
<div class="line"><span class="lineno">  179</span>            self.info[<span class="stringliteral">&quot;dpi&quot;</span>] = 72, 72</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e04ac1fb535437187c5cd938886421e" name="a0e04ac1fb535437187c5cd938886421e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e04ac1fb535437187c5cd938886421e">&#9670;&#160;</a></span>COM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.COM </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>marker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  182</span><span class="keyword">def </span>COM(self, marker):</div>
<div class="line"><span class="lineno">  183</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  184</span>    <span class="comment"># Comment marker.  Store these in the APP dictionary.</span></div>
<div class="line"><span class="lineno">  185</span>    n = i16(self.fp.read(2)) - 2</div>
<div class="line"><span class="lineno">  186</span>    s = ImageFile._safe_read(self.fp, n)</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    self.info[<span class="stringliteral">&quot;comment&quot;</span>] = s</div>
<div class="line"><span class="lineno">  189</span>    self.app[<span class="stringliteral">&quot;COM&quot;</span>] = s  <span class="comment"># compatibility</span></div>
<div class="line"><span class="lineno">  190</span>    self.applist.append((<span class="stringliteral">&quot;COM&quot;</span>, s))</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af5319282355e4de71790e469a6001029" name="af5319282355e4de71790e469a6001029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5319282355e4de71790e469a6001029">&#9670;&#160;</a></span>convert_dict_qtables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.convert_dict_qtables </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>qtables</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  618</span><span class="keyword">def </span>convert_dict_qtables(qtables):</div>
<div class="line"><span class="lineno">  619</span>    deprecate(<span class="stringliteral">&quot;convert_dict_qtables&quot;</span>, 10, action=<span class="stringliteral">&quot;Conversion is no longer needed&quot;</span>)</div>
<div class="line"><span class="lineno">  620</span>    <span class="keywordflow">return</span> qtables</div>
<div class="line"><span class="lineno">  621</span> </div>
<div class="line"><span class="lineno">  622</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a276d896c3ea0bbb8a45d060b9f33bbaf" name="a276d896c3ea0bbb8a45d060b9f33bbaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a276d896c3ea0bbb8a45d060b9f33bbaf">&#9670;&#160;</a></span>DQT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.DQT </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>marker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  243</span><span class="keyword">def </span>DQT(self, marker):</div>
<div class="line"><span class="lineno">  244</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  245</span>    <span class="comment"># Define quantization table.  Note that there might be more</span></div>
<div class="line"><span class="lineno">  246</span>    <span class="comment"># than one table in each marker.</span></div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <span class="comment"># FIXME: The quantization tables can be used to estimate the</span></div>
<div class="line"><span class="lineno">  249</span>    <span class="comment"># compression quality.</span></div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    n = i16(self.fp.read(2)) - 2</div>
<div class="line"><span class="lineno">  252</span>    s = ImageFile._safe_read(self.fp, n)</div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordflow">while</span> len(s):</div>
<div class="line"><span class="lineno">  254</span>        v = s[0]</div>
<div class="line"><span class="lineno">  255</span>        precision = 1 <span class="keywordflow">if</span> (v // 16 == 0) <span class="keywordflow">else</span> 2  <span class="comment"># in bytes</span></div>
<div class="line"><span class="lineno">  256</span>        qt_length = 1 + precision * 64</div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">if</span> len(s) &lt; qt_length:</div>
<div class="line"><span class="lineno">  258</span>            msg = <span class="stringliteral">&quot;bad quantization table marker&quot;</span></div>
<div class="line"><span class="lineno">  259</span>            <span class="keywordflow">raise</span> SyntaxError(msg)</div>
<div class="line"><span class="lineno">  260</span>        data = array.array(<span class="stringliteral">&quot;B&quot;</span> <span class="keywordflow">if</span> precision == 1 <span class="keywordflow">else</span> <span class="stringliteral">&quot;H&quot;</span>, s[1:qt_length])</div>
<div class="line"><span class="lineno">  261</span>        <span class="keywordflow">if</span> sys.byteorder == <span class="stringliteral">&quot;little&quot;</span> <span class="keywordflow">and</span> precision &gt; 1:</div>
<div class="line"><span class="lineno">  262</span>            data.byteswap()  <span class="comment"># the values are always big-endian</span></div>
<div class="line"><span class="lineno">  263</span>        self.quantization[v &amp; 15] = [data[i] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> zigzag_index]</div>
<div class="line"><span class="lineno">  264</span>        s = s[qt_length:]</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span><span class="comment">#</span></div>
<div class="line"><span class="lineno">  268</span><span class="comment"># JPEG marker table</span></div>
<div class="line"><span class="lineno">  269</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aef2086066b1d83d2679fb3235e950883" name="aef2086066b1d83d2679fb3235e950883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef2086066b1d83d2679fb3235e950883">&#9670;&#160;</a></span>get_sampling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.get_sampling </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>im</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  623</span><span class="keyword">def </span>get_sampling(im):</div>
<div class="line"><span class="lineno">  624</span>    <span class="comment"># There&#39;s no subsampling when images have only 1 layer</span></div>
<div class="line"><span class="lineno">  625</span>    <span class="comment"># (grayscale images) or when they are CMYK (4 layers),</span></div>
<div class="line"><span class="lineno">  626</span>    <span class="comment"># so set subsampling to the default value.</span></div>
<div class="line"><span class="lineno">  627</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  628</span>    <span class="comment"># NOTE: currently Pillow can&#39;t encode JPEG to YCCK format.</span></div>
<div class="line"><span class="lineno">  629</span>    <span class="comment"># If YCCK support is added in the future, subsampling code will have</span></div>
<div class="line"><span class="lineno">  630</span>    <span class="comment"># to be updated (here and in JpegEncode.c) to deal with 4 layers.</span></div>
<div class="line"><span class="lineno">  631</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(im, <span class="stringliteral">&quot;layers&quot;</span>) <span class="keywordflow">or</span> im.layers <span class="keywordflow">in</span> (1, 4):</div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">return</span> -1</div>
<div class="line"><span class="lineno">  633</span>    sampling = im.layer[0][1:3] + im.layer[1][1:3] + im.layer[2][1:3]</div>
<div class="line"><span class="lineno">  634</span>    <span class="keywordflow">return</span> samplings.get(sampling, -1)</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e116116fe1bdfe5b0e8025f3328b1fe" name="a5e116116fe1bdfe5b0e8025f3328b1fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e116116fe1bdfe5b0e8025f3328b1fe">&#9670;&#160;</a></span>jpeg_factory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.jpeg_factory </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fp</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factory for making JPEG and MPO instances. </p>
<div class="fragment"><div class="line"><span class="lineno">  821</span><span class="keyword">def </span>jpeg_factory(fp=None, filename=None):</div>
<div class="line"><span class="lineno">  822</span>    im = JpegImageFile(fp, filename)</div>
<div class="line"><span class="lineno">  823</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  824</span>        mpheader = im._getmp()</div>
<div class="line"><span class="lineno">  825</span>        <span class="keywordflow">if</span> mpheader[45057] &gt; 1:</div>
<div class="line"><span class="lineno">  826</span>            <span class="comment"># It&#39;s actually an MPO</span></div>
<div class="line"><span class="lineno">  827</span>            <span class="keyword">from</span> .MpoImagePlugin <span class="keyword">import</span> MpoImageFile</div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span>            <span class="comment"># Don&#39;t reload everything, just convert it.</span></div>
<div class="line"><span class="lineno">  830</span>            im = MpoImageFile.adopt(im, mpheader)</div>
<div class="line"><span class="lineno">  831</span>    <span class="keywordflow">except</span> (TypeError, IndexError):</div>
<div class="line"><span class="lineno">  832</span>        <span class="comment"># It is really a JPEG</span></div>
<div class="line"><span class="lineno">  833</span>        <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno">  834</span>    <span class="keywordflow">except</span> SyntaxError:</div>
<div class="line"><span class="lineno">  835</span>        warnings.warn(</div>
<div class="line"><span class="lineno">  836</span>            <span class="stringliteral">&quot;Image appears to be a malformed MPO file, it will be &quot;</span></div>
<div class="line"><span class="lineno">  837</span>            <span class="stringliteral">&quot;interpreted as a base JPEG file&quot;</span></div>
<div class="line"><span class="lineno">  838</span>        )</div>
<div class="line"><span class="lineno">  839</span>    <span class="keywordflow">return</span> im</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span> </div>
<div class="line"><span class="lineno">  842</span><span class="comment"># ---------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno">  843</span><span class="comment"># Registry stuff</span></div>
<div class="line"><span class="lineno">  844</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b09d69844c9ccf99be5da7aedd65db8" name="a6b09d69844c9ccf99be5da7aedd65db8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b09d69844c9ccf99be5da7aedd65db8">&#9670;&#160;</a></span>Skip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.Skip </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>marker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   56</span><span class="keyword">def </span>Skip(self, marker):</div>
<div class="line"><span class="lineno">   57</span>    n = i16(self.fp.read(2)) - 2</div>
<div class="line"><span class="lineno">   58</span>    ImageFile._safe_read(self.fp, n)</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a86c440581c79ff080a588e1de9465185" name="a86c440581c79ff080a588e1de9465185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c440581c79ff080a588e1de9465185">&#9670;&#160;</a></span>SOF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.SOF </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>marker</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  193</span><span class="keyword">def </span>SOF(self, marker):</div>
<div class="line"><span class="lineno">  194</span>    <span class="comment">#</span></div>
<div class="line"><span class="lineno">  195</span>    <span class="comment"># Start of frame marker.  Defines the size and mode of the</span></div>
<div class="line"><span class="lineno">  196</span>    <span class="comment"># image.  JPEG is colour blind, so we use some simple</span></div>
<div class="line"><span class="lineno">  197</span>    <span class="comment"># heuristics to map the number of layers to an appropriate</span></div>
<div class="line"><span class="lineno">  198</span>    <span class="comment"># mode.  Note that this could be made a bit brighter, by</span></div>
<div class="line"><span class="lineno">  199</span>    <span class="comment"># looking for JFIF and Adobe APP markers.</span></div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    n = i16(self.fp.read(2)) - 2</div>
<div class="line"><span class="lineno">  202</span>    s = ImageFile._safe_read(self.fp, n)</div>
<div class="line"><span class="lineno">  203</span>    self._size = i16(s, 3), i16(s, 1)</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    self.bits = s[0]</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">if</span> self.bits != 8:</div>
<div class="line"><span class="lineno">  207</span>        msg = f<span class="stringliteral">&quot;cannot handle {self.bits}-bit layers&quot;</span></div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">raise</span> SyntaxError(msg)</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    self.layers = s[5]</div>
<div class="line"><span class="lineno">  211</span>    <span class="keywordflow">if</span> self.layers == 1:</div>
<div class="line"><span class="lineno">  212</span>        self.mode = <span class="stringliteral">&quot;L&quot;</span></div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordflow">elif</span> self.layers == 3:</div>
<div class="line"><span class="lineno">  214</span>        self.mode = <span class="stringliteral">&quot;RGB&quot;</span></div>
<div class="line"><span class="lineno">  215</span>    <span class="keywordflow">elif</span> self.layers == 4:</div>
<div class="line"><span class="lineno">  216</span>        self.mode = <span class="stringliteral">&quot;CMYK&quot;</span></div>
<div class="line"><span class="lineno">  217</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  218</span>        msg = f<span class="stringliteral">&quot;cannot handle {self.layers}-layer images&quot;</span></div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">raise</span> SyntaxError(msg)</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">if</span> marker <span class="keywordflow">in</span> [0xFFC2, 0xFFC6, 0xFFCA, 0xFFCE]:</div>
<div class="line"><span class="lineno">  222</span>        self.info[<span class="stringliteral">&quot;progressive&quot;</span>] = self.info[<span class="stringliteral">&quot;progression&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span> self.icclist:</div>
<div class="line"><span class="lineno">  225</span>        <span class="comment"># fixup icc profile</span></div>
<div class="line"><span class="lineno">  226</span>        self.icclist.sort()  <span class="comment"># sort by sequence number</span></div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">if</span> self.icclist[0][13] == len(self.icclist):</div>
<div class="line"><span class="lineno">  228</span>            profile = []</div>
<div class="line"><span class="lineno">  229</span>            <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.icclist:</div>
<div class="line"><span class="lineno">  230</span>                profile.append(p[14:])</div>
<div class="line"><span class="lineno">  231</span>            icc_profile = b<span class="stringliteral">&quot;&quot;</span>.join(profile)</div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  233</span>            icc_profile = <span class="keywordtype">None</span>  <span class="comment"># wrong number of fragments</span></div>
<div class="line"><span class="lineno">  234</span>        self.info[<span class="stringliteral">&quot;icc_profile&quot;</span>] = icc_profile</div>
<div class="line"><span class="lineno">  235</span>        self.icclist = []</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(6, len(s), 3):</div>
<div class="line"><span class="lineno">  238</span>        t = s[i : i + 3]</div>
<div class="line"><span class="lineno">  239</span>        <span class="comment"># 4-tuples: id, vsamp, hsamp, qtable</span></div>
<div class="line"><span class="lineno">  240</span>        self.layer.append((t[0], t[1] // 16, t[1] &amp; 15, t[2]))</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae58ef17201b214b54df4ee5d15dba0a9" name="ae58ef17201b214b54df4ee5d15dba0a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae58ef17201b214b54df4ee5d15dba0a9">&#9670;&#160;</a></span>_exif_offset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin._exif_offset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a456375d0b35ab014bd7158bbfda703eb" name="a456375d0b35ab014bd7158bbfda703eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a456375d0b35ab014bd7158bbfda703eb">&#9670;&#160;</a></span>_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin._size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acfc8adc0e5df82d6c92e3ff83b6321f5" name="acfc8adc0e5df82d6c92e3ff83b6321f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc8adc0e5df82d6c92e3ff83b6321f5">&#9670;&#160;</a></span>bits</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.bits</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afbb81958534085c78a999abdb1ed0665" name="afbb81958534085c78a999abdb1ed0665"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb81958534085c78a999abdb1ed0665">&#9670;&#160;</a></span>fp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.fp</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a649e409f25ad4457e6f6ff6c2c3a5dd8" name="a649e409f25ad4457e6f6ff6c2c3a5dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a649e409f25ad4457e6f6ff6c2c3a5dd8">&#9670;&#160;</a></span>icclist</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.icclist</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0f3dc7daa7c66940aff1401d59dd8f2a" name="a0f3dc7daa7c66940aff1401d59dd8f2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f3dc7daa7c66940aff1401d59dd8f2a">&#9670;&#160;</a></span>layers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.layers</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3b27b9d942b836a660aa4a35e3cc72c9" name="a3b27b9d942b836a660aa4a35e3cc72c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b27b9d942b836a660aa4a35e3cc72c9">&#9670;&#160;</a></span>MARKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict PIL.JpegImagePlugin.MARKER</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a55efcf4f75445996b359eef9f8ade5e6" name="a55efcf4f75445996b359eef9f8ade5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55efcf4f75445996b359eef9f8ade5e6">&#9670;&#160;</a></span>mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PIL.JpegImagePlugin.mode</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1d2046bc6df6ca9276d643df706f0aa9" name="a1d2046bc6df6ca9276d643df706f0aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d2046bc6df6ca9276d643df706f0aa9">&#9670;&#160;</a></span>RAWMODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict PIL.JpegImagePlugin.RAWMODE</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  {</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;1&quot;</span>: <span class="stringliteral">&quot;L&quot;</span>,</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&quot;L&quot;</span>: <span class="stringliteral">&quot;L&quot;</span>,</div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&quot;RGB&quot;</span>: <span class="stringliteral">&quot;RGB&quot;</span>,</div>
<div class="line"><span class="lineno">    5</span>    <span class="stringliteral">&quot;RGBX&quot;</span>: <span class="stringliteral">&quot;RGB&quot;</span>,</div>
<div class="line"><span class="lineno">    6</span>    <span class="stringliteral">&quot;CMYK&quot;</span>: <span class="stringliteral">&quot;CMYK;I&quot;</span>,  <span class="comment"># assume adobe conventions</span></div>
<div class="line"><span class="lineno">    7</span>    <span class="stringliteral">&quot;YCbCr&quot;</span>: <span class="stringliteral">&quot;YCbCr&quot;</span>,</div>
<div class="line"><span class="lineno">    8</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bbc666db1d7d40d2f46edf4049b206b" name="a1bbc666db1d7d40d2f46edf4049b206b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bbc666db1d7d40d2f46edf4049b206b">&#9670;&#160;</a></span>samplings</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict PIL.JpegImagePlugin.samplings</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  {</div>
<div class="line"><span class="lineno">    2</span>    (1, 1, 1, 1, 1, 1): 0,</div>
<div class="line"><span class="lineno">    3</span>    (2, 1, 1, 1, 1, 1): 1,</div>
<div class="line"><span class="lineno">    4</span>    (2, 2, 1, 1, 1, 1): 2,</div>
<div class="line"><span class="lineno">    5</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c522eff72189a902699b7f7a812696d" name="a5c522eff72189a902699b7f7a812696d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c522eff72189a902699b7f7a812696d">&#9670;&#160;</a></span>zigzag_index</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tuple PIL.JpegImagePlugin.zigzag_index</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  (</div>
<div class="line"><span class="lineno">    2</span>    0,  1,  5,  6, 14, 15, 27, 28,</div>
<div class="line"><span class="lineno">    3</span>    2,  4,  7, 13, 16, 26, 29, 42,</div>
<div class="line"><span class="lineno">    4</span>    3,  8, 12, 17, 25, 30, 41, 43,</div>
<div class="line"><span class="lineno">    5</span>    9, 11, 18, 24, 31, 40, 44, 53,</div>
<div class="line"><span class="lineno">    6</span>    10, 19, 23, 32, 39, 45, 52, 54,</div>
<div class="line"><span class="lineno">    7</span>    20, 22, 33, 38, 46, 51, 55, 60,</div>
<div class="line"><span class="lineno">    8</span>    21, 34, 37, 47, 50, 56, 59, 61,</div>
<div class="line"><span class="lineno">    9</span>    35, 36, 48, 49, 57, 58, 62, 63,</div>
<div class="line"><span class="lineno">   10</span>)</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
