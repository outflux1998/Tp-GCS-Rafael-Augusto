<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: fontTools.colorLib.geometry Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacefont_tools.html">fontTools</a></li><li class="navelem"><a class="el" href="namespacefont_tools_1_1color_lib.html">colorLib</a></li><li class="navelem"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html">geometry</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">fontTools.colorLib.geometry Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfont_tools_1_1color_lib_1_1geometry_1_1_circle.html">Circle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8fbb80c688cfce156634f040ebad8b94" id="r_a8fbb80c688cfce156634f040ebad8b94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html#a8fbb80c688cfce156634f040ebad8b94">_vector_between</a> (origin, target)</td></tr>
<tr class="separator:a8fbb80c688cfce156634f040ebad8b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469def1882a9eb4ae922072749e49d55" id="r_a469def1882a9eb4ae922072749e49d55"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html#a469def1882a9eb4ae922072749e49d55">_round_point</a> (<a class="el" href="__lapack__subroutines_8h.html#ac7a905bac9d7f26344f719fa232d36b5">pt</a>)</td></tr>
<tr class="separator:a469def1882a9eb4ae922072749e49d55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b581b05dc1e3a8bcb230aaa973a037" id="r_a24b581b05dc1e3a8bcb230aaa973a037"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html#a24b581b05dc1e3a8bcb230aaa973a037">_unit_vector</a> (vec)</td></tr>
<tr class="separator:a24b581b05dc1e3a8bcb230aaa973a037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526f2e81b30e30660ad7b1601b927b98" id="r_a526f2e81b30e30660ad7b1601b927b98"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html#a526f2e81b30e30660ad7b1601b927b98">_rounding_offset</a> (direction)</td></tr>
<tr class="separator:a526f2e81b30e30660ad7b1601b927b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa459de1d26d0e4b76f8ff42bfb9fd40d" id="r_aa459de1d26d0e4b76f8ff42bfb9fd40d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html#aa459de1d26d0e4b76f8ff42bfb9fd40d">round_start_circle_stable_containment</a> (c0, r0, c1, r1)</td></tr>
<tr class="separator:aa459de1d26d0e4b76f8ff42bfb9fd40d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab4f1d4edabcbe7ff9363fb9ace568fd9" id="r_ab4f1d4edabcbe7ff9363fb9ace568fd9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html#ab4f1d4edabcbe7ff9363fb9ace568fd9">_CIRCLE_INSIDE_TOLERANCE</a> = 1e-4</td></tr>
<tr class="separator:ab4f1d4edabcbe7ff9363fb9ace568fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a44ff1683c0631c36178d52abf7266" id="r_a76a44ff1683c0631c36178d52abf7266"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefont_tools_1_1color_lib_1_1geometry.html#a76a44ff1683c0631c36178d52abf7266">_UNIT_VECTOR_THRESHOLD</a> = cos(3 / 8 * pi)</td></tr>
<tr class="separator:a76a44ff1683c0631c36178d52abf7266"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Helpers for manipulating 2D points and vectors in COLR table.</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a469def1882a9eb4ae922072749e49d55" name="a469def1882a9eb4ae922072749e49d55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469def1882a9eb4ae922072749e49d55">&#9670;&#160;</a></span>_round_point()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.colorLib.geometry._round_point </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   11</span><span class="keyword">def </span>_round_point(pt):</div>
<div class="line"><span class="lineno">   12</span>    <span class="keywordflow">return</span> (otRound(pt[0]), otRound(pt[1]))</div>
<div class="line"><span class="lineno">   13</span> </div>
<div class="line"><span class="lineno">   14</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a526f2e81b30e30660ad7b1601b927b98" name="a526f2e81b30e30660ad7b1601b927b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526f2e81b30e30660ad7b1601b927b98">&#9670;&#160;</a></span>_rounding_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.colorLib.geometry._rounding_offset </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>direction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   31</span><span class="keyword">def </span>_rounding_offset(direction):</div>
<div class="line"><span class="lineno">   32</span>    <span class="comment"># Return 2-tuple of -/+ 1.0 or 0.0 approximately based on the direction vector.</span></div>
<div class="line"><span class="lineno">   33</span>    <span class="comment"># We divide the unit circle in 8 equal slices oriented towards the cardinal</span></div>
<div class="line"><span class="lineno">   34</span>    <span class="comment"># (N, E, S, W) and intermediate (NE, SE, SW, NW) directions. To each slice we</span></div>
<div class="line"><span class="lineno">   35</span>    <span class="comment"># map one of the possible cases: -1, 0, +1 for either X and Y coordinate.</span></div>
<div class="line"><span class="lineno">   36</span>    <span class="comment"># E.g. Return (+1.0, -1.0) if unit vector is oriented towards SE, or</span></div>
<div class="line"><span class="lineno">   37</span>    <span class="comment"># (-1.0, 0.0) if it&#39;s pointing West, etc.</span></div>
<div class="line"><span class="lineno">   38</span>    uv = _unit_vector(direction)</div>
<div class="line"><span class="lineno">   39</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> uv:</div>
<div class="line"><span class="lineno">   40</span>        <span class="keywordflow">return</span> (0, 0)</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>    result = []</div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">for</span> uv_component <span class="keywordflow">in</span> uv:</div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">if</span> -_UNIT_VECTOR_THRESHOLD &lt;= uv_component &lt; _UNIT_VECTOR_THRESHOLD:</div>
<div class="line"><span class="lineno">   45</span>            <span class="comment"># unit vector component near 0: direction almost orthogonal to the</span></div>
<div class="line"><span class="lineno">   46</span>            <span class="comment"># direction of the current axis, thus keep coordinate unchanged</span></div>
<div class="line"><span class="lineno">   47</span>            result.append(0)</div>
<div class="line"><span class="lineno">   48</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   49</span>            <span class="comment"># nudge coord by +/- 1.0 in direction of unit vector</span></div>
<div class="line"><span class="lineno">   50</span>            result.append(copysign(1.0, uv_component))</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">return</span> tuple(result)</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a24b581b05dc1e3a8bcb230aaa973a037" name="a24b581b05dc1e3a8bcb230aaa973a037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24b581b05dc1e3a8bcb230aaa973a037">&#9670;&#160;</a></span>_unit_vector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.colorLib.geometry._unit_vector </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   15</span><span class="keyword">def </span>_unit_vector(vec):</div>
<div class="line"><span class="lineno">   16</span>    length = hypot(*vec)</div>
<div class="line"><span class="lineno">   17</span>    <span class="keywordflow">if</span> length == 0:</div>
<div class="line"><span class="lineno">   18</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   19</span>    <span class="keywordflow">return</span> (vec[0] / length, vec[1] / length)</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8fbb80c688cfce156634f040ebad8b94" name="a8fbb80c688cfce156634f040ebad8b94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fbb80c688cfce156634f040ebad8b94">&#9670;&#160;</a></span>_vector_between()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.colorLib.geometry._vector_between </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>origin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">    7</span><span class="keyword">def </span>_vector_between(origin, target):</div>
<div class="line"><span class="lineno">    8</span>    <span class="keywordflow">return</span> (target[0] - origin[0], target[1] - origin[1])</div>
<div class="line"><span class="lineno">    9</span> </div>
<div class="line"><span class="lineno">   10</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa459de1d26d0e4b76f8ff42bfb9fd40d" name="aa459de1d26d0e4b76f8ff42bfb9fd40d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa459de1d26d0e4b76f8ff42bfb9fd40d">&#9670;&#160;</a></span>round_start_circle_stable_containment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.colorLib.geometry.round_start_circle_stable_containment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>c0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>r0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>r1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Round start circle so that it stays inside/outside end circle after rounding.

The rounding of circle coordinates to integers may cause an abrupt change
if the start circle c0 is so close to the end circle c1's perimiter that
it ends up falling outside (or inside) as a result of the rounding.
To keep the gradient unchanged, we nudge it in the right direction.

See:
https://github.com/googlefonts/colr-gradients-spec/issues/204
https://github.com/googlefonts/picosvg/issues/158
</pre> <div class="fragment"><div class="line"><span class="lineno">   79</span><span class="keyword">def </span>round_start_circle_stable_containment(c0, r0, c1, r1):</div>
<div class="line"><span class="lineno">   80</span>    <span class="stringliteral">&quot;&quot;&quot;Round start circle so that it stays inside/outside end circle after rounding.</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">    The rounding of circle coordinates to integers may cause an abrupt change</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">    if the start circle c0 is so close to the end circle c1&#39;s perimiter that</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">    it ends up falling outside (or inside) as a result of the rounding.</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">    To keep the gradient unchanged, we nudge it in the right direction.</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    See:</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">    https://github.com/googlefonts/colr-gradients-spec/issues/204</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">    https://github.com/googlefonts/picosvg/issues/158</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   91</span>    start, end = Circle(c0, r0), Circle(c1, r1)</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    inside_before_round = start.inside(end)</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    round_start = start.round()</div>
<div class="line"><span class="lineno">   96</span>    round_end = end.round()</div>
<div class="line"><span class="lineno">   97</span>    inside_after_round = round_start.inside(round_end)</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">if</span> inside_before_round == inside_after_round:</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">return</span> round_start</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">elif</span> inside_after_round:</div>
<div class="line"><span class="lineno">  102</span>        <span class="comment"># start was outside before rounding: we need to push start away from end</span></div>
<div class="line"><span class="lineno">  103</span>        direction = _vector_between(round_end.centre, round_start.centre)</div>
<div class="line"><span class="lineno">  104</span>        radius_delta = +1.0</div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  106</span>        <span class="comment"># start was inside before rounding: we need to push start towards end</span></div>
<div class="line"><span class="lineno">  107</span>        direction = _vector_between(round_start.centre, round_end.centre)</div>
<div class="line"><span class="lineno">  108</span>        radius_delta = -1.0</div>
<div class="line"><span class="lineno">  109</span>    dx, dy = _rounding_offset(direction)</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    <span class="comment"># At most 2 iterations ought to be enough to converge. Before the loop, we</span></div>
<div class="line"><span class="lineno">  112</span>    <span class="comment"># know the start circle didn&#39;t keep containment after normal rounding; thus</span></div>
<div class="line"><span class="lineno">  113</span>    <span class="comment"># we continue adjusting by -/+ 1.0 until containment is restored.</span></div>
<div class="line"><span class="lineno">  114</span>    <span class="comment"># Normal rounding can at most move each coordinates -/+0.5; in the worst case</span></div>
<div class="line"><span class="lineno">  115</span>    <span class="comment"># both the start and end circle&#39;s centres and radii will be rounded in opposite</span></div>
<div class="line"><span class="lineno">  116</span>    <span class="comment"># directions, e.g. when they move along a 45 degree diagonal:</span></div>
<div class="line"><span class="lineno">  117</span>    <span class="comment">#   c0 = (1.5, 1.5) ===&gt; (2.0, 2.0)</span></div>
<div class="line"><span class="lineno">  118</span>    <span class="comment">#   r0 = 0.5 ===&gt; 1.0</span></div>
<div class="line"><span class="lineno">  119</span>    <span class="comment">#   c1 = (0.499, 0.499) ===&gt; (0.0, 0.0)</span></div>
<div class="line"><span class="lineno">  120</span>    <span class="comment">#   r1 = 2.499 ===&gt; 2.0</span></div>
<div class="line"><span class="lineno">  121</span>    <span class="comment"># In this example, the relative distance between the circles, calculated</span></div>
<div class="line"><span class="lineno">  122</span>    <span class="comment"># as r1 - (r0 + distance(c0, c1)) is initially 0.57437 (c0 is inside c1), and</span></div>
<div class="line"><span class="lineno">  123</span>    <span class="comment"># -1.82842 after rounding (c0 is now outside c1). Nudging c0 by -1.0 on both</span></div>
<div class="line"><span class="lineno">  124</span>    <span class="comment"># x and y axes moves it towards c1 by hypot(-1.0, -1.0) = 1.41421. Two of these</span></div>
<div class="line"><span class="lineno">  125</span>    <span class="comment"># moves cover twice that distance, which is enough to restore containment.</span></div>
<div class="line"><span class="lineno">  126</span>    max_attempts = 2</div>
<div class="line"><span class="lineno">  127</span>    <span class="keywordflow">for</span> _ <span class="keywordflow">in</span> range(max_attempts):</div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">if</span> round_start.concentric(round_end):</div>
<div class="line"><span class="lineno">  129</span>            <span class="comment"># can&#39;t move c0 towards c1 (they are the same), so we change the radius</span></div>
<div class="line"><span class="lineno">  130</span>            round_start.radius += radius_delta</div>
<div class="line"><span class="lineno">  131</span>            <span class="keyword">assert</span> round_start.radius &gt;= 0</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  133</span>            round_start.move(dx, dy)</div>
<div class="line"><span class="lineno">  134</span>        <span class="keywordflow">if</span> inside_before_round == round_start.inside(round_end):</div>
<div class="line"><span class="lineno">  135</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  136</span>    <span class="keywordflow">else</span>:  <span class="comment"># likely a bug</span></div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordflow">raise</span> AssertionError(</div>
<div class="line"><span class="lineno">  138</span>            f<span class="stringliteral">&quot;Rounding circle {start} &quot;</span></div>
<div class="line"><span class="lineno">  139</span>            f<span class="stringliteral">&quot;{&#39;inside&#39; if inside_before_round else &#39;outside&#39;} &quot;</span></div>
<div class="line"><span class="lineno">  140</span>            f<span class="stringliteral">&quot;{end} failed after {max_attempts} attempts!&quot;</span></div>
<div class="line"><span class="lineno">  141</span>        )</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordflow">return</span> round_start</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab4f1d4edabcbe7ff9363fb9ace568fd9" name="ab4f1d4edabcbe7ff9363fb9ace568fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4f1d4edabcbe7ff9363fb9ace568fd9">&#9670;&#160;</a></span>_CIRCLE_INSIDE_TOLERANCE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int fontTools.colorLib.geometry._CIRCLE_INSIDE_TOLERANCE = 1e-4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a76a44ff1683c0631c36178d52abf7266" name="a76a44ff1683c0631c36178d52abf7266"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a44ff1683c0631c36178d52abf7266">&#9670;&#160;</a></span>_UNIT_VECTOR_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fontTools.colorLib.geometry._UNIT_VECTOR_THRESHOLD = cos(3 / 8 * pi)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
