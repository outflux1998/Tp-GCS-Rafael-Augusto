<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tp_Gcs: gensim.topic_coherence.indirect_confirmation_measure Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Tp_Gcs<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegensim.html">gensim</a></li><li class="navelem"><a class="el" href="namespacegensim_1_1topic__coherence.html">topic_coherence</a></li><li class="navelem"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html">indirect_confirmation_measure</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">gensim.topic_coherence.indirect_confirmation_measure Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgensim_1_1topic__coherence_1_1indirect__confirmation__measure_1_1_context_vector_computer.html">ContextVectorComputer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afacec54d15e4b93f70f144187fa492bf" id="r_afacec54d15e4b93f70f144187fa492bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#afacec54d15e4b93f70f144187fa492bf">word2vec_similarity</a> (segmented_topics, accumulator, with_std=False, with_support=False)</td></tr>
<tr class="separator:afacec54d15e4b93f70f144187fa492bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace706aea105f2f9307a3d32ec66c5f81" id="r_ace706aea105f2f9307a3d32ec66c5f81"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#ace706aea105f2f9307a3d32ec66c5f81">cosine_similarity</a> (segmented_topics, accumulator, topics, measure='nlr', gamma=1, with_std=False, with_support=False)</td></tr>
<tr class="separator:ace706aea105f2f9307a3d32ec66c5f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af215669044e62c62df8f8fc2a030e1fa" id="r_af215669044e62c62df8f8fc2a030e1fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#af215669044e62c62df8f8fc2a030e1fa">_pair_npmi</a> (pair, accumulator)</td></tr>
<tr class="separator:af215669044e62c62df8f8fc2a030e1fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2169d2e6a2c94caaf420236471571387" id="r_a2169d2e6a2c94caaf420236471571387"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#a2169d2e6a2c94caaf420236471571387">_cossim</a> (cv1, cv2)</td></tr>
<tr class="separator:a2169d2e6a2c94caaf420236471571387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17adfa495a55642966710d9a64e8675e" id="r_a17adfa495a55642966710d9a64e8675e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#a17adfa495a55642966710d9a64e8675e">_magnitude</a> (sparse_vec)</td></tr>
<tr class="separator:a17adfa495a55642966710d9a64e8675e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85180bf897721eaf78409e7d95f366a3" id="r_a85180bf897721eaf78409e7d95f366a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#a85180bf897721eaf78409e7d95f366a3">_map_to_contiguous</a> (ids_iterable)</td></tr>
<tr class="separator:a85180bf897721eaf78409e7d95f366a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bfcb9ec39bd784eb62233c31f4136d0" id="r_a5bfcb9ec39bd784eb62233c31f4136d0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#a5bfcb9ec39bd784eb62233c31f4136d0">_key_for_segment</a> (segment, topic_words)</td></tr>
<tr class="separator:a5bfcb9ec39bd784eb62233c31f4136d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a39a78bbd72c9efb170db79785de93cda" id="r_a39a78bbd72c9efb170db79785de93cda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacegensim_1_1topic__coherence_1_1indirect__confirmation__measure.html#a39a78bbd72c9efb170db79785de93cda">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:a39a78bbd72c9efb170db79785de93cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This module contains functions to compute confirmation on a pair of words or word subsets.

Notes
-----
The advantage of indirect confirmation measure is that it computes similarity of words in :math:`W'` and
:math:`W^{*}` with respect to direct confirmations to all words. Eg. Suppose `x` and `z` are both competing
brands of cars, which semantically support each other. However, both brands are seldom mentioned
together in documents in the reference corpus. But their confirmations to other words like “road”
or “speed” do strongly correlate. This would be reflected by an indirect confirmation measure.
Thus, indirect confirmation measures may capture semantic support that direct measures would miss.

The formula used to compute indirect confirmation measure is

.. math::

    \widetilde{m}_{sim(m, \gamma)}(W', W^{*}) = s_{sim}(\vec{v}^{\,}_{m,\gamma}(W'), \vec{v}^{\,}_{m,\gamma}(W^{*}))


where :math:`s_{sim}` can be cosine, dice or jaccard similarity and

.. math::

    \vec{v}^{\,}_{m,\gamma}(W') = \Bigg \{{\sum_{w_{i} \in W'}^{ } m(w_{i}, w_{j})^{\gamma}}\Bigg \}_{j = 1,...,|W|}</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a2169d2e6a2c94caaf420236471571387" name="a2169d2e6a2c94caaf420236471571387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2169d2e6a2c94caaf420236471571387">&#9670;&#160;</a></span>_cossim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure._cossim </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cv1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cv2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  322</span><span class="keyword">def </span>_cossim(cv1, cv2):</div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">return</span> cv1.T.dot(cv2)[0, 0] / (_magnitude(cv1) * _magnitude(cv2))</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bfcb9ec39bd784eb62233c31f4136d0" name="a5bfcb9ec39bd784eb62233c31f4136d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bfcb9ec39bd784eb62233c31f4136d0">&#9670;&#160;</a></span>_key_for_segment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure._key_for_segment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>segment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>topic_words</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">A segment may have a single number of an iterable of them.</pre> <div class="fragment"><div class="line"><span class="lineno">  340</span><span class="keyword">def </span>_key_for_segment(segment, topic_words):</div>
<div class="line"><span class="lineno">  341</span>    <span class="stringliteral">&quot;&quot;&quot;A segment may have a single number of an iterable of them.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  342</span>    segment_key = tuple(segment) <span class="keywordflow">if</span> hasattr(segment, <span class="stringliteral">&#39;__iter__&#39;</span>) <span class="keywordflow">else</span> segment</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">return</span> segment_key, topic_words</div>
</div><!-- fragment -->
</div>
</div>
<a id="a17adfa495a55642966710d9a64e8675e" name="a17adfa495a55642966710d9a64e8675e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17adfa495a55642966710d9a64e8675e">&#9670;&#160;</a></span>_magnitude()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure._magnitude </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sparse_vec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  326</span><span class="keyword">def </span>_magnitude(sparse_vec):</div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">return</span> np.sqrt(np.sum(sparse_vec.data ** 2))</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a85180bf897721eaf78409e7d95f366a3" name="a85180bf897721eaf78409e7d95f366a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85180bf897721eaf78409e7d95f366a3">&#9670;&#160;</a></span>_map_to_contiguous()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure._map_to_contiguous </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ids_iterable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  330</span><span class="keyword">def </span>_map_to_contiguous(ids_iterable):</div>
<div class="line"><span class="lineno">  331</span>    uniq_ids = {}</div>
<div class="line"><span class="lineno">  332</span>    n = 0</div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">for</span> id_ <span class="keywordflow">in</span> itertools.chain.from_iterable(ids_iterable):</div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordflow">if</span> id_ <span class="keywordflow">not</span> <span class="keywordflow">in</span> uniq_ids:</div>
<div class="line"><span class="lineno">  335</span>            uniq_ids[id_] = n</div>
<div class="line"><span class="lineno">  336</span>            n += 1</div>
<div class="line"><span class="lineno">  337</span>    <span class="keywordflow">return</span> uniq_ids</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="af215669044e62c62df8f8fc2a030e1fa" name="af215669044e62c62df8f8fc2a030e1fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af215669044e62c62df8f8fc2a030e1fa">&#9670;&#160;</a></span>_pair_npmi()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure._pair_npmi </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pair</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>accumulator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Compute normalized pairwise mutual information (**NPMI**) between a pair of words.

Parameters
----------
pair : (int, int)
    The pair of words (word_id1, word_id2).
accumulator : :class:`~gensim.topic_coherence.text_analysis.InvertedIndexAccumulator`
    Word occurrence accumulator from probability_estimation.

Return
------
float
    NPMI between a pair of words.</pre> <div class="fragment"><div class="line"><span class="lineno">  303</span><span class="keyword">def </span>_pair_npmi(pair, accumulator):</div>
<div class="line"><span class="lineno">  304</span>    <span class="stringliteral">&quot;&quot;&quot;Compute normalized pairwise mutual information (**NPMI**) between a pair of words.</span></div>
<div class="line"><span class="lineno">  305</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  306</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  307</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  308</span><span class="stringliteral">    pair : (int, int)</span></div>
<div class="line"><span class="lineno">  309</span><span class="stringliteral">        The pair of words (word_id1, word_id2).</span></div>
<div class="line"><span class="lineno">  310</span><span class="stringliteral">    accumulator : :class:`~gensim.topic_coherence.text_analysis.InvertedIndexAccumulator`</span></div>
<div class="line"><span class="lineno">  311</span><span class="stringliteral">        Word occurrence accumulator from probability_estimation.</span></div>
<div class="line"><span class="lineno">  312</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  313</span><span class="stringliteral">    Return</span></div>
<div class="line"><span class="lineno">  314</span><span class="stringliteral">    ------</span></div>
<div class="line"><span class="lineno">  315</span><span class="stringliteral">    float</span></div>
<div class="line"><span class="lineno">  316</span><span class="stringliteral">        NPMI between a pair of words.</span></div>
<div class="line"><span class="lineno">  317</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  318</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">return</span> log_ratio_measure([[pair]], accumulator, <span class="keyword">True</span>)[0]</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="ace706aea105f2f9307a3d32ec66c5f81" name="ace706aea105f2f9307a3d32ec66c5f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace706aea105f2f9307a3d32ec66c5f81">&#9670;&#160;</a></span>cosine_similarity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure.cosine_similarity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>segmented_topics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>accumulator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>topics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>measure</em> = <code>'nlr'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gamma</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>with_std</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>with_support</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Calculate the indirect cosine measure.

Parameters
----------
segmented_topics: list of lists of (int, `numpy.ndarray`)
    Output from the segmentation module of the segmented topics.
accumulator: :class:`~gensim.topic_coherence.text_analysis.InvertedIndexAccumulator`
    Output from the probability_estimation module. Is an topics: Topics obtained from the trained topic model.
measure : str, optional
    Direct confirmation measure to be used. Supported values are "nlr" (normalized log ratio).
gamma: float, optional
    Gamma value for computing :math:`W'` and :math:`W^{*}` vectors.
with_std : bool
    True to also include standard deviation across topic segment sets in addition to the mean coherence
    for each topic; default is False.
with_support : bool
    True to also include support across topic segments. The support is defined as the number of pairwise similarity
    comparisons were used to compute the overall topic coherence.

Returns
-------
list
    List of indirect cosine similarity measure for each topic.

Examples
--------
.. sourcecode:: pycon

    &gt;&gt;&gt; from gensim.corpora.dictionary import Dictionary
    &gt;&gt;&gt; from gensim.topic_coherence import indirect_confirmation_measure, text_analysis
    &gt;&gt;&gt; import numpy as np
    &gt;&gt;&gt;
    &gt;&gt;&gt; # create accumulator
    &gt;&gt;&gt; dictionary = Dictionary()
    &gt;&gt;&gt; dictionary.id2token = {1: 'fake', 2: 'tokens'}
    &gt;&gt;&gt; accumulator = text_analysis.InvertedIndexAccumulator({1, 2}, dictionary)
    &gt;&gt;&gt; accumulator._inverted_index = {0: {2, 3, 4}, 1: {3, 5}}
    &gt;&gt;&gt; accumulator._num_docs = 5
    &gt;&gt;&gt;
    &gt;&gt;&gt; # create topics
    &gt;&gt;&gt; topics = [np.array([1, 2])]
    &gt;&gt;&gt;
    &gt;&gt;&gt; # create segmentation
    &gt;&gt;&gt; segmentation = [[(1, np.array([1, 2])), (2, np.array([1, 2]))]]
    &gt;&gt;&gt; obtained = indirect_confirmation_measure.cosine_similarity(segmentation, accumulator, topics, 'nlr', 1)
    &gt;&gt;&gt; print(obtained[0])
    0.623018926945</pre> <div class="fragment"><div class="line"><span class="lineno">  119</span>                      gamma=1, with_std=<span class="keyword">False</span>, with_support=<span class="keyword">False</span>):</div>
<div class="line"><span class="lineno">  120</span>    <span class="stringliteral">&quot;&quot;&quot;Calculate the indirect cosine measure.</span></div>
<div class="line"><span class="lineno">  121</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  122</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">  123</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral">    segmented_topics: list of lists of (int, `numpy.ndarray`)</span></div>
<div class="line"><span class="lineno">  125</span><span class="stringliteral">        Output from the segmentation module of the segmented topics.</span></div>
<div class="line"><span class="lineno">  126</span><span class="stringliteral">    accumulator: :class:`~gensim.topic_coherence.text_analysis.InvertedIndexAccumulator`</span></div>
<div class="line"><span class="lineno">  127</span><span class="stringliteral">        Output from the probability_estimation module. Is an topics: Topics obtained from the trained topic model.</span></div>
<div class="line"><span class="lineno">  128</span><span class="stringliteral">    measure : str, optional</span></div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">        Direct confirmation measure to be used. Supported values are &quot;nlr&quot; (normalized log ratio).</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral">    gamma: float, optional</span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">        Gamma value for computing :math:`W&#39;` and :math:`W^{*}` vectors.</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">    with_std : bool</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">        True to also include standard deviation across topic segment sets in addition to the mean coherence</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">        for each topic; default is False.</span></div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">    with_support : bool</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">        True to also include support across topic segments. The support is defined as the number of pairwise similarity</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">        comparisons were used to compute the overall topic coherence.</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">    list</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral">        List of indirect cosine similarity measure for each topic.</span></div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">    .. sourcecode:: pycon</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">        &gt;&gt;&gt; from gensim.corpora.dictionary import Dictionary</span></div>
<div class="line"><span class="lineno">  149</span><span class="stringliteral">        &gt;&gt;&gt; from gensim.topic_coherence import indirect_confirmation_measure, text_analysis</span></div>
<div class="line"><span class="lineno">  150</span><span class="stringliteral">        &gt;&gt;&gt; import numpy as np</span></div>
<div class="line"><span class="lineno">  151</span><span class="stringliteral">        &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">  152</span><span class="stringliteral">        &gt;&gt;&gt; # create accumulator</span></div>
<div class="line"><span class="lineno">  153</span><span class="stringliteral">        &gt;&gt;&gt; dictionary = Dictionary()</span></div>
<div class="line"><span class="lineno">  154</span><span class="stringliteral">        &gt;&gt;&gt; dictionary.id2token = {1: &#39;fake&#39;, 2: &#39;tokens&#39;}</span></div>
<div class="line"><span class="lineno">  155</span><span class="stringliteral">        &gt;&gt;&gt; accumulator = text_analysis.InvertedIndexAccumulator({1, 2}, dictionary)</span></div>
<div class="line"><span class="lineno">  156</span><span class="stringliteral">        &gt;&gt;&gt; accumulator._inverted_index = {0: {2, 3, 4}, 1: {3, 5}}</span></div>
<div class="line"><span class="lineno">  157</span><span class="stringliteral">        &gt;&gt;&gt; accumulator._num_docs = 5</span></div>
<div class="line"><span class="lineno">  158</span><span class="stringliteral">        &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">  159</span><span class="stringliteral">        &gt;&gt;&gt; # create topics</span></div>
<div class="line"><span class="lineno">  160</span><span class="stringliteral">        &gt;&gt;&gt; topics = [np.array([1, 2])]</span></div>
<div class="line"><span class="lineno">  161</span><span class="stringliteral">        &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">  162</span><span class="stringliteral">        &gt;&gt;&gt; # create segmentation</span></div>
<div class="line"><span class="lineno">  163</span><span class="stringliteral">        &gt;&gt;&gt; segmentation = [[(1, np.array([1, 2])), (2, np.array([1, 2]))]]</span></div>
<div class="line"><span class="lineno">  164</span><span class="stringliteral">        &gt;&gt;&gt; obtained = indirect_confirmation_measure.cosine_similarity(segmentation, accumulator, topics, &#39;nlr&#39;, 1)</span></div>
<div class="line"><span class="lineno">  165</span><span class="stringliteral">        &gt;&gt;&gt; print(obtained[0])</span></div>
<div class="line"><span class="lineno">  166</span><span class="stringliteral">        0.623018926945</span></div>
<div class="line"><span class="lineno">  167</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  168</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  169</span>    context_vectors = ContextVectorComputer(measure, topics, accumulator, gamma)</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>    topic_coherences = []</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">for</span> topic_words, topic_segments <span class="keywordflow">in</span> zip(topics, segmented_topics):</div>
<div class="line"><span class="lineno">  173</span>        topic_words = tuple(topic_words)  <span class="comment"># because tuples are hashable</span></div>
<div class="line"><span class="lineno">  174</span>        segment_sims = np.zeros(len(topic_segments))</div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">for</span> i, (w_prime, w_star) <span class="keywordflow">in</span> enumerate(topic_segments):</div>
<div class="line"><span class="lineno">  176</span>            w_prime_cv = context_vectors[w_prime, topic_words]</div>
<div class="line"><span class="lineno">  177</span>            w_star_cv = context_vectors[w_star, topic_words]</div>
<div class="line"><span class="lineno">  178</span>            segment_sims[i] = _cossim(w_prime_cv, w_star_cv)</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>        topic_coherences.append(aggregate_segment_sims(segment_sims, with_std, with_support))</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">return</span> topic_coherences</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="afacec54d15e4b93f70f144187fa492bf" name="afacec54d15e4b93f70f144187fa492bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afacec54d15e4b93f70f144187fa492bf">&#9670;&#160;</a></span>word2vec_similarity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure.word2vec_similarity </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>segmented_topics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>accumulator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>with_std</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>with_support</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">For each topic segmentation, compute average cosine similarity using a
:class:`~gensim.topic_coherence.text_analysis.WordVectorsAccumulator`.

Parameters
----------
segmented_topics : list of lists of (int, `numpy.ndarray`)
    Output from the :func:`~gensim.topic_coherence.segmentation.s_one_set`.
accumulator : :class:`~gensim.topic_coherence.text_analysis.WordVectorsAccumulator` or
              :class:`~gensim.topic_coherence.text_analysis.InvertedIndexAccumulator`
    Word occurrence accumulator.
with_std : bool, optional
    True to also include standard deviation across topic segment sets
    in addition to the mean coherence for each topic.
with_support : bool, optional
    True to also include support across topic segments. The support is defined as
    the number of pairwise similarity comparisons were used to compute the overall topic coherence.

Returns
-------
list of (float[, float[, int]])
    Сosine word2vec similarities per topic (with std/support if `with_std`, `with_support`).

Examples
--------
.. sourcecode:: pycon

    &gt;&gt;&gt; import numpy as np
    &gt;&gt;&gt; from gensim.corpora.dictionary import Dictionary
    &gt;&gt;&gt; from gensim.topic_coherence import indirect_confirmation_measure
    &gt;&gt;&gt; from gensim.topic_coherence import text_analysis
    &gt;&gt;&gt;
    &gt;&gt;&gt; # create segmentation
    &gt;&gt;&gt; segmentation = [[(1, np.array([1, 2])), (2, np.array([1, 2]))]]
    &gt;&gt;&gt;
    &gt;&gt;&gt; # create accumulator
    &gt;&gt;&gt; dictionary = Dictionary()
    &gt;&gt;&gt; dictionary.id2token = {1: 'fake', 2: 'tokens'}
    &gt;&gt;&gt; accumulator = text_analysis.WordVectorsAccumulator({1, 2}, dictionary)
    &gt;&gt;&gt; _ = accumulator.accumulate([['fake', 'tokens'], ['tokens', 'fake']], 5)
    &gt;&gt;&gt;
    &gt;&gt;&gt; # should be (0.726752426218 0.00695475919227)
    &gt;&gt;&gt; mean, std = indirect_confirmation_measure.word2vec_similarity(segmentation, accumulator, with_std=True)[0]</pre> <div class="fragment"><div class="line"><span class="lineno">   44</span><span class="keyword">def </span>word2vec_similarity(segmented_topics, accumulator, with_std=False, with_support=False):</div>
<div class="line"><span class="lineno">   45</span>    <span class="stringliteral">&quot;&quot;&quot;For each topic segmentation, compute average cosine similarity using a</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral">    :class:`~gensim.topic_coherence.text_analysis.WordVectorsAccumulator`.</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">    Parameters</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">    ----------</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">    segmented_topics : list of lists of (int, `numpy.ndarray`)</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">        Output from the :func:`~gensim.topic_coherence.segmentation.s_one_set`.</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    accumulator : :class:`~gensim.topic_coherence.text_analysis.WordVectorsAccumulator` or</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">                  :class:`~gensim.topic_coherence.text_analysis.InvertedIndexAccumulator`</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">        Word occurrence accumulator.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">    with_std : bool, optional</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">        True to also include standard deviation across topic segment sets</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">        in addition to the mean coherence for each topic.</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">    with_support : bool, optional</span></div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">        True to also include support across topic segments. The support is defined as</span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">        the number of pairwise similarity comparisons were used to compute the overall topic coherence.</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    Returns</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">    -------</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">    list of (float[, float[, int]])</span></div>
<div class="line"><span class="lineno">   65</span><span class="stringliteral">        Сosine word2vec similarities per topic (with std/support if `with_std`, `with_support`).</span></div>
<div class="line"><span class="lineno">   66</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   67</span><span class="stringliteral">    Examples</span></div>
<div class="line"><span class="lineno">   68</span><span class="stringliteral">    --------</span></div>
<div class="line"><span class="lineno">   69</span><span class="stringliteral">    .. sourcecode:: pycon</span></div>
<div class="line"><span class="lineno">   70</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   71</span><span class="stringliteral">        &gt;&gt;&gt; import numpy as np</span></div>
<div class="line"><span class="lineno">   72</span><span class="stringliteral">        &gt;&gt;&gt; from gensim.corpora.dictionary import Dictionary</span></div>
<div class="line"><span class="lineno">   73</span><span class="stringliteral">        &gt;&gt;&gt; from gensim.topic_coherence import indirect_confirmation_measure</span></div>
<div class="line"><span class="lineno">   74</span><span class="stringliteral">        &gt;&gt;&gt; from gensim.topic_coherence import text_analysis</span></div>
<div class="line"><span class="lineno">   75</span><span class="stringliteral">        &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">        &gt;&gt;&gt; # create segmentation</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral">        &gt;&gt;&gt; segmentation = [[(1, np.array([1, 2])), (2, np.array([1, 2]))]]</span></div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">        &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral">        &gt;&gt;&gt; # create accumulator</span></div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">        &gt;&gt;&gt; dictionary = Dictionary()</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">        &gt;&gt;&gt; dictionary.id2token = {1: &#39;fake&#39;, 2: &#39;tokens&#39;}</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">        &gt;&gt;&gt; accumulator = text_analysis.WordVectorsAccumulator({1, 2}, dictionary)</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">        &gt;&gt;&gt; _ = accumulator.accumulate([[&#39;fake&#39;, &#39;tokens&#39;], [&#39;tokens&#39;, &#39;fake&#39;]], 5)</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">        &gt;&gt;&gt;</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">        &gt;&gt;&gt; # should be (0.726752426218 0.00695475919227)</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">        &gt;&gt;&gt; mean, std = indirect_confirmation_measure.word2vec_similarity(segmentation, accumulator, with_std=True)[0]</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   89</span>    topic_coherences = []</div>
<div class="line"><span class="lineno">   90</span>    total_oov = 0</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">for</span> topic_index, topic_segments <span class="keywordflow">in</span> enumerate(segmented_topics):</div>
<div class="line"><span class="lineno">   93</span>        segment_sims = []</div>
<div class="line"><span class="lineno">   94</span>        num_oov = 0</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">for</span> w_prime, w_star <span class="keywordflow">in</span> topic_segments:</div>
<div class="line"><span class="lineno">   96</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(w_prime, <span class="stringliteral">&#39;__iter__&#39;</span>):</div>
<div class="line"><span class="lineno">   97</span>                w_prime = [w_prime]</div>
<div class="line"><span class="lineno">   98</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(w_star, <span class="stringliteral">&#39;__iter__&#39;</span>):</div>
<div class="line"><span class="lineno">   99</span>                w_star = [w_star]</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  102</span>                segment_sims.append(accumulator.ids_similarity(w_prime, w_star))</div>
<div class="line"><span class="lineno">  103</span>            <span class="keywordflow">except</span> ZeroDivisionError:</div>
<div class="line"><span class="lineno">  104</span>                num_oov += 1</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">if</span> num_oov &gt; 0:</div>
<div class="line"><span class="lineno">  107</span>            total_oov += 1</div>
<div class="line"><span class="lineno">  108</span>            logger.warning(</div>
<div class="line"><span class="lineno">  109</span>                <span class="stringliteral">&quot;%d terms for topic %d are not in word2vec model vocabulary&quot;</span>,</div>
<div class="line"><span class="lineno">  110</span>                num_oov, topic_index)</div>
<div class="line"><span class="lineno">  111</span>        topic_coherences.append(aggregate_segment_sims(segment_sims, with_std, with_support))</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>    <span class="keywordflow">if</span> total_oov &gt; 0:</div>
<div class="line"><span class="lineno">  114</span>        logger.warning(<span class="stringliteral">&quot;%d terms for are not in word2vec model vocabulary&quot;</span>, total_oov)</div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">return</span> topic_coherences</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span> </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a39a78bbd72c9efb170db79785de93cda" name="a39a78bbd72c9efb170db79785de93cda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a78bbd72c9efb170db79785de93cda">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gensim.topic_coherence.indirect_confirmation_measure.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
